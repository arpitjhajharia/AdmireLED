(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Cy(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var h0={exports:{}},Ou={};var Mw;function s2(){if(Mw)return Ou;Mw=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var m in a)m!=="key"&&(l[m]=a[m])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:u,ref:a!==void 0?a:null,props:l}}return Ou.Fragment=e,Ou.jsx=t,Ou.jsxs=t,Ou}var Ow;function i2(){return Ow||(Ow=1,h0.exports=s2()),h0.exports}var d=i2(),f0={exports:{}},Ue={};var Lw;function a2(){if(Lw)return Ue;Lw=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function D(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,B={};function z(M,W,me){this.props=M,this.context=W,this.refs=B,this.updater=me||L}z.prototype.isReactComponent={},z.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},z.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ne(){}ne.prototype=z.prototype;function Z(M,W,me){this.props=M,this.context=W,this.refs=B,this.updater=me||L}var Se=Z.prototype=new ne;Se.constructor=Z,R(Se,z.prototype),Se.isPureReactComponent=!0;var se=Array.isArray;function pe(){}var S={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function k(M,W,me){var we=me.ref;return{$$typeof:s,type:M,key:W,ref:we!==void 0?we:null,props:me}}function V(M,W){return k(M.type,W,M.props)}function T(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function P(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(me){return W[me]})}var C=/\/+/g;function _e(M,W){return typeof M=="object"&&M!==null&&M.key!=null?P(""+M.key):W.toString(36)}function be(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(pe,pe):(M.status="pending",M.then(function(W){M.status==="pending"&&(M.status="fulfilled",M.value=W)},function(W){M.status==="pending"&&(M.status="rejected",M.reason=W)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function U(M,W,me,we,te){var ee=typeof M;(ee==="undefined"||ee==="boolean")&&(M=null);var ce=!1;if(M===null)ce=!0;else switch(ee){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(M.$$typeof){case s:case e:ce=!0;break;case x:return ce=M._init,U(ce(M._payload),W,me,we,te)}}if(ce)return te=te(M),ce=we===""?"."+_e(M,0):we,se(te)?(me="",ce!=null&&(me=ce.replace(C,"$&/")+"/"),U(te,W,me,"",function(Ge){return Ge})):te!=null&&(T(te)&&(te=V(te,me+(te.key==null||M&&M.key===te.key?"":(""+te.key).replace(C,"$&/")+"/")+ce)),W.push(te)),1;ce=0;var ve=we===""?".":we+":";if(se(M))for(var Ae=0;Ae<M.length;Ae++)we=M[Ae],ee=ve+_e(we,Ae),ce+=U(we,W,me,ee,te);else if(Ae=D(M),typeof Ae=="function")for(M=Ae.call(M),Ae=0;!(we=M.next()).done;)we=we.value,ee=ve+_e(we,Ae++),ce+=U(we,W,me,ee,te);else if(ee==="object"){if(typeof M.then=="function")return U(be(M),W,me,we,te);throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ce}function oe(M,W,me){if(M==null)return M;var we=[],te=0;return U(M,we,"","",function(ee){return W.call(me,ee,te++)}),we}function fe(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(me){(M._status===0||M._status===-1)&&(M._status=1,M._result=me)},function(me){(M._status===0||M._status===-1)&&(M._status=2,M._result=me)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var Ve=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}},Fe={map:oe,forEach:function(M,W,me){oe(M,function(){W.apply(this,arguments)},me)},count:function(M){var W=0;return oe(M,function(){W++}),W},toArray:function(M){return oe(M,function(W){return W})||[]},only:function(M){if(!T(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ue.Activity=_,Ue.Children=Fe,Ue.Component=z,Ue.Fragment=t,Ue.Profiler=a,Ue.PureComponent=Z,Ue.StrictMode=r,Ue.Suspense=g,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(M){return S.H.useMemoCache(M)}},Ue.cache=function(M){return function(){return M.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(M,W,me){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var we=R({},M.props),te=M.key;if(W!=null)for(ee in W.key!==void 0&&(te=""+W.key),W)!N.call(W,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&W.ref===void 0||(we[ee]=W[ee]);var ee=arguments.length-2;if(ee===1)we.children=me;else if(1<ee){for(var ce=Array(ee),ve=0;ve<ee;ve++)ce[ve]=arguments[ve+2];we.children=ce}return k(M.type,te,we)},Ue.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ue.createElement=function(M,W,me){var we,te={},ee=null;if(W!=null)for(we in W.key!==void 0&&(ee=""+W.key),W)N.call(W,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(te[we]=W[we]);var ce=arguments.length-2;if(ce===1)te.children=me;else if(1<ce){for(var ve=Array(ce),Ae=0;Ae<ce;Ae++)ve[Ae]=arguments[Ae+2];te.children=ve}if(M&&M.defaultProps)for(we in ce=M.defaultProps,ce)te[we]===void 0&&(te[we]=ce[we]);return k(M,ee,te)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(M){return{$$typeof:m,render:M}},Ue.isValidElement=T,Ue.lazy=function(M){return{$$typeof:x,_payload:{_status:-1,_result:M},_init:fe}},Ue.memo=function(M,W){return{$$typeof:y,type:M,compare:W===void 0?null:W}},Ue.startTransition=function(M){var W=S.T,me={};S.T=me;try{var we=M(),te=S.S;te!==null&&te(me,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(pe,Ve)}catch(ee){Ve(ee)}finally{W!==null&&me.types!==null&&(W.types=me.types),S.T=W}},Ue.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Ue.use=function(M){return S.H.use(M)},Ue.useActionState=function(M,W,me){return S.H.useActionState(M,W,me)},Ue.useCallback=function(M,W){return S.H.useCallback(M,W)},Ue.useContext=function(M){return S.H.useContext(M)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(M,W){return S.H.useDeferredValue(M,W)},Ue.useEffect=function(M,W){return S.H.useEffect(M,W)},Ue.useEffectEvent=function(M){return S.H.useEffectEvent(M)},Ue.useId=function(){return S.H.useId()},Ue.useImperativeHandle=function(M,W,me){return S.H.useImperativeHandle(M,W,me)},Ue.useInsertionEffect=function(M,W){return S.H.useInsertionEffect(M,W)},Ue.useLayoutEffect=function(M,W){return S.H.useLayoutEffect(M,W)},Ue.useMemo=function(M,W){return S.H.useMemo(M,W)},Ue.useOptimistic=function(M,W){return S.H.useOptimistic(M,W)},Ue.useReducer=function(M,W,me){return S.H.useReducer(M,W,me)},Ue.useRef=function(M){return S.H.useRef(M)},Ue.useState=function(M){return S.H.useState(M)},Ue.useSyncExternalStore=function(M,W,me){return S.H.useSyncExternalStore(M,W,me)},Ue.useTransition=function(){return S.H.useTransition()},Ue.version="19.2.3",Ue}var Uw;function ky(){return Uw||(Uw=1,f0.exports=a2()),f0.exports}var nt=ky();const Bt=Cy(nt);var m0={exports:{}},Lu={},p0={exports:{}},g0={};var zw;function o2(){return zw||(zw=1,(function(s){function e(U,oe){var fe=U.length;U.push(oe);e:for(;0<fe;){var Ve=fe-1>>>1,Fe=U[Ve];if(0<a(Fe,oe))U[Ve]=oe,U[fe]=Fe,fe=Ve;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var oe=U[0],fe=U.pop();if(fe!==oe){U[0]=fe;e:for(var Ve=0,Fe=U.length,M=Fe>>>1;Ve<M;){var W=2*(Ve+1)-1,me=U[W],we=W+1,te=U[we];if(0>a(me,fe))we<Fe&&0>a(te,me)?(U[Ve]=te,U[we]=fe,Ve=we):(U[Ve]=me,U[W]=fe,Ve=W);else if(we<Fe&&0>a(te,fe))U[Ve]=te,U[we]=fe,Ve=we;else break e}}return oe}function a(U,oe){var fe=U.sortIndex-oe.sortIndex;return fe!==0?fe:U.id-oe.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var u=Date,m=u.now();s.unstable_now=function(){return u.now()-m}}var g=[],y=[],x=1,_=null,E=3,D=!1,L=!1,R=!1,B=!1,z=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function Se(U){for(var oe=t(y);oe!==null;){if(oe.callback===null)r(y);else if(oe.startTime<=U)r(y),oe.sortIndex=oe.expirationTime,e(g,oe);else break;oe=t(y)}}function se(U){if(R=!1,Se(U),!L)if(t(g)!==null)L=!0,pe||(pe=!0,P());else{var oe=t(y);oe!==null&&be(se,oe.startTime-U)}}var pe=!1,S=-1,N=5,k=-1;function V(){return B?!0:!(s.unstable_now()-k<N)}function T(){if(B=!1,pe){var U=s.unstable_now();k=U;var oe=!0;try{e:{L=!1,R&&(R=!1,ne(S),S=-1),D=!0;var fe=E;try{t:{for(Se(U),_=t(g);_!==null&&!(_.expirationTime>U&&V());){var Ve=_.callback;if(typeof Ve=="function"){_.callback=null,E=_.priorityLevel;var Fe=Ve(_.expirationTime<=U);if(U=s.unstable_now(),typeof Fe=="function"){_.callback=Fe,Se(U),oe=!0;break t}_===t(g)&&r(g),Se(U)}else r(g);_=t(g)}if(_!==null)oe=!0;else{var M=t(y);M!==null&&be(se,M.startTime-U),oe=!1}}break e}finally{_=null,E=fe,D=!1}oe=void 0}}finally{oe?P():pe=!1}}}var P;if(typeof Z=="function")P=function(){Z(T)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,_e=C.port2;C.port1.onmessage=T,P=function(){_e.postMessage(null)}}else P=function(){z(T,0)};function be(U,oe){S=z(function(){U(s.unstable_now())},oe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(U){U.callback=null},s.unstable_forceFrameRate=function(U){0>U||125<U||(N=0<U?Math.floor(1e3/U):5)},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_next=function(U){switch(E){case 1:case 2:case 3:var oe=3;break;default:oe=E}var fe=E;E=oe;try{return U()}finally{E=fe}},s.unstable_requestPaint=function(){B=!0},s.unstable_runWithPriority=function(U,oe){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var fe=E;E=U;try{return oe()}finally{E=fe}},s.unstable_scheduleCallback=function(U,oe,fe){var Ve=s.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ve+fe:Ve):fe=Ve,U){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=fe+Fe,U={id:x++,callback:oe,priorityLevel:U,startTime:fe,expirationTime:Fe,sortIndex:-1},fe>Ve?(U.sortIndex=fe,e(y,U),t(g)===null&&U===t(y)&&(R?(ne(S),S=-1):R=!0,be(se,fe-Ve))):(U.sortIndex=Fe,e(g,U),L||D||(L=!0,pe||(pe=!0,P()))),U},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(U){var oe=E;return function(){var fe=E;E=oe;try{return U.apply(this,arguments)}finally{E=fe}}}})(g0)),g0}var Bw;function l2(){return Bw||(Bw=1,p0.exports=o2()),p0.exports}var y0={exports:{}},Pn={};var qw;function c2(){if(qw)return Pn;qw=1;var s=ky();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,y,x){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:g,containerInfo:y,implementation:x}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Pn.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,x)},Pn.flushSync=function(g){var y=u.T,x=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=y,r.p=x,r.d.f()}},Pn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},Pn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Pn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,_=m(x,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,D=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:D}):x==="script"&&r.d.X(g,{crossOrigin:_,integrity:E,fetchPriority:D,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Pn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},Pn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,_=m(x,y.crossOrigin);r.d.L(g,x,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Pn.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},Pn.requestFormReset=function(g){r.d.r(g)},Pn.unstable_batchedUpdates=function(g,y){return g(y)},Pn.useFormState=function(g,y,x){return u.H.useFormState(g,y,x)},Pn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Pn.version="19.2.3",Pn}var Fw;function iI(){if(Fw)return y0.exports;Fw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch{}}return s(),y0.exports=c2(),y0.exports}var Hw;function u2(){if(Hw)return Lu;Hw=1;var s=l2(),e=ky(),t=iI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(r(188))}function y(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,c=i;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return g(f),n;if(p===c)return g(f),i;p=p.sibling}throw Error(r(188))}if(o.return!==c.return)o=f,c=p;else{for(var v=!1,I=f.child;I;){if(I===o){v=!0,o=f,c=p;break}if(I===c){v=!0,c=f,o=p;break}I=I.sibling}if(!v){for(I=p.child;I;){if(I===o){v=!0,o=p,c=f;break}if(I===c){v=!0,c=p,o=f;break}I=I.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function x(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=x(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=T&&n[T]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function _e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case z:return"Profiler";case B:return"StrictMode";case se:return"Suspense";case pe:return"SuspenseList";case k:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case L:return"Portal";case Z:return n.displayName||"Context";case ne:return(n._context.displayName||"Context")+".Consumer";case Se:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return i=n.displayName||null,i!==null?i:_e(n.type)||"Memo";case N:i=n._payload,n=n._init;try{return _e(n(i))}catch{}}return null}var be=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Ve=[],Fe=-1;function M(n){return{current:n}}function W(n){0>Fe||(n.current=Ve[Fe],Ve[Fe]=null,Fe--)}function me(n,i){Fe++,Ve[Fe]=n.current,n.current=i}var we=M(null),te=M(null),ee=M(null),ce=M(null);function ve(n,i){switch(me(ee,i),me(te,n),me(we,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?iw(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=iw(i),n=aw(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(we),me(we,n)}function Ae(){W(we),W(te),W(ee)}function Ge(n){n.memoizedState!==null&&me(ce,n);var i=we.current,o=aw(i,n.type);i!==o&&(me(te,n),me(we,o))}function xn(n){te.current===n&&(W(we),W(te)),ce.current===n&&(W(ce),ju._currentValue=fe)}var dn,lr;function wn(n){if(dn===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);dn=i&&i[1]||"",lr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dn+n+lr}var zn=!1;function Dn(n,i){if(!n||zn)return"";zn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(J){var K=J}Reflect.construct(n,[],ae)}else{try{ae.call()}catch(J){K=J}n.call(ae.prototype)}}else{try{throw Error()}catch(J){K=J}(ae=n())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(J){if(J&&K&&typeof J.stack=="string")return[J.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),v=p[0],I=p[1];if(v&&I){var j=v.split(`
`),Q=I.split(`
`);for(f=c=0;c<j.length&&!j[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(c===j.length||f===Q.length)for(c=j.length-1,f=Q.length-1;1<=c&&0<=f&&j[c]!==Q[f];)f--;for(;1<=c&&0<=f;c--,f--)if(j[c]!==Q[f]){if(c!==1||f!==1)do if(c--,f--,0>f||j[c]!==Q[f]){var re=`
`+j[c].replace(" at new "," at ");return n.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",n.displayName)),re}while(1<=c&&0<=f);break}}}finally{zn=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?wn(o):""}function Yn(n,i){switch(n.tag){case 26:case 27:case 5:return wn(n.type);case 16:return wn("Lazy");case 13:return n.child!==i&&i!==null?wn("Suspense Fallback"):wn("Suspense");case 19:return wn("SuspenseList");case 0:case 15:return Dn(n.type,!1);case 11:return Dn(n.type.render,!1);case 1:return Dn(n.type,!0);case 31:return wn("Activity");default:return""}}function Wn(n){try{var i="",o=null;do i+=Yn(n,o),o=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var st=Object.prototype.hasOwnProperty,ht=s.unstable_scheduleCallback,jn=s.unstable_cancelCallback,is=s.unstable_shouldYield,$=s.unstable_requestPaint,Ie=s.unstable_now,rt=s.unstable_getCurrentPriorityLevel,ue=s.unstable_ImmediatePriority,Xt=s.unstable_UserBlockingPriority,wt=s.unstable_NormalPriority,as=s.unstable_LowPriority,Hs=s.unstable_IdlePriority,Oc=s.log,Lr=s.unstable_setDisableYieldValue,Bn=null,Ee=null;function Me(n){if(typeof Oc=="function"&&Lr(n),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode(Bn,n)}catch{}}var Qe=Math.clz32?Math.clz32:ja,Ur=Math.log,Ei=Math.LN2;function ja(n){return n>>>=0,n===0?32:31-(Ur(n)/Ei|0)|0}var os=256,Pa=262144,Jt=4194304;function ls(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function cs(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,p=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var I=c&134217727;return I!==0?(c=I&~p,c!==0?f=ls(c):(v&=I,v!==0?f=ls(v):o||(o=I&~n,o!==0&&(f=ls(o))))):(I=c&~p,I!==0?f=ls(I):v!==0?f=ls(v):o||(o=c&~n,o!==0&&(f=ls(o)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,o=i&-i,p>=o||p===32&&(o&4194048)!==0)?i:f}function zr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function gp(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uh(){var n=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),n}function us(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Va(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function yp(n,i,o,c,f,p){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var I=n.entanglements,j=n.expirationTimes,Q=n.hiddenUpdates;for(o=v&~o;0<o;){var re=31-Qe(o),ae=1<<re;I[re]=0,j[re]=-1;var K=Q[re];if(K!==null)for(Q[re]=null,re=0;re<K.length;re++){var J=K[re];J!==null&&(J.lane&=-536870913)}o&=~ae}c!==0&&Ma(n,c,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(v&~i))}function Ma(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-Qe(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Lc(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-Qe(o),f=1<<c;f&i|n[c]&i&&(n[c]|=i),o&=~f}}function Uc(n,i){var o=i&-i;return o=(o&42)!==0?1:Oa(o),(o&(n.suspendedLanes|i))!==0?0:o}function Oa(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Gs(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function dh(){var n=oe.p;return n!==0?n:(n=window.event,n===void 0?32:Rw(n.type))}function Br(n,i){var o=oe.p;try{return oe.p=n,i()}finally{oe.p=o}}var qr=Math.random().toString(36).slice(2),Zt="__reactFiber$"+qr,pn="__reactProps$"+qr,ds="__reactContainer$"+qr,Ko="__reactEvents$"+qr,_p="__reactListeners$"+qr,hh="__reactHandles$"+qr,fh="__reactResources$"+qr,hs="__reactMarker$"+qr;function Yo(n){delete n[Zt],delete n[pn],delete n[Ko],delete n[_p],delete n[hh]}function fs(n){var i=n[Zt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[ds]||o[Zt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=fw(n);n!==null;){if(o=n[Zt])return o;n=fw(n)}return i}n=o,o=n.parentNode}return null}function Er(n){if(n=n[Zt]||n[ds]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function cr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function ms(n){var i=n[fh];return i||(i=n[fh]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function en(n){n[hs]=!0}var zc=new Set,Bc={};function ps(n,i){gs(n,i),gs(n+"Capture",i)}function gs(n,i){for(Bc[n]=i,n=0;n<i.length;n++)zc.add(i[n])}var qc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fc={},Hc={};function mh(n){return st.call(Hc,n)?!0:st.call(Fc,n)?!1:qc.test(n)?Hc[n]=!0:(Fc[n]=!0,!1)}function Wo(n,i,o){if(mh(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function ur(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function tn(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}function gn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ti(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Gc(n,i,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,p=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,p.call(this,v)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ft(n){if(!n._valueTracker){var i=Ti(n)?"checked":"value";n._valueTracker=Gc(n,i,""+n[i])}}function La(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=Ti(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function ys(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ua=/[\n"\\]/g;function Xn(n){return n.replace(Ua,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Xo(n,i,o,c,f,p,v,I){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+gn(i)):n.value!==""+gn(i)&&(n.value=""+gn(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?Qc(n,v,gn(i)):o!=null?Qc(n,v,gn(o)):c!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?n.name=""+gn(I):n.removeAttribute("name")}function ph(n,i,o,c,f,p,v,I){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){ft(n);return}o=o!=null?""+gn(o):"",i=i!=null?""+gn(i):o,I||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=I?n.checked:!!c,n.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),ft(n)}function Qc(n,i,o){i==="number"&&ys(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ii(n,i,o,c){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+gn(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function gh(n,i,o){if(i!=null&&(i=""+gn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+gn(o):""}function Si(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(r(92));if(be(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=gn(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),ft(n)}function Jn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var yh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $c(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||yh.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Kc(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&o[f]!==c&&$c(n,f,c)}else for(var p in i)i.hasOwnProperty(p)&&$c(n,p,i[p])}function Jo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ai=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zo(n){return Ai.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Fr(){}var Yc=null;function Tr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ni=null,_s=null;function za(n){var i=Er(n);if(i&&(n=i.stateNode)){var o=n[pn]||null;e:switch(n=i.stateNode,i.type){case"input":if(Xo(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Xn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var f=c[pn]||null;if(!f)throw Error(r(90));Xo(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&La(c)}break e;case"textarea":gh(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ii(n,!!o.multiple,i,!1)}}}var el=!1;function Ri(n,i,o){if(el)return n(i,o);el=!0;try{var c=n(i);return c}finally{if(el=!1,(Ni!==null||_s!==null)&&(hf(),Ni&&(i=Ni,n=_s,_s=Ni=null,za(i),n)))for(i=0;i<n.length;i++)za(n[i])}}function Hr(n,i){var o=n.stateNode;if(o===null)return null;var c=o[pn]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=!1;if(Ir)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){Ba=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{Ba=!1}var bs=null,Wc=null,qa=null;function Xc(){if(qa)return qa;var n,i=Wc,o=i.length,c,f="value"in bs?bs.value:bs.textContent,p=f.length;for(n=0;n<o&&i[n]===f[n];n++);var v=o-n;for(c=1;c<=v&&i[o-c]===f[p-c];c++);return qa=f.slice(n,1<c?1-c:void 0)}function Fa(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Qs(){return!0}function Gr(){return!1}function En(n){function i(o,c,f,p,v){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var I in n)n.hasOwnProperty(I)&&(o=n[I],this[I]=o?o(p):p[I]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Qs:Gr,this.isPropagationStopped=Gr,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),i}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vs=En($s),Ci=_({},$s,{view:0,detail:0}),Jc=En(Ci),ki,tl,xs,nl=_({},Ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Di,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xs&&(xs&&n.type==="mousemove"?(ki=n.screenX-xs.screenX,tl=n.screenY-xs.screenY):tl=ki=0,xs=n),ki)},movementY:function(n){return"movementY"in n?n.movementY:tl}}),Zc=En(nl),Ha=_({},nl,{dataTransfer:0}),bh=En(Ha),vh=_({},Ci,{relatedTarget:0}),Ga=En(vh),eu=_({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),xh=En(eu),rl=_({},$s,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),wh=En(rl),Eh=_({},$s,{data:0}),ws=En(Eh),Th={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ih={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ah(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Sh[n])?!!i[n]:!1}function Di(){return Ah}var qn=_({},Ci,{key:function(n){if(n.key){var i=Th[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Fa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ih[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Di,charCode:function(n){return n.type==="keypress"?Fa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Nh=En(qn),Rh=_({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ks=En(Rh),h=_({},Ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Di}),b=En(h),w=_({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=En(w),H=_({},nl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),X=En(H),ge=_({},$s,{newState:0,oldState:0}),ze=En(ge),Gt=[9,13,27,32],ct=Ir&&"CompositionEvent"in window,Rt=null;Ir&&"documentMode"in document&&(Rt=document.documentMode);var Sr=Ir&&"TextEvent"in window&&!Rt,Es=Ir&&(!ct||Rt&&8<Rt&&11>=Rt),Qr=" ",$r=!1;function Qa(n,i){switch(n){case"keyup":return Gt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var il=!1;function NN(n,i){switch(n){case"compositionend":return sl(i);case"keypress":return i.which!==32?null:($r=!0,Qr);case"textInput":return n=i.data,n===Qr&&$r?null:n;default:return null}}function RN(n,i){if(il)return n==="compositionend"||!ct&&Qa(n,i)?(n=Xc(),qa=Wc=bs=null,il=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Es&&i.locale!=="ko"?null:i.data;default:return null}}var CN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gb(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!CN[n.type]:i==="textarea"}function yb(n,i,o,c){Ni?_s?_s.push(c):_s=[c]:Ni=c,i=bf(i,"onChange"),0<i.length&&(o=new vs("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var tu=null,nu=null;function kN(n){Zx(n,0)}function Ch(n){var i=cr(n);if(La(i))return n}function _b(n,i){if(n==="change")return i}var bb=!1;if(Ir){var bp;if(Ir){var vp="oninput"in document;if(!vp){var vb=document.createElement("div");vb.setAttribute("oninput","return;"),vp=typeof vb.oninput=="function"}bp=vp}else bp=!1;bb=bp&&(!document.documentMode||9<document.documentMode)}function xb(){tu&&(tu.detachEvent("onpropertychange",wb),nu=tu=null)}function wb(n){if(n.propertyName==="value"&&Ch(nu)){var i=[];yb(i,nu,n,Tr(n)),Ri(kN,i)}}function DN(n,i,o){n==="focusin"?(xb(),tu=i,nu=o,tu.attachEvent("onpropertychange",wb)):n==="focusout"&&xb()}function jN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ch(nu)}function PN(n,i){if(n==="click")return Ch(i)}function VN(n,i){if(n==="input"||n==="change")return Ch(i)}function MN(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var dr=typeof Object.is=="function"?Object.is:MN;function ru(n,i){if(dr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!st.call(i,f)||!dr(n[f],i[f]))return!1}return!0}function Eb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Tb(n,i){var o=Eb(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Eb(o)}}function Ib(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ib(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Sb(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=ys(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=ys(n.document)}return i}function xp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var ON=Ir&&"documentMode"in document&&11>=document.documentMode,al=null,wp=null,su=null,Ep=!1;function Ab(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ep||al==null||al!==ys(c)||(c=al,"selectionStart"in c&&xp(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),su&&ru(su,c)||(su=c,c=bf(wp,"onSelect"),0<c.length&&(i=new vs("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=al)))}function $a(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var ol={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionrun:$a("Transition","TransitionRun"),transitionstart:$a("Transition","TransitionStart"),transitioncancel:$a("Transition","TransitionCancel"),transitionend:$a("Transition","TransitionEnd")},Tp={},Nb={};Ir&&(Nb=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function Ka(n){if(Tp[n])return Tp[n];if(!ol[n])return n;var i=ol[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in Nb)return Tp[n]=i[o];return n}var Rb=Ka("animationend"),Cb=Ka("animationiteration"),kb=Ka("animationstart"),LN=Ka("transitionrun"),UN=Ka("transitionstart"),zN=Ka("transitioncancel"),Db=Ka("transitionend"),jb=new Map,Ip="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ip.push("scrollEnd");function Kr(n,i){jb.set(n,i),ps(i,[n])}var kh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}},Ar=[],ll=0,Sp=0;function Dh(){for(var n=ll,i=Sp=ll=0;i<n;){var o=Ar[i];Ar[i++]=null;var c=Ar[i];Ar[i++]=null;var f=Ar[i];Ar[i++]=null;var p=Ar[i];if(Ar[i++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}p!==0&&Pb(o,f,p)}}function jh(n,i,o,c){Ar[ll++]=n,Ar[ll++]=i,Ar[ll++]=o,Ar[ll++]=c,Sp|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Ap(n,i,o,c){return jh(n,i,o,c),Ph(n)}function Ya(n,i){return jh(n,null,null,i),Ph(n)}function Pb(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,p=n.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&i!==null&&(f=31-Qe(o),n=p.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=o|536870912),p):null}function Ph(n){if(50<Su)throw Su=0,Mg=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var cl={};function BN(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(n,i,o,c){return new BN(n,i,o,c)}function Np(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ys(n,i){var o=n.alternate;return o===null?(o=hr(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Vb(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Vh(n,i,o,c,f,p){var v=0;if(c=n,typeof n=="function")Np(n)&&(v=1);else if(typeof n=="string")v=QR(n,o,we.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case k:return n=hr(31,o,i,f),n.elementType=k,n.lanes=p,n;case R:return Wa(o.children,f,p,i);case B:v=8,f|=24;break;case z:return n=hr(12,o,i,f|2),n.elementType=z,n.lanes=p,n;case se:return n=hr(13,o,i,f),n.elementType=se,n.lanes=p,n;case pe:return n=hr(19,o,i,f),n.elementType=pe,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Z:v=10;break e;case ne:v=9;break e;case Se:v=11;break e;case S:v=14;break e;case N:v=16,c=null;break e}v=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return i=hr(v,o,i,f),i.elementType=n,i.type=c,i.lanes=p,i}function Wa(n,i,o,c){return n=hr(7,n,c,i),n.lanes=o,n}function Rp(n,i,o){return n=hr(6,n,null,i),n.lanes=o,n}function Mb(n){var i=hr(18,null,null,0);return i.stateNode=n,i}function Cp(n,i,o){return i=hr(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Ob=new WeakMap;function Nr(n,i){if(typeof n=="object"&&n!==null){var o=Ob.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Wn(i)},Ob.set(n,i),i)}return{value:n,source:i,stack:Wn(i)}}var ul=[],dl=0,Mh=null,iu=0,Rr=[],Cr=0,ji=null,Ts=1,Is="";function Ws(n,i){ul[dl++]=iu,ul[dl++]=Mh,Mh=n,iu=i}function Lb(n,i,o){Rr[Cr++]=Ts,Rr[Cr++]=Is,Rr[Cr++]=ji,ji=n;var c=Ts;n=Is;var f=32-Qe(c)-1;c&=~(1<<f),o+=1;var p=32-Qe(i)+f;if(30<p){var v=f-f%5;p=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Ts=1<<32-Qe(i)+f|o<<f|c,Is=p+n}else Ts=1<<p|o<<f|c,Is=n}function kp(n){n.return!==null&&(Ws(n,1),Lb(n,1,0))}function Dp(n){for(;n===Mh;)Mh=ul[--dl],ul[dl]=null,iu=ul[--dl],ul[dl]=null;for(;n===ji;)ji=Rr[--Cr],Rr[Cr]=null,Is=Rr[--Cr],Rr[Cr]=null,Ts=Rr[--Cr],Rr[Cr]=null}function Ub(n,i){Rr[Cr++]=Ts,Rr[Cr++]=Is,Rr[Cr++]=ji,Ts=i.id,Is=i.overflow,ji=n}var Tn=null,St=null,et=!1,Pi=null,kr=!1,jp=Error(r(519));function Vi(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw au(Nr(i,n)),jp}function zb(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[Zt]=n,i[pn]=c,o){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(o=0;o<Nu.length;o++)Ke(Nu[o],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":Ke("invalid",i),ph(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ke("invalid",i);break;case"textarea":Ke("invalid",i),Si(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||rw(i.textContent,o)?(c.popover!=null&&(Ke("beforetoggle",i),Ke("toggle",i)),c.onScroll!=null&&Ke("scroll",i),c.onScrollEnd!=null&&Ke("scrollend",i),c.onClick!=null&&(i.onclick=Fr),i=!0):i=!1,i||Vi(n,!0)}function Bb(n){for(Tn=n.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:kr=!1;return;case 27:case 3:kr=!0;return;default:Tn=Tn.return}}function hl(n){if(n!==Tn)return!1;if(!et)return Bb(n),et=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Xg(n.type,n.memoizedProps)),o=!o),o&&St&&Vi(n),Bb(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));St=hw(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));St=hw(n)}else i===27?(i=St,Yi(n.type)?(n=n0,n0=null,St=n):St=i):St=Tn?jr(n.stateNode.nextSibling):null;return!0}function Xa(){St=Tn=null,et=!1}function Pp(){var n=Pi;return n!==null&&(nr===null?nr=n:nr.push.apply(nr,n),Pi=null),n}function au(n){Pi===null?Pi=[n]:Pi.push(n)}var Vp=M(null),Ja=null,Xs=null;function Mi(n,i,o){me(Vp,i._currentValue),i._currentValue=o}function Js(n){n._currentValue=Vp.current,W(Vp)}function Mp(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function Op(n,i,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var v=f.child;p=p.firstContext;e:for(;p!==null;){var I=p;p=f;for(var j=0;j<i.length;j++)if(I.context===i[j]){p.lanes|=o,I=p.alternate,I!==null&&(I.lanes|=o),Mp(p.return,o,n),c||(v=null);break e}p=I.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=o,p=v.alternate,p!==null&&(p.lanes|=o),Mp(v,o,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function fl(n,i,o,c){n=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var I=f.type;dr(f.pendingProps.value,v.value)||(n!==null?n.push(I):n=[I])}}else if(f===ce.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(ju):n=[ju])}f=f.return}n!==null&&Op(i,n,o,c),i.flags|=262144}function Oh(n){for(n=n.firstContext;n!==null;){if(!dr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Za(n){Ja=n,Xs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function In(n){return qb(Ja,n)}function Lh(n,i){return Ja===null&&Za(n),qb(n,i)}function qb(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Xs===null){if(n===null)throw Error(r(308));Xs=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Xs=Xs.next=i;return o}var qN=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},FN=s.unstable_scheduleCallback,HN=s.unstable_NormalPriority,nn={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lp(){return{controller:new qN,data:new Map,refCount:0}}function ou(n){n.refCount--,n.refCount===0&&FN(HN,function(){n.controller.abort()})}var lu=null,Up=0,ml=0,pl=null;function GN(n,i){if(lu===null){var o=lu=[];Up=0,ml=qg(),pl={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Up++,i.then(Fb,Fb),i}function Fb(){if(--Up===0&&lu!==null){pl!==null&&(pl.status="fulfilled");var n=lu;lu=null,ml=0,pl=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function QN(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Hb=U.S;U.S=function(n,i){Ax=Ie(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&GN(n,i),Hb!==null&&Hb(n,i)};var eo=M(null);function zp(){var n=eo.current;return n!==null?n:Et.pooledCache}function Uh(n,i){i===null?me(eo,eo.current):me(eo,i.pool)}function Gb(){var n=zp();return n===null?null:{parent:nn._currentValue,pool:n}}var gl=Error(r(460)),Bp=Error(r(474)),zh=Error(r(542)),Bh={then:function(){}};function Qb(n){return n=n.status,n==="fulfilled"||n==="rejected"}function $b(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Fr,Fr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Yb(n),n;default:if(typeof i.status=="string")i.then(Fr,Fr);else{if(n=Et,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Yb(n),n}throw no=i,gl}}function to(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(no=o,gl):o}}var no=null;function Kb(){if(no===null)throw Error(r(459));var n=no;return no=null,n}function Yb(n){if(n===gl||n===zh)throw Error(r(483))}var yl=null,cu=0;function qh(n){var i=cu;return cu+=1,yl===null&&(yl=[]),$b(yl,n,i)}function uu(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Fh(n,i){throw i.$$typeof===E?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Wb(n){function i(q,O){if(n){var G=q.deletions;G===null?(q.deletions=[O],q.flags|=16):G.push(O)}}function o(q,O){if(!n)return null;for(;O!==null;)i(q,O),O=O.sibling;return null}function c(q){for(var O=new Map;q!==null;)q.key!==null?O.set(q.key,q):O.set(q.index,q),q=q.sibling;return O}function f(q,O){return q=Ys(q,O),q.index=0,q.sibling=null,q}function p(q,O,G){return q.index=G,n?(G=q.alternate,G!==null?(G=G.index,G<O?(q.flags|=67108866,O):G):(q.flags|=67108866,O)):(q.flags|=1048576,O)}function v(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function I(q,O,G,ie){return O===null||O.tag!==6?(O=Rp(G,q.mode,ie),O.return=q,O):(O=f(O,G),O.return=q,O)}function j(q,O,G,ie){var De=G.type;return De===R?re(q,O,G.props.children,ie,G.key):O!==null&&(O.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===N&&to(De)===O.type)?(O=f(O,G.props),uu(O,G),O.return=q,O):(O=Vh(G.type,G.key,G.props,null,q.mode,ie),uu(O,G),O.return=q,O)}function Q(q,O,G,ie){return O===null||O.tag!==4||O.stateNode.containerInfo!==G.containerInfo||O.stateNode.implementation!==G.implementation?(O=Cp(G,q.mode,ie),O.return=q,O):(O=f(O,G.children||[]),O.return=q,O)}function re(q,O,G,ie,De){return O===null||O.tag!==7?(O=Wa(G,q.mode,ie,De),O.return=q,O):(O=f(O,G),O.return=q,O)}function ae(q,O,G){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Rp(""+O,q.mode,G),O.return=q,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case D:return G=Vh(O.type,O.key,O.props,null,q.mode,G),uu(G,O),G.return=q,G;case L:return O=Cp(O,q.mode,G),O.return=q,O;case N:return O=to(O),ae(q,O,G)}if(be(O)||P(O))return O=Wa(O,q.mode,G,null),O.return=q,O;if(typeof O.then=="function")return ae(q,qh(O),G);if(O.$$typeof===Z)return ae(q,Lh(q,O),G);Fh(q,O)}return null}function K(q,O,G,ie){var De=O!==null?O.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return De!==null?null:I(q,O,""+G,ie);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case D:return G.key===De?j(q,O,G,ie):null;case L:return G.key===De?Q(q,O,G,ie):null;case N:return G=to(G),K(q,O,G,ie)}if(be(G)||P(G))return De!==null?null:re(q,O,G,ie,null);if(typeof G.then=="function")return K(q,O,qh(G),ie);if(G.$$typeof===Z)return K(q,O,Lh(q,G),ie);Fh(q,G)}return null}function J(q,O,G,ie,De){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return q=q.get(G)||null,I(O,q,""+ie,De);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case D:return q=q.get(ie.key===null?G:ie.key)||null,j(O,q,ie,De);case L:return q=q.get(ie.key===null?G:ie.key)||null,Q(O,q,ie,De);case N:return ie=to(ie),J(q,O,G,ie,De)}if(be(ie)||P(ie))return q=q.get(G)||null,re(O,q,ie,De,null);if(typeof ie.then=="function")return J(q,O,G,qh(ie),De);if(ie.$$typeof===Z)return J(q,O,G,Lh(O,ie),De);Fh(O,ie)}return null}function Ne(q,O,G,ie){for(var De=null,it=null,Ce=O,He=O=0,Je=null;Ce!==null&&He<G.length;He++){Ce.index>He?(Je=Ce,Ce=null):Je=Ce.sibling;var at=K(q,Ce,G[He],ie);if(at===null){Ce===null&&(Ce=Je);break}n&&Ce&&at.alternate===null&&i(q,Ce),O=p(at,O,He),it===null?De=at:it.sibling=at,it=at,Ce=Je}if(He===G.length)return o(q,Ce),et&&Ws(q,He),De;if(Ce===null){for(;He<G.length;He++)Ce=ae(q,G[He],ie),Ce!==null&&(O=p(Ce,O,He),it===null?De=Ce:it.sibling=Ce,it=Ce);return et&&Ws(q,He),De}for(Ce=c(Ce);He<G.length;He++)Je=J(Ce,q,He,G[He],ie),Je!==null&&(n&&Je.alternate!==null&&Ce.delete(Je.key===null?He:Je.key),O=p(Je,O,He),it===null?De=Je:it.sibling=Je,it=Je);return n&&Ce.forEach(function(ea){return i(q,ea)}),et&&Ws(q,He),De}function Pe(q,O,G,ie){if(G==null)throw Error(r(151));for(var De=null,it=null,Ce=O,He=O=0,Je=null,at=G.next();Ce!==null&&!at.done;He++,at=G.next()){Ce.index>He?(Je=Ce,Ce=null):Je=Ce.sibling;var ea=K(q,Ce,at.value,ie);if(ea===null){Ce===null&&(Ce=Je);break}n&&Ce&&ea.alternate===null&&i(q,Ce),O=p(ea,O,He),it===null?De=ea:it.sibling=ea,it=ea,Ce=Je}if(at.done)return o(q,Ce),et&&Ws(q,He),De;if(Ce===null){for(;!at.done;He++,at=G.next())at=ae(q,at.value,ie),at!==null&&(O=p(at,O,He),it===null?De=at:it.sibling=at,it=at);return et&&Ws(q,He),De}for(Ce=c(Ce);!at.done;He++,at=G.next())at=J(Ce,q,He,at.value,ie),at!==null&&(n&&at.alternate!==null&&Ce.delete(at.key===null?He:at.key),O=p(at,O,He),it===null?De=at:it.sibling=at,it=at);return n&&Ce.forEach(function(r2){return i(q,r2)}),et&&Ws(q,He),De}function xt(q,O,G,ie){if(typeof G=="object"&&G!==null&&G.type===R&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case D:e:{for(var De=G.key;O!==null;){if(O.key===De){if(De=G.type,De===R){if(O.tag===7){o(q,O.sibling),ie=f(O,G.props.children),ie.return=q,q=ie;break e}}else if(O.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===N&&to(De)===O.type){o(q,O.sibling),ie=f(O,G.props),uu(ie,G),ie.return=q,q=ie;break e}o(q,O);break}else i(q,O);O=O.sibling}G.type===R?(ie=Wa(G.props.children,q.mode,ie,G.key),ie.return=q,q=ie):(ie=Vh(G.type,G.key,G.props,null,q.mode,ie),uu(ie,G),ie.return=q,q=ie)}return v(q);case L:e:{for(De=G.key;O!==null;){if(O.key===De)if(O.tag===4&&O.stateNode.containerInfo===G.containerInfo&&O.stateNode.implementation===G.implementation){o(q,O.sibling),ie=f(O,G.children||[]),ie.return=q,q=ie;break e}else{o(q,O);break}else i(q,O);O=O.sibling}ie=Cp(G,q.mode,ie),ie.return=q,q=ie}return v(q);case N:return G=to(G),xt(q,O,G,ie)}if(be(G))return Ne(q,O,G,ie);if(P(G)){if(De=P(G),typeof De!="function")throw Error(r(150));return G=De.call(G),Pe(q,O,G,ie)}if(typeof G.then=="function")return xt(q,O,qh(G),ie);if(G.$$typeof===Z)return xt(q,O,Lh(q,G),ie);Fh(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,O!==null&&O.tag===6?(o(q,O.sibling),ie=f(O,G),ie.return=q,q=ie):(o(q,O),ie=Rp(G,q.mode,ie),ie.return=q,q=ie),v(q)):o(q,O)}return function(q,O,G,ie){try{cu=0;var De=xt(q,O,G,ie);return yl=null,De}catch(Ce){if(Ce===gl||Ce===zh)throw Ce;var it=hr(29,Ce,null,q.mode);return it.lanes=ie,it.return=q,it}}}var ro=Wb(!0),Xb=Wb(!1),Oi=!1;function qp(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Li(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ui(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ut&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Ph(n),Pb(n,null,o),i}return jh(n,c,i,o),Ph(n)}function du(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Lc(n,o)}}function Hp(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=v:p=p.next=v,o=o.next}while(o!==null);p===null?f=p=i:p=p.next=i}else f=p=i;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Gp=!1;function hu(){if(Gp){var n=pl;if(n!==null)throw n}}function fu(n,i,o,c){Gp=!1;var f=n.updateQueue;Oi=!1;var p=f.firstBaseUpdate,v=f.lastBaseUpdate,I=f.shared.pending;if(I!==null){f.shared.pending=null;var j=I,Q=j.next;j.next=null,v===null?p=Q:v.next=Q,v=j;var re=n.alternate;re!==null&&(re=re.updateQueue,I=re.lastBaseUpdate,I!==v&&(I===null?re.firstBaseUpdate=Q:I.next=Q,re.lastBaseUpdate=j))}if(p!==null){var ae=f.baseState;v=0,re=Q=j=null,I=p;do{var K=I.lane&-536870913,J=K!==I.lane;if(J?(Xe&K)===K:(c&K)===K){K!==0&&K===ml&&(Gp=!0),re!==null&&(re=re.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ne=n,Pe=I;K=i;var xt=o;switch(Pe.tag){case 1:if(Ne=Pe.payload,typeof Ne=="function"){ae=Ne.call(xt,ae,K);break e}ae=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Pe.payload,K=typeof Ne=="function"?Ne.call(xt,ae,K):Ne,K==null)break e;ae=_({},ae,K);break e;case 2:Oi=!0}}K=I.callback,K!==null&&(n.flags|=64,J&&(n.flags|=8192),J=f.callbacks,J===null?f.callbacks=[K]:J.push(K))}else J={lane:K,tag:I.tag,payload:I.payload,callback:I.callback,next:null},re===null?(Q=re=J,j=ae):re=re.next=J,v|=K;if(I=I.next,I===null){if(I=f.shared.pending,I===null)break;J=I,I=J.next,J.next=null,f.lastBaseUpdate=J,f.shared.pending=null}}while(!0);re===null&&(j=ae),f.baseState=j,f.firstBaseUpdate=Q,f.lastBaseUpdate=re,p===null&&(f.shared.lanes=0),Hi|=v,n.lanes=v,n.memoizedState=ae}}function Jb(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Zb(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Jb(o[n],i)}var _l=M(null),Hh=M(0);function ev(n,i){n=oi,me(Hh,n),me(_l,i),oi=n|i.baseLanes}function Qp(){me(Hh,oi),me(_l,_l.current)}function $p(){oi=Hh.current,W(_l),W(Hh)}var fr=M(null),Dr=null;function zi(n){var i=n.alternate;me(Qt,Qt.current&1),me(fr,n),Dr===null&&(i===null||_l.current!==null||i.memoizedState!==null)&&(Dr=n)}function Kp(n){me(Qt,Qt.current),me(fr,n),Dr===null&&(Dr=n)}function tv(n){n.tag===22?(me(Qt,Qt.current),me(fr,n),Dr===null&&(Dr=n)):Bi()}function Bi(){me(Qt,Qt.current),me(fr,fr.current)}function mr(n){W(fr),Dr===n&&(Dr=null),W(Qt)}var Qt=M(0);function Gh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||e0(o)||t0(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zs=0,Be=null,bt=null,rn=null,Qh=!1,bl=!1,so=!1,$h=0,mu=0,vl=null,$N=0;function Ut(){throw Error(r(321))}function Yp(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!dr(n[o],i[o]))return!1;return!0}function Wp(n,i,o,c,f,p){return Zs=p,Be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,U.H=n===null||n.memoizedState===null?Lv:dg,so=!1,p=o(c,f),so=!1,bl&&(p=rv(i,o,c,f)),nv(n),p}function nv(n){U.H=yu;var i=bt!==null&&bt.next!==null;if(Zs=0,rn=bt=Be=null,Qh=!1,mu=0,vl=null,i)throw Error(r(300));n===null||sn||(n=n.dependencies,n!==null&&Oh(n)&&(sn=!0))}function rv(n,i,o,c){Be=n;var f=0;do{if(bl&&(vl=null),mu=0,bl=!1,25<=f)throw Error(r(301));if(f+=1,rn=bt=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}U.H=Uv,p=i(o,c)}while(bl);return p}function KN(){var n=U.H,i=n.useState()[0];return i=typeof i.then=="function"?pu(i):i,n=n.useState()[0],(bt!==null?bt.memoizedState:null)!==n&&(Be.flags|=1024),i}function Xp(){var n=$h!==0;return $h=0,n}function Jp(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Zp(n){if(Qh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Qh=!1}Zs=0,rn=bt=Be=null,bl=!1,mu=$h=0,vl=null}function Fn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Be.memoizedState=rn=n:rn=rn.next=n,rn}function $t(){if(bt===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=bt.next;var i=rn===null?Be.memoizedState:rn.next;if(i!==null)rn=i,bt=n;else{if(n===null)throw Be.alternate===null?Error(r(467)):Error(r(310));bt=n,n={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},rn===null?Be.memoizedState=rn=n:rn=rn.next=n}return rn}function Kh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pu(n){var i=mu;return mu+=1,vl===null&&(vl=[]),n=$b(vl,n,i),i=Be,(rn===null?i.memoizedState:rn.next)===null&&(i=i.alternate,U.H=i===null||i.memoizedState===null?Lv:dg),n}function Yh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return pu(n);if(n.$$typeof===Z)return In(n)}throw Error(r(438,String(n)))}function eg(n){var i=null,o=Be.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Kh(),Be.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=V;return i.index++,o}function ei(n,i){return typeof i=="function"?i(n):i}function Wh(n){var i=$t();return tg(i,bt,n)}function tg(n,i,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var f=n.baseQueue,p=c.pending;if(p!==null){if(f!==null){var v=f.next;f.next=p.next,p.next=v}i.baseQueue=f=p,c.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{i=f.next;var I=v=null,j=null,Q=i,re=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(Xe&ae)===ae:(Zs&ae)===ae){var K=Q.revertLane;if(K===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===ml&&(re=!0);else if((Zs&K)===K){Q=Q.next,K===ml&&(re=!0);continue}else ae={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},j===null?(I=j=ae,v=p):j=j.next=ae,Be.lanes|=K,Hi|=K;ae=Q.action,so&&o(p,ae),p=Q.hasEagerState?Q.eagerState:o(p,ae)}else K={lane:ae,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},j===null?(I=j=K,v=p):j=j.next=K,Be.lanes|=ae,Hi|=ae;Q=Q.next}while(Q!==null&&Q!==i);if(j===null?v=p:j.next=I,!dr(p,n.memoizedState)&&(sn=!0,re&&(o=pl,o!==null)))throw o;n.memoizedState=p,n.baseState=v,n.baseQueue=j,c.lastRenderedState=p}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function ng(n){var i=$t(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,p=i.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do p=n(p,v.action),v=v.next;while(v!==f);dr(p,i.memoizedState)||(sn=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,c]}function sv(n,i,o){var c=Be,f=$t(),p=et;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=i();var v=!dr((bt||f).memoizedState,o);if(v&&(f.memoizedState=o,sn=!0),f=f.queue,ig(ov.bind(null,c,f,n),[n]),f.getSnapshot!==i||v||rn!==null&&rn.memoizedState.tag&1){if(c.flags|=2048,xl(9,{destroy:void 0},av.bind(null,c,f,o,i),null),Et===null)throw Error(r(349));p||(Zs&127)!==0||iv(c,i,o)}return o}function iv(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Be.updateQueue,i===null?(i=Kh(),Be.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function av(n,i,o,c){i.value=o,i.getSnapshot=c,lv(i)&&cv(n)}function ov(n,i,o){return o(function(){lv(i)&&cv(n)})}function lv(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!dr(n,o)}catch{return!0}}function cv(n){var i=Ya(n,2);i!==null&&rr(i,n,2)}function rg(n){var i=Fn();if(typeof n=="function"){var o=n;if(n=o(),so){Me(!0);try{o()}finally{Me(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:n},i}function uv(n,i,o,c){return n.baseState=o,tg(n,bt,typeof c=="function"?c:ei)}function YN(n,i,o,c,f){if(Zh(n))throw Error(r(485));if(n=i.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};U.T!==null?o(!0):p.isTransition=!1,c(p),o=i.pending,o===null?(p.next=i.pending=p,dv(i,p)):(p.next=o.next,i.pending=o.next=p)}}function dv(n,i){var o=i.action,c=i.payload,f=n.state;if(i.isTransition){var p=U.T,v={};U.T=v;try{var I=o(f,c),j=U.S;j!==null&&j(v,I),hv(n,i,I)}catch(Q){sg(n,i,Q)}finally{p!==null&&v.types!==null&&(p.types=v.types),U.T=p}}else try{p=o(f,c),hv(n,i,p)}catch(Q){sg(n,i,Q)}}function hv(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){fv(n,i,c)},function(c){return sg(n,i,c)}):fv(n,i,o)}function fv(n,i,o){i.status="fulfilled",i.value=o,mv(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,dv(n,o)))}function sg(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,mv(i),i=i.next;while(i!==c)}n.action=null}function mv(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function pv(n,i){return i}function gv(n,i){if(et){var o=Et.formState;if(o!==null){e:{var c=Be;if(et){if(St){t:{for(var f=St,p=kr;f.nodeType!==8;){if(!p){f=null;break t}if(f=jr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){St=jr(f.nextSibling),c=f.data==="F!";break e}}Vi(c)}c=!1}c&&(i=o[0])}}return o=Fn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pv,lastRenderedState:i},o.queue=c,o=Vv.bind(null,Be,c),c.dispatch=o,c=rg(!1),p=ug.bind(null,Be,!1,c.queue),c=Fn(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,o=YN.bind(null,Be,f,p,o),f.dispatch=o,c.memoizedState=n,[i,o,!1]}function yv(n){var i=$t();return _v(i,bt,n)}function _v(n,i,o){if(i=tg(n,i,pv)[0],n=Wh(ei)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=pu(i)}catch(v){throw v===gl?zh:v}else c=i;i=$t();var f=i.queue,p=f.dispatch;return o!==i.memoizedState&&(Be.flags|=2048,xl(9,{destroy:void 0},WN.bind(null,f,o),null)),[c,p,n]}function WN(n,i){n.action=i}function bv(n){var i=$t(),o=bt;if(o!==null)return _v(i,o,n);$t(),i=i.memoizedState,o=$t();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function xl(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=Be.updateQueue,i===null&&(i=Kh(),Be.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function vv(){return $t().memoizedState}function Xh(n,i,o,c){var f=Fn();Be.flags|=n,f.memoizedState=xl(1|i,{destroy:void 0},o,c===void 0?null:c)}function Jh(n,i,o,c){var f=$t();c=c===void 0?null:c;var p=f.memoizedState.inst;bt!==null&&c!==null&&Yp(c,bt.memoizedState.deps)?f.memoizedState=xl(i,p,o,c):(Be.flags|=n,f.memoizedState=xl(1|i,p,o,c))}function xv(n,i){Xh(8390656,8,n,i)}function ig(n,i){Jh(2048,8,n,i)}function XN(n){Be.flags|=4;var i=Be.updateQueue;if(i===null)i=Kh(),Be.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function wv(n){var i=$t().memoizedState;return XN({ref:i,nextImpl:n}),function(){if((ut&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Ev(n,i){return Jh(4,2,n,i)}function Tv(n,i){return Jh(4,4,n,i)}function Iv(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Sv(n,i,o){o=o!=null?o.concat([n]):null,Jh(4,4,Iv.bind(null,i,n),o)}function ag(){}function Av(n,i){var o=$t();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Yp(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function Nv(n,i){var o=$t();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Yp(i,c[1]))return c[0];if(c=n(),so){Me(!0);try{n()}finally{Me(!1)}}return o.memoizedState=[c,i],c}function og(n,i,o){return o===void 0||(Zs&1073741824)!==0&&(Xe&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=Rx(),Be.lanes|=n,Hi|=n,o)}function Rv(n,i,o,c){return dr(o,i)?o:_l.current!==null?(n=og(n,o,c),dr(n,i)||(sn=!0),n):(Zs&42)===0||(Zs&1073741824)!==0&&(Xe&261930)===0?(sn=!0,n.memoizedState=o):(n=Rx(),Be.lanes|=n,Hi|=n,i)}function Cv(n,i,o,c,f){var p=oe.p;oe.p=p!==0&&8>p?p:8;var v=U.T,I={};U.T=I,ug(n,!1,i,o);try{var j=f(),Q=U.S;if(Q!==null&&Q(I,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var re=QN(j,c);gu(n,i,re,yr(n))}else gu(n,i,c,yr(n))}catch(ae){gu(n,i,{then:function(){},status:"rejected",reason:ae},yr())}finally{oe.p=p,v!==null&&I.types!==null&&(v.types=I.types),U.T=v}}function JN(){}function lg(n,i,o,c){if(n.tag!==5)throw Error(r(476));var f=kv(n).queue;Cv(n,f,i,fe,o===null?JN:function(){return Dv(n),o(c)})}function kv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:fe},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Dv(n){var i=kv(n);i.next===null&&(i=n.alternate.memoizedState),gu(n,i.next.queue,{},yr())}function cg(){return In(ju)}function jv(){return $t().memoizedState}function Pv(){return $t().memoizedState}function ZN(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=yr();n=Li(o);var c=Ui(i,n,o);c!==null&&(rr(c,i,o),du(c,i,o)),i={cache:Lp()},n.payload=i;return}i=i.return}}function eR(n,i,o){var c=yr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Zh(n)?Mv(i,o):(o=Ap(n,i,o,c),o!==null&&(rr(o,n,c),Ov(o,i,c)))}function Vv(n,i,o){var c=yr();gu(n,i,o,c)}function gu(n,i,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Zh(n))Mv(i,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var v=i.lastRenderedState,I=p(v,o);if(f.hasEagerState=!0,f.eagerState=I,dr(I,v))return jh(n,i,f,0),Et===null&&Dh(),!1}catch{}if(o=Ap(n,i,f,c),o!==null)return rr(o,n,c),Ov(o,i,c),!0}return!1}function ug(n,i,o,c){if(c={lane:2,revertLane:qg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Zh(n)){if(i)throw Error(r(479))}else i=Ap(n,o,c,2),i!==null&&rr(i,n,2)}function Zh(n){var i=n.alternate;return n===Be||i!==null&&i===Be}function Mv(n,i){bl=Qh=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function Ov(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Lc(n,o)}}var yu={readContext:In,use:Yh,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};yu.useEffectEvent=Ut;var Lv={readContext:In,use:Yh,useCallback:function(n,i){return Fn().memoizedState=[n,i===void 0?null:i],n},useContext:In,useEffect:xv,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Xh(4194308,4,Iv.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Xh(4194308,4,n,i)},useInsertionEffect:function(n,i){Xh(4,2,n,i)},useMemo:function(n,i){var o=Fn();i=i===void 0?null:i;var c=n();if(so){Me(!0);try{n()}finally{Me(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=Fn();if(o!==void 0){var f=o(i);if(so){Me(!0);try{o(i)}finally{Me(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=eR.bind(null,Be,n),[c.memoizedState,n]},useRef:function(n){var i=Fn();return n={current:n},i.memoizedState=n},useState:function(n){n=rg(n);var i=n.queue,o=Vv.bind(null,Be,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:ag,useDeferredValue:function(n,i){var o=Fn();return og(o,n,i)},useTransition:function(){var n=rg(!1);return n=Cv.bind(null,Be,n.queue,!0,!1),Fn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=Be,f=Fn();if(et){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),Et===null)throw Error(r(349));(Xe&127)!==0||iv(c,i,o)}f.memoizedState=o;var p={value:o,getSnapshot:i};return f.queue=p,xv(ov.bind(null,c,p,n),[n]),c.flags|=2048,xl(9,{destroy:void 0},av.bind(null,c,p,o,i),null),o},useId:function(){var n=Fn(),i=Et.identifierPrefix;if(et){var o=Is,c=Ts;o=(c&~(1<<32-Qe(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=$h++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=$N++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:cg,useFormState:gv,useActionState:gv,useOptimistic:function(n){var i=Fn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=ug.bind(null,Be,!0,o),o.dispatch=i,[n,i]},useMemoCache:eg,useCacheRefresh:function(){return Fn().memoizedState=ZN.bind(null,Be)},useEffectEvent:function(n){var i=Fn(),o={impl:n};return i.memoizedState=o,function(){if((ut&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},dg={readContext:In,use:Yh,useCallback:Av,useContext:In,useEffect:ig,useImperativeHandle:Sv,useInsertionEffect:Ev,useLayoutEffect:Tv,useMemo:Nv,useReducer:Wh,useRef:vv,useState:function(){return Wh(ei)},useDebugValue:ag,useDeferredValue:function(n,i){var o=$t();return Rv(o,bt.memoizedState,n,i)},useTransition:function(){var n=Wh(ei)[0],i=$t().memoizedState;return[typeof n=="boolean"?n:pu(n),i]},useSyncExternalStore:sv,useId:jv,useHostTransitionStatus:cg,useFormState:yv,useActionState:yv,useOptimistic:function(n,i){var o=$t();return uv(o,bt,n,i)},useMemoCache:eg,useCacheRefresh:Pv};dg.useEffectEvent=wv;var Uv={readContext:In,use:Yh,useCallback:Av,useContext:In,useEffect:ig,useImperativeHandle:Sv,useInsertionEffect:Ev,useLayoutEffect:Tv,useMemo:Nv,useReducer:ng,useRef:vv,useState:function(){return ng(ei)},useDebugValue:ag,useDeferredValue:function(n,i){var o=$t();return bt===null?og(o,n,i):Rv(o,bt.memoizedState,n,i)},useTransition:function(){var n=ng(ei)[0],i=$t().memoizedState;return[typeof n=="boolean"?n:pu(n),i]},useSyncExternalStore:sv,useId:jv,useHostTransitionStatus:cg,useFormState:bv,useActionState:bv,useOptimistic:function(n,i){var o=$t();return bt!==null?uv(o,bt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:eg,useCacheRefresh:Pv};Uv.useEffectEvent=wv;function hg(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:_({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var fg={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=yr(),f=Li(c);f.payload=i,o!=null&&(f.callback=o),i=Ui(n,f,c),i!==null&&(rr(i,n,c),du(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=yr(),f=Li(c);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Ui(n,f,c),i!==null&&(rr(i,n,c),du(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=yr(),c=Li(o);c.tag=2,i!=null&&(c.callback=i),i=Ui(n,c,o),i!==null&&(rr(i,n,o),du(i,n,o))}};function zv(n,i,o,c,f,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,v):i.prototype&&i.prototype.isPureReactComponent?!ru(o,c)||!ru(f,p):!0}function Bv(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&fg.enqueueReplaceState(i,i.state,null)}function io(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function qv(n){kh(n)}function Fv(n){}function Hv(n){kh(n)}function ef(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Gv(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function mg(n,i,o){return o=Li(o),o.tag=3,o.payload={element:null},o.callback=function(){ef(n,i)},o}function Qv(n){return n=Li(n),n.tag=3,n}function $v(n,i,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;n.payload=function(){return f(p)},n.callback=function(){Gv(i,o,c)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Gv(i,o,c),typeof f!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function tR(n,i,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&fl(i,o,f,!0),o=fr.current,o!==null){switch(o.tag){case 31:case 13:return Dr===null?ff():o.alternate===null&&zt===0&&(zt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Bh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),Ug(n,c,f)),!1;case 22:return o.flags|=65536,c===Bh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),Ug(n,c,f)),!1}throw Error(r(435,o.tag))}return Ug(n,c,f),ff(),!1}if(et)return i=fr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==jp&&(n=Error(r(422),{cause:c}),au(Nr(n,o)))):(c!==jp&&(i=Error(r(423),{cause:c}),au(Nr(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Nr(c,o),f=mg(n.stateNode,c,f),Hp(n,f),zt!==4&&(zt=2)),!1;var p=Error(r(520),{cause:c});if(p=Nr(p,o),Iu===null?Iu=[p]:Iu.push(p),zt!==4&&(zt=2),i===null)return!0;c=Nr(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=mg(o.stateNode,c,n),Hp(o,n),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Gi===null||!Gi.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Qv(f),$v(f,n,o,c),Hp(o,f),!1}o=o.return}while(o!==null);return!1}var pg=Error(r(461)),sn=!1;function Sn(n,i,o,c){i.child=n===null?Xb(i,null,o,c):ro(i,n.child,o,c)}function Kv(n,i,o,c,f){o=o.render;var p=i.ref;if("ref"in c){var v={};for(var I in c)I!=="ref"&&(v[I]=c[I])}else v=c;return Za(i),c=Wp(n,i,o,v,p,f),I=Xp(),n!==null&&!sn?(Jp(n,i,f),ti(n,i,f)):(et&&I&&kp(i),i.flags|=1,Sn(n,i,c,f),i.child)}function Yv(n,i,o,c,f){if(n===null){var p=o.type;return typeof p=="function"&&!Np(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,Wv(n,i,p,c,f)):(n=Vh(o.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!Eg(n,f)){var v=p.memoizedProps;if(o=o.compare,o=o!==null?o:ru,o(v,c)&&n.ref===i.ref)return ti(n,i,f)}return i.flags|=1,n=Ys(p,c),n.ref=i.ref,n.return=i,i.child=n}function Wv(n,i,o,c,f){if(n!==null){var p=n.memoizedProps;if(ru(p,c)&&n.ref===i.ref)if(sn=!1,i.pendingProps=c=p,Eg(n,f))(n.flags&131072)!==0&&(sn=!0);else return i.lanes=n.lanes,ti(n,i,f)}return gg(n,i,o,c,f)}function Xv(n,i,o,c){var f=c.children,p=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(c=i.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~p}else c=0,i.child=null;return Jv(n,i,p,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Uh(i,p!==null?p.cachePool:null),p!==null?ev(i,p):Qp(),tv(i);else return c=i.lanes=536870912,Jv(n,i,p!==null?p.baseLanes|o:o,o,c)}else p!==null?(Uh(i,p.cachePool),ev(i,p),Bi(),i.memoizedState=null):(n!==null&&Uh(i,null),Qp(),Bi());return Sn(n,i,f,o),i.child}function _u(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Jv(n,i,o,c,f){var p=zp();return p=p===null?null:{parent:nn._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},n!==null&&Uh(i,null),Qp(),tv(i),n!==null&&fl(n,i,c,!0),i.childLanes=f,null}function tf(n,i){return i=rf({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Zv(n,i,o){return ro(i,n.child,null,o),n=tf(i,i.pendingProps),n.flags|=2,mr(i),i.memoizedState=null,n}function nR(n,i,o){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(et){if(c.mode==="hidden")return n=tf(i,c),i.lanes=536870912,_u(null,n);if(Kp(i),(n=St)?(n=dw(n,kr),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:ji!==null?{id:Ts,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},o=Mb(n),o.return=i,i.child=o,Tn=i,St=null)):n=null,n===null)throw Vi(i);return i.lanes=536870912,null}return tf(i,c)}var p=n.memoizedState;if(p!==null){var v=p.dehydrated;if(Kp(i),f)if(i.flags&256)i.flags&=-257,i=Zv(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(sn||fl(n,i,o,!1),f=(o&n.childLanes)!==0,sn||f){if(c=Et,c!==null&&(v=Uc(c,o),v!==0&&v!==p.retryLane))throw p.retryLane=v,Ya(n,v),rr(c,n,v),pg;ff(),i=Zv(n,i,o)}else n=p.treeContext,St=jr(v.nextSibling),Tn=i,et=!0,Pi=null,kr=!1,n!==null&&Ub(i,n),i=tf(i,c),i.flags|=4096;return i}return n=Ys(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function nf(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function gg(n,i,o,c,f){return Za(i),o=Wp(n,i,o,c,void 0,f),c=Xp(),n!==null&&!sn?(Jp(n,i,f),ti(n,i,f)):(et&&c&&kp(i),i.flags|=1,Sn(n,i,o,f),i.child)}function ex(n,i,o,c,f,p){return Za(i),i.updateQueue=null,o=rv(i,c,o,f),nv(n),c=Xp(),n!==null&&!sn?(Jp(n,i,p),ti(n,i,p)):(et&&c&&kp(i),i.flags|=1,Sn(n,i,o,p),i.child)}function tx(n,i,o,c,f){if(Za(i),i.stateNode===null){var p=cl,v=o.contextType;typeof v=="object"&&v!==null&&(p=In(v)),p=new o(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=fg,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},qp(i),v=o.contextType,p.context=typeof v=="object"&&v!==null?In(v):cl,p.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(hg(i,o,v,c),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&fg.enqueueReplaceState(p,p.state,null),fu(i,c,p,f),hu(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){p=i.stateNode;var I=i.memoizedProps,j=io(o,I);p.props=j;var Q=p.context,re=o.contextType;v=cl,typeof re=="object"&&re!==null&&(v=In(re));var ae=o.getDerivedStateFromProps;re=typeof ae=="function"||typeof p.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,re||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(I||Q!==v)&&Bv(i,p,c,v),Oi=!1;var K=i.memoizedState;p.state=K,fu(i,c,p,f),hu(),Q=i.memoizedState,I||K!==Q||Oi?(typeof ae=="function"&&(hg(i,o,ae,c),Q=i.memoizedState),(j=Oi||zv(i,o,j,c,K,Q,v))?(re||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=Q),p.props=c,p.state=Q,p.context=v,c=j):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,Fp(n,i),v=i.memoizedProps,re=io(o,v),p.props=re,ae=i.pendingProps,K=p.context,Q=o.contextType,j=cl,typeof Q=="object"&&Q!==null&&(j=In(Q)),I=o.getDerivedStateFromProps,(Q=typeof I=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==ae||K!==j)&&Bv(i,p,c,j),Oi=!1,K=i.memoizedState,p.state=K,fu(i,c,p,f),hu();var J=i.memoizedState;v!==ae||K!==J||Oi||n!==null&&n.dependencies!==null&&Oh(n.dependencies)?(typeof I=="function"&&(hg(i,o,I,c),J=i.memoizedState),(re=Oi||zv(i,o,re,c,K,J,j)||n!==null&&n.dependencies!==null&&Oh(n.dependencies))?(Q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,J,j),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,J,j)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=J),p.props=c,p.state=J,p.context=j,c=re):(typeof p.componentDidUpdate!="function"||v===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),c=!1)}return p=c,nf(n,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&c?(i.child=ro(i,n.child,null,f),i.child=ro(i,null,o,f)):Sn(n,i,o,f),i.memoizedState=p.state,n=i.child):n=ti(n,i,f),n}function nx(n,i,o,c){return Xa(),i.flags|=256,Sn(n,i,o,c),i.child}var yg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _g(n){return{baseLanes:n,cachePool:Gb()}}function bg(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=gr),n}function rx(n,i,o){var c=i.pendingProps,f=!1,p=(i.flags&128)!==0,v;if((v=p)||(v=n!==null&&n.memoizedState===null?!1:(Qt.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(et){if(f?zi(i):Bi(),(n=St)?(n=dw(n,kr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:ji!==null?{id:Ts,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},o=Mb(n),o.return=i,i.child=o,Tn=i,St=null)):n=null,n===null)throw Vi(i);return t0(n)?i.lanes=32:i.lanes=536870912,null}var I=c.children;return c=c.fallback,f?(Bi(),f=i.mode,I=rf({mode:"hidden",children:I},f),c=Wa(c,f,o,null),I.return=i,c.return=i,I.sibling=c,i.child=I,c=i.child,c.memoizedState=_g(o),c.childLanes=bg(n,v,o),i.memoizedState=yg,_u(null,c)):(zi(i),vg(i,I))}var j=n.memoizedState;if(j!==null&&(I=j.dehydrated,I!==null)){if(p)i.flags&256?(zi(i),i.flags&=-257,i=xg(n,i,o)):i.memoizedState!==null?(Bi(),i.child=n.child,i.flags|=128,i=null):(Bi(),I=c.fallback,f=i.mode,c=rf({mode:"visible",children:c.children},f),I=Wa(I,f,o,null),I.flags|=2,c.return=i,I.return=i,c.sibling=I,i.child=c,ro(i,n.child,null,o),c=i.child,c.memoizedState=_g(o),c.childLanes=bg(n,v,o),i.memoizedState=yg,i=_u(null,c));else if(zi(i),t0(I)){if(v=I.nextSibling&&I.nextSibling.dataset,v)var Q=v.dgst;v=Q,c=Error(r(419)),c.stack="",c.digest=v,au({value:c,source:null,stack:null}),i=xg(n,i,o)}else if(sn||fl(n,i,o,!1),v=(o&n.childLanes)!==0,sn||v){if(v=Et,v!==null&&(c=Uc(v,o),c!==0&&c!==j.retryLane))throw j.retryLane=c,Ya(n,c),rr(v,n,c),pg;e0(I)||ff(),i=xg(n,i,o)}else e0(I)?(i.flags|=192,i.child=n.child,i=null):(n=j.treeContext,St=jr(I.nextSibling),Tn=i,et=!0,Pi=null,kr=!1,n!==null&&Ub(i,n),i=vg(i,c.children),i.flags|=4096);return i}return f?(Bi(),I=c.fallback,f=i.mode,j=n.child,Q=j.sibling,c=Ys(j,{mode:"hidden",children:c.children}),c.subtreeFlags=j.subtreeFlags&65011712,Q!==null?I=Ys(Q,I):(I=Wa(I,f,o,null),I.flags|=2),I.return=i,c.return=i,c.sibling=I,i.child=c,_u(null,c),c=i.child,I=n.child.memoizedState,I===null?I=_g(o):(f=I.cachePool,f!==null?(j=nn._currentValue,f=f.parent!==j?{parent:j,pool:j}:f):f=Gb(),I={baseLanes:I.baseLanes|o,cachePool:f}),c.memoizedState=I,c.childLanes=bg(n,v,o),i.memoizedState=yg,_u(n.child,c)):(zi(i),o=n.child,n=o.sibling,o=Ys(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=o,i.memoizedState=null,o)}function vg(n,i){return i=rf({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function rf(n,i){return n=hr(22,n,null,i),n.lanes=0,n}function xg(n,i,o){return ro(i,n.child,null,o),n=vg(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function sx(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Mp(n.return,i,o)}function wg(n,i,o,c,f,p){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=o,v.tailMode=f,v.treeForkCount=p)}function ix(n,i,o){var c=i.pendingProps,f=c.revealOrder,p=c.tail;c=c.children;var v=Qt.current,I=(v&2)!==0;if(I?(v=v&1|2,i.flags|=128):v&=1,me(Qt,v),Sn(n,i,c,o),c=et?iu:0,!I&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sx(n,o,i);else if(n.tag===19)sx(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Gh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),wg(i,!1,f,o,p,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Gh(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}wg(i,!0,o,null,p,c);break;case"together":wg(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function ti(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Hi|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(fl(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=Ys(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Ys(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Eg(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Oh(n)))}function rR(n,i,o){switch(i.tag){case 3:ve(i,i.stateNode.containerInfo),Mi(i,nn,n.memoizedState.cache),Xa();break;case 27:case 5:Ge(i);break;case 4:ve(i,i.stateNode.containerInfo);break;case 10:Mi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Kp(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(zi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?rx(n,i,o):(zi(i),n=ti(n,i,o),n!==null?n.sibling:null);zi(i);break;case 19:var f=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(fl(n,i,o,!1),c=(o&i.childLanes)!==0),f){if(c)return ix(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),me(Qt,Qt.current),c)break;return null;case 22:return i.lanes=0,Xv(n,i,o,i.pendingProps);case 24:Mi(i,nn,n.memoizedState.cache)}return ti(n,i,o)}function ax(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)sn=!0;else{if(!Eg(n,o)&&(i.flags&128)===0)return sn=!1,rR(n,i,o);sn=(n.flags&131072)!==0}else sn=!1,et&&(i.flags&1048576)!==0&&Lb(i,iu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=to(i.elementType),i.type=n,typeof n=="function")Np(n)?(c=io(n,c),i.tag=1,i=tx(null,i,n,c,o)):(i.tag=0,i=gg(null,i,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===Se){i.tag=11,i=Kv(null,i,n,c,o);break e}else if(f===S){i.tag=14,i=Yv(null,i,n,c,o);break e}}throw i=_e(n)||n,Error(r(306,i,""))}}return i;case 0:return gg(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,f=io(c,i.pendingProps),tx(n,i,c,f,o);case 3:e:{if(ve(i,i.stateNode.containerInfo),n===null)throw Error(r(387));c=i.pendingProps;var p=i.memoizedState;f=p.element,Fp(n,i),fu(i,c,null,o);var v=i.memoizedState;if(c=v.cache,Mi(i,nn,c),c!==p.cache&&Op(i,[nn],o,!0),hu(),c=v.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=nx(n,i,c,o);break e}else if(c!==f){f=Nr(Error(r(424)),i),au(f),i=nx(n,i,c,o);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,St=jr(n.firstChild),Tn=i,et=!0,Pi=null,kr=!0,o=Xb(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Xa(),c===f){i=ti(n,i,o);break e}Sn(n,i,c,o)}i=i.child}return i;case 26:return nf(n,i),n===null?(o=yw(i.type,null,i.pendingProps,null))?i.memoizedState=o:et||(o=i.type,n=i.pendingProps,c=vf(ee.current).createElement(o),c[Zt]=i,c[pn]=n,An(c,o,n),en(c),i.stateNode=c):i.memoizedState=yw(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Ge(i),n===null&&et&&(c=i.stateNode=mw(i.type,i.pendingProps,ee.current),Tn=i,kr=!0,f=St,Yi(i.type)?(n0=f,St=jr(c.firstChild)):St=f),Sn(n,i,i.pendingProps.children,o),nf(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&et&&((f=c=St)&&(c=jR(c,i.type,i.pendingProps,kr),c!==null?(i.stateNode=c,Tn=i,St=jr(c.firstChild),kr=!1,f=!0):f=!1),f||Vi(i)),Ge(i),f=i.type,p=i.pendingProps,v=n!==null?n.memoizedProps:null,c=p.children,Xg(f,p)?c=null:v!==null&&Xg(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Wp(n,i,KN,null,null,o),ju._currentValue=f),nf(n,i),Sn(n,i,c,o),i.child;case 6:return n===null&&et&&((n=o=St)&&(o=PR(o,i.pendingProps,kr),o!==null?(i.stateNode=o,Tn=i,St=null,n=!0):n=!1),n||Vi(i)),null;case 13:return rx(n,i,o);case 4:return ve(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=ro(i,null,c,o):Sn(n,i,c,o),i.child;case 11:return Kv(n,i,i.type,i.pendingProps,o);case 7:return Sn(n,i,i.pendingProps,o),i.child;case 8:return Sn(n,i,i.pendingProps.children,o),i.child;case 12:return Sn(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Mi(i,i.type,c.value),Sn(n,i,c.children,o),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Za(i),f=In(f),c=c(f),i.flags|=1,Sn(n,i,c,o),i.child;case 14:return Yv(n,i,i.type,i.pendingProps,o);case 15:return Wv(n,i,i.type,i.pendingProps,o);case 19:return ix(n,i,o);case 31:return nR(n,i,o);case 22:return Xv(n,i,o,i.pendingProps);case 24:return Za(i),c=In(nn),n===null?(f=zp(),f===null&&(f=Et,p=Lp(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),i.memoizedState={parent:c,cache:f},qp(i),Mi(i,nn,f)):((n.lanes&o)!==0&&(Fp(n,i),fu(i,null,null,o),hu()),f=n.memoizedState,p=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Mi(i,nn,c)):(c=p.cache,Mi(i,nn,c),c!==f.cache&&Op(i,[nn],o,!0))),Sn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ni(n){n.flags|=4}function Tg(n,i,o,c,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(jx())n.flags|=8192;else throw no=Bh,Bp}else n.flags&=-16777217}function ox(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!ww(i))if(jx())n.flags|=8192;else throw no=Bh,Bp}function sf(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?uh():536870912,n.lanes|=i,Il|=i)}function bu(n,i){if(!et)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function At(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function sR(n,i,o){var c=i.pendingProps;switch(Dp(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(i),null;case 1:return At(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Js(nn),Ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(hl(i)?ni(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pp())),At(i),null;case 26:var f=i.type,p=i.memoizedState;return n===null?(ni(i),p!==null?(At(i),ox(i,p)):(At(i),Tg(i,f,null,c,o))):p?p!==n.memoizedState?(ni(i),At(i),ox(i,p)):(At(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&ni(i),At(i),Tg(i,f,n,c,o)),null;case 27:if(xn(i),o=ee.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ni(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return At(i),null}n=we.current,hl(i)?zb(i):(n=mw(f,c,o),i.stateNode=n,ni(i))}return At(i),null;case 5:if(xn(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ni(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return At(i),null}if(p=we.current,hl(i))zb(i);else{var v=vf(ee.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}p[Zt]=i,p[pn]=c;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=p;e:switch(An(p,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ni(i)}}return At(i),Tg(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&ni(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(n=ee.current,hl(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,f=Tn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Zt]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||rw(n.nodeValue,o)),n||Vi(i,!0)}else n=vf(n).createTextNode(c),n[Zt]=i,i.stateNode=n}return At(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(c=hl(i),o!==null){if(n===null){if(!c)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Zt]=i}else Xa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;At(i),n=!1}else o=Pp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(mr(i),i):(mr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return At(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=hl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Zt]=i}else Xa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;At(i),f=!1}else f=Pp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(mr(i),i):(mr(i),null)}return mr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),sf(i,i.updateQueue),At(i),null);case 4:return Ae(),n===null&&Qg(i.stateNode.containerInfo),At(i),null;case 10:return Js(i.type),At(i),null;case 19:if(W(Qt),c=i.memoizedState,c===null)return At(i),null;if(f=(i.flags&128)!==0,p=c.rendering,p===null)if(f)bu(c,!1);else{if(zt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=Gh(n),p!==null){for(i.flags|=128,bu(c,!1),n=p.updateQueue,i.updateQueue=n,sf(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)Vb(o,n),o=o.sibling;return me(Qt,Qt.current&1|2),et&&Ws(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&Ie()>uf&&(i.flags|=128,f=!0,bu(c,!1),i.lanes=4194304)}else{if(!f)if(n=Gh(p),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,sf(i,n),bu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!et)return At(i),null}else 2*Ie()-c.renderingStartTime>uf&&o!==536870912&&(i.flags|=128,f=!0,bu(c,!1),i.lanes=4194304);c.isBackwards?(p.sibling=i.child,i.child=p):(n=c.last,n!==null?n.sibling=p:i.child=p,c.last=p)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Ie(),n.sibling=null,o=Qt.current,me(Qt,f?o&1|2:o&1),et&&Ws(i,c.treeForkCount),n):(At(i),null);case 22:case 23:return mr(i),$p(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(At(i),i.subtreeFlags&6&&(i.flags|=8192)):At(i),o=i.updateQueue,o!==null&&sf(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&W(eo),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Js(nn),At(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function iR(n,i){switch(Dp(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Js(nn),Ae(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return xn(i),null;case 31:if(i.memoizedState!==null){if(mr(i),i.alternate===null)throw Error(r(340));Xa()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(mr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Xa()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return W(Qt),null;case 4:return Ae(),null;case 10:return Js(i.type),null;case 22:case 23:return mr(i),$p(),n!==null&&W(eo),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Js(nn),null;case 25:return null;default:return null}}function lx(n,i){switch(Dp(i),i.tag){case 3:Js(nn),Ae();break;case 26:case 27:case 5:xn(i);break;case 4:Ae();break;case 31:i.memoizedState!==null&&mr(i);break;case 13:mr(i);break;case 19:W(Qt);break;case 10:Js(i.type);break;case 22:case 23:mr(i),$p(),n!==null&&W(eo);break;case 24:Js(nn)}}function vu(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var p=o.create,v=o.inst;c=p(),v.destroy=c}o=o.next}while(o!==f)}}catch(I){pt(i,i.return,I)}}function qi(n,i,o){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&n)===n){var v=c.inst,I=v.destroy;if(I!==void 0){v.destroy=void 0,f=i;var j=o,Q=I;try{Q()}catch(re){pt(f,j,re)}}}c=c.next}while(c!==p)}}catch(re){pt(i,i.return,re)}}function cx(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Zb(i,o)}catch(c){pt(n,n.return,c)}}}function ux(n,i,o){o.props=io(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){pt(n,i,c)}}function xu(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){pt(n,i,f)}}function Ss(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){pt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){pt(n,i,f)}else o.current=null}function dx(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){pt(n,n.return,f)}}function Ig(n,i,o){try{var c=n.stateNode;AR(c,n.type,o,i),c[pn]=i}catch(f){pt(n,n.return,f)}}function hx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Yi(n.type)||n.tag===4}function Sg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Yi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ag(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Fr));else if(c!==4&&(c===27&&Yi(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Ag(n,i,o),n=n.sibling;n!==null;)Ag(n,i,o),n=n.sibling}function af(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&Yi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(af(n,i,o),n=n.sibling;n!==null;)af(n,i,o),n=n.sibling}function fx(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);An(i,c,o),i[Zt]=n,i[pn]=o}catch(p){pt(n,n.return,p)}}var ri=!1,an=!1,Ng=!1,mx=typeof WeakSet=="function"?WeakSet:Set,yn=null;function aR(n,i){if(n=n.containerInfo,Yg=Af,n=Sb(n),xp(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var v=0,I=-1,j=-1,Q=0,re=0,ae=n,K=null;t:for(;;){for(var J;ae!==o||f!==0&&ae.nodeType!==3||(I=v+f),ae!==p||c!==0&&ae.nodeType!==3||(j=v+c),ae.nodeType===3&&(v+=ae.nodeValue.length),(J=ae.firstChild)!==null;)K=ae,ae=J;for(;;){if(ae===n)break t;if(K===o&&++Q===f&&(I=v),K===p&&++re===c&&(j=v),(J=ae.nextSibling)!==null)break;ae=K,K=ae.parentNode}ae=J}o=I===-1||j===-1?null:{start:I,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for(Wg={focusedElem:n,selectionRange:o},Af=!1,yn=i;yn!==null;)if(i=yn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,yn=n;else for(;yn!==null;){switch(i=yn,p=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=i,f=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var Ne=io(o.type,f);n=c.getSnapshotBeforeUpdate(Ne,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(Pe){pt(o,o.return,Pe)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Zg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Zg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,yn=n;break}yn=i.return}}function px(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:ii(n,o),c&4&&vu(5,o);break;case 1:if(ii(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(v){pt(o,o.return,v)}else{var f=io(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){pt(o,o.return,v)}}c&64&&cx(o),c&512&&xu(o,o.return);break;case 3:if(ii(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Zb(n,i)}catch(v){pt(o,o.return,v)}}break;case 27:i===null&&c&4&&fx(o);case 26:case 5:ii(n,o),i===null&&c&4&&dx(o),c&512&&xu(o,o.return);break;case 12:ii(n,o);break;case 31:ii(n,o),c&4&&_x(n,o);break;case 13:ii(n,o),c&4&&bx(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=pR.bind(null,o),VR(n,o))));break;case 22:if(c=o.memoizedState!==null||ri,!c){i=i!==null&&i.memoizedState!==null||an,f=ri;var p=an;ri=c,(an=i)&&!p?ai(n,o,(o.subtreeFlags&8772)!==0):ii(n,o),ri=f,an=p}break;case 30:break;default:ii(n,o)}}function gx(n){var i=n.alternate;i!==null&&(n.alternate=null,gx(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Yo(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ct=null,Zn=!1;function si(n,i,o){for(o=o.child;o!==null;)yx(n,i,o),o=o.sibling}function yx(n,i,o){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount(Bn,o)}catch{}switch(o.tag){case 26:an||Ss(o,i),si(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:an||Ss(o,i);var c=Ct,f=Zn;Yi(o.type)&&(Ct=o.stateNode,Zn=!1),si(n,i,o),Cu(o.stateNode),Ct=c,Zn=f;break;case 5:an||Ss(o,i);case 6:if(c=Ct,f=Zn,Ct=null,si(n,i,o),Ct=c,Zn=f,Ct!==null)if(Zn)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(o.stateNode)}catch(p){pt(o,i,p)}else try{Ct.removeChild(o.stateNode)}catch(p){pt(o,i,p)}break;case 18:Ct!==null&&(Zn?(n=Ct,cw(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),jl(n)):cw(Ct,o.stateNode));break;case 4:c=Ct,f=Zn,Ct=o.stateNode.containerInfo,Zn=!0,si(n,i,o),Ct=c,Zn=f;break;case 0:case 11:case 14:case 15:qi(2,o,i),an||qi(4,o,i),si(n,i,o);break;case 1:an||(Ss(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&ux(o,i,c)),si(n,i,o);break;case 21:si(n,i,o);break;case 22:an=(c=an)||o.memoizedState!==null,si(n,i,o),an=c;break;default:si(n,i,o)}}function _x(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{jl(n)}catch(o){pt(i,i.return,o)}}}function bx(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{jl(n)}catch(o){pt(i,i.return,o)}}function oR(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new mx),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new mx),i;default:throw Error(r(435,n.tag))}}function of(n,i){var o=oR(n);i.forEach(function(c){if(!o.has(c)){o.add(c);var f=gR.bind(null,n,c);c.then(f,f)}})}function er(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],p=n,v=i,I=v;e:for(;I!==null;){switch(I.tag){case 27:if(Yi(I.type)){Ct=I.stateNode,Zn=!1;break e}break;case 5:Ct=I.stateNode,Zn=!1;break e;case 3:case 4:Ct=I.stateNode.containerInfo,Zn=!0;break e}I=I.return}if(Ct===null)throw Error(r(160));yx(p,v,f),Ct=null,Zn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)vx(i,n),i=i.sibling}var Yr=null;function vx(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:er(i,n),tr(n),c&4&&(qi(3,n,n.return),vu(3,n),qi(5,n,n.return));break;case 1:er(i,n),tr(n),c&512&&(an||o===null||Ss(o,o.return)),c&64&&ri&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Yr;if(er(i,n),tr(n),c&512&&(an||o===null||Ss(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[hs]||p[Zt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),An(p,c,o),p[Zt]=n,en(p),c=p;break e;case"link":var v=vw("link","href",f).get(c+(o.href||""));if(v){for(var I=0;I<v.length;I++)if(p=v[I],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(I,1);break t}}p=f.createElement(c),An(p,c,o),f.head.appendChild(p);break;case"meta":if(v=vw("meta","content",f).get(c+(o.content||""))){for(I=0;I<v.length;I++)if(p=v[I],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(I,1);break t}}p=f.createElement(c),An(p,c,o),f.head.appendChild(p);break;default:throw Error(r(468,c))}p[Zt]=n,en(p),c=p}n.stateNode=c}else xw(f,n.type,n.stateNode);else n.stateNode=bw(f,c,n.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?xw(f,n.type,n.stateNode):bw(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Ig(n,n.memoizedProps,o.memoizedProps)}break;case 27:er(i,n),tr(n),c&512&&(an||o===null||Ss(o,o.return)),o!==null&&c&4&&Ig(n,n.memoizedProps,o.memoizedProps);break;case 5:if(er(i,n),tr(n),c&512&&(an||o===null||Ss(o,o.return)),n.flags&32){f=n.stateNode;try{Jn(f,"")}catch(Ne){pt(n,n.return,Ne)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Ig(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Ng=!0);break;case 6:if(er(i,n),tr(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Ne){pt(n,n.return,Ne)}}break;case 3:if(Ef=null,f=Yr,Yr=xf(i.containerInfo),er(i,n),Yr=f,tr(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{jl(i.containerInfo)}catch(Ne){pt(n,n.return,Ne)}Ng&&(Ng=!1,xx(n));break;case 4:c=Yr,Yr=xf(n.stateNode.containerInfo),er(i,n),tr(n),Yr=c;break;case 12:er(i,n),tr(n);break;case 31:er(i,n),tr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,of(n,c)));break;case 13:er(i,n),tr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(cf=Ie()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,of(n,c)));break;case 22:f=n.memoizedState!==null;var j=o!==null&&o.memoizedState!==null,Q=ri,re=an;if(ri=Q||f,an=re||j,er(i,n),an=re,ri=Q,tr(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||j||ri||an||ao(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){j=o=i;try{if(p=j.stateNode,f)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{I=j.stateNode;var ae=j.memoizedProps.style,K=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;I.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Ne){pt(j,j.return,Ne)}}}else if(i.tag===6){if(o===null){j=i;try{j.stateNode.nodeValue=f?"":j.memoizedProps}catch(Ne){pt(j,j.return,Ne)}}}else if(i.tag===18){if(o===null){j=i;try{var J=j.stateNode;f?uw(J,!0):uw(j.stateNode,!1)}catch(Ne){pt(j,j.return,Ne)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,of(n,o))));break;case 19:er(i,n),tr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,of(n,c)));break;case 30:break;case 21:break;default:er(i,n),tr(n)}}function tr(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(hx(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=Sg(n);af(n,p,f);break;case 5:var v=o.stateNode;o.flags&32&&(Jn(v,""),o.flags&=-33);var I=Sg(n);af(n,I,v);break;case 3:case 4:var j=o.stateNode.containerInfo,Q=Sg(n);Ag(n,Q,j);break;default:throw Error(r(161))}}catch(re){pt(n,n.return,re)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function xx(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;xx(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ii(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)px(n,i.alternate,i),i=i.sibling}function ao(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:qi(4,i,i.return),ao(i);break;case 1:Ss(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&ux(i,i.return,o),ao(i);break;case 27:Cu(i.stateNode);case 26:case 5:Ss(i,i.return),ao(i);break;case 22:i.memoizedState===null&&ao(i);break;case 30:ao(i);break;default:ao(i)}n=n.sibling}}function ai(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,p=i,v=p.flags;switch(p.tag){case 0:case 11:case 15:ai(f,p,o),vu(4,p);break;case 1:if(ai(f,p,o),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){pt(c,c.return,Q)}if(c=p,f=c.updateQueue,f!==null){var I=c.stateNode;try{var j=f.shared.hiddenCallbacks;if(j!==null)for(f.shared.hiddenCallbacks=null,f=0;f<j.length;f++)Jb(j[f],I)}catch(Q){pt(c,c.return,Q)}}o&&v&64&&cx(p),xu(p,p.return);break;case 27:fx(p);case 26:case 5:ai(f,p,o),o&&c===null&&v&4&&dx(p),xu(p,p.return);break;case 12:ai(f,p,o);break;case 31:ai(f,p,o),o&&v&4&&_x(f,p);break;case 13:ai(f,p,o),o&&v&4&&bx(f,p);break;case 22:p.memoizedState===null&&ai(f,p,o),xu(p,p.return);break;case 30:break;default:ai(f,p,o)}i=i.sibling}}function Rg(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&ou(o))}function Cg(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ou(n))}function Wr(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)wx(n,i,o,c),i=i.sibling}function wx(n,i,o,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Wr(n,i,o,c),f&2048&&vu(9,i);break;case 1:Wr(n,i,o,c);break;case 3:Wr(n,i,o,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ou(n)));break;case 12:if(f&2048){Wr(n,i,o,c),n=i.stateNode;try{var p=i.memoizedProps,v=p.id,I=p.onPostCommit;typeof I=="function"&&I(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(j){pt(i,i.return,j)}}else Wr(n,i,o,c);break;case 31:Wr(n,i,o,c);break;case 13:Wr(n,i,o,c);break;case 23:break;case 22:p=i.stateNode,v=i.alternate,i.memoizedState!==null?p._visibility&2?Wr(n,i,o,c):wu(n,i):p._visibility&2?Wr(n,i,o,c):(p._visibility|=2,wl(n,i,o,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Rg(v,i);break;case 24:Wr(n,i,o,c),f&2048&&Cg(i.alternate,i);break;default:Wr(n,i,o,c)}}function wl(n,i,o,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=n,v=i,I=o,j=c,Q=v.flags;switch(v.tag){case 0:case 11:case 15:wl(p,v,I,j,f),vu(8,v);break;case 23:break;case 22:var re=v.stateNode;v.memoizedState!==null?re._visibility&2?wl(p,v,I,j,f):wu(p,v):(re._visibility|=2,wl(p,v,I,j,f)),f&&Q&2048&&Rg(v.alternate,v);break;case 24:wl(p,v,I,j,f),f&&Q&2048&&Cg(v.alternate,v);break;default:wl(p,v,I,j,f)}i=i.sibling}}function wu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,f=c.flags;switch(c.tag){case 22:wu(o,c),f&2048&&Rg(c.alternate,c);break;case 24:wu(o,c),f&2048&&Cg(c.alternate,c);break;default:wu(o,c)}i=i.sibling}}var Eu=8192;function El(n,i,o){if(n.subtreeFlags&Eu)for(n=n.child;n!==null;)Ex(n,i,o),n=n.sibling}function Ex(n,i,o){switch(n.tag){case 26:El(n,i,o),n.flags&Eu&&n.memoizedState!==null&&$R(o,Yr,n.memoizedState,n.memoizedProps);break;case 5:El(n,i,o);break;case 3:case 4:var c=Yr;Yr=xf(n.stateNode.containerInfo),El(n,i,o),Yr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Eu,Eu=16777216,El(n,i,o),Eu=c):El(n,i,o));break;default:El(n,i,o)}}function Tx(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Tu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];yn=c,Sx(c,n)}Tx(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ix(n),n=n.sibling}function Ix(n){switch(n.tag){case 0:case 11:case 15:Tu(n),n.flags&2048&&qi(9,n,n.return);break;case 3:Tu(n);break;case 12:Tu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,lf(n)):Tu(n);break;default:Tu(n)}}function lf(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];yn=c,Sx(c,n)}Tx(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:qi(8,i,i.return),lf(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,lf(i));break;default:lf(i)}n=n.sibling}}function Sx(n,i){for(;yn!==null;){var o=yn;switch(o.tag){case 0:case 11:case 15:qi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ou(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,yn=c;else e:for(o=n;yn!==null;){c=yn;var f=c.sibling,p=c.return;if(gx(c),c===o){yn=null;break e}if(f!==null){f.return=p,yn=f;break e}yn=p}}}var lR={getCacheForType:function(n){var i=In(nn),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return In(nn).controller.signal}},cR=typeof WeakMap=="function"?WeakMap:Map,ut=0,Et=null,$e=null,Xe=0,mt=0,pr=null,Fi=!1,Tl=!1,kg=!1,oi=0,zt=0,Hi=0,oo=0,Dg=0,gr=0,Il=0,Iu=null,nr=null,jg=!1,cf=0,Ax=0,uf=1/0,df=null,Gi=null,hn=0,Qi=null,Sl=null,li=0,Pg=0,Vg=null,Nx=null,Su=0,Mg=null;function yr(){return(ut&2)!==0&&Xe!==0?Xe&-Xe:U.T!==null?qg():dh()}function Rx(){if(gr===0)if((Xe&536870912)===0||et){var n=Pa;Pa<<=1,(Pa&3932160)===0&&(Pa=262144),gr=n}else gr=536870912;return n=fr.current,n!==null&&(n.flags|=32),gr}function rr(n,i,o){(n===Et&&(mt===2||mt===9)||n.cancelPendingCommit!==null)&&(Al(n,0),$i(n,Xe,gr,!1)),Va(n,o),((ut&2)===0||n!==Et)&&(n===Et&&((ut&2)===0&&(oo|=o),zt===4&&$i(n,Xe,gr,!1)),As(n))}function Cx(n,i,o){if((ut&6)!==0)throw Error(r(327));var c=!o&&(i&127)===0&&(i&n.expiredLanes)===0||zr(n,i),f=c?hR(n,i):Lg(n,i,!0),p=c;do{if(f===0){Tl&&!c&&$i(n,i,0,!1);break}else{if(o=n.current.alternate,p&&!uR(o)){f=Lg(n,i,!1),p=!1;continue}if(f===2){if(p=i,n.errorRecoveryDisabledLanes&p)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var I=n;f=Iu;var j=I.current.memoizedState.isDehydrated;if(j&&(Al(I,v).flags|=256),v=Lg(I,v,!1),v!==2){if(kg&&!j){I.errorRecoveryDisabledLanes|=p,oo|=p,f=4;break e}p=nr,nr=f,p!==null&&(nr===null?nr=p:nr.push.apply(nr,p))}f=v}if(p=!1,f!==2)continue}}if(f===1){Al(n,0),$i(n,i,0,!0);break}e:{switch(c=n,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:$i(c,i,gr,!Fi);break e;case 2:nr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=cf+300-Ie(),10<f)){if($i(c,i,gr,!Fi),cs(c,0,!0)!==0)break e;li=i,c.timeoutHandle=ow(kx.bind(null,c,o,nr,df,jg,i,gr,oo,Il,Fi,p,"Throttled",-0,0),f);break e}kx(c,o,nr,df,jg,i,gr,oo,Il,Fi,p,null,-0,0)}}break}while(!0);As(n)}function kx(n,i,o,c,f,p,v,I,j,Q,re,ae,K,J){if(n.timeoutHandle=-1,ae=i.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fr},Ex(i,p,ae);var Ne=(p&62914560)===p?cf-Ie():(p&4194048)===p?Ax-Ie():0;if(Ne=KR(ae,Ne),Ne!==null){li=p,n.cancelPendingCommit=Ne(Ux.bind(null,n,i,p,o,c,f,v,I,j,re,ae,null,K,J)),$i(n,p,v,!Q);return}}Ux(n,i,p,o,c,f,v,I,j)}function uR(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],p=f.getSnapshot;f=f.value;try{if(!dr(p(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $i(n,i,o,c){i&=~Dg,i&=~oo,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var p=31-Qe(f),v=1<<p;c[p]=-1,f&=~v}o!==0&&Ma(n,o,i)}function hf(){return(ut&6)===0?(Au(0),!1):!0}function Og(){if($e!==null){if(mt===0)var n=$e.return;else n=$e,Xs=Ja=null,Zp(n),yl=null,cu=0,n=$e;for(;n!==null;)lx(n.alternate,n),n=n.return;$e=null}}function Al(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,CR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),li=0,Og(),Et=n,$e=o=Ys(n.current,null),Xe=i,mt=0,pr=null,Fi=!1,Tl=zr(n,i),kg=!1,Il=gr=Dg=oo=Hi=zt=0,nr=Iu=null,jg=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-Qe(c),p=1<<f;i|=n[f],c&=~p}return oi=i,Dh(),o}function Dx(n,i){Be=null,U.H=yu,i===gl||i===zh?(i=Kb(),mt=3):i===Bp?(i=Kb(),mt=4):mt=i===pg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,pr=i,$e===null&&(zt=1,ef(n,Nr(i,n.current)))}function jx(){var n=fr.current;return n===null?!0:(Xe&4194048)===Xe?Dr===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?n===Dr:!1}function Px(){var n=U.H;return U.H=yu,n===null?yu:n}function Vx(){var n=U.A;return U.A=lR,n}function ff(){zt=4,Fi||(Xe&4194048)!==Xe&&fr.current!==null||(Tl=!0),(Hi&134217727)===0&&(oo&134217727)===0||Et===null||$i(Et,Xe,gr,!1)}function Lg(n,i,o){var c=ut;ut|=2;var f=Px(),p=Vx();(Et!==n||Xe!==i)&&(df=null,Al(n,i)),i=!1;var v=zt;e:do try{if(mt!==0&&$e!==null){var I=$e,j=pr;switch(mt){case 8:Og(),v=6;break e;case 3:case 2:case 9:case 6:fr.current===null&&(i=!0);var Q=mt;if(mt=0,pr=null,Nl(n,I,j,Q),o&&Tl){v=0;break e}break;default:Q=mt,mt=0,pr=null,Nl(n,I,j,Q)}}dR(),v=zt;break}catch(re){Dx(n,re)}while(!0);return i&&n.shellSuspendCounter++,Xs=Ja=null,ut=c,U.H=f,U.A=p,$e===null&&(Et=null,Xe=0,Dh()),v}function dR(){for(;$e!==null;)Mx($e)}function hR(n,i){var o=ut;ut|=2;var c=Px(),f=Vx();Et!==n||Xe!==i?(df=null,uf=Ie()+500,Al(n,i)):Tl=zr(n,i);e:do try{if(mt!==0&&$e!==null){i=$e;var p=pr;t:switch(mt){case 1:mt=0,pr=null,Nl(n,i,p,1);break;case 2:case 9:if(Qb(p)){mt=0,pr=null,Ox(i);break}i=function(){mt!==2&&mt!==9||Et!==n||(mt=7),As(n)},p.then(i,i);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Qb(p)?(mt=0,pr=null,Ox(i)):(mt=0,pr=null,Nl(n,i,p,7));break;case 5:var v=null;switch($e.tag){case 26:v=$e.memoizedState;case 5:case 27:var I=$e;if(v?ww(v):I.stateNode.complete){mt=0,pr=null;var j=I.sibling;if(j!==null)$e=j;else{var Q=I.return;Q!==null?($e=Q,mf(Q)):$e=null}break t}}mt=0,pr=null,Nl(n,i,p,5);break;case 6:mt=0,pr=null,Nl(n,i,p,6);break;case 8:Og(),zt=6;break e;default:throw Error(r(462))}}fR();break}catch(re){Dx(n,re)}while(!0);return Xs=Ja=null,U.H=c,U.A=f,ut=o,$e!==null?0:(Et=null,Xe=0,Dh(),zt)}function fR(){for(;$e!==null&&!is();)Mx($e)}function Mx(n){var i=ax(n.alternate,n,oi);n.memoizedProps=n.pendingProps,i===null?mf(n):$e=i}function Ox(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=ex(o,i,i.pendingProps,i.type,void 0,Xe);break;case 11:i=ex(o,i,i.pendingProps,i.type.render,i.ref,Xe);break;case 5:Zp(i);default:lx(o,i),i=$e=Vb(i,oi),i=ax(o,i,oi)}n.memoizedProps=n.pendingProps,i===null?mf(n):$e=i}function Nl(n,i,o,c){Xs=Ja=null,Zp(i),yl=null,cu=0;var f=i.return;try{if(tR(n,f,i,o,Xe)){zt=1,ef(n,Nr(o,n.current)),$e=null;return}}catch(p){if(f!==null)throw $e=f,p;zt=1,ef(n,Nr(o,n.current)),$e=null;return}i.flags&32768?(et||c===1?n=!0:Tl||(Xe&536870912)!==0?n=!1:(Fi=n=!0,(c===2||c===9||c===3||c===6)&&(c=fr.current,c!==null&&c.tag===13&&(c.flags|=16384))),Lx(i,n)):mf(i)}function mf(n){var i=n;do{if((i.flags&32768)!==0){Lx(i,Fi);return}n=i.return;var o=sR(i.alternate,i,oi);if(o!==null){$e=o;return}if(i=i.sibling,i!==null){$e=i;return}$e=i=n}while(i!==null);zt===0&&(zt=5)}function Lx(n,i){do{var o=iR(n.alternate,n);if(o!==null){o.flags&=32767,$e=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){$e=n;return}$e=n=o}while(n!==null);zt=6,$e=null}function Ux(n,i,o,c,f,p,v,I,j){n.cancelPendingCommit=null;do pf();while(hn!==0);if((ut&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(p=i.lanes|i.childLanes,p|=Sp,yp(n,o,p,v,I,j),n===Et&&($e=Et=null,Xe=0),Sl=i,Qi=n,li=o,Pg=p,Vg=f,Nx=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,yR(wt,function(){return Hx(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=U.T,U.T=null,f=oe.p,oe.p=2,v=ut,ut|=4;try{aR(n,i,o)}finally{ut=v,oe.p=f,U.T=c}}hn=1,zx(),Bx(),qx()}}function zx(){if(hn===1){hn=0;var n=Qi,i=Sl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=U.T,U.T=null;var c=oe.p;oe.p=2;var f=ut;ut|=4;try{vx(i,n);var p=Wg,v=Sb(n.containerInfo),I=p.focusedElem,j=p.selectionRange;if(v!==I&&I&&I.ownerDocument&&Ib(I.ownerDocument.documentElement,I)){if(j!==null&&xp(I)){var Q=j.start,re=j.end;if(re===void 0&&(re=Q),"selectionStart"in I)I.selectionStart=Q,I.selectionEnd=Math.min(re,I.value.length);else{var ae=I.ownerDocument||document,K=ae&&ae.defaultView||window;if(K.getSelection){var J=K.getSelection(),Ne=I.textContent.length,Pe=Math.min(j.start,Ne),xt=j.end===void 0?Pe:Math.min(j.end,Ne);!J.extend&&Pe>xt&&(v=xt,xt=Pe,Pe=v);var q=Tb(I,Pe),O=Tb(I,xt);if(q&&O&&(J.rangeCount!==1||J.anchorNode!==q.node||J.anchorOffset!==q.offset||J.focusNode!==O.node||J.focusOffset!==O.offset)){var G=ae.createRange();G.setStart(q.node,q.offset),J.removeAllRanges(),Pe>xt?(J.addRange(G),J.extend(O.node,O.offset)):(G.setEnd(O.node,O.offset),J.addRange(G))}}}}for(ae=[],J=I;J=J.parentNode;)J.nodeType===1&&ae.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ae.length;I++){var ie=ae[I];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Af=!!Yg,Wg=Yg=null}finally{ut=f,oe.p=c,U.T=o}}n.current=i,hn=2}}function Bx(){if(hn===2){hn=0;var n=Qi,i=Sl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=U.T,U.T=null;var c=oe.p;oe.p=2;var f=ut;ut|=4;try{px(n,i.alternate,i)}finally{ut=f,oe.p=c,U.T=o}}hn=3}}function qx(){if(hn===4||hn===3){hn=0,$();var n=Qi,i=Sl,o=li,c=Nx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?hn=5:(hn=0,Sl=Qi=null,Fx(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Gi=null),Gs(o),i=i.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot(Bn,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=U.T,f=oe.p,oe.p=2,U.T=null;try{for(var p=n.onRecoverableError,v=0;v<c.length;v++){var I=c[v];p(I.value,{componentStack:I.stack})}}finally{U.T=i,oe.p=f}}(li&3)!==0&&pf(),As(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Mg?Su++:(Su=0,Mg=n):Su=0,Au(0)}}function Fx(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,ou(i)))}function pf(){return zx(),Bx(),qx(),Hx()}function Hx(){if(hn!==5)return!1;var n=Qi,i=Pg;Pg=0;var o=Gs(li),c=U.T,f=oe.p;try{oe.p=32>o?32:o,U.T=null,o=Vg,Vg=null;var p=Qi,v=li;if(hn=0,Sl=Qi=null,li=0,(ut&6)!==0)throw Error(r(331));var I=ut;if(ut|=4,Ix(p.current),wx(p,p.current,v,o),ut=I,Au(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot(Bn,p)}catch{}return!0}finally{oe.p=f,U.T=c,Fx(n,i)}}function Gx(n,i,o){i=Nr(o,i),i=mg(n.stateNode,i,2),n=Ui(n,i,2),n!==null&&(Va(n,2),As(n))}function pt(n,i,o){if(n.tag===3)Gx(n,n,o);else for(;i!==null;){if(i.tag===3){Gx(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Gi===null||!Gi.has(c))){n=Nr(o,n),o=Qv(2),c=Ui(i,o,2),c!==null&&($v(o,c,i,n),Va(c,2),As(c));break}}i=i.return}}function Ug(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new cR;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(o)||(kg=!0,f.add(o),n=mR.bind(null,n,i,o),i.then(n,n))}function mR(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Et===n&&(Xe&o)===o&&(zt===4||zt===3&&(Xe&62914560)===Xe&&300>Ie()-cf?(ut&2)===0&&Al(n,0):Dg|=o,Il===Xe&&(Il=0)),As(n)}function Qx(n,i){i===0&&(i=uh()),n=Ya(n,i),n!==null&&(Va(n,i),As(n))}function pR(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Qx(n,o)}function gR(n,i){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(i),Qx(n,o)}function yR(n,i){return ht(n,i)}var gf=null,Rl=null,zg=!1,yf=!1,Bg=!1,Ki=0;function As(n){n!==Rl&&n.next===null&&(Rl===null?gf=Rl=n:Rl=Rl.next=n),yf=!0,zg||(zg=!0,bR())}function Au(n,i){if(!Bg&&yf){Bg=!0;do for(var o=!1,c=gf;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var v=c.suspendedLanes,I=c.pingedLanes;p=(1<<31-Qe(42|n)+1)-1,p&=f&~(v&~I),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Wx(c,p))}else p=Xe,p=cs(c,c===Et?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||zr(c,p)||(o=!0,Wx(c,p));c=c.next}while(o);Bg=!1}}function _R(){$x()}function $x(){yf=zg=!1;var n=0;Ki!==0&&RR()&&(n=Ki);for(var i=Ie(),o=null,c=gf;c!==null;){var f=c.next,p=Kx(c,i);p===0?(c.next=null,o===null?gf=f:o.next=f,f===null&&(Rl=o)):(o=c,(n!==0||(p&3)!==0)&&(yf=!0)),c=f}hn!==0&&hn!==5||Au(n),Ki!==0&&(Ki=0)}function Kx(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var v=31-Qe(p),I=1<<v,j=f[v];j===-1?((I&o)===0||(I&c)!==0)&&(f[v]=gp(I,i)):j<=i&&(n.expiredLanes|=I),p&=~I}if(i=Et,o=Xe,o=cs(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(mt===2||mt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&jn(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||zr(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&jn(c),Gs(o)){case 2:case 8:o=Xt;break;case 32:o=wt;break;case 268435456:o=Hs;break;default:o=wt}return c=Yx.bind(null,n),o=ht(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&jn(c),n.callbackPriority=2,n.callbackNode=null,2}function Yx(n,i){if(hn!==0&&hn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(pf()&&n.callbackNode!==o)return null;var c=Xe;return c=cs(n,n===Et?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Cx(n,c,i),Kx(n,Ie()),n.callbackNode!=null&&n.callbackNode===o?Yx.bind(null,n):null)}function Wx(n,i){if(pf())return null;Cx(n,i,!0)}function bR(){kR(function(){(ut&6)!==0?ht(ue,_R):$x()})}function qg(){if(Ki===0){var n=ml;n===0&&(n=os,os<<=1,(os&261888)===0&&(os=256)),Ki=n}return Ki}function Xx(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Zo(""+n)}function Jx(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function vR(n,i,o,c,f){if(i==="submit"&&o&&o.stateNode===f){var p=Xx((f[pn]||null).action),v=c.submitter;v&&(i=(i=v[pn]||null)?Xx(i.formAction):v.getAttribute("formAction"),i!==null&&(p=i,v=null));var I=new vs("action","action",null,c,f);n.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ki!==0){var j=v?Jx(f,v):new FormData(f);lg(o,{pending:!0,data:j,method:f.method,action:p},null,j)}}else typeof p=="function"&&(I.preventDefault(),j=v?Jx(f,v):new FormData(f),lg(o,{pending:!0,data:j,method:f.method,action:p},p,j))},currentTarget:f}]})}}for(var Fg=0;Fg<Ip.length;Fg++){var Hg=Ip[Fg],xR=Hg.toLowerCase(),wR=Hg[0].toUpperCase()+Hg.slice(1);Kr(xR,"on"+wR)}Kr(Rb,"onAnimationEnd"),Kr(Cb,"onAnimationIteration"),Kr(kb,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(LN,"onTransitionRun"),Kr(UN,"onTransitionStart"),Kr(zN,"onTransitionCancel"),Kr(Db,"onTransitionEnd"),gs("onMouseEnter",["mouseout","mouseover"]),gs("onMouseLeave",["mouseout","mouseover"]),gs("onPointerEnter",["pointerout","pointerover"]),gs("onPointerLeave",["pointerout","pointerover"]),ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ps("onBeforeInput",["compositionend","keypress","textInput","paste"]),ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ER=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nu));function Zx(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var v=c.length-1;0<=v;v--){var I=c[v],j=I.instance,Q=I.currentTarget;if(I=I.listener,j!==p&&f.isPropagationStopped())break e;p=I,f.currentTarget=Q;try{p(f)}catch(re){kh(re)}f.currentTarget=null,p=j}else for(v=0;v<c.length;v++){if(I=c[v],j=I.instance,Q=I.currentTarget,I=I.listener,j!==p&&f.isPropagationStopped())break e;p=I,f.currentTarget=Q;try{p(f)}catch(re){kh(re)}f.currentTarget=null,p=j}}}}function Ke(n,i){var o=i[Ko];o===void 0&&(o=i[Ko]=new Set);var c=n+"__bubble";o.has(c)||(ew(i,n,2,!1),o.add(c))}function Gg(n,i,o){var c=0;i&&(c|=4),ew(o,n,c,i)}var _f="_reactListening"+Math.random().toString(36).slice(2);function Qg(n){if(!n[_f]){n[_f]=!0,zc.forEach(function(o){o!=="selectionchange"&&(ER.has(o)||Gg(o,!1,n),Gg(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[_f]||(i[_f]=!0,Gg("selectionchange",!1,i))}}function ew(n,i,o,c){switch(Rw(i)){case 2:var f=XR;break;case 8:f=JR;break;default:f=o0}o=f.bind(null,i,o,n),f=void 0,!Ba||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function $g(n,i,o,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var I=c.stateNode.containerInfo;if(I===f)break;if(v===4)for(v=c.return;v!==null;){var j=v.tag;if((j===3||j===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;I!==null;){if(v=fs(I),v===null)return;if(j=v.tag,j===5||j===6||j===26||j===27){c=p=v;continue e}I=I.parentNode}}c=c.return}Ri(function(){var Q=p,re=Tr(o),ae=[];e:{var K=jb.get(n);if(K!==void 0){var J=vs,Ne=n;switch(n){case"keypress":if(Fa(o)===0)break e;case"keydown":case"keyup":J=Nh;break;case"focusin":Ne="focus",J=Ga;break;case"focusout":Ne="blur",J=Ga;break;case"beforeblur":case"afterblur":J=Ga;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=bh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=b;break;case Rb:case Cb:case kb:J=xh;break;case Db:J=A;break;case"scroll":case"scrollend":J=Jc;break;case"wheel":J=X;break;case"copy":case"cut":case"paste":J=wh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Ks;break;case"toggle":case"beforetoggle":J=ze}var Pe=(i&4)!==0,xt=!Pe&&(n==="scroll"||n==="scrollend"),q=Pe?K!==null?K+"Capture":null:K;Pe=[];for(var O=Q,G;O!==null;){var ie=O;if(G=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||G===null||q===null||(ie=Hr(O,q),ie!=null&&Pe.push(Ru(O,ie,G))),xt)break;O=O.return}0<Pe.length&&(K=new J(K,Ne,null,o,re),ae.push({event:K,listeners:Pe}))}}if((i&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",J=n==="mouseout"||n==="pointerout",K&&o!==Yc&&(Ne=o.relatedTarget||o.fromElement)&&(fs(Ne)||Ne[ds]))break e;if((J||K)&&(K=re.window===re?re:(K=re.ownerDocument)?K.defaultView||K.parentWindow:window,J?(Ne=o.relatedTarget||o.toElement,J=Q,Ne=Ne?fs(Ne):null,Ne!==null&&(xt=l(Ne),Pe=Ne.tag,Ne!==xt||Pe!==5&&Pe!==27&&Pe!==6)&&(Ne=null)):(J=null,Ne=Q),J!==Ne)){if(Pe=Zc,ie="onMouseLeave",q="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(Pe=Ks,ie="onPointerLeave",q="onPointerEnter",O="pointer"),xt=J==null?K:cr(J),G=Ne==null?K:cr(Ne),K=new Pe(ie,O+"leave",J,o,re),K.target=xt,K.relatedTarget=G,ie=null,fs(re)===Q&&(Pe=new Pe(q,O+"enter",Ne,o,re),Pe.target=G,Pe.relatedTarget=xt,ie=Pe),xt=ie,J&&Ne)t:{for(Pe=TR,q=J,O=Ne,G=0,ie=q;ie;ie=Pe(ie))G++;ie=0;for(var De=O;De;De=Pe(De))ie++;for(;0<G-ie;)q=Pe(q),G--;for(;0<ie-G;)O=Pe(O),ie--;for(;G--;){if(q===O||O!==null&&q===O.alternate){Pe=q;break t}q=Pe(q),O=Pe(O)}Pe=null}else Pe=null;J!==null&&tw(ae,K,J,Pe,!1),Ne!==null&&xt!==null&&tw(ae,xt,Ne,Pe,!0)}}e:{if(K=Q?cr(Q):window,J=K.nodeName&&K.nodeName.toLowerCase(),J==="select"||J==="input"&&K.type==="file")var it=_b;else if(gb(K))if(bb)it=VN;else{it=jN;var Ce=DN}else J=K.nodeName,!J||J.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Q&&Jo(Q.elementType)&&(it=_b):it=PN;if(it&&(it=it(n,Q))){yb(ae,it,o,re);break e}Ce&&Ce(n,K,Q),n==="focusout"&&Q&&K.type==="number"&&Q.memoizedProps.value!=null&&Qc(K,"number",K.value)}switch(Ce=Q?cr(Q):window,n){case"focusin":(gb(Ce)||Ce.contentEditable==="true")&&(al=Ce,wp=Q,su=null);break;case"focusout":su=wp=al=null;break;case"mousedown":Ep=!0;break;case"contextmenu":case"mouseup":case"dragend":Ep=!1,Ab(ae,o,re);break;case"selectionchange":if(ON)break;case"keydown":case"keyup":Ab(ae,o,re)}var He;if(ct)e:{switch(n){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else il?Qa(n,o)&&(Je="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Je="onCompositionStart");Je&&(Es&&o.locale!=="ko"&&(il||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&il&&(He=Xc()):(bs=re,Wc="value"in bs?bs.value:bs.textContent,il=!0)),Ce=bf(Q,Je),0<Ce.length&&(Je=new ws(Je,n,null,o,re),ae.push({event:Je,listeners:Ce}),He?Je.data=He:(He=sl(o),He!==null&&(Je.data=He)))),(He=Sr?NN(n,o):RN(n,o))&&(Je=bf(Q,"onBeforeInput"),0<Je.length&&(Ce=new ws("onBeforeInput","beforeinput",null,o,re),ae.push({event:Ce,listeners:Je}),Ce.data=He)),vR(ae,n,Q,o,re)}Zx(ae,i)})}function Ru(n,i,o){return{instance:n,listener:i,currentTarget:o}}function bf(n,i){for(var o=i+"Capture",c=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Hr(n,o),f!=null&&c.unshift(Ru(n,f,p)),f=Hr(n,i),f!=null&&c.push(Ru(n,f,p))),n.tag===3)return c;n=n.return}return[]}function TR(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function tw(n,i,o,c,f){for(var p=i._reactName,v=[];o!==null&&o!==c;){var I=o,j=I.alternate,Q=I.stateNode;if(I=I.tag,j!==null&&j===c)break;I!==5&&I!==26&&I!==27||Q===null||(j=Q,f?(Q=Hr(o,p),Q!=null&&v.unshift(Ru(o,Q,j))):f||(Q=Hr(o,p),Q!=null&&v.push(Ru(o,Q,j)))),o=o.return}v.length!==0&&n.push({event:i,listeners:v})}var IR=/\r\n?/g,SR=/\u0000|\uFFFD/g;function nw(n){return(typeof n=="string"?n:""+n).replace(IR,`
`).replace(SR,"")}function rw(n,i){return i=nw(i),nw(n)===i}function vt(n,i,o,c,f,p){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Jn(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Jn(n,""+c);break;case"className":ur(n,"class",c);break;case"tabIndex":ur(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ur(n,o,c);break;case"style":Kc(n,c,p);break;case"data":if(i!=="object"){ur(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Zo(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&vt(n,i,"name",f.name,f,null),vt(n,i,"formEncType",f.formEncType,f,null),vt(n,i,"formMethod",f.formMethod,f,null),vt(n,i,"formTarget",f.formTarget,f,null)):(vt(n,i,"encType",f.encType,f,null),vt(n,i,"method",f.method,f,null),vt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Zo(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Fr);break;case"onScroll":c!=null&&Ke("scroll",n);break;case"onScrollEnd":c!=null&&Ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=Zo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ke("beforetoggle",n),Ke("toggle",n),Wo(n,"popover",c);break;case"xlinkActuate":tn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":tn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":tn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":tn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":tn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":tn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":tn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":tn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":tn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Wo(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=_h.get(o)||o,Wo(n,o,c))}}function Kg(n,i,o,c,f,p){switch(o){case"style":Kc(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Jn(n,c):(typeof c=="number"||typeof c=="bigint")&&Jn(n,""+c);break;case"onScroll":c!=null&&Ke("scroll",n);break;case"onScrollEnd":c!=null&&Ke("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Fr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),p=n[pn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(i,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Wo(n,o,c)}}}function An(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",n),Ke("load",n);var c=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var v=o[p];if(v!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:vt(n,i,p,v,o,null)}}f&&vt(n,i,"srcSet",o.srcSet,o,null),c&&vt(n,i,"src",o.src,o,null);return;case"input":Ke("invalid",n);var I=p=v=f=null,j=null,Q=null;for(c in o)if(o.hasOwnProperty(c)){var re=o[c];if(re!=null)switch(c){case"name":f=re;break;case"type":v=re;break;case"checked":j=re;break;case"defaultChecked":Q=re;break;case"value":p=re;break;case"defaultValue":I=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,i));break;default:vt(n,i,c,re,o,null)}}ph(n,p,I,j,Q,v,f,!1);return;case"select":Ke("invalid",n),c=v=p=null;for(f in o)if(o.hasOwnProperty(f)&&(I=o[f],I!=null))switch(f){case"value":p=I;break;case"defaultValue":v=I;break;case"multiple":c=I;default:vt(n,i,f,I,o,null)}i=p,o=v,n.multiple=!!c,i!=null?Ii(n,!!c,i,!1):o!=null&&Ii(n,!!c,o,!0);return;case"textarea":Ke("invalid",n),p=f=c=null;for(v in o)if(o.hasOwnProperty(v)&&(I=o[v],I!=null))switch(v){case"value":c=I;break;case"defaultValue":f=I;break;case"children":p=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:vt(n,i,v,I,o,null)}Si(n,c,f,p);return;case"option":for(j in o)o.hasOwnProperty(j)&&(c=o[j],c!=null)&&(j==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":vt(n,i,j,c,o,null));return;case"dialog":Ke("beforetoggle",n),Ke("toggle",n),Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":Ke("load",n);break;case"video":case"audio":for(c=0;c<Nu.length;c++)Ke(Nu[c],n);break;case"image":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"embed":case"source":case"link":Ke("error",n),Ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(c=o[Q],c!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:vt(n,i,Q,c,o,null)}return;default:if(Jo(i)){for(re in o)o.hasOwnProperty(re)&&(c=o[re],c!==void 0&&Kg(n,i,re,c,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(c=o[I],c!=null&&vt(n,i,I,c,o,null))}function AR(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,v=null,I=null,j=null,Q=null,re=null;for(J in o){var ae=o[J];if(o.hasOwnProperty(J)&&ae!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":j=ae;default:c.hasOwnProperty(J)||vt(n,i,J,null,c,ae)}}for(var K in c){var J=c[K];if(ae=o[K],c.hasOwnProperty(K)&&(J!=null||ae!=null))switch(K){case"type":p=J;break;case"name":f=J;break;case"checked":Q=J;break;case"defaultChecked":re=J;break;case"value":v=J;break;case"defaultValue":I=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:J!==ae&&vt(n,i,K,J,c,ae)}}Xo(n,v,I,j,Q,re,p,f);return;case"select":J=v=I=K=null;for(p in o)if(j=o[p],o.hasOwnProperty(p)&&j!=null)switch(p){case"value":break;case"multiple":J=j;default:c.hasOwnProperty(p)||vt(n,i,p,null,c,j)}for(f in c)if(p=c[f],j=o[f],c.hasOwnProperty(f)&&(p!=null||j!=null))switch(f){case"value":K=p;break;case"defaultValue":I=p;break;case"multiple":v=p;default:p!==j&&vt(n,i,f,p,c,j)}i=I,o=v,c=J,K!=null?Ii(n,!!o,K,!1):!!c!=!!o&&(i!=null?Ii(n,!!o,i,!0):Ii(n,!!o,o?[]:"",!1));return;case"textarea":J=K=null;for(I in o)if(f=o[I],o.hasOwnProperty(I)&&f!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:vt(n,i,I,null,c,f)}for(v in c)if(f=c[v],p=o[v],c.hasOwnProperty(v)&&(f!=null||p!=null))switch(v){case"value":K=f;break;case"defaultValue":J=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&vt(n,i,v,f,c,p)}gh(n,K,J);return;case"option":for(var Ne in o)K=o[Ne],o.hasOwnProperty(Ne)&&K!=null&&!c.hasOwnProperty(Ne)&&(Ne==="selected"?n.selected=!1:vt(n,i,Ne,null,c,K));for(j in c)K=c[j],J=o[j],c.hasOwnProperty(j)&&K!==J&&(K!=null||J!=null)&&(j==="selected"?n.selected=K&&typeof K!="function"&&typeof K!="symbol":vt(n,i,j,K,c,J));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in o)K=o[Pe],o.hasOwnProperty(Pe)&&K!=null&&!c.hasOwnProperty(Pe)&&vt(n,i,Pe,null,c,K);for(Q in c)if(K=c[Q],J=o[Q],c.hasOwnProperty(Q)&&K!==J&&(K!=null||J!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:vt(n,i,Q,K,c,J)}return;default:if(Jo(i)){for(var xt in o)K=o[xt],o.hasOwnProperty(xt)&&K!==void 0&&!c.hasOwnProperty(xt)&&Kg(n,i,xt,void 0,c,K);for(re in c)K=c[re],J=o[re],!c.hasOwnProperty(re)||K===J||K===void 0&&J===void 0||Kg(n,i,re,K,c,J);return}}for(var q in o)K=o[q],o.hasOwnProperty(q)&&K!=null&&!c.hasOwnProperty(q)&&vt(n,i,q,null,c,K);for(ae in c)K=c[ae],J=o[ae],!c.hasOwnProperty(ae)||K===J||K==null&&J==null||vt(n,i,ae,K,c,J)}function sw(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NR(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],p=f.transferSize,v=f.initiatorType,I=f.duration;if(p&&I&&sw(v)){for(v=0,I=f.responseEnd,c+=1;c<o.length;c++){var j=o[c],Q=j.startTime;if(Q>I)break;var re=j.transferSize,ae=j.initiatorType;re&&sw(ae)&&(j=j.responseEnd,v+=re*(j<I?1:(I-Q)/(j-Q)))}if(--c,i+=8*(p+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Yg=null,Wg=null;function vf(n){return n.nodeType===9?n:n.ownerDocument}function iw(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aw(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Xg(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Jg=null;function RR(){var n=window.event;return n&&n.type==="popstate"?n===Jg?!1:(Jg=n,!0):(Jg=null,!1)}var ow=typeof setTimeout=="function"?setTimeout:void 0,CR=typeof clearTimeout=="function"?clearTimeout:void 0,lw=typeof Promise=="function"?Promise:void 0,kR=typeof queueMicrotask=="function"?queueMicrotask:typeof lw<"u"?function(n){return lw.resolve(null).then(n).catch(DR)}:ow;function DR(n){setTimeout(function(){throw n})}function Yi(n){return n==="head"}function cw(n,i){var o=i,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),jl(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Cu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Cu(o);for(var p=o.firstChild;p;){var v=p.nextSibling,I=p.nodeName;p[hs]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=v}}else o==="body"&&Cu(n.ownerDocument.body);o=f}while(o);jl(i)}function uw(n,i){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Zg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Zg(o),Yo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function jR(n,i,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[hs])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=jr(n.nextSibling),n===null)break}return null}function PR(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=jr(n.nextSibling),n===null))return null;return n}function dw(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=jr(n.nextSibling),n===null))return null;return n}function e0(n){return n.data==="$?"||n.data==="$~"}function t0(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function VR(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function jr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var n0=null;function hw(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return jr(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function fw(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function mw(n,i,o){switch(i=vf(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Cu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Yo(n)}var Pr=new Map,pw=new Set;function xf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ci=oe.d;oe.d={f:MR,r:OR,D:LR,C:UR,L:zR,m:BR,X:FR,S:qR,M:HR};function MR(){var n=ci.f(),i=hf();return n||i}function OR(n){var i=Er(n);i!==null&&i.tag===5&&i.type==="form"?Dv(i):ci.r(n)}var Cl=typeof document>"u"?null:document;function gw(n,i,o){var c=Cl;if(c&&typeof i=="string"&&i){var f=Xn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),pw.has(f)||(pw.add(f),n={rel:n,crossOrigin:o,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),An(i,"link",n),en(i),c.head.appendChild(i)))}}function LR(n){ci.D(n),gw("dns-prefetch",n,null)}function UR(n,i){ci.C(n,i),gw("preconnect",n,i)}function zR(n,i,o){ci.L(n,i,o);var c=Cl;if(c&&n&&i){var f='link[rel="preload"][as="'+Xn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Xn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Xn(o.imageSizes)+'"]')):f+='[href="'+Xn(n)+'"]';var p=f;switch(i){case"style":p=kl(n);break;case"script":p=Dl(n)}Pr.has(p)||(n=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Pr.set(p,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(ku(p))||i==="script"&&c.querySelector(Du(p))||(i=c.createElement("link"),An(i,"link",n),en(i),c.head.appendChild(i)))}}function BR(n,i){ci.m(n,i);var o=Cl;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Xn(c)+'"][href="'+Xn(n)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Dl(n)}if(!Pr.has(p)&&(n=_({rel:"modulepreload",href:n},i),Pr.set(p,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Du(p)))return}c=o.createElement("link"),An(c,"link",n),en(c),o.head.appendChild(c)}}}function qR(n,i,o){ci.S(n,i,o);var c=Cl;if(c&&n){var f=ms(c).hoistableStyles,p=kl(n);i=i||"default";var v=f.get(p);if(!v){var I={loading:0,preload:null};if(v=c.querySelector(ku(p)))I.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Pr.get(p))&&r0(n,o);var j=v=c.createElement("link");en(j),An(j,"link",n),j._p=new Promise(function(Q,re){j.onload=Q,j.onerror=re}),j.addEventListener("load",function(){I.loading|=1}),j.addEventListener("error",function(){I.loading|=2}),I.loading|=4,wf(v,i,c)}v={type:"stylesheet",instance:v,count:1,state:I},f.set(p,v)}}}function FR(n,i){ci.X(n,i);var o=Cl;if(o&&n){var c=ms(o).hoistableScripts,f=Dl(n),p=c.get(f);p||(p=o.querySelector(Du(f)),p||(n=_({src:n,async:!0},i),(i=Pr.get(f))&&s0(n,i),p=o.createElement("script"),en(p),An(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function HR(n,i){ci.M(n,i);var o=Cl;if(o&&n){var c=ms(o).hoistableScripts,f=Dl(n),p=c.get(f);p||(p=o.querySelector(Du(f)),p||(n=_({src:n,async:!0,type:"module"},i),(i=Pr.get(f))&&s0(n,i),p=o.createElement("script"),en(p),An(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function yw(n,i,o,c){var f=(f=ee.current)?xf(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=kl(o.href),o=ms(f).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=kl(o.href);var p=ms(f).hoistableStyles,v=p.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,v),(p=f.querySelector(ku(n)))&&!p._p&&(v.instance=p,v.state.loading=5),Pr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Pr.set(n,o),p||GR(f,n,o,v.state))),i&&c===null)throw Error(r(528,""));return v}if(i&&c!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Dl(o),o=ms(f).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function kl(n){return'href="'+Xn(n)+'"'}function ku(n){return'link[rel="stylesheet"]['+n+"]"}function _w(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function GR(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),An(i,"link",o),en(i),n.head.appendChild(i))}function Dl(n){return'[src="'+Xn(n)+'"]'}function Du(n){return"script[async]"+n}function bw(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Xn(o.href)+'"]');if(c)return i.instance=c,en(c),c;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),en(c),An(c,"style",f),wf(c,o.precedence,n),i.instance=c;case"stylesheet":f=kl(o.href);var p=n.querySelector(ku(f));if(p)return i.state.loading|=4,i.instance=p,en(p),p;c=_w(o),(f=Pr.get(f))&&r0(c,f),p=(n.ownerDocument||n).createElement("link"),en(p);var v=p;return v._p=new Promise(function(I,j){v.onload=I,v.onerror=j}),An(p,"link",c),i.state.loading|=4,wf(p,o.precedence,n),i.instance=p;case"script":return p=Dl(o.src),(f=n.querySelector(Du(p)))?(i.instance=f,en(f),f):(c=o,(f=Pr.get(p))&&(c=_({},o),s0(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),en(f),An(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,wf(c,o.precedence,n));return i.instance}function wf(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,v=0;v<c.length;v++){var I=c[v];if(I.dataset.precedence===i)p=I;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function r0(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function s0(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Ef=null;function vw(n,i,o){if(Ef===null){var c=new Map,f=Ef=new Map;f.set(o,c)}else f=Ef,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var p=o[f];if(!(p[hs]||p[Zt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(i)||"";v=n+v;var I=c.get(v);I?I.push(p):c.set(v,[p])}}return c}function xw(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function QR(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function ww(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function $R(n,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=kl(c.href),p=i.querySelector(ku(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Tf.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=p,en(p);return}p=i.ownerDocument||i,c=_w(c),(f=Pr.get(f))&&r0(c,f),p=p.createElement("link"),en(p);var v=p;v._p=new Promise(function(I,j){v.onload=I,v.onerror=j}),An(p,"link",c),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Tf.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var i0=0;function KR(n,i){return n.stylesheets&&n.count===0&&Sf(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Sf(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+i);0<n.imgBytes&&i0===0&&(i0=62500*NR());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Sf(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>i0?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Tf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var If=null;function Sf(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,If=new Map,i.forEach(YR,n),If=null,Tf.call(n))}function YR(n,i){if(!(i.state.loading&4)){var o=If.get(n);if(o)var c=o.get(null);else{o=new Map,If.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var v=f[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),c=v)}c&&o.set(null,c)}f=i.instance,v=f.getAttribute("data-precedence"),p=o.get(v)||c,p===c&&o.set(null,f),o.set(v,f),this.count++,c=Tf.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var ju={$$typeof:Z,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function WR(n,i,o,c,f,p,v,I,j){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=us(0),this.hiddenUpdates=us(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Ew(n,i,o,c,f,p,v,I,j,Q,re,ae){return n=new WR(n,i,o,v,j,Q,re,ae,I),i=1,p===!0&&(i|=24),p=hr(3,null,null,i),n.current=p,p.stateNode=n,i=Lp(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:i},qp(p),n}function Tw(n){return n?(n=cl,n):cl}function Iw(n,i,o,c,f,p){f=Tw(f),c.context===null?c.context=f:c.pendingContext=f,c=Li(i),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=Ui(n,c,i),o!==null&&(rr(o,n,i),du(o,n,i))}function Sw(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function a0(n,i){Sw(n,i),(n=n.alternate)&&Sw(n,i)}function Aw(n){if(n.tag===13||n.tag===31){var i=Ya(n,67108864);i!==null&&rr(i,n,67108864),a0(n,67108864)}}function Nw(n){if(n.tag===13||n.tag===31){var i=yr();i=Oa(i);var o=Ya(n,i);o!==null&&rr(o,n,i),a0(n,i)}}var Af=!0;function XR(n,i,o,c){var f=U.T;U.T=null;var p=oe.p;try{oe.p=2,o0(n,i,o,c)}finally{oe.p=p,U.T=f}}function JR(n,i,o,c){var f=U.T;U.T=null;var p=oe.p;try{oe.p=8,o0(n,i,o,c)}finally{oe.p=p,U.T=f}}function o0(n,i,o,c){if(Af){var f=l0(c);if(f===null)$g(n,i,c,Nf,o),Cw(n,c);else if(e2(f,n,i,o,c))c.stopPropagation();else if(Cw(n,c),i&4&&-1<ZR.indexOf(n)){for(;f!==null;){var p=Er(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=ls(p.pendingLanes);if(v!==0){var I=p;for(I.pendingLanes|=2,I.entangledLanes|=2;v;){var j=1<<31-Qe(v);I.entanglements[1]|=j,v&=~j}As(p),(ut&6)===0&&(uf=Ie()+500,Au(0))}}break;case 31:case 13:I=Ya(p,2),I!==null&&rr(I,p,2),hf(),a0(p,2)}if(p=l0(c),p===null&&$g(n,i,c,Nf,o),p===f)break;f=p}f!==null&&c.stopPropagation()}else $g(n,i,c,null,o)}}function l0(n){return n=Tr(n),c0(n)}var Nf=null;function c0(n){if(Nf=null,n=fs(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===31){if(n=m(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Nf=n,null}function Rw(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rt()){case ue:return 2;case Xt:return 8;case wt:case as:return 32;case Hs:return 268435456;default:return 32}default:return 32}}var u0=!1,Wi=null,Xi=null,Ji=null,Pu=new Map,Vu=new Map,Zi=[],ZR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cw(n,i){switch(n){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":Pu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vu.delete(i.pointerId)}}function Mu(n,i,o,c,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Er(i),i!==null&&Aw(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function e2(n,i,o,c,f){switch(i){case"focusin":return Wi=Mu(Wi,n,i,o,c,f),!0;case"dragenter":return Xi=Mu(Xi,n,i,o,c,f),!0;case"mouseover":return Ji=Mu(Ji,n,i,o,c,f),!0;case"pointerover":var p=f.pointerId;return Pu.set(p,Mu(Pu.get(p)||null,n,i,o,c,f)),!0;case"gotpointercapture":return p=f.pointerId,Vu.set(p,Mu(Vu.get(p)||null,n,i,o,c,f)),!0}return!1}function kw(n){var i=fs(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,Br(n.priority,function(){Nw(o)});return}}else if(i===31){if(i=m(o),i!==null){n.blockedOn=i,Br(n.priority,function(){Nw(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Rf(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=l0(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Yc=c,o.target.dispatchEvent(c),Yc=null}else return i=Er(o),i!==null&&Aw(i),n.blockedOn=o,!1;i.shift()}return!0}function Dw(n,i,o){Rf(n)&&o.delete(i)}function t2(){u0=!1,Wi!==null&&Rf(Wi)&&(Wi=null),Xi!==null&&Rf(Xi)&&(Xi=null),Ji!==null&&Rf(Ji)&&(Ji=null),Pu.forEach(Dw),Vu.forEach(Dw)}function Cf(n,i){n.blockedOn===i&&(n.blockedOn=null,u0||(u0=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,t2)))}var kf=null;function jw(n){kf!==n&&(kf=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){kf===n&&(kf=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(c0(c||o)===null)continue;break}var p=Er(o);p!==null&&(n.splice(i,3),i-=3,lg(p,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function jl(n){function i(j){return Cf(j,n)}Wi!==null&&Cf(Wi,n),Xi!==null&&Cf(Xi,n),Ji!==null&&Cf(Ji,n),Pu.forEach(i),Vu.forEach(i);for(var o=0;o<Zi.length;o++){var c=Zi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Zi.length&&(o=Zi[0],o.blockedOn===null);)kw(o),o.blockedOn===null&&Zi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],p=o[c+1],v=f[pn]||null;if(typeof p=="function")v||jw(o);else if(v){var I=null;if(p&&p.hasAttribute("formAction")){if(f=p,v=p[pn]||null)I=v.formAction;else if(c0(f)!==null)continue}else I=v.action;typeof I=="function"?o[c+1]=I:(o.splice(c,3),c-=3),jw(o)}}}function Pw(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function d0(n){this._internalRoot=n}Df.prototype.render=d0.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,c=yr();Iw(o,c,n,i,null,null)},Df.prototype.unmount=d0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Iw(n.current,2,null,n,null,null),hf(),i[ds]=null}};function Df(n){this._internalRoot=n}Df.prototype.unstable_scheduleHydration=function(n){if(n){var i=dh();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Zi.length&&i!==0&&i<Zi[o].priority;o++);Zi.splice(o,0,n),o===0&&kw(n)}};var Vw=e.version;if(Vw!=="19.2.3")throw Error(r(527,Vw,"19.2.3"));oe.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(i),n=n!==null?x(n):null,n=n===null?null:n.stateNode,n};var n2={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jf.isDisabled&&jf.supportsFiber)try{Bn=jf.inject(n2),Ee=jf}catch{}}return Lu.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,c="",f=qv,p=Fv,v=Hv;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=Ew(n,1,!1,null,null,o,c,null,f,p,v,Pw),n[ds]=i.current,Qg(n),new d0(i)},Lu.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var c=!1,f="",p=qv,v=Fv,I=Hv,j=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(j=o.formState)),i=Ew(n,1,!0,i,o??null,c,f,j,p,v,I,Pw),i.context=Tw(null),o=i.current,c=yr(),c=Oa(c),f=Li(c),f.callback=null,Ui(o,f,c),o=c,i.current.lanes=o,Va(i,o),As(i),n[ds]=i.current,Qg(n),new Df(i)},Lu.version="19.2.3",Lu}var Gw;function d2(){if(Gw)return m0.exports;Gw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch{}}return s(),m0.exports=u2(),m0.exports}var h2=d2();const f2=Cy(h2);const m2=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),p2=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Qw=s=>{const e=p2(s);return e.charAt(0).toUpperCase()+e.slice(1)},aI=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),g2=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var y2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const _2=nt.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:u,...m},g)=>nt.createElement("svg",{ref:g,...y2,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:aI("lucide",a),...!l&&!g2(m)&&{"aria-hidden":"true"},...m},[...u.map(([y,x])=>nt.createElement(y,x)),...Array.isArray(l)?l:[l]]));const lt=(s,e)=>{const t=nt.forwardRef(({className:r,...a},l)=>nt.createElement(_2,{ref:l,iconNode:e,className:aI(`lucide-${m2(Qw(s))}`,`lucide-${s}`,r),...a}));return t.displayName=Qw(s),t};const b2=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],oI=lt("archive",b2);const v2=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],_d=lt("box",v2);const x2=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],w2=lt("calculator",x2);const E2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],lI=lt("check",E2);const T2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],L0=lt("copy",T2);const I2=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],S2=lt("dollar-sign",I2);const A2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],N2=lt("download",A2);const R2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],U0=lt("eye",R2);const C2=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],sm=lt("file-text",C2);const k2=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],$w=lt("layers",k2);const D2=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],j2=lt("loader",D2);const P2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],V2=lt("lock",P2);const M2=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Kw=lt("log-out",M2);const O2=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],L2=lt("menu",O2);const U2=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],z2=lt("monitor",U2);const B2=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],q2=lt("moon",B2);const F2=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],H2=lt("pen",F2);const G2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_o=lt("plus",G2);const Q2=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],qf=lt("printer",Q2);const $2=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],z0=lt("refresh-cw",$2);const K2=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Yw=lt("rotate-ccw",K2);const Y2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cI=lt("save",Y2);const W2=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],X2=lt("settings",W2);const J2=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Z2=lt("shield-check",J2);const eC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],uI=lt("shield",eC);const tC=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],To=lt("square-pen",tC);const nC=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],rC=lt("sun",nC);const sC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Os=lt("trash-2",sC);const iC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],aC=lt("triangle-alert",iC);const oC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],lC=lt("user-plus",oC);const cC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],uC=lt("user",cC);const dC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ec=lt("x",dC),hC=()=>{};var Ww={};const dI=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},fC=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],u=s[t++],m=s[t++],g=((a&7)<<18|(l&63)<<12|(u&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const l=s[t++],u=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},hI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],u=a+1<s.length,m=u?s[a+1]:0,g=a+2<s.length,y=g?s[a+2]:0,x=l>>2,_=(l&3)<<4|m>>4;let E=(m&15)<<2|y>>6,D=y&63;g||(D=64,u||(E=64)),r.push(t[x],t[_],t[E],t[D])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(dI(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):fC(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],m=a<s.length?t[s.charAt(a)]:0;++a;const y=a<s.length?t[s.charAt(a)]:64;++a;const _=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||m==null||y==null||_==null)throw new mC;const E=l<<2|m>>4;if(r.push(E),y!==64){const D=m<<4&240|y>>2;if(r.push(D),_!==64){const L=y<<6&192|_;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class mC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pC=function(s){const e=dI(s);return hI.encodeByteArray(e,!0)},im=function(s){return pC(s).replace(/\./g,"")},Dy=function(s){try{return hI.decodeString(s,!0)}catch{}return null};function am(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!gC(t)||(s[t]=am(s[t],e[t]));return s}function gC(s){return s!=="__proto__"}function jy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const yC=()=>jy().__FIREBASE_DEFAULTS__,_C=()=>{if(typeof process>"u"||typeof Ww>"u")return;const s=Ww.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},bC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Dy(s[1]);return e&&JSON.parse(e)},Py=()=>{try{return hC()||yC()||_C()||bC()}catch{return}},Vy=()=>Py()?.config,vC=s=>Py()?.[`_${s}`];class xC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Tc(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fI(s){return(await fetch(s,{credentials:"include"})).ok}function wC(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[im(JSON.stringify(t)),im(JSON.stringify(u)),""].join(".")}const rd={};function EC(){const s={prod:[],emulator:[]};for(const e of Object.keys(rd))rd[e]?s.emulator.push(e):s.prod.push(e);return s}function TC(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Xw=!1;function mI(s,e){if(typeof window>"u"||typeof document>"u"||!Tc(window.location.host)||rd[s]===e||rd[s]||Xw)return;rd[s]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=EC().prod.length>0;function u(){const E=document.getElementById(r);E&&E.remove()}function m(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,D){E.setAttribute("width","24"),E.setAttribute("id",D),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function y(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Xw=!0,u()},E}function x(E,D){E.setAttribute("id",D),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){const E=TC(r),D=t("text"),L=document.getElementById(D)||document.createElement("span"),R=t("learnmore"),B=document.getElementById(R)||document.createElement("a"),z=t("preprendIcon"),ne=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Z=E.element;m(Z),x(B,R);const Se=y();g(ne,z),Z.append(ne,L,B,Se),document.body.appendChild(Z)}l?(L.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function Dm(){const s=Py()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SC(){return typeof window<"u"||pI()}function pI(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function AC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gI(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function My(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yI(){const s=Ot();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function _I(){return!Dm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bI(){return!Dm()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function bd(){try{return typeof indexedDB=="object"}catch{return!1}}function NC(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const RC="FirebaseError";class Qn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=RC,Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qo.prototype.create)}}class qo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?CC(l,r):"Error",m=`${this.serviceName}: ${u} (${a}).`;return new Qn(a,m,r)}}function CC(s,e){return s.replace(kC,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const kC=/\{\$([^}]+)}/g;function Jw(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function DC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function pa(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],u=e[a];if(Zw(l)&&Zw(u)){if(!pa(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Zw(s){return s!==null&&typeof s=="object"}function Ic(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ql(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Yu(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function vI(s,e){const t=new jC(s,e);return t.subscribe.bind(t)}class jC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");PC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=_0),a.error===void 0&&(a.error=_0),a.complete===void 0&&(a.complete=_0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch{}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PC(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function _0(){}function je(s){return s&&s._delegate?s._delegate:s}class zs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const co="[DEFAULT]";class VC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new xC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OC(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&u.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MC(s){return s===co?void 0:s}function OC(s){return s.instantiationMode==="EAGER"}class xI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new VC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Oy=[];var Ye;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ye||(Ye={}));const wI={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},LC=Ye.INFO,UC={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},zC=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=UC[e];if(!a)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jm{constructor(e){this.name=e,this._logLevel=LC,this._logHandler=zC,this._userLogHandler=null,Oy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}function BC(s){Oy.forEach(e=>{e.setLogLevel(s)})}function qC(s,e){for(const t of Oy){let r=null;e&&e.level&&(r=wI[e.level]),s===null?t.userLogHandler=null:t.userLogHandler=(a,l,...u)=>{const m=u.map(g=>{if(g==null)return null;if(typeof g=="string")return g;if(typeof g=="number"||typeof g=="boolean")return g.toString();if(g instanceof Error)return g.message;try{return JSON.stringify(g)}catch{return null}}).filter(g=>g).join(" ");l>=(r??a.logLevel)&&s({level:Ye[l].toLowerCase(),message:m,args:u,type:a.name})}}}const FC=(s,e)=>e.some(t=>s instanceof t);let eE,tE;function HC(){return eE||(eE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GC(){return tE||(tE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EI=new WeakMap,B0=new WeakMap,TI=new WeakMap,b0=new WeakMap,Ly=new WeakMap;function QC(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",u)},l=()=>{t(ua(s.result)),a()},u=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&EI.set(t,s)}).catch(()=>{}),Ly.set(e,s),e}function $C(s){if(B0.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",u),s.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",u),s.addEventListener("abort",u)});B0.set(s,e)}let q0={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return B0.get(s);if(e==="objectStoreNames")return s.objectStoreNames||TI.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ua(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function KC(s){q0=s(q0)}function YC(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(v0(this),e,...t);return TI.set(r,e.sort?e.sort():[e]),ua(r)}:GC().includes(s)?function(...e){return s.apply(v0(this),e),ua(EI.get(this))}:function(...e){return ua(s.apply(v0(this),e))}}function WC(s){return typeof s=="function"?YC(s):(s instanceof IDBTransaction&&$C(s),FC(s,HC())?new Proxy(s,q0):s)}function ua(s){if(s instanceof IDBRequest)return QC(s);if(b0.has(s))return b0.get(s);const e=WC(s);return e!==s&&(b0.set(s,e),Ly.set(e,s)),e}const v0=s=>Ly.get(s);function XC(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(s,e),m=ua(u);return r&&u.addEventListener("upgradeneeded",g=>{r(ua(u.result),g.oldVersion,g.newVersion,ua(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const JC=["get","getKey","getAll","getAllKeys","count"],ZC=["put","add","delete","clear"],x0=new Map;function nE(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(x0.get(e))return x0.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=ZC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||JC.includes(t)))return;const l=async function(u,...m){const g=this.transaction(u,a?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),a&&g.done]))[0]};return x0.set(e,l),l}KC(s=>({...s,get:(e,t,r)=>nE(e,t)||s.get(e,t,r),has:(e,t)=>!!nE(e,t)||s.has(e,t)}));class ek{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function tk(s){return s.getComponent()?.type==="VERSION"}const om="@firebase/app",F0="0.14.7";const fi=new jm("@firebase/app"),nk="@firebase/app-compat",rk="@firebase/analytics-compat",sk="@firebase/analytics",ik="@firebase/app-check-compat",ak="@firebase/app-check",ok="@firebase/auth",lk="@firebase/auth-compat",ck="@firebase/database",uk="@firebase/data-connect",dk="@firebase/database-compat",hk="@firebase/functions",fk="@firebase/functions-compat",mk="@firebase/installations",pk="@firebase/installations-compat",gk="@firebase/messaging",yk="@firebase/messaging-compat",_k="@firebase/performance",bk="@firebase/performance-compat",vk="@firebase/remote-config",xk="@firebase/remote-config-compat",wk="@firebase/storage",Ek="@firebase/storage-compat",Tk="@firebase/firestore",Ik="@firebase/ai",Sk="@firebase/firestore-compat",Ak="firebase",Nk="12.8.0";const ga="[DEFAULT]",Rk={[om]:"fire-core",[nk]:"fire-core-compat",[sk]:"fire-analytics",[rk]:"fire-analytics-compat",[ak]:"fire-app-check",[ik]:"fire-app-check-compat",[ok]:"fire-auth",[lk]:"fire-auth-compat",[ck]:"fire-rtdb",[uk]:"fire-data-connect",[dk]:"fire-rtdb-compat",[hk]:"fire-fn",[fk]:"fire-fn-compat",[mk]:"fire-iid",[pk]:"fire-iid-compat",[gk]:"fire-fcm",[yk]:"fire-fcm-compat",[_k]:"fire-perf",[bk]:"fire-perf-compat",[vk]:"fire-rc",[xk]:"fire-rc-compat",[wk]:"fire-gcs",[Ek]:"fire-gcs-compat",[Tk]:"fire-fst",[Sk]:"fire-fst-compat",[Ik]:"fire-vertex","fire-js":"fire-js",[Ak]:"fire-js-all"};const ya=new Map,tc=new Map,nc=new Map;function vd(s,e){try{s.container.addComponent(e)}catch(t){fi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function II(s,e){s.container.addOrOverwriteComponent(e)}function _a(s){const e=s.name;if(nc.has(e))return fi.debug(`There were multiple attempts to register component ${e}.`),!1;nc.set(e,s);for(const t of ya.values())vd(t,s);for(const t of tc.values())vd(t,s);return!0}function SI(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Ck(s,e,t=ga){SI(s,e).clearInstance(t)}function Uy(s){return s.options!==void 0}function AI(s){return Uy(s)?!1:"authIdToken"in s||"appCheckToken"in s||"releaseOnDeref"in s||"automaticDataCollectionEnabled"in s}function jt(s){return s==null?!1:s.settings!==void 0}function kk(){nc.clear()}const Dk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new qo("app","Firebase",Dk);let NI=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}};function rE(s,e){const t=Dy(s.split(".")[1]);if(t===null||JSON.parse(t).exp===void 0)return;const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0}class jk extends NI{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,u={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,u,a);else{const m=e;super(m.options,u,a)}this._serverConfig={automaticDataCollectionEnabled:l,...t},this._serverConfig.authIdToken&&rE(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&rE(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Zr(om,F0,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){By(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw xr.create("server-app-deleted")}}const Sa=Nk;function zy(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:ga,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw xr.create("bad-app-name",{appName:String(a)});if(t||(t=Vy()),!t)throw xr.create("no-options");const l=ya.get(a);if(l){if(pa(t,l.options)&&pa(r,l.config))return l;throw xr.create("duplicate-app",{appName:a})}const u=new xI(a);for(const g of nc.values())u.addComponent(g);const m=new NI(t,r,u);return ya.set(a,m),m}function Pk(s,e={}){if(SC()&&!pI())throw xr.create("invalid-server-app-environment");let t,r=e||{};if(s&&(Uy(s)?t=s.options:AI(s)?r=s:t=s),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=Vy()),!t)throw xr.create("no-options");const a={...r,...t};a.releaseOnDeref!==void 0&&delete a.releaseOnDeref;const l=x=>[...x].reduce((_,E)=>Math.imul(31,_)+E.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw xr.create("finalization-registry-not-supported",{});const u=""+l(JSON.stringify(a)),m=tc.get(u);if(m)return m.incRefCount(r.releaseOnDeref),m;const g=new xI(u);for(const x of nc.values())g.addComponent(x);const y=new jk(t,r,u,g);return tc.set(u,y),y}function Vk(s=ga){const e=ya.get(s);if(!e&&s===ga&&Vy())return zy();if(!e)throw xr.create("no-app",{appName:s});return e}function Mk(){return Array.from(ya.values())}async function By(s){let e=!1;const t=s.name;ya.has(t)?(e=!0,ya.delete(t)):tc.has(t)&&s.decRefCount()<=0&&(tc.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function Zr(s,e,t){let r=Rk[s]??s;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fi.warn(u.join(" "));return}_a(new zs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function RI(s,e){if(s!==null&&typeof s!="function")throw xr.create("invalid-log-argument");qC(s,e)}function CI(s){BC(s)}const Ok="firebase-heartbeat-database",Lk=1,xd="firebase-heartbeat-store";let w0=null;function kI(){return w0||(w0=XC(Ok,Lk,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(xd)}catch{}}}}).catch(s=>{throw xr.create("idb-open",{originalErrorMessage:s.message})})),w0}async function Uk(s){try{const t=(await kI()).transaction(xd),r=await t.objectStore(xd).get(DI(s));return await t.done,r}catch(e){if(e instanceof Qn)fi.warn(e.message);else{const t=xr.create("idb-get",{originalErrorMessage:e?.message});fi.warn(t.message)}}}async function sE(s,e){try{const r=(await kI()).transaction(xd,"readwrite");await r.objectStore(xd).put(e,DI(s)),await r.done}catch(t){if(t instanceof Qn)fi.warn(t.message);else{const r=xr.create("idb-set",{originalErrorMessage:t?.message});fi.warn(r.message)}}}function DI(s){return`${s.name}!${s.options.appId}`}const zk=1024,Bk=30;class qk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Hk(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=iE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Bk){const a=Gk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=iE(),{heartbeatsToSend:t,unsentEntries:r}=Fk(this._heartbeatsCache.heartbeats),a=im(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return fi.warn(e),""}}}function iE(){return new Date().toISOString().substring(0,10)}function Fk(s,e=zk){const t=[];let r=s.slice();for(const a of s){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),aE(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),aE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Hk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bd()?NC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Uk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function aE(s){return im(JSON.stringify({version:2,heartbeats:s})).length}function Gk(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function Qk(s){_a(new zs("platform-logger",e=>new ek(e),"PRIVATE")),_a(new zs("heartbeat",e=>new qk(e),"PRIVATE")),Zr(om,F0,s),Zr(om,F0,"esm2020"),Zr("fire-js","")}Qk("");const $k=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Qn,SDK_VERSION:Sa,_DEFAULT_ENTRY_NAME:ga,_addComponent:vd,_addOrOverwriteComponent:II,_apps:ya,_clearComponents:kk,_components:nc,_getProvider:SI,_isFirebaseApp:Uy,_isFirebaseServerApp:jt,_isFirebaseServerAppSettings:AI,_registerComponent:_a,_removeServiceInstance:Ck,_serverApps:tc,deleteApp:By,getApp:Vk,getApps:Mk,initializeApp:zy,initializeServerApp:Pk,onLog:RI,registerVersion:Zr,setLogLevel:CI},Symbol.toStringTag,{value:"Module"}));class Kk{constructor(e,t){this._delegate=e,this.firebase=t,vd(e,new zs("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),By(this._delegate)))}_getService(e,t=ga){this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&r.getComponent()?.instantiationMode==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=ga){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){vd(this._delegate,e)}_addOrOverwriteComponent(e){II(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Yk={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},oE=new qo("app-compat","Firebase",Yk);function Wk(s){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:Zr,setLogLevel:CI,onLog:RI,apps:null,SDK_VERSION:Sa,INTERNAL:{registerComponent:m,removeApp:r,useAsService:g,modularAPIs:$k}};t.default=t,Object.defineProperty(t,"apps",{get:u});function r(y){delete e[y]}function a(y){if(y=y||ga,!Jw(e,y))throw oE.create("no-app",{appName:y});return e[y]}a.App=s;function l(y,x={}){const _=zy(y,x);if(Jw(e,_.name))return e[_.name];const E=new s(_,t);return e[_.name]=E,E}function u(){return Object.keys(e).map(y=>e[y])}function m(y){const x=y.name,_=x.replace("-compat","");if(_a(y)&&y.type==="PUBLIC"){const E=(D=a())=>{if(typeof D[_]!="function")throw oE.create("invalid-app-argument",{appName:x});return D[_]()};y.serviceProps!==void 0&&am(E,y.serviceProps),t[_]=E,s.prototype[_]=function(...D){return this._getService.bind(this,x).apply(this,y.multipleInstances?D:[])}}return y.type==="PUBLIC"?t[_]:null}function g(y,x){return x==="serverAuth"?null:x}return t}function jI(){const s=Wk(Kk);s.INTERNAL={...s.INTERNAL,createFirebaseNamespace:jI,extendNamespace:e,createSubscribe:vI,ErrorFactory:qo,deepExtend:am};function e(t){am(s,t)}return s}const Xk=jI();const lE=new jm("@firebase/app-compat"),Jk="@firebase/app-compat",Zk="0.5.7";function eD(s){Zr(Jk,Zk,s)}try{const s=jy();if(s.firebase!==void 0){lE.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=s.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&lE.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const es=Xk;eD();var tD="firebase",nD="12.8.0";es.registerVersion(tD,nD,"app-compat");const Uu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Pl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function rD(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function PI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sD=rD,iD=PI,VI=new qo("auth","Firebase",PI());const lm=new jm("@firebase/auth");function aD(s,...e){lm.logLevel<=Ye.WARN&&lm.warn(`Auth (${Sa}): ${s}`,...e)}function Ff(s,...e){lm.logLevel<=Ye.ERROR&&lm.error(`Auth (${Sa}): ${s}`,...e)}function kn(s,...e){throw Fy(s,...e)}function fn(s,...e){return Fy(s,...e)}function qy(s,e,t){const r={...iD(),[e]:t};return new qo("auth","Firebase",r).create(e,{appName:s.name})}function vn(s){return qy(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sc(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&kn(s,"argument-error"),qy(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fy(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return VI.create(s,...e)}function he(s,e,...t){if(!s)throw Fy(e,...t)}function Ps(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Ff(e),new Error(e)}function ss(s,e){s||Ps(e)}function wd(){return typeof self<"u"&&self.location?.href||""}function Hy(){return cE()==="http:"||cE()==="https:"}function cE(){return typeof self<"u"&&self.location?.protocol||null}function oD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Hy()||gI()||"connection"in navigator)?navigator.onLine:!0}function lD(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class qd{constructor(e,t){this.shortDelay=e,this.longDelay=t,ss(t>e,"Short delay should be less than long delay!"),this.isMobile=IC()||My()}get(){return oD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gy(s,e){ss(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class MI{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const uD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dD=new qd(3e4,6e4);function Ft(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ht(s,e,t,r,a={}){return OI(s,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const m=Ic({key:s.config.apiKey,...u}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...l};return AC()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Tc(s.emulatorConfig.host)&&(y.credentials="include"),MI.fetch()(await LI(s,s.config.apiHost,t,m),y)})}async function OI(s,e,t){s._canInitEmulator=!1;const r={...cD,...e};try{const a=new fD(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Wu(s,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const m=l.ok?u.errorMessage:u.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(s,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Wu(s,"email-already-in-use",u);if(g==="USER_DISABLED")throw Wu(s,"user-disabled",u);const x=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw qy(s,x,y);kn(s,x)}}catch(a){if(a instanceof Qn)throw a;kn(s,"network-request-failed",{message:String(a)})}}async function yi(s,e,t,r,a={}){const l=await Ht(s,e,t,r,a);return"mfaPendingCredential"in l&&kn(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function LI(s,e,t,r){const a=`${e}${t}?${r}`,l=s,u=l.config.emulator?Gy(s.config,a):`${s.config.apiScheme}://${a}`;return uD.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function hD(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(fn(this.auth,"network-request-failed")),dD.get())})}}function Wu(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=fn(s,e,r);return a.customData._tokenResponse=t,a}function uE(s){return s!==void 0&&s.getResponse!==void 0}function dE(s){return s!==void 0&&s.enterprise!==void 0}class UI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return hD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mD(s){return(await Ht(s,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function zI(s,e){return Ht(s,"GET","/v2/recaptchaConfig",Ft(s,e))}async function pD(s,e){return Ht(s,"POST","/v1/accounts:delete",e)}async function gD(s,e){return Ht(s,"POST","/v1/accounts:update",e)}async function cm(s,e){return Ht(s,"POST","/v1/accounts:lookup",e)}function sd(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yD(s,e=!1){const t=je(s),r=await t.getIdToken(e),a=Pm(r);he(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:r,authTime:sd(E0(a.auth_time)),issuedAtTime:sd(E0(a.iat)),expirationTime:sd(E0(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function E0(s){return Number(s)*1e3}function Pm(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return Ff("JWT malformed, contained fewer than 3 sections"),null;try{const a=Dy(t);return a?JSON.parse(a):(Ff("Failed to decode base64 JWT payload"),null)}catch(a){return Ff("Caught error parsing JWT payload as JSON",a?.toString()),null}}function hE(s){const e=Pm(s);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function mi(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Qn&&_D(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function _D({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class bD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class H0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sd(this.lastLoginAt),this.creationTime=sd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ed(s){const e=s.auth,t=await s.getIdToken(),r=await mi(s,cm(e,{idToken:t}));he(r?.users.length,e,"internal-error");const a=r.users[0];s._notifyReloadListener(a);const l=a.providerUserInfo?.length?BI(a.providerUserInfo):[],u=xD(s.providerData,l),m=s.isAnonymous,g=!(s.email&&a.passwordHash)&&!u?.length,y=m?g:!1,x={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new H0(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(s,x)}async function vD(s){const e=je(s);await Ed(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xD(s,e){return[...s.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function BI(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function wD(s,e){const t=await OI(s,{},async()=>{const r=Ic({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,u=await LI(s,a,"/v1/token",`key=${l}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&Tc(s.emulatorConfig.host)&&(g.credentials="include"),MI.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ED(s,e){return Ht(s,"POST","/v2/accounts:revokeToken",Ft(s,e))}class $l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=hE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await wD(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new $l;return r&&(he(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(he(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(he(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $l,this.toJSON())}_performRefresh(){return Ps("not implemented")}}function ta(s,e){he(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Jr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new bD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new H0(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await mi(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yD(this,e)}reload(){return vD(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ed(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jt(this.auth.app))return Promise.reject(vn(this.auth));const e=await this.getIdToken();return await mi(this,pD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,x=t.lastLoginAt??void 0,{uid:_,emailVerified:E,isAnonymous:D,providerData:L,stsTokenManager:R}=t;he(_&&R,e,"internal-error");const B=$l.fromJSON(this.name,R);he(typeof _=="string",e,"internal-error"),ta(r,e.name),ta(a,e.name),he(typeof E=="boolean",e,"internal-error"),he(typeof D=="boolean",e,"internal-error"),ta(l,e.name),ta(u,e.name),ta(m,e.name),ta(g,e.name),ta(y,e.name),ta(x,e.name);const z=new Jr({uid:_,auth:e,email:a,emailVerified:E,displayName:r,isAnonymous:D,photoURL:u,phoneNumber:l,tenantId:m,stsTokenManager:B,createdAt:y,lastLoginAt:x});return L&&Array.isArray(L)&&(z.providerData=L.map(ne=>({...ne}))),g&&(z._redirectEventId=g),z}static async _fromIdTokenResponse(e,t,r=!1){const a=new $l;a.updateFromServerResponse(t);const l=new Jr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Ed(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];he(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?BI(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,m=new $l;m.updateFromIdToken(r);const g=new Jr({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new H0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(g,y),g}}const fE=new Map;function vr(s){ss(s instanceof Function,"Expected a class definition");let e=fE.get(s);return e?(ss(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,fE.set(s,e),e)}class qI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qI.type="NONE";const rc=qI;function Io(s,e,t){return`firebase:${s}:${e}:${t}`}class Kl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Io(this.userKey,a.apiKey,l),this.fullPersistenceKey=Io("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cm(this.auth,{idToken:e}).catch(()=>{});return t?Jr._fromGetAccountInfoResponse(this.auth,t,e):null}return Jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Kl(vr(rc),e,r);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||vr(rc);const u=Io(r,e.config.apiKey,e.name);let m=null;for(const y of t)try{const x=await y._get(u);if(x){let _;if(typeof x=="string"){const E=await cm(e,{idToken:x}).catch(()=>{});if(!E)break;_=await Jr._fromGetAccountInfoResponse(e,E,x)}else _=Jr._fromJSON(e,x);y!==l&&(m=_),l=y;break}}catch{}const g=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Kl(l,e,r):(l=g[0],m&&await l._set(u,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Kl(l,e,r))}}function mE(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($I(e))return"Blackberry";if(KI(e))return"Webos";if(HI(e))return"Safari";if((e.includes("chrome/")||GI(e))&&!e.includes("edge/"))return"Chrome";if(Fd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function FI(s=Ot()){return/firefox\//i.test(s)}function HI(s=Ot()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GI(s=Ot()){return/crios\//i.test(s)}function QI(s=Ot()){return/iemobile/i.test(s)}function Fd(s=Ot()){return/android/i.test(s)}function $I(s=Ot()){return/blackberry/i.test(s)}function KI(s=Ot()){return/webos/i.test(s)}function Hd(s=Ot()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function TD(s=Ot()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(s)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(s)}function ID(s=Ot()){return Hd(s)&&!!window.navigator?.standalone}function SD(){return yI()&&document.documentMode===10}function YI(s=Ot()){return Hd(s)||Fd(s)||KI(s)||$I(s)||/windows phone/i.test(s)||QI(s)}function WI(s,e=[]){let t;switch(s){case"Browser":t=mE(Ot());break;case"Worker":t=`${mE(Ot())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sa}/${r}`}class AD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,m)=>{try{const g=e(l);u(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function ND(s,e={}){return Ht(s,"GET","/v2/passwordPolicy",Ft(s,e))}const RD=6;class CD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??RD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class kD{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pE(this),this.idTokenSubscription=new pE(this),this.beforeStateQueue=new AD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cm(this,{idToken:e}),r=await Jr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch{await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jt(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===u)&&m?.user&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ed(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jt(this.app))return Promise.reject(vn(this));const t=e?je(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jt(this.app)?Promise.reject(vn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jt(this.app)?Promise.reject(vn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ND(this),t=new CD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await ED(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vr(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[vr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(m,this,"internal-error"),m.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,a);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Lt(s){return je(s)}class pE{constructor(e){this.auth=e,this.observer=null,this.addObserver=vI(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DD(s){Gd=s}function Qy(s){return Gd.loadJS(s)}function jD(){return Gd.recaptchaV2Script}function PD(){return Gd.recaptchaEnterpriseScript}function VD(){return Gd.gapiScript}function XI(s){return`__${s}${Math.floor(Math.random()*1e6)}`}const MD=500,OD=6e4,Pf=1e12;class LD{constructor(e){this.auth=e,this.counter=Pf,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new BD(e,this.auth.name,t||{})),this.counter++,r}reset(e){const t=e||Pf;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||Pf;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||Pf;return this._widgets.get(t)?.execute(),""}}class UD{constructor(){this.enterprise=new zD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class BD{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;he(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=qD(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},OD)},MD))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function qD(s){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<s;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const FD="recaptcha-enterprise",id="NO_RECAPTCHA";class JI{constructor(e){this.type=FD,this.auth=Lt(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,m)=>{zI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new UI(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(g=>{m(g)})})}function a(l,u,m){const g=window.grecaptcha;dE(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(id)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new UD().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(m=>{if(!t&&dE(window.grecaptcha))a(m,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=PD();g.length!==0&&(g+=m),Qy(g).then(()=>{a(m,l,u)}).catch(y=>{u(y)})}}).catch(m=>{u(m)})})}}async function zu(s,e,t,r=!1,a=!1){const l=new JI(s);let u;if(a)u=id;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:u}):Object.assign(m,{captchaResponse:u}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function da(s,e,t,r,a){if(a==="EMAIL_PASSWORD_PROVIDER")if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await zu(s,e,t,t==="getOobCode");return r(s,l)}else return r(s,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){const u=await zu(s,e,t,t==="getOobCode");return r(s,u)}else return Promise.reject(l)});else if(a==="PHONE_PROVIDER")if(s._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const l=await zu(s,e,t);return r(s,l).catch(async u=>{if(s._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){const m=await zu(s,e,t,!1,!0);return r(s,m)}return Promise.reject(u)})}else{const l=await zu(s,e,t,!1,!0);return r(s,l)}else return Promise.reject(a+" provider is not supported.")}async function HD(s){const e=Lt(s),t=await zI(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new UI(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new JI(e).verify()}function GD(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(vr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function QD(s,e,t){const r=Lt(s);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!!t?.disableWarnings,l=ZI(e),{host:u,port:m}=$D(e),g=m===null?"":`:${m}`,y={url:`${l}//${u}${g}/`},x=Object.freeze({host:u,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(pa(y,r.config.emulator)&&pa(x,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=x,r.settings.appVerificationDisabledForTesting=!0,Tc(u)?(fI(`${l}//${u}${g}`),mI("Auth",!0)):a||KD()}function ZI(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function $D(s){const e=ZI(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:gE(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:gE(u)}}}function gE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function KD(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Ac{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ps("not implemented")}_getIdTokenResponse(e){return Ps("not implemented")}_linkToIdToken(e,t){return Ps("not implemented")}_getReauthenticationResolver(e){return Ps("not implemented")}}async function eS(s,e){return Ht(s,"POST","/v1/accounts:resetPassword",Ft(s,e))}async function YD(s,e){return Ht(s,"POST","/v1/accounts:update",e)}async function WD(s,e){return Ht(s,"POST","/v1/accounts:signUp",e)}async function XD(s,e){return Ht(s,"POST","/v1/accounts:update",Ft(s,e))}async function JD(s,e){return yi(s,"POST","/v1/accounts:signInWithPassword",Ft(s,e))}async function Vm(s,e){return Ht(s,"POST","/v1/accounts:sendOobCode",Ft(s,e))}async function ZD(s,e){return Vm(s,e)}async function ej(s,e){return Vm(s,e)}async function tj(s,e){return Vm(s,e)}async function nj(s,e){return Vm(s,e)}async function rj(s,e){return yi(s,"POST","/v1/accounts:signInWithEmailLink",Ft(s,e))}async function sj(s,e){return yi(s,"POST","/v1/accounts:signInWithEmailLink",Ft(s,e))}class Td extends Ac{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Td(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Td(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return da(e,t,"signInWithPassword",JD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return rj(e,{email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return da(e,r,"signUpPassword",WD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return sj(e,{idToken:t,email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function hi(s,e){return yi(s,"POST","/v1/accounts:signInWithIdp",Ft(s,e))}const ij="http://localhost";class Bs extends Ac{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const u=new Bs(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return hi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,hi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hi(e,t)}buildRequest(){const e={requestUri:ij,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ic(t)}return e}}async function yE(s,e){return Ht(s,"POST","/v1/accounts:sendVerificationCode",Ft(s,e))}async function aj(s,e){return yi(s,"POST","/v1/accounts:signInWithPhoneNumber",Ft(s,e))}async function oj(s,e){const t=await yi(s,"POST","/v1/accounts:signInWithPhoneNumber",Ft(s,e));if(t.temporaryProof)throw Wu(s,"account-exists-with-different-credential",t);return t}const lj={USER_NOT_FOUND:"user-not-found"};async function cj(s,e){const t={...e,operation:"REAUTH"};return yi(s,"POST","/v1/accounts:signInWithPhoneNumber",Ft(s,t),lj)}class So extends Ac{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new So({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new So({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return aj(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return oj(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return cj(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l}=e;return!r&&!t&&!a&&!l?null:new So({verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l})}}function uj(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dj(s){const e=Ql(Yu(s)).link,t=e?Ql(Yu(e)).deep_link_id:null,r=Ql(Yu(s)).deep_link_id;return(r?Ql(Yu(r)).link:null)||r||t||e||s}class Mm{constructor(e){const t=Ql(Yu(e)),r=t.apiKey??null,a=t.oobCode??null,l=uj(t.mode??null);he(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=dj(e);try{return new Mm(t)}catch{return null}}}class Aa{constructor(){this.providerId=Aa.PROVIDER_ID}static credential(e,t){return Td._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Mm.parseLink(t);return he(r,"argument-error"),Td._fromEmailAndCode(e,r.code,r.tenantId)}}Aa.PROVIDER_ID="password";Aa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Aa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _i{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nc extends _i{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Yl extends Nc{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return he("providerId"in t&&"signInMethod"in t,"argument-error"),Bs._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return he(e.idToken||e.accessToken,"argument-error"),Bs._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Yl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Yl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:a,pendingToken:l,nonce:u,providerId:m}=e;if(!r&&!a&&!t&&!l||!m)return null;try{return new Yl(m)._credential({idToken:t,accessToken:r,nonce:u,pendingToken:l})}catch{return null}}}class Cs extends Nc{constructor(){super("facebook.com")}static credential(e){return Bs._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cs.credential(e.oauthAccessToken)}catch{return null}}}Cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cs.PROVIDER_ID="facebook.com";class ks extends Nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bs._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ks.credential(t,r)}catch{return null}}}ks.GOOGLE_SIGN_IN_METHOD="google.com";ks.PROVIDER_ID="google.com";class Ds extends Nc{constructor(){super("github.com")}static credential(e){return Bs._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.GITHUB_SIGN_IN_METHOD="github.com";Ds.PROVIDER_ID="github.com";const hj="http://localhost";class sc extends Ac{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return hi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,hi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hi(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,pendingToken:l}=t;return!r||!a||!l||r!==a?null:new sc(r,l)}static _create(e,t){return new sc(e,t)}buildRequest(){return{requestUri:hj,returnSecureToken:!0,pendingToken:this.pendingToken}}}const fj="saml.";class um extends _i{constructor(e){he(e.startsWith(fj),"argument-error"),super(e)}static credentialFromResult(e){return um.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return um.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=sc.fromJSON(e);return he(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return sc._create(r,t)}catch{return null}}}class js extends Nc{constructor(){super("twitter.com")}static credential(e,t){return Bs._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return js.credential(t,r)}catch{return null}}}js.TWITTER_SIGN_IN_METHOD="twitter.com";js.PROVIDER_ID="twitter.com";async function tS(s,e){return yi(s,"POST","/v1/accounts:signUp",Ft(s,e))}class Or{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Jr._fromIdTokenResponse(e,r,a),u=_E(r);return new Or({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=_E(r);return new Or({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function _E(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function mj(s){if(jt(s.app))return Promise.reject(vn(s));const e=Lt(s);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Or({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await tS(e,{returnSecureToken:!0}),r=await Or._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class dm extends Qn{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,dm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new dm(e,t,r,a)}}function nS(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?dm._fromErrorAndOperation(s,l,e,r):l})}function rS(s){return new Set(s.map(({providerId:e})=>e).filter(e=>!!e))}async function pj(s,e){const t=je(s);await Om(!0,t,e);const{providerUserInfo:r}=await gD(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=rS(r||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function $y(s,e,t=!1){const r=await mi(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Or._forOperation(s,"link",r)}async function Om(s,e,t){await Ed(e);const r=rS(e.providerData),a=s===!1?"provider-already-linked":"no-such-provider";he(r.has(t)===s,e.auth,a)}async function sS(s,e,t=!1){const{auth:r}=s;if(jt(r.app))return Promise.reject(vn(r));const a="reauthenticate";try{const l=await mi(s,nS(r,a,e,s),t);he(l.idToken,r,"internal-error");const u=Pm(l.idToken);he(u,r,"internal-error");const{sub:m}=u;return he(s.uid===m,r,"user-mismatch"),Or._forOperation(s,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&kn(r,"user-mismatch"),l}}async function iS(s,e,t=!1){if(jt(s.app))return Promise.reject(vn(s));const r="signIn",a=await nS(s,r,e),l=await Or._fromIdTokenResponse(s,r,a);return t||await s._updateCurrentUser(l.user),l}async function Lm(s,e){return iS(Lt(s),e)}async function aS(s,e){const t=je(s);return await Om(!1,t,e.providerId),$y(t,e)}async function oS(s,e){return sS(je(s),e)}async function gj(s,e){return yi(s,"POST","/v1/accounts:signInWithCustomToken",Ft(s,e))}async function yj(s,e){if(jt(s.app))return Promise.reject(vn(s));const t=Lt(s),r=await gj(t,{token:e,returnSecureToken:!0}),a=await Or._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(a.user),a}class Qd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Ky._fromServerResponse(e,t):"totpInfo"in t?Yy._fromServerResponse(e,t):kn(e,"internal-error")}}class Ky extends Qd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Ky(t)}}class Yy extends Qd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Yy(t)}}function Um(s,e,t){he(t.url?.length>0,s,"invalid-continue-uri"),he(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,s,"invalid-dynamic-link-domain"),he(typeof t.linkDomain>"u"||t.linkDomain.length>0,s,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(he(t.iOS.bundleId.length>0,s,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(he(t.android.packageName.length>0,s,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function Wy(s){const e=Lt(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _j(s,e,t){const r=Lt(s),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Um(r,a,t),await da(r,a,"getOobCode",ej,"EMAIL_PASSWORD_PROVIDER")}async function bj(s,e,t){await eS(je(s),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Wy(s),r})}async function vj(s,e){await XD(je(s),{oobCode:e})}async function lS(s,e){const t=je(s),r=await eS(t,{oobCode:e}),a=r.requestType;switch(he(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(r.mfaInfo,t,"internal-error");default:he(r.email,t,"internal-error")}let l=null;return r.mfaInfo&&(l=Qd._fromServerResponse(Lt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:l},operation:a}}async function xj(s,e){const{data:t}=await lS(je(s),e);return t.email}async function wj(s,e,t){if(jt(s.app))return Promise.reject(vn(s));const r=Lt(s),u=await da(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tS,"EMAIL_PASSWORD_PROVIDER").catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Wy(s),g}),m=await Or._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(m.user),m}function Ej(s,e,t){return jt(s.app)?Promise.reject(vn(s)):Lm(je(s),Aa.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Wy(s),r})}async function Tj(s,e,t){const r=Lt(s),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(u,m){he(m.handleCodeInApp,r,"argument-error"),m&&Um(r,u,m)}l(a,t),await da(r,a,"getOobCode",tj,"EMAIL_PASSWORD_PROVIDER")}function Ij(s,e){return Mm.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function Sj(s,e,t){if(jt(s.app))return Promise.reject(vn(s));const r=je(s),a=Aa.credentialWithLink(e,t||wd());return he(a._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Lm(r,a)}async function Aj(s,e){return Ht(s,"POST","/v1/accounts:createAuthUri",Ft(s,e))}async function Nj(s,e){const t=Hy()?wd():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:a}=await Aj(je(s),r);return a||[]}async function Rj(s,e){const t=je(s),a={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()};e&&Um(t.auth,a,e);const{email:l}=await ZD(t.auth,a);l!==s.email&&await s.reload()}async function Cj(s,e,t){const r=je(s),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await s.getIdToken(),newEmail:e};t&&Um(r.auth,l,t);const{email:u}=await nj(r.auth,l);u!==s.email&&await s.reload()}async function kj(s,e){return Ht(s,"POST","/v1/accounts:update",e)}async function Dj(s,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=je(s),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await mi(r,kj(r.auth,l));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const m=r.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function jj(s,e){const t=je(s);return jt(t.auth.app)?Promise.reject(vn(t.auth)):cS(t,e,null)}function Pj(s,e){return cS(je(s),null,e)}async function cS(s,e,t){const{auth:r}=s,l={idToken:await s.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const u=await mi(s,YD(r,l));await s._updateTokensIfNecessary(u,!0)}function Vj(s){if(!s)return null;const{providerId:e}=s,t=s.rawUserInfo?JSON.parse(s.rawUserInfo):{},r=s.isNewUser||s.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&s?.idToken){const a=Pm(s.idToken)?.firebase?.sign_in_provider;if(a){const l=a!=="anonymous"&&a!=="custom"?a:null;return new Wl(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new Mj(r,t);case"github.com":return new Oj(r,t);case"google.com":return new Lj(r,t);case"twitter.com":return new Uj(r,t,s.screenName||null);case"custom":case"anonymous":return new Wl(r,null);default:return new Wl(r,e,t)}}class Wl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class uS extends Wl{constructor(e,t,r,a){super(e,t,r),this.username=a}}class Mj extends Wl{constructor(e,t){super(e,"facebook.com",t)}}class Oj extends uS{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}}class Lj extends Wl{constructor(e,t){super(e,"google.com",t)}}class Uj extends uS{constructor(e,t,r){super(e,"twitter.com",t,r)}}function zj(s){const{user:e,_tokenResponse:t}=s;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:Vj(t)}class bo{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new bo("enroll",e,t)}static _fromMfaPendingCredential(e){return new bo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return bo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return bo._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Xy{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Lt(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(m=>Qd._fromServerResponse(r,m));he(a.mfaPendingCredential,r,"internal-error");const u=bo._fromMfaPendingCredential(a.mfaPendingCredential);return new Xy(u,l,async m=>{const g=await m._process(r,u);delete a.mfaInfo,delete a.mfaPendingCredential;const y={...a,idToken:g.idToken,refreshToken:g.refreshToken};switch(t.operationType){case"signIn":const x=await Or._fromIdTokenResponse(r,t.operationType,y);return await r._updateCurrentUser(x.user),x;case"reauthenticate":return he(t.user,r,"internal-error"),Or._forOperation(t.user,t.operationType,y);default:kn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Bj(s,e){const t=je(s),r=e;return he(e.customData.operationType,t,"argument-error"),he(r.customData._serverResponse?.mfaPendingCredential,t,"argument-error"),Xy._fromError(t,r)}function bE(s,e){return Ht(s,"POST","/v2/accounts/mfaEnrollment:start",Ft(s,e))}function qj(s,e){return Ht(s,"POST","/v2/accounts/mfaEnrollment:finalize",Ft(s,e))}function Fj(s,e){return Ht(s,"POST","/v2/accounts/mfaEnrollment:withdraw",Ft(s,e))}class Jy{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Qd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Jy(e)}async getSession(){return bo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,a=await this.getSession(),l=await mi(this.user,r._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const a=await mi(this.user,Fj(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const T0=new WeakMap;function Hj(s){const e=je(s);return T0.has(e)||T0.set(e,Jy._fromUser(e)),T0.get(e)}const hm="__sak";class dS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hm,"1"),this.storage.removeItem(hm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Gj=1e3,Qj=10;class hS extends dS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,g)=>{this.notifyListeners(u,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);SD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Qj):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Gj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hS.type="LOCAL";const Zy=hS;class fS extends dS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fS.type="SESSION";const No=fS;function $j(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class zm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new zm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const m=Array.from(u).map(async y=>y(t.origin,l)),g=await $j(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zm.receivers=[];function $d(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class Kj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((m,g)=>{const y=$d("",20);a.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(_){const E=_;if(E.data.eventId===y)switch(E.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(E.data.response);break;default:clearTimeout(x),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function ln(){return window}function Yj(s){ln().location.href=s}function e_(){return typeof ln().WorkerGlobalScope<"u"&&typeof ln().importScripts=="function"}async function Wj(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xj(){return navigator?.serviceWorker?.controller||null}function Jj(){return e_()?self:null}const mS="firebaseLocalStorageDb",Zj=1,fm="firebaseLocalStorage",pS="fbase_key";class Kd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bm(s,e){return s.transaction([fm],e?"readwrite":"readonly").objectStore(fm)}function eP(){const s=indexedDB.deleteDatabase(mS);return new Kd(s).toPromise()}function G0(){const s=indexedDB.open(mS,Zj);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(fm,{keyPath:pS})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(fm)?e(r):(r.close(),await eP(),e(await G0()))})})}async function vE(s,e,t){const r=Bm(s,!0).put({[pS]:e,value:t});return new Kd(r).toPromise()}async function tP(s,e){const t=Bm(s,!1).get(e),r=await new Kd(t).toPromise();return r===void 0?null:r.value}function xE(s,e){const t=Bm(s,!0).delete(e);return new Kd(t).toPromise()}const nP=800,rP=3;class gS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await G0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>rP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return e_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zm._getInstance(Jj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Wj(),!this.activeServiceWorker)return;this.sender=new Kj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await G0();return await vE(e,hm,"1"),await xE(e,hm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>vE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>tP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Bm(a,!1).getAll();return new Kd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gS.type="LOCAL";const Id=gS;function wE(s,e){return Ht(s,"POST","/v2/accounts/mfaSignIn:start",Ft(s,e))}function sP(s,e){return Ht(s,"POST","/v2/accounts/mfaSignIn:finalize",Ft(s,e))}const I0=XI("rcb"),iP=new qd(3e4,6e4);class aP{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ln().grecaptcha?.render}load(e,t=""){return he(oP(t),e,"argument-error"),this.shouldResolveImmediately(t)&&uE(ln().grecaptcha)?Promise.resolve(ln().grecaptcha):new Promise((r,a)=>{const l=ln().setTimeout(()=>{a(fn(e,"network-request-failed"))},iP.get());ln()[I0]=()=>{ln().clearTimeout(l),delete ln()[I0];const m=ln().grecaptcha;if(!m||!uE(m)){a(fn(e,"internal-error"));return}const g=m.render;m.render=(y,x)=>{const _=g(y,x);return this.counter++,_},this.hostLanguage=t,r(m)};const u=`${jD()}?${Ic({onload:I0,render:"explicit",hl:t})}`;Qy(u).catch(()=>{clearTimeout(l),a(fn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!ln().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function oP(s){return s.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(s)}class lP{async load(e){return new LD(e)}clearedOneInstance(){}}const ad="recaptcha",cP={theme:"light",type:"image"};let uP=class{constructor(e,t,r={...cP}){this.parameters=r,this.type=ad,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lt(e),this.isInvisible=this.parameters.size==="invisible",he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;he(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new lP:new aP,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(a=>{const l=u=>{u&&(this.tokenChangeListeners.delete(l),a(u))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=ln()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){he(Hy()&&!e_(),this.auth,"internal-error"),await dP(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await mD(this.auth);he(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function dP(){let s=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}s=()=>e(),window.addEventListener("load",s)}).catch(e=>{throw s&&window.removeEventListener("load",s),e})}class t_{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=So._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function hP(s,e,t){if(jt(s.app))return Promise.reject(vn(s));const r=Lt(s),a=await qm(r,e,je(t));return new t_(a,l=>Lm(r,l))}async function fP(s,e,t){const r=je(s);await Om(!1,r,"phone");const a=await qm(r.auth,e,je(t));return new t_(a,l=>aS(r,l))}async function mP(s,e,t){const r=je(s);if(jt(r.auth.app))return Promise.reject(vn(r.auth));const a=await qm(r.auth,e,je(t));return new t_(a,l=>oS(r,l))}async function qm(s,e,t){if(!s._getRecaptchaConfig())try{await HD(s)}catch{}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const a=r.session;if("phoneNumber"in r){he(a.type==="enroll",s,"internal-error");const l={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await da(s,l,"mfaSmsEnrollment",async(y,x)=>{if(x.phoneEnrollmentInfo.captchaResponse===id){he(t?.type===ad,y,"argument-error");const _=await S0(y,x,t);return bE(y,_)}return bE(y,x)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneSessionInfo.sessionInfo}else{he(a.type==="signin",s,"internal-error");const l=r.multiFactorHint?.uid||r.multiFactorUid;he(l,s,"missing-multi-factor-info");const u={mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await da(s,u,"mfaSmsSignIn",async(x,_)=>{if(_.phoneSignInInfo.captchaResponse===id){he(t?.type===ad,x,"argument-error");const E=await S0(x,_,t);return wE(x,E)}return wE(x,_)},"PHONE_PROVIDER").catch(x=>Promise.reject(x))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await da(s,a,"sendVerificationCode",async(g,y)=>{if(y.captchaResponse===id){he(t?.type===ad,g,"argument-error");const x=await S0(g,y,t);return yE(g,x)}return yE(g,y)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).sessionInfo}}finally{t?._reset()}}async function pP(s,e){const t=je(s);if(jt(t.auth.app))return Promise.reject(vn(t.auth));await $y(t,e)}async function S0(s,e,t){he(t.type===ad,s,"argument-error");const r=await t.verify();he(typeof r=="string",s,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.captchaResponse,m=a.phoneEnrollmentInfo.clientType,g=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:r,captchaResponse:u,clientType:m,recaptchaVersion:g}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,u=a.phoneSignInInfo.clientType,m=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:l,clientType:u,recaptchaVersion:m}}),a}else return Object.assign(a,{recaptchaToken:r}),a}let Ro=class Hf{constructor(e){this.providerId=Hf.PROVIDER_ID,this.auth=Lt(e)}verifyPhoneNumber(e,t){return qm(this.auth,e,je(t))}static credential(e,t){return So._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Hf.credentialFromTaggedObject(t)}static credentialFromError(e){return Hf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?So._fromTokenResponse(t,r):null}};Ro.PROVIDER_ID="phone";Ro.PHONE_SIGN_IN_METHOD="phone";function Fo(s,e){return e?vr(e):(he(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class n_ extends Ac{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gP(s){return iS(s.auth,new n_(s),s.bypassAuthState)}function yP(s){const{auth:e,user:t}=s;return he(t,e,"internal-error"),sS(t,new n_(s),s.bypassAuthState)}async function _P(s){const{auth:e,user:t}=s;return he(t,e,"internal-error"),$y(t,new n_(s),s.bypassAuthState)}class yS{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:m}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gP;case"linkViaPopup":case"linkViaRedirect":return _P;case"reauthViaPopup":case"reauthViaRedirect":return yP;default:kn(this.auth,"internal-error")}}resolve(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bP=new qd(2e3,1e4);async function vP(s,e,t){if(jt(s.app))return Promise.reject(fn(s,"operation-not-supported-in-this-environment"));const r=Lt(s);Sc(s,e,_i);const a=Fo(r,t);return new ui(r,"signInViaPopup",e,a).executeNotNull()}async function xP(s,e,t){const r=je(s);if(jt(r.auth.app))return Promise.reject(fn(r.auth,"operation-not-supported-in-this-environment"));Sc(r.auth,e,_i);const a=Fo(r.auth,t);return new ui(r.auth,"reauthViaPopup",e,a,r).executeNotNull()}async function wP(s,e,t){const r=je(s);Sc(r.auth,e,_i);const a=Fo(r.auth,t);return new ui(r.auth,"linkViaPopup",e,a,r).executeNotNull()}class ui extends yS{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,ui.currentPopupAction&&ui.currentPopupAction.cancel(),ui.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const e=$d();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ui.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bP.get())};e()}}ui.currentPopupAction=null;const EP="pendingRedirect",od=new Map;class TP extends yS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=od.get(this.auth._key());if(!e){try{const r=await IP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}od.set(this.auth._key(),e)}return this.bypassAuthState||od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IP(s,e){const t=bS(e),r=_S(s);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}async function r_(s,e){return _S(s)._set(bS(e),"true")}function SP(){od.clear()}function s_(s,e){od.set(s._key(),e)}function _S(s){return vr(s._redirectPersistence)}function bS(s){return Io(EP,s.config.apiKey,s.name)}function AP(s,e,t){return NP(s,e,t)}async function NP(s,e,t){if(jt(s.app))return Promise.reject(vn(s));const r=Lt(s);Sc(s,e,_i),await r._initializationPromise;const a=Fo(r,t);return await r_(a,r),a._openRedirect(r,e,"signInViaRedirect")}function RP(s,e,t){return CP(s,e,t)}async function CP(s,e,t){const r=je(s);if(Sc(r.auth,e,_i),jt(r.auth.app))return Promise.reject(vn(r.auth));await r.auth._initializationPromise;const a=Fo(r.auth,t);await r_(a,r.auth);const l=await vS(r);return a._openRedirect(r.auth,e,"reauthViaRedirect",l)}function kP(s,e,t){return DP(s,e,t)}async function DP(s,e,t){const r=je(s);Sc(r.auth,e,_i),await r.auth._initializationPromise;const a=Fo(r.auth,t);await Om(!1,r,e.providerId),await r_(a,r.auth);const l=await vS(r);return a._openRedirect(r.auth,e,"linkViaRedirect",l)}async function jP(s,e){return await Lt(s)._initializationPromise,Fm(s,e,!1)}async function Fm(s,e,t=!1){if(jt(s.app))return Promise.reject(vn(s));const r=Lt(s),a=Fo(r,e),u=await new TP(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}async function vS(s){const e=$d(`${s.uid}:::`);return s._redirectEventId=e,await s.auth._setRedirectUser(s),await s.auth._persistUserIfCurrent(s),e}const PP=600*1e3;class xS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!wS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(fn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PP&&this.cachedEventUids.clear(),this.cachedEventUids.has(EE(e))}saveEventToCache(e){this.cachedEventUids.add(EE(e)),this.lastProcessedEventTime=Date.now()}}function EE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function wS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function VP(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wS(s);default:return!1}}async function ES(s,e={}){return Ht(s,"GET","/v1/projects",e)}const MP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OP=/^https?/;async function LP(s){if(s.config.emulator)return;const{authorizedDomains:e}=await ES(s);for(const t of e)try{if(UP(t))return}catch{}kn(s,"unauthorized-domain")}function UP(s){const e=wd(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!OP.test(t))return!1;if(MP.test(s))return r===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const zP=new qd(3e4,6e4);function TE(){const s=ln().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function BP(s){return new Promise((e,t)=>{function r(){TE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TE(),t(fn(s,"network-request-failed"))},timeout:zP.get()})}if(ln().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ln().gapi?.load)r();else{const a=XI("iframefcb");return ln()[a]=()=>{gapi.load?r():t(fn(s,"network-request-failed"))},Qy(`${VD()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Gf=null,e})}let Gf=null;function qP(s){return Gf=Gf||BP(s),Gf}const FP=new qd(5e3,15e3),HP="__/auth/iframe",GP="emulator/auth/iframe",QP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$P=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KP(s){const e=s.config;he(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Gy(e,GP):`https://${s.config.authDomain}/${HP}`,r={apiKey:e.apiKey,appName:s.name,v:Sa},a=$P.get(s.config.apiHost);a&&(r.eid=a);const l=s._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Ic(r).slice(1)}`}async function YP(s){const e=await qP(s),t=ln().gapi;return he(t,s,"internal-error"),e.open({where:document.body,url:KP(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QP,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=fn(s,"network-request-failed"),m=ln().setTimeout(()=>{l(u)},FP.get());function g(){ln().clearTimeout(m),a(r)}r.ping(g).then(g,()=>{l(u)})}))}const WP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XP=500,JP=600,ZP="_blank",eV="http://localhost";class IE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tV(s,e,t,r=XP,a=JP){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...WP,width:r.toString(),height:a.toString(),top:l,left:u},y=Ot().toLowerCase();t&&(m=GI(y)?ZP:t),FI(y)&&(e=e||eV,g.scrollbars="yes");const x=Object.entries(g).reduce((E,[D,L])=>`${E}${D}=${L},`,"");if(ID(y)&&m!=="_self")return nV(e||"",m),new IE(null);const _=window.open(e||"",m,x);he(_,s,"popup-blocked");try{_.focus()}catch{}return new IE(_)}function nV(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const rV="__/auth/handler",sV="emulator/auth/handler",iV=encodeURIComponent("fac");async function Q0(s,e,t,r,a,l){he(s.config.authDomain,s,"auth-domain-config-required"),he(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:Sa,eventId:a};if(e instanceof _i){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",DC(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,_]of Object.entries(l||{}))u[x]=_}if(e instanceof Nc){const x=e.getScopes().filter(_=>_!=="");x.length>0&&(u.scopes=x.join(","))}s.tenantId&&(u.tid=s.tenantId);const m=u;for(const x of Object.keys(m))m[x]===void 0&&delete m[x];const g=await s._getAppCheckToken(),y=g?`#${iV}=${encodeURIComponent(g)}`:"";return`${aV(s)}?${Ic(m).slice(1)}${y}`}function aV({config:s}){return s.emulator?Gy(s,sV):`https://${s.authDomain}/${rV}`}const A0="webStorageSupport";class oV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=No,this._completeRedirectFn=Fm,this._overrideRedirectResult=s_}async _openPopup(e,t,r,a){ss(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Q0(e,t,r,wd(),a);return tV(e,l,$d())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Q0(e,t,r,wd(),a);return Yj(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ss(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await YP(e),r=new xS(e);return t.register("authEvent",a=>(he(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(A0,{type:A0},a=>{const l=a?.[0]?.[A0];l!==void 0&&t(!!l),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YI()||HI()||Hd()}}const lV=oV;class cV{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ps("unexpected MultiFactorSessionType")}}}class i_ extends cV{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new i_(e)}_finalizeEnroll(e,t,r){return qj(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return sP(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class TS{constructor(){}static assertion(e){return i_._fromCredential(e)}}TS.FACTOR_ID="phone";var SE="@firebase/auth",AE="1.12.0";class uV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dV(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hV(s){_a(new zs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=r.options;he(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:u,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WI(s)},y=new kD(r,a,l,g);return GD(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_a(new zs("auth-internal",e=>{const t=Lt(e.getProvider("auth").getImmediate());return(r=>new uV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zr(SE,AE,dV(s)),Zr(SE,AE,"esm2020")}const fV=300;vC("authIdTokenMaxAge");function mV(){return document.getElementsByTagName("head")?.[0]??document}DD({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=a=>{const l=fn("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",mV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hV("Browser");function Co(){return window}const pV=2e3;async function gV(s,e,t){const{BuildInfo:r}=Co();ss(e.sessionId,"AuthEvent did not contain a session ID");const a=await xV(e.sessionId),l={};return Hd()?l.ibi=r.packageName:Fd()?l.apn=r.packageName:kn(s,"operation-not-supported-in-this-environment"),r.displayName&&(l.appDisplayName=r.displayName),l.sessionId=a,Q0(s,t,e.type,void 0,e.eventId??void 0,l)}async function yV(s){const{BuildInfo:e}=Co(),t={};Hd()?t.iosBundleId=e.packageName:Fd()?t.androidPackageName=e.packageName:kn(s,"operation-not-supported-in-this-environment"),await ES(s,t)}function _V(s){const{cordova:e}=Co();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let a=null;r?e.plugins.browsertab.openUrl(s):a=e.InAppBrowser.open(s,TD()?"_blank":"_system","location=yes"),t(a)})})}async function bV(s,e,t){const{cordova:r}=Co();let a=()=>{};try{await new Promise((l,u)=>{let m=null;function g(){l();const _=r.plugins.browsertab?.close;typeof _=="function"&&_(),typeof t?.close=="function"&&t.close()}function y(){m||(m=window.setTimeout(()=>{u(fn(s,"redirect-cancelled-by-user"))},pV))}function x(){document?.visibilityState==="visible"&&y()}e.addPassiveListener(g),document.addEventListener("resume",y,!1),Fd()&&document.addEventListener("visibilitychange",x,!1),a=()=>{e.removePassiveListener(g),document.removeEventListener("resume",y,!1),document.removeEventListener("visibilitychange",x,!1),m&&window.clearTimeout(m)}})}finally{a()}}function vV(s){const e=Co();he(typeof e?.universalLinks?.subscribe=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),he(typeof e?.BuildInfo?.packageName<"u",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),he(typeof e?.cordova?.plugins?.browsertab?.openUrl=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he(typeof e?.cordova?.plugins?.browsertab?.isAvailable=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he(typeof e?.cordova?.InAppBrowser?.open=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function xV(s){const e=wV(s),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function wV(s){if(ss(/[0-9a-zA-Z]+/.test(s),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(s);const e=new ArrayBuffer(s.length),t=new Uint8Array(e);for(let r=0;r<s.length;r++)t[r]=s.charCodeAt(r);return t}const EV=20;class TV extends xS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function IV(s,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:NV(),postBody:null,tenantId:s.tenantId,error:fn(s,"no-auth-event")}}function SV(s,e){return $0()._set(K0(s),e)}async function NE(s){const e=await $0()._get(K0(s));return e&&await $0()._remove(K0(s)),e}function AV(s,e){const t=CV(e);if(t.includes("/__/auth/callback")){const r=Qf(t),l=(r.firebaseError?RV(decodeURIComponent(r.firebaseError)):null)?.code?.split("auth/")?.[1],u=l?fn(l):null;return u?{type:s.type,eventId:s.eventId,tenantId:s.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:s.type,eventId:s.eventId,tenantId:s.tenantId,sessionId:s.sessionId,urlResponse:t,postBody:null}}return null}function NV(){const s=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<EV;t++){const r=Math.floor(Math.random()*e.length);s.push(e.charAt(r))}return s.join("")}function $0(){return vr(Zy)}function K0(s){return Io("authEvent",s.config.apiKey,s.name)}function RV(s){try{return JSON.parse(s)}catch{return null}}function CV(s){const e=Qf(s),t=e.link?decodeURIComponent(e.link):void 0,r=Qf(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Qf(a).link||a||r||t||s}function Qf(s){if(!s?.includes("?"))return{};const[e,...t]=s.split("?");return Ql(t.join("?"))}const kV=500;class DV{constructor(){this._redirectPersistence=No,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fm,this._overrideRedirectResult=s_}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new TV(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){kn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,a){vV(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),SP(),await this._originValidation(e);const u=IV(e,r,a);await SV(e,u);const m=await gV(e,u,t),g=await _V(m);return bV(e,l,g)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yV(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:a,BuildInfo:l}=Co(),u=setTimeout(async()=>{await NE(e),t.onEvent(RE())},kV),m=async x=>{clearTimeout(u);const _=await NE(e);let E=null;_&&x?.url&&(E=AV(_,x.url)),t.onEvent(E||RE())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,m);const g=a,y=`${l.packageName.toLowerCase()}://`;Co().handleOpenURL=async x=>{if(x.toLowerCase().startsWith(y)&&m({url:x}),typeof g=="function")try{g(x)}catch{}}}}const jV=DV;function RE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fn("no-auth-event")}}function PV(s,e){Lt(s)._logFramework(e)}var VV="@firebase/auth-compat",MV="0.6.2";const OV=1e3;function ld(){return self?.location?.protocol||null}function LV(){return ld()==="http:"||ld()==="https:"}function IS(s=Ot()){return!!((ld()==="file:"||ld()==="ionic:"||ld()==="capacitor:")&&s.toLowerCase().match(/iphone|ipad|ipod|android/))}function UV(){return My()||Dm()}function zV(){return yI()&&document?.documentMode===11}function BV(s=Ot()){return/Edge\/\d+/.test(s)}function qV(s=Ot()){return zV()||BV(s)}function SS(){try{const s=self.localStorage,e=$d();if(s)return s.setItem(e,"1"),s.removeItem(e),qV()?bd():!0}catch{return a_()&&bd()}return!1}function a_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function N0(){return(LV()||gI()||IS())&&!UV()&&SS()&&!a_()}function AS(){return IS()&&typeof document<"u"}async function FV(){return AS()?new Promise(s=>{const e=setTimeout(()=>{s(!1)},OV);document.addEventListener("deviceready",()=>{clearTimeout(e),s(!0)})}):!1}function HV(){return typeof window<"u"?window:null}const br={LOCAL:"local",NONE:"none",SESSION:"session"},Bu=he,NS="persistence";function GV(s,e){if(Bu(Object.values(br).includes(e),s,"invalid-persistence-type"),My()){Bu(e!==br.SESSION,s,"unsupported-persistence-type");return}if(Dm()){Bu(e===br.NONE,s,"unsupported-persistence-type");return}if(a_()){Bu(e===br.NONE||e===br.LOCAL&&bd(),s,"unsupported-persistence-type");return}Bu(e===br.NONE||SS(),s,"unsupported-persistence-type")}async function Y0(s){await s._initializationPromise;const e=RS(),t=Io(NS,s.config.apiKey,s.name);e&&e.setItem(t,s._getPersistenceType())}function QV(s,e){const t=RS();if(!t)return[];const r=Io(NS,s,e);switch(t.getItem(r)){case br.NONE:return[rc];case br.LOCAL:return[Id,No];case br.SESSION:return[No];default:return[]}}function RS(){try{return HV()?.sessionStorage||null}catch{return null}}const $V=he;class oa{constructor(){this.browserResolver=vr(lV),this.cordovaResolver=vr(jV),this.underlyingResolver=null,this._redirectPersistence=No,this._completeRedirectFn=Fm,this._overrideRedirectResult=s_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,a)}async _openRedirect(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return AS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $V(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await FV();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function CS(s){return s.unwrap()}function KV(s){return s.wrapped()}function YV(s){return kS(s)}function WV(s,e){const t=e.customData?._tokenResponse;if(e?.code==="auth/multi-factor-auth-required"){const r=e;r.resolver=new XV(s,Bj(s,e))}else if(t){const r=kS(e),a=e;r&&(a.credential=r,a.tenantId=t.tenantId||void 0,a.email=t.email||void 0,a.phoneNumber=t.phoneNumber||void 0)}}function kS(s){const{_tokenResponse:e}=s instanceof Qn?s.customData:s;if(!e)return null;if(!(s instanceof Qn)&&"temporaryProof"in e&&"phoneNumber"in e)return Ro.credentialFromResult(s);const t=e.providerId;if(!t||t===Uu.PASSWORD)return null;let r;switch(t){case Uu.GOOGLE:r=ks;break;case Uu.FACEBOOK:r=Cs;break;case Uu.GITHUB:r=Ds;break;case Uu.TWITTER:r=js;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:u,pendingToken:m,nonce:g}=e;return!l&&!u&&!a&&!m?null:m?t.startsWith("saml.")?sc._create(t,m):Bs._fromParams({providerId:t,signInMethod:t,pendingToken:m,idToken:a,accessToken:l}):new Yl(t).credential({idToken:a,accessToken:l,rawNonce:g})}return s instanceof Qn?r.credentialFromError(s):r.credentialFromResult(s)}function sr(s,e){return e.catch(t=>{throw t instanceof Qn&&WV(s,t),t}).then(t=>{const r=t.operationType,a=t.user;return{operationType:r,credential:YV(t),additionalUserInfo:zj(t),user:Hm.getOrCreate(a)}})}async function W0(s,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>sr(s,t.confirm(r))}}class XV{constructor(e,t){this.resolver=t,this.auth=KV(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return sr(CS(this.auth),this.resolver.resolveSignIn(e))}}let Hm=class Xu{constructor(e){this._delegate=e,this.multiFactor=Hj(e)}static getOrCreate(e){return Xu.USER_MAP.has(e)||Xu.USER_MAP.set(e,new Xu(e)),Xu.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return sr(this.auth,aS(this._delegate,e))}async linkWithPhoneNumber(e,t){return W0(this.auth,fP(this._delegate,e,t))}async linkWithPopup(e){return sr(this.auth,wP(this._delegate,e,oa))}async linkWithRedirect(e){return await Y0(Lt(this.auth)),kP(this._delegate,e,oa)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return sr(this.auth,oS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return W0(this.auth,mP(this._delegate,e,t))}reauthenticateWithPopup(e){return sr(this.auth,xP(this._delegate,e,oa))}async reauthenticateWithRedirect(e){return await Y0(Lt(this.auth)),RP(this._delegate,e,oa)}sendEmailVerification(e){return Rj(this._delegate,e)}async unlink(e){return await pj(this._delegate,e),this}updateEmail(e){return jj(this._delegate,e)}updatePassword(e){return Pj(this._delegate,e)}updatePhoneNumber(e){return pP(this._delegate,e)}updateProfile(e){return Dj(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Cj(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Hm.USER_MAP=new WeakMap;const qu=he;class X0{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;qu(r,"invalid-api-key",{appName:e.name}),qu(r,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?oa:void 0;this._delegate=t.initialize({options:{persistence:JV(r,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(sD),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Hm.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){QD(this._delegate,e,t)}applyActionCode(e){return vj(this._delegate,e)}checkActionCode(e){return lS(this._delegate,e)}confirmPasswordReset(e,t){return bj(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return sr(this._delegate,wj(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Nj(this._delegate,e)}isSignInWithEmailLink(e){return Ij(this._delegate,e)}async getRedirectResult(){qu(N0(),this._delegate,"operation-not-supported-in-this-environment");const e=await jP(this._delegate,oa);return e?sr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){PV(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:a,error:l,complete:u}=CE(e,t,r);return this._delegate.onAuthStateChanged(a,l,u)}onIdTokenChanged(e,t,r){const{next:a,error:l,complete:u}=CE(e,t,r);return this._delegate.onIdTokenChanged(a,l,u)}sendSignInLinkToEmail(e,t){return Tj(this._delegate,e,t)}sendPasswordResetEmail(e,t){return _j(this._delegate,e,t||void 0)}async setPersistence(e){GV(this._delegate,e);let t;switch(e){case br.SESSION:t=No;break;case br.LOCAL:t=await vr(Id)._isAvailable()?Id:Zy;break;case br.NONE:t=rc;break;default:return kn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return sr(this._delegate,mj(this._delegate))}signInWithCredential(e){return sr(this._delegate,Lm(this._delegate,e))}signInWithCustomToken(e){return sr(this._delegate,yj(this._delegate,e))}signInWithEmailAndPassword(e,t){return sr(this._delegate,Ej(this._delegate,e,t))}signInWithEmailLink(e,t){return sr(this._delegate,Sj(this._delegate,e,t))}signInWithPhoneNumber(e,t){return W0(this._delegate,hP(this._delegate,e,t))}async signInWithPopup(e){return qu(N0(),this._delegate,"operation-not-supported-in-this-environment"),sr(this._delegate,vP(this._delegate,e,oa))}async signInWithRedirect(e){return qu(N0(),this._delegate,"operation-not-supported-in-this-environment"),await Y0(this._delegate),AP(this._delegate,e,oa)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return xj(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}X0.Persistence=br;function CE(s,e,t){let r=s;typeof s!="function"&&({next:r,error:e,complete:t}=s);const a=r;return{next:u=>a(u&&Hm.getOrCreate(u)),error:e,complete:t}}function JV(s,e){const t=QV(s,e);if(typeof self<"u"&&!t.includes(Id)&&t.push(Id),typeof window<"u")for(const r of[Zy,No])t.includes(r)||t.push(r);return t.includes(rc)||t.push(rc),t}class o_{static credential(e,t){return Ro.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Ro(CS(es.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}o_.PHONE_SIGN_IN_METHOD=Ro.PHONE_SIGN_IN_METHOD;o_.PROVIDER_ID=Ro.PROVIDER_ID;const ZV=he;class e4{constructor(e,t,r=es.app()){ZV(r.options?.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new uP(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const t4="auth-compat";function n4(s){s.INTERNAL.registerComponent(new zs(t4,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new X0(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Pl.EMAIL_SIGNIN,PASSWORD_RESET:Pl.PASSWORD_RESET,RECOVER_EMAIL:Pl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Pl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Pl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Pl.VERIFY_EMAIL}},EmailAuthProvider:Aa,FacebookAuthProvider:Cs,GithubAuthProvider:Ds,GoogleAuthProvider:ks,OAuthProvider:Yl,SAMLAuthProvider:um,PhoneAuthProvider:o_,PhoneMultiFactorGenerator:TS,RecaptchaVerifier:e4,TwitterAuthProvider:js,Auth:X0,AuthCredential:Ac,Error:Qn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),s.registerVersion(VV,MV)}n4(es);var kE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ha,DS;(function(){var s;function e(S,N){function k(){}k.prototype=N.prototype,S.F=N.prototype,S.prototype=new k,S.prototype.constructor=S,S.D=function(V,T,P){for(var C=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)C[_e-2]=arguments[_e];return N.prototype[T].apply(V,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,N,k){k||(k=0);const V=Array(16);if(typeof N=="string")for(var T=0;T<16;++T)V[T]=N.charCodeAt(k++)|N.charCodeAt(k++)<<8|N.charCodeAt(k++)<<16|N.charCodeAt(k++)<<24;else for(T=0;T<16;++T)V[T]=N[k++]|N[k++]<<8|N[k++]<<16|N[k++]<<24;N=S.g[0],k=S.g[1],T=S.g[2];let P=S.g[3],C;C=N+(P^k&(T^P))+V[0]+3614090360&4294967295,N=k+(C<<7&4294967295|C>>>25),C=P+(T^N&(k^T))+V[1]+3905402710&4294967295,P=N+(C<<12&4294967295|C>>>20),C=T+(k^P&(N^k))+V[2]+606105819&4294967295,T=P+(C<<17&4294967295|C>>>15),C=k+(N^T&(P^N))+V[3]+3250441966&4294967295,k=T+(C<<22&4294967295|C>>>10),C=N+(P^k&(T^P))+V[4]+4118548399&4294967295,N=k+(C<<7&4294967295|C>>>25),C=P+(T^N&(k^T))+V[5]+1200080426&4294967295,P=N+(C<<12&4294967295|C>>>20),C=T+(k^P&(N^k))+V[6]+2821735955&4294967295,T=P+(C<<17&4294967295|C>>>15),C=k+(N^T&(P^N))+V[7]+4249261313&4294967295,k=T+(C<<22&4294967295|C>>>10),C=N+(P^k&(T^P))+V[8]+1770035416&4294967295,N=k+(C<<7&4294967295|C>>>25),C=P+(T^N&(k^T))+V[9]+2336552879&4294967295,P=N+(C<<12&4294967295|C>>>20),C=T+(k^P&(N^k))+V[10]+4294925233&4294967295,T=P+(C<<17&4294967295|C>>>15),C=k+(N^T&(P^N))+V[11]+2304563134&4294967295,k=T+(C<<22&4294967295|C>>>10),C=N+(P^k&(T^P))+V[12]+1804603682&4294967295,N=k+(C<<7&4294967295|C>>>25),C=P+(T^N&(k^T))+V[13]+4254626195&4294967295,P=N+(C<<12&4294967295|C>>>20),C=T+(k^P&(N^k))+V[14]+2792965006&4294967295,T=P+(C<<17&4294967295|C>>>15),C=k+(N^T&(P^N))+V[15]+1236535329&4294967295,k=T+(C<<22&4294967295|C>>>10),C=N+(T^P&(k^T))+V[1]+4129170786&4294967295,N=k+(C<<5&4294967295|C>>>27),C=P+(k^T&(N^k))+V[6]+3225465664&4294967295,P=N+(C<<9&4294967295|C>>>23),C=T+(N^k&(P^N))+V[11]+643717713&4294967295,T=P+(C<<14&4294967295|C>>>18),C=k+(P^N&(T^P))+V[0]+3921069994&4294967295,k=T+(C<<20&4294967295|C>>>12),C=N+(T^P&(k^T))+V[5]+3593408605&4294967295,N=k+(C<<5&4294967295|C>>>27),C=P+(k^T&(N^k))+V[10]+38016083&4294967295,P=N+(C<<9&4294967295|C>>>23),C=T+(N^k&(P^N))+V[15]+3634488961&4294967295,T=P+(C<<14&4294967295|C>>>18),C=k+(P^N&(T^P))+V[4]+3889429448&4294967295,k=T+(C<<20&4294967295|C>>>12),C=N+(T^P&(k^T))+V[9]+568446438&4294967295,N=k+(C<<5&4294967295|C>>>27),C=P+(k^T&(N^k))+V[14]+3275163606&4294967295,P=N+(C<<9&4294967295|C>>>23),C=T+(N^k&(P^N))+V[3]+4107603335&4294967295,T=P+(C<<14&4294967295|C>>>18),C=k+(P^N&(T^P))+V[8]+1163531501&4294967295,k=T+(C<<20&4294967295|C>>>12),C=N+(T^P&(k^T))+V[13]+2850285829&4294967295,N=k+(C<<5&4294967295|C>>>27),C=P+(k^T&(N^k))+V[2]+4243563512&4294967295,P=N+(C<<9&4294967295|C>>>23),C=T+(N^k&(P^N))+V[7]+1735328473&4294967295,T=P+(C<<14&4294967295|C>>>18),C=k+(P^N&(T^P))+V[12]+2368359562&4294967295,k=T+(C<<20&4294967295|C>>>12),C=N+(k^T^P)+V[5]+4294588738&4294967295,N=k+(C<<4&4294967295|C>>>28),C=P+(N^k^T)+V[8]+2272392833&4294967295,P=N+(C<<11&4294967295|C>>>21),C=T+(P^N^k)+V[11]+1839030562&4294967295,T=P+(C<<16&4294967295|C>>>16),C=k+(T^P^N)+V[14]+4259657740&4294967295,k=T+(C<<23&4294967295|C>>>9),C=N+(k^T^P)+V[1]+2763975236&4294967295,N=k+(C<<4&4294967295|C>>>28),C=P+(N^k^T)+V[4]+1272893353&4294967295,P=N+(C<<11&4294967295|C>>>21),C=T+(P^N^k)+V[7]+4139469664&4294967295,T=P+(C<<16&4294967295|C>>>16),C=k+(T^P^N)+V[10]+3200236656&4294967295,k=T+(C<<23&4294967295|C>>>9),C=N+(k^T^P)+V[13]+681279174&4294967295,N=k+(C<<4&4294967295|C>>>28),C=P+(N^k^T)+V[0]+3936430074&4294967295,P=N+(C<<11&4294967295|C>>>21),C=T+(P^N^k)+V[3]+3572445317&4294967295,T=P+(C<<16&4294967295|C>>>16),C=k+(T^P^N)+V[6]+76029189&4294967295,k=T+(C<<23&4294967295|C>>>9),C=N+(k^T^P)+V[9]+3654602809&4294967295,N=k+(C<<4&4294967295|C>>>28),C=P+(N^k^T)+V[12]+3873151461&4294967295,P=N+(C<<11&4294967295|C>>>21),C=T+(P^N^k)+V[15]+530742520&4294967295,T=P+(C<<16&4294967295|C>>>16),C=k+(T^P^N)+V[2]+3299628645&4294967295,k=T+(C<<23&4294967295|C>>>9),C=N+(T^(k|~P))+V[0]+4096336452&4294967295,N=k+(C<<6&4294967295|C>>>26),C=P+(k^(N|~T))+V[7]+1126891415&4294967295,P=N+(C<<10&4294967295|C>>>22),C=T+(N^(P|~k))+V[14]+2878612391&4294967295,T=P+(C<<15&4294967295|C>>>17),C=k+(P^(T|~N))+V[5]+4237533241&4294967295,k=T+(C<<21&4294967295|C>>>11),C=N+(T^(k|~P))+V[12]+1700485571&4294967295,N=k+(C<<6&4294967295|C>>>26),C=P+(k^(N|~T))+V[3]+2399980690&4294967295,P=N+(C<<10&4294967295|C>>>22),C=T+(N^(P|~k))+V[10]+4293915773&4294967295,T=P+(C<<15&4294967295|C>>>17),C=k+(P^(T|~N))+V[1]+2240044497&4294967295,k=T+(C<<21&4294967295|C>>>11),C=N+(T^(k|~P))+V[8]+1873313359&4294967295,N=k+(C<<6&4294967295|C>>>26),C=P+(k^(N|~T))+V[15]+4264355552&4294967295,P=N+(C<<10&4294967295|C>>>22),C=T+(N^(P|~k))+V[6]+2734768916&4294967295,T=P+(C<<15&4294967295|C>>>17),C=k+(P^(T|~N))+V[13]+1309151649&4294967295,k=T+(C<<21&4294967295|C>>>11),C=N+(T^(k|~P))+V[4]+4149444226&4294967295,N=k+(C<<6&4294967295|C>>>26),C=P+(k^(N|~T))+V[11]+3174756917&4294967295,P=N+(C<<10&4294967295|C>>>22),C=T+(N^(P|~k))+V[2]+718787259&4294967295,T=P+(C<<15&4294967295|C>>>17),C=k+(P^(T|~N))+V[9]+3951481745&4294967295,S.g[0]=S.g[0]+N&4294967295,S.g[1]=S.g[1]+(T+(C<<21&4294967295|C>>>11))&4294967295,S.g[2]=S.g[2]+T&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.v=function(S,N){N===void 0&&(N=S.length);const k=N-this.blockSize,V=this.C;let T=this.h,P=0;for(;P<N;){if(T==0)for(;P<=k;)a(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<N;)if(V[T++]=S.charCodeAt(P++),T==this.blockSize){a(this,V),T=0;break}}else for(;P<N;)if(V[T++]=S[P++],T==this.blockSize){a(this,V),T=0;break}}this.h=T,this.o+=N},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var N=1;N<S.length-8;++N)S[N]=0;N=this.o*8;for(var k=S.length-8;k<S.length;++k)S[k]=N&255,N/=256;for(this.v(S),S=Array(16),N=0,k=0;k<4;++k)for(let V=0;V<32;V+=8)S[N++]=this.g[k]>>>V&255;return S};function l(S,N){var k=m;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=N(S)}function u(S,N){this.h=N;const k=[];let V=!0;for(let T=S.length-1;T>=0;T--){const P=S[T]|0;V&&P==N||(k[T]=P,V=!1)}this.g=k}var m={};function g(S){return-128<=S&&S<128?l(S,function(N){return new u([N|0],N<0?-1:0)}):new u([S|0],S<0?-1:0)}function y(S){if(isNaN(S)||!isFinite(S))return _;if(S<0)return B(y(-S));const N=[];let k=1;for(let V=0;S>=k;V++)N[V]=S/k|0,k*=4294967296;return new u(N,0)}function x(S,N){if(S.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(S.charAt(0)=="-")return B(x(S.substring(1),N));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=y(Math.pow(N,8));let V=_;for(let P=0;P<S.length;P+=8){var T=Math.min(8,S.length-P);const C=parseInt(S.substring(P,P+T),N);T<8?(T=y(Math.pow(N,T)),V=V.j(T).add(y(C))):(V=V.j(k),V=V.add(y(C)))}return V}var _=g(0),E=g(1),D=g(16777216);s=u.prototype,s.m=function(){if(R(this))return-B(this).m();let S=0,N=1;for(let k=0;k<this.g.length;k++){const V=this.i(k);S+=(V>=0?V:4294967296+V)*N,N*=4294967296}return S},s.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(L(this))return"0";if(R(this))return"-"+B(this).toString(S);const N=y(Math.pow(S,6));var k=this;let V="";for(;;){const T=Se(k,N).g;k=z(k,T.j(N));let P=((k.g.length>0?k.g[0]:k.h)>>>0).toString(S);if(k=T,L(k))return P+V;for(;P.length<6;)P="0"+P;V=P+V}},s.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function L(S){if(S.h!=0)return!1;for(let N=0;N<S.g.length;N++)if(S.g[N]!=0)return!1;return!0}function R(S){return S.h==-1}s.l=function(S){return S=z(this,S),R(S)?-1:L(S)?0:1};function B(S){const N=S.g.length,k=[];for(let V=0;V<N;V++)k[V]=~S.g[V];return new u(k,~S.h).add(E)}s.abs=function(){return R(this)?B(this):this},s.add=function(S){const N=Math.max(this.g.length,S.g.length),k=[];let V=0;for(let T=0;T<=N;T++){let P=V+(this.i(T)&65535)+(S.i(T)&65535),C=(P>>>16)+(this.i(T)>>>16)+(S.i(T)>>>16);V=C>>>16,P&=65535,C&=65535,k[T]=C<<16|P}return new u(k,k[k.length-1]&-2147483648?-1:0)};function z(S,N){return S.add(B(N))}s.j=function(S){if(L(this)||L(S))return _;if(R(this))return R(S)?B(this).j(B(S)):B(B(this).j(S));if(R(S))return B(this.j(B(S)));if(this.l(D)<0&&S.l(D)<0)return y(this.m()*S.m());const N=this.g.length+S.g.length,k=[];for(var V=0;V<2*N;V++)k[V]=0;for(V=0;V<this.g.length;V++)for(let T=0;T<S.g.length;T++){const P=this.i(V)>>>16,C=this.i(V)&65535,_e=S.i(T)>>>16,be=S.i(T)&65535;k[2*V+2*T]+=C*be,ne(k,2*V+2*T),k[2*V+2*T+1]+=P*be,ne(k,2*V+2*T+1),k[2*V+2*T+1]+=C*_e,ne(k,2*V+2*T+1),k[2*V+2*T+2]+=P*_e,ne(k,2*V+2*T+2)}for(S=0;S<N;S++)k[S]=k[2*S+1]<<16|k[2*S];for(S=N;S<2*N;S++)k[S]=0;return new u(k,0)};function ne(S,N){for(;(S[N]&65535)!=S[N];)S[N+1]+=S[N]>>>16,S[N]&=65535,N++}function Z(S,N){this.g=S,this.h=N}function Se(S,N){if(L(N))throw Error("division by zero");if(L(S))return new Z(_,_);if(R(S))return N=Se(B(S),N),new Z(B(N.g),B(N.h));if(R(N))return N=Se(S,B(N)),new Z(B(N.g),N.h);if(S.g.length>30){if(R(S)||R(N))throw Error("slowDivide_ only works with positive integers.");for(var k=E,V=N;V.l(S)<=0;)k=se(k),V=se(V);var T=pe(k,1),P=pe(V,1);for(V=pe(V,2),k=pe(k,2);!L(V);){var C=P.add(V);C.l(S)<=0&&(T=T.add(k),P=C),V=pe(V,1),k=pe(k,1)}return N=z(S,T.j(N)),new Z(T,N)}for(T=_;S.l(N)>=0;){for(k=Math.max(1,Math.floor(S.m()/N.m())),V=Math.ceil(Math.log(k)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),P=y(k),C=P.j(N);R(C)||C.l(S)>0;)k-=V,P=y(k),C=P.j(N);L(P)&&(P=E),T=T.add(P),S=z(S,C)}return new Z(T,S)}s.B=function(S){return Se(this,S).h},s.and=function(S){const N=Math.max(this.g.length,S.g.length),k=[];for(let V=0;V<N;V++)k[V]=this.i(V)&S.i(V);return new u(k,this.h&S.h)},s.or=function(S){const N=Math.max(this.g.length,S.g.length),k=[];for(let V=0;V<N;V++)k[V]=this.i(V)|S.i(V);return new u(k,this.h|S.h)},s.xor=function(S){const N=Math.max(this.g.length,S.g.length),k=[];for(let V=0;V<N;V++)k[V]=this.i(V)^S.i(V);return new u(k,this.h^S.h)};function se(S){const N=S.g.length+1,k=[];for(let V=0;V<N;V++)k[V]=S.i(V)<<1|S.i(V-1)>>>31;return new u(k,S.h)}function pe(S,N){const k=N>>5;N%=32;const V=S.g.length-k,T=[];for(let P=0;P<V;P++)T[P]=N>0?S.i(P+k)>>>N|S.i(P+k+1)<<32-N:S.i(P+k);return new u(T,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,DS=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=x,ha=u}).apply(typeof kE<"u"?kE:typeof self<"u"?self:typeof window<"u"?window:{});var Vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jS,Ju,PS,$f,J0,VS,MS,OS;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vf=="object"&&Vf];for(var b=0;b<h.length;++b){var w=h[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(h,b){if(b)e:{var w=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var H=h[A];if(!(H in w))break e;w=w[H]}h=h[h.length-1],A=w[h],b=b(A),b!=A&&b!=null&&e(w,h,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(b){var w=[],A;for(A in b)Object.prototype.hasOwnProperty.call(b,A)&&w.push([A,b[A]]);return w}});var l=l||{},u=this||self;function m(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function g(h,b,w){return h.call.apply(h.bind,arguments)}function y(h,b,w){return y=g,y.apply(null,arguments)}function x(h,b){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function _(h,b){function w(){}w.prototype=b.prototype,h.Z=b.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(A,H,X){for(var ge=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ge[ze-2]=arguments[ze];return b.prototype[H].apply(A,ge)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function D(h){const b=h.length;if(b>0){const w=Array(b);for(let A=0;A<b;A++)w[A]=h[A];return w}return[]}function L(h,b){for(let A=1;A<arguments.length;A++){const H=arguments[A];var w=typeof H;if(w=w!="object"?w:H?Array.isArray(H)?"array":w:"null",w=="array"||w=="object"&&typeof H.length=="number"){w=h.length||0;const X=H.length||0;h.length=w+X;for(let ge=0;ge<X;ge++)h[w+ge]=H[ge]}else h.push(H)}}class R{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function B(h){u.setTimeout(()=>{throw h},0)}function z(){var h=S;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class ne{constructor(){this.h=this.g=null}add(b,w){const A=Z.get();A.set(b,w),this.h?this.h.next=A:this.g=A,this.h=A}}var Z=new R(()=>new Se,h=>h.reset());class Se{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let se,pe=!1,S=new ne,N=()=>{const h=Promise.resolve(void 0);se=()=>{h.then(k)}};function k(){for(var h;h=z();){try{h.h.call(h.g)}catch(w){B(w)}var b=Z;b.j(h),b.h<100&&(b.h++,h.next=b.g,b.g=h)}pe=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};u.addEventListener("test",w,b),u.removeEventListener("test",w,b)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function _e(h,b){T.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,b)}_(_e,T),_e.prototype.init=function(h,b){const w=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget,b||(w=="mouseover"?b=h.fromElement:w=="mouseout"&&(b=h.toElement)),this.relatedTarget=b,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),U=0;function oe(h,b,w,A,H){this.listener=h,this.proxy=null,this.src=b,this.type=w,this.capture=!!A,this.ha=H,this.key=++U,this.da=this.fa=!1}function fe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ve(h,b,w){for(const A in h)b.call(w,h[A],A,h)}function Fe(h,b){for(const w in h)b.call(void 0,h[w],w,h)}function M(h){const b={};for(const w in h)b[w]=h[w];return b}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(h,b){let w,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(w in A)h[w]=A[w];for(let X=0;X<W.length;X++)w=W[X],Object.prototype.hasOwnProperty.call(A,w)&&(h[w]=A[w])}}function we(h){this.src=h,this.g={},this.h=0}we.prototype.add=function(h,b,w,A,H){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const ge=ee(h,b,A,H);return ge>-1?(b=h[ge],w||(b.fa=!1)):(b=new oe(b,this.src,X,!!A,H),b.fa=w,h.push(b)),b};function te(h,b){const w=b.type;if(w in h.g){var A=h.g[w],H=Array.prototype.indexOf.call(A,b,void 0),X;(X=H>=0)&&Array.prototype.splice.call(A,H,1),X&&(fe(b),h.g[w].length==0&&(delete h.g[w],h.h--))}}function ee(h,b,w,A){for(let H=0;H<h.length;++H){const X=h[H];if(!X.da&&X.listener==b&&X.capture==!!w&&X.ha==A)return H}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),ve={};function Ae(h,b,w,A,H){if(Array.isArray(b)){for(let X=0;X<b.length;X++)Ae(h,b[X],w,A,H);return null}return w=Wn(w),h&&h[be]?h.J(b,w,m(A)?!!A.capture:!1,H):Ge(h,b,w,!1,A,H)}function Ge(h,b,w,A,H,X){if(!b)throw Error("Invalid event type");const ge=m(H)?!!H.capture:!!H;let ze=Dn(h);if(ze||(h[ce]=ze=new we(h)),w=ze.add(b,w,A,ge,X),w.proxy)return w;if(A=xn(),w.proxy=A,A.src=h,A.listener=w,h.addEventListener)P||(H=ge),H===void 0&&(H=!1),h.addEventListener(b.toString(),A,H);else if(h.attachEvent)h.attachEvent(wn(b.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function xn(){function h(w){return b.call(h.src,h.listener,w)}const b=zn;return h}function dn(h,b,w,A,H){if(Array.isArray(b))for(var X=0;X<b.length;X++)dn(h,b[X],w,A,H);else A=m(A)?!!A.capture:!!A,w=Wn(w),h&&h[be]?(h=h.i,X=String(b).toString(),X in h.g&&(b=h.g[X],w=ee(b,w,A,H),w>-1&&(fe(b[w]),Array.prototype.splice.call(b,w,1),b.length==0&&(delete h.g[X],h.h--)))):h&&(h=Dn(h))&&(b=h.g[b.toString()],h=-1,b&&(h=ee(b,w,A,H)),(w=h>-1?b[h]:null)&&lr(w))}function lr(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[be])te(b.i,h);else{var w=h.type,A=h.proxy;b.removeEventListener?b.removeEventListener(w,A,h.capture):b.detachEvent?b.detachEvent(wn(w),A):b.addListener&&b.removeListener&&b.removeListener(A),(w=Dn(b))?(te(w,h),w.h==0&&(w.src=null,b[ce]=null)):fe(h)}}}function wn(h){return h in ve?ve[h]:ve[h]="on"+h}function zn(h,b){if(h.da)h=!0;else{b=new _e(b,this);const w=h.listener,A=h.ha||h.src;h.fa&&lr(h),h=w.call(A,b)}return h}function Dn(h){return h=h[ce],h instanceof we?h:null}var Yn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wn(h){return typeof h=="function"?h:(h[Yn]||(h[Yn]=function(b){return h.handleEvent(b)}),h[Yn])}function st(){V.call(this),this.i=new we(this),this.M=this,this.G=null}_(st,V),st.prototype[be]=!0,st.prototype.removeEventListener=function(h,b,w,A){dn(this,h,b,w,A)};function ht(h,b){var w,A=h.G;if(A)for(w=[];A;A=A.G)w.push(A);if(h=h.M,A=b.type||b,typeof b=="string")b=new T(b,h);else if(b instanceof T)b.target=b.target||h;else{var H=b;b=new T(A,h),me(b,H)}H=!0;let X,ge;if(w)for(ge=w.length-1;ge>=0;ge--)X=b.g=w[ge],H=jn(X,A,!0,b)&&H;if(X=b.g=h,H=jn(X,A,!0,b)&&H,H=jn(X,A,!1,b)&&H,w)for(ge=0;ge<w.length;ge++)X=b.g=w[ge],H=jn(X,A,!1,b)&&H}st.prototype.N=function(){if(st.Z.N.call(this),this.i){var h=this.i;for(const b in h.g){const w=h.g[b];for(let A=0;A<w.length;A++)fe(w[A]);delete h.g[b],h.h--}}this.G=null},st.prototype.J=function(h,b,w,A){return this.i.add(String(h),b,!1,w,A)},st.prototype.K=function(h,b,w,A){return this.i.add(String(h),b,!0,w,A)};function jn(h,b,w,A){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();let H=!0;for(let X=0;X<b.length;++X){const ge=b[X];if(ge&&!ge.da&&ge.capture==w){const ze=ge.listener,Gt=ge.ha||ge.src;ge.fa&&te(h.i,ge),H=ze.call(Gt,A)!==!1&&H}}return H&&!A.defaultPrevented}function is(h,b){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:u.setTimeout(h,b||0)}function $(h){h.g=is(()=>{h.g=null,h.i&&(h.i=!1,$(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class Ie extends V{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:$(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(h){V.call(this),this.h=h,this.g={}}_(rt,V);var ue=[];function Xt(h){Ve(h.g,function(b,w){this.g.hasOwnProperty(w)&&lr(b)},h),h.g={}}rt.prototype.N=function(){rt.Z.N.call(this),Xt(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wt=u.JSON.stringify,as=u.JSON.parse,Hs=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Oc(){}function Lr(){}var Bn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ee(){T.call(this,"d")}_(Ee,T);function Me(){T.call(this,"c")}_(Me,T);var Qe={},Ur=null;function Ei(){return Ur=Ur||new st}Qe.Ia="serverreachability";function ja(h){T.call(this,Qe.Ia,h)}_(ja,T);function os(h){const b=Ei();ht(b,new ja(b))}Qe.STAT_EVENT="statevent";function Pa(h,b){T.call(this,Qe.STAT_EVENT,h),this.stat=b}_(Pa,T);function Jt(h){const b=Ei();ht(b,new Pa(b,h))}Qe.Ja="timingevent";function ls(h,b){T.call(this,Qe.Ja,h),this.size=b}_(ls,T);function cs(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},b)}function zr(){this.g=!0}zr.prototype.ua=function(){this.g=!1};function gp(h,b,w,A,H,X){h.info(function(){if(h.g)if(X){var ge="",ze=X.split("&");for(let ct=0;ct<ze.length;ct++){var Gt=ze[ct].split("=");if(Gt.length>1){const Rt=Gt[0];Gt=Gt[1];const Sr=Rt.split("_");ge=Sr.length>=2&&Sr[1]=="type"?ge+(Rt+"="+Gt+"&"):ge+(Rt+"=redacted&")}}}else ge=null;else ge=X;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+b+`
`+w+`
`+ge})}function uh(h,b,w,A,H,X,ge){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+b+`
`+w+`
`+X+" "+ge})}function us(h,b,w,A){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+yp(h,w)+(A?" "+A:"")})}function Va(h,b){h.info(function(){return"TIMEOUT: "+b})}zr.prototype.info=function(){};function yp(h,b){if(!h.g)return b;if(!b)return null;try{const X=JSON.parse(b);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var w=X[h];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ge=1;ge<A.length;ge++)A[ge]=""}}}}return wt(X)}catch{return b}}var Ma={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Uc;function Oa(){}_(Oa,Oc),Oa.prototype.g=function(){return new XMLHttpRequest},Uc=new Oa;function Gs(h){return encodeURIComponent(String(h))}function dh(h){var b=1;h=h.split(":");const w=[];for(;b>0&&h.length;)w.push(h.shift()),b--;return h.length&&w.push(h.join(":")),w}function Br(h,b,w,A){this.j=h,this.i=b,this.l=w,this.S=A||1,this.V=new rt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qr}function qr(){this.i=null,this.g="",this.h=!1}var Zt={},pn={};function ds(h,b,w){h.M=1,h.A=La(tn(b)),h.u=w,h.R=!0,Ko(h,null)}function Ko(h,b){h.F=Date.now(),hs(h),h.B=tn(h.A);var w=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Jo(w.i,"t",A),h.C=0,w=h.j.L,h.h=new qr,h.g=Sh(h.j,w?b:null,!h.u),h.P>0&&(h.O=new Ie(y(h.Y,h,h.g),h.P)),b=h.V,w=h.g,A=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(ue[0]=H.toString()),H=ue);for(let X=0;X<H.length;X++){const ge=Ae(w,H[X],A||b.handleEvent,!1,b.h||b);if(!ge)break;b.g[ge.key]=ge}b=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,b)):(h.v="GET",h.g.ea(h.B,h.v,null,b)),os(),gp(h.i,h.v,h.B,h.l,h.S,h.u)}Br.prototype.ba=function(h){h=h.target;const b=this.O;b&&Gr(h)==3?b.j():this.Y(h)},Br.prototype.Y=function(h){try{if(h==this.g)e:{const ze=Gr(this.g),Gt=this.g.ya(),ct=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||En(this.g)))){this.K||ze!=4||Gt==7||(Gt==8||ct<=0?os(3):os(2)),fs(this);var b=this.g.ca();this.X=b;var w=_p(this);if(this.o=b==200,uh(this.i,this.v,this.B,this.l,this.S,ze,b),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var X=A;break t}}X=null}if(h=X)us(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ms(this,h);else{this.o=!1,this.m=3,Jt(12),cr(this),Er(this);break e}}if(this.R){h=!0;let Rt;for(;!this.K&&this.C<w.length;)if(Rt=fh(this,w),Rt==pn){ze==4&&(this.m=4,Jt(14),h=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Zt){this.m=4,Jt(15),us(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else us(this.i,this.l,Rt,null),ms(this,Rt);if(hh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||w.length!=0||this.h.h||(this.m=1,Jt(16),h=!1),this.o=this.o&&h,!h)us(this.i,this.l,w,"[Invalid Chunked Response]"),cr(this),Er(this);else if(w.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),eu(ge),ge.P=!0,Jt(11))}}else us(this.i,this.l,w,null),ms(this,w);ze==4&&cr(this),this.o&&!this.K&&(ze==4?wh(this.j,this):(this.o=!1,hs(this)))}else $s(this.g),b==400&&w.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),cr(this),Er(this)}}}catch{}};function _p(h){if(!hh(h))return h.g.la();const b=En(h.g);if(b==="")return"";let w="";const A=b.length,H=Gr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return cr(h),Er(h),"";h.h.i=new u.TextDecoder}for(let X=0;X<A;X++)h.h.h=!0,w+=h.h.i.decode(b[X],{stream:!(H&&X==A-1)});return b.length=0,h.h.g+=w,h.C=0,h.h.g}function hh(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function fh(h,b){var w=h.C,A=b.indexOf(`
`,w);return A==-1?pn:(w=Number(b.substring(w,A)),isNaN(w)?Zt:(A+=1,A+w>b.length?pn:(b=b.slice(A,A+w),h.C=A+w,b)))}Br.prototype.cancel=function(){this.K=!0,cr(this)};function hs(h){h.T=Date.now()+h.H,Yo(h,h.H)}function Yo(h,b){if(h.D!=null)throw Error("WatchDog timer not null");h.D=cs(y(h.aa,h),b)}function fs(h){h.D&&(u.clearTimeout(h.D),h.D=null)}Br.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Va(this.i,this.B),this.M!=2&&(os(),Jt(17)),cr(this),this.m=2,Er(this)):Yo(this,this.T-h)};function Er(h){h.j.I==0||h.K||wh(h.j,h)}function cr(h){fs(h);var b=h.O;b&&typeof b.dispose=="function"&&b.dispose(),h.O=null,Xt(h.V),h.g&&(b=h.g,h.g=null,b.abort(),b.dispose())}function ms(h,b){try{var w=h.j;if(w.I!=0&&(w.g==h||gs(w.h,h))){if(!h.L&&gs(w.h,h)&&w.I==3){try{var A=w.Ba.g.parse(b)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)rl(w),ki(w);else break e;Ga(w),Jt(18)}}else w.xa=H[1],0<w.xa-w.K&&H[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=cs(y(w.Va,w),6e3));ps(w.h)<=1&&w.ta&&(w.ta=void 0)}else ws(w,11)}else if((h.L||w.g==h)&&rl(w),!C(b))for(H=w.Ba.g.parse(b),b=0;b<H.length;b++){let ct=H[b];const Rt=ct[0];if(!(Rt<=w.K))if(w.K=Rt,ct=ct[1],w.I==2)if(ct[0]=="c"){w.M=ct[1],w.ba=ct[2];const Sr=ct[3];Sr!=null&&(w.ka=Sr,w.j.info("VER="+w.ka));const Es=ct[4];Es!=null&&(w.za=Es,w.j.info("SVER="+w.za));const Qr=ct[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(A=1.5*Qr,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const $r=h.g;if($r){const Qa=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qa){var X=A.h;X.g||Qa.indexOf("spdy")==-1&&Qa.indexOf("quic")==-1&&Qa.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(qc(X,X.h),X.h=null))}if(A.G){const sl=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;sl&&(A.wa=sl,ft(A.J,A.G,sl))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var ge=h;if(A.na=Ih(A,A.L?A.ba:null,A.W),ge.L){Fc(A.h,ge);var ze=ge,Gt=A.O;Gt&&(ze.H=Gt),ze.D&&(fs(ze),hs(ze)),A.g=ge}else vh(A);w.i.length>0&&xs(w)}else ct[0]!="stop"&&ct[0]!="close"||ws(w,7);else w.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?ws(w,7):Jc(w):ct[0]!="noop"&&w.l&&w.l.qa(ct),w.A=0)}}os(4)}catch{}}var en=class{constructor(h,b){this.g=h,this.map=b}};function zc(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ps(h){return h.h?1:h.g?h.g.size:0}function gs(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function qc(h,b){h.g?h.g.add(b):h.h=b}function Fc(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}zc.prototype.cancel=function(){if(this.i=Hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Hc(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const w of h.g.values())b=b.concat(w.G);return b}return D(h.i)}var mh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wo(h,b){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const A=h[w].indexOf("=");let H,X=null;A>=0?(H=h[w].substring(0,A),X=h[w].substring(A+1)):H=h[w],b(H,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function ur(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;h instanceof ur?(this.l=h.l,gn(this,h.j),this.o=h.o,this.g=h.g,Ti(this,h.u),this.h=h.h,Gc(this,_h(h.i)),this.m=h.m):h&&(b=String(h).match(mh))?(this.l=!1,gn(this,b[1]||"",!0),this.o=ys(b[2]||""),this.g=ys(b[3]||"",!0),Ti(this,b[4]),this.h=ys(b[5]||"",!0),Gc(this,b[6]||"",!0),this.m=ys(b[7]||"")):(this.l=!1,this.i=new Si(null,this.l))}ur.prototype.toString=function(){const h=[];var b=this.j;b&&h.push(Ua(b,Xo,!0),":");var w=this.g;return(w||b=="file")&&(h.push("//"),(b=this.o)&&h.push(Ua(b,Xo,!0),"@"),h.push(Gs(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Ua(w,w.charAt(0)=="/"?Qc:ph,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Ua(w,gh)),h.join("")},ur.prototype.resolve=function(h){const b=tn(this);let w=!!h.j;w?gn(b,h.j):w=!!h.o,w?b.o=h.o:w=!!h.g,w?b.g=h.g:w=h.u!=null;var A=h.h;if(w)Ti(b,h.u);else if(w=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=b.h.lastIndexOf("/");H!=-1&&(A=b.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const X=[];for(let ge=0;ge<H.length;){const ze=H[ge++];ze=="."?A&&ge==H.length&&X.push(""):ze==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),A&&ge==H.length&&X.push("")):(X.push(ze),A=!0)}A=X.join("/")}else A=H}return w?b.h=A:w=h.i.toString()!=="",w?Gc(b,_h(h.i)):w=!!h.m,w&&(b.m=h.m),b};function tn(h){return new ur(h)}function gn(h,b,w){h.j=w?ys(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function Ti(h,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);h.u=b}else h.u=null}function Gc(h,b,w){b instanceof Si?(h.i=b,Zo(h.i,h.l)):(w||(b=Ua(b,Ii)),h.i=new Si(b,h.l))}function ft(h,b,w){h.i.set(b,w)}function La(h){return ft(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ys(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ua(h,b,w){return typeof h=="string"?(h=encodeURI(h).replace(b,Xn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Xn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Xo=/[#\/\?@]/g,ph=/[#\?:]/g,Qc=/[#\?]/g,Ii=/[#\?@]/g,gh=/#/g;function Si(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function Jn(h){h.g||(h.g=new Map,h.h=0,h.i&&Wo(h.i,function(b,w){h.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}s=Si.prototype,s.add=function(h,b){Jn(this),this.i=null,h=Ai(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(b),this.h+=1,this};function yh(h,b){Jn(h),b=Ai(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function $c(h,b){return Jn(h),b=Ai(h,b),h.g.has(b)}s.forEach=function(h,b){Jn(this),this.g.forEach(function(w,A){w.forEach(function(H){h.call(b,H,A,this)},this)},this)};function Kc(h,b){Jn(h);let w=[];if(typeof b=="string")$c(h,b)&&(w=w.concat(h.g.get(Ai(h,b))));else for(h=Array.from(h.g.values()),b=0;b<h.length;b++)w=w.concat(h[b]);return w}s.set=function(h,b){return Jn(this),this.i=null,h=Ai(this,h),$c(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},s.get=function(h,b){return h?(h=Kc(this,h),h.length>0?String(h[0]):b):b};function Jo(h,b,w){yh(h,b),w.length>0&&(h.i=null,h.g.set(Ai(h,b),D(w)),h.h+=w.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(let A=0;A<b.length;A++){var w=b[A];const H=Gs(w);w=Kc(this,w);for(let X=0;X<w.length;X++){let ge=H;w[X]!==""&&(ge+="="+Gs(w[X])),h.push(ge)}}return this.i=h.join("&")};function _h(h){const b=new Si;return b.i=h.i,h.g&&(b.g=new Map(h.g),b.h=h.h),b}function Ai(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function Zo(h,b){b&&!h.j&&(Jn(h),h.i=null,h.g.forEach(function(w,A){const H=A.toLowerCase();A!=H&&(yh(this,A),Jo(this,H,w))},h)),h.j=b}function Fr(h,b){const w=new zr;if(u.Image){const A=new Image;A.onload=x(Tr,w,"TestLoadImage: loaded",!0,b,A),A.onerror=x(Tr,w,"TestLoadImage: error",!1,b,A),A.onabort=x(Tr,w,"TestLoadImage: abort",!1,b,A),A.ontimeout=x(Tr,w,"TestLoadImage: timeout",!1,b,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else b(!1)}function Yc(h,b){const w=new zr,A=new AbortController,H=setTimeout(()=>{A.abort(),Tr(w,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:A.signal}).then(X=>{clearTimeout(H),X.ok?Tr(w,"TestPingServer: ok",!0,b):Tr(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(H),Tr(w,"TestPingServer: error",!1,b)})}function Tr(h,b,w,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(w)}catch{}}function Ni(){this.g=new Hs}function _s(h){this.i=h.Sb||null,this.h=h.ab||!1}_(_s,Oc),_s.prototype.g=function(){return new za(this.i,this.h)};function za(h,b){st.call(this),this.H=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(za,st),s=za.prototype,s.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=b,this.readyState=1,Hr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(b.body=h),(this.H||u).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ri(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Hr(this)),this.g&&(this.readyState=3,Hr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;el(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function el(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?Ri(this):Hr(this),this.readyState==3&&el(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Ri(this))},s.Na=function(h){this.g&&(this.response=h,Ri(this))},s.ga=function(){this.g&&Ri(this)};function Ri(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Hr(h)}s.setRequestHeader=function(h,b){this.A.append(h,b)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=b.next();return h.join(`\r
`)};function Hr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(za.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ir(h){let b="";return Ve(h,function(w,A){b+=A,b+=":",b+=w,b+=`\r
`}),b}function Ba(h,b,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=Ir(w),typeof h=="string"?w!=null&&Gs(w):ft(h,b,w))}function _t(h){st.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(_t,st);var bs=/^https?$/i,Wc=["POST","PUT"];s=_t.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,b,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Uc.g(),this.g.onreadystatechange=E(y(this.Ca,this));try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(X){qa(this,X);return}if(h=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)w.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const X of A.keys())w.set(X,A.get(X));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(X=>X.toLowerCase()=="content-type"),H=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(Wc,b,void 0)>=0)||A||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ge]of w)this.g.setRequestHeader(X,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){qa(this,X)}};function qa(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.o=5,Xc(h),Qs(h)}function Xc(h){h.A||(h.A=!0,ht(h,"complete"),ht(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ht(this,"complete"),ht(this,"abort"),Qs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qs(this,!0)),_t.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Fa(this):this.Xa())},s.Xa=function(){Fa(this)};function Fa(h){if(h.h&&typeof l<"u"){if(h.v&&Gr(h)==4)setTimeout(h.Ca.bind(h),0);else if(ht(h,"readystatechange"),Gr(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var A;if(A=X===0){let ge=String(h.D).match(mh)[1]||null;!ge&&u.self&&u.self.location&&(ge=u.self.location.protocol.slice(0,-1)),A=!bs.test(ge?ge.toLowerCase():"")}w=A}if(w)ht(h,"complete"),ht(h,"success");else{h.o=6;try{var H=Gr(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",Xc(h)}}finally{Qs(h)}}}}function Qs(h,b){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,b||ht(h,"ready");try{w.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Gr(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Gr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),as(b)}};function En(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function $s(h){const b={};h=(h.g&&Gr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(C(h[A]))continue;var w=dh(h[A]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const X=b[H]||[];b[H]=X,X.push(w)}Fe(b,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(h,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||b}function Ci(h){this.za=0,this.i=[],this.j=new zr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vs("baseRetryDelayMs",5e3,h),this.Za=vs("retryDelaySeedMs",1e4,h),this.Ta=vs("forwardChannelMaxRetries",2,h),this.va=vs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new zc(h&&h.concurrentRequestLimit),this.Ba=new Ni,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ci.prototype,s.ka=8,s.I=1,s.connect=function(h,b,w,A){Jt(0),this.W=h,this.H=b||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=Ih(this,null,this.W),xs(this)};function Jc(h){if(tl(h),h.I==3){var b=h.V++,w=tn(h.J);if(ft(w,"SID",h.M),ft(w,"RID",b),ft(w,"TYPE","terminate"),Ha(h,w),b=new Br(h,h.j,b),b.M=2,b.A=La(tn(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(b.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=b.A,w=!0),w||(b.g=Sh(b.j,null),b.g.ea(b.A)),b.F=Date.now(),hs(b)}Th(h)}function ki(h){h.g&&(eu(h),h.g.cancel(),h.g=null)}function tl(h){ki(h),h.v&&(u.clearTimeout(h.v),h.v=null),rl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function xs(h){if(!Bc(h.h)&&!h.m){h.m=!0;var b=h.Ea;se||N(),pe||(se(),pe=!0),S.add(b,h),h.D=0}}function nl(h,b){return ps(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=b.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=cs(y(h.Ea,h,b),Eh(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new Br(this,this.j,h);let X=this.o;if(this.U&&(X?(X=M(X),me(X,this.U)):X=this.U),this.u!==null||this.R||(H.J=X,X=null),this.S)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(b+=A,b>4096){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=bh(this,H,b),w=tn(this.J),ft(w,"RID",h),ft(w,"CVER",22),this.G&&ft(w,"X-HTTP-Session-Id",this.G),Ha(this,w),X&&(this.R?b="headers="+Gs(Ir(X))+"&"+b:this.u&&Ba(w,this.u,X)),qc(this.h,H),this.Ra&&ft(w,"TYPE","init"),this.S?(ft(w,"$req",b),ft(w,"SID","null"),H.U=!0,ds(H,w,null)):ds(H,w,b),this.I=2}}else this.I==3&&(h?Zc(this,h):this.i.length==0||Bc(this.h)||Zc(this))};function Zc(h,b){var w;b?w=b.l:w=h.V++;const A=tn(h.J);ft(A,"SID",h.M),ft(A,"RID",w),ft(A,"AID",h.K),Ha(h,A),h.u&&h.o&&Ba(A,h.u,h.o),w=new Br(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),b&&(h.i=b.G.concat(h.i)),b=bh(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),qc(h.h,w),ds(w,A,b)}function Ha(h,b){h.H&&Ve(h.H,function(w,A){ft(b,A,w)}),h.l&&Ve({},function(w,A){ft(b,A,w)})}function bh(h,b,w){w=Math.min(h.i.length,w);const A=h.l?y(h.l.Ka,h.l,h):null;e:{var H=h.i;let ze=-1;for(;;){const Gt=["count="+w];ze==-1?w>0?(ze=H[0].g,Gt.push("ofs="+ze)):ze=0:Gt.push("ofs="+ze);let ct=!0;for(let Rt=0;Rt<w;Rt++){var X=H[Rt].g;const Sr=H[Rt].map;if(X-=ze,X<0)ze=Math.max(0,H[Rt].g-100),ct=!1;else try{X="req"+X+"_"||"";try{var ge=Sr instanceof Map?Sr:Object.entries(Sr);for(const[Es,Qr]of ge){let $r=Qr;m(Qr)&&($r=wt(Qr)),Gt.push(X+Es+"="+encodeURIComponent($r))}}catch(Es){throw Gt.push(X+"type="+encodeURIComponent("_badmap")),Es}}catch{A&&A(Sr)}}if(ct){ge=Gt.join("&");break e}}ge=void 0}return h=h.i.splice(0,w),b.G=h,ge}function vh(h){if(!h.g&&!h.v){h.Y=1;var b=h.Da;se||N(),pe||(se(),pe=!0),S.add(b,h),h.A=0}}function Ga(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=cs(y(h.Da,h),Eh(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,xh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=cs(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),ki(this),xh(this))};function eu(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function xh(h){h.g=new Br(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var b=tn(h.na);ft(b,"RID","rpc"),ft(b,"SID",h.M),ft(b,"AID",h.K),ft(b,"CI",h.F?"0":"1"),!h.F&&h.ia&&ft(b,"TO",h.ia),ft(b,"TYPE","xmlhttp"),Ha(h,b),h.u&&h.o&&Ba(b,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=La(tn(b)),w.u=null,w.R=!0,Ko(w,h)}s.Va=function(){this.C!=null&&(this.C=null,ki(this),Ga(this),Jt(19))};function rl(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function wh(h,b){var w=null;if(h.g==b){rl(h),eu(h),h.g=null;var A=2}else if(gs(h.h,b))w=b.G,Fc(h.h,b),A=1;else return;if(h.I!=0){if(b.o)if(A==1){w=b.u?b.u.length:0,b=Date.now()-b.F;var H=h.D;A=Ei(),ht(A,new ls(A,w)),xs(h)}else vh(h);else if(H=b.m,H==3||H==0&&b.X>0||!(A==1&&nl(h,b)||A==2&&Ga(h)))switch(w&&w.length>0&&(b=h.h,b.i=b.i.concat(w)),H){case 1:ws(h,5);break;case 4:ws(h,10);break;case 3:ws(h,6);break;default:ws(h,2)}}}function Eh(h,b){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*b}function ws(h,b){if(h.j.info("Error code "+b),b==2){var w=y(h.bb,h),A=h.Ua;const H=!A;A=new ur(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||gn(A,"https"),La(A),H?Fr(A.toString(),w):Yc(A.toString(),w)}else Jt(2);h.I=0,h.l&&h.l.pa(b),Th(h),tl(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function Th(h){if(h.I=0,h.ja=[],h.l){const b=Hc(h.h);(b.length!=0||h.i.length!=0)&&(L(h.ja,b),L(h.ja,h.i),h.h.i.length=0,D(h.i),h.i.length=0),h.l.oa()}}function Ih(h,b,w){var A=w instanceof ur?tn(w):new ur(w);if(A.g!="")b&&(A.g=b+"."+A.g),Ti(A,A.u);else{var H=u.location;A=H.protocol,b=b?b+"."+H.hostname:H.hostname,H=+H.port;const X=new ur(null);A&&gn(X,A),b&&(X.g=b),H&&Ti(X,H),w&&(X.h=w),A=X}return w=h.G,b=h.wa,w&&b&&ft(A,w,b),ft(A,"VER",h.ka),Ha(h,A),A}function Sh(h,b,w){if(b&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Aa&&!h.ma?new _t(new _s({ab:w})):new _t(h.ma),b.Fa(h.L),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ah(){}s=Ah.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Di(){}Di.prototype.g=function(h,b){return new qn(h,b)};function qn(h,b){st.call(this),this.g=new Ci(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(h?h["X-WebChannel-Client-Profile"]=b.sa:h={"X-WebChannel-Client-Profile":b.sa}),this.g.U=h,(h=b&&b.Qb)&&!C(h)&&(this.g.u=h),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!C(b)&&(this.g.G=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new Ks(this)}_(qn,st),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){Jc(this.g)},qn.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=wt(h),h=w);b.i.push(new en(b.Ya++,h)),b.I==3&&xs(b)},qn.prototype.N=function(){this.g.l=null,delete this.j,Jc(this.g),delete this.g,qn.Z.N.call(this)};function Nh(h){Ee.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const w in b){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}_(Nh,Ee);function Rh(){Me.call(this),this.status=1}_(Rh,Me);function Ks(h){this.g=h}_(Ks,Ah),Ks.prototype.ra=function(){ht(this.g,"a")},Ks.prototype.qa=function(h){ht(this.g,new Nh(h))},Ks.prototype.pa=function(h){ht(this.g,new Rh)},Ks.prototype.oa=function(){ht(this.g,"b")},Di.prototype.createWebChannel=Di.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,OS=function(){return new Di},MS=function(){return Ei()},VS=Qe,J0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ma.NO_ERROR=0,Ma.TIMEOUT=8,Ma.HTTP_ERROR=6,$f=Ma,Lc.COMPLETE="complete",PS=Lc,Lr.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",st.prototype.listen=st.prototype.J,Ju=Lr,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,jS=_t}).apply(typeof Vf<"u"?Vf:typeof self<"u"?self:typeof window<"u"?window:{});class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");let Rc="12.8.0";function r4(s){Rc=s}const ba=new jm("@firebase/firestore");function Bl(){return ba.logLevel}function s4(s){ba.setLogLevel(s)}function de(s,...e){if(ba.logLevel<=Ye.DEBUG){const t=e.map(l_);ba.debug(`Firestore (${Rc}): ${s}`,...t)}}function Kt(s,...e){if(ba.logLevel<=Ye.ERROR){const t=e.map(l_);ba.error(`Firestore (${Rc}): ${s}`,...t)}}function qs(s,...e){if(ba.logLevel<=Ye.WARN){const t=e.map(l_);ba.warn(`Firestore (${Rc}): ${s}`,...t)}}function l_(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function Te(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,LS(s,r,t)}function LS(s,e,t){let r=`FIRESTORE (${Rc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Kt(r),new Error(r)}function Re(s,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,s||LS(e,a,r)}function i4(s,e){s||Te(57014,e)}function xe(s,e){return s}const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Qn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Cn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class US{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bn.UNAUTHENTICATED)))}shutdown(){}}class o4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class l4{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let l=new Cn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Cn,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},m=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Cn)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new US(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class c4{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class u4{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new c4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class DE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Re(this.o===void 0,3512);const r=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new DE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Re(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new DE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function h4(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class c_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=h4(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Oe(s,e){return s<e?-1:s>e?1:0}function Z0(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const a=s.charAt(r),l=e.charAt(r);if(a!==l)return R0(a)===R0(l)?Oe(a,l):R0(a)?1:-1}return Oe(s.length,e.length)}const f4=55296,m4=57343;function R0(s){const e=s.charCodeAt(0);return e>=f4&&e<=m4}function ic(s,e,t){return s.length===e.length&&s.every(((r,a)=>t(r,e[a])))}function zS(s){return s+"\0"}const jE="__name__";class Ns{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ns.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ns?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Ns.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Oe(e.length,t.length)}static compareSegments(e,t){const r=Ns.isNumericId(e),a=Ns.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Ns.extractNumericId(e).compare(Ns.extractNumericId(t)):Z0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ha.fromString(e.substring(4,e.length-2))}}class We extends Ns{construct(e,t,r){return new We(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new We(t)}static emptyPath(){return new We([])}}const p4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Ns{construct(e,t,r){return new Pt(e,t,r)}static isValidIdentifier(e){return p4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jE}static keyField(){return new Pt([jE])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new le(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new le(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new le(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,a+=2}else m==="`"?(u=!u,a++):m!=="."||u?(r+=m,a++):(l(),a++)}if(l(),u)throw new le(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(t)}static emptyPath(){return new Pt([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(We.fromString(e))}static fromName(e){return new ye(We.fromString(e).popFirst(5))}static empty(){return new ye(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new We(e.slice()))}}function u_(s,e,t){if(!t)throw new le(Y.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function BS(s,e,t,r){if(e===!0&&r===!0)throw new le(Y.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function PE(s){if(!ye.isDocumentKey(s))throw new le(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function VE(s){if(ye.isDocumentKey(s))throw new le(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function qS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Gm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Te(12329,{type:typeof s})}function ot(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new le(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gm(s);throw new le(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function FS(s,e){if(e<=0)throw new le(Y.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function un(s,e){const t={typeString:s};return e&&(t.value=e),t}function Yd(s,e){if(!qS(s))throw new le(Y.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const u=s[r];if(a&&typeof u!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new le(Y.INVALID_ARGUMENT,t);return!0}const ME=-62135596800,OE=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*OE);return new dt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ME)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OE}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yd(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ME;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:un("string",dt._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new dt(0,0))}static max(){return new ke(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ac=-1;class mm{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function ey(s){return s.fields.find((e=>e.kind===2))}function uo(s){return s.fields.filter((e=>e.kind!==2))}mm.UNKNOWN_ID=-1;class Kf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Sd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Sd(0,wr.min())}}function HS(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=ke.fromTimestamp(r===1e9?new dt(t+1,0):new dt(t,r));return new wr(a,ye.empty(),e)}function GS(s){return new wr(s.readTime,s.key,ac)}class wr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new wr(ke.min(),ye.empty(),ac)}static max(){return new wr(ke.max(),ye.empty(),ac)}}function d_(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(s.documentKey,e.documentKey),t!==0?t:Oe(s.largestBatchId,e.largestBatchId))}const QS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $S{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Na(s){if(s.code!==Y.FAILED_PRECONDITION||s.message!==QS)throw s;de("LocalStore","Unexpectedly lost primary lease")}class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):F.reject(t)}static resolve(e){return new F(((t,r)=>{t(e)}))}static reject(e){return new F(((t,r)=>{r(e)}))}static waitFor(e){return new F(((t,r)=>{let a=0,l=0,u=!1;e.forEach((m=>{++a,m.next((()=>{++l,u&&l===a&&t()}),(g=>r(g)))})),u=!0,l===a&&t()}))}static or(e){let t=F.resolve(!1);for(const r of e)t=t.next((a=>a?F.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new F(((r,a)=>{const l=e.length,u=new Array(l);let m=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((x=>{u[y]=x,++m,m===l&&r(u)}),(x=>a(x)))}}))}static doWhile(e,t){return new F(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}const _r="SimpleDb";class Qm{static open(e,t,r,a){try{return new Qm(t,e.transaction(a,r))}catch(l){throw new cd(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Cn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new cd(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=h_(r.target.error);this.S.reject(new cd(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(de(_r,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new y4(t)}}class Ls{static delete(e){return de(_r,"Removing database:",e),fo(jy().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!bd())return!1;if(Ls.F())return!0;const e=Ot(),t=Ls.M(e),r=0<t&&t<10,a=KS(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Ls.M(Ot())===12.2&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(de(_r,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new cd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new le(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new le(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new cd(e,u))},a.onupgradeneeded=l=>{de(_r,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.N.k(u,a.transaction,l.oldVersion,this.version).next((()=>{de(_r,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const m=Qm.open(this.db,e,l?"readonly":"readwrite",r),g=a(m).next((y=>(m.C(),y))).catch((y=>(m.abort(y),F.reject(y)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,y=g.name!=="FirebaseError"&&u<3;if(de(_r,"Transaction failed with error:",g.message,"Retrying:",y),this.close(),!y)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function KS(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class g4{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return fo(this.U.delete())}}class cd extends le{constructor(e,t){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ra(s){return s.name==="IndexedDbTransactionError"}class y4{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(de(_r,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(de(_r,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fo(r)}add(e){return de(_r,"ADD",this.store.name,e,e),fo(this.store.add(e))}get(e){return fo(this.store.get(e)).next((t=>(t===void 0&&(t=null),de(_r,"GET",this.store.name,e,t),t)))}delete(e){return de(_r,"DELETE",this.store.name,e),fo(this.store.delete(e))}count(){return de(_r,"COUNT",this.store.name),fo(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new F(((u,m)=>{l.onerror=g=>{m(g.target.error)},l.onsuccess=g=>{u(g.target.result)}}))}{const l=this.cursor(r),u=[];return this.J(l,((m,g)=>{u.push(g)})).next((()=>u))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new F(((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}X(e,t){de(_r,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,u,m)=>m.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new F(((r,a)=>{t.onerror=l=>{const u=h_(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((m=>{m?u.continue():r()})):r()}}))}J(e,t){const r=[];return new F(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const m=u.target.result;if(!m)return void a();const g=new g4(m),y=t(m.primaryKey,m.value,g);if(y instanceof F){const x=y.catch((_=>(g.done(),F.reject(_))));r.push(x)}g.isDone?a():g.G===null?m.continue():m.continue(g.G)}})).next((()=>F.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fo(s){return new F(((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=h_(r.target.error);t(a)}}))}let LE=!1;function h_(s){const e=Ls.M(Ot());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LE||(LE=!0,setTimeout((()=>{throw r}),0)),r}}return s}const ud="IndexBackfiller";class _4{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){de(ud,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();de(ud,`Documents written: ${t}`)}catch(t){Ra(t)?de(ud,"Ignoring IndexedDB error during index backfill: ",t):await Na(t)}await this.re(6e4)}))}}class b4{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return F.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return de(ud,`Processing collection: ${u}`),this.oe(e,u,a).next((m=>{a-=m,r.add(u)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(a,l))).next((m=>(de(ud,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>u.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const u=GS(l);d_(u,r)>0&&(r=u)})),new wr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ir{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ir.ce=-1;const fa=-1;function Wd(s){return s==null}function Ad(s){return s===0&&1/s==-1/0}function YS(s){return typeof s=="number"&&Number.isInteger(s)&&!Ad(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const pm="";function Ln(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=UE(e)),e=v4(s.get(t),e);return UE(e)}function v4(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case pm:t+="";break;default:t+=l}}return t}function UE(s){return s+pm+""}function Vs(s){const e=s.length;if(Re(e>=2,64408,{path:s}),e===2)return Re(s.charAt(0)===pm&&s.charAt(1)==="",56145,{path:s}),We.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=s.indexOf(pm,l);switch((u<0||u>t)&&Te(50515,{path:s}),s.charAt(u+1)){case"":const m=s.substring(l,u);let g;a.length===0?g=m:(a+=m,g=a,a=""),r.push(g);break;case"":a+=s.substring(l,u),a+="\0";break;case"":a+=s.substring(l,u+1);break;default:Te(61167,{path:s})}l=u+2}return new We(r)}const ho="remoteDocuments",Xd="owner",Vl="owner",Nd="mutationQueues",x4="userId",Xr="mutations",zE="batchId",vo="userMutationsIndex",BE=["userId","batchId"];function Yf(s,e){return[s,Ln(e)]}function WS(s,e,t){return[s,Ln(e),t]}const w4={},oc="documentMutations",gm="remoteDocumentsV14",E4=["prefixPath","collectionGroup","readTime","documentId"],Wf="documentKeyIndex",T4=["prefixPath","collectionGroup","documentId"],XS="collectionGroupIndex",I4=["collectionGroup","readTime","prefixPath","documentId"],Rd="remoteDocumentGlobal",ty="remoteDocumentGlobalKey",lc="targets",JS="queryTargetsIndex",S4=["canonicalId","targetId"],cc="targetDocuments",A4=["targetId","path"],f_="documentTargetsIndex",N4=["path","targetId"],ym="targetGlobalKey",Ao="targetGlobal",Cd="collectionParents",R4=["collectionId","parent"],uc="clientMetadata",C4="clientId",$m="bundles",k4="bundleId",Km="namedQueries",D4="name",m_="indexConfiguration",j4="indexId",ny="collectionGroupIndex",P4="collectionGroup",dd="indexState",V4=["indexId","uid"],ZS="sequenceNumberIndex",M4=["uid","sequenceNumber"],hd="indexEntries",O4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],e1="documentKeyIndex",L4=["indexId","uid","orderedDocumentKey"],Ym="documentOverlays",U4=["userId","collectionPath","documentId"],ry="collectionPathOverlayIndex",z4=["userId","collectionPath","largestBatchId"],t1="collectionGroupOverlayIndex",B4=["userId","collectionGroup","largestBatchId"],p_="globals",q4="name",n1=[Nd,Xr,oc,ho,lc,Xd,Ao,cc,uc,Rd,Cd,$m,Km],F4=[...n1,Ym],r1=[Nd,Xr,oc,gm,lc,Xd,Ao,cc,uc,Rd,Cd,$m,Km,Ym],s1=r1,g_=[...s1,m_,dd,hd],H4=g_,i1=[...g_,p_],G4=i1;class sy extends $S{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function mn(s,e){const t=xe(s);return Ls.O(t.le,e)}function qE(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Ca(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function a1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class It{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new It(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mf(this.root,e,this.comparator,!0)}}class Mf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Nn.RED,this.left=a??Nn.EMPTY,this.right=l??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Nn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Nn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yt{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FE(this.data.getIterator())}getIteratorFrom(e){return new FE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new yt(this.comparator);return t.data=e,t}}class FE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ml(s){return s.hasNext()?s.getNext():void 0}class ar{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new ar([])}unionWith(e){let t=new yt(Pt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ar(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class o1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Q4(){return typeof atob<"u"}class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new o1("Invalid base64 string: "+l):l}})(e);return new qt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const $4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(s){if(Re(!!s,39018),typeof s=="string"){let e=0;const t=$4.exec(s);if(Re(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kt(s.seconds),nanos:kt(s.nanos)}}function kt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function gi(s){return typeof s=="string"?qt.fromBase64String(s):qt.fromUint8Array(s)}const l1="server_timestamp",c1="__type__",u1="__previous_value__",d1="__local_write_time__";function Wm(s){return(s?.mapValue?.fields||{})[c1]?.stringValue===l1}function Xm(s){const e=s.mapValue.fields[u1];return Wm(e)?Xm(e):e}function kd(s){const e=pi(s.mapValue.fields[d1].timestampValue);return new dt(e.seconds,e.nanos)}class K4{constructor(e,t,r,a,l,u,m,g,y,x,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=x,this.apiKey=_}}const iy="(default)";class va{constructor(e,t){this.projectId=e,this.database=t||iy}static empty(){return new va("","")}get isDefaultDatabase(){return this.database===iy}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}function Y4(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new le(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(s.options.projectId,e)}const y_="__type__",h1="__max__",la={mapValue:{fields:{__type__:{stringValue:h1}}}},__="__vector__",dc="value",Xf={nullValue:"NULL_VALUE"};function xa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Wm(s)?4:f1(s)?9007199254740991:Jm(s)?10:11:Te(28295,{value:s})}function Fs(s,e){if(s===e)return!0;const t=xa(s);if(t!==xa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return kd(s).isEqual(kd(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=pi(a.timestampValue),m=pi(l.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return gi(a.bytesValue).isEqual(gi(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return kt(a.geoPointValue.latitude)===kt(l.geoPointValue.latitude)&&kt(a.geoPointValue.longitude)===kt(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return kt(a.integerValue)===kt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=kt(a.doubleValue),m=kt(l.doubleValue);return u===m?Ad(u)===Ad(m):isNaN(u)&&isNaN(m)}return!1})(s,e);case 9:return ic(s.arrayValue.values||[],e.arrayValue.values||[],Fs);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},m=l.mapValue.fields||{};if(qE(u)!==qE(m))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(m[g]===void 0||!Fs(u[g],m[g])))return!1;return!0})(s,e);default:return Te(52216,{left:s})}}function Dd(s,e){return(s.values||[]).find((t=>Fs(t,e)))!==void 0}function wa(s,e){if(s===e)return 0;const t=xa(s),r=xa(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(s.booleanValue,e.booleanValue);case 2:return(function(l,u){const m=kt(l.integerValue||l.doubleValue),g=kt(u.integerValue||u.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return HE(s.timestampValue,e.timestampValue);case 4:return HE(kd(s),kd(e));case 5:return Z0(s.stringValue,e.stringValue);case 6:return(function(l,u){const m=gi(l),g=gi(u);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(l,u){const m=l.split("/"),g=u.split("/");for(let y=0;y<m.length&&y<g.length;y++){const x=Oe(m[y],g[y]);if(x!==0)return x}return Oe(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,u){const m=Oe(kt(l.latitude),kt(u.latitude));return m!==0?m:Oe(kt(l.longitude),kt(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return GE(s.arrayValue,e.arrayValue);case 10:return(function(l,u){const m=l.fields||{},g=u.fields||{},y=m[dc]?.arrayValue,x=g[dc]?.arrayValue,_=Oe(y?.values?.length||0,x?.values?.length||0);return _!==0?_:GE(y,x)})(s.mapValue,e.mapValue);case 11:return(function(l,u){if(l===la.mapValue&&u===la.mapValue)return 0;if(l===la.mapValue)return 1;if(u===la.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),y=u.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let _=0;_<g.length&&_<x.length;++_){const E=Z0(g[_],x[_]);if(E!==0)return E;const D=wa(m[g[_]],y[x[_]]);if(D!==0)return D}return Oe(g.length,x.length)})(s.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function HE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Oe(s,e);const t=pi(s),r=pi(e),a=Oe(t.seconds,r.seconds);return a!==0?a:Oe(t.nanos,r.nanos)}function GE(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=wa(t[a],r[a]);if(l)return l}return Oe(t.length,r.length)}function hc(s){return ay(s)}function ay(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=pi(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return gi(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return ye.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=ay(l);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${ay(t.fields[u])}`;return a+"}"})(s.mapValue):Te(61005,{value:s})}function Jf(s){switch(xa(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xm(s);return e?16+Jf(e):16;case 5:return 2*s.stringValue.length;case 6:return gi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Jf(l)),0)})(s.arrayValue);case 10:case 11:return(function(r){let a=0;return Ca(r.fields,((l,u)=>{a+=l.length+Jf(u)})),a})(s.mapValue);default:throw Te(13486,{value:s})}}function ko(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function oy(s){return!!s&&"integerValue"in s}function jd(s){return!!s&&"arrayValue"in s}function QE(s){return!!s&&"nullValue"in s}function $E(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Zf(s){return!!s&&"mapValue"in s}function Jm(s){return(s?.mapValue?.fields||{})[y_]?.stringValue===__}function fd(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ca(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=fd(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fd(s.arrayValue.values[t]);return e}return{...s}}function f1(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===h1}const m1={mapValue:{fields:{[y_]:{stringValue:__},[dc]:{arrayValue:{}}}}};function W4(s){return"nullValue"in s?Xf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?ko(va.empty(),ye.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Jm(s)?m1:{mapValue:{}}:Te(35942,{value:s})}function X4(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?ko(va.empty(),ye.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?m1:"mapValue"in s?Jm(s)?{mapValue:{}}:la:Te(61959,{value:s})}function KE(s,e){const t=wa(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function YE(s,e){const t=wa(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fd(t)}setAll(e){let t=Pt.emptyPath(),r={},a=[];e.forEach(((u,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,a),r={},a=[],t=m.popLast()}u?r[m.lastSegment()]=fd(u):a.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Zf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ca(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Rn(fd(this.value))}}function p1(s){const e=[];return Ca(s.fields,((t,r)=>{const a=new Pt([t]);if(Zf(r)){const l=p1(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new ar(e)}class Nt{constructor(e,t,r,a,l,u,m){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=m}static newInvalidDocument(e){return new Nt(e,0,ke.min(),ke.min(),ke.min(),Rn.empty(),0)}static newFoundDocument(e,t,r,a){return new Nt(e,1,t,ke.min(),r,a,0)}static newNoDocument(e,t){return new Nt(e,2,t,ke.min(),ke.min(),Rn.empty(),0)}static newUnknownDocument(e,t){return new Nt(e,3,t,ke.min(),ke.min(),Rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ea{constructor(e,t){this.position=e,this.inclusive=t}}function WE(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],u=s.position[a];if(l.field.isKeyField()?r=ye.comparator(ye.fromName(u.referenceValue),t.key):r=wa(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function XE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Fs(s.position[t],e.position[t]))return!1;return!0}class Pd{constructor(e,t="asc"){this.field=e,this.dir=t}}function J4(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class g1{}class Ze extends g1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Z4(e,t,r):t==="array-contains"?new nM(e,r):t==="in"?new w1(e,r):t==="not-in"?new rM(e,r):t==="array-contains-any"?new sM(e,r):new Ze(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new eM(e,r):new tM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wa(t,this.value)):t!==null&&xa(this.value)===xa(t)&&this.matchesComparison(wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gt extends g1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new gt(e,t)}matches(e){return fc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fc(s){return s.op==="and"}function ly(s){return s.op==="or"}function b_(s){return y1(s)&&fc(s)}function y1(s){for(const e of s.filters)if(e instanceof gt)return!1;return!0}function cy(s){if(s instanceof Ze)return s.field.canonicalString()+s.op.toString()+hc(s.value);if(b_(s))return s.filters.map((e=>cy(e))).join(",");{const e=s.filters.map((t=>cy(t))).join(",");return`${s.op}(${e})`}}function _1(s,e){return s instanceof Ze?(function(r,a){return a instanceof Ze&&r.op===a.op&&r.field.isEqual(a.field)&&Fs(r.value,a.value)})(s,e):s instanceof gt?(function(r,a){return a instanceof gt&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,m)=>l&&_1(u,a.filters[m])),!0):!1})(s,e):void Te(19439)}function b1(s,e){const t=s.filters.concat(e);return gt.create(t,s.op)}function v1(s){return s instanceof Ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${hc(t.value)}`})(s):s instanceof gt?(function(t){return t.op.toString()+" {"+t.getFilters().map(v1).join(" ,")+"}"})(s):"Filter"}class Z4 extends Ze{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class eM extends Ze{constructor(e,t){super(e,"in",t),this.keys=x1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class tM extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=x1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function x1(s,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class nM extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jd(t)&&Dd(t.arrayValue,this.value)}}class w1 extends Ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Dd(this.value.arrayValue,t)}}class rM extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Dd(this.value.arrayValue,t)}}class sM extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Dd(this.value.arrayValue,r)))}}class iM{constructor(e,t=null,r=[],a=[],l=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=m,this.Te=null}}function uy(s,e=null,t=[],r=[],a=null,l=null,u=null){return new iM(s,e,t,r,a,l,u)}function Do(s){const e=xe(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>cy(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Wd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>hc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>hc(r))).join(",")),e.Te=t}return e.Te}function Jd(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!J4(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!_1(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!XE(s.startAt,e.startAt)&&XE(s.endAt,e.endAt)}function _m(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function bm(s,e){return s.filters.filter((t=>t instanceof Ze&&t.field.isEqual(e)))}function JE(s,e,t){let r=Xf,a=!0;for(const l of bm(s,e)){let u=Xf,m=!0;switch(l.op){case"<":case"<=":u=W4(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,m=!1;break;case"!=":case"not-in":u=Xf}KE({value:r,inclusive:a},{value:u,inclusive:m})<0&&(r=u,a=m)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const u=t.position[l];KE({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function ZE(s,e,t){let r=la,a=!0;for(const l of bm(s,e)){let u=la,m=!0;switch(l.op){case">=":case">":u=X4(l.value),m=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,m=!1;break;case"!=":case"not-in":u=la}YE({value:r,inclusive:a},{value:u,inclusive:m})>0&&(r=u,a=m)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const u=t.position[l];YE({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}class bi{constructor(e,t=null,r=[],a=[],l=null,u="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function E1(s,e,t,r,a,l,u,m){return new bi(s,e,t,r,a,l,u,m)}function Cc(s){return new bi(s)}function eT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function aM(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function v_(s){return s.collectionGroup!==null}function Xl(s){const e=xe(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new yt(Pt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Pd(l,r))})),t.has(Pt.keyField().canonicalString())||e.Ie.push(new Pd(Pt.keyField(),r))}return e.Ie}function $n(s){const e=xe(s);return e.Ee||(e.Ee=oM(e,Xl(s))),e.Ee}function oM(s,e){if(s.limitType==="F")return uy(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Pd(a.field,l)}));const t=s.endAt?new Ea(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Ea(s.startAt.position,s.startAt.inclusive):null;return uy(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function dy(s,e){const t=s.filters.concat([e]);return new bi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function lM(s,e){const t=s.explicitOrderBy.concat([e]);return new bi(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function vm(s,e,t){return new bi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function cM(s,e){return new bi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,e,s.endAt)}function uM(s,e){return new bi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,e)}function Zd(s,e){return Jd($n(s),$n(e))&&s.limitType===e.limitType}function T1(s){return`${Do($n(s))}|lt:${s.limitType}`}function ql(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>v1(a))).join(", ")}]`),Wd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>hc(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>hc(a))).join(",")),`Target(${r})`})($n(s))}; limitType=${s.limitType})`}function eh(s,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ye.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(s,e)&&(function(r,a){for(const l of Xl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(r,a){return!(r.startAt&&!(function(u,m,g){const y=WE(u,m,g);return u.inclusive?y<=0:y<0})(r.startAt,Xl(r),a)||r.endAt&&!(function(u,m,g){const y=WE(u,m,g);return u.inclusive?y>=0:y>0})(r.endAt,Xl(r),a))})(s,e)}function I1(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function S1(s){return(e,t)=>{let r=!1;for(const a of Xl(s)){const l=dM(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function dM(s,e,t){const r=s.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,u,m){const g=u.data.field(l),y=m.data.field(l);return g!==null&&y!==null?wa(g,y):Te(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:s.dir})}}class vi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ca(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return a1(this.inner)}size(){return this.innerSize}}const hM=new It(ye.comparator);function or(){return hM}const A1=new It(ye.comparator);function Zu(...s){let e=A1;for(const t of s)e=e.insert(t.key,t);return e}function N1(s){let e=A1;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ms(){return md()}function R1(){return md()}function md(){return new vi((s=>s.toString()),((s,e)=>s.isEqual(e)))}const fM=new It(ye.comparator),mM=new yt(ye.comparator);function qe(...s){let e=mM;for(const t of s)e=e.add(t);return e}const pM=new yt(Oe);function x_(){return pM}function w_(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function C1(s){return{integerValue:""+s}}function k1(s,e){return YS(e)?C1(e):w_(s,e)}class Zm{constructor(){this._=void 0}}function gM(s,e,t){return s instanceof mc?(function(a,l){const u={fields:{[c1]:{stringValue:l1},[d1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Wm(l)&&(l=Xm(l)),l&&(u.fields[u1]=l),{mapValue:u}})(t,e):s instanceof jo?j1(s,e):s instanceof Po?P1(s,e):(function(a,l){const u=D1(a,l),m=tT(u)+tT(a.Ae);return oy(u)&&oy(a.Ae)?C1(m):w_(a.serializer,m)})(s,e)}function yM(s,e,t){return s instanceof jo?j1(s,e):s instanceof Po?P1(s,e):t}function D1(s,e){return s instanceof pc?(function(r){return oy(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class mc extends Zm{}class jo extends Zm{constructor(e){super(),this.elements=e}}function j1(s,e){const t=V1(e);for(const r of s.elements)t.some((a=>Fs(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Po extends Zm{constructor(e){super(),this.elements=e}}function P1(s,e){let t=V1(e);for(const r of s.elements)t=t.filter((a=>!Fs(a,r)));return{arrayValue:{values:t}}}class pc extends Zm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function tT(s){return kt(s.integerValue||s.doubleValue)}function V1(s){return jd(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class th{constructor(e,t){this.field=e,this.transform=t}}function _M(s,e){return s.field.isEqual(e.field)&&(function(r,a){return r instanceof jo&&a instanceof jo||r instanceof Po&&a instanceof Po?ic(r.elements,a.elements,Fs):r instanceof pc&&a instanceof pc?Fs(r.Ae,a.Ae):r instanceof mc&&a instanceof mc})(s.transform,e.transform)}class bM{constructor(e,t){this.version=e,this.transformResults=t}}class Vt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vt}static exists(e){return new Vt(void 0,e)}static updateTime(e){return new Vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function em(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ep{}function M1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Dc(s.key,Vt.none()):new kc(s.key,s.data,Vt.none());{const t=s.data,r=Rn.empty();let a=new yt(Pt.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new xi(s.key,r,new ar(a.toArray()),Vt.none())}}function vM(s,e,t){s instanceof kc?(function(a,l,u){const m=a.value.clone(),g=rT(a.fieldTransforms,l,u.transformResults);m.setAll(g),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(s,e,t):s instanceof xi?(function(a,l,u){if(!em(a.precondition,l))return void l.convertToUnknownDocument(u.version);const m=rT(a.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(O1(a)),g.setAll(m),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(s,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function pd(s,e,t,r){return s instanceof kc?(function(l,u,m,g){if(!em(l.precondition,u))return m;const y=l.value.clone(),x=sT(l.fieldTransforms,g,u);return y.setAll(x),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(s,e,t,r):s instanceof xi?(function(l,u,m,g){if(!em(l.precondition,u))return m;const y=sT(l.fieldTransforms,g,u),x=u.data;return x.setAll(O1(l)),x.setAll(y),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(s,e,t,r):(function(l,u,m){return em(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m})(s,e,t)}function xM(s,e){let t=null;for(const r of s.fieldTransforms){const a=e.data.field(r.field),l=D1(r.transform,a||null);l!=null&&(t===null&&(t=Rn.empty()),t.set(r.field,l))}return t||null}function nT(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&ic(r,a,((l,u)=>_M(l,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class kc extends ep{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class xi extends ep{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function O1(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function rT(s,e,t){const r=new Map;Re(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let a=0;a<t.length;a++){const l=s[a],u=l.transform,m=e.data.field(l.field);r.set(l.field,yM(u,m,t[a]))}return r}function sT(s,e,t){const r=new Map;for(const a of s){const l=a.transform,u=t.data.field(a.field);r.set(a.field,gM(l,u,e))}return r}class Dc extends ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class E_ extends ep{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class T_{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&vM(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=R1();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let m=this.applyToLocalView(u,l.mutatedFields);m=t.has(a.key)?null:m;const g=M1(u,m);g!==null&&r.set(a.key,g),u.isValidDocument()||u.convertToNoDocument(ke.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,((t,r)=>nT(t,r)))&&ic(this.baseMutations,e.baseMutations,((t,r)=>nT(t,r)))}}class I_{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return fM})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new I_(e,t,r,a)}}class S_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class wM{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,tt;function L1(s){switch(s){case Y.OK:return Te(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Te(15467,{code:s})}}function U1(s){if(s===void 0)return Kt("GRPC error has no .code"),Y.UNKNOWN;switch(s){case on.OK:return Y.OK;case on.CANCELLED:return Y.CANCELLED;case on.UNKNOWN:return Y.UNKNOWN;case on.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case on.INTERNAL:return Y.INTERNAL;case on.UNAVAILABLE:return Y.UNAVAILABLE;case on.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case on.NOT_FOUND:return Y.NOT_FOUND;case on.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case on.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case on.ABORTED:return Y.ABORTED;case on.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case on.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case on.DATA_LOSS:return Y.DATA_LOSS;default:return Te(39323,{code:s})}}(tt=on||(on={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";function z1(){return new TextEncoder}const EM=new ha([4294967295,4294967295],0);function iT(s){const e=z1().encode(s),t=new DS;return t.update(e),new Uint8Array(t.digest())}function aT(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ha([t,r],0),new ha([a,l],0)]}class A_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ed(`Invalid padding: ${t}`);if(r<0)throw new ed(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ed(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ed(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ha.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(ha.fromNumber(r)));return a.compare(EM)===1&&(a=new ha([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=iT(e),[r,a]=aT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);if(!this.we(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new A_(l,a,t);return r.forEach((m=>u.insert(m))),u}insert(e){if(this.ge===0)return;const t=iT(e),[r,a]=aT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ed extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class nh{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,rh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new nh(ke.min(),a,new It(Oe),or(),qe())}}class rh{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new rh(r,t,qe(),qe(),qe())}}class tm{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class B1{constructor(e,t){this.targetId=e,this.Ce=t}}class q1{constructor(e,t,r=qt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class oT{constructor(){this.ve=0,this.Fe=lT(),this.Me=qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),r=qe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Te(38017,{changeType:l})}})),new rh(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=lT()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class TM{constructor(e){this.Ge=e,this.ze=new Map,this.je=or(),this.He=Of(),this.Je=Of(),this.Ze=new It(Oe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(_m(l))if(r===0){const u=new ye(l.path);this.et(t,u,Nt.newNoDocument(u,ke.min()))}else Re(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const m=this.ut(e),g=m?this.ct(m,e,u):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,m;try{u=gi(r).toUint8Array()}catch(g){if(g instanceof o1)return qs("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new A_(u,a,l)}catch(g){return qs(g instanceof ed?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const m=this.ot(u);if(m){if(l.current&&_m(m.target)){const g=new ye(m.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,Nt.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let r=qe();this.Je.forEach(((l,u)=>{let m=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new nh(e,t,this.Ze,this.je,r);return this.je=or(),this.He=Of(),this.Je=Of(),this.Ze=new It(Oe),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new oT,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new yt(Oe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new yt(Oe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new oT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Of(){return new It(ye.comparator)}function lT(){return new It(ye.comparator)}const IM={asc:"ASCENDING",desc:"DESCENDING"},SM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AM={and:"AND",or:"OR"};class NM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hy(s,e){return s.useProto3Json||Wd(e)?e:{value:e}}function gc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function RM(s,e){return gc(s,e.toTimestamp())}function Yt(s){return Re(!!s,49232),ke.fromTimestamp((function(t){const r=pi(t);return new dt(r.seconds,r.nanos)})(s))}function N_(s,e){return fy(s,e).canonicalString()}function fy(s,e){const t=(function(a){return new We(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function H1(s){const e=We.fromString(s);return Re(eA(e),10190,{key:e.toString()}),e}function Vd(s,e){return N_(s.databaseId,e.path)}function Us(s,e){const t=H1(e);if(t.get(1)!==s.databaseId.projectId)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ye($1(t))}function G1(s,e){return N_(s.databaseId,e)}function Q1(s){const e=H1(s);return e.length===4?We.emptyPath():$1(e)}function my(s){return new We(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function $1(s){return Re(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function cT(s,e,t){return{name:Vd(s,e),fields:t.value.mapValue.fields}}function K1(s,e,t){const r=Us(s,e.name),a=Yt(e.updateTime),l=e.createTime?Yt(e.createTime):ke.min(),u=new Rn({mapValue:{fields:e.fields}}),m=Nt.newFoundDocument(r,a,l,u);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function CM(s,e){return"found"in e?(function(r,a){Re(!!a.found,43571),a.found.name,a.found.updateTime;const l=Us(r,a.found.name),u=Yt(a.found.updateTime),m=a.found.createTime?Yt(a.found.createTime):ke.min(),g=new Rn({mapValue:{fields:a.found.fields}});return Nt.newFoundDocument(l,u,m,g)})(s,e):"missing"in e?(function(r,a){Re(!!a.missing,3894),Re(!!a.readTime,22933);const l=Us(r,a.missing),u=Yt(a.readTime);return Nt.newNoDocument(l,u)})(s,e):Te(7234,{result:e})}function kM(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,x){return y.useProto3Json?(Re(x===void 0||typeof x=="string",58123),qt.fromBase64String(x||"")):(Re(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),qt.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&(function(y){const x=y.code===void 0?Y.UNKNOWN:U1(y.code);return new le(x,y.message||"")})(u);t=new q1(r,a,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Us(s,r.document.name),l=Yt(r.document.updateTime),u=r.document.createTime?Yt(r.document.createTime):ke.min(),m=new Rn({mapValue:{fields:r.document.fields}}),g=Nt.newFoundDocument(a,l,u,m),y=r.targetIds||[],x=r.removedTargetIds||[];t=new tm(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Us(s,r.document),l=r.readTime?Yt(r.readTime):ke.min(),u=Nt.newNoDocument(a,l),m=r.removedTargetIds||[];t=new tm([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Us(s,r.document),l=r.removedTargetIds||[];t=new tm([],l,a,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new wM(a,l),m=r.targetId;t=new B1(m,u)}}return t}function Md(s,e){let t;if(e instanceof kc)t={update:cT(s,e.key,e.value)};else if(e instanceof Dc)t={delete:Vd(s,e.key)};else if(e instanceof xi)t={update:cT(s,e.key,e.data),updateMask:OM(e.fieldMask)};else{if(!(e instanceof E_))return Te(16599,{dt:e.type});t={verify:Vd(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const m=u.transform;if(m instanceof mc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof jo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Po)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof pc)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw Te(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:RM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(s,e.precondition)),t}function py(s,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Vt.updateTime(Yt(l.updateTime)):l.exists!==void 0?Vt.exists(l.exists):Vt.none()})(e.currentDocument):Vt.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(u,m){let g=null;if("setToServerValue"in m)Re(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new mc;else if("appendMissingElements"in m){const x=m.appendMissingElements.values||[];g=new jo(x)}else if("removeAllFromArray"in m){const x=m.removeAllFromArray.values||[];g=new Po(x)}else"increment"in m?g=new pc(u,m.increment):Te(16584,{proto:m});const y=Pt.fromServerFormat(m.fieldPath);return new th(y,g)})(s,a))):[];if(e.update){e.update.name;const a=Us(s,e.update.name),l=new Rn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(g){const y=g.fieldPaths||[];return new ar(y.map((x=>Pt.fromServerFormat(x))))})(e.updateMask);return new xi(a,l,u,t,r)}return new kc(a,l,t,r)}if(e.delete){const a=Us(s,e.delete);return new Dc(a,t)}if(e.verify){const a=Us(s,e.verify);return new E_(a,t)}return Te(1463,{proto:e})}function DM(s,e){return s&&s.length>0?(Re(e!==void 0,14353),s.map((t=>(function(a,l){let u=a.updateTime?Yt(a.updateTime):Yt(l);return u.isEqual(ke.min())&&(u=Yt(l)),new bM(u,a.transformResults||[])})(t,e)))):[]}function Y1(s,e){return{documents:[G1(s,e.path)]}}function W1(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=G1(s,a);const l=(function(y){if(y.length!==0)return Z1(gt.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((x=>(function(E){return{field:Fl(E.field),direction:PM(E.dir)}})(x)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=hy(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function X1(s){let e=Q1(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Re(r===1,65062);const x=t.from[0];x.allDescendants?a=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=(function(_){const E=J1(_);return E instanceof gt&&b_(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((E=>(function(L){return new Pd(Hl(L.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(E)))})(t.orderBy));let m=null;t.limit&&(m=(function(_){let E;return E=typeof _=="object"?_.value:_,Wd(E)?null:E})(t.limit));let g=null;t.startAt&&(g=(function(_){const E=!!_.before,D=_.values||[];return new Ea(D,E)})(t.startAt));let y=null;return t.endAt&&(y=(function(_){const E=!_.before,D=_.values||[];return new Ea(D,E)})(t.endAt)),E1(e,a,u,l,m,"F",g,y)}function jM(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function J1(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Hl(t.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Hl(t.unaryFilter.field);return Ze.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Hl(t.unaryFilter.field);return Ze.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Hl(t.unaryFilter.field);return Ze.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Ze.create(Hl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return gt.create(t.compositeFilter.filters.map((r=>J1(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(s):Te(30097,{filter:s})}function PM(s){return IM[s]}function VM(s){return SM[s]}function MM(s){return AM[s]}function Fl(s){return{fieldPath:s.canonicalString()}}function Hl(s){return Pt.fromServerFormat(s.fieldPath)}function Z1(s){return s instanceof Ze?(function(t){if(t.op==="=="){if($E(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NAN"}};if(QE(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($E(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NOT_NAN"}};if(QE(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fl(t.field),op:VM(t.op),value:t.value}}})(s):s instanceof gt?(function(t){const r=t.getFilters().map((a=>Z1(a)));return r.length===1?r[0]:{compositeFilter:{op:MM(t.op),filters:r}}})(s):Te(54877,{filter:s})}function OM(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function eA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function tA(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class di{constructor(e,t,r,a,l=ke.min(),u=ke.min(),m=qt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class nA{constructor(e){this.yt=e}}function LM(s,e){let t;if(e.document)t=K1(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),a=Mo(e.noDocument.readTime);t=Nt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te(56709);{const r=ye.fromSegments(e.unknownDocument.path),a=Mo(e.unknownDocument.version);t=Nt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new dt(a[0],a[1]);return ke.fromTimestamp(l)})(e.readTime)),t}function uT(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,u){return{name:Vd(l,u.key),fields:u.data.value.mapValue.fields,updateTime:gc(l,u.version.toTimestamp()),createTime:gc(l,u.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Vo(e.version)};else{if(!e.isUnknownDocument())return Te(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Vo(e.version)}}return r}function xm(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Vo(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mo(s){const e=new dt(s.seconds,s.nanoseconds);return ke.fromTimestamp(e)}function mo(s,e){const t=(e.baseMutations||[]).map((l=>py(s.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const m=e.mutations[l+1];u.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>py(s.yt,l))),a=dt.fromMillis(e.localWriteTimeMs);return new T_(e.batchId,a,t,r)}function td(s){const e=Mo(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Mo(s.lastLimboFreeSnapshotVersion):ke.min();let r;return r=(function(l){return l.documents!==void 0})(s.query)?(function(l){const u=l.documents.length;return Re(u===1,1966,{count:u}),$n(Cc(Q1(l.documents[0])))})(s.query):(function(l){return $n(X1(l))})(s.query),new di(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,qt.fromBase64String(s.resumeToken))}function rA(s,e){const t=Vo(e.snapshotVersion),r=Vo(e.lastLimboFreeSnapshotVersion);let a;a=_m(e.target)?Y1(s.yt,e.target):W1(s.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Do(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function R_(s){const e=X1({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?vm(e,e.limit,"L"):e}function C0(s,e){return new S_(e.largestBatchId,py(s.yt,e.overlayMutation))}function dT(s,e){const t=e.path.lastSegment();return[s,Ln(e.path.popLast()),t]}function hT(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:Vo(r.readTime),documentKey:Ln(r.documentKey.path),largestBatchId:r.largestBatchId}}class UM{getBundleMetadata(e,t){return fT(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:Mo(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return fT(e).put((function(a){return{bundleId:a.id,createTime:Vo(Yt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return mT(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:R_(l.bundledQuery),readTime:Mo(l.readTime)}})(r)}))}saveNamedQuery(e,t){return mT(e).put((function(a){return{name:a.name,readTime:Vo(Yt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function fT(s){return mn(s,$m)}function mT(s){return mn(s,Km)}class tp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new tp(e,r)}getOverlay(e,t){return Fu(e).get(dT(this.userId,t)).next((r=>r?C0(this.serializer,r):null))}getOverlays(e,t){const r=Ms();return F.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,u)=>{const m=new S_(t,u);a.push(this.bt(e,m))})),F.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((u=>a.add(Ln(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const m=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(Fu(e).X(ry,m))})),F.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Ms(),l=Ln(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Fu(e).H(ry,u).next((m=>{for(const g of m){const y=C0(this.serializer,g);a.set(y.getKey(),y)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Ms();let u;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Fu(e).ee({index:t1,range:m},((g,y,x)=>{const _=C0(this.serializer,y);l.size()<a||_.largestBatchId===u?(l.set(_.getKey(),_),u=_.largestBatchId):x.done()})).next((()=>l))}bt(e,t){return Fu(e).put((function(a,l,u){const[m,g,y]=dT(l,u.mutation.key);return{userId:l,collectionPath:g,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Md(a.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Fu(s){return mn(s,Ym)}class zM{St(e){return mn(e,p_)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t?.value;return r?qt.fromUint8Array(r):qt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class po{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(kt(e.integerValue));else if("doubleValue"in e){const r=kt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Ad(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=pi(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(gi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?f1(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Jm(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):Te(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=dc,l=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(kt(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}po.Wt=new po;const Ol=255;function BM(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function pT(s){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const u=BM(255&r[l]);if(a+=u,u!==8)break}return a})(s);return Math.ceil(e/8)}class qM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=pT(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=pT(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Ol),this.sn(255)}_n(){this.an(Ol),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ol?(this.sn(Ol),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ol?(this.an(Ol),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class FM{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class HM{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Hu{constructor(){this.cn=new qM,this.ascending=new FM(this.cn),this.descending=new HM(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class go{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new go(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:nm(this.Tn),directionalValue:nm(this.In),orderedDocumentKey:nm(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function na(s,e){let t=s.hn-e.hn;return t!==0?t:(t=gT(s.Tn,e.Tn),t!==0?t:(t=gT(s.In,e.In),t!==0?t:ye.comparator(s.Pn,e.Pn)))}function gT(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function nm(s){return bI()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(s):s}function yT(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(s)}class _T{constructor(e){this.Vn=new yt(((t,r)=>Pt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Re(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=ey(e);if(t!==void 0&&!this.pn(t))return!1;const r=uo(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const m=this.Vn.getIterator().getNext();if(!a.has(m.field.canonicalString())){const g=r[l];if(!this.yn(m,g)||!this.wn(this.dn[u++],g))return!1}++l}for(;l<r.length;++l){const m=r[l];if(u>=this.dn.length||!this.wn(this.dn[u++],m))return!1}return!0}bn(){if(this.fn)return null;let e=new yt(Pt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Kf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Kf(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Kf(r.field,r.dir==="asc"?0:1)));return new mm(mm.UNKNOWN_ID,this.collectionId,t,Sd.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function sA(s){if(Re(s instanceof Ze||s instanceof gt,20012),s instanceof Ze){if(s instanceof w1){const t=s.value.arrayValue?.values?.map((r=>Ze.create(s.field,"==",r)))||[];return gt.create(t,"or")}return s}const e=s.filters.map((t=>sA(t)));return gt.create(e,s.op)}function GM(s){if(s.getFilters().length===0)return[];const e=_y(sA(s));return Re(iA(e),7391),gy(e)||yy(e)?[e]:e.getFilters()}function gy(s){return s instanceof Ze}function yy(s){return s instanceof gt&&b_(s)}function iA(s){return gy(s)||yy(s)||(function(t){if(t instanceof gt&&ly(t)){for(const r of t.getFilters())if(!gy(r)&&!yy(r))return!1;return!0}return!1})(s)}function _y(s){if(Re(s instanceof Ze||s instanceof gt,34018),s instanceof Ze)return s;if(s.filters.length===1)return _y(s.filters[0]);const e=s.filters.map((r=>_y(r)));let t=gt.create(e,s.op);return t=wm(t),iA(t)?t:(Re(t instanceof gt,64498),Re(fc(t),40251),Re(t.filters.length>1,57927),t.filters.reduce(((r,a)=>C_(r,a))))}function C_(s,e){let t;return Re(s instanceof Ze||s instanceof gt,38388),Re(e instanceof Ze||e instanceof gt,25473),t=s instanceof Ze?e instanceof Ze?(function(a,l){return gt.create([a,l],"and")})(s,e):bT(s,e):e instanceof Ze?bT(e,s):(function(a,l){if(Re(a.filters.length>0&&l.filters.length>0,48005),fc(a)&&fc(l))return b1(a,l.getFilters());const u=ly(a)?a:l,m=ly(a)?l:a,g=u.filters.map((y=>C_(y,m)));return gt.create(g,"or")})(s,e),wm(t)}function bT(s,e){if(fc(e))return b1(e,s.getFilters());{const t=e.filters.map((r=>C_(s,r)));return gt.create(t,"or")}}function wm(s){if(Re(s instanceof Ze||s instanceof gt,11850),s instanceof Ze)return s;const e=s.getFilters();if(e.length===1)return wm(e[0]);if(y1(s))return s;const t=e.map((a=>wm(a))),r=[];return t.forEach((a=>{a instanceof Ze?r.push(a):a instanceof gt&&(a.op===s.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:gt.create(r,s.op)}class QM{constructor(){this.Sn=new k_}addToCollectionParentIndex(e,t){return this.Sn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(wr.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class k_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new yt(We.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new yt(We.comparator)).toArray()}}const vT="IndexedDbIndexManager",Lf=new Uint8Array(0);class $M{constructor(e,t){this.databaseId=t,this.Dn=new k_,this.Cn=new vi((r=>Do(r)),((r,a)=>Jd(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:Ln(a)};return xT(e).put(l)}return F.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[zS(t),""],!1,!0);return xT(e).H(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;r.push(Vs(u.parent))}return r}))}addFieldIndex(e,t){const r=Gu(e),a=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=Ul(e);return l.next((m=>{u.put(hT(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Gu(e),a=Ul(e),l=Ll(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Gu(e),r=Ll(e),a=Ul(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return F.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new _T(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=Ll(e);let a=!0;const l=new Map;return F.forEach(this.vn(t),(u=>this.Fn(e,u).next((m=>{a&&(a=!!m),l.set(u,m)})))).next((()=>{if(a){let u=qe();const m=[];return F.forEach(l,((g,y)=>{de(vT,`Using index ${(function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map((Se=>`${Se.fieldPath}:${Se.kind}`)).join(",")}`})(g)} to execute ${Do(t)}`);const x=(function(Z,Se){const se=ey(Se);if(se===void 0)return null;for(const pe of bm(Z,se.fieldPath))switch(pe.op){case"array-contains-any":return pe.value.arrayValue.values||[];case"array-contains":return[pe.value]}return null})(y,g),_=(function(Z,Se){const se=new Map;for(const pe of uo(Se))for(const S of bm(Z,pe.fieldPath))switch(S.op){case"==":case"in":se.set(pe.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return se.set(pe.fieldPath.canonicalString(),S.value),Array.from(se.values())}return null})(y,g),E=(function(Z,Se){const se=[];let pe=!0;for(const S of uo(Se)){const N=S.kind===0?JE(Z,S.fieldPath,Z.startAt):ZE(Z,S.fieldPath,Z.startAt);se.push(N.value),pe&&(pe=N.inclusive)}return new Ea(se,pe)})(y,g),D=(function(Z,Se){const se=[];let pe=!0;for(const S of uo(Se)){const N=S.kind===0?ZE(Z,S.fieldPath,Z.endAt):JE(Z,S.fieldPath,Z.endAt);se.push(N.value),pe&&(pe=N.inclusive)}return new Ea(se,pe)})(y,g),L=this.Mn(g,y,E),R=this.Mn(g,y,D),B=this.xn(g,y,_),z=this.On(g.indexId,x,L,E.inclusive,R,D.inclusive,B);return F.forEach(z,(ne=>r.Z(ne,t.limit).next((Z=>{Z.forEach((Se=>{const se=ye.fromSegments(Se.documentKey);u.has(se)||(u=u.add(se),m.push(se))}))}))))})).next((()=>m))}return F.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=GM(gt.create(e.filters,"and")).map((r=>uy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,u,m){const g=(t!=null?t.length:1)*Math.max(r.length,l.length),y=g/(t!=null?t.length:1),x=[];for(let _=0;_<g;++_){const E=t?this.Nn(t[_/y]):Lf,D=this.Bn(e,E,r[_%y],a),L=this.Ln(e,E,l[_%y],u),R=m.map((B=>this.Bn(e,E,B,!0)));x.push(...this.createRange(D,L,R))}return x}Bn(e,t,r,a){const l=new go(e,ye.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new go(e,ye.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new _T(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const m of l)r.gn(m)&&(!u||m.fields.length>u.fields.length)&&(u=m);return u}))}getIndexType(e,t){let r=2;const a=this.vn(t);return F.forEach(a,(l=>this.Fn(e,l).next((u=>{u?r!==0&&u.fields.length<(function(g){let y=new yt(Pt.comparator),x=!1;for(const _ of g.filters)for(const E of _.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?x=!0:y=y.add(E.field));for(const _ of g.orderBy)_.field.isKeyField()||(y=y.add(_.field));return y.size+(x?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new Hu;for(const a of uo(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.ln(a.kind);po.Wt.Dt(l,u)}return r.un()}Nn(e){const t=new Hu;return po.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new Hu;return po.Wt.Dt(ko(this.databaseId,t),r.ln((function(l){const u=uo(l);return u.length===0?0:u[u.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new Hu);let l=0;for(const u of uo(e)){const m=r[l++];for(const g of a)if(this.qn(t,u.fieldPath)&&jd(m))a=this.Un(a,u,m);else{const y=g.ln(u.kind);po.Wt.Dt(m,y)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const m of a){const g=new Hu;g.seed(m.un()),po.Wt.Dt(u,g.ln(t.kind)),l.push(g)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof Ze&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Gu(e),a=Ul(e);return(t?r.H(ny,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const u=[];return F.forEach(l,(m=>a.get([m.indexId,this.uid]).next((g=>{u.push((function(x,_){const E=_?new Sd(_.sequenceNumber,new wr(Mo(_.readTime),new ye(Vs(_.documentKey)),_.largestBatchId)):Sd.empty(),D=x.fields.map((([L,R])=>new Kf(Pt.fromServerFormat(L),R)));return new mm(x.indexId,x.collectionGroup,D,E)})(m,g))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Oe(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Gu(e),l=Ul(e);return this.Wn(e).next((u=>a.H(ny,IDBKeyRange.bound(t,t)).next((m=>F.forEach(m,(g=>l.put(hT(g.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return F.forEach(t,((a,l)=>{const u=r.get(a.collectionGroup);return(u?F.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((m=>(r.set(a.collectionGroup,m),F.forEach(m,(g=>this.Qn(e,a,g).next((y=>{const x=this.Gn(l,g);return y.isEqual(x)?F.resolve():this.zn(e,l,g,y,x)})))))))}))}jn(e,t,r,a){return Ll(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return Ll(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=Ll(e);let l=new yt(na);return a.ee({index:e1,range:IDBKeyRange.only([r.indexId,this.uid,nm(this.Kn(r,t))])},((u,m)=>{l=l.add(new go(r.indexId,t,yT(m.arrayValue),yT(m.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new yt(na);const a=this.kn(t,e);if(a==null)return r;const l=ey(t);if(l!=null){const u=e.data.field(l.fieldPath);if(jd(u))for(const m of u.arrayValue.values||[])r=r.add(new go(t.indexId,e.key,this.Nn(m),a))}else r=r.add(new go(t.indexId,e.key,Lf,a));return r}zn(e,t,r,a,l){de(vT,"Updating index entries for document '%s'",t.key);const u=[];return(function(g,y,x,_,E){const D=g.getIterator(),L=y.getIterator();let R=Ml(D),B=Ml(L);for(;R||B;){let z=!1,ne=!1;if(R&&B){const Z=x(R,B);Z<0?ne=!0:Z>0&&(z=!0)}else R!=null?ne=!0:z=!0;z?(_(B),B=Ml(L)):ne?(E(R),R=Ml(D)):(R=Ml(D),B=Ml(L))}})(a,l,na,(m=>{u.push(this.jn(e,t,r,m))}),(m=>{u.push(this.Hn(e,t,r,m))})),F.waitFor(u)}Wn(e){let t=1;return Ul(e).ee({index:ZS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,m)=>na(u,m))).filter(((u,m,g)=>!m||na(u,g[m-1])!==0));const a=[];a.push(e);for(const u of r){const m=na(u,e),g=na(u,t);if(m===0)a[0]=e.En();else if(m>0&&g<0)a.push(u),a.push(u.En());else if(g>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Jn(a[u],a[u+1]))return[];const m=a[u].An(this.uid,Lf,ye.empty()),g=a[u+1].An(this.uid,Lf,ye.empty());l.push(IDBKeyRange.bound(m,g))}return l}Jn(e,t){return na(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(wT)}getMinOffset(e,t){return F.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||Te(44426))))).next(wT)}}function xT(s){return mn(s,Cd)}function Ll(s){return mn(s,hd)}function Gu(s){return mn(s,m_)}function Ul(s){return mn(s,dd)}function wT(s){Re(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;d_(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new wr(e.readTime,e.documentKey,t)}const ET={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aA=41943040;class Mn{static withCacheSize(e){return new Mn(e,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function oA(s,e,t){const r=s.store(Xr),a=s.store(oc),l=[],u=IDBKeyRange.only(t.batchId);let m=0;const g=r.ee({range:u},((x,_,E)=>(m++,E.delete())));l.push(g.next((()=>{Re(m===1,47070,{batchId:t.batchId})})));const y=[];for(const x of t.mutations){const _=WS(e,x.key.path,t.batchId);l.push(a.delete(_)),y.push(x.key)}return F.waitFor(l).next((()=>y))}function Em(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw Te(14731);e=s.noDocument}return JSON.stringify(e).length}Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(aA,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);class np{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){Re(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new np(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ra(e).ee({index:vo,range:r},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=Gl(e),u=ra(e);return u.add({}).next((m=>{Re(typeof m=="number",49019);const g=new T_(m,t,r,a),y=(function(D,L,R){const B=R.baseMutations.map((ne=>Md(D.yt,ne))),z=R.mutations.map((ne=>Md(D.yt,ne)));return{userId:L,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:B,mutations:z}})(this.serializer,this.userId,g),x=[];let _=new yt(((E,D)=>Oe(E.canonicalString(),D.canonicalString())));for(const E of a){const D=WS(this.userId,E.key.path,m);_=_.add(E.key.path.popLast()),x.push(u.put(y)),x.push(l.put(D,w4))}return _.forEach((E=>{x.push(this.indexManager.addToCollectionParentIndex(e,E))})),e.addOnCommittedListener((()=>{this.Zn[m]=g.keys()})),F.waitFor(x).next((()=>g))}))}lookupMutationBatch(e,t){return ra(e).get(t).next((r=>r?(Re(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),mo(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?F.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return ra(e).ee({index:vo,range:a},((u,m,g)=>{m.userId===this.userId&&(Re(m.batchId>=r,47524,{Yn:r}),l=mo(this.serializer,m)),g.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=fa;return ra(e).ee({index:vo,range:t,reverse:!0},((a,l,u)=>{r=l.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,fa],[this.userId,Number.POSITIVE_INFINITY]);return ra(e).H(vo,t).next((r=>r.map((a=>mo(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Yf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Gl(e).ee({range:a},((u,m,g)=>{const[y,x,_]=u,E=Vs(x);if(y===this.userId&&t.path.isEqual(E))return ra(e).get(_).next((D=>{if(!D)throw Te(61480,{er:u,batchId:_});Re(D.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:D.userId,batchId:_}),l.push(mo(this.serializer,D))}));g.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yt(Oe);const a=[];return t.forEach((l=>{const u=Yf(this.userId,l.path),m=IDBKeyRange.lowerBound(u),g=Gl(e).ee({range:m},((y,x,_)=>{const[E,D,L]=y,R=Vs(D);E===this.userId&&l.path.isEqual(R)?r=r.add(L):_.done()}));a.push(g)})),F.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=Yf(this.userId,r),u=IDBKeyRange.lowerBound(l);let m=new yt(Oe);return Gl(e).ee({range:u},((g,y,x)=>{const[_,E,D]=g,L=Vs(E);_===this.userId&&r.isPrefixOf(L)?L.length===a&&(m=m.add(D)):x.done()})).next((()=>this.tr(e,m)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(ra(e).get(l).next((u=>{if(u===null)throw Te(35274,{batchId:l});Re(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),r.push(mo(this.serializer,u))})))})),F.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return oA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),F.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return F.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return Gl(e).ee({range:r},((l,u,m)=>{if(l[0]===this.userId){const g=Vs(l[1]);a.push(g)}else m.done()})).next((()=>{Re(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return lA(e,this.userId,t)}ir(e){return cA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:fa,lastStreamToken:""}))}}function lA(s,e,t){const r=Yf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return Gl(s).ee({range:l,Y:!0},((m,g,y)=>{const[x,_,E]=m;x===e&&_===a&&(u=!0),y.done()})).next((()=>u))}function ra(s){return mn(s,Xr)}function Gl(s){return mn(s,oc)}function cA(s){return mn(s,Nd)}class Oo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Oo(0)}static ar(){return new Oo(-1)}}class KM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new Oo(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>ke.fromTimestamp(new dt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>zl(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(Re(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return zl(e).ee(((u,m)=>{const g=td(m);g.sequenceNumber<=t&&r.get(g.targetId)===null&&(a++,l.push(this.removeTargetData(e,g)))})).next((()=>F.waitFor(l))).next((()=>a))}forEachTarget(e,t){return zl(e).ee(((r,a)=>{const l=td(a);t(l)}))}ur(e){return TT(e).get(ym).next((t=>(Re(t!==null,2888),t)))}cr(e,t){return TT(e).put(ym,t)}lr(e,t){return zl(e).put(rA(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Do(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return zl(e).ee({range:a,index:JS},((u,m,g)=>{const y=td(m);Jd(t,y.target)&&(l=y,g.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=aa(e);return t.forEach((u=>{const m=Ln(u.path);a.push(l.put({targetId:r,path:m})),a.push(this.referenceDelegate.addReference(e,r,u))})),F.waitFor(a)}removeMatchingKeys(e,t,r){const a=aa(e);return F.forEach(t,(l=>{const u=Ln(l.path);return F.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=aa(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=aa(e);let l=qe();return a.ee({range:r,Y:!0},((u,m,g)=>{const y=Vs(u[1]),x=new ye(y);l=l.add(x)})).next((()=>l))}containsKey(e,t){const r=Ln(t.path),a=IDBKeyRange.bound([r],[zS(r)],!1,!0);let l=0;return aa(e).ee({index:f_,Y:!0,range:a},(([u,m],g,y)=>{u!==0&&(l++,y.done())})).next((()=>l>0))}At(e,t){return zl(e).get(t).next((r=>r?td(r):null))}}function zl(s){return mn(s,lc)}function TT(s){return mn(s,Ao)}function aa(s){return mn(s,cc)}const IT="LruGarbageCollector",YM=1048576;function ST([s,e],[t,r]){const a=Oe(s,t);return a===0?Oe(e,r):a}class WM{constructor(e){this.Pr=e,this.buffer=new yt(ST),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ST(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){de(IT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ra(t)?de(IT,"Ignoring IndexedDB error during garbage collection: ",t):await Na(t)}await this.Ar(3e5)}))}}class XM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return F.resolve(ir.ce);const r=new WM(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(ET)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ET):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,u,m,g,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(r=_,m=Date.now(),this.removeTargets(e,r,t)))).next((_=>(l=_,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(y=Date.now(),Bl()<=Ye.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-x}ms
	Determined least recently used ${a} in `+(m-u)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${_} documents in `+(y-g)+`ms
Total Duration: ${y-x}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function dA(s,e){return new XM(s,e)}class JM{constructor(e,t){this.db=e,this.garbageCollector=dA(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return Uf(e,r)}removeReference(e,t,r){return Uf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Uf(e,t)}wr(e,t){return(function(a,l){let u=!1;return cA(a).te((m=>lA(a,m,l).next((g=>(g&&(u=!0),F.resolve(!g)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((u,m)=>{if(m<=t){const g=this.wr(e,u).next((y=>{if(!y)return l++,r.getEntry(e,u).next((()=>(r.removeEntry(u,ke.min()),aa(e).delete((function(_){return[0,Ln(_.path)]})(u)))))}));a.push(g)}})).next((()=>F.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Uf(e,t)}yr(e,t){const r=aa(e);let a,l=ir.ce;return r.ee({index:f_},(([u,m],{path:g,sequenceNumber:y})=>{u===0?(l!==ir.ce&&t(new ye(Vs(a)),l),l=y,a=g):l=ir.ce})).next((()=>{l!==ir.ce&&t(new ye(Vs(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Uf(s,e){return aa(s).put((function(r,a){return{targetId:0,path:Ln(r.path),sequenceNumber:a}})(e,s.currentSequenceNumber))}class hA{constructor(){this.changes=new vi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ZM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lo(e).put(r)}removeEntry(e,t,r){return lo(e).delete((function(l,u){const m=l.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],xm(u),m[m.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=Nt.newInvalidDocument(t);return lo(e).ee({index:Wf,range:IDBKeyRange.only(Qu(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:Nt.newInvalidDocument(t)};return lo(e).ee({index:Wf,range:IDBKeyRange.only(Qu(t))},((a,l)=>{r={document:this.Sr(t,l),size:Em(l)}})).next((()=>r))}getEntries(e,t){let r=or();return this.Cr(e,t,((a,l)=>{const u=this.Sr(a,l);r=r.insert(a,u)})).next((()=>r))}vr(e,t){let r=or(),a=new It(ye.comparator);return this.Cr(e,t,((l,u)=>{const m=this.Sr(l,u);r=r.insert(l,m),a=a.insert(l,Em(u))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return F.resolve();let a=new yt(RT);t.forEach((g=>a=a.add(g)));const l=IDBKeyRange.bound(Qu(a.first()),Qu(a.last())),u=a.getIterator();let m=u.getNext();return lo(e).ee({index:Wf,range:l},((g,y,x)=>{const _=ye.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;m&&RT(m,_)<0;)r(m,null),m=u.getNext();m&&m.isEqual(_)&&(r(m,y),m=u.hasNext()?u.getNext():null),m?x.j(Qu(m)):x.done()})).next((()=>{for(;m;)r(m,null),m=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,m=[u.popLast().toArray(),u.lastSegment(),xm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lo(e).H(IDBKeyRange.bound(m,g,!0)).next((y=>{l?.incrementDocumentReadCount(y.length);let x=or();for(const _ of y){const E=this.Sr(ye.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);E.isFoundDocument()&&(eh(t,E)||a.has(E.key))&&(x=x.insert(E.key,E))}return x}))}getAllFromCollectionGroup(e,t,r,a){let l=or();const u=NT(t,r),m=NT(t,wr.max());return lo(e).ee({index:XS,range:IDBKeyRange.bound(u,m,!0)},((g,y,x)=>{const _=this.Sr(ye.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);l=l.insert(_.key,_),l.size===a&&x.done()})).next((()=>l))}newChangeBuffer(e){return new eO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return AT(e).get(ty).next((t=>(Re(!!t,20021),t)))}br(e,t){return AT(e).put(ty,t)}Sr(e,t){if(t){const r=LM(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ke.min())))return r}return Nt.newInvalidDocument(e)}}function fA(s){return new ZM(s)}class eO extends hA{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new vi((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new yt(((l,u)=>Oe(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const m=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,m.readTime)),u.isValidDocument()){const g=uT(this.Mr.serializer,u);a=a.add(l.path.popLast());const y=Em(g);r+=y-m.size,t.push(this.Mr.addEntry(e,l,g))}else if(r-=m.size,this.trackRemovals){const g=uT(this.Mr.serializer,u.convertToNoDocument(ke.min()));t.push(this.Mr.addEntry(e,l,g))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),F.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,u)=>{this.Or.set(l,{size:u,readTime:r.get(l).readTime})})),r)))}}function AT(s){return mn(s,Rd)}function lo(s){return mn(s,gm)}function Qu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function NT(s,e){const t=e.documentKey.path.toArray();return[s,xm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function RT(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Oe(t[l],r[l]),a)return a;return a=Oe(t.length,r.length),a||(a=Oe(t[t.length-2],r[r.length-2]),a||Oe(t[t.length-1],r[r.length-1]))}class tO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class mA{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&pd(r.mutation,a,ar.empty(),dt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,qe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=qe()){const a=Ms();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let u=Zu();return l.forEach(((m,g)=>{u=u.insert(m,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Ms();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,qe())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,m)=>{t.set(u,m)}))}))}computeViews(e,t,r,a){let l=or();const u=md(),m=(function(){return md()})();return t.forEach(((g,y)=>{const x=r.get(y.key);a.has(y.key)&&(x===void 0||x.mutation instanceof xi)?l=l.insert(y.key,y):x!==void 0?(u.set(y.key,x.mutation.getFieldMask()),pd(x.mutation,y,x.mutation.getFieldMask(),dt.now())):u.set(y.key,ar.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,x)=>u.set(y,x))),t.forEach(((y,x)=>m.set(y,new tO(x,u.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=md();let a=new It(((u,m)=>u-m)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const m of u)m.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let x=r.get(g)||ar.empty();x=m.applyToLocalView(y,x),r.set(g,x);const _=(a.get(m.batchId)||qe()).add(g);a=a.insert(m.batchId,_)}))})).next((()=>{const u=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,x=g.value,_=R1();x.forEach((E=>{if(!l.has(E)){const D=M1(t.get(E),r.get(E));D!==null&&_.set(E,D),l=l.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,_))}return F.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return aM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):v_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):F.resolve(Ms());let m=ac,g=l;return u.next((y=>F.forEach(y,((x,_)=>(m<_.largestBatchId&&(m=_.largestBatchId),l.get(x)?F.resolve():this.remoteDocumentCache.getEntry(e,x).next((E=>{g=g.insert(x,E)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,qe()))).next((x=>({batchId:m,changes:N1(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((r=>{let a=Zu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=Zu();return this.indexManager.getCollectionParents(e,l).next((m=>F.forEach(m,(g=>{const y=(function(_,E){return new bi(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,r,a).next((x=>{x.forEach(((_,E)=>{u=u.insert(_,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((u=>{l.forEach(((g,y)=>{const x=y.getKey();u.get(x)===null&&(u=u.insert(x,Nt.newInvalidDocument(x)))}));let m=Zu();return u.forEach(((g,y)=>{const x=l.get(g);x!==void 0&&pd(x.mutation,y,ar.empty(),dt.now()),eh(t,y)&&(m=m.insert(g,y))})),m}))}}class nO{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return F.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Yt(a.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:R_(a.bundledQuery),readTime:Yt(a.readTime)}})(t)),F.resolve()}}class rO{constructor(){this.overlays=new It(ye.comparator),this.Lr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ms();return F.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),F.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){const a=Ms(),l=t.length+1,u=new ye(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>r&&a.set(g.getKey(),g)}return F.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new It(((y,x)=>y-x));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let x=l.get(y.largestBatchId);x===null&&(x=Ms(),l=l.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const m=Ms(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>m.set(y,x))),!(m.size()>=a)););return F.resolve(m)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new S_(t,r));let l=this.Lr.get(t);l===void 0&&(l=qe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}class sO{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}class D_{constructor(){this.kr=new yt(_n.Kr),this.qr=new yt(_n.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new _n(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new _n(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new ye(new We([])),r=new _n(t,e),a=new _n(t,e+1),l=[];return this.qr.forEachInRange([r,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ye(new We([])),r=new _n(t,e),a=new _n(t,e+1);let l=qe();return this.qr.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new _n(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class _n{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ye.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}class iO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new yt(_n.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new T_(l,t,r,a);this.mutationQueue.push(u);for(const m of a)this.Jr=this.Jr.add(new _n(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return F.resolve(u)}lookupMutationBatch(e,t){return F.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return F.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?fa:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new _n(t,0),a=new _n(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(u=>{const m=this.Zr(u.Hr);l.push(m)})),F.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yt(Oe);return t.forEach((a=>{const l=new _n(a,0),u=new _n(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(m=>{r=r.add(m.Hr)}))})),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ye.isDocumentKey(l)||(l=l.child(""));const u=new _n(new ye(l),0);let m=new yt(Oe);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===a&&(m=m.add(g.Hr)),!0)}),u),F.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Re(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(t.mutations,(a=>{const l=new _n(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new _n(t,0),a=this.Jr.firstAfterOrEqual(r);return F.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class aO{constructor(e){this.ti=e,this.docs=(function(){return new It(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(t))}getEntries(e,t){let r=or();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Nt.newInvalidDocument(a))})),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=or();const u=t.path,m=new ye(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||d_(GS(x),r)<=0||(a.has(x.key)||eh(t,x))&&(l=l.insert(x.key,x.mutableCopy()))}return F.resolve(l)}getAllFromCollectionGroup(e,t,r,a){Te(9500)}ni(e,t){return F.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new oO(this)}getSize(e){return F.resolve(this.size)}}class oO extends hA{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),F.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class lO{constructor(e){this.persistence=e,this.ri=new vi((t=>Do(t)),Jd),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.ii=0,this.si=new D_,this.targetCount=0,this.oi=Oo._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),F.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.lr(t),F.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((u,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),F.waitFor(l).next((()=>a))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),F.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.si.containsKey(t))}}class j_{constructor(e,t){this._i={},this.overlays={},this.ai=new ir(0),this.ui=!1,this.ui=!0,this.ci=new sO,this.referenceDelegate=e(this),this.li=new lO(this),this.indexManager=new QM,this.remoteDocumentCache=(function(a){return new aO(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new nA(t),this.Pi=new nO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new iO(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){de("MemoryPersistence","Starting transaction:",e);const a=new cO(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return F.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class cO extends $S{constructor(e){super(),this.currentSequenceNumber=e}}class rp{constructor(e){this.persistence=e,this.Ri=new D_,this.Ai=null}static Vi(e){return new rp(e)}get di(){if(this.Ai)return this.Ai;throw Te(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,(r=>{const a=ye.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,ke.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Tm{constructor(e,t){this.persistence=e,this.fi=new vi((r=>Ln(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=dA(this,t)}static Vi(e,t){return new Tm(e,t)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return F.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?F.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((m=>{m||(r++,l.removeEntry(u,ke.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),F.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jf(e.data.value)),t}wr(e,t,r){return F.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return F.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class uO{constructor(e){this.serializer=e}k(e,t,r,a){const l=new Qm("createOrUpgrade",t);r<1&&a>=1&&((function(g){g.createObjectStore(Xd)})(e),(function(g){g.createObjectStore(Nd,{keyPath:x4}),g.createObjectStore(Xr,{keyPath:zE,autoIncrement:!0}).createIndex(vo,BE,{unique:!0}),g.createObjectStore(oc)})(e),CT(e),(function(g){g.createObjectStore(ho)})(e));let u=F.resolve();return r<3&&a>=3&&(r!==0&&((function(g){g.deleteObjectStore(cc),g.deleteObjectStore(lc),g.deleteObjectStore(Ao)})(e),CT(e)),u=u.next((()=>(function(g){const y=g.store(Ao),x={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ke.min().toTimestamp(),targetCount:0};return y.put(ym,x)})(l)))),r<4&&a>=4&&(r!==0&&(u=u.next((()=>(function(g,y){return y.store(Xr).H().next((_=>{g.deleteObjectStore(Xr),g.createObjectStore(Xr,{keyPath:zE,autoIncrement:!0}).createIndex(vo,BE,{unique:!0});const E=y.store(Xr),D=_.map((L=>E.put(L)));return F.waitFor(D)}))})(e,l)))),u=u.next((()=>{(function(g){g.createObjectStore(uc,{keyPath:C4})})(e)}))),r<5&&a>=5&&(u=u.next((()=>this.gi(l)))),r<6&&a>=6&&(u=u.next((()=>((function(g){g.createObjectStore(Rd)})(e),this.pi(l))))),r<7&&a>=7&&(u=u.next((()=>this.yi(l)))),r<8&&a>=8&&(u=u.next((()=>this.wi(e,l)))),r<9&&a>=9&&(u=u.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(u=u.next((()=>this.bi(l)))),r<11&&a>=11&&(u=u.next((()=>{(function(g){g.createObjectStore($m,{keyPath:k4})})(e),(function(g){g.createObjectStore(Km,{keyPath:D4})})(e)}))),r<12&&a>=12&&(u=u.next((()=>{(function(g){const y=g.createObjectStore(Ym,{keyPath:U4});y.createIndex(ry,z4,{unique:!1}),y.createIndex(t1,B4,{unique:!1})})(e)}))),r<13&&a>=13&&(u=u.next((()=>(function(g){const y=g.createObjectStore(gm,{keyPath:E4});y.createIndex(Wf,T4),y.createIndex(XS,I4)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(ho)))),r<14&&a>=14&&(u=u.next((()=>this.Di(e,l)))),r<15&&a>=15&&(u=u.next((()=>(function(g){g.createObjectStore(m_,{keyPath:j4,autoIncrement:!0}).createIndex(ny,P4,{unique:!1}),g.createObjectStore(dd,{keyPath:V4}).createIndex(ZS,M4,{unique:!1}),g.createObjectStore(hd,{keyPath:O4}).createIndex(e1,L4,{unique:!1})})(e)))),r<16&&a>=16&&(u=u.next((()=>{t.objectStore(dd).clear()})).next((()=>{t.objectStore(hd).clear()}))),r<17&&a>=17&&(u=u.next((()=>{(function(g){g.createObjectStore(p_,{keyPath:q4})})(e)}))),r<18&&a>=18&&bI()&&(u=u.next((()=>{t.objectStore(dd).clear()})).next((()=>{t.objectStore(hd).clear()}))),u}pi(e){let t=0;return e.store(ho).ee(((r,a)=>{t+=Em(a)})).next((()=>{const r={byteSize:t};return e.store(Rd).put(ty,r)}))}gi(e){const t=e.store(Nd),r=e.store(Xr);return t.H().next((a=>F.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,fa],[l.userId,l.lastAcknowledgedBatchId]);return r.H(vo,u).next((m=>F.forEach(m,(g=>{Re(g.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const y=mo(this.serializer,g);return oA(e,l.userId,y).next((()=>{}))}))))}))))}yi(e){const t=e.store(cc),r=e.store(ho);return e.store(Ao).get(ym).next((a=>{const l=[];return r.ee(((u,m)=>{const g=new We(u),y=(function(_){return[0,Ln(_)]})(g);l.push(t.get(y).next((x=>x?F.resolve():(_=>t.put({targetId:0,path:Ln(_),sequenceNumber:a.highestListenSequenceNumber}))(g))))})).next((()=>F.waitFor(l)))}))}wi(e,t){e.createObjectStore(Cd,{keyPath:R4});const r=t.store(Cd),a=new k_,l=u=>{if(a.add(u)){const m=u.lastSegment(),g=u.popLast();return r.put({collectionId:m,parent:Ln(g)})}};return t.store(ho).ee({Y:!0},((u,m)=>{const g=new We(u);return l(g.popLast())})).next((()=>t.store(oc).ee({Y:!0},(([u,m,g],y)=>{const x=Vs(m);return l(x.popLast())}))))}bi(e){const t=e.store(lc);return t.ee(((r,a)=>{const l=td(a),u=rA(this.serializer,l);return t.put(u)}))}Si(e,t){const r=t.store(ho),a=[];return r.ee(((l,u)=>{const m=t.store(gm),g=(function(_){return _.document?new ye(We.fromString(_.document.name).popFirst(5)):_.noDocument?ye.fromSegments(_.noDocument.path):_.unknownDocument?ye.fromSegments(_.unknownDocument.path):Te(36783)})(u).path.toArray(),y={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(m.put(y))})).next((()=>F.waitFor(a)))}Di(e,t){const r=t.store(Xr),a=fA(this.serializer),l=new j_(rp.Vi,this.serializer.yt);return r.H().next((u=>{const m=new Map;return u.forEach((g=>{let y=m.get(g.userId)??qe();mo(this.serializer,g).keys().forEach((x=>y=y.add(x))),m.set(g.userId,y)})),F.forEach(m,((g,y)=>{const x=new bn(y),_=tp.wt(this.serializer,x),E=l.getIndexManager(x),D=np.wt(x,this.serializer,E,l.referenceDelegate);return new mA(a,D,_,E).recalculateAndSaveOverlaysForDocumentKeys(new sy(t,ir.ce),g).next()}))}))}}function CT(s){s.createObjectStore(cc,{keyPath:A4}).createIndex(f_,N4,{unique:!0}),s.createObjectStore(lc,{keyPath:"targetId"}).createIndex(JS,S4,{unique:!0}),s.createObjectStore(Ao)}const sa="IndexedDbPersistence",k0=18e5,D0=5e3,j0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pA="main";class P_{constructor(e,t,r,a,l,u,m,g,y,x,_=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=u,this.document=m,this.Fi=y,this.Mi=x,this.xi=_,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=E=>Promise.resolve(),!P_.v())throw new le(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JM(this,a),this.Ki=t+pA,this.serializer=new nA(g),this.qi=new Ls(this.Ki,this.xi,new uO(this.serializer)),this.ci=new zM,this.li=new KM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fA(this.serializer),this.Pi=new UM,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,x===!1&&Kt(sa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(Y.FAILED_PRECONDITION,j0);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new ir(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>zf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Ra(e))return de(sa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return de(sa,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return $u(e).get(Vl).next((t=>F.resolve(this.Xi(t))))}Yi(e){return zf(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,k0)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=mn(t,uc);return r.H().next((a=>{const l=this.ns(a,k0),u=a.filter((m=>l.indexOf(m)===-1));return F.forEach(u,(m=>r.delete(m.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?F.resolve(!0):$u(e).get(Vl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,D0)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new le(Y.FAILED_PRECONDITION,j0);return!1}}return!(!this.networkEnabled||!this.inForeground)||zf(e).H().next((r=>this.ns(r,D0).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,m=this.networkEnabled===a.networkEnabled;if(l||u&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&de(sa,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Xd,uc],(e=>{const t=new sy(e,ir.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>zf(e).H().next((t=>this.ns(t,k0).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return np.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $M(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return tp.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){de(sa,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(g){return g===18?G4:g===17?i1:g===16?H4:g===15?g_:g===14?s1:g===13?r1:g===12?F4:g===11?n1:void Te(60245)})(this.xi);let u;return this.qi.runTransaction(e,a,l,(m=>(u=new sy(m,this.ai?this.ai.next():ir.ce),t==="readwrite-primary"?this.ji(u).next((g=>!!g||this.Hi(u))).next((g=>{if(!g)throw Kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new le(Y.FAILED_PRECONDITION,QS);return r(u)})).next((g=>this.Zi(u).next((()=>g)))):this.Ps(u).next((()=>r(u)))))).then((m=>(u.raiseOnCommittedEvent(),m)))}Ps(e){return $u(e).get(Vl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,D0)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le(Y.FAILED_PRECONDITION,j0)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $u(e).put(Vl,t)}static v(){return Ls.v()}Ji(e){const t=$u(e);return t.get(Vl).next((r=>this.Xi(r)?(de(sa,"Releasing primary lease."),t.delete(Vl)):F.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Kt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;_I()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return de(sa,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Kt(sa,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Kt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $u(s){return mn(s,Xd)}function zf(s){return mn(s,uc)}function V_(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class M_{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=qe(),a=qe();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new M_(e,t.fromCache,r,a)}}class dO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return _I()?8:KS(Ot())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new dO;return this.ys(e,t,u).next((m=>{if(l.result=m,this.As)return this.ws(e,t,u,m.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(Bl()<=Ye.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ql(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Bl()<=Ye.DEBUG&&de("QueryEngine","Query:",ql(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(Bl()<=Ye.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ql(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$n(t))):F.resolve())}gs(e,t){if(eT(t))return F.resolve(null);let r=$n(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=vm(t,null,"F"),r=$n(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=qe(...l);return this.fs.getDocuments(e,u).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const y=this.bs(t,m);return this.Ss(t,y,u,g.readTime)?this.gs(e,vm(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,r,a){return eT(t)||a.isEqual(ke.min())?F.resolve(null):this.fs.getDocuments(e,r).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,r,a)?F.resolve(null):(Bl()<=Ye.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ql(t)),this.Ds(e,u,t,HS(a,ac)).next((m=>m)))}))}bs(e,t){let r=new yt(S1(e));return t.forEach(((a,l)=>{eh(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return Bl()<=Ye.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ql(t)),this.fs.getDocumentsMatchingQuery(e,t,wr.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const O_="LocalStore",hO=3e8;class fO{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new It(Oe),this.Fs=new vi((l=>Do(l)),Jd),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function yA(s,e,t,r){return new fO(s,e,t,r)}async function _A(s,e){const t=xe(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],m=[];let g=qe();for(const y of a){u.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of l){m.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return t.localDocuments.getDocuments(r,g).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:m})))}))}))}function mO(s,e){const t=xe(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,x){const _=y.batch,E=_.keys();let D=F.resolve();return E.forEach((L=>{D=D.next((()=>x.getEntry(g,L))).next((R=>{const B=y.docVersions.get(L);Re(B!==null,48541),R.version.compareTo(B)<0&&(_.applyToRemoteDocument(R,y),R.isValidDocument()&&(R.setReadTime(y.commitVersion),x.addEntry(R)))}))})),D.next((()=>m.mutationQueue.removeMutationBatch(g,_)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=qe();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function bA(s){const e=xe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function pO(s,e){const t=xe(s),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const m=[];e.targetChanges.forEach(((x,_)=>{const E=a.get(_);if(!E)return;m.push(t.li.removeMatchingKeys(l,x.removedDocuments,_).next((()=>t.li.addMatchingKeys(l,x.addedDocuments,_))));let D=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?D=D.withResumeToken(qt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):x.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(x.resumeToken,r)),a=a.insert(_,D),(function(R,B,z){return R.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=hO?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(E,D,x)&&m.push(t.li.updateTargetData(l,D))}));let g=or(),y=qe();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))})),m.push(vA(l,u,e.documentUpdates).next((x=>{g=x.Bs,y=x.Ls}))),!r.isEqual(ke.min())){const x=t.li.getLastRemoteSnapshotVersion(l).next((_=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));m.push(x)}return F.waitFor(m).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.vs=a,l)))}function vA(s,e,t){let r=qe(),a=qe();return t.forEach((l=>r=r.add(l))),e.getEntries(s,r).next((l=>{let u=or();return t.forEach(((m,g)=>{const y=l.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(ke.min())?(e.removeEntry(m,g.readTime),u=u.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(m,g)):de(O_,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{Bs:u,Ls:a}}))}function gO(s,e){const t=xe(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=fa),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function yc(s,e){const t=xe(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,F.resolve(a)):t.li.allocateTargetId(r).next((u=>(a=new di(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function _c(s,e,t){const r=xe(s),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Ra(u))throw u;de(O_,`Failed to update sequence numbers for target ${e}: ${u}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function Im(s,e,t){const r=xe(s);let a=ke.min(),l=qe();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,x){const _=xe(g),E=_.Fs.get(x);return E!==void 0?F.resolve(_.vs.get(E)):_.li.getTargetData(y,x)})(r,u,$n(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(u,m.targetId).next((g=>{l=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?a:ke.min(),t?l:qe()))).next((m=>(EA(r,I1(e),m),{documents:m,ks:l})))))}function xA(s,e){const t=xe(s),r=xe(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((u=>u?u.target:null))))}function wA(s,e){const t=xe(s),r=t.Ms.get(e)||ke.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,HS(r,ac),Number.MAX_SAFE_INTEGER))).then((a=>(EA(t,e,a),a)))}function EA(s,e,t){let r=s.Ms.get(e)||ke.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),s.Ms.set(e,r)}async function yO(s,e,t,r){const a=xe(s);let l=qe(),u=or();for(const y of t){const x=e.Ks(y.metadata.name);y.document&&(l=l.add(x));const _=e.qs(y);_.setReadTime(e.Us(y.metadata.readTime)),u=u.insert(x,_)}const m=a.xs.newChangeBuffer({trackRemovals:!0}),g=await yc(a,(function(x){return $n(Cc(We.fromString(`__bundle__/docs/${x}`)))})(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",(y=>vA(y,m,u).next((x=>(m.apply(y),x))).next((x=>a.li.removeMatchingKeysForTargetId(y,g.targetId).next((()=>a.li.addMatchingKeys(y,l,g.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(y,x.Bs,x.Ls))).next((()=>x.Bs))))))}async function _O(s,e,t=qe()){const r=await yc(s,$n(R_(e.bundledQuery))),a=xe(s);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const u=Yt(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return a.Pi.saveNamedQuery(l,e);const m=r.withResumeToken(qt.EMPTY_BYTE_STRING,u);return a.vs=a.vs.insert(m.targetId,m),a.li.updateTargetData(l,m).next((()=>a.li.removeMatchingKeysForTargetId(l,r.targetId))).next((()=>a.li.addMatchingKeys(l,t,r.targetId))).next((()=>a.Pi.saveNamedQuery(l,e)))}))}const TA="firestore_clients";function kT(s,e){return`${TA}_${s}_${e}`}const IA="firestore_mutations";function DT(s,e,t){let r=`${IA}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const SA="firestore_targets";function P0(s,e){return`${SA}_${s}_${e}`}const Rs="SharedClientState";class Sm{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new le(a.error.code,a.error.message))),u?new Sm(e,t,a.state,l):(Kt(Rs,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new le(r.error.code,r.error.message))),l?new gd(e,r.state,a):(Kt(Rs,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Am{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=x_();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=YS(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new Am(e,l):(Kt(Rs,`Failed to parse client data for instance '${e}': ${t}`),null)}}class L_{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new L_(t.clientId,t.onlineState):(Kt(Rs,`Failed to parse online state: ${e}`),null)}}class by{constructor(){this.activeTargetIds=x_()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class V0{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new It(Oe),this.started=!1,this.Zs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=kT(this.persistenceKey,this.zs),this.Ys=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new by),this.eo=new RegExp(`^${TA}_${u}_([^_]*)$`),this.no=new RegExp(`^${IA}_${u}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${SA}_${u}_(\\d+)$`),this.io=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this.so=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(kT(this.persistenceKey,r));if(a){const l=Am.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(P0(this.persistenceKey,e));if(a){const l=gd.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(P0(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return de(Rs,"READ",e,t),t}setItem(e,t){de(Rs,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){de(Rs,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(de(Rs,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let u=ir.ce;if(l!=null)try{const m=JSON.parse(l);Re(typeof m=="number",30636,{yo:l}),u=m}catch(m){Kt(Rs,"Failed to read sequence number from WebStorage",m)}return u})(t.newValue);r!==ir.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new Sm(this.currentUser,e,t,r),l=DT(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=DT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=P0(this.persistenceKey,e),l=new gd(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return Am.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Sm.$s(new bn(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return gd.$s(a,t)}_o(e){return L_.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);de(Rs,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),u=[],m=[];return l.forEach((g=>{a.has(g)||u.push(g)})),a.forEach((g=>{l.has(g)||m.push(g)})),this.syncEngine.Co(u,m).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=x_();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class AA{constructor(){this.vo=new by,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new by,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bO{Mo(e){}shutdown(){}}const jT="ConnectivityMonitor";class PT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){de(jT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){de(jT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Bf=null;function vy(){return Bf===null?Bf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bf++,"0x"+Bf.toString(16)}const M0="RestConnection",vO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class xO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===iy?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const u=vy(),m=this.Qo(e,t.toUriEncodedString());de(M0,`Sending RPC '${e}' ${u}:`,m,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,a,l);const{host:y}=new URL(m),x=Tc(y);return this.zo(e,m,g,r,x).then((_=>(de(M0,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw qs(M0,`RPC '${e}' ${u} failed with error: `,_,"url: ",m,"request:",r),_}))}jo(e,t,r,a,l,u){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Rc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=vO[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class wO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Vn="WebChannelConnection",Ku=(s,e,t)=>{s.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Jl extends xO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Jl.c_){const e=MS();Ku(e,VS.STAT_EVENT,(t=>{t.stat===J0.PROXY?de(Vn,"STAT_EVENT: detected buffering proxy"):t.stat===J0.NOPROXY&&de(Vn,"STAT_EVENT: detected no buffering proxy")})),Jl.c_=!0}}zo(e,t,r,a,l){const u=vy();return new Promise(((m,g)=>{const y=new jS;y.setWithCredentials(!0),y.listenOnce(PS.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case $f.NO_ERROR:const _=y.getResponseJson();de(Vn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),m(_);break;case $f.TIMEOUT:de(Vn,`RPC '${e}' ${u} timed out`),g(new le(Y.DEADLINE_EXCEEDED,"Request time out"));break;case $f.HTTP_ERROR:const E=y.getStatus();if(de(Vn,`RPC '${e}' ${u} failed with status:`,E,"response text:",y.getResponseText()),E>0){let D=y.getResponseJson();Array.isArray(D)&&(D=D[0]);const L=D?.error;if(L&&L.status&&L.message){const R=(function(z){const ne=z.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(ne)>=0?ne:Y.UNKNOWN})(L.status);g(new le(R,L.message))}else g(new le(Y.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new le(Y.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{de(Vn,`RPC '${e}' ${u} completed.`)}}));const x=JSON.stringify(a);de(Vn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",x,r,15)}))}T_(e,t,r){const a=vy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const y=l.join("");de(Vn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const x=u.createWebChannel(y,m);this.I_(x);let _=!1,E=!1;const D=new wO({Ho:L=>{E?de(Vn,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(_||(de(Vn,`Opening RPC '${e}' stream ${a} transport.`),x.open(),_=!0),de(Vn,`RPC '${e}' stream ${a} sending:`,L),x.send(L))},Jo:()=>x.close()});return Ku(x,Ju.EventType.OPEN,(()=>{E||(de(Vn,`RPC '${e}' stream ${a} transport opened.`),D.i_())})),Ku(x,Ju.EventType.CLOSE,(()=>{E||(E=!0,de(Vn,`RPC '${e}' stream ${a} transport closed`),D.o_(),this.E_(x))})),Ku(x,Ju.EventType.ERROR,(L=>{E||(E=!0,qs(Vn,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),D.o_(new le(Y.UNAVAILABLE,"The operation could not be completed")))})),Ku(x,Ju.EventType.MESSAGE,(L=>{if(!E){const R=L.data[0];Re(!!R,16349);const B=R,z=B?.error||B[0]?.error;if(z){de(Vn,`RPC '${e}' stream ${a} received error:`,z);const ne=z.status;let Z=(function(pe){const S=on[pe];if(S!==void 0)return U1(S)})(ne),Se=z.message;Z===void 0&&(Z=Y.INTERNAL,Se="Unknown error status: "+ne+" with message "+z.message),E=!0,D.o_(new le(Z,Se)),x.close()}else de(Vn,`RPC '${e}' stream ${a} received:`,R),D.__(R)}})),Jl.u_(),setTimeout((()=>{D.s_()}),0),D}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return OS()}}function EO(s){return new Jl(s)}function NA(){return typeof window<"u"?window:null}function rm(){return typeof document<"u"?document:null}function sh(s){return new NM(s,!0)}Jl.c_=!1;class U_{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&de("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const VT="PersistentStream";class RA{constructor(e,t,r,a,l,u,m,g){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new U_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Kt(t.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new le(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(VT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(de(VT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TO extends RA{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=kM(this.serializer,e),r=(function(l){if(!("targetChange"in l))return ke.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?ke.min():u.readTime?Yt(u.readTime):ke.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=my(this.serializer),t.addTarget=(function(l,u){let m;const g=u.target;if(m=_m(g)?{documents:Y1(l,g)}:{query:W1(l,g).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=F1(l,u.resumeToken);const y=hy(l,u.expectedCount);y!==null&&(m.expectedCount=y)}else if(u.snapshotVersion.compareTo(ke.min())>0){m.readTime=gc(l,u.snapshotVersion.toTimestamp());const y=hy(l,u.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const r=jM(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=my(this.serializer),t.removeTarget=e,this.K_(t)}}class IO extends RA{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=DM(e.writeResults,e.commitTime),r=Yt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=my(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Md(this.serializer,r)))};this.K_(t)}}class SO{}class AO extends SO{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,fy(t,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(Y.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.jo(e,fy(t,r),a,u,m,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(Y.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function NO(s,e,t,r){return new AO(s,e,t,r)}class RO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kt(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Lo="RemoteStore";class CO{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{r.enqueueAndForget((async()=>{ka(this)&&(de(Lo,"Restarting streams for network reachability change."),await(async function(g){const y=xe(g);y.Ea.add(4),await jc(y),y.Va.set("Unknown"),y.Ea.delete(4),await ih(y)})(this))}))})),this.Va=new RO(r,a)}}async function ih(s){if(ka(s))for(const e of s.Ra)await e(!0)}async function jc(s){for(const e of s.Ra)await e(!1)}function sp(s,e){const t=xe(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),q_(t)?B_(t):Vc(t).O_()&&z_(t,e))}function bc(s,e){const t=xe(s),r=Vc(t);t.Ia.delete(e),r.O_()&&CA(t,e),t.Ia.size===0&&(r.O_()?r.L_():ka(t)&&t.Va.set("Unknown"))}function z_(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vc(s).Z_(e)}function CA(s,e){s.da.$e(e),Vc(s).X_(e)}function B_(s){s.da=new TM({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Vc(s).start(),s.Va.ua()}function q_(s){return ka(s)&&!Vc(s).x_()&&s.Ia.size>0}function ka(s){return xe(s).Ea.size===0}function kA(s){s.da=void 0}async function kO(s){s.Va.set("Online")}async function DO(s){s.Ia.forEach(((e,t)=>{z_(s,e)}))}async function jO(s,e){kA(s),q_(s)?(s.Va.ha(e),B_(s)):s.Va.set("Unknown")}async function PO(s,e,t){if(s.Va.set("Online"),e instanceof q1&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const m of l.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,u),a.Ia.delete(m),a.da.removeTarget(m))})(s,e)}catch(r){de(Lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nm(s,r)}else if(e instanceof tm?s.da.Xe(e):e instanceof B1?s.da.st(e):s.da.tt(e),!t.isEqual(ke.min()))try{const r=await bA(s.localStore);t.compareTo(r)>=0&&await(function(l,u){const m=l.da.Tt(u);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=l.Ia.get(y);x&&l.Ia.set(y,x.withResumeToken(g.resumeToken,u))}})),m.targetMismatches.forEach(((g,y)=>{const x=l.Ia.get(g);if(!x)return;l.Ia.set(g,x.withResumeToken(qt.EMPTY_BYTE_STRING,x.snapshotVersion)),CA(l,g);const _=new di(x.target,g,y,x.sequenceNumber);z_(l,_)})),l.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(r){de(Lo,"Failed to raise snapshot:",r),await Nm(s,r)}}async function Nm(s,e,t){if(!Ra(e))throw e;s.Ea.add(1),await jc(s),s.Va.set("Offline"),t||(t=()=>bA(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{de(Lo,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await ih(s)}))}function DA(s,e){return e().catch((t=>Nm(s,t,e)))}async function Pc(s){const e=xe(s),t=Ta(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fa;for(;VO(e);)try{const a=await gO(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,MO(e,a)}catch(a){await Nm(e,a)}jA(e)&&PA(e)}function VO(s){return ka(s)&&s.Ta.length<10}function MO(s,e){s.Ta.push(e);const t=Ta(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function jA(s){return ka(s)&&!Ta(s).x_()&&s.Ta.length>0}function PA(s){Ta(s).start()}async function OO(s){Ta(s).ra()}async function LO(s){const e=Ta(s);for(const t of s.Ta)e.ea(t.mutations)}async function UO(s,e,t){const r=s.Ta.shift(),a=I_.from(r,e,t);await DA(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await Pc(s)}async function zO(s,e){e&&Ta(s).Y_&&await(async function(r,a){if((function(u){return L1(u)&&u!==Y.ABORTED})(a.code)){const l=r.Ta.shift();Ta(r).B_(),await DA(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Pc(r)}})(s,e),jA(s)&&PA(s)}async function MT(s,e){const t=xe(s);t.asyncQueue.verifyOperationInProgress(),de(Lo,"RemoteStore received new credentials");const r=ka(t);t.Ea.add(3),await jc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ih(t)}async function xy(s,e){const t=xe(s);e?(t.Ea.delete(2),await ih(t)):e||(t.Ea.add(2),await jc(t),t.Va.set("Unknown"))}function Vc(s){return s.ma||(s.ma=(function(t,r,a){const l=xe(t);return l.sa(),new TO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:kO.bind(null,s),Yo:DO.bind(null,s),t_:jO.bind(null,s),J_:PO.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),q_(s)?B_(s):s.Va.set("Unknown")):(await s.ma.stop(),kA(s))}))),s.ma}function Ta(s){return s.fa||(s.fa=(function(t,r,a){const l=xe(t);return l.sa(),new IO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:OO.bind(null,s),t_:zO.bind(null,s),ta:LO.bind(null,s),na:UO.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Pc(s)):(await s.fa.stop(),s.Ta.length>0&&(de(Lo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class F_{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,m=new F_(e,t,u,a,l);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mc(s,e){if(Kt("AsyncQueue",`${e}: ${s}`),Ra(s))return new le(Y.UNAVAILABLE,`${e}: ${s}`);throw s}class Zl{static emptySet(e){return new Zl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=Zu(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Zl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class OT{constructor(){this.ga=new It(ye.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class vc{constructor(e,t,r,a,l,u,m,g,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach((m=>{u.push({type:0,doc:m})})),new vc(e,t,Zl.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class BO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class qO{constructor(){this.queries=LT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=xe(t),l=a.queries;a.queries=LT(),l.forEach(((u,m)=>{for(const g of m.ba)g.onError(r)}))})(this,new le(Y.ABORTED,"Firestore shutting down"))}}function LT(){return new vi((s=>T1(s)),Zd)}async function H_(s,e){const t=xe(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new BO,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const m=Mc(u,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Q_(t)}async function G_(s,e){const t=xe(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function FO(s,e){const t=xe(s);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const m of u.ba)m.Fa(a)&&(r=!0);u.wa=a}}r&&Q_(t)}function HO(s,e,t){const r=xe(s),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function Q_(s){s.Ca.forEach((e=>{e.next()}))}var wy,UT;(UT=wy||(wy={})).Ma="default",UT.Cache="cache";class $_{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new vc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=vc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wy.Cache}}class GO{constructor(e,t){this.qa=e,this.byteLength=t}Ua(){return"metadata"in this.qa}}class zT{constructor(e){this.serializer=e}Ks(e){return Us(this.serializer,e)}qs(e){return e.metadata.exists?K1(this.serializer,e.document,!1):Nt.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Yt(e)}}class QO{constructor(e,t){this.$a=e,this.serializer=t,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=VA(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const r=We.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new zT(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.Ks(a.metadata.name);for(const u of a.metadata.queries){const m=(t.get(u)||qe()).add(l);t.set(u,m)}}return t}async ja(e){const t=await yO(e,new zT(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const a of this.Wa)await _O(e,a,r.get(a.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:t}}}function VA(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class MA{constructor(e){this.key=e}}class OA{constructor(e){this.key=e}}class LA{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=qe(),this.mutatedKeys=qe(),this.eu=S1(e),this.tu=new Zl(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new OT,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((x,_)=>{const E=a.get(x),D=eh(this.query,_)?_:null,L=!!E&&this.mutatedKeys.has(E.key),R=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let B=!1;E&&D?E.data.isEqual(D.data)?L!==R&&(r.track({type:3,doc:D}),B=!0):this.su(E,D)||(r.track({type:2,doc:D}),B=!0,(g&&this.eu(D,g)>0||y&&this.eu(D,y)<0)&&(m=!0)):!E&&D?(r.track({type:0,doc:D}),B=!0):E&&!D&&(r.track({type:1,doc:E}),B=!0,(g||y)&&(m=!0)),B&&(D?(u=u.add(D),l=R?l.add(x):l.delete(x)):(u=u.delete(x),l=l.delete(x)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const x=this.query.limitType==="F"?u.last():u.first();u=u.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{tu:u,iu:r,Ss:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((x,_)=>(function(D,L){const R=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:B})}};return R(D)-R(L)})(x.type,_.type)||this.eu(x.doc,_.doc))),this.ou(r),a=a??!1;const m=t&&!a?this._u():[],g=this.Ya.size===0&&this.current&&!a?1:0,y=g!==this.Xa;return this.Xa=g,u.length!==0||y?{snapshot:new vc(this.query,e.tu,l,u,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new OT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=qe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new OA(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new MA(r))})),t}cu(e){this.Za=e.ks,this.Ya=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return vc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Da="SyncEngine";class $O{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class KO{constructor(e){this.key=e,this.hu=!1}}class YO{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new vi((m=>T1(m)),Zd),this.Iu=new Map,this.Eu=new Set,this.Ru=new It(ye.comparator),this.Au=new Map,this.Vu=new D_,this.du={},this.mu=new Map,this.fu=Oo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WO(s,e,t=!0){const r=ip(s);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await UA(r,e,t,!0),a}async function XO(s,e){const t=ip(s);await UA(t,e,!0,!1)}async function UA(s,e,t,r){const a=await yc(s.localStore,$n(e)),l=a.targetId,u=s.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await K_(s,e,l,u==="current",a.resumeToken)),s.isPrimaryClient&&t&&sp(s.remoteStore,a),m}async function K_(s,e,t,r,a){s.pu=(_,E,D)=>(async function(R,B,z,ne){let Z=B.view.ru(z);Z.Ss&&(Z=await Im(R.localStore,B.query,!1).then((({documents:S})=>B.view.ru(S,Z))));const Se=ne&&ne.targetChanges.get(B.targetId),se=ne&&ne.targetMismatches.get(B.targetId)!=null,pe=B.view.applyChanges(Z,R.isPrimaryClient,Se,se);return Ey(R,B.targetId,pe.au),pe.snapshot})(s,_,E,D);const l=await Im(s.localStore,e,!0),u=new LA(e,l.ks),m=u.ru(l.documents),g=rh.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),y=u.applyChanges(m,s.isPrimaryClient,g);Ey(s,t,y.au);const x=new $O(e,t,u);return s.Tu.set(e,x),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function JO(s,e,t){const r=xe(s),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((u=>!Zd(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await _c(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&bc(r.remoteStore,a.targetId),xc(r,a.targetId)})).catch(Na)):(xc(r,a.targetId),await _c(r.localStore,a.targetId,!0))}async function ZO(s,e){const t=xe(s),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),bc(t.remoteStore,r.targetId))}async function e6(s,e,t){const r=J_(s);try{const a=await(function(u,m){const g=xe(u),y=dt.now(),x=m.reduce(((D,L)=>D.add(L.key)),qe());let _,E;return g.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let L=or(),R=qe();return g.xs.getEntries(D,x).next((B=>{L=B,L.forEach(((z,ne)=>{ne.isValidDocument()||(R=R.add(z))}))})).next((()=>g.localDocuments.getOverlayedDocuments(D,L))).next((B=>{_=B;const z=[];for(const ne of m){const Z=xM(ne,_.get(ne.key).overlayedDocument);Z!=null&&z.push(new xi(ne.key,Z,p1(Z.value.mapValue),Vt.exists(!0)))}return g.mutationQueue.addMutationBatch(D,y,z,m)})).next((B=>{E=B;const z=B.applyToLocalDocumentSet(_,R);return g.documentOverlayCache.saveOverlays(D,B.batchId,z)}))})).then((()=>({batchId:E.batchId,changes:N1(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,m,g){let y=u.du[u.currentUser.toKey()];y||(y=new It(Oe)),y=y.insert(m,g),u.du[u.currentUser.toKey()]=y})(r,a.batchId,t),await wi(r,a.changes),await Pc(r.remoteStore)}catch(a){const l=Mc(a,"Failed to persist write");t.reject(l)}}async function zA(s,e){const t=xe(s);try{const r=await pO(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(Re(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Re(u.hu,14607):a.removedDocuments.size>0&&(Re(u.hu,42227),u.hu=!1))})),await wi(t,r,e)}catch(r){await Na(r)}}function BT(s,e,t){const r=xe(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,u)=>{const m=u.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(u,m){const g=xe(u);g.onlineState=m;let y=!1;g.queries.forEach(((x,_)=>{for(const E of _.ba)E.va(m)&&(y=!0)})),y&&Q_(g)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function t6(s,e,t){const r=xe(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let u=new It(ye.comparator);u=u.insert(l,Nt.newNoDocument(l,ke.min()));const m=qe().add(l),g=new nh(ke.min(),new Map,new It(Oe),u,m);await zA(r,g),r.Ru=r.Ru.remove(l),r.Au.delete(e),X_(r)}else await _c(r.localStore,e,!1).then((()=>xc(r,e,t))).catch(Na)}async function n6(s,e){const t=xe(s),r=e.batch.batchId;try{const a=await mO(t.localStore,e);W_(t,r,null),Y_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await wi(t,a)}catch(a){await Na(a)}}async function r6(s,e,t){const r=xe(s);try{const a=await(function(u,m){const g=xe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,m).next((_=>(Re(_!==null,37113),x=_.keys(),g.mutationQueue.removeMutationBatch(y,_)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(r.localStore,e);W_(r,e,t),Y_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await wi(r,a)}catch(a){await Na(a)}}async function s6(s,e){const t=xe(s);ka(t.remoteStore)||de(Da,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(u){const m=xe(u);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(g=>m.mutationQueue.getHighestUnacknowledgedBatchId(g)))})(t.localStore);if(r===fa)return void e.resolve();const a=t.mu.get(r)||[];a.push(e),t.mu.set(r,a)}catch(r){const a=Mc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function Y_(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function W_(s,e,t){const r=xe(s);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function xc(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||BA(s,r)}))}function BA(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(bc(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),X_(s))}function Ey(s,e,t){for(const r of t)r instanceof MA?(s.Vu.addReference(r.key,e),i6(s,r)):r instanceof OA?(de(Da,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||BA(s,r.key)):Te(19791,{wu:r})}function i6(s,e){const t=e.key,r=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(r)||(de(Da,"New document in limbo: "+t),s.Eu.add(r),X_(s))}function X_(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new ye(We.fromString(e)),r=s.fu.next();s.Au.set(r,new KO(t)),s.Ru=s.Ru.insert(t,r),sp(s.remoteStore,new di($n(Cc(t.path)),r,"TargetPurposeLimboResolution",ir.ce))}}async function wi(s,e,t){const r=xe(s),a=[],l=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{u.push(r.pu(g,e,t).then((y=>{if((y||t)&&r.isPrimaryClient){const x=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){a.push(y);const x=M_.Es(g.targetId,y);l.push(x)}})))})),await Promise.all(u),r.Pu.J_(a),await(async function(g,y){const x=xe(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>F.forEach(y,(E=>F.forEach(E.Ts,(D=>x.persistence.referenceDelegate.addReference(_,E.targetId,D))).next((()=>F.forEach(E.Is,(D=>x.persistence.referenceDelegate.removeReference(_,E.targetId,D)))))))))}catch(_){if(!Ra(_))throw _;de(O_,"Failed to update sequence numbers: "+_)}for(const _ of y){const E=_.targetId;if(!_.fromCache){const D=x.vs.get(E),L=D.snapshotVersion,R=D.withLastLimboFreeSnapshotVersion(L);x.vs=x.vs.insert(E,R)}}})(r.localStore,l))}async function a6(s,e){const t=xe(s);if(!t.currentUser.isEqual(e)){de(Da,"User change. New user:",e.toKey());const r=await _A(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new le(Y.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wi(t,r.Ns)}}function o6(s,e){const t=xe(s),r=t.Au.get(e);if(r&&r.hu)return qe().add(r.key);{let a=qe();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const m=t.Tu.get(u);a=a.unionWith(m.view.nu)}return a}}async function l6(s,e){const t=xe(s),r=await Im(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&Ey(t,e.targetId,a.au),a}async function c6(s,e){const t=xe(s);return wA(t.localStore,e).then((r=>wi(t,r)))}async function u6(s,e,t,r){const a=xe(s),l=await(function(m,g){const y=xe(m),x=xe(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",(_=>x.Xn(_,g).next((E=>E?y.localDocuments.getDocuments(_,E):F.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Pc(a.remoteStore):t==="acknowledged"||t==="rejected"?(W_(a,e,r||null),Y_(a,e),(function(m,g){xe(xe(m).mutationQueue).nr(g)})(a.localStore,e)):Te(6720,"Unknown batchState",{bu:t}),await wi(a,l)):de(Da,"Cannot apply mutation batch with id: "+e)}async function d6(s,e){const t=xe(s);if(ip(t),J_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await qT(t,r.toArray());t.gu=!0,await xy(t.remoteStore,!0);for(const l of a)sp(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then((()=>(xc(t,u),_c(t.localStore,u,!0)))),bc(t.remoteStore,u)})),await a,await qT(t,r),(function(u){const m=xe(u);m.Au.forEach(((g,y)=>{bc(m.remoteStore,y)})),m.Vu.zr(),m.Au=new Map,m.Ru=new It(ye.comparator)})(t),t.gu=!1,await xy(t.remoteStore,!1)}}async function qT(s,e,t){const r=xe(s),a=[],l=[];for(const u of e){let m;const g=r.Iu.get(u);if(g&&g.length!==0){m=await yc(r.localStore,$n(g[0]));for(const y of g){const x=r.Tu.get(y),_=await l6(r,x);_.snapshot&&l.push(_.snapshot)}}else{const y=await xA(r.localStore,u);m=await yc(r.localStore,y),await K_(r,qA(y),u,!1,m.resumeToken)}a.push(m)}return r.Pu.J_(l),a}function qA(s){return E1(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function h6(s){return(function(t){return xe(xe(t).persistence).hs()})(xe(s).localStore)}async function f6(s,e,t,r){const a=xe(s);if(a.gu)return void de(Da,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await wA(a.localStore,I1(l[0])),m=nh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",qt.EMPTY_BYTE_STRING);await wi(a,u,m);break}case"rejected":await _c(a.localStore,e,!0),xc(a,e,r);break;default:Te(64155,t)}}async function m6(s,e,t){const r=ip(s);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){de(Da,"Adding an already active target "+a);continue}const l=await xA(r.localStore,a),u=await yc(r.localStore,l);await K_(r,qA(l),u.targetId,!1,u.resumeToken),sp(r.remoteStore,u)}for(const a of t)r.Iu.has(a)&&await _c(r.localStore,a,!1).then((()=>{bc(r.remoteStore,a),xc(r,a)})).catch(Na)}}function ip(s){const e=xe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=zA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t6.bind(null,e),e.Pu.J_=FO.bind(null,e.eventManager),e.Pu.yu=HO.bind(null,e.eventManager),e}function J_(s){const e=xe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r6.bind(null,e),e}function p6(s,e,t){const r=xe(s);(async function(l,u,m){try{const g=await u.getMetadata();if(await(function(D,L){const R=xe(D),B=Yt(L.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",(z=>R.Pi.getBundleMetadata(z,L.id))).then((z=>!!z&&z.createTime.compareTo(B)>=0))})(l.localStore,g))return await u.close(),m._completeWith((function(D){return{taskState:"Success",documentsLoaded:D.totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}})(g)),Promise.resolve(new Set);m._updateProgress(VA(g));const y=new QO(g,u.serializer);let x=await u.Su();for(;x;){const E=await y.Ga(x);E&&m._updateProgress(E),x=await u.Su()}const _=await y.ja(l.localStore);return await wi(l,_.Ja,void 0),await(function(D,L){const R=xe(D);return R.persistence.runTransaction("Save bundle","readwrite",(B=>R.Pi.saveBundleMetadata(B,L)))})(l.localStore,g),m._completeWith(_.progress),Promise.resolve(_.Ha)}catch(g){return qs(Da,`Loading bundle failed with ${g}`),m._failWith(g),Promise.resolve(new Set)}})(r,e,t).then((a=>{r.sharedClientState.notifyBundleLoaded(a)}))}class Od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return yA(this.persistence,new gA,e.initialUser,this.serializer)}Cu(e){return new j_(rp.Vi,this.serializer)}Du(e){return new AA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Od.provider={build:()=>new Od};class g6 extends Od{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Re(this.persistence.referenceDelegate instanceof Tm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new uA(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new j_((r=>Tm.Vi(r,t)),this.serializer)}}class FA extends Od{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await J_(this.xu.syncEngine),await Pc(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return yA(this.persistence,new gA,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new uA(r,e.asyncQueue,t)}Mu(e,t){const r=new b4(t,this.persistence);return new _4(e.asyncQueue,r)}Cu(e){const t=V_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new P_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,NA(),rm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new AA}}class y6 extends FA{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof V0&&(this.sharedClientState.syncEngine={So:u6.bind(null,t),Do:f6.bind(null,t),Co:m6.bind(null,t),hs:h6.bind(null,t),bo:c6.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await d6(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=NA();if(!V0.v(t))throw new le(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=V_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new V0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ld{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>BT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=a6.bind(null,this.syncEngine),await xy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qO})()}createDatastore(e){const t=sh(e.databaseInfo.databaseId),r=EO(e.databaseInfo);return NO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,u,m){return new CO(r,a,l,u,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>BT(this.syncEngine,t,0)),(function(){return PT.v()?new PT:new bO})())}createSyncEngine(e,t){return(function(a,l,u,m,g,y,x){const _=new YO(a,l,u,m,g,y);return x&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=xe(t);de(Lo,"RemoteStore shutting down."),r.Ea.add(5),await jc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ld.provider={build:()=>new Ld};function FT(s,e=10240){let t=0;return{async read(){if(t<s.byteLength){const r={value:s.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class ap{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class _6{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new Cn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);const a=await this.Uu(r);return new GO(JSON.parse(a),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}let b6=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new le(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const u=xe(a),m={documents:l.map((_=>Vd(u.serializer,_)))},g=await u.jo("BatchGetDocuments",u.serializer.databaseId,We.emptyPath(),m,l.length),y=new Map;g.forEach((_=>{const E=CM(u.serializer,_);y.set(E.key.toString(),E)}));const x=[];return l.forEach((_=>{const E=y.get(_.toString());Re(!!E,55234,{key:_}),x.push(E)})),x})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const a=ye.fromPath(r);this.mutations.push(new E_(a,this.precondition(a)))})),await(async function(r,a){const l=xe(r),u={writes:a.map((m=>Md(l.serializer,m)))};await l.Wo("Commit",l.serializer.databaseId,We.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Te(50498,{Gu:e.constructor.name});t=ke.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new le(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ke.min())?Vt.exists(!1):Vt.updateTime(t):Vt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ke.min()))throw new le(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vt.updateTime(t)}return Vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class v6{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.zu=r.maxAttempts,this.M_=new U_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new b6(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((a=>{this.Zu(a)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!Wd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!L1(t)}return!1}}const Ia="FirestoreClient";class x6{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=bn.UNAUTHENTICATED,this.clientId=c_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{de(Ia,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(de(Ia,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Mc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function O0(s,e){s.asyncQueue.verifyOperationInProgress(),de(Ia,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async a=>{r.isEqual(a)||(await _A(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function HT(s,e){s.asyncQueue.verifyOperationInProgress();const t=await Z_(s);de(Ia,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>MT(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,a)=>MT(e.remoteStore,a))),s._onlineComponents=e}async function Z_(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){de(Ia,"Using user provided OfflineComponentProvider");try{await O0(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Y.FAILED_PRECONDITION||a.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;qs("Error using user provided cache. Falling back to memory cache: "+t),await O0(s,new Od)}}else de(Ia,"Using default OfflineComponentProvider"),await O0(s,new g6(void 0));return s._offlineComponents}async function op(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(de(Ia,"Using user provided OnlineComponentProvider"),await HT(s,s._uninitializedComponentsProvider._online)):(de(Ia,"Using default OnlineComponentProvider"),await HT(s,new Ld))),s._onlineComponents}function HA(s){return Z_(s).then((e=>e.persistence))}function eb(s){return Z_(s).then((e=>e.localStore))}function GA(s){return op(s).then((e=>e.remoteStore))}function tb(s){return op(s).then((e=>e.syncEngine))}function w6(s){return op(s).then((e=>e.datastore))}async function wc(s){const e=await op(s),t=e.eventManager;return t.onListen=WO.bind(null,e.syncEngine),t.onUnlisten=JO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ZO.bind(null,e.syncEngine),t}function E6(s){return s.asyncQueue.enqueue((async()=>{const e=await HA(s),t=await GA(s);return e.setNetworkEnabled(!0),(function(a){const l=xe(a);return l.Ea.delete(0),ih(l)})(t)}))}function T6(s){return s.asyncQueue.enqueue((async()=>{const e=await HA(s),t=await GA(s);return e.setNetworkEnabled(!1),(async function(a){const l=xe(a);l.Ea.add(0),await jc(l),l.Va.set("Offline")})(t)}))}function I6(s,e,t,r){const a=new ap(r),l=new $_(e,a,t);return s.asyncQueue.enqueueAndForget((async()=>H_(await wc(s),l))),()=>{a.Nu(),s.asyncQueue.enqueueAndForget((async()=>G_(await wc(s),l)))}}function S6(s,e){const t=new Cn;return s.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const m=await(function(y,x){const _=xe(y);return _.persistence.runTransaction("read document","readonly",(E=>_.localDocuments.getDocument(E,x)))})(a,l);m.isFoundDocument()?u.resolve(m):m.isNoDocument()?u.resolve(null):u.reject(new le(Y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const g=Mc(m,`Failed to get document '${l} from cache`);u.reject(g)}})(await eb(s),e,t))),t.promise}function QA(s,e,t={}){const r=new Cn;return s.asyncQueue.enqueueAndForget((async()=>(function(l,u,m,g,y){const x=new ap({next:E=>{x.Nu(),u.enqueueAndForget((()=>G_(l,_)));const D=E.docs.has(m);!D&&E.fromCache?y.reject(new le(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&E.fromCache&&g&&g.source==="server"?y.reject(new le(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(E)},error:E=>y.reject(E)}),_=new $_(Cc(m.path),x,{includeMetadataChanges:!0,Ka:!0});return H_(l,_)})(await wc(s),s.asyncQueue,e,t,r))),r.promise}function A6(s,e){const t=new Cn;return s.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const m=await Im(a,l,!0),g=new LA(l,m.ks),y=g.ru(m.documents),x=g.applyChanges(y,!1);u.resolve(x.snapshot)}catch(m){const g=Mc(m,`Failed to execute query '${l} against cache`);u.reject(g)}})(await eb(s),e,t))),t.promise}function $A(s,e,t={}){const r=new Cn;return s.asyncQueue.enqueueAndForget((async()=>(function(l,u,m,g,y){const x=new ap({next:E=>{x.Nu(),u.enqueueAndForget((()=>G_(l,_))),E.fromCache&&g.source==="server"?y.reject(new le(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(E)},error:E=>y.reject(E)}),_=new $_(m,x,{includeMetadataChanges:!0,Ka:!0});return H_(l,_)})(await wc(s),s.asyncQueue,e,t,r))),r.promise}function N6(s,e){const t=new Cn;return s.asyncQueue.enqueueAndForget((async()=>e6(await tb(s),e,t))),t.promise}function R6(s,e){const t=new ap(e);return s.asyncQueue.enqueueAndForget((async()=>(function(a,l){xe(a).Ca.add(l),l.next()})(await wc(s),t))),()=>{t.Nu(),s.asyncQueue.enqueueAndForget((async()=>(function(a,l){xe(a).Ca.delete(l)})(await wc(s),t)))}}function C6(s,e,t){const r=new Cn;return s.asyncQueue.enqueueAndForget((async()=>{const a=await w6(s);new v6(s.asyncQueue,a,t,e,r).ju()})),r.promise}function k6(s,e,t,r){const a=(function(u,m){let g;return g=typeof u=="string"?z1().encode(u):u,(function(x,_){return new _6(x,_)})((function(x,_){if(x instanceof Uint8Array)return FT(x,_);if(x instanceof ArrayBuffer)return FT(new Uint8Array(x),_);if(x instanceof ReadableStream)return x.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(g),m)})(t,sh(e));s.asyncQueue.enqueueAndForget((async()=>{p6(await tb(s),a,r)}))}function D6(s,e){return s.asyncQueue.enqueue((async()=>(function(r,a){const l=xe(r);return l.persistence.runTransaction("Get named query","readonly",(u=>l.Pi.getNamedQuery(u,a)))})(await eb(s),e)))}function KA(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const j6="ComponentProvider",GT=new Map;function P6(s,e,t,r,a){return new K4(s,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,KA(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}const YA="firestore.googleapis.com",QT=!0;class $T{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YA,this.ssl=QT}else this.host=e.host,this.ssl=e.ssl??QT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YM)throw new le(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ah{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $T({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $T(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new a4;switch(r.type){case"firstParty":return new u4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=GT.get(t);r&&(de(j6,"Removing Datastore"),GT.delete(t),r.terminate())})(this),Promise.resolve()}}function V6(s,e,t,r={}){s=ot(s,ah);const a=Tc(e),l=s._getSettings(),u={...l,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;a&&(fI(`https://${m}`),mI("Firestore",!0)),l.host!==YA&&l.host!==m&&qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:a,emulatorOptions:r};if(!pa(g,u)&&(s._setSettings(g),r.mockUserToken)){let y,x;if(typeof r.mockUserToken=="string")y=r.mockUserToken,x=bn.MOCK_USER;else{y=wC(r.mockUserToken,s._app?.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new le(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new bn(_)}s._authCredentials=new o4(new US(y,x))}}let Kn=class WA{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new WA(this.firestore,e,this._query)}},Tt=class nd{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nd(this.firestore,e,this._key)}toJSON(){return{type:nd._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Yd(t,nd._jsonSchema))return new nd(e,r||null,new ye(We.fromString(t.referencePath)))}};Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:un("string",Tt._jsonSchemaVersion),referencePath:un("string")};let ma=class XA extends Kn{constructor(e,t,r){super(e,t,Cc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new ye(e))}withConverter(e){return new XA(this.firestore,e,this._path)}};function JA(s,e,...t){if(s=je(s),u_("collection","path",e),s instanceof ah){const r=We.fromString(e,...t);return VE(r),new ma(s,null,r)}{if(!(s instanceof Tt||s instanceof ma))throw new le(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(We.fromString(e,...t));return VE(r),new ma(s.firestore,null,r)}}function M6(s,e){if(s=ot(s,ah),u_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new le(Y.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kn(s,null,(function(r){return new bi(We.emptyPath(),r)})(e))}function Rm(s,e,...t){if(s=je(s),arguments.length===1&&(e=c_.newId()),u_("doc","path",e),s instanceof ah){const r=We.fromString(e,...t);return PE(r),new Tt(s,null,new ye(r))}{if(!(s instanceof Tt||s instanceof ma))throw new le(Y.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(We.fromString(e,...t));return PE(r),new Tt(s.firestore,s instanceof ma?s.converter:null,new ye(r))}}function ZA(s,e){return s=je(s),e=je(e),(s instanceof Tt||s instanceof ma)&&(e instanceof Tt||e instanceof ma)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function eN(s,e){return s=je(s),e=je(e),s instanceof Kn&&e instanceof Kn&&s.firestore===e.firestore&&Zd(s._query,e._query)&&s.converter===e.converter}const KT="AsyncQueue";class YT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new U_(this,"async_queue_retry"),this._c=()=>{const r=rm();r&&de(KT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=rm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=rm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Cn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ra(e))throw e;de(KT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Kt("INTERNAL UNHANDLED ERROR: ",WT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=F_.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Te(47125,{Pc:WT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function WT(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class O6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Cn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const L6=-1;let Wt=class extends ah{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new YT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YT(e),this._firestoreClient=void 0,await e}}};function Un(s){if(s._terminated)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||tN(s),s._firestoreClient}function tN(s){const e=s._freezeSettings(),t=P6(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new x6(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}function U6(s,e){qs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return nN(s,Ld.provider,{build:r=>new FA(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function z6(s){qs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();nN(s,Ld.provider,{build:t=>new y6(t,e.cacheSizeBytes)})}function nN(s,e,t){if((s=ot(s,Wt))._firestoreClient||s._terminated)throw new le(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new le(Y.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},tN(s)}function B6(s){if(s._initialized&&!s._terminated)throw new le(Y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Cn;return s._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Ls.v())return Promise.resolve();const a=r+pA;await Ls.delete(a)})(V_(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function q6(s){return(function(t){const r=new Cn;return t.asyncQueue.enqueueAndForget((async()=>s6(await tb(t),r))),r.promise})(Un(s=ot(s,Wt)))}function F6(s){return E6(Un(s=ot(s,Wt)))}function H6(s){return T6(Un(s=ot(s,Wt)))}function G6(s,e){const t=Un(s=ot(s,Wt)),r=new O6;return k6(t,s._databaseId,e,r),r}function Q6(s,e){return D6(Un(s=ot(s,Wt)),e).then((t=>t?new Kn(s,null,t.query):null))}class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On(qt.fromBase64String(e))}catch(t){throw new le(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new On(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yd(e,On._jsonSchema))return On.fromBase64String(e.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:un("string",On._jsonSchemaVersion),bytes:un("string")};let Uo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};let Ho=class{constructor(e){this._methodName=e}};class ts{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ts._jsonSchemaVersion}}static fromJSON(e){if(Yd(e,ts._jsonSchema))return new ts(e.latitude,e.longitude)}}ts._jsonSchemaVersion="firestore/geoPoint/1.0",ts._jsonSchema={type:un("string",ts._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};class ns{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yd(e,ns._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ns(e.vectorValues);throw new le(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ns._jsonSchemaVersion="firestore/vectorValue/1.0",ns._jsonSchema={type:un("string",ns._jsonSchemaVersion),vectorValues:un("object")};const $6=/^__.*__$/;class K6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new xi(e,this.data,this.fieldMask,t,this.fieldTransforms):new kc(e,this.data,t,this.fieldTransforms)}}class rN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sN(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{dataSource:s})}}class lp{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new lp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Cm(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(sN(this.dataSource)&&$6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Y6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sh(e)}createContext(e,t,r,a=!1){return new lp({dataSource:e,methodName:t,targetDoc:r,path:Pt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Go(s){const e=s._freezeSettings(),t=sh(s._databaseId);return new Y6(s._databaseId,!!e.ignoreUndefinedProperties,t)}function cp(s,e,t,r,a,l={}){const u=s.createContext(l.merge||l.mergeFields?2:0,e,t,a);lb("Data must be an object, but it was:",u,r);const m=oN(r,u);let g,y;if(l.merge)g=new ar(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const x=[];for(const _ of l.mergeFields){const E=zo(e,_,t);if(!u.contains(E))throw new le(Y.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);uN(x,E)||x.push(E)}g=new ar(x),y=u.fieldTransforms.filter((_=>g.covers(_.field)))}else g=null,y=u.fieldTransforms;return new K6(new Rn(m),g,y)}class oh extends Ho{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oh}}function iN(s,e,t){return new lp({dataSource:3,targetDoc:e.settings.targetDoc,methodName:s._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class nb extends Ho{_toFieldTransform(e){return new th(e.path,new mc)}isEqual(e){return e instanceof nb}}class rb extends Ho{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=iN(this,e,!0),r=this.Ac.map((l=>Qo(l,t))),a=new jo(r);return new th(e.path,a)}isEqual(e){return e instanceof rb&&pa(this.Ac,e.Ac)}}class sb extends Ho{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=iN(this,e,!0),r=this.Ac.map((l=>Qo(l,t))),a=new Po(r);return new th(e.path,a)}isEqual(e){return e instanceof sb&&pa(this.Ac,e.Ac)}}class ib extends Ho{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new pc(e.serializer,k1(e.serializer,this.Vc));return new th(e.path,t)}isEqual(e){return e instanceof ib&&this.Vc===e.Vc}}function ab(s,e,t,r){const a=s.createContext(1,e,t);lb("Data must be an object, but it was:",a,r);const l=[],u=Rn.empty();Ca(r,((g,y)=>{const x=cN(e,g,t);y=je(y);const _=a.childContextForFieldPath(x);if(y instanceof oh)l.push(x);else{const E=Qo(y,_);E!=null&&(l.push(x),u.set(x,E))}}));const m=new ar(l);return new rN(u,m,a.fieldTransforms)}function ob(s,e,t,r,a,l){const u=s.createContext(1,e,t),m=[zo(e,r,t)],g=[a];if(l.length%2!=0)throw new le(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)m.push(zo(e,l[E])),g.push(l[E+1]);const y=[],x=Rn.empty();for(let E=m.length-1;E>=0;--E)if(!uN(y,m[E])){const D=m[E];let L=g[E];L=je(L);const R=u.childContextForFieldPath(D);if(L instanceof oh)y.push(D);else{const B=Qo(L,R);B!=null&&(y.push(D),x.set(D,B))}}const _=new ar(y);return new rN(x,_,u.fieldTransforms)}function aN(s,e,t,r=!1){return Qo(t,s.createContext(r?4:3,e))}function Qo(s,e){if(lN(s=je(s)))return lb("Unsupported field value:",e,s),oN(s,e);if(s instanceof Ho)return(function(r,a){if(!sN(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const m of r){let g=Qo(m,a.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(s,e)}return(function(r,a){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return k1(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=dt.fromDate(r);return{timestampValue:gc(a.serializer,l)}}if(r instanceof dt){const l=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gc(a.serializer,l)}}if(r instanceof ts)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof On)return{bytesValue:F1(a.serializer,r._byteString)};if(r instanceof Tt){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:N_(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof ns)return(function(u,m){const g=u instanceof ns?u.toArray():u;return{mapValue:{fields:{[y_]:{stringValue:__},[dc]:{arrayValue:{values:g.map((x=>{if(typeof x!="number")throw m.createError("VectorValues must only contain numeric values.");return w_(m.serializer,x)}))}}}}}})(r,a);if(tA(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Gm(r)}`)})(s,e)}function oN(s,e){const t={};return a1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ca(s,((r,a)=>{const l=Qo(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function lN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof dt||s instanceof ts||s instanceof On||s instanceof Tt||s instanceof Ho||s instanceof ns||tA(s))}function lb(s,e,t){if(!lN(t)||!qS(t)){const r=Gm(t);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function zo(s,e,t){if((e=je(e))instanceof Uo)return e._internalPath;if(typeof e=="string")return cN(s,e);throw Cm("Field path arguments must be of type string or ",s,!1,void 0,t)}const W6=new RegExp("[~\\*/\\[\\]]");function cN(s,e,t){if(e.search(W6)>=0)throw Cm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Uo(...e.split("."))._internalPath}catch{throw Cm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Cm(s,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${r}`),u&&(g+=` in document ${a}`),g+=")"),new le(Y.INVALID_ARGUMENT,m+s+g)}function uN(s,e){return s.some((t=>t.isEqual(e)))}class cb{convertValue(e,t="none"){switch(xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ca(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[dc].arrayValue?.values?.map((r=>kt(r.doubleValue)));return new ns(t)}convertGeoPoint(e){return new ts(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(kd(e));default:return null}}convertTimestamp(e){const t=pi(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=We.fromString(e);Re(eA(r),9688,{name:e});const a=new va(r.get(1),r.get(3)),l=new ye(r.popFirst(5));return a.isEqual(t)||Kt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class $o extends cb{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}function X6(){return new oh("deleteField")}function J6(){return new nb("serverTimestamp")}function Z6(...s){return new rb("arrayUnion",s)}function e3(...s){return new sb("arrayRemove",s)}function t3(s){return new ib("increment",s)}const XT="@firebase/firestore",JT="4.10.0";function Ty(s){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(s,["next","error","complete"])}class Ud{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(zo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class n3 extends Ud{data(){return super.data()}}function dN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new le(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ub{}class lh extends ub{}function ia(s,e,...t){let r=[];e instanceof ub&&r.push(e),r=r.concat(t),(function(l){const u=l.filter((g=>g instanceof db)).length,m=l.filter((g=>g instanceof up)).length;if(u>1||u>0&&m>0)throw new le(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)s=a._apply(s);return s}class up extends lh{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new up(e,t,r)}_apply(e){const t=this._parse(e);return fN(e._query,t),new Kn(e.firestore,e.converter,dy(e._query,t))}_parse(e){const t=Go(e.firestore);return(function(l,u,m,g,y,x,_){let E;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new le(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){eI(_,x);const L=[];for(const R of _)L.push(ZT(g,l,R));E={arrayValue:{values:L}}}else E=ZT(g,l,_)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||eI(_,x),E=aN(m,u,_,x==="in"||x==="not-in");return Ze.create(y,x,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function r3(s,e,t){const r=e,a=zo("where",s);return up._create(a,r,t)}class db extends ub{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new db(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:gt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const m=l.getFlattenedFilters();for(const g of m)fN(u,g),u=dy(u,g)})(e._query,t),new Kn(e.firestore,e.converter,dy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hb extends lh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hb(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new le(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new le(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pd(l,u)})(e._query,this._field,this._direction);return new Kn(e.firestore,e.converter,lM(e._query,t))}}function s3(s,e="asc"){const t=e,r=zo("orderBy",s);return hb._create(r,t)}class dp extends lh{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new dp(e,t,r)}_apply(e){return new Kn(e.firestore,e.converter,vm(e._query,this._limit,this._limitType))}}function i3(s){return FS("limit",s),dp._create("limit",s,"F")}function a3(s){return FS("limitToLast",s),dp._create("limitToLast",s,"L")}class hp extends lh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new hp(e,t,r)}_apply(e){const t=hN(e,this.type,this._docOrFields,this._inclusive);return new Kn(e.firestore,e.converter,cM(e._query,t))}}function o3(...s){return hp._create("startAt",s,!0)}function l3(...s){return hp._create("startAfter",s,!1)}class fp extends lh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new fp(e,t,r)}_apply(e){const t=hN(e,this.type,this._docOrFields,this._inclusive);return new Kn(e.firestore,e.converter,uM(e._query,t))}}function c3(...s){return fp._create("endBefore",s,!1)}function u3(...s){return fp._create("endAt",s,!0)}function hN(s,e,t,r){if(t[0]=je(t[0]),t[0]instanceof Ud)return(function(l,u,m,g,y){if(!g)throw new le(Y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const x=[];for(const _ of Xl(l))if(_.field.isKeyField())x.push(ko(u,g.key));else{const E=g.data.field(_.field);if(Wm(E))throw new le(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){const D=_.field.canonicalString();throw new le(Y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${D}' (used as the orderBy) does not exist.`)}x.push(E)}return new Ea(x,y)})(s._query,s.firestore._databaseId,e,t[0]._document,r);{const a=Go(s.firestore);return(function(u,m,g,y,x,_){const E=u.explicitOrderBy;if(x.length>E.length)throw new le(Y.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const D=[];for(let L=0;L<x.length;L++){const R=x[L];if(E[L].field.isKeyField()){if(typeof R!="string")throw new le(Y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof R}`);if(!v_(u)&&R.indexOf("/")!==-1)throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${R}' contains a slash.`);const B=u.path.child(We.fromString(R));if(!ye.isDocumentKey(B))throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${B}' is not because it contains an odd number of segments.`);const z=new ye(B);D.push(ko(m,z))}else{const B=aN(g,y,R);D.push(B)}}return new Ea(D,_)})(s._query,s.firestore._databaseId,a,e,t,r)}}function ZT(s,e,t){if(typeof(t=je(t))=="string"){if(t==="")throw new le(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!v_(e)&&t.indexOf("/")!==-1)throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(We.fromString(t));if(!ye.isDocumentKey(r))throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ko(s,new ye(r))}if(t instanceof Tt)return ko(s,t._key);throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gm(t)}.`)}function eI(s,e){if(!Array.isArray(s)||s.length===0)throw new le(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fN(s,e){const t=(function(a,l){for(const u of a)for(const m of u.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function mp(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class d3 extends cb{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}class xo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Mr=class mN extends Ud{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(zo("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=mN._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Mr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mr._jsonSchema={type:un("string",Mr._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};let yd=class extends Mr{data(e={}){return super.data(e)}},rs=class pN{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new xo(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new yd(this._firestore,this._userDataWriter,r.key,r,new xo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((m=>{const g=new yd(a._firestore,a._userDataWriter,m.doc.key,m.doc,new xo(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new yd(a._firestore,a._userDataWriter,m.doc.key,m.doc,new xo(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,x=-1;return m.type!==0&&(y=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),x=u.indexOf(m.doc.key)),{type:h3(m.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pN._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=c_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function h3(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:s})}}function gN(s,e){return s instanceof Mr&&e instanceof Mr?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(s._document===null?e._document===null:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof rs&&e instanceof rs&&s._firestore===e._firestore&&eN(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}rs._jsonSchemaVersion="firestore/querySnapshot/1.0",rs._jsonSchema={type:un("string",rs._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};const f3={maxAttempts:5};let m3=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Go(e)}set(e,t,r){this._verifyNotCommitted();const a=ca(e,this._firestore),l=mp(a.converter,t,r),u=cp(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(u.toMutation(a._key,Vt.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=ca(e,this._firestore);let u;return u=typeof(t=je(t))=="string"||t instanceof Uo?ob(this._dataReader,"WriteBatch.update",l._key,t,r,a):ab(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ca(e,this._firestore);return this._mutations=this._mutations.concat(new Dc(t._key,Vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ca(s,e){if((s=je(s)).firestore!==e)throw new le(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class p3{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Go(e)}get(e){const t=ca(e,this._firestore),r=new d3(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return Te(24041);const l=a[0];if(l.isFoundDocument())return new Ud(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Ud(this._firestore,r,t._key,null,t.converter);throw Te(18433,{doc:l})}))}set(e,t,r){const a=ca(e,this._firestore),l=mp(a.converter,t,r),u=cp(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,u),this}update(e,t,r,...a){const l=ca(e,this._firestore);let u;return u=typeof(t=je(t))=="string"||t instanceof Uo?ob(this._dataReader,"Transaction.update",l._key,t,r,a):ab(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=ca(e,this._firestore);return this._transaction.delete(t._key),this}}let g3=class extends p3{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ca(e,this._firestore),r=new $o(this._firestore);return super.get(e).then((a=>new Mr(this._firestore,r,t._key,a._document,new xo(!1,!1),t.converter)))}};function y3(s,e,t){s=ot(s,Wt);const r={...f3,...t};(function(u){if(u.maxAttempts<1)throw new le(Y.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const a=Un(s);return C6(a,(l=>e(new g3(s,l))),r)}function _3(s){s=ot(s,Tt);const e=ot(s.firestore,Wt),t=Un(e);return QA(t,s._key).then((r=>fb(e,s,r)))}function b3(s){s=ot(s,Tt);const e=ot(s.firestore,Wt),t=Un(e),r=new $o(e);return S6(t,s._key).then((a=>new Mr(e,r,s._key,a,new xo(a!==null&&a.hasLocalMutations,!0),s.converter)))}function v3(s){s=ot(s,Tt);const e=ot(s.firestore,Wt),t=Un(e);return QA(t,s._key,{source:"server"}).then((r=>fb(e,s,r)))}function x3(s){s=ot(s,Kn);const e=ot(s.firestore,Wt),t=Un(e),r=new $o(e);return dN(s._query),$A(t,s._query).then((a=>new rs(e,r,s,a)))}function w3(s){s=ot(s,Kn);const e=ot(s.firestore,Wt),t=Un(e),r=new $o(e);return A6(t,s._query).then((a=>new rs(e,r,s,a)))}function E3(s){s=ot(s,Kn);const e=ot(s.firestore,Wt),t=Un(e),r=new $o(e);return $A(t,s._query,{source:"server"}).then((a=>new rs(e,r,s,a)))}function tI(s,e,t){s=ot(s,Tt);const r=ot(s.firestore,Wt),a=mp(s.converter,e,t),l=Go(r);return ch(r,[cp(l,"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,Vt.none())])}function nI(s,e,t,...r){s=ot(s,Tt);const a=ot(s.firestore,Wt),l=Go(a);let u;return u=typeof(e=je(e))=="string"||e instanceof Uo?ob(l,"updateDoc",s._key,e,t,r):ab(l,"updateDoc",s._key,e),ch(a,[u.toMutation(s._key,Vt.exists(!0))])}function T3(s){return ch(ot(s.firestore,Wt),[new Dc(s._key,Vt.none())])}function I3(s,e){const t=ot(s.firestore,Wt),r=Rm(s),a=mp(s.converter,e),l=Go(s.firestore);return ch(t,[cp(l,"addDoc",r._key,a,s.converter!==null,{}).toMutation(r._key,Vt.exists(!1))]).then((()=>r))}function yN(s,...e){s=je(s);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Ty(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ty(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let l,u,m;if(s instanceof Tt)u=ot(s.firestore,Wt),m=Cc(s._key.path),l={next:y=>{e[r]&&e[r](fb(u,s,y))},error:e[r+1],complete:e[r+2]};else{const y=ot(s,Kn);u=ot(y.firestore,Wt),m=y._query;const x=new $o(u);l={next:_=>{e[r]&&e[r](new rs(u,x,y,_))},error:e[r+1],complete:e[r+2]},dN(s._query)}const g=Un(u);return I6(g,m,a,l)}function S3(s,e){s=ot(s,Wt);const t=Un(s),r=Ty(e)?e:{next:e};return R6(t,r)}function ch(s,e){const t=Un(s);return N6(t,e)}function fb(s,e,t){const r=t.docs.get(e._key),a=new $o(s);return new Mr(s,a,e._key,r,new xo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){r4(Sa),_a(new zs("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),m=new Wt(new l4(r.getProvider("auth-internal")),new d4(u,r.getProvider("app-check-internal")),Y4(u,a),u);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Zr(XT,JT,e),Zr(XT,JT,"esm2020")})();const A3="@firebase/firestore-compat",N3="0.4.4";function mb(s,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new le("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function rI(){if(typeof Uint8Array>"u")throw new le("unimplemented","Uint8Arrays are not available in this environment.")}function sI(){if(!Q4())throw new le("unimplemented","Blobs are unavailable in Firestore in this environment.")}let _N=class Iy{constructor(e){this._delegate=e}static fromBase64String(e){return sI(),new Iy(On.fromBase64String(e))}static fromUint8Array(e){return rI(),new Iy(On.fromUint8Array(e))}toBase64(){return sI(),this._delegate.toBase64()}toUint8Array(){return rI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Sy(s){return R3(s,["next","error","complete"])}function R3(s,e){if(typeof s!="object"||s===null)return!1;const t=s;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}class C3{enableIndexedDbPersistence(e,t){return U6(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return z6(e._delegate)}clearIndexedDbPersistence(e){return B6(e._delegate)}}class bN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof va||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&qs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){V6(this._delegate,e,t,r)}enableNetwork(){return F6(this._delegate)}disableNetwork(){return H6(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,BS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return q6(this._delegate)}onSnapshotsInSync(e){return S3(this._delegate,e)}get app(){if(!this._appCompat)throw new le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ec(this,JA(this._delegate,e))}catch(t){throw Gn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vr(this,Rm(this._delegate,e))}catch(t){throw Gn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Hn(this,M6(this._delegate,e))}catch(t){throw Gn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return y3(this._delegate,t=>e(new vN(this,t)))}batch(){return Un(this._delegate),new xN(new m3(this._delegate,e=>ch(this._delegate,e)))}loadBundle(e){return G6(this._delegate,e)}namedQuery(e){return Q6(this._delegate,e).then(t=>t?new Hn(this,t):null)}}class pp extends cb{constructor(e){super(),this.firestore=e}convertBytes(e){return new _N(new On(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Vr.forKey(t,this.firestore,null)}}function k3(s){s4(s)}class vN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new pp(e)}get(e){const t=wo(e);return this._delegate.get(t).then(r=>new zd(this._firestore,new Mr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=wo(e);return r?(mb("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=wo(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=wo(e);return this._delegate.delete(t),this}}class xN{constructor(e){this._delegate=e}set(e,t,r){const a=wo(e);return r?(mb("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=wo(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=wo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bo{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new yd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bd(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Bo.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new Bo(e,new pp(e),t),a.set(t,l)),l}}Bo.INSTANCES=new WeakMap;class Vr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vr(t,new Tt(t._delegate,r,new ye(e)))}static forKey(e,t,r){return new Vr(t,new Tt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ec(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ec(this.firestore,JA(this._delegate,e))}catch(t){throw Gn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=je(e),e instanceof Tt?ZA(this._delegate,e):!1}set(e,t){t=mb("DocumentReference.set",t);try{return t?tI(this._delegate,e,t):tI(this._delegate,e)}catch(r){throw Gn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?nI(this._delegate,e):nI(this._delegate,e,t,...r)}catch(a){throw Gn(a,"updateDoc()","DocumentReference.update()")}}delete(){return T3(this._delegate)}onSnapshot(...e){const t=wN(e),r=EN(e,a=>new zd(this.firestore,new Mr(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return yN(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=b3(this._delegate):e?.source==="server"?t=v3(this._delegate):t=_3(this._delegate),t.then(r=>new zd(this.firestore,new Mr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Vr(this.firestore,e?this._delegate.withConverter(Bo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Gn(s,e,t){return s.message=s.message.replace(e,t),s}function wN(s){for(const e of s)if(typeof e=="object"&&!Sy(e))return e;return{}}function EN(s,e){let t;return Sy(s[0])?t=s[0]:Sy(s[1])?t=s[1]:typeof s[0]=="function"?t={next:s[0],error:s[1],complete:s[2]}:t={next:s[1],error:s[2],complete:s[3]},{next:r=>{t.next&&t.next(e(r))},error:t.error?.bind(t),complete:t.complete?.bind(t)}}class zd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gN(this._delegate,e._delegate)}}class Bd extends zd{data(e){const t=this._delegate.data(e);return this._delegate._converter||i4(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class Hn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pp(e)}where(e,t,r){try{return new Hn(this.firestore,ia(this._delegate,r3(e,t,r)))}catch(a){throw Gn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Hn(this.firestore,ia(this._delegate,s3(e,t)))}catch(r){throw Gn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Hn(this.firestore,ia(this._delegate,i3(e)))}catch(t){throw Gn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Hn(this.firestore,ia(this._delegate,a3(e)))}catch(t){throw Gn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Hn(this.firestore,ia(this._delegate,o3(...e)))}catch(t){throw Gn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Hn(this.firestore,ia(this._delegate,l3(...e)))}catch(t){throw Gn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Hn(this.firestore,ia(this._delegate,c3(...e)))}catch(t){throw Gn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Hn(this.firestore,ia(this._delegate,u3(...e)))}catch(t){throw Gn(t,"endAt()","Query.endAt()")}}isEqual(e){return eN(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=w3(this._delegate):e?.source==="server"?t=E3(this._delegate):t=x3(this._delegate),t.then(r=>new Ay(this.firestore,new rs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=wN(e),r=EN(e,a=>new Ay(this.firestore,new rs(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return yN(this._delegate,t,r)}withConverter(e){return new Hn(this.firestore,e?this._delegate.withConverter(Bo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class D3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Bd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ay{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Hn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new D3(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Bd(this._firestore,r))})}isEqual(e){return gN(this._delegate,e._delegate)}}class Ec extends Hn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vr(this.firestore,e):null}doc(e){try{return e===void 0?new Vr(this.firestore,Rm(this._delegate)):new Vr(this.firestore,Rm(this._delegate,e))}catch(t){throw Gn(t,"doc()","CollectionReference.doc()")}}add(e){return I3(this._delegate,e).then(t=>new Vr(this.firestore,t))}isEqual(e){return ZA(this._delegate,e._delegate)}withConverter(e){return new Ec(this.firestore,e?this._delegate.withConverter(Bo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wo(s){return ot(s,Tt)}class pb{constructor(...e){this._delegate=new Uo(...e)}static documentId(){return new pb(Pt.keyField().canonicalString())}isEqual(e){return e=je(e),e instanceof Uo?this._delegate._internalPath.isEqual(e._internalPath):!1}}class yo{static serverTimestamp(){const e=J6();return e._methodName="FieldValue.serverTimestamp",new yo(e)}static delete(){const e=X6();return e._methodName="FieldValue.delete",new yo(e)}static arrayUnion(...e){const t=Z6(...e);return t._methodName="FieldValue.arrayUnion",new yo(t)}static arrayRemove(...e){const t=e3(...e);return t._methodName="FieldValue.arrayRemove",new yo(t)}static increment(e){const t=t3(e);return t._methodName="FieldValue.increment",new yo(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const j3={Firestore:bN,GeoPoint:ts,Timestamp:dt,Blob:_N,Transaction:vN,WriteBatch:xN,DocumentReference:Vr,DocumentSnapshot:zd,Query:Hn,QueryDocumentSnapshot:Bd,QuerySnapshot:Ay,CollectionReference:Ec,FieldPath:pb,FieldValue:yo,setLogLevel:k3,CACHE_SIZE_UNLIMITED:L6};function P3(s,e){s.INTERNAL.registerComponent(new zs("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps({...j3}))}function V3(s){P3(s,(e,t)=>new bN(e,t,new C3)),s.registerVersion(A3,N3)}V3(es);const TN={apiKey:"AIzaSyDS5RsnYL49tertpcIUXPa3dppw_soU1FQ",authDomain:"led-react-6204e.firebaseapp.com",projectId:"led-react-6204e",storageBucket:"led-react-6204e.firebasestorage.app",messagingSenderId:"500086523818",appId:"1:500086523818:web:74b4a57f9c55730eee4dd3",measurementId:"G-B0D52YG6QQ"};let km;es.apps.length?km=es.app():km=es.initializeApp(TN);const M3=es.apps.find(s=>s.name==="secondary")?es.app("secondary"):es.initializeApp(TN,"secondary"),Ny=km.auth(),Dt=km.firestore(),cn="admire-signage-external",Le=(s,e="INR",t=!1,r=!1)=>{let a=0,l=0;if(t)l=1;else if(r){const u=s%1===0;a=u?0:2,l=u?0:2}else a=0,l=0;return new Intl.NumberFormat(e==="INR"?"en-IN":"en-US",{style:"currency",currency:e,minimumFractionDigits:a,maximumFractionDigits:l,notation:t?"compact":"standard"}).format(s)},Ry=()=>Math.random().toString(36).substr(2,9).toUpperCase(),Eo=(s,e,t,r)=>{if(!s||!e)return null;const{screenQty:a,targetWidth:l,targetHeight:u,unit:m,selectedIndoor:g,assemblyMode:y,selectedPitch:x,selectedModuleId:_,selectedCabinetId:E,selectedCardId:D,selectedSMPSId:L,selectedProcId:R,sizingMode:B,readyId:z,margin:ne,extras:Z,overrides:Se,extraComponents:se,pricingMode:pe,targetSellPrice:S,commercials:N,terms:k}=s,V=Number(a||1),T=Ee=>{if(!Ee)return 0;const Me=Number(Ee.price||0),Qe=Number(Ee.carriage||0),Ur=Me+Qe;return Ee.currency==="USD"?Ur*r:Ur};let P,C,_e,be,U,oe=0;if(y==="assembled"){if(P=e.find(Ee=>Ee.id===_),C=e.find(Ee=>Ee.id===E),_e=e.find(Ee=>Ee.id===D),be=e.find(Ee=>Ee.id===L),U=e.find(Ee=>Ee.id===R),!P||!C)return null}else{const Ee=e.find(Me=>Me.id===z);if(U=e.find(Me=>Me.id===R),!Ee)return null;P=Ee,C=Ee}const fe=m==="m"?l*1e3:l*304.8,Ve=m==="m"?u*1e3:u*304.8,Fe=fe/C.width,M=Ve/C.height;let W,me;B==="up"?(W=Math.ceil(Fe),me=Math.ceil(M)):B==="down"?(W=Math.max(1,Math.floor(Fe)),me=Math.max(1,Math.floor(M))):(W=Math.max(1,Math.round(Fe)),me=Math.max(1,Math.round(M)));const we=W*C.width,te=me*C.height,ee=W*me,ce=we*te/92903;let ve=[];if(y==="assembled"){const Ee=Math.floor(C.width/P.width)*Math.floor(C.height/P.height);oe=ee*Ee;let Me=ee,Qe=1;if(P.maxPower&&be&&be.amps&&be.voltage){const Ei=C.width/1e3*(C.height/1e3)*Number(P.maxPower),ja=Number(be.amps)*Number(be.voltage);ja>0&&(Qe=Math.ceil(Ei/ja),Me=Qe*ee)}ve=[{id:"modules",inventoryId:_,name:"Modules",spec:`${P.brand} ${P.model}`,qty:oe,unit:T(P),total:oe*T(P),type:"led"},{id:"cabinets",inventoryId:E,name:"Cabinets",spec:`${C.brand} ${C.model}`,qty:ee,unit:T(C),total:ee*T(C),type:"led"},{id:"cards",inventoryId:D,name:"Cards",spec:_e?_e.brand:"-",qty:ee,unit:T(_e),total:ee*T(_e),type:"led"},{id:"smps",inventoryId:L,name:"SMPS",spec:be?`${be.brand} (${Qe}/cab)`:"-",qty:Me,unit:T(be),total:Me*T(be),type:"led"}]}else ve=[{id:"ready",inventoryId:z,name:"LED Panels (Ready)",spec:`${C.brand} ${C.model}`,qty:ee,unit:T(C),total:ee*T(C),type:"led"}],oe=ee;ve.push({id:"processor",inventoryId:R,name:"Processor",spec:U?U.brand:"Select Processor",qty:1,unit:U?T(U):0,total:U?T(U):0,type:"service"}),se&&se.length>0&&se.forEach(Ee=>{const Me=e.find(Qe=>Qe.id===Ee.componentId);if(Me){const Qe=Ee.type==="cabinet"?Ee.qty*ee:Ee.qty;ve.push({id:Ee.id,inventoryId:Ee.componentId,name:`Extra: ${Me.type}`,spec:`${Me.brand} ${Me.model}`,qty:Qe,unit:T(Me),total:Qe*T(Me),type:Me.type==="processor"?"service":"led"})}else ve.push({id:Ee.id,inventoryId:"",name:"Extra Component",spec:"Select Item...",qty:Ee.qty||1,unit:0,total:0,type:"led"})});const Ae=ve.map(Ee=>{if(Se&&Se[Ee.id]){const Me=Se[Ee.id],Qe=Me.qty!==void 0&&Me.qty!==""?Number(Me.qty):Ee.qty,Ur=Me.rate!==void 0&&Me.rate!==""?Number(Me.rate):Ee.unit;return{...Ee,qty:Qe,unit:Ur,total:Qe*Ur,isOverridden:!0}}return Ee}),Ge=Ae.filter(Ee=>Ee.type==="led").reduce((Ee,Me)=>Ee+Me.total,0),xn=Ae.filter(Ee=>Ee.type!=="led").reduce((Ee,Me)=>Ee+Me.total,0),dn={};let lr=0,wn=0;Array.isArray(Z)&&Z.forEach(Ee=>{let Me=0;const Qe=Ge;Ee.type==="pct"?Me=Qe*(Number(Ee.val)/100):Me=Number(Ee.val),dn[Ee.id]=Me,lr+=Me});const zn=N?.installation||{cost:0,costType:"abs"};let Dn=0;zn.costType==="pct"?Dn=xn*(Number(zn.cost)/100):(zn.unit||"sqft")==="sqft"?Dn=Number(zn.cost)*ce:Dn=Number(zn.cost),dn.install=Dn,wn+=Dn;const Yn=N?.structure||{cost:0,costType:"abs"};let Wn=0;Yn.costType==="pct"?Wn=xn*(Number(Yn.cost)/100):(Yn.unit||"sqft")==="sqft"?Wn=Number(Yn.cost)*ce:Wn=Number(Yn.cost),dn.structure=Wn,wn+=Wn;const st=Ge+lr,ht=xn+wn,jn=st+ht,is=jn*V,$=N||{processor:{val:0},installation:{val:0},structure:{val:0}};let Ie=0;if($.processor.unit==="unit"){const Ee=Ae.find(Qe=>Qe.id==="processor"),Me=Ee?Ee.qty:1;Ie=Number($.processor.val)*Me*V}else Ie=Number($.processor.val)*V;let rt=0;$.installation.unit==="sqft"?rt=Number($.installation.val)*ce*V:rt=Number($.installation.val)*V;let ue=0;$.structure.unit==="sqft"?ue=Number($.structure.val)*ce*V:ue=Number($.structure.val)*V;const Xt=Ie+rt+ue;let wt=0,as=ne;const Hs=pe||"margin";if(Hs==="margin")wt=st*(1+ne/100);else{const Ee=Number(S||0);Hs==="screen"?wt=Ee:Hs==="sqft"?wt=Ee*ce:Hs==="sqm"&&(wt=Ee*(ce/10.7639)),st>0?as=(wt-st)/st*100:as=0}const Lr=wt*V+Xt,Bn=Lr-is;return{gridCols:W,gridRows:me,finalWidth:(we/1e3).toFixed(2),finalHeight:(te/1e3).toFixed(2),totalCabinets:ee,moduleType:P,cabinetType:C,processor:U,breakdown:{qtyModules:oe,ledOps:lr,serviceOps:wn},detailedItems:Ae,calculatedExtras:dn,costLEDPerScreen:st,costServicesPerScreen:ht,costPerScreen:jn,totalProjectCost:is,finalPrice:Lr,totalProjectSell:Lr,assemblyMode:y,screenQty:V,commercials:{sellProcTotal:Ie,sellInstallTotal:rt,sellStructureTotal:ue},terms:k||{price:"Ex-works Mumbai",deliveryWeeks:10,payment:[]},matrix:{cost:{sqft:jn/ce,unit:jn,total:is},margin:{sqft:Bn/V/ce,unit:Bn/V,total:Bn},sell:{sqft:Lr/V/ce,unit:Lr/V,total:Lr},led:{cost:st,sell:wt,margin:wt-st,marginPct:as},sqft:{perScreen:ce,total:ce*V}}}},Mt={COMPANY:{NAME:"ADMIRE SIGN & DISPLAY PVT. LTD.",ADDRESS_1:"102, Priya Industrial Estate 4, K.T. Industrial Estate",ADDRESS_2:"Kherpada, Waliv, Vasai East, Mumbai - 401208",EMAIL:"info@admiresign.com",WEB:"www.admiresign.com"},DEFAULTS:{EXCHANGE_RATE:90,GST_RATE:18,DELIVERY_WEEKS:10,PRICE_BASIS:"Ex-works Mumbai",PAYMENT_TERMS:[{name:"Advance with PO",percent:60},{name:"Before dispatch",percent:30},{name:"After installation",percent:10}]},TEXT:{WARRANTY:"Against any manufacturing defect. Offsite support for troubleshooting. Client can sign up for Admires excellent AMC services for on-site support. Serious fault will be attended to by our technical team within 48-72 hours upon receipt of written complaints with pictures/videos of the fault. 2% Extra spares includes Modules, Power Supply, Receiver Card (if there are over 100 cabinets), Flat cables, 5V connectors, Power and Data Cable. Any damage to the screen due to force majure, natural disasters, electricity surge, earthing, accident, etc is not covered under the warranty. Power supplies damage due to power fluctuation will not be covered under warranty. Power supply will be under the direct warranty of the OEM supplier. If the repair requires additional components then these will be charged extra. Brightness control meter, Video Processor & Timer can be supplied at extra cost. Maintenance team visit in six months during warranty period.",SCOPE_STRUCTURE:"Foundation & Structure. Structural stability certificate from a consultant. For wall mounted outdoor screen, Client to ensure strong and solid brick wall, RCC beams and column base. For front access indoor screen, Client to ensure a strong base. Indoor Structures cannot be mounted on ACP Sheets, Gypsum boards etc. Scaffolding, Aluminium composite panelling if required. Personnel for troubleshooting training during the screen installation. Helpers for loading, unloading and installing the display at site.",SCOPE_ELEC:"Electricity 3 phase electric power near the site, not more than 5m from the site, before the commencement of work. Electrical distribution board within 5m from the screen. Conduited electrical cable. 4mm 2 core armored cable or 4mm 3 core cables, 32 ampere MCB, 1 switch board with 2 sockets. Good quality Stabiliser and timers. 1 Certified electrical engineer for all connections from power Main to the unit. Ventilation machineries such as Air Conditioners or Fans.",SCOPE_NET:"CAT 6 or Optic Fiber Data cable and its terminations. Data points near the screen. Space with power sockets for Video wall Controllers. Data source/AV room within 80 meters of the screen. Connections to be availed through CAT 6 cables duly terminated with RJ45. If the length is farther then Fiber optic converter will be required. Fiber optic converters, if required, will be charged extra. In case the fiber optic converter is required, single mode Fiber optic cable is to be provided by client from source point to the display, terminated as per specs with Patch Chords from the splicing unit to connect to screen.",SCOPE_SOFT:"3rd party Software for Content upload on screen will be provided by the controller card supplier. Admire cannot provide regular updates and application stability.",SCOPE_PERM:"All permissions such as PTW, work permits & gate passes for workers, engineers and executives.",SCOPE_PC:"As per specification, to be arranged by client.",VALIDITY:"30 days."}},O3=({user:s,userRole:e,transactions:t=[],readOnly:r=!1,exchangeRate:a=1})=>{const[l,u]=Bt.useState([]),[m,g]=Bt.useState(null),[y,x]=Bt.useState(!1),[_,E]=Bt.useState({type:"module",brand:"",model:"",vendor:"",pitch:"",width:"",height:"",length:"",size:"",price:"",carriage:"",currency:"INR",indoor:!0,brightness:"",refreshRate:"",ledType:"",lampMake:"",material:"",weight:"",avgPower:"",maxPower:"",contrast:"",viewAngleH:"",viewAngleV:"",ipFront:"",ipBack:"",ports:"",amps:"",voltage:""}),[D,L]=Bt.useState(!0),[R,B]=Bt.useState(!1),[z,ne]=Bt.useState(null);Bt.useEffect(()=>{if(!s||!Dt)return;const T=Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("inventory").onSnapshot(P=>{const C=P.docs.map(_e=>({id:_e.id,..._e.data()}));u(C),L(!1)},P=>{});return()=>T()},[s]);const Z=T=>["module","cabinet","card","smps","processor","ready","tool"].includes(T),Se=async()=>{if(["frc_cable","power_cable"].includes(_.type)){if(!_.model||!_.vendor||!_.ports||!_.length||!_.price)return alert("Required: Model, Vendor, No. of Pins, Length, and Price.")}else if(["screw","bolt"].includes(_.type)){if(!_.model||!_.vendor||!_.material||!_.size||!_.length||!_.price)return alert("Required: Model, Vendor, Type (SS/MS), Size, Length, and Price.")}else if(_.type==="gasket"){if(!_.model||!_.vendor||!_.width||!_.length||!_.price)return alert("Required: Model, Vendor, Width, Length, and Price.")}else if(_.type==="tool"){if(!_.brand||!_.model||!_.material||!_.price)return alert("Required: Brand, Model, Tool Type, and Price.")}else if(_.type==="accessory"){if(!_.model||!_.price)return alert("Model/Description and Price are required.")}else if(_.type==="module"){if(!_.pitch||!_.brand||!_.model||!_.price||!_.width||!_.height)return alert("Please fill all compulsory (*) fields.")}else if(_.type==="cabinet"){if(!_.brand||!_.material||!_.model||!_.price||!_.width||!_.height)return alert("Please fill all compulsory (*) fields.")}else if(_.type==="card"||_.type==="processor"){if(!_.brand||!_.model||!_.price)return alert("Please fill all compulsory (*) fields.")}else if(_.type==="smps"){if(!_.brand||!_.model||!_.price||!_.amps||!_.voltage)return alert("Please fill all compulsory (*) fields.")}else if(_.type==="ready"&&(!_.pitch||!_.brand||!_.model||!_.price))return alert("Please fill all compulsory (*) fields.");try{const T=Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("inventory"),P={..._,brand:_.brand||"",width:Number(_.width||0),height:Number(_.height||0),length:Number(_.length||0),price:Number(_.price||0),carriage:Number(_.carriage||0),pitch:Number(_.pitch||0),currency:_.currency||"INR",indoor:_.indoor==="true"||_.indoor===!0,material:_.material||"",size:_.size||"",weight:_.weight?Number(_.weight):0,avgPower:_.avgPower?Number(_.avgPower):0,maxPower:_.maxPower?Number(_.maxPower):0,brightness:_.brightness?parseInt(_.brightness):0,refreshRate:_.refreshRate?parseInt(_.refreshRate):0,viewAngleH:_.viewAngleH?parseInt(_.viewAngleH):0,viewAngleV:_.viewAngleV?parseInt(_.viewAngleV):0,ipFront:_.ipFront?parseInt(_.ipFront):0,ipBack:_.ipBack?parseInt(_.ipBack):0,ports:_.ports?parseInt(_.ports):0,amps:_.amps?Number(_.amps):0,voltage:_.voltage?Number(_.voltage):0,updatedAt:new Date};m?(await T.doc(m).update(P),g(null),x(!1)):(await T.add({...P,createdAt:new Date}),E({type:_.type,brand:"",model:"",vendor:"",pitch:"",width:"",height:"",length:"",size:"",price:"",carriage:"",currency:"INR",indoor:!0,brightness:"",refreshRate:"",ledType:"",lampMake:"",material:"",weight:"",avgPower:"",maxPower:"",contrast:"",viewAngleH:"",viewAngleV:"",ipFront:"",ipBack:"",ports:"",amps:"",voltage:""}),alert("Item Added!"))}catch{}},se=T=>{E({...T,vendor:T.vendor||"",currency:T.currency||"INR",carriage:T.carriage||0,length:T.length||"",size:T.size||"",brand:T.brand||""}),g(T.id),x(!0),window.scrollTo({top:0,behavior:"smooth"})},pe=()=>{g(null),x(!1),E({type:"module",brand:"",model:"",vendor:"",pitch:"",width:"",height:"",length:"",size:"",price:"",carriage:"",currency:"INR",indoor:!0,brightness:"",refreshRate:"",ledType:"",lampMake:"",material:"",weight:"",avgPower:"",maxPower:"",contrast:"",viewAngleH:"",viewAngleV:"",ipFront:"",ipBack:"",ports:"",amps:"",voltage:""})},S=async T=>{confirm("Delete this item?")&&await Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("inventory").doc(T).delete()},N=T=>{ne(T),B(!0)},k=T=>{const P=t.filter(_e=>_e.itemId===T),C={};return P.forEach(_e=>{const be=_e.batch||"Unbatched",U=_e.type==="in"?Number(_e.qty):-Number(_e.qty);C[be]||(C[be]=0),C[be]+=U}),Object.entries(C).map(([_e,be])=>({name:_e,qty:be})).filter(_e=>_e.qty!==0).sort((_e,be)=>be.qty-_e.qty)},V=[...l].sort((T,P)=>{const C=(T.type||"").toLowerCase(),_e=(P.type||"").toLowerCase();if(C<_e)return-1;if(C>_e)return 1;const be=(T.brand+" "+T.model).toLowerCase(),U=(P.brand+" "+P.model).toLowerCase();return be<U?-1:be>U?1:0});return d.jsxs("div",{className:"p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-slate-800 dark:text-white",children:[d.jsx(_d,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})," Components Management"]}),!y&&!r&&d.jsxs("button",{onClick:()=>x(!0),className:"bg-teal-600 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-teal-700 transition-colors",children:[d.jsx(_o,{size:16})," Add New Component"]})]}),y&&d.jsxs("div",{className:`grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 p-6 rounded-lg transition-colors border shadow-sm ${m?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700/50 border-slate-200 dark:border-slate-600"}`,children:[d.jsxs("div",{className:"col-span-2 md:col-span-4 flex justify-between items-center mb-2 pb-2 border-b border-slate-200 dark:border-slate-600",children:[d.jsx("h3",{className:"text-sm font-bold uppercase text-slate-500 dark:text-slate-400",children:m?"Editing Item":"Add New Item"}),d.jsxs("button",{onClick:pe,className:"text-xs text-slate-500 hover:text-red-500 flex items-center gap-1",children:[d.jsx(ec,{size:14})," Close"]})]}),d.jsxs("div",{className:"col-span-2 md:col-span-4 mb-2",children:[d.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-1",children:"Component Type"}),d.jsxs("select",{className:"p-2 w-full border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.type,onChange:T=>E({..._,type:T.target.value}),children:[d.jsxs("optgroup",{label:"Core Components",children:[d.jsx("option",{value:"module",children:"LED Module"}),d.jsx("option",{value:"cabinet",children:"Cabinet"}),d.jsx("option",{value:"ready",children:"Ready Unit"}),d.jsx("option",{value:"card",children:"Receiving Card"}),d.jsx("option",{value:"smps",children:"SMPS (Power Supply)"}),d.jsx("option",{value:"processor",children:"Processor / Sender"})]}),d.jsxs("optgroup",{label:"Cables & Fasteners",children:[d.jsx("option",{value:"frc_cable",children:"FRC Cable"}),d.jsx("option",{value:"power_cable",children:"Power Cable"}),d.jsx("option",{value:"screw",children:"Screw"}),d.jsx("option",{value:"bolt",children:"Bolt"}),d.jsx("option",{value:"gasket",children:"Rubber Gasket"}),d.jsx("option",{value:"tool",children:"Tools"}),d.jsx("option",{value:"accessory",children:"Other Accessory"})]})]})]}),d.jsx("input",{placeholder:Z(_.type)?"Brand*":"Brand (Optional)",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.brand,onChange:T=>E({..._,brand:T.target.value})}),d.jsx("input",{placeholder:"Model / SKU*",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.model,onChange:T=>E({..._,model:T.target.value})}),d.jsxs("div",{className:"flex gap-2 items-center col-span-2 md:col-span-1",children:[d.jsx("div",{className:"flex-1 min-w-[100px]",children:d.jsx("input",{placeholder:"Base Rate*",type:"number",className:"p-2 w-full border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.price,onChange:T=>E({..._,price:T.target.value})})}),d.jsx("span",{className:"text-slate-400 font-bold mb-3",children:"+"}),d.jsx("div",{className:"flex-1 min-w-[80px]",children:d.jsx("input",{placeholder:"Carriage",type:"number",className:"p-2 w-full border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.carriage,onChange:T=>E({..._,carriage:T.target.value})})}),d.jsx("div",{className:"flex-none mb-3",children:d.jsxs("select",{className:"p-2 border rounded bg-slate-100 dark:bg-slate-600 dark:border-slate-600 dark:text-white",value:_.currency,onChange:T=>E({..._,currency:T.target.value}),children:[d.jsx("option",{value:"INR",children:"INR"}),d.jsx("option",{value:"USD",children:"USD"})]})})]}),_.type!=="cabinet"&&d.jsx("input",{placeholder:"Vendor",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.vendor,onChange:T=>E({..._,vendor:T.target.value})}),["frc_cable","power_cable"].includes(_.type)&&d.jsxs(d.Fragment,{children:[d.jsx("input",{placeholder:"No. of Pins*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.ports,onChange:T=>E({..._,ports:T.target.value})}),d.jsx("input",{placeholder:"Length (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.length,onChange:T=>E({..._,length:T.target.value})})]}),["screw","bolt"].includes(_.type)&&d.jsxs(d.Fragment,{children:[d.jsxs("select",{className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.material,onChange:T=>E({..._,material:T.target.value}),children:[d.jsx("option",{value:"",children:"Select Type*"}),d.jsx("option",{value:"SS",children:"SS (Stainless Steel)"}),d.jsx("option",{value:"MS",children:"MS (Mild Steel)"})]}),d.jsx("input",{placeholder:"Size (e.g. M3)*",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.size,onChange:T=>E({..._,size:T.target.value})}),d.jsx("input",{placeholder:"Length (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.length,onChange:T=>E({..._,length:T.target.value})})]}),_.type==="gasket"&&d.jsxs(d.Fragment,{children:[d.jsx("input",{placeholder:"Width (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.width,onChange:T=>E({..._,width:T.target.value})}),d.jsx("input",{placeholder:"Length (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.length,onChange:T=>E({..._,length:T.target.value})})]}),_.type==="tool"&&d.jsx("input",{placeholder:"Tool Type (e.g. Drill)*",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.material,onChange:T=>E({..._,material:T.target.value})}),(_.type==="module"||_.type==="ready")&&d.jsxs(d.Fragment,{children:[d.jsx("input",{placeholder:"Pitch (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white border-teal-500 ring-1 ring-teal-500",value:_.pitch,onChange:T=>E({..._,pitch:T.target.value})}),d.jsxs("select",{className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white border-teal-500 ring-1 ring-teal-500",value:_.indoor,onChange:T=>E({..._,indoor:T.target.value}),children:[d.jsx("option",{value:"true",children:"Indoor"}),d.jsx("option",{value:"false",children:"Outdoor"})]}),d.jsx("input",{placeholder:"LED Type (e.g. SMD2121)",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.ledType,onChange:T=>E({..._,ledType:T.target.value})}),d.jsx("input",{placeholder:"Lamp Make",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.lampMake,onChange:T=>E({..._,lampMake:T.target.value})}),d.jsx("input",{placeholder:"Width (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.width,onChange:T=>E({..._,width:T.target.value})}),d.jsx("input",{placeholder:"Height (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.height,onChange:T=>E({..._,height:T.target.value})}),d.jsx("input",{placeholder:"Brightness (nits)",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.brightness,onChange:T=>E({..._,brightness:T.target.value})}),d.jsx("input",{placeholder:"Refresh Rate (Hz)",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.refreshRate,onChange:T=>E({..._,refreshRate:T.target.value})}),d.jsx("input",{placeholder:"Avg Power (W)",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.avgPower,onChange:T=>E({..._,avgPower:T.target.value})}),d.jsx("input",{placeholder:"Max Power (W)",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.maxPower,onChange:T=>E({..._,maxPower:T.target.value})}),d.jsx("input",{placeholder:"Contrast Ratio",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.contrast,onChange:T=>E({..._,contrast:T.target.value})}),d.jsx("input",{placeholder:"Weight (kg)",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.weight,onChange:T=>E({..._,weight:T.target.value})}),d.jsxs("div",{className:"flex gap-2 col-span-2 md:col-span-2",children:[d.jsx("input",{placeholder:"View Angle (H)",className:"flex-1 p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.viewAngleH,onChange:T=>E({..._,viewAngleH:T.target.value})}),d.jsx("input",{placeholder:"View Angle (V)",className:"flex-1 p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.viewAngleV,onChange:T=>E({..._,viewAngleV:T.target.value})})]}),d.jsxs("div",{className:"flex gap-2 col-span-2 md:col-span-2",children:[d.jsx("input",{placeholder:"IP Rating (Front)",className:"flex-1 p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.ipFront,onChange:T=>E({..._,ipFront:T.target.value})}),d.jsx("input",{placeholder:"IP Rating (Back)",className:"flex-1 p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.ipBack,onChange:T=>E({..._,ipBack:T.target.value})})]})]}),_.type==="cabinet"&&d.jsxs(d.Fragment,{children:[d.jsx("input",{placeholder:"Material (e.g. Die-Cast)",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.material,onChange:T=>E({..._,material:T.target.value})}),d.jsxs("select",{className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.indoor,onChange:T=>E({..._,indoor:T.target.value}),children:[d.jsx("option",{value:"true",children:"Indoor"}),d.jsx("option",{value:"false",children:"Outdoor"})]}),d.jsx("input",{placeholder:"Width (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.width,onChange:T=>E({..._,width:T.target.value})}),d.jsx("input",{placeholder:"Height (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.height,onChange:T=>E({..._,height:T.target.value})}),d.jsx("input",{placeholder:"Weight (kg)",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.weight,onChange:T=>E({..._,weight:T.target.value})})]}),(_.type==="card"||_.type==="processor")&&d.jsx("input",{placeholder:"Ports / Capacity",type:"text",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.ports,onChange:T=>E({..._,ports:T.target.value})}),_.type==="smps"&&d.jsxs(d.Fragment,{children:[d.jsx("input",{placeholder:"Amps (A)",type:"number",step:"0.1",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.amps,onChange:T=>E({..._,amps:T.target.value})}),d.jsx("input",{placeholder:"Voltage (V)",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:_.voltage,onChange:T=>E({..._,voltage:T.target.value})})]}),d.jsxs("button",{onClick:Se,className:`px-4 py-2 rounded text-white flex items-center justify-center gap-2 hover:opacity-90 transition ${m?"bg-amber-600":"bg-teal-600"} col-span-2 md:col-span-4`,children:[m?d.jsx(To,{size:16}):d.jsx(_o,{size:16})," ",m?"Update Item":"Add Item"]})]}),d.jsxs("div",{className:"mt-6",children:[d.jsx("div",{className:"md:hidden space-y-4",children:V.map(T=>{const P=t.filter(_e=>_e.itemId===T.id).reduce((_e,be)=>_e+(be.type==="in"?Number(be.qty):-Number(be.qty)),0),C=["module","cabinet","card","smps","processor"].includes(T.type);return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm relative overflow-hidden",children:[d.jsx("div",{className:`absolute top-0 right-0 px-3 py-1 rounded-bl-lg text-[10px] font-bold uppercase tracking-wider ${C?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:T.type.replace("_"," ")}),d.jsxs("div",{className:"pr-16 mb-3",children:[d.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:[T.brand," ",T.model]}),T.vendor&&d.jsx("div",{className:"text-xs text-teal-600 font-medium",children:T.vendor})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-xs text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg",children:[d.jsxs("div",{children:[d.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Specs"}),T.type==="module"?d.jsxs("span",{children:["P",T.pitch," ",T.indoor?"In":"Out"]}):["frc_cable","power_cable"].includes(T.type)?d.jsxs("span",{children:[T.ports," pins  ",T.length,"mm"]}):["screw","bolt"].includes(T.type)?d.jsxs("span",{children:[T.material,"  ",T.size,"  ",T.length,"mm"]}):d.jsx("span",{children:T.width?`${T.width}x${T.height||T.length}`:"Standard"})]}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Stock"}),d.jsx("span",{className:`font-bold text-sm ${P<0?"text-red-500":"text-slate-700 dark:text-slate-200"}`,children:P})]}),!r&&d.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-600 pt-2 mt-1 col-span-2",children:[d.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Landed Cost"}),d.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:Le((T.price||0)+(T.carriage||0),T.currency||"INR",!1,!0)})]}),!r&&d.jsxs("div",{className:"col-span-2 border-t border-slate-200 dark:border-slate-600 pt-2 mt-1 text-right",children:[d.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Stock Value ()"}),d.jsx("span",{className:"font-bold text-teal-600 dark:text-teal-400",children:Le(T.currency==="USD"?((T.price||0)+(T.carriage||0))*P*a:((T.price||0)+(T.carriage||0))*P,"INR",!1,!0)})]})]}),d.jsxs("div",{className:"flex gap-2",children:[T.type==="module"&&d.jsxs("button",{onClick:()=>N(T),className:"flex-1 py-2 bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 rounded-lg text-xs font-bold flex justify-center items-center gap-2 hover:bg-purple-100 transition-colors",children:[d.jsx($w,{size:14})," Batches"]}),!r&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:()=>se(T),className:"flex-1 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg text-xs font-bold flex justify-center items-center gap-2 hover:bg-slate-200 transition-colors",children:[d.jsx(To,{size:14})," Edit"]}),d.jsxs("button",{onClick:()=>S(T.id),className:"flex-1 py-2 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-xs font-bold flex justify-center items-center gap-2 hover:bg-red-100 transition-colors",children:[d.jsx(Os,{size:14})," Delete"]})]})]})]},T.id)})}),d.jsx("div",{className:"hidden md:block overflow-x-auto rounded border border-slate-200 dark:border-slate-700",children:d.jsxs("table",{className:"w-full text-sm text-left",children:[d.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 uppercase",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3",children:"Type"}),d.jsx("th",{className:"px-4 py-3",children:"Component"}),d.jsx("th",{className:"px-4 py-3",children:"Specs"}),d.jsx("th",{className:"px-4 py-3 text-center",children:"Stock"}),!r&&d.jsx("th",{className:"px-4 py-3",children:"Landed Cost"}),!r&&d.jsx("th",{className:"px-4 py-3 text-right",children:"Stock Value ()"}),d.jsx("th",{className:"px-4 py-3 text-right",children:"Action"})]})}),d.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:V.map(T=>{const P=t.filter(be=>be.itemId===T.id).reduce((be,U)=>be+(U.type==="in"?Number(U.qty):-Number(U.qty)),0),C=(T.price||0)+(T.carriage||0),_e=["module","cabinet","card","smps","processor"].includes(T.type);return d.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-700/50 ${m===T.id?"bg-amber-50 dark:bg-amber-900/20":""}`,children:[d.jsx("td",{className:"px-4 py-3 capitalize",children:d.jsx("span",{className:`px-2 py-1 rounded-full text-xs capitalize ${_e?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300"}`,children:T.type.replace("_"," ")})}),d.jsxs("td",{className:"px-4 py-3 dark:text-slate-200",children:[d.jsxs("div",{className:"font-medium",children:[T.brand," ",T.model]}),T.vendor&&d.jsx("div",{className:"text-[10px] text-teal-600 dark:text-teal-400 mt-0.5",children:T.vendor})]}),d.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-slate-400 text-xs",children:T.type==="module"?`P${T.pitch} ${T.width}x${T.height}`:["frc_cable","power_cable"].includes(T.type)?`${T.ports} pins, ${T.length}mm`:["screw","bolt"].includes(T.type)?`${T.material} ${T.size} x ${T.length}mm`:T.width?`${T.width}x${T.height||T.length}`:"-"}),d.jsx("td",{className:"px-4 py-3 font-bold dark:text-slate-200 text-teal-600 text-center",children:P}),!r&&d.jsx("td",{className:"px-4 py-3 dark:text-slate-200",children:d.jsx("div",{className:"flex flex-col",children:d.jsx("span",{className:"font-semibold",children:Le(C,T.currency||"INR",!1,!0)})})}),!r&&d.jsx("td",{className:"px-4 py-3 font-bold text-right text-teal-600 dark:text-teal-400",children:Le(T.currency==="USD"?C*P*a:C*P,"INR",!1,!0)}),d.jsxs("td",{className:"px-4 py-3 flex gap-2 justify-end",children:[T.type==="module"&&d.jsx("button",{onClick:()=>N(T),className:"text-purple-500 hover:text-purple-700 p-1 bg-purple-50 dark:bg-purple-900/30 rounded",children:d.jsx($w,{size:14})}),!r&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>se(T),className:"text-blue-500 hover:text-blue-700 p-1 bg-blue-50 dark:bg-blue-900/30 rounded",children:d.jsx(To,{size:14})}),d.jsx("button",{onClick:()=>S(T.id),className:"text-red-400 hover:text-red-600 p-1 bg-red-50 dark:bg-red-900/30 rounded",children:d.jsx(Os,{size:14})})]})]})]},T.id)})})]})}),l.length===0&&!D&&d.jsx("div",{className:"text-center py-12 text-slate-400 bg-white dark:bg-slate-800",children:"No items found."})]}),R&&z&&d.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex justify-center items-center p-4",children:d.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:[d.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-800",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Batch Management"}),d.jsxs("p",{className:"text-xs text-slate-500",children:[z.brand," ",z.model]})]}),d.jsx("button",{onClick:()=>B(!1),className:"text-slate-400 hover:text-slate-600",children:d.jsx(ec,{size:20})})]}),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"mb-4 text-xs text-slate-500 dark:text-slate-400 bg-blue-50 dark:bg-blue-900/20 p-3 rounded border border-blue-100 dark:border-blue-800",children:[" To add stock or new batches, please use the ",d.jsx("b",{children:"Stock Ledger"})," tab. This list shows current calculated balances."]}),d.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800 overflow-hidden",children:[d.jsxs("div",{className:"grid grid-cols-2 bg-slate-100 dark:bg-slate-800 p-2 text-xs font-bold text-slate-500 uppercase",children:[d.jsx("div",{children:"Batch No"}),d.jsx("div",{className:"text-right",children:"Current Balance"})]}),d.jsx("div",{className:"max-h-60 overflow-y-auto",children:k(z.id).map((T,P)=>d.jsxs("div",{className:"grid grid-cols-2 p-2 border-b border-slate-100 dark:border-slate-700/50 last:border-0 text-sm items-center",children:[d.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-200",children:T.name}),d.jsx("div",{className:"text-right font-bold text-slate-900 dark:text-white",children:T.qty})]},P))})]})]})]})})]})},L3=({user:s,userRole:e,inventory:t=[],transactions:r=[],readOnly:a=!1})=>{const[l,u]=nt.useState({date:new Date().toISOString().split("T")[0],type:"in",itemId:"",qty:"",remarks:"",batch:""}),[m,g]=nt.useState(null),y=async()=>{if(!l.itemId||!l.qty)return alert("Select Item and Qty");try{const R=Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("transactions");m?(await R.doc(m).update({...l,qty:Number(l.qty),updatedAt:new Date}),g(null)):await R.add({...l,qty:Number(l.qty),createdAt:new Date}),u({date:new Date().toISOString().split("T")[0],type:"in",itemId:"",qty:"",remarks:"",batch:""})}catch{}},x=R=>{u({...R,qty:R.qty}),g(R.id),window.scrollTo({top:0,behavior:"smooth"})},_=()=>{g(null),u({date:new Date().toISOString().split("T")[0],type:"in",itemId:"",qty:"",remarks:"",batch:""})},E=async R=>{confirm("Delete record?")&&await Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("transactions").doc(R).delete()},D=[...r].sort((R,B)=>new Date(B.date)-new Date(R.date)),L=()=>{const R=t.reduce((z,ne)=>{const Z=ne.type||"Other";return z[Z]||(z[Z]=[]),z[Z].push(ne),z},{});return Object.keys(R).sort().map(z=>d.jsx("optgroup",{label:z.replace(/_/g," ").toUpperCase(),children:R[z].sort((ne,Z)=>(ne.brand+" "+ne.model).localeCompare(Z.brand+" "+Z.model)).map(ne=>d.jsxs("option",{value:ne.id,children:[ne.brand," ",ne.model," ",ne.size?`(${ne.size})`:""]},ne.id))},z))};return d.jsxs("div",{className:"p-4 md:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[d.jsx(oI,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"}),d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Stock Ledger"})]}),!a&&d.jsxs("div",{className:`p-4 rounded-lg border mb-6 transition-colors ${m?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700/30 border-slate-200 dark:border-slate-700"}`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-xs font-bold uppercase text-slate-500 dark:text-slate-400",children:m?"Edit Transaction":"New Transaction"}),m&&d.jsxs("button",{onClick:_,className:"text-xs text-red-500 flex items-center gap-1",children:[d.jsx(ec,{size:14})," Cancel"]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Date & Action"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"date",value:l.date,onChange:R=>u({...l,date:R.target.value}),className:"flex-1 p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white"}),d.jsxs("div",{className:"flex rounded overflow-hidden border border-slate-200 dark:border-slate-600",children:[d.jsx("button",{onClick:()=>u({...l,type:"in"}),className:`flex-1 py-2 text-xs font-bold transition-colors flex items-center justify-center gap-1 ${l.type==="in"?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-400":"bg-white dark:bg-slate-700 text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-600"}`,children:"+ STOCK IN"}),d.jsx("button",{onClick:()=>u({...l,type:"out"}),className:`flex-1 py-2 text-xs font-bold transition-colors flex items-center justify-center gap-1 ${l.type==="out"?"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-400":"bg-white dark:bg-slate-700 text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-600"}`,children:"- STOCK OUT"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Component"}),d.jsxs("select",{value:l.itemId,onChange:R=>u({...l,itemId:R.target.value}),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white",children:[d.jsx("option",{value:"",children:"Select Item..."}),L()]}),t.find(R=>R.id===l.itemId)?.type==="module"&&d.jsx("input",{type:"text",placeholder:"Batch No. (e.g. BATCH-A)",value:l.batch||"",onChange:R=>u({...l,batch:R.target.value}),className:"w-full mt-2 p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white font-bold text-purple-600 border-purple-200 focus:border-purple-500 focus:ring-purple-500"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Quantity"}),d.jsx("input",{type:"number",placeholder:"Qty",value:l.qty,onChange:R=>u({...l,qty:R.target.value}),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Location / Source"}),d.jsx("input",{type:"text",placeholder:"Source/Loc",value:l.remarks,onChange:R=>u({...l,remarks:R.target.value}),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white"})]})]}),d.jsx("button",{onClick:y,className:`w-full md:w-auto text-white px-6 py-2 rounded-lg font-bold text-sm transition-colors shadow-sm ${m?"bg-amber-600 hover:bg-amber-700":"bg-teal-600 hover:bg-teal-700"}`,children:m?"Update Transaction":"Add Transaction"})]}),d.jsxs("div",{className:"mt-8",children:[d.jsx("h3",{className:"text-sm font-bold uppercase text-slate-500 dark:text-slate-400 mb-4",children:"Transaction History"}),d.jsxs("div",{className:"md:hidden space-y-3",children:[D.map(R=>{const B=t.find(z=>z.id===R.itemId)||{};return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold uppercase ${R.type==="in"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:R.type==="in"?"IN":"OUT"}),d.jsx("span",{className:"text-xs text-slate-400",children:new Date(R.date).toLocaleDateString()})]}),d.jsxs("div",{className:"font-bold text-slate-800 dark:text-white text-sm mb-0.5",children:[B.brand," ",B.model,R.batch&&d.jsx("span",{className:"ml-2 inline-block bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 text-[10px] px-1.5 py-0.5 rounded border border-purple-200 dark:border-purple-800",children:R.batch})]}),d.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.remarks||"-"})]}),d.jsxs("div",{className:"text-right pl-4 border-l border-slate-100 dark:border-slate-700 ml-2",children:[d.jsxs("span",{className:`block text-lg font-bold ${R.type==="in"?"text-green-600":"text-red-500"}`,children:[R.type==="in"?"+":"-",R.qty]}),!a&&d.jsxs("div",{className:"flex gap-3 justify-end mt-1",children:[d.jsx("button",{onClick:()=>x(R),className:"text-[10px] text-blue-500 hover:text-blue-700 underline",children:"Edit"}),d.jsx("button",{onClick:()=>E(R.id),className:"text-[10px] text-red-400 hover:text-red-600 underline",children:"Delete"})]})]})]},R.id)}),D.length===0&&d.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No transactions yet."})]}),d.jsxs("div",{className:"hidden md:block overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700",children:[d.jsxs("table",{className:"w-full text-sm text-left",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-500 dark:text-slate-400 uppercase text-xs",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3",children:"Date"}),d.jsx("th",{className:"px-4 py-3 text-center",children:"Type"}),d.jsx("th",{className:"px-4 py-3",children:"Component"}),d.jsx("th",{className:"px-4 py-3",children:"Specs"}),d.jsx("th",{className:"px-4 py-3 text-center",children:"Qty"}),d.jsx("th",{className:"px-4 py-3",children:"Loc/Source"}),d.jsx("th",{className:"px-4 py-3 text-right",children:"Action"})]})}),d.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:D.map(R=>{const B=t.find(z=>z.id===R.itemId)||{};return d.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[d.jsx("td",{className:"px-4 py-3 whitespace-nowrap dark:text-slate-300",children:new Date(R.date).toLocaleDateString()}),d.jsx("td",{className:"px-4 py-3 text-center",children:d.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${R.type==="in"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:R.type.toUpperCase()})}),d.jsxs("td",{className:"px-4 py-3 font-medium dark:text-white",children:[B.brand," ",B.model,R.batch&&d.jsx("div",{className:"text-[10px] bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 px-1.5 py-0.5 rounded w-fit mt-1 font-bold border border-purple-200 dark:border-purple-800",children:R.batch})]}),d.jsx("td",{className:"px-4 py-3 text-xs text-slate-500 dark:text-slate-400",children:B.type}),d.jsxs("td",{className:`px-4 py-3 text-center font-bold ${R.type==="in"?"text-green-600":"text-red-500"}`,children:[R.type==="in"?"+":"-",R.qty]}),d.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-slate-400 text-xs",children:R.remarks}),d.jsx("td",{className:"px-4 py-3 text-right",children:!a&&d.jsxs("div",{className:"flex justify-end gap-1",children:[d.jsx("button",{onClick:()=>x(R),className:"text-blue-400 hover:text-blue-600 p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:d.jsx(To,{size:14})}),d.jsx("button",{onClick:()=>E(R.id),className:"text-red-400 hover:text-red-600 p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:d.jsx(Os,{size:14})})]})})]},R.id)})})]}),D.length===0&&d.jsx("div",{className:"text-center py-8 text-slate-400",children:"No transactions recorded."})]})]})]})};var U3=iI();const IN=Cy(U3),z3=({cols:s,rows:e,module:t,cabinet:r,unit:a})=>{if(!t||!r)return null;const l=r.width,u=r.height,m=l*s,g=u*e,y=x=>{const _=(x/1e3).toFixed(2)+"m",E=(x/304.8).toFixed(2)+"ft";return`${_} / ${E}`};return d.jsx("div",{className:"w-full flex flex-col bg-white rounded-lg border border-slate-200 overflow-hidden",children:d.jsx("div",{className:"w-full h-full min-h-[300px] p-10 flex items-center justify-center",children:d.jsxs("div",{className:"relative",style:{aspectRatio:`${m}/${g}`,width:"100%",maxHeight:"400px"},children:[d.jsxs("div",{className:"absolute -top-8 left-0 right-0 text-center text-xs font-bold text-slate-600 flex items-center justify-center gap-2",children:[d.jsx("div",{className:"h-[1px] flex-1 bg-slate-300"}),d.jsxs("span",{className:"bg-white px-1 whitespace-nowrap",children:[y(m)," (",s," Cabinets)"]}),d.jsx("div",{className:"h-[1px] flex-1 bg-slate-300"})]}),d.jsxs("div",{className:"absolute -left-8 top-0 bottom-0 text-center text-xs font-bold text-slate-600 flex flex-col items-center justify-center gap-2",style:{writingMode:"vertical-rl",transform:"rotate(180deg)"},children:[d.jsx("div",{className:"w-[1px] flex-1 bg-slate-300"}),d.jsxs("span",{className:"bg-white px-1 whitespace-nowrap",children:[y(g)," (",e," Cabinets)"]}),d.jsx("div",{className:"w-[1px] flex-1 bg-slate-300"})]}),d.jsx("div",{className:"w-full h-full grid bg-white border-2 border-slate-900 shadow-sm",style:{gridTemplateColumns:`repeat(${s}, 1fr)`,gridTemplateRows:`repeat(${e}, 1fr)`},children:Array.from({length:s*e}).map((x,_)=>d.jsx("div",{className:"border border-slate-300 relative"},_))})]})})})},SN=({data:s,allScreensData:e,currency:t="INR",exchangeRate:r,date:a})=>{const l=e&&e.calculations&&e.calculations.length>1,u=l?e.calculations:s?[s]:[];if(u.length===0)return null;const m=(l?e.clientName:s?.clientName)||"",g=(l?e.projectName:s?.projectName)||"",y=u[0].terms||{},x=l?e.totalProjectSell:s?.totalProjectSell,_=E=>d.jsxs("div",{className:`bg-white text-slate-800 font-sans text-xs ${E?"print-version-container p-0":"preview-version-container w-full h-full p-8"}`,children:[d.jsx("div",{className:"flex justify-between items-start mb-6 border-b-2 border-slate-800 pb-4",children:d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("img",{src:"/AdmireLED/logo.png",alt:"Company Logo",className:"h-16 w-auto object-contain"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-slate-900 uppercase tracking-wide",children:Mt.COMPANY.NAME}),d.jsxs("div",{className:"text-[10px] text-slate-600 mt-1 space-y-0.5",children:[d.jsx("p",{children:Mt.COMPANY.ADDRESS_1}),d.jsx("p",{children:Mt.COMPANY.ADDRESS_2}),d.jsxs("p",{children:["Email: ",Mt.COMPANY.EMAIL," | Web: ",Mt.COMPANY.WEB]})]})]})]})}),u.map((D,L)=>{const{finalWidth:R,finalHeight:B,totalCabinets:z,moduleType:ne={},cabinetType:Z={},processor:Se,screenQty:se,totalProjectSell:pe,gridCols:S,gridRows:N,commercials:k}=D,V=Number(R),T=Number(B),P=V*T,C=P*10.7639,_e=Number(ne.pitch||0),be=_e>0?Math.round(V*1e3/_e):0,U=_e>0?Math.round(T*1e3/_e):0,oe=(ne.weight||0)*P,fe=(Z.weight||0)*z,Ve=oe+fe,Fe=(ne.avgPower||0)*P,M=(ne.maxPower||0)*P,W=k||{sellProcTotal:0,sellInstallTotal:0,sellStructureTotal:0},me=pe/(se||1),we=(W.sellProcTotal||0)/(se||1),te=(W.sellInstallTotal||0)/(se||1),ee=(W.sellStructureTotal||0)/(se||1),ce=me-we-te-ee,ve=ce*.02,Ge=[{name:"LED Panel",rate:ce-ve},{name:"Processor",rate:we},{name:"Installation",rate:te},{name:"Spares (2%)",rate:ve},{name:"Structure",rate:ee}].filter(xn=>xn.rate>0);return d.jsxs("div",{className:"mb-10 pb-6 border-b-2 border-slate-100 break-inside-avoid print-break-avoid",children:[l&&d.jsx("div",{className:"mb-4 pb-2 border-b border-teal-500",children:d.jsxs("h2",{className:"text-lg font-bold text-teal-800 uppercase",children:["Configuration #",L+1]})}),d.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2",children:"Project Details"}),d.jsxs("div",{className:"grid grid-cols-3 gap-y-1 text-[11px]",children:[d.jsx("span",{className:"font-semibold text-slate-500",children:"Client:"})," ",d.jsx("span",{className:"col-span-2 font-bold",children:m}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Project:"})," ",d.jsx("span",{className:"col-span-2 font-bold",children:g}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Screen Size:"}),d.jsxs("span",{className:"col-span-2",children:[V,"m x ",T,"m ",d.jsxs("span",{className:"text-slate-400",children:["/ ",(V*3.28084).toFixed(2),"ft x ",(T*3.28084).toFixed(2),"ft"]})]}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Quantity:"})," ",d.jsxs("span",{className:"col-span-2",children:[se," Nos"]})]}),d.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mt-4 mb-2",children:"Module & Cabinet"}),d.jsxs("div",{className:"grid grid-cols-3 gap-y-1 text-[11px]",children:[d.jsx("span",{className:"font-semibold text-slate-500",children:"Module:"})," ",d.jsxs("span",{className:"col-span-2",children:[ne.brand," P",ne.pitch]}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Mod Size:"})," ",d.jsxs("span",{className:"col-span-2",children:[ne.width," x ",ne.height," mm"]}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Lamp:"})," ",d.jsx("span",{className:"col-span-2",children:ne.lampMake||"-"}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Cabinet:"})," ",d.jsx("span",{className:"col-span-2",children:Z.material||"Standard"}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Cab Size:"})," ",d.jsxs("span",{className:"col-span-2",children:[Z.width," x ",Z.height," mm"]})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2",children:"Screen Specifications"}),d.jsxs("div",{className:"grid grid-cols-3 gap-y-1 text-[11px]",children:[d.jsx("span",{className:"font-semibold text-slate-500",children:"Resolution:"})," ",d.jsxs("span",{className:"col-span-2",children:[be," x ",U," pixels"]}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Total Area:"})," ",d.jsxs("span",{className:"col-span-2",children:[C.toFixed(2)," Sq.ft / ",P.toFixed(2)," Sq.m"]}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Total Weight:"})," ",d.jsxs("span",{className:"col-span-2",children:[Ve.toFixed(1)," kg"]}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Avg Power:"})," ",d.jsxs("span",{className:"col-span-2",children:[Fe.toFixed(0)," Watts"]}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Max Power:"})," ",d.jsxs("span",{className:"col-span-2",children:[M.toFixed(0)," Watts"]}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Brightness:"})," ",d.jsxs("span",{className:"col-span-2",children:[ne.brightness," nits"]}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Refresh Rate:"})," ",d.jsxs("span",{className:"col-span-2",children:[ne.refreshRate," Hz"]}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Controller:"})," ",d.jsx("span",{className:"col-span-2",children:Se?`${Se.brand} ${Se.model}`:"Standard"}),d.jsx("span",{className:"font-semibold text-slate-500",children:"Viewing:"})," ",d.jsxs("span",{className:"col-span-2",children:["H: ",ne.viewAngleH," / V: ",ne.viewAngleV,""]}),d.jsx("span",{className:"font-semibold text-slate-500",children:"IP Rating:"})," ",d.jsxs("span",{className:"col-span-2",children:["Front: IP",ne.ipFront," / Back: IP",ne.ipBack]})]})]})]}),d.jsxs("div",{className:"mb-2 break-inside-avoid print-break-avoid",children:[d.jsxs("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2 pb-1",children:["Commercial Proposal ",l?`(Config #${L+1})`:""]}),d.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-[11px]",children:[d.jsx("thead",{className:"bg-slate-800 text-white",children:d.jsxs("tr",{children:[d.jsx("th",{className:"p-2 border border-slate-600 text-left w-12",children:"#"}),d.jsx("th",{className:"p-2 border border-slate-600 text-left",children:"Item Description"}),d.jsx("th",{className:"p-2 border border-slate-600 text-right w-32",children:"Amount (1 Screen)"}),d.jsxs("th",{className:"p-2 border border-slate-600 text-right w-32",children:["Amount (",se," Screens)"]})]})}),d.jsxs("tbody",{children:[Ge.map((xn,dn)=>d.jsxs("tr",{children:[d.jsx("td",{className:"p-2 border border-slate-300 text-center",children:dn+1}),d.jsx("td",{className:"p-2 border border-slate-300 font-bold",children:xn.name}),d.jsx("td",{className:"p-2 border border-slate-300 text-right",children:Le(xn.rate,t)}),d.jsx("td",{className:"p-2 border border-slate-300 text-right font-bold",children:Le(xn.rate*se,t)})]},dn)),d.jsxs("tr",{className:"bg-slate-100",children:[d.jsx("td",{colSpan:"3",className:"p-2 border border-slate-300 text-right font-bold uppercase",children:"Subtotal (Excl. GST)"}),d.jsx("td",{className:"p-2 border border-slate-300 text-right font-bold text-sm",children:Le(pe,t)})]})]})]})]})]},L)}),l&&d.jsx("div",{className:"mb-8 break-inside-avoid print-break-avoid",children:d.jsxs("div",{className:"bg-slate-800 text-white p-4 rounded-lg flex justify-between items-center shadow-lg",children:[d.jsx("div",{className:"text-lg font-bold uppercase tracking-wide",children:"Grand Total"}),d.jsxs("div",{className:"text-2xl font-bold",children:[Le(x,t)," ",d.jsx("span",{className:"text-xs font-normal opacity-70",children:"(Excl. GST)"})]})]})}),d.jsxs("div",{className:"mt-8 break-inside-avoid print-break-avoid",children:[d.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2 pb-1",children:"Terms & Conditions"}),d.jsx("div",{className:"text-[10px] text-slate-600 space-y-3",children:d.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-y-2 gap-x-4",children:[d.jsx("div",{className:"font-bold text-slate-800",children:"PRICE"}),d.jsx("div",{children:y.price}),d.jsx("div",{className:"font-bold text-slate-800",children:"PAYMENT"}),d.jsx("div",{children:(y.payment||[]).map((D,L)=>d.jsxs("span",{children:[D.percent,"% ",D.name,L<(y.payment||[]).length-1?", ":""]},L))}),d.jsx("div",{className:"font-bold text-slate-800",children:"DELIVERY"}),d.jsxs("div",{children:[y.deliveryWeeks," weeks"]}),d.jsx("div",{className:"font-bold text-slate-800",children:"GST"}),d.jsxs("div",{children:["Extra as applicable (currently ",Mt.DEFAULTS.GST_RATE,"%)"]}),d.jsx("div",{className:"font-bold text-slate-800",children:"WARRANTY"}),d.jsx("div",{className:"text-justify leading-snug",children:y.warranty||Mt.TEXT.WARRANTY})]})}),d.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mt-4 mb-2 pb-1",children:"Client's Scope"}),d.jsxs("div",{className:"text-[10px] text-slate-600 grid gap-y-2",children:[y.scope?.structure&&d.jsxs("div",{children:[d.jsx("span",{className:"font-bold text-slate-800 block",children:"Structure:"}),y.scope.structure]}),y.scope?.elec&&d.jsxs("div",{children:[d.jsx("span",{className:"font-bold text-slate-800 block",children:"Electricity:"}),y.scope.elec]}),y.scope?.net&&d.jsxs("div",{children:[d.jsx("span",{className:"font-bold text-slate-800 block",children:"Internet:"}),y.scope.net]}),y.scope?.soft&&d.jsxs("div",{children:[d.jsx("span",{className:"font-bold text-slate-800 block",children:"Software:"}),y.scope.soft]}),y.scope?.perm&&d.jsxs("div",{children:[d.jsx("span",{className:"font-bold text-slate-800 block",children:"Permissions:"}),y.scope.perm]}),y.scope?.pc&&d.jsxs("div",{children:[d.jsx("span",{className:"font-bold text-slate-800 block",children:"Computer:"}),y.scope.pc]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-bold text-slate-800 block",children:"Validity:"}),y.validity||Mt.TEXT.VALIDITY]})]}),d.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-200 flex justify-between items-end",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"h-12 mb-2"}),d.jsx("p",{className:"text-[10px] font-bold border-t border-slate-400 px-4 pt-1",children:"Client Acceptance"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"h-12 mb-2"}),d.jsx("p",{className:"text-[10px] font-bold border-t border-slate-400 px-4 pt-1",children:"For Admire Sign & Display Pvt. Ltd."})]})]})]})]});return d.jsxs(Bt.Fragment,{children:[d.jsx("div",{className:"screen-preview-wrapper",children:_(!1)}),IN.createPortal(d.jsx("div",{className:"print-only-portal",children:_(!0)}),document.body)]})},AN=({data:s,allScreensData:e,inventory:t=[],transactions:r=[]})=>{if(!s&&!e)return null;const a=e&&e.calculations&&e.calculations.length>1;if(!a&&!s)return null;const l=(a?e.clientName:s?.clientName)||"",u=(a?e.projectName:s?.projectName)||"",m=(x,_,E)=>{const{detailedItems:D,screenQty:L,moduleType:R,cabinetType:B,finalWidth:z,finalHeight:ne}=x;return d.jsxs("div",{className:"mb-8 break-inside-avoid print-break-avoid",children:[a&&d.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg mb-3 border border-teal-200 dark:border-teal-800",children:[d.jsxs("h3",{className:"font-bold text-teal-800 dark:text-teal-300 text-sm",children:["Screen Configuration #",_+1]}),d.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-3 mt-3 text-xs text-teal-800 dark:text-teal-300",children:[d.jsxs("div",{children:[d.jsx("span",{className:"font-bold uppercase text-[10px] text-teal-600 dark:text-teal-500 tracking-wider block mb-0.5",children:"Target Size"}),E.targetWidth,"  ",E.targetHeight," ",E.unit||"m"]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-bold uppercase text-[10px] text-teal-600 dark:text-teal-500 tracking-wider block mb-0.5",children:"Final Dimensions"}),z,"m  ",ne,"m ",d.jsxs("span",{className:"text-teal-600/70",children:["/ ",(Number(z)*3.28084).toFixed(2),"ft  ",(Number(ne)*3.28084).toFixed(2),"ft"]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-bold uppercase text-[10px] text-teal-600 dark:text-teal-500 tracking-wider block mb-0.5",children:"Quantity"}),L," Screens"]}),R&&d.jsxs("div",{children:[d.jsx("span",{className:"font-bold uppercase text-[10px] text-teal-600 dark:text-teal-500 tracking-wider block mb-0.5",children:"Type"}),"P",R.pitch," ",R.indoor?"Indoor":"Outdoor"]})]})]}),d.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-[10px]",children:[d.jsx("thead",{className:"bg-slate-100 text-slate-700",children:d.jsxs("tr",{children:[d.jsx("th",{className:"p-2 border border-slate-300 text-left w-10",children:"#"}),d.jsx("th",{className:"p-2 border border-slate-300 text-left w-32",children:"Component"}),d.jsx("th",{className:"p-2 border border-slate-300 text-left",children:"Specification / Details"}),d.jsx("th",{className:"p-2 border border-slate-300 text-center w-16",children:"Qty/Scrn"}),d.jsx("th",{className:"p-2 border border-slate-300 text-center w-16",children:"Total Qty"})]})}),d.jsx("tbody",{children:D.map((Z,Se)=>{const se=t.find(S=>S.id===Z.inventoryId);let pe=null;return se&&(se.type==="module"?pe=d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[d.jsxs("span",{children:["Size: ",se.width,"x",se.height,"mm"]}),d.jsxs("span",{children:["LED: ",se.ledType||"-"]}),d.jsxs("span",{children:["Bright: ",se.brightness," nits"]}),d.jsxs("span",{children:["Ref: ",se.refreshRate," Hz"]}),d.jsxs("span",{children:["Ang: ",se.viewAngleH,"/",se.viewAngleV]}),d.jsxs("span",{children:["IP: ",se.ipFront,"/",se.ipBack]}),d.jsxs("span",{children:["Pwr: ",se.avgPower,"/",se.maxPower," W"]}),d.jsxs("span",{children:["Wt: ",se.weight," kg"]})]}):se.type==="cabinet"?pe=d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[d.jsxs("span",{children:["Size: ",se.width,"x",se.height,"mm"]}),d.jsxs("span",{children:["Mat: ",se.material]}),d.jsxs("span",{children:["Weight: ",se.weight," kg"]})]}):se.type==="ready"?pe=d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[d.jsxs("span",{children:["Size: ",se.width,"x",se.height,"mm"]}),d.jsxs("span",{children:["Mat: ",se.material||"-"]}),d.jsxs("span",{children:["Bright: ",se.brightness," nits"]}),d.jsxs("span",{children:["Ref: ",se.refreshRate," Hz"]}),d.jsxs("span",{children:["IP: ",se.ipFront,"/",se.ipBack]})]}):se.type==="card"?pe=d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[d.jsxs("span",{children:["Brand: ",se.brand]}),d.jsxs("span",{children:["Model: ",se.model]}),se.ports&&d.jsxs("span",{children:["Ports: ",se.ports]})]}):se.type==="smps"||se.type==="psu"?pe=d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[d.jsxs("span",{children:["Brand: ",se.brand]}),d.jsxs("span",{children:["Model: ",se.model]}),se.amps&&d.jsxs("span",{children:["Amps: ",se.amps,"A"]})]}):se.type==="processor"&&(pe=d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[d.jsxs("span",{children:["Brand: ",se.brand]}),d.jsxs("span",{children:["Model: ",se.model]}),se.ports&&d.jsxs("span",{children:["Ports: ",se.ports]})]}))),d.jsxs("tr",{children:[d.jsx("td",{className:"p-2 border border-slate-300 text-center",children:Se+1}),d.jsx("td",{className:"p-2 border border-slate-300 font-bold align-top",children:Z.name}),d.jsxs("td",{className:"p-2 border border-slate-300 align-top",children:[d.jsx("div",{className:"font-semibold",children:Z.spec}),pe]}),d.jsx("td",{className:"p-2 border border-slate-300 text-center align-top",children:Z.qty}),d.jsx("td",{className:"p-2 border border-slate-300 text-center font-bold align-top",children:Z.qty*L})]},Se)})})]})]},_)},g=()=>{if(!a)return null;const x={},_=D=>r?r.filter(L=>L.itemId===D).reduce((L,R)=>L+(R.type==="in"?Number(R.qty):-Number(R.qty)),0):0;e.calculations.forEach((D,L)=>{D.detailedItems.forEach(R=>{const B=R.inventoryId?R.inventoryId:`${R.name}_${R.spec}`;x[B]||(x[B]={name:R.name,spec:R.spec,inventoryId:R.inventoryId,id:R.id,totalQty:0});const z=R.qty*D.screenQty;x[B].totalQty+=z})});const E=Object.values(x);return d.jsxs("div",{className:"mt-8 break-inside-avoid print-break-avoid border-t-4 border-slate-800 pt-6",children:[d.jsx("div",{className:"bg-slate-800 text-white p-3 rounded-t-lg mb-0 flex justify-between items-center",children:d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-lg uppercase tracking-wide",children:"Consolidated Bill of Materials"}),d.jsx("p",{className:"text-xs text-slate-300 mt-1",children:"Combined quantities across all screen configurations"})]})}),d.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-[10px]",children:[d.jsx("thead",{className:"bg-slate-700 text-white",children:d.jsxs("tr",{children:[d.jsx("th",{className:"p-2 border border-slate-600 text-left w-10",children:"#"}),d.jsx("th",{className:"p-2 border border-slate-600 text-left w-32",children:"Component"}),d.jsx("th",{className:"p-2 border border-slate-600 text-left",children:"Specification"}),d.jsx("th",{className:"p-2 border border-slate-600 text-center w-16",children:"Stock"}),d.jsx("th",{className:"p-2 border border-slate-600 text-center w-16",children:"Required"}),d.jsx("th",{className:"p-2 border border-slate-600 text-center w-16",children:"Balance"})]})}),d.jsx("tbody",{children:E.map((D,L)=>{const R=D.inventoryId?_(D.inventoryId):0,B=R-D.totalQty,z=D.inventoryId?t.find(Z=>Z.id===D.inventoryId):null;let ne=null;return z&&(z.type==="module"?ne=d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[d.jsxs("span",{children:["Size: ",z.width,"x",z.height,"mm"]}),d.jsxs("span",{children:["LED: ",z.ledType||"-"]}),d.jsxs("span",{children:["Bright: ",z.brightness," nits"]}),d.jsxs("span",{children:["Ref: ",z.refreshRate," Hz"]}),d.jsxs("span",{children:["Ang: ",z.viewAngleH,"/",z.viewAngleV]}),d.jsxs("span",{children:["IP: ",z.ipFront,"/",z.ipBack]}),d.jsxs("span",{children:["Pwr: ",z.avgPower,"/",z.maxPower," W"]}),d.jsxs("span",{children:["Wt: ",z.weight," kg"]})]}):z.type==="cabinet"?ne=d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[d.jsxs("span",{children:["Size: ",z.width,"x",z.height,"mm"]}),d.jsxs("span",{children:["Mat: ",z.material]}),d.jsxs("span",{children:["Weight: ",z.weight," kg"]})]}):z.type==="ready"?ne=d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[d.jsxs("span",{children:["Size: ",z.width,"x",z.height,"mm"]}),d.jsxs("span",{children:["Mat: ",z.material||"-"]}),d.jsxs("span",{children:["Bright: ",z.brightness," nits"]}),d.jsxs("span",{children:["Ref: ",z.refreshRate," Hz"]}),d.jsxs("span",{children:["IP: ",z.ipFront,"/",z.ipBack]})]}):z.type==="card"?ne=d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[d.jsxs("span",{children:["Brand: ",z.brand]}),d.jsxs("span",{children:["Model: ",z.model]}),z.ports&&d.jsxs("span",{children:["Ports: ",z.ports]})]}):z.type==="smps"||z.type==="psu"?ne=d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[d.jsxs("span",{children:["Brand: ",z.brand]}),d.jsxs("span",{children:["Model: ",z.model]}),z.amps&&d.jsxs("span",{children:["Amps: ",z.amps,"A"]})]}):z.type==="processor"&&(ne=d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[d.jsxs("span",{children:["Brand: ",z.brand]}),d.jsxs("span",{children:["Model: ",z.model]}),z.ports&&d.jsxs("span",{children:["Ports: ",z.ports]})]}))),d.jsxs("tr",{className:L%2===0?"bg-slate-50":"bg-white",children:[d.jsx("td",{className:"p-2 border border-slate-300 text-center",children:L+1}),d.jsx("td",{className:"p-2 border border-slate-300 font-bold align-top",children:D.name}),d.jsxs("td",{className:"p-2 border border-slate-300 align-top",children:[d.jsx("div",{className:"font-semibold",children:D.spec}),ne]}),d.jsx("td",{className:"p-2 border border-slate-300 text-center font-medium text-slate-600 align-top",children:D.inventoryId?R:"-"}),d.jsx("td",{className:"p-2 border border-slate-300 text-center font-bold align-top text-slate-800",children:D.totalQty}),d.jsx("td",{className:`p-2 border border-slate-300 text-center font-bold align-top ${B>=0?"text-green-600":"text-red-600"}`,children:D.inventoryId?B:"-"})]},L)})})]}),d.jsx("div",{className:"mt-4 p-3 bg-teal-50 dark:bg-teal-900/20 rounded-lg border border-teal-200 dark:border-teal-800",children:d.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[d.jsxs("div",{children:[d.jsx("span",{className:"font-bold text-teal-800 dark:text-teal-300",children:"Total Configurations:"}),d.jsx("span",{className:"ml-2 font-bold text-lg text-teal-600 dark:text-teal-400",children:e.calculations.length})]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-bold text-teal-800 dark:text-teal-300",children:"Total Screens:"}),d.jsx("span",{className:"ml-2 font-bold text-lg text-teal-600 dark:text-teal-400",children:e.totalScreenQty})]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-bold text-teal-800 dark:text-teal-300",children:"Unique Components:"}),d.jsx("span",{className:"ml-2 font-bold text-lg text-teal-600 dark:text-teal-400",children:E.length})]})]})})]})},y=x=>d.jsxs("div",{className:`p-8 max-w-[210mm] mx-auto bg-white min-h-screen text-slate-800 font-sans text-xs ${x?"print-version-container p-0 w-full":""}`,children:[d.jsxs("div",{className:"flex justify-between items-start mb-6 border-b-2 border-slate-800 pb-4",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("img",{src:"/AdmireLED/logo.png",alt:"Logo",className:"h-12 w-auto"}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-slate-900 uppercase tracking-wide",children:"Bill of Materials"}),d.jsxs("div",{className:"mt-1 space-y-0.5",children:[d.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Project: ",d.jsx("span",{className:"font-normal",children:u})]}),d.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Client: ",d.jsx("span",{className:"font-normal",children:l})]}),a&&d.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[e.calculations.length," Configs  ",e.totalScreenQty," Screens"]}),!a&&s.moduleType&&d.jsxs("p",{className:"text-xs text-slate-500 mt-1 font-medium flex items-center gap-2",children:[d.jsxs("span",{className:"inline-block bg-slate-100 px-2 py-0.5 rounded text-slate-700 font-bold border border-slate-200",children:["P",s.moduleType.pitch," ",s.moduleType.indoor?"Indoor":"Outdoor"]}),d.jsxs("span",{children:[s.finalWidth,"m x ",s.finalHeight,"m ",d.jsxs("span",{className:"text-slate-400",children:["/ ",(Number(s.finalWidth)*3.28084).toFixed(2),"ft x ",(Number(s.finalHeight)*3.28084).toFixed(2),"ft"]})]}),d.jsxs("span",{className:"font-bold text-slate-700 border-l border-slate-300 pl-2 ml-1",children:[s.screenQty," Screens"]})]})]})]})]}),d.jsx("div",{className:"text-right",children:d.jsx("p",{className:"text-xs text-slate-500",children:new Date().toLocaleDateString()})})]}),a?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"mb-6",children:d.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase mb-3 pb-2 border-b border-slate-300",children:"Individual Screen Configurations"})}),e.calculations.map((_,E)=>m(_,E,e.screenConfigs?e.screenConfigs[E]:{})),g()]}):m(s,0,{}),d.jsx("div",{className:"mt-8 text-[10px] text-slate-400 border-t border-slate-200 pt-2 text-center",children:"Internal Document  Generated by Admire Sign LED Calculator"})]});return d.jsxs(Bt.Fragment,{children:[d.jsx("div",{className:"screen-preview-wrapper",children:y(!1)}),IN.createPortal(d.jsx("div",{className:"print-only-portal",children:y(!0)}),document.body)]})},B3=({user:s,inventory:e,transactions:t,exchangeRate:r,onLoadQuote:a,readOnly:l=!1})=>{const[u,m]=Bt.useState([]),[g,y]=Bt.useState(null);Bt.useEffect(()=>{if(!s)return;const D=Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("quotes").orderBy("updatedAt","desc").onSnapshot(L=>{m(L.docs.map(R=>({id:R.id,...R.data()})))});return()=>D()},[s]);const x=async D=>{confirm("Are you sure you want to delete this quote?")&&await Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("quotes").doc(D).delete()},_=D=>{let L=null;if(D.allScreensData)L={allScreensData:D.allScreensData,client:D.client,project:D.project};else{const R=D.calculatorState;if(R.screens&&R.screens.length>0){const B=R.screens.map(z=>{const ne={...R,...z};return Eo(ne,e,t,r)}).filter(z=>z!==null);if(B.length>0){const z={totalProjectCost:B.reduce((ne,Z)=>ne+Z.totalProjectCost,0),totalProjectSell:B.reduce((ne,Z)=>ne+Z.totalProjectSell,0),totalLEDSell:B.reduce((ne,Z)=>ne+Z.matrix.led.sell*Z.screenQty,0),totalServicesSell:B.reduce((ne,Z)=>ne+(Z.matrix.sell.total-Z.matrix.led.sell*Z.screenQty),0),totalMargin:0,totalScreenQty:B.reduce((ne,Z)=>ne+Number(Z.screenQty),0),calculations:B,screenConfigs:R.screens};z.totalMargin=z.totalProjectSell-z.totalProjectCost,L={allScreensData:z,client:D.client,project:D.project}}}else{const B=Eo(R,e,t,r);B&&(L={data:B,client:D.client,project:D.project})}}L?y(L):alert("Could not load quote data.")},E=D=>{if(l)return;let L=[],R=0,B=0;if(D.allScreensData&&D.allScreensData.calculations)L=D.allScreensData.calculations,R=D.allScreensData.totalProjectSell,B=D.allScreensData.totalProjectCost;else{const S=D.calculatorState;if(S&&S.screens&&S.screens.length>0)L=S.screens.map(N=>{const k={...S,...N};return Eo(k,e,t,r)}).filter(N=>N!==null);else{const N=Eo(S,e,t,r);N&&(L=[N])}L.length>0&&(B=L.reduce((N,k)=>N+k.totalProjectCost,0),R=L.reduce((N,k)=>N+k.totalProjectSell,0))}if(L.length===0)return alert("Calculation failed. Inventory items might be missing.");const z=(D.project||"").replace(/,/g," "),ne=(D.client||"").replace(/,/g," ");let Z=`Project,${z}
Client,${ne}
Date,${new Date().toLocaleDateString()}

`;L.forEach((S,N)=>{Z+=`SCREEN CONFIGURATION #${N+1}
`,Z+=`Dimensions,${S.finalWidth}m x ${S.finalHeight}m
`,Z+=`Quantity,${S.screenQty}
`,Z+=`
Bill of Materials (Config #${N+1})
Component,Specification,Qty/Scrn,Total Qty,Rate,Total Amount
`,S.detailedItems.forEach(k=>{const V=(k.name||"").replace(/"/g,'""'),T=(k.spec||"").replace(/"/g,'""'),P=k.qty*S.screenQty,C=k.total*S.screenQty;Z+=`"${V}","${T}",${k.qty},${P},${k.unit.toFixed(2)},${C.toFixed(2)}
`}),Z+=`
Subtotal (Cost),${S.totalProjectCost.toFixed(2)}
`,Z+=`Subtotal (Sell),${S.totalProjectSell.toFixed(2)}
`,Z+=`
--------------------------------

`}),Z+=`PROJECT SUMMARY
`,Z+=`Grand Total Cost,${B.toFixed(2)}
`,Z+=`Grand Total Sell,${R.toFixed(2)}
`,Z+=`Net Margin,${(R-B).toFixed(2)}
`;const Se=new Blob([Z],{type:"text/csv;charset=utf-8;"}),se=window.URL.createObjectURL(Se),pe=document.createElement("a");pe.href=se,pe.download=`${ne.replace(/[^a-z0-9]/gi,"_")}_${z.replace(/[^a-z0-9]/gi,"_")}_BOM.csv`,pe.click(),window.URL.revokeObjectURL(se)};return d.jsxs("div",{className:"p-4 md:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[g&&d.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:d.jsxs("div",{className:"bg-white max-w-4xl w-full h-[90vh] rounded-lg shadow-2xl flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-100 rounded-t-lg",children:[d.jsxs("h2",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[l?d.jsx(_d,{size:20,className:"text-teal-600"}):d.jsx(U0,{size:20}),l?"Bill of Materials (BOM)":"View Saved Quote"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>y(null),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded",children:"Close"}),d.jsxs("button",{onClick:()=>{const D=document.title;document.title=`${g.client}_${g.project}_${l?"BOM":"Quote"}`.replace(/[^a-zA-Z0-9_]/g,"_"),window.print(),document.title=D},className:"px-4 py-2 bg-teal-600 text-white hover:bg-teal-700 rounded flex items-center gap-2",children:[d.jsx(qf,{size:16})," Print / PDF"]})]})]}),d.jsx("div",{className:"flex-1 overflow-auto p-8 bg-slate-200",children:l?d.jsx(AN,{data:g.data?{...g.data,clientName:g.client,projectName:g.project}:null,allScreensData:g.allScreensData?{...g.allScreensData,clientName:g.client,projectName:g.project,screenConfigs:g.allScreensData.screenConfigs?.map(D=>({...D,unit:D.unit||"m"}))}:null,inventory:e,transactions:t}):d.jsx(SN,{data:g.data?{...g.data,clientName:g.client,projectName:g.project}:null,allScreensData:g.allScreensData?{...g.allScreensData,clientName:g.client,projectName:g.project}:null,currency:"INR",exchangeRate:r})})]})}),d.jsx("div",{className:"flex justify-between items-center mb-6",children:d.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-slate-800 dark:text-white",children:[d.jsx(sm,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})," Saved Quotes"]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.map(D=>{const R=(D.calculatorState||{}).selectedIndoor==="true";return d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white line-clamp-1",title:D.project,children:D.project||"Untitled"}),d.jsx("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:D.client||"No Client"})]}),d.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${R?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:R?"Indoor":"Outdoor"})]}),d.jsx("div",{className:"text-xs text-slate-400 mb-4",children:new Date(D.updatedAt?.seconds*1e3).toLocaleString()}),d.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-2 rounded-lg mb-4 space-y-1.5 flex-1",children:D.allScreensData?.calculations?D.allScreensData.calculations.map((B,z)=>d.jsxs("div",{className:"flex justify-between items-center text-xs border-b border-slate-100 dark:border-slate-600 last:border-0 pb-1 last:pb-0",children:[d.jsxs("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:["Screen #",z+1," ",d.jsxs("span",{className:"text-slate-400 font-normal",children:["(",B.finalWidth,"x",B.finalHeight,"m / ",(Number(B.finalWidth)*3.28084).toFixed(2),"x",(Number(B.finalHeight)*3.28084).toFixed(2),"ft ",B.screenQty,")"]})]}),!l&&d.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:Le(B.totalProjectSell,"INR",!0)})]},z)):d.jsxs("div",{className:"flex justify-between items-center text-xs",children:[d.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:"Screen #1"}),!l&&d.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:Le(D.finalAmount,"INR",!0)})]})}),!l&&d.jsxs("div",{className:"flex justify-between items-end pt-2 border-t border-slate-100 dark:border-slate-700 mt-auto",children:[d.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Total Estimate"}),d.jsx("span",{className:"text-xl font-bold text-teal-600 dark:text-teal-400",children:Le(D.finalAmount,"INR")})]})]}),d.jsxs("div",{className:`grid ${l?"grid-cols-1":"grid-cols-5"} border-t border-slate-100 dark:border-slate-700 divide-x divide-slate-100 dark:divide-slate-700 bg-slate-50 dark:bg-slate-800`,children:[d.jsxs("button",{onClick:()=>_(D),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700 transition-colors",title:"View",children:[l?d.jsx(_d,{size:16}):d.jsx(U0,{size:16}),d.jsx("span",{className:"hidden sm:inline",children:l?"View BOM":"View"})]}),!l&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:()=>a(D,!1),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-blue-600 dark:text-blue-400 hover:bg-white dark:hover:bg-slate-700 transition-colors",title:"Edit",children:[d.jsx(To,{size:16})," ",d.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),d.jsxs("button",{onClick:()=>E(D),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-green-600 dark:text-green-400 hover:bg-white dark:hover:bg-slate-700 transition-colors",title:"Excel",children:[d.jsx(N2,{size:16})," ",d.jsx("span",{className:"hidden sm:inline",children:"Excel"})]}),d.jsxs("button",{onClick:()=>a(D,!0),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-slate-500 hover:bg-white dark:hover:bg-slate-700 transition-colors",title:"Clone",children:[d.jsx(L0,{size:16})," ",d.jsx("span",{className:"hidden sm:inline",children:"Clone"})]}),d.jsxs("button",{onClick:()=>x(D.id),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Delete",children:[d.jsx(Os,{size:16})," ",d.jsx("span",{className:"hidden sm:inline",children:"Del"})]})]})]})]},D.id)}),u.length===0&&d.jsx("p",{className:"text-center text-slate-400 py-10 col-span-full",children:"No saved quotes found."})]})]})},q3=(s,e)=>{const[t,r]=Bt.useState(s);return Bt.useEffect(()=>{const a=setTimeout(()=>{r(s)},e);return()=>{clearTimeout(a)}},[s,e]),t},F3=({calculation:s,state:e,updateState:t,updateExtra:r,updateScreenProp:a,inventory:l,getStock:u,overrides:m,onOverride:g,editingRow:y,setEditingRow:x,onClearOverride:_,isSupervisor:E})=>{const D=e.screens[e.activeScreenIndex],{screenQty:L,selectedPitch:R,selectedModuleId:B,selectedCabinetId:z,selectedCardId:ne,selectedSMPSId:Z,selectedProcId:Se,extraComponents:se,extras:pe,commercials:S}=D,{assemblyMode:N,selectedIndoor:k}=e,V=()=>Math.random().toString(36).substr(2,9).toUpperCase(),T=k==="true",P=l.filter($=>$.type==="module"&&$.indoor===T),C=[...new Set(P.map($=>$.pitch))].sort(($,Ie)=>$-Ie),_e=R?P.filter($=>$.pitch==R):[],be=l.find($=>$.id===B),U=l.filter($=>$.type!=="cabinet"?!1:be?$.width%be.width===0&&$.height%be.height===0:!0),oe=l.filter($=>$.type==="ready"&&$.indoor===T),fe=$=>{const Ie=(ue,Xt)=>a(e.activeScreenIndex,ue,Xt);if($.id==="modules")return d.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[d.jsxs("select",{value:R,onChange:ue=>{Ie("selectedPitch",ue.target.value),Ie("selectedModuleId","")},className:"w-full md:w-20 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[d.jsx("option",{value:"",children:"Pitch"}),C.map(ue=>d.jsxs("option",{value:ue,children:["P",ue]},ue))]}),d.jsxs("select",{value:B,onChange:ue=>Ie("selectedModuleId",ue.target.value),disabled:!R,className:"w-full md:flex-1 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white disabled:opacity-50",children:[d.jsx("option",{value:"",children:"Select Module..."}),_e.map(ue=>d.jsxs("option",{value:ue.id,children:[ue.brand," ",ue.model," (",u(ue.id),")"]},ue.id))]})]});if($.id==="cabinets")return d.jsxs("select",{value:z,onChange:ue=>Ie("selectedCabinetId",ue.target.value),disabled:!be,className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white disabled:opacity-50",children:[d.jsx("option",{value:"",children:"Select Cabinet..."}),U.map(ue=>d.jsxs("option",{value:ue.id,children:[ue.brand," ",ue.model," (",ue.width,"x",ue.height,") - Stock: ",u(ue.id)]},ue.id))]});if($.id==="cards")return d.jsxs("select",{value:ne,onChange:ue=>Ie("selectedCardId",ue.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[d.jsx("option",{value:"",children:"Select Card..."}),l.filter(ue=>ue.type==="card").map(ue=>d.jsxs("option",{value:ue.id,children:[ue.brand," ",ue.model," (",u(ue.id),")"]},ue.id))]});if($.id==="smps")return d.jsxs("select",{value:Z,onChange:ue=>Ie("selectedSMPSId",ue.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[d.jsx("option",{value:"",children:"Select SMPS..."}),l.filter(ue=>ue.type==="smps").map(ue=>d.jsxs("option",{value:ue.id,children:[ue.brand," ",ue.model," (",u(ue.id),")"]},ue.id))]});if($.id==="processor")return d.jsxs("div",{className:"flex flex-col gap-2 md:gap-1",children:[d.jsxs("select",{value:Se,onChange:ue=>Ie("selectedProcId",ue.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[d.jsx("option",{value:"",children:"Select Processor..."}),l.filter(ue=>ue.type==="processor").map(ue=>d.jsxs("option",{value:ue.id,children:[ue.brand," ",ue.model," (",u(ue.id),")"]},ue.id))]}),!E&&d.jsxs("div",{className:"flex items-center gap-2 md:gap-1",children:[d.jsx("span",{className:"text-xs md:text-[10px] text-green-600 font-bold",children:"Sell:"}),d.jsx("input",{type:"number",className:"flex-1 md:w-20 p-2 md:p-0.5 text-xs border border-green-200 rounded bg-green-50 text-green-800",value:S.processor?.val||0,onChange:ue=>a(e.activeScreenIndex,"commercials",{...S,processor:{...S.processor,val:ue.target.value}})})]})]});if($.id==="ready")return d.jsxs("select",{value:D.readyId,onChange:ue=>Ie("readyId",ue.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[d.jsx("option",{value:"",children:"Select Screen Model..."}),oe.map(ue=>d.jsxs("option",{value:ue.id,children:[ue.brand," ",ue.model," (P",ue.pitch,")"]},ue.id))]});const rt=se?se.findIndex(ue=>ue.id===$.id):-1;return rt!==-1?d.jsxs("div",{className:"flex gap-1 items-center",children:[d.jsxs("select",{value:se[rt].componentId,onChange:ue=>{const Xt=[...se];Xt[rt].componentId=ue.target.value,Ie("extraComponents",Xt)},className:"flex-1 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[d.jsx("option",{value:"",children:"Select..."}),["module","cabinet","card","smps"].map(ue=>{const Xt=l.filter(wt=>wt.type===ue).sort((wt,as)=>(wt.brand+" "+wt.model).localeCompare(as.brand+" "+as.model));return Xt.length===0?null:d.jsx("optgroup",{label:ue==="smps"?"SMPS":ue.toUpperCase(),children:Xt.map(wt=>d.jsxs("option",{value:wt.id,children:[wt.brand," ",wt.model]},wt.id))},ue)})]}),d.jsxs("select",{value:se[rt].type,onChange:ue=>{const Xt=[...se];Xt[rt].type=ue.target.value,Ie("extraComponents",Xt)},className:"w-16 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[d.jsx("option",{value:"screen",children:"/Scrn"}),d.jsx("option",{value:"cabinet",children:"/Cab"})]}),d.jsx("button",{type:"button",onClick:()=>Ie("extraComponents",se.filter((ue,Xt)=>Xt!==rt)),className:"text-red-400 hover:text-red-600",children:d.jsx(Os,{size:16})})]}):d.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[$.name," ",d.jsxs("span",{className:"text-[10px] text-slate-400 font-normal",children:["(",$.spec,")"]})]})},Ve=$=>s?.calculatedExtras?.[$]||0,Fe=s?.matrix?.sqft?.perScreen||1;let M=s?s.detailedItems:N==="assembled"?[{id:"modules",type:"led",name:"Modules",qty:0,unit:0,total:0},{id:"cabinets",type:"led",name:"Cabinets",qty:0,unit:0,total:0},{id:"cards",type:"led",name:"Receiving Cards",qty:0,unit:0,total:0},{id:"smps",type:"led",name:"SMPS",qty:0,unit:0,total:0},{id:"processor",type:"service",name:"Processor",qty:1,unit:0,total:0}]:[{id:"ready",type:"led",name:"Ready Unit",qty:0,unit:0,total:0},{id:"processor",type:"service",name:"Processor",qty:1,unit:0,total:0}];!s&&se?.length>0&&(M=[...M,...se.map($=>({id:$.id,type:"led",name:"Extra",spec:"Select...",qty:$.qty,unit:0,total:0}))]);const W=M.filter($=>$.type==="led"),me=(Array.isArray(pe)?pe:[]).reduce(($,Ie)=>$+Ve(Ie.id),0),te=W.reduce(($,Ie)=>$+Ie.total*L,0)+me*L,ee=te/(L||1),ce=ee/Fe,ve=M.filter($=>$.type!=="led"),Ae=Ve("install"),Ge=Ve("structure"),dn=ve.reduce(($,Ie)=>$+Ie.total*L,0)+(Ae+Ge)*L,lr=dn/(L||1),wn=lr/Fe,zn=te+dn,Dn=zn/(L||1),Yn=Dn/Fe,Wn=()=>{const $={id:V(),name:"New Cost",val:0,type:"abs"};a(e.activeScreenIndex,"extras",[...pe||[],$])},st=$=>{const Ie=[...pe];Ie.splice($,1),a(e.activeScreenIndex,"extras",Ie)},ht=($,Ie,rt)=>{const ue=[...pe];ue[$]={...ue[$],[Ie]:rt},a(e.activeScreenIndex,"extras",ue)},jn=$=>d.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors ${$.isOverridden?"bg-amber-50 dark:bg-amber-900/20":""}`,children:[d.jsx("td",{className:"p-2 pl-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"flex-1",children:fe($)}),s&&!E&&d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",onClick:()=>x(y===$.id?null:$.id),className:`p-1 rounded ${y===$.id?"bg-teal-100 text-teal-700":"text-slate-300 hover:text-teal-600"}`,children:d.jsx(To,{size:12})}),$.isOverridden&&d.jsx("button",{type:"button",onClick:()=>_($.id),className:"text-amber-500 hover:text-red-500",children:d.jsx(z0,{size:12})})]})]})}),!E&&d.jsx("td",{className:"p-2 text-right w-24",children:y===$.id?d.jsx("input",{type:"number",className:"w-full p-1 text-right text-xs border rounded",value:m[$.id]?.rate??$.unit,onChange:Ie=>g($.id,"rate",Ie.target.value)}):Le($.unit,"INR",!1)}),d.jsx("td",{className:"p-2 text-center border-l border-slate-100 dark:border-slate-700 w-16",children:y===$.id?d.jsx("input",{type:"number",className:"w-full p-1 text-center text-xs border rounded",value:m[$.id]?.qty??$.qty,onChange:Ie=>g($.id,"qty",Ie.target.value)}):$.qty}),!E&&d.jsxs(d.Fragment,{children:[d.jsx("td",{className:"p-2 text-right text-slate-500 w-24",children:Le($.total,"INR",!1)}),d.jsx("td",{className:"p-2 text-right font-medium border-l border-slate-100 dark:border-slate-700 w-28",children:Le($.total*L,"INR",!1)})]})]},$.id),is=$=>d.jsxs("div",{className:`bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 mb-3 shadow-sm ${$.isOverridden?"ring-1 ring-amber-400 bg-amber-50 dark:bg-amber-900/10":""}`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:$.name}),s&&!E&&d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",onClick:()=>x(y===$.id?null:$.id),className:`p-1 rounded ${y===$.id?"bg-teal-100 text-teal-700":"text-slate-300 hover:text-teal-600"}`,children:d.jsx(To,{size:14})}),$.isOverridden&&d.jsx("button",{type:"button",onClick:()=>_($.id),className:"text-amber-500 hover:text-red-500",children:d.jsx(z0,{size:14})})]})]}),d.jsx("div",{className:"mb-3",children:fe($)}),d.jsxs("div",{className:`grid ${E?"grid-cols-1":"grid-cols-3"} gap-2 text-xs bg-slate-50 dark:bg-slate-700/50 p-2 rounded`,children:[!E&&d.jsxs("div",{children:[d.jsx("span",{className:"block text-[9px] uppercase text-slate-400 font-bold mb-1",children:"Rate"}),y===$.id?d.jsx("input",{type:"number",className:"w-full p-1 text-right text-xs border rounded",value:m[$.id]?.rate??$.unit,onChange:Ie=>g($.id,"rate",Ie.target.value)}):d.jsx("span",{className:"block font-medium dark:text-slate-200",children:Le($.unit,"INR",!1)})]}),d.jsxs("div",{className:`${E?"text-left":"text-center border-l border-slate-200 dark:border-slate-600"}`,children:[d.jsx("span",{className:"block text-[9px] uppercase text-slate-400 font-bold mb-1",children:"Qty"}),y===$.id?d.jsx("input",{type:"number",className:"w-full p-1 text-center text-xs border rounded",value:m[$.id]?.qty??$.qty,onChange:Ie=>g($.id,"qty",Ie.target.value)}):d.jsx("span",{className:"block font-medium dark:text-slate-200",children:$.qty})]}),!E&&d.jsxs("div",{className:"text-right border-l border-slate-200 dark:border-slate-600",children:[d.jsx("span",{className:"block text-[9px] uppercase text-slate-400 font-bold mb-1",children:"Total"}),d.jsx("span",{className:"block font-bold text-teal-600 dark:text-teal-400",children:Le($.total*L,"INR",!1)})]})]})]},$.id);return d.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[d.jsx("div",{className:"hidden md:block overflow-x-auto",children:d.jsxs("table",{className:"w-full text-xs text-left border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 font-bold",children:[d.jsx("th",{className:"p-2",children:"Component Selection"}),!E&&d.jsx("th",{className:"p-2 text-right",children:"Rate (Cost)"}),d.jsx("th",{className:"p-2 text-center border-l border-slate-200 dark:border-slate-700",children:"Qty/Scrn"}),!E&&d.jsx("th",{className:"p-2 text-right",children:"Cost/Scrn"}),!E&&d.jsx("th",{className:"p-2 text-right border-l border-slate-200 dark:border-slate-700",children:"Total Cost"})]})}),d.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[d.jsx("tr",{className:"bg-slate-50 dark:bg-slate-800/50",children:d.jsx("td",{colSpan:E?2:5,className:"p-2 font-bold text-teal-700 dark:text-teal-400 uppercase tracking-wider text-[10px]",children:"A. LED Panel & Logistics"})}),W.map(jn),d.jsx("tr",{className:"bg-white dark:bg-slate-900",children:d.jsx("td",{colSpan:E?2:5,className:"p-2 text-center",children:d.jsxs("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"extraComponents",[...se||[],{id:V(),componentId:"",qty:1,type:"screen"}]),className:"text-[10px] text-teal-600 hover:underline flex items-center justify-center gap-1 w-full",children:[d.jsx(_o,{size:10})," Add Component to Panel"]})})}),!E&&(Array.isArray(pe)?pe:[]).map(($,Ie)=>d.jsxs("tr",{className:"text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700/50 group",children:[d.jsx("td",{className:"p-2 pl-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>st(Ie),className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(Os,{size:12})}),d.jsx("input",{type:"text",value:$.name,onChange:rt=>ht(Ie,"name",rt.target.value),className:"text-xs border-b border-transparent hover:border-slate-300 focus:border-teal-500 bg-transparent outline-none w-full text-slate-600 dark:text-slate-300 font-medium"})]})}),d.jsx("td",{className:"p-2 text-right",children:d.jsxs("div",{className:"flex items-center justify-end gap-1",children:[d.jsx("input",{type:"number",value:$.val,onChange:rt=>ht(Ie,"val",rt.target.value),className:"w-16 p-1 text-right text-xs border rounded bg-white dark:bg-slate-800 dark:border-slate-600"}),d.jsx("button",{type:"button",onClick:()=>ht(Ie,"type",$.type==="abs"?"pct":"abs"),className:"px-1 text-[10px] font-bold border rounded bg-slate-100 dark:bg-slate-700",children:$.type==="abs"?"":"%"})]})}),d.jsx("td",{className:"p-2 text-center border-l border-slate-100 dark:border-slate-700 text-[10px] text-slate-400",children:$.type==="pct"?`${$.val}%`:"-"}),d.jsx("td",{className:"p-2 text-right",children:Le(Ve($.id),"INR",!1)}),d.jsx("td",{className:"p-2 text-right border-l border-slate-100 dark:border-slate-700",children:Le(Ve($.id)*L,"INR",!1)})]},$.id)),!E&&d.jsx("tr",{className:"bg-slate-50 dark:bg-slate-800/20",children:d.jsx("td",{colSpan:"5",className:"p-1 text-center",children:d.jsxs("button",{onClick:Wn,className:"text-[10px] text-blue-600 hover:text-blue-700 font-bold uppercase tracking-wider flex items-center justify-center gap-1 py-1 w-full hover:bg-slate-100 dark:hover:bg-slate-700 rounded transition-colors",children:[d.jsx(_o,{size:10})," Add Extra Cost"]})})}),!E&&d.jsxs("tr",{className:"bg-teal-50 dark:bg-teal-900/20 font-bold border-t border-teal-100 dark:border-teal-800",children:[d.jsx("td",{className:"p-2 text-right text-teal-800 dark:text-teal-300",children:"Sub-total (LED Panel)"}),d.jsxs("td",{className:"p-2 text-right text-teal-700 dark:text-teal-400 text-[10px] font-normal",children:[Le(ce,"INR"),"/sqft"]}),d.jsx("td",{className:"p-2 text-center border-l border-teal-100 dark:border-teal-800",children:"-"}),d.jsx("td",{className:"p-2 text-right text-teal-800 dark:text-teal-300",children:Le(ee,"INR",!1)}),d.jsx("td",{className:"p-2 text-right text-teal-800 dark:text-teal-300 border-l border-teal-100 dark:border-teal-800",children:Le(te,"INR",!1)})]}),!E&&d.jsxs(d.Fragment,{children:[d.jsx("tr",{className:"bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700",children:d.jsx("td",{colSpan:"5",className:"p-2 font-bold text-blue-700 dark:text-blue-400 uppercase tracking-wider text-[10px]",children:"B. Additional Costs"})}),ve.map(jn),["installation","structure"].map($=>{const Ie=$==="installation"?"install":"structure",rt=$==="installation"?"Installation":"Structure";return d.jsxs("tr",{className:"text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[d.jsx("td",{className:"p-2 pl-4",children:d.jsxs("div",{className:"flex flex-col gap-1",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-xs font-medium",children:rt}),d.jsxs("select",{value:S[$]?.unit||"sqft",onChange:ue=>a(e.activeScreenIndex,"commercials",{...S,[$]:{...S[$],unit:ue.target.value}}),className:"text-[10px] p-0.5 border rounded bg-slate-50 dark:bg-slate-700",children:[d.jsx("option",{value:"sqft",children:"/Sq.Ft"}),d.jsx("option",{value:"screen",children:"/Screen"})]})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Sell:"}),d.jsx("input",{type:"number",className:"w-20 p-0.5 text-xs border border-green-200 rounded bg-green-50 text-green-800",value:S[$]?.val||0,onChange:ue=>a(e.activeScreenIndex,"commercials",{...S,[$]:{...S[$],val:ue.target.value}})})]})]})}),d.jsx("td",{className:"p-2 text-right",children:d.jsxs("div",{className:"flex items-center justify-end gap-1",children:[d.jsx("span",{className:"text-[10px] text-slate-400 mr-1",children:"Cost:"}),d.jsx("input",{type:"number",value:S[$]?.cost||0,onChange:ue=>a(e.activeScreenIndex,"commercials",{...S,[$]:{...S[$],cost:ue.target.value}}),className:"w-16 p-1 text-right text-xs border rounded bg-white dark:bg-slate-800 dark:border-slate-600"}),d.jsx("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"commercials",{...S,[$]:{...S[$],costType:S[$]?.costType==="abs"?"pct":"abs"}}),className:"px-1 text-[10px] font-bold border rounded bg-slate-100 dark:bg-slate-700",children:S[$]?.costType==="abs"?"":"%"})]})}),d.jsx("td",{className:"p-2 text-center border-l border-slate-100 dark:border-slate-700 text-xs",children:S[$]?.unit==="sqft"?s?.matrix.sqft.perScreen.toFixed(1)||"-":"1"}),d.jsx("td",{className:"p-2 text-right",children:Le(Ve(Ie),"INR",!1)}),d.jsx("td",{className:"p-2 text-right border-l border-slate-100 dark:border-slate-700",children:Le(Ve(Ie)*L,"INR",!1)})]},$)}),d.jsxs("tr",{className:"bg-blue-50 dark:bg-blue-900/20 font-bold border-t border-blue-100 dark:border-blue-800",children:[d.jsx("td",{className:"p-2 text-right text-blue-800 dark:text-blue-300",children:"Sub-total (Additional)"}),d.jsxs("td",{className:"p-2 text-right text-blue-700 dark:text-blue-400 text-[10px] font-normal",children:[Le(wn,"INR"),"/sqft"]}),d.jsx("td",{className:"p-2 text-center border-l border-blue-100 dark:border-blue-800",children:"-"}),d.jsx("td",{className:"p-2 text-right text-blue-800 dark:text-blue-300",children:Le(lr,"INR",!1)}),d.jsx("td",{className:"p-2 text-right text-blue-800 dark:text-blue-300 border-l border-blue-100 dark:border-blue-800",children:Le(dn,"INR",!1)})]})]}),!E&&d.jsxs("tr",{className:"bg-slate-800 text-white font-bold border-t-2 border-slate-900 text-sm",children:[d.jsx("td",{className:"p-3 text-right uppercase",children:"Grand Total (Cost)"}),d.jsxs("td",{className:"p-3 text-right text-slate-300 text-xs font-normal",children:[Le(Yn,"INR"),"/sqft"]}),d.jsx("td",{className:"p-3 text-center border-l border-slate-600",children:"-"}),d.jsx("td",{className:"p-3 text-right border-l border-slate-600",children:Le(Dn,"INR",!1)}),d.jsx("td",{className:"p-3 text-right border-l border-slate-600",children:Le(zn,"INR",!1)})]})]})]})}),d.jsxs("div",{className:"md:hidden bg-slate-50 dark:bg-slate-800/20 p-3",children:[d.jsx("div",{className:"mb-2 font-bold text-teal-700 text-xs uppercase tracking-wider",children:"A. LED Panel & Logistics"}),W.map(is),d.jsxs("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"extraComponents",[...se||[],{id:V(),componentId:"",qty:1,type:"screen"}]),className:"w-full py-2 mb-4 bg-white dark:bg-slate-800 border border-teal-200 dark:border-teal-700 text-teal-600 dark:text-teal-400 rounded-lg text-xs font-bold flex items-center justify-center gap-2",children:[d.jsx(_o,{size:14})," Add Component"]}),!E&&d.jsxs(d.Fragment,{children:[(Array.isArray(pe)?pe:[]).map(($,Ie)=>d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 mb-3 shadow-sm flex items-center justify-between",children:[d.jsx("div",{className:"flex-1",children:d.jsx("input",{type:"text",value:$.name,onChange:rt=>ht(Ie,"name",rt.target.value),className:"text-xs font-bold border-b border-transparent focus:border-teal-500 bg-transparent outline-none w-full text-slate-600 dark:text-slate-300"})}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"number",value:$.val,onChange:rt=>ht(Ie,"val",rt.target.value),className:"w-12 p-1 text-right text-xs border rounded bg-slate-50 dark:bg-slate-700"}),d.jsx("button",{type:"button",onClick:()=>ht(Ie,"type",$.type==="abs"?"pct":"abs"),className:"px-1 text-[10px] font-bold border rounded bg-slate-100 dark:bg-slate-600",children:$.type==="abs"?"":"%"}),d.jsx("button",{onClick:()=>st(Ie),className:"text-red-400 p-1",children:d.jsx(Os,{size:14})})]})]},$.id)),d.jsxs("button",{onClick:Wn,className:"w-full py-2 mb-4 bg-white dark:bg-slate-800 border border-blue-200 dark:border-blue-700 text-blue-600 dark:text-blue-400 rounded-lg text-xs font-bold flex items-center justify-center gap-2",children:[d.jsx(_o,{size:14})," Add Overhead Cost"]}),d.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg border border-teal-100 dark:border-teal-800 mb-6",children:[d.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-teal-800 dark:text-teal-300",children:[d.jsx("span",{children:"Sub-total (LED Panel)"}),d.jsx("span",{children:Le(te,"INR",!1)})]}),d.jsxs("div",{className:"text-[10px] text-right text-teal-600 dark:text-teal-400 mt-1",children:[Le(ce,"INR"),"/sqft"]})]}),d.jsx("div",{className:"mb-2 font-bold text-blue-700 text-xs uppercase tracking-wider",children:"B. Additional Costs"}),ve.map(is),["installation","structure"].map($=>{const Ie=$==="installation"?"install":"structure",rt=$==="installation"?"Installation":"Structure";return d.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 mb-3 shadow-sm",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:rt}),d.jsxs("select",{value:S[$]?.unit||"sqft",onChange:ue=>a(e.activeScreenIndex,"commercials",{...S,[$]:{...S[$],unit:ue.target.value}}),className:"text-[10px] p-0.5 border rounded bg-slate-50 dark:bg-slate-700",children:[d.jsx("option",{value:"sqft",children:"/Sq.Ft"}),d.jsx("option",{value:"screen",children:"/Screen"})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[d.jsxs("div",{className:"flex items-center gap-1 bg-green-50 p-1 rounded border border-green-100",children:[d.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Sell:"}),d.jsx("input",{type:"number",className:"w-full p-0.5 text-xs bg-transparent outline-none text-green-800 font-bold",value:S[$]?.val||0,onChange:ue=>a(e.activeScreenIndex,"commercials",{...S,[$]:{...S[$],val:ue.target.value}})})]}),d.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 p-1 rounded border border-slate-100",children:[d.jsx("span",{className:"text-[10px] text-slate-400",children:"Cost:"}),d.jsx("input",{type:"number",className:"w-full p-0.5 text-xs bg-transparent outline-none",value:S[$]?.cost||0,onChange:ue=>a(e.activeScreenIndex,"commercials",{...S,[$]:{...S[$],cost:ue.target.value}})}),d.jsx("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"commercials",{...S,[$]:{...S[$],costType:S[$]?.costType==="abs"?"pct":"abs"}}),className:"px-1 text-[10px] font-bold",children:S[$]?.costType==="abs"?"":"%"})]})]}),d.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-100 dark:border-slate-700",children:[d.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"Total Cost"}),d.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:Le(Ve(Ie)*L,"INR",!1)})]})]},$)}),d.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-100 dark:border-blue-800 mb-6",children:d.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-blue-800 dark:text-blue-300",children:[d.jsx("span",{children:"Sub-total (Additional)"}),d.jsx("span",{children:Le(dn,"INR",!1)})]})}),d.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg text-white shadow-lg",children:[d.jsxs("div",{className:"flex justify-between items-end mb-1",children:[d.jsx("span",{className:"text-xs uppercase text-slate-400 font-bold",children:"Grand Total (Cost)"}),d.jsx("span",{className:"text-lg font-bold",children:Le(zn,"INR",!1)})]}),d.jsxs("div",{className:"text-[10px] text-right text-slate-500",children:[Le(Yn,"INR"),"/sqft"]})]})]})]})]})},H3=({user:s,userRole:e,inventory:t,transactions:r,state:a,setState:l,exchangeRate:u,setExchangeRate:m,onSaveQuote:g,readOnly:y=!1})=>{const{client:x,project:_,screenQty:E,targetWidth:D,targetHeight:L,unit:R,selectedIndoor:B,assemblyMode:z,sizingMode:ne,margin:Z,extras:Se,overrides:se,editingRow:pe}=a,[S,N]=Bt.useState(null),[k,V]=Bt.useState(null),[T,P]=Bt.useState(!1),[C,_e]=Bt.useState(!1),be=e==="supervisor",U=q3(a,300),oe=te=>r?r.filter(ee=>ee.itemId===te).reduce((ee,ce)=>ee+(ce.type==="in"?Number(ce.qty):-Number(ce.qty)),0):0,fe=(te,ee)=>l(ce=>({...ce,[te]:ee})),Ve=(te,ee,ce)=>{const ve=a.activeScreenIndex;l(Ae=>{const Ge=[...Ae.screens];return Ge[ve]={...Ge[ve],extras:{...Ge[ve].extras,[te]:{...Ge[ve].extras[te],[ee]:ce}}},{...Ae,screens:Ge}})},Fe=()=>{confirm("Reset calculator to defaults?")&&l({client:"",project:"",unit:"ft",screens:[{id:Ry(),screenQty:0,targetWidth:0,targetHeight:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedSMPSId:"",selectedProcId:"",sizingMode:"closest",readyId:"",extraComponents:[],overrides:{},editingRow:null,extras:[],commercials:{processor:{val:0,unit:"screen",cost:0,costType:"abs"},installation:{val:0,unit:"sqft",cost:0,costType:"abs"},structure:{val:0,unit:"sqft",cost:0,costType:"abs"}}}],activeScreenIndex:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedSMPSId:"",selectedProcId:"",sizingMode:"closest",readyId:"",margin:0,pricingMode:"margin",targetSellPrice:0,extraComponents:[],commercials:{processor:{val:0,unit:"screen"},installation:{val:0,unit:"sqft"},structure:{val:0,unit:"sqft"}},terms:{price:Mt.DEFAULTS.PRICE_BASIS,deliveryWeeks:Mt.DEFAULTS.DELIVERY_WEEKS,payment:Mt.DEFAULTS.PAYMENT_TERMS},extras:[],overrides:{},editingRow:null})},M=()=>{const te={id:Ry(),screenQty:1,targetWidth:0,targetHeight:0,selectedIndoor:a.selectedIndoor,assemblyMode:a.assemblyMode,selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedPSUId:"",selectedProcId:"",sizingMode:"closest",readyId:"",extraComponents:[],overrides:{},editingRow:null,extras:[],commercials:{processor:{val:0,unit:"screen",cost:0,costType:"abs"},installation:{val:0,unit:"sqft",cost:0,costType:"abs"},structure:{val:0,unit:"sqft",cost:0,costType:"abs"}}};l(ee=>({...ee,screens:[...ee.screens,te],activeScreenIndex:ee.screens.length}))},W=(te,ee,ce)=>{l(ve=>{const Ae=[...ve.screens];return Ae[te]={...Ae[te],[ee]:ce},{...ve,screens:Ae}})},me=(te,ee,ce)=>{const ve=a.screens[a.activeScreenIndex];W(a.activeScreenIndex,"overrides",{...ve.overrides,[te]:{...ve.overrides[te],[ee]:ce}})},we=te=>{const ce={...a.screens[a.activeScreenIndex].overrides};delete ce[te],W(a.activeScreenIndex,"overrides",ce),W(a.activeScreenIndex,"editingRow",null)};return Bt.useEffect(()=>{if(!U.screens||U.screens.length===0){N(null);return}const te=U.screens[U.activeScreenIndex];if(!te){N(null);return}const ee={...U,...te},ce=Eo(ee,t,r,u);N(ce)},[U,t,u]),Bt.useEffect(()=>{const ee=(()=>{if(!U.screens||U.screens.length===0)return null;const ce=U.screens.map(Ae=>{const Ge={...U,...Ae};return Eo(Ge,t,r,u)}).filter(Ae=>Ae!==null);if(ce.length===0)return null;const ve={totalProjectCost:ce.reduce((Ae,Ge)=>Ae+Ge.totalProjectCost,0),totalProjectSell:ce.reduce((Ae,Ge)=>Ae+Ge.totalProjectSell,0),totalLEDSell:ce.reduce((Ae,Ge)=>Ae+Ge.matrix.led.sell*Ge.screenQty,0),totalServicesSell:ce.reduce((Ae,Ge)=>Ae+(Ge.matrix.sell.total-Ge.matrix.led.sell*Ge.screenQty),0),totalMargin:0,totalScreenQty:ce.reduce((Ae,Ge)=>Ae+Number(Ge.screenQty),0),calculations:ce,screenConfigs:U.screens};return ve.totalMargin=ve.totalProjectSell-ve.totalProjectCost,ve})();V(ee)},[U,t,u]),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 relative items-start",children:[C&&(S||k)&&d.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:d.jsxs("div",{className:"bg-white dark:bg-slate-900 max-w-5xl w-full h-[90vh] rounded-lg shadow-2xl flex flex-col overflow-hidden",children:[d.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800",children:[d.jsx("div",{className:"flex items-center gap-4",children:d.jsxs("h2",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[d.jsx(sm,{size:20,className:"text-teal-600"})," BOM"]})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>_e(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded text-sm font-bold",children:"Close"}),d.jsxs("button",{onClick:()=>{const te=document.title;document.title=`${x}_${_}_BOM`.replace(/[^a-zA-Z0-9_]/g,"_"),window.print(),document.title=te},className:"px-4 py-2 bg-slate-800 text-white hover:bg-slate-700 rounded flex items-center gap-2 text-sm font-bold",children:[d.jsx(qf,{size:16})," Print"]})]})]}),d.jsx("div",{className:"flex-1 overflow-auto bg-slate-100 dark:bg-slate-800 p-8 flex justify-center",children:d.jsx(AN,{data:S?{...S,clientName:x,projectName:_}:null,allScreensData:k?{...k,clientName:x,projectName:_,screenConfigs:a.screens.map(te=>({targetWidth:te.targetWidth,targetHeight:te.targetHeight,unit:R}))}:null,inventory:t,transactions:r})})]})}),T&&(S||k)&&d.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:d.jsxs("div",{className:"bg-white max-w-4xl w-full h-[90vh] rounded-lg shadow-2xl flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-100 rounded-t-lg",children:[d.jsxs("h2",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[d.jsx(U0,{size:20})," Print Preview"]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded",children:"Close"}),d.jsxs("button",{onClick:()=>{const te=document.title;document.title=`${x}_${_}_Quote`.replace(/[^a-zA-Z0-9_]/g,"_"),window.print(),document.title=te},className:"px-4 py-2 bg-teal-600 text-white hover:bg-teal-700 rounded flex items-center gap-2",children:[d.jsx(qf,{size:16})," Print / Save PDF"]})]})]}),d.jsx("div",{className:"flex-1 overflow-auto p-8 bg-slate-200",children:d.jsx(SN,{data:S?{...S,clientName:x,projectName:_,margin:Z}:null,allScreensData:k?{...k,clientName:x,projectName:_}:null,currency:"INR",exchangeRate:u})})]})}),d.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[d.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-800/50 px-4 py-3 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[d.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2 text-sm",children:[d.jsx(X2,{className:"w-4 h-4 text-teal-600"})," Project Specs"]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:Fe,className:"text-[10px] font-bold text-red-500 hover:text-red-700 uppercase hover:bg-red-50 dark:hover:bg-red-900/20 px-2 py-1 rounded transition-colors mr-2 flex items-center gap-1",children:[d.jsx(z0,{size:10})," Reset"]}),d.jsxs("div",{className:"flex bg-slate-200 dark:bg-slate-700 rounded-md p-0.5",children:[d.jsx("button",{onClick:()=>fe("unit","m"),className:`px-2 py-0.5 text-[10px] font-bold rounded transition-all ${R==="m"?"bg-white dark:bg-slate-600 shadow text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400"}`,children:"M"}),d.jsx("button",{onClick:()=>fe("unit","ft"),className:`px-2 py-0.5 text-[10px] font-bold rounded transition-all ${R==="ft"?"bg-white dark:bg-slate-600 shadow text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400"}`,children:"FT"})]})]})]}),d.jsxs("div",{className:"p-4 space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[d.jsxs("div",{className:"relative group",children:[d.jsx("label",{className:"absolute -top-1.5 left-2 bg-white dark:bg-slate-800 px-1 text-[10px] font-bold text-teal-600 dark:text-teal-400",children:"CLIENT"}),d.jsx("input",{value:x,onChange:te=>fe("client",te.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-sm outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 dark:text-white transition-all",placeholder:"Client Name"})]}),d.jsxs("div",{className:"relative group",children:[d.jsx("label",{className:"absolute -top-1.5 left-2 bg-white dark:bg-slate-800 px-1 text-[10px] font-bold text-teal-600 dark:text-teal-400",children:"PROJECT"}),d.jsx("input",{value:_,onChange:te=>fe("project",te.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-sm outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 dark:text-white transition-all",placeholder:"Project Ref"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[d.jsxs("div",{className:"flex items-center border border-slate-200 dark:border-slate-600 rounded-md overflow-hidden h-8",children:[d.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-3 h-full flex items-center border-r border-slate-200 dark:border-slate-600 text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase w-20 justify-center",children:"Type"}),d.jsxs("div",{className:"flex-1 flex p-0.5 bg-slate-50 dark:bg-slate-800 h-full",children:[d.jsx("button",{onClick:()=>{fe("selectedIndoor","true"),W(a.activeScreenIndex,"selectedIndoor","true")},className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${B==="true"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Indoor"}),d.jsx("button",{onClick:()=>{fe("selectedIndoor","false"),W(a.activeScreenIndex,"selectedIndoor","false")},className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${B==="false"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Outdoor"})]})]}),d.jsxs("div",{className:"flex items-center border border-slate-200 dark:border-slate-600 rounded-md overflow-hidden h-8",children:[d.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-3 h-full flex items-center border-r border-slate-200 dark:border-slate-600 text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase w-20 justify-center",children:"Supply"}),d.jsxs("div",{className:"flex-1 flex p-0.5 bg-slate-50 dark:bg-slate-800 h-full",children:[d.jsx("button",{onClick:()=>{fe("assemblyMode","assembled"),W(a.activeScreenIndex,"assemblyMode","assembled")},className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${z==="assembled"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Assm"}),d.jsx("button",{onClick:()=>{fe("assemblyMode","ready"),W(a.activeScreenIndex,"assemblyMode","ready")},className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${z==="ready"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Ready"})]})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Screen Configurations"}),d.jsxs("button",{onClick:M,className:"text-[10px] font-bold text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 flex items-center gap-1 bg-teal-50 dark:bg-teal-900/30 px-2 py-1 rounded transition-colors border border-teal-100 dark:border-teal-800",children:[d.jsx(_o,{size:12})," Add Size"]})]}),d.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-12 gap-2 mb-1 px-2 text-[9px] font-bold text-slate-400 uppercase tracking-wider hidden md:grid",children:[d.jsx("div",{className:"col-span-1 text-center",children:"#"}),d.jsxs("div",{className:"col-span-3",children:["Width (",R,")"]}),d.jsxs("div",{className:"col-span-3",children:["Height (",R,")"]}),d.jsx("div",{className:"col-span-2 text-center",children:"Qty"}),d.jsx("div",{className:"col-span-2",children:"Sizing"}),d.jsx("div",{className:"col-span-1 text-right",children:"Actions"})]}),d.jsx("div",{className:"space-y-1 max-h-[300px] overflow-y-auto pr-1 custom-scrollbar",children:a.screens.map((te,ee)=>d.jsxs("div",{onClick:()=>l({...a,activeScreenIndex:ee}),className:`grid grid-cols-4 md:grid-cols-12 gap-3 items-start p-3 rounded-lg border transition-all cursor-pointer ${a.activeScreenIndex===ee?"border-teal-500 ring-1 ring-teal-500 bg-teal-50/50 dark:bg-teal-900/10":"border-slate-200 dark:border-slate-700 hover:border-teal-300"}`,children:[d.jsxs("div",{className:"col-span-4 md:col-span-1 flex justify-between md:justify-center items-center border-b md:border-b-0 pb-2 md:pb-0 mb-1 md:mb-0",children:[d.jsxs("span",{className:"text-xs font-bold text-slate-500 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:["#",ee+1]}),d.jsxs("div",{className:"md:hidden flex gap-3",children:[d.jsx("button",{onClick:ce=>{ce.stopPropagation();const ve=[...a.screens],Ae=Math.random().toString(36).substr(2,9);ve.splice(ee+1,0,{...ve[ee],id:Ae}),l({...a,screens:ve,activeScreenIndex:ee+1})},className:"text-blue-500 hover:text-blue-700 bg-blue-50 p-1.5 rounded",children:d.jsx(L0,{size:16})}),a.screens.length>1&&d.jsx("button",{onClick:ce=>{ce.stopPropagation();const ve=a.screens.filter((Ae,Ge)=>Ge!==ee);l({...a,screens:ve,activeScreenIndex:Math.max(0,ee-1)})},className:"text-red-400 hover:text-red-600 bg-red-50 p-1.5 rounded",children:d.jsx(Os,{size:16})})]})]}),d.jsxs("div",{className:"col-span-2 md:col-span-3",children:[d.jsxs("label",{className:"md:hidden text-[10px] font-bold text-slate-400 mb-1 block uppercase",children:["Width (",a.unit,")"]}),d.jsx("input",{type:"number",value:te.targetWidth,onChange:ce=>W(ee,"targetWidth",ce.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:border-teal-500 outline-none",placeholder:"W"})]}),d.jsxs("div",{className:"col-span-2 md:col-span-3",children:[d.jsxs("label",{className:"md:hidden text-[10px] font-bold text-slate-400 mb-1 block uppercase",children:["Height (",a.unit,")"]}),d.jsx("input",{type:"number",value:te.targetHeight,onChange:ce=>W(ee,"targetHeight",ce.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:border-teal-500 outline-none",placeholder:"H"})]}),d.jsxs("div",{className:"col-span-2 md:col-span-2",children:[d.jsx("label",{className:"md:hidden text-[10px] font-bold text-slate-400 mb-1 block uppercase",children:"Qty"}),d.jsx("input",{type:"number",value:te.screenQty,onChange:ce=>W(ee,"screenQty",ce.target.value),className:"w-full p-2 text-center text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:border-teal-500 outline-none",placeholder:"Qty"})]}),d.jsxs("div",{className:"col-span-2 md:col-span-2",children:[d.jsx("label",{className:"md:hidden text-[10px] font-bold text-slate-400 mb-1 block uppercase",children:"Sizing"}),d.jsxs("select",{value:te.sizingMode,onChange:ce=>W(ee,"sizingMode",ce.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white bg-white outline-none",children:[d.jsx("option",{value:"closest",children:"Closest"}),d.jsx("option",{value:"up",children:"Round Up"}),d.jsx("option",{value:"down",children:"Round Down"})]})]}),d.jsxs("div",{className:"hidden md:flex col-span-1 justify-end gap-1",children:[d.jsx("button",{onClick:ce=>{ce.stopPropagation();const ve=[...a.screens],Ae=Math.random().toString(36).substr(2,9);ve.splice(ee+1,0,{...ve[ee],id:Ae}),l({...a,screens:ve,activeScreenIndex:ee+1})},className:"p-1.5 text-slate-400 hover:text-blue-500 hover:bg-blue-50 rounded transition-colors",title:"Duplicate",children:d.jsx(L0,{size:14})}),a.screens.length>1&&d.jsx("button",{onClick:ce=>{ce.stopPropagation();const ve=a.screens.filter((Ae,Ge)=>Ge!==ee);l({...a,screens:ve,activeScreenIndex:Math.max(0,ee-1)})},className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Remove",children:d.jsx(Os,{size:14})})]})]},te.id))})]})]})]}),d.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:d.jsxs("details",{className:"group p-4",open:!0,children:[d.jsxs("summary",{className:"flex justify-between items-center cursor-pointer list-none",children:[d.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[d.jsx(_d,{className:"w-4 h-4 text-teal-600"})," Hardware & Cost Breakdown",a.screens.length>1&&d.jsxs("span",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:["(Screen #",a.activeScreenIndex+1," of ",a.screens.length,")"]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-teal-600 text-xs font-bold group-open:hidden",children:"Show Table"}),d.jsx("span",{className:"text-slate-400 text-xs hidden group-open:block",children:"Hide Table"})]})]}),d.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-700",children:[a.screens.length>1&&d.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:a.screens.map((te,ee)=>{const ce=a.activeScreenIndex===ee,ve=te.targetWidth&&te.targetHeight?`${te.targetWidth}${te.targetHeight}${R} (${te.screenQty})`:`Screen #${ee+1}`;return d.jsx("button",{onClick:()=>fe("activeScreenIndex",ee),className:`flex-shrink-0 px-4 py-2 rounded-lg text-xs font-bold transition-all ${ce?"bg-teal-600 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{children:["#",ee+1]}),d.jsx("span",{className:"text-[10px] opacity-75",children:ve})]})},te.id)})}),a.screens[a.activeScreenIndex]&&d.jsx("div",{className:"mb-4 p-3 bg-slate-50 dark:bg-slate-700/30 rounded-lg border border-slate-200 dark:border-slate-600",children:d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Dimensions:"}),d.jsxs("span",{className:"ml-2 font-bold text-slate-800 dark:text-white",children:[a.screens[a.activeScreenIndex].targetWidth||0,"  ",a.screens[a.activeScreenIndex].targetHeight||0," ",R]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Quantity:"}),d.jsxs("span",{className:"ml-2 font-bold text-teal-600 dark:text-teal-400",children:[a.screens[a.activeScreenIndex].screenQty||0," screens"]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Sizing:"}),d.jsx("span",{className:"ml-2 font-bold text-slate-800 dark:text-white capitalize",children:a.screens[a.activeScreenIndex].sizingMode})]}),S&&d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Final Size:"}),d.jsxs("span",{className:"ml-2 font-bold text-slate-800 dark:text-white",children:[S.finalWidth,"  ",S.finalHeight," m"]})]})]})}),d.jsx(F3,{calculation:S,state:a,updateState:fe,updateExtra:Ve,updateScreenProp:W,inventory:t,getStock:oe,overrides:a.screens[a.activeScreenIndex]?.overrides||{},onOverride:me,editingRow:a.screens[a.activeScreenIndex]?.editingRow,setEditingRow:te=>W(a.activeScreenIndex,"editingRow",te),onClearOverride:we,isSupervisor:be})]})]})}),!be&&d.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:d.jsxs("details",{className:"group p-4",children:[d.jsxs("summary",{className:"flex justify-between items-center cursor-pointer list-none",children:[d.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"Terms & Conditions"}),d.jsx("span",{className:"text-teal-600 text-xs group-open:hidden",children:"Show Details"})]}),d.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-slate-100 dark:border-slate-700",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Price Basis"}),d.jsx("input",{value:a.terms?.price,onChange:te=>l(ee=>({...ee,terms:{...ee.terms,price:te.target.value}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Delivery Weeks"}),d.jsx("input",{type:"number",value:a.terms?.deliveryWeeks,onChange:te=>l(ee=>({...ee,terms:{...ee.terms,deliveryWeeks:te.target.value}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),d.jsxs("div",{className:"col-span-1 md:col-span-2",children:[d.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 block mb-2",children:"Payment Milestones"}),(a.terms?.payment||[]).map((te,ee)=>d.jsxs("div",{className:"flex gap-2 mb-2",children:[d.jsx("input",{value:te.name,onChange:ce=>{const ve=[...a.terms.payment];ve[ee].name=ce.target.value,l(Ae=>({...Ae,terms:{...Ae.terms,payment:ve}}))},className:"flex-1 p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"Milestone Name"}),d.jsx("input",{type:"number",value:te.percent,onChange:ce=>{const ve=[...a.terms.payment];ve[ee].percent=Number(ce.target.value),l(Ae=>({...Ae,terms:{...Ae.terms,payment:ve}}))},className:"w-16 p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"%"}),d.jsx("button",{onClick:()=>{const ce=a.terms.payment.filter((ve,Ae)=>Ae!==ee);l(ve=>({...ve,terms:{...ve.terms,payment:ce}}))},className:"text-red-400",children:d.jsx(ec,{size:14})})]},ee)),d.jsx("button",{onClick:()=>l(te=>({...te,terms:{...te.terms,payment:[...te.terms.payment||[],{name:"",percent:0}]}})),className:"text-xs text-teal-600 font-bold",children:"+ Add Milestone"})]}),d.jsxs("div",{className:"col-span-1 md:col-span-2 space-y-4 pt-4 border-t border-slate-100 dark:border-slate-700",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Validity"}),d.jsx("input",{value:a.terms?.validity,onChange:te=>l(ee=>({...ee,terms:{...ee.terms,validity:te.target.value}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Warranty Terms"}),d.jsx("textarea",{rows:4,value:a.terms?.warranty,onChange:te=>l(ee=>({...ee,terms:{...ee.terms,warranty:te.target.value}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-[10px] uppercase font-bold text-teal-600 dark:text-teal-400 mb-2 block",children:"Client Scope of Work"}),d.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(a.terms?.scope||{}).map(([te,ee])=>d.jsxs("div",{children:[d.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:te==="elec"?"Electricity":te==="net"?"Internet":te==="soft"?"Software":te==="perm"?"Permissions":te==="pc"?"Computer":te}),d.jsx("textarea",{rows:2,value:ee,onChange:ce=>l(ve=>({...ve,terms:{...ve.terms,scope:{...ve.terms.scope,[te]:ce.target.value}}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]},te))})]})]})]})]})}),d.jsx("div",{className:"h-10"})]}),d.jsxs("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-24",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[d.jsxs("div",{className:"p-5 bg-gradient-to-br from-slate-50 to-white dark:from-slate-700 dark:to-slate-800",children:[a.screens.length>1&&k&&d.jsxs("div",{className:"mb-4 pb-4 border-b border-slate-200 dark:border-slate-600",children:[d.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 mb-2",children:"Project Summary"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[d.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded",children:[d.jsx("div",{className:"text-[10px] text-blue-600 dark:text-blue-400 font-semibold",children:"Screen Types"}),d.jsx("div",{className:"font-bold text-blue-800 dark:text-blue-300",children:a.screens.length})]}),d.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-2 rounded",children:[d.jsx("div",{className:"text-[10px] text-teal-600 dark:text-teal-400 font-semibold",children:"Total Qty"}),d.jsx("div",{className:"font-bold text-teal-800 dark:text-teal-300",children:k.totalScreenQty})]})]})]}),!be&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Margin Strategy"}),d.jsxs("select",{value:a.pricingMode||"margin",onChange:te=>{const ee=te.target.value;if(fe("pricingMode",ee),ee!=="margin"&&S){let ce=0;ee==="screen"?ce=S.matrix.sell.unit:ee==="sqft"?ce=S.matrix.sell.sqft:ee==="sqm"&&(ce=S.matrix.sell.sqft*10.7639),fe("targetSellPrice",Math.round(ce))}},className:"text-xs border-none bg-transparent font-bold text-teal-600 dark:text-teal-400 focus:ring-0 cursor-pointer outline-none",children:[d.jsx("option",{value:"margin",children:"Margin %"}),d.jsx("option",{value:"sqft",children:"Price / Sq.Ft"}),d.jsx("option",{value:"sqm",children:"Price / Sq.Mtr"}),d.jsx("option",{value:"screen",children:"Price / Screen"})]})]}),d.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[d.jsx("input",{type:"number",value:a.pricingMode==="margin"?Z:a.targetSellPrice,onChange:te=>{const ee=parseFloat(te.target.value)||0;a.pricingMode==="margin"?fe("margin",ee):fe("targetSellPrice",ee)},className:"w-24 text-center text-xl font-bold p-2 border rounded-lg bg-white dark:bg-slate-600 dark:border-slate-500 shadow-sm focus:ring-2 focus:ring-teal-500/50 outline-none dark:text-white"}),d.jsx("span",{className:"text-lg font-bold text-slate-400",children:a.pricingMode==="margin"?"%":""}),d.jsxs("div",{className:"flex-1 text-right",children:[d.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold",children:a.screens.length>1?"Total Profit":"Est. Profit"}),d.jsx("div",{className:`text-sm font-bold ${(k?k.totalMargin:S?.matrix.margin.total||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:k?Le(k.totalMargin,"INR"):S?Le(S.matrix.margin.total,"INR"):"-"})]})]}),d.jsx("div",{className:"space-y-3 pt-4 border-t border-slate-100 dark:border-slate-600",children:a.screens.length>1?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex justify-between items-end",children:[d.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"LED Panels (All)"}),d.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:k?Le(k.totalLEDSell,"INR"):"-"})]}),d.jsxs("div",{className:"flex justify-between items-end",children:[d.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Services & Extras"}),d.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:k?Le(k.totalServicesSell,"INR"):"-"})]}),d.jsxs("details",{className:"group",children:[d.jsx("summary",{className:"text-[10px] text-teal-600 dark:text-teal-400 font-bold uppercase cursor-pointer hover:underline",children:"View Screen Breakdown"}),d.jsx("div",{className:"mt-2 space-y-2 pl-2 border-l-2 border-slate-200 dark:border-slate-600",children:k?.calculations.map((te,ee)=>d.jsx("div",{className:"text-xs",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Screen #",ee+1,d.jsxs("span",{className:"text-[10px] ml-1",children:["(",a.screens[ee].targetWidth,"",a.screens[ee].targetHeight,R," ",te.screenQty,")"]})]}),d.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:Le(te.totalProjectSell,"INR")})]})},ee))})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex justify-between items-end",children:[d.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"LED Panel Price"}),d.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:S?Le(S.matrix.led.sell*S.screenQty,"INR"):"-"})]}),d.jsxs("div",{className:"flex justify-between items-end",children:[d.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Services & Extras"}),d.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:S?Le(S.matrix.sell.total-S.matrix.led.sell*S.screenQty,"INR"):"-"})]}),d.jsxs("div",{className:"flex justify-between items-end pt-2 mt-2 border-t border-dashed border-slate-200 dark:border-slate-600",children:[d.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"Rate / Sq.Ft"}),d.jsx("span",{className:"font-bold text-slate-500 dark:text-slate-400",children:S?Le(S.matrix.sell.sqft,"INR"):"-"})]})]})})]})]}),d.jsxs("div",{className:"bg-slate-900 p-5 text-white",children:[be?d.jsx("div",{className:"mb-2 text-center text-slate-400 text-xs uppercase font-bold tracking-wider",children:"Generator Actions"}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Grand Total (Ex. GST)"}),a.screens.length>1&&d.jsxs("span",{className:"text-xs text-teal-400 font-bold",children:[k?.totalScreenQty||0," screens"]})]}),d.jsx("div",{className:"flex justify-between items-baseline",children:d.jsx("span",{className:"text-3xl font-bold tracking-tight",children:k?Le(k.totalProjectSell,"INR"):S?Le(S.totalProjectSell,"INR"):"-"})})]}),d.jsxs("div",{className:"flex gap-2 mt-4",children:[d.jsxs("button",{onClick:()=>_e(!0),className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-xs font-bold flex flex-col items-center justify-center gap-1 transition-colors border border-slate-700 py-2",children:[d.jsx(sm,{size:16,className:"text-blue-400"})," BOM"]}),!be&&d.jsxs("button",{onClick:()=>P(!0),className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-xs font-bold flex flex-col items-center justify-center gap-1 transition-colors border border-slate-700 py-2",children:[d.jsx(qf,{size:16})," Print"]}),!y&&d.jsxs("button",{onClick:()=>g(k?k.totalProjectSell:S?.totalProjectSell),className:"flex-[2] bg-teal-600 hover:bg-teal-500 text-white font-bold rounded-lg shadow-lg shadow-teal-900/20 transition-all flex justify-center items-center gap-2 py-2",children:[d.jsx(cI,{size:18})," Save"]})]})]})]}),d.jsx("div",{className:"bg-slate-900 rounded-xl shadow-lg p-6 text-white overflow-hidden relative min-h-[250px] flex items-center justify-center",children:S?d.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:d.jsx(z3,{cols:S.gridCols,rows:S.gridRows,module:S.moduleType,cabinet:S.cabinetType,unit:R})}):d.jsxs("div",{className:"text-slate-500 flex flex-col items-center",children:[d.jsx(z2,{size:32,className:"mb-2 opacity-50"}),d.jsx("span",{children:"Enter dimensions"})]})})]})]})},G3=({user:s})=>{const[e,t]=nt.useState([]),[r,a]=nt.useState(!1),[l,u]=nt.useState({username:"",password:"",role:"labour"}),[m,g]=nt.useState(null),[y,x]=nt.useState("");nt.useEffect(()=>{const R=Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("user_roles").onSnapshot(B=>{const z=B.docs.map(ne=>({id:ne.id,...ne.data()}));t(z)});return()=>R()},[]);const _=async()=>{if(!l.username||!l.password)return alert("Please fill all fields");if(l.password.length<6)return alert("Password must be at least 6 characters");a(!0);try{const R=`${l.username.trim().toLowerCase()}@admire.internal`,z=(await M3.auth().createUserWithEmailAndPassword(R,l.password)).user.uid;await Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("user_roles").doc(z).set({username:l.username.trim(),role:l.role,createdAt:new Date().toISOString()}),u({username:"",password:"",role:"labour"}),alert("User Created Successfully")}catch(R){alert("Error: "+R.message)}finally{a(!1)}},E=async(R,B)=>{if(confirm(`Are you sure you want to remove access for "${B}"?`))try{await Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("user_roles").doc(R).delete()}catch(z){alert("Error deleting user role: "+z.message)}},D=R=>{g(R.id),x(R.role)},L=async R=>{try{await Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("user_roles").doc(R).update({role:y}),g(null)}catch(B){alert("Update failed: "+B.message)}};return d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden",children:[d.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex items-center gap-3",children:[d.jsx(uI,{className:"text-teal-600 dark:text-teal-400"}),d.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"User Management"})]}),d.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700",children:[d.jsx("h3",{className:"text-xs font-bold uppercase text-slate-500 mb-4",children:"Create New User"}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[d.jsx("input",{type:"text",placeholder:"Username (e.g. arpit)",value:l.username,onChange:R=>u({...l,username:R.target.value}),className:"flex-1 p-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-sm"}),d.jsx("input",{type:"password",placeholder:"Password (min 6 chars)",value:l.password,onChange:R=>u({...l,password:R.target.value}),className:"flex-1 p-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-sm"}),d.jsxs("select",{value:l.role,onChange:R=>u({...l,role:R.target.value}),className:"p-2 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-sm",children:[d.jsx("option",{value:"labour",children:"Labour (Read Only)"}),d.jsx("option",{value:"supervisor",children:"Supervisor (Can Update Stock)"}),d.jsx("option",{value:"manager",children:"Manager (Can Edit Price/Quotes)"}),d.jsx("option",{value:"super_admin",children:"Super Admin (Full Access)"})]}),d.jsx("button",{onClick:_,disabled:r,className:"bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded flex items-center gap-2 text-sm font-bold transition-colors",children:r?"Saving...":d.jsxs(d.Fragment,{children:[d.jsx(lC,{size:16})," Add"]})})]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left text-sm text-slate-600 dark:text-slate-300",children:[d.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 uppercase text-xs font-bold text-slate-500",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-4",children:"Username"}),d.jsx("th",{className:"px-6 py-4",children:"Role"}),d.jsx("th",{className:"px-6 py-4 text-right",children:"Action"})]})}),d.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[e.map(R=>d.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[d.jsx("td",{className:"px-6 py-4 font-medium text-slate-800 dark:text-white",children:R.username||d.jsxs("span",{className:"text-slate-400 italic font-normal",title:R.id,children:["Unknown (ID: ",R.id.substr(0,8),"...)"]})}),d.jsx("td",{className:"px-6 py-4",children:m===R.id?d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("select",{value:y,onChange:B=>x(B.target.value),className:"p-1 border rounded text-xs bg-white dark:bg-slate-800",children:[d.jsx("option",{value:"labour",children:"Labour"}),d.jsx("option",{value:"supervisor",children:"Supervisor"}),d.jsx("option",{value:"manager",children:"Manager"}),d.jsx("option",{value:"super_admin",children:"Super Admin"})]})}):d.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold uppercase tracking-wider 
                                            ${R.role==="super_admin"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300":R.role==="manager"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":R.role==="supervisor"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400"}`,children:R.role.replace("_"," ")})}),d.jsx("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:m===R.id?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>L(R.id),className:"p-1.5 text-green-600 hover:bg-green-50 rounded",title:"Save",children:d.jsx(lI,{size:16})}),d.jsx("button",{onClick:()=>g(null),className:"p-1.5 text-slate-400 hover:bg-slate-100 rounded",title:"Cancel",children:d.jsx(ec,{size:16})})]}):d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>D(R),className:"p-1.5 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Edit Role",children:d.jsx(H2,{size:16})}),d.jsx("button",{onClick:()=>E(R.id,R.username||"User"),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete User",children:d.jsx(Os,{size:16})})]})})]},R.id)),e.length===0&&d.jsx("tr",{children:d.jsx("td",{colSpan:"3",className:"px-6 py-8 text-center text-slate-400 italic",children:"No users found."})})]})]})}),d.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-3 text-xs text-amber-800 dark:text-amber-400 border-t border-amber-100 dark:border-amber-900/20 text-center",children:"To change a password or username, please delete the user and create them again."})]})},Q3=()=>{const[s,e]=nt.useState([]),[t,r]=nt.useState(!1),[a,l]=nt.useState(null);nt.useEffect(()=>{const E=Dt.collection("artifacts").doc(cn).collection("private").doc("system").collection("backups").orderBy("timestamp","desc").limit(20).onSnapshot(D=>{const L=D.docs.map(R=>({id:R.id,...R.data()}));if(e(L),L.length>0){const R=L.filter(B=>!B.isSafetySnapshot);R.length>0&&l(new Date(R[0].timestamp))}});return()=>E()},[]);const u=async()=>{const E=Dt.collection("artifacts").doc(cn).collection("public").doc("data"),[D,L,R,B]=await Promise.all([E.collection("inventory").get(),E.collection("quotes").get(),E.collection("transactions").get(),E.collection("user_roles").get()]);return{timestamp:new Date().toISOString(),stats:{inventory:D.size,quotes:L.size,transactions:R.size,roles:B.size},data:{inventory:D.docs.map(z=>({id:z.id,...z.data()})),quotes:L.docs.map(z=>({id:z.id,...z.data()})),transactions:R.docs.map(z=>({id:z.id,...z.data()})),user_roles:B.docs.map(z=>({id:z.id,...z.data()}))}}},m=async(E,D=!1)=>{const L=E.timestamp.replace(/[:.]/g,"-"),R=D?`SAFETY-${L}`:L;await Dt.collection("artifacts").doc(cn).collection("private").doc("system").collection("backups").doc(R).set({timestamp:E.timestamp,stats:E.stats,isSafetySnapshot:D,payload:JSON.stringify(E.data)})},g=async()=>{r(!0);try{const E=await u();await m(E,!1),await x(),alert("Snapshot Created Successfully!")}catch(E){alert("Backup Failed: "+E.message)}finally{r(!1)}},y=async E=>{if(!confirm(`WARNING: You are about to restore data from ${new Date(E.timestamp).toLocaleString()}.

Current data will be overwritten.`))return;if(prompt("Type 'RESTORE' to confirm:")!=="RESTORE")return alert("Cancelled.");r(!0);try{if(!E.isSafetySnapshot){const z=await u();await m(z,!0)}const L=JSON.parse(E.payload),R=Dt.collection("artifacts").doc(cn).collection("public").doc("data"),B=async(z,ne)=>{if(!ne)return;const Z=[];for(let Se=0;Se<ne.length;Se+=400)Z.push(ne.slice(Se,Se+400));for(const Se of Z){const se=Dt.batch();Se.forEach(pe=>{const S=R.collection(z).doc(pe.id);se.set(S,pe)}),await se.commit()}};await B("inventory",L.inventory),await B("transactions",L.transactions),await B("quotes",L.quotes),await B("user_roles",L.user_roles),alert("System Restored. A 'Safety Snapshot' of your previous data was created just in case."),window.location.reload()}catch(L){alert("Restore Failed: "+L.message)}finally{r(!1)}},x=async()=>{const E=new Date;E.setDate(E.getDate()-30);const D=await Dt.collection("artifacts").doc(cn).collection("private").doc("system").collection("backups").where("timestamp","<",E.toISOString()).get(),L=Dt.batch();D.forEach(R=>L.delete(R.ref)),await L.commit(),D.empty},_=a&&new Date-a<1440*60*1e3;return d.jsxs("div",{className:"p-6 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[d.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 mb-6 text-slate-800 dark:text-white",children:[d.jsx(Yw,{className:"text-blue-600"})," Disaster Recovery"]}),d.jsxs("div",{className:`p-4 rounded-lg mb-6 border flex flex-col md:flex-row justify-between items-center gap-4 ${_?"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800":"bg-amber-50 border-amber-200 dark:bg-amber-900/20 dark:border-amber-800"}`,children:[d.jsxs("div",{children:[d.jsxs("h3",{className:`text-sm font-bold flex items-center gap-2 ${_?"text-green-800 dark:text-green-300":"text-amber-800 dark:text-amber-300"}`,children:[_?d.jsx(lI,{size:16}):d.jsx(aC,{size:16}),_?"System is Backed Up":"Daily Backup Pending"]}),d.jsx("p",{className:"text-xs opacity-80 mt-1",children:a?`Last manual snapshot: ${a.toLocaleString()}`:"No manual backups found."})]}),d.jsxs("button",{onClick:g,disabled:t,className:`whitespace-nowrap flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-colors shadow-sm ${_?"bg-white text-green-700 border border-green-200 hover:bg-green-50":"bg-amber-600 text-white hover:bg-amber-700"}`,children:[t?d.jsx(j2,{className:"animate-spin",size:16}):d.jsx(cI,{size:16}),_?"Create New Snapshot":"Backup Now"]})]}),d.jsxs("div",{className:"mt-8",children:[d.jsx("h3",{className:"text-xs font-bold uppercase text-slate-500 mb-3",children:"Snapshot History"}),d.jsxs("div",{className:"space-y-3",children:[s.map(E=>d.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${E.isSafetySnapshot?"bg-indigo-50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-800":"bg-slate-50 border-slate-200 dark:bg-slate-700/30 dark:border-slate-700"}`,children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[E.isSafetySnapshot&&d.jsxs("span",{className:"bg-indigo-100 text-indigo-700 text-[10px] font-bold px-1.5 rounded border border-indigo-200 flex items-center gap-1",children:[d.jsx(Z2,{size:10})," Safety Auto-Save"]}),d.jsx("div",{className:"text-sm font-bold text-slate-700 dark:text-white",children:new Date(E.timestamp).toLocaleString()})]}),d.jsxs("div",{className:"text-[10px] text-slate-500 mt-1 flex gap-2 flex-wrap",children:[d.jsxs("span",{className:"bg-white dark:bg-slate-600 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-500",children:[" ",E.stats.inventory," Items"]}),d.jsxs("span",{className:"bg-white dark:bg-slate-600 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-500",children:[" ",E.stats.quotes," Quotes"]}),d.jsxs("span",{className:"bg-white dark:bg-slate-600 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-500",children:[" ",E.stats.transactions," Tx"]})]})]}),d.jsxs("button",{onClick:()=>y(E),className:"text-blue-500 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 px-3 py-1.5 rounded text-xs font-bold border border-transparent hover:border-blue-200 transition-all flex items-center gap-1",children:[d.jsx(Yw,{size:12})," Restore"]})]},E.id)),s.length===0&&d.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:"No backups found."})]})]})]})},$3=()=>{const[s,e]=nt.useState({username:"",password:""}),[t,r]=nt.useState(""),a=async l=>{l.preventDefault(),r("");try{const u=`${s.username.trim().toLowerCase()}@admire.internal`;await Ny.signInWithEmailAndPassword(u,s.password)}catch{r("Invalid credentials")}};return d.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4 font-sans",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-sm border border-slate-200",children:[d.jsxs("div",{className:"flex flex-col items-center mb-6",children:[d.jsx("img",{src:"/AdmireLED/logo.png",alt:"Logo",className:"h-12 mb-4"}),d.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"Staff Portal"}),d.jsx("p",{className:"text-slate-500 text-xs",children:"Please log in to continue"})]}),d.jsxs("form",{onSubmit:a,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Username"}),d.jsxs("div",{className:"relative",children:[d.jsx(uC,{className:"absolute left-3 top-2.5 text-slate-400",size:16}),d.jsx("input",{type:"text",className:"w-full pl-10 p-2 text-sm border rounded focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"Enter username",value:s.username,onChange:l=>e({...s,username:l.target.value})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(V2,{className:"absolute left-3 top-2.5 text-slate-400",size:16}),d.jsx("input",{type:"password",className:"w-full pl-10 p-2 text-sm border rounded focus:ring-2 focus:ring-teal-500 outline-none",placeholder:"Enter password",value:s.password,onChange:l=>e({...s,password:l.target.value})})]})]}),t&&d.jsx("div",{className:"text-red-500 text-xs text-center font-bold bg-red-50 p-2 rounded",children:t}),d.jsx("button",{type:"submit",className:"w-full bg-teal-600 text-white py-2 rounded-lg font-bold hover:bg-teal-700 transition shadow-sm text-sm",children:"Login"})]})]})})},K3=()=>{const[s,e]=nt.useState(null),[t,r]=nt.useState(null),[a,l]=nt.useState("quote"),[u,m]=nt.useState(!0),[g,y]=nt.useState(!1),[x,_]=nt.useState([]),[E,D]=nt.useState([]),[L,R]=nt.useState(!1),[B,z]=nt.useState(Mt.DEFAULTS.EXCHANGE_RATE),ne={client:"",project:"",unit:"m",screens:[{id:Ry(),screenQty:0,targetWidth:0,targetHeight:0,selectedIndoor:"true",assemblyMode:"assembled",sizingMode:"closest",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedSMPSId:"",selectedProcId:"",readyId:"",extraComponents:[],overrides:{},extras:[],commercials:{processor:{val:0,unit:"screen",cost:0,costType:"abs"},installation:{val:0,unit:"sqft",cost:0,costType:"abs"},structure:{val:0,unit:"sqft",cost:0,costType:"abs"}}}],activeScreenIndex:0,selectedIndoor:"true",assemblyMode:"assembled",margin:0,targetSellPrice:0,pricingMode:"margin",commercials:{processor:{val:0,unit:"screen"},installation:{val:0,unit:"sqft"},structure:{val:0,unit:"sqft"}},terms:{price:Mt.DEFAULTS.PRICE_BASIS,deliveryWeeks:Mt.DEFAULTS.DELIVERY_WEEKS,payment:Mt.DEFAULTS.PAYMENT_TERMS,validity:Mt.TEXT.VALIDITY,warranty:Mt.TEXT.WARRANTY,scope:{structure:Mt.TEXT.SCOPE_STRUCTURE,elec:Mt.TEXT.SCOPE_ELEC,net:Mt.TEXT.SCOPE_NET,soft:Mt.TEXT.SCOPE_SOFT,perm:Mt.TEXT.SCOPE_PERM,pc:Mt.TEXT.SCOPE_PC}},extraComponents:[],extras:[],overrides:{},editingRow:null},[Z,Se]=nt.useState(ne);nt.useEffect(()=>{const _e=Ny.onAuthStateChanged(async be=>{if(be){const U=be.email?be.email.split("@")[0].toLowerCase():"user";let oe="labour";try{const fe=await Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("user_roles").doc(be.uid).get();fe.exists?oe=fe.data().role:U==="admin"&&(oe="super_admin")}catch{}r(oe),e({...be,username:U,role:oe})}else e(null),r(null);m(!1)});return()=>_e()},[]),nt.useEffect(()=>{if(!s||!Dt)return;const _e=Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("inventory").onSnapshot(U=>_(U.docs.map(oe=>({id:oe.id,...oe.data()})))),be=Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("transactions").onSnapshot(U=>D(U.docs.map(oe=>({id:oe.id,...oe.data()}))));return()=>{_e(),be()}},[s]),nt.useEffect(()=>{document.documentElement.classList.toggle("dark",L)},[L]),nt.useEffect(()=>{t==="labour"&&a==="quote"&&l("saved")},[t,a]);const se=()=>{Ny.signOut(),l("quote"),e(null),r(null),y(!1)},pe=async _e=>{if(!Z.client||!Z.project)return alert("Please enter Client and Project names.");let be=null;if(Z.screens&&Z.screens.length>0){const U=Z.screens.map(oe=>{const fe={...Z,...oe};return Eo(fe,x,E,B)}).filter(oe=>oe!==null);U.length>0&&(be={totalProjectCost:U.reduce((oe,fe)=>oe+fe.totalProjectCost,0),totalProjectSell:U.reduce((oe,fe)=>oe+fe.totalProjectSell,0),totalLEDSell:U.reduce((oe,fe)=>oe+fe.matrix.led.sell*fe.screenQty,0),totalServicesSell:U.reduce((oe,fe)=>oe+(fe.matrix.sell.total-fe.matrix.led.sell*fe.screenQty),0),totalMargin:0,totalScreenQty:U.reduce((oe,fe)=>oe+Number(fe.screenQty),0),calculations:U,screenConfigs:Z.screens},be.totalMargin=be.totalProjectSell-be.totalProjectCost)}try{await Dt.collection("artifacts").doc(cn).collection("public").doc("data").collection("quotes").add({client:Z.client,project:Z.project,calculatorState:Z,finalAmount:_e||0,screenCount:Z.screens.length,totalScreenQty:be?.totalScreenQty||0,allScreensData:be,createdBy:s.email,updatedAt:new Date}),alert("Quote Saved Successfully!")}catch{alert("Error saving quote.")}},S=(_e,be)=>{const U={...ne,..._e.calculatorState};U.terms={...ne.terms,..._e.calculatorState.terms||{},scope:{...ne.terms.scope,..._e.calculatorState.terms?.scope||{}}},be&&(U.client=U.client+" (Copy)",U.project=U.project+" (Copy)"),Se(U),l("quote"),y(!1)};if(u)return d.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"})});if(!s)return d.jsx($3,{});const N=t||"labour",k=N==="super_admin",V=["labour","supervisor"].includes(N),T=["labour"].includes(N),P=["labour","supervisor"].includes(N),C=N==="labour";return d.jsxs("div",{className:`min-h-screen transition-colors duration-200 ${L?"bg-slate-900 text-slate-100":"bg-slate-50 text-slate-900"}`,children:[d.jsx("header",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50 shadow-sm",children:d.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 h-16 flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center gap-3",children:d.jsx("img",{src:"/AdmireLED/logo.png",alt:"Logo",className:"h-10 w-auto"})}),d.jsxs("nav",{className:"hidden md:flex items-center gap-1 bg-slate-100 dark:bg-slate-700/50 p-1 rounded-lg",children:[!C&&d.jsx("button",{onClick:()=>l("quote"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${a==="quote"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Calculator"}),d.jsx("button",{onClick:()=>l("inventory"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${a==="inventory"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Components"}),d.jsx("button",{onClick:()=>l("ledger"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${a==="ledger"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Stock"}),d.jsx("button",{onClick:()=>l("saved"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${a==="saved"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Quotes"}),k&&d.jsx("button",{onClick:()=>l("admin"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${a==="admin"?"bg-white dark:bg-slate-600 shadow-sm text-purple-600 dark:text-purple-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Admin"})]}),d.jsxs("div",{className:"flex items-center gap-2 pl-4 border-l border-slate-200 dark:border-slate-700",children:[N!=="labour"&&d.jsxs("div",{className:"hidden md:flex items-center gap-1 bg-slate-100 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-md px-2 py-1 mr-2",children:[d.jsx("span",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400",children:"USD:"}),d.jsx("input",{type:"number",value:B,onChange:_e=>z(Number(_e.target.value)),className:"w-12 text-xs font-bold text-teal-600 dark:text-teal-400 bg-transparent outline-none text-right"})]}),d.jsxs("div",{className:"text-right mr-2 hidden lg:block",children:[d.jsx("div",{className:"text-[10px] font-bold text-teal-600 dark:text-teal-400 uppercase",children:N.replace("_"," ")}),d.jsx("div",{className:"text-[10px] text-slate-400",children:s.username})]}),d.jsx("button",{onClick:se,className:"hidden md:block p-2 bg-slate-100 dark:bg-slate-700 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-500 dark:text-slate-400 hover:text-red-500 rounded-lg transition-colors",children:d.jsx(Kw,{size:18})}),d.jsx("button",{onClick:()=>R(!L),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400 transition-colors",children:L?d.jsx(rC,{size:18}):d.jsx(q2,{size:18})}),d.jsx("button",{onClick:()=>y(!g),className:"md:hidden p-2 text-slate-600 dark:text-slate-300",children:g?d.jsx(ec,{size:24}):d.jsx(L2,{size:24})})]})]})}),g&&d.jsx("div",{className:"md:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 shadow-xl absolute w-full z-50 animate-in slide-in-from-top-2",children:d.jsxs("div",{className:"flex flex-col p-2 space-y-1",children:[!C&&d.jsxs("button",{onClick:()=>{l("quote"),y(!1)},className:`p-3 rounded-lg text-sm font-bold text-left flex items-center gap-3 ${a==="quote"?"bg-teal-50 text-teal-700 dark:bg-slate-700 dark:text-teal-400":"text-slate-600 dark:text-slate-400"}`,children:[d.jsx(w2,{size:18})," Calculator"]}),d.jsxs("button",{onClick:()=>{l("inventory"),y(!1)},className:`p-3 rounded-lg text-sm font-bold text-left flex items-center gap-3 ${a==="inventory"?"bg-teal-50 text-teal-700 dark:bg-slate-700 dark:text-teal-400":"text-slate-600 dark:text-slate-400"}`,children:[d.jsx(_d,{size:18})," Components"]}),d.jsxs("button",{onClick:()=>{l("ledger"),y(!1)},className:`p-3 rounded-lg text-sm font-bold text-left flex items-center gap-3 ${a==="ledger"?"bg-teal-50 text-teal-700 dark:bg-slate-700 dark:text-teal-400":"text-slate-600 dark:text-slate-400"}`,children:[d.jsx(oI,{size:18})," Stock Ledger"]}),d.jsxs("button",{onClick:()=>{l("saved"),y(!1)},className:`p-3 rounded-lg text-sm font-bold text-left flex items-center gap-3 ${a==="saved"?"bg-teal-50 text-teal-700 dark:bg-slate-700 dark:text-teal-400":"text-slate-600 dark:text-slate-400"}`,children:[d.jsx(sm,{size:18})," Quotes"]}),k&&d.jsxs("button",{onClick:()=>{l("admin"),y(!1)},className:`p-3 rounded-lg text-sm font-bold text-left flex items-center gap-3 ${a==="admin"?"bg-purple-50 text-purple-700 dark:bg-slate-700 dark:text-purple-400":"text-slate-600 dark:text-slate-400"}`,children:[d.jsx(uI,{size:18})," Admin"]}),N!=="labour"&&d.jsxs("div",{className:"p-3 rounded-lg text-sm font-bold flex items-center justify-between text-slate-600 dark:text-slate-400",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(S2,{size:18})," USD Rate"]}),d.jsx("input",{type:"number",value:B,onChange:_e=>z(Number(_e.target.value)),className:"w-20 p-1 text-right border rounded bg-white dark:bg-slate-800 dark:border-slate-600 dark:text-white"})]}),d.jsx("div",{className:"border-t border-slate-100 dark:border-slate-700 my-2 pt-2",children:d.jsxs("button",{onClick:se,className:"w-full p-3 rounded-lg text-sm font-bold text-left flex items-center gap-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:[d.jsx(Kw,{size:18})," Logout"]})})]})}),d.jsxs("main",{className:"max-w-[1600px] mx-auto p-4 md:p-6",children:[a==="inventory"&&d.jsx(O3,{user:s,userRole:t,transactions:E,readOnly:V,exchangeRate:B}),a==="ledger"&&d.jsx(L3,{user:s,userRole:t,inventory:x,transactions:E,readOnly:T}),a==="saved"&&d.jsx(B3,{user:s,userRole:t,inventory:x,transactions:E,exchangeRate:B,onLoadQuote:S,readOnly:P}),a==="admin"&&k&&d.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[d.jsx(G3,{user:s}),d.jsx(Q3,{})]}),a==="quote"&&d.jsx(H3,{user:s,userRole:t,inventory:x,transactions:E,state:Z,setState:Se,exchangeRate:B,setExchangeRate:z,onSaveQuote:pe,readOnly:P})]})]})};f2.createRoot(document.getElementById("root")).render(d.jsx(Bt.StrictMode,{children:d.jsx(K3,{})}));

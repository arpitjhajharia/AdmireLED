(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function S0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var uy={exports:{}},Vu={};var DE;function $R(){if(DE)return Vu;DE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var m in a)m!=="key"&&(l[m]=a[m])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:u,ref:a!==void 0?a:null,props:l}}return Vu.Fragment=e,Vu.jsx=t,Vu.jsxs=t,Vu}var PE;function YR(){return PE||(PE=1,uy.exports=$R()),uy.exports}var p=YR(),dy={exports:{}},Le={};var VE;function WR(){if(VE)return Le;VE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),w=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=w&&V[w]||V["@@iterator"],typeof V=="function"?V:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,te={};function R(V,X,pe){this.props=V,this.context=X,this.refs=te,this.updater=pe||q}R.prototype.isReactComponent={},R.prototype.setState=function(V,X){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,X,"setState")},R.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Z(){}Z.prototype=R.prototype;function ae(V,X,pe){this.props=V,this.context=X,this.refs=te,this.updater=pe||q}var fe=ae.prototype=new Z;fe.constructor=ae,Y(fe,R.prototype),fe.isPureReactComponent=!0;var se=Array.isArray;function he(){}var A={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function k(V,X,pe){var _e=pe.ref;return{$$typeof:s,type:V,key:X,ref:_e!==void 0?_e:null,props:pe}}function O(V,X){return k(V.type,X,V.props)}function P(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function M(V){var X={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(pe){return X[pe]})}var C=/\/+/g;function Ue(V,X){return typeof V=="object"&&V!==null&&V.key!=null?M(""+V.key):X.toString(36)}function Ve(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(he,he):(V.status="pending",V.then(function(X){V.status==="pending"&&(V.status="fulfilled",V.value=X)},function(X){V.status==="pending"&&(V.status="rejected",V.reason=X)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function W(V,X,pe,_e,Te){var J=typeof V;(J==="undefined"||J==="boolean")&&(V=null);var re=!1;if(V===null)re=!0;else switch(J){case"bigint":case"string":case"number":re=!0;break;case"object":switch(V.$$typeof){case s:case e:re=!0;break;case b:return re=V._init,W(re(V._payload),X,pe,_e,Te)}}if(re)return Te=Te(V),re=_e===""?"."+Ue(V,0):_e,se(Te)?(pe="",re!=null&&(pe=re.replace(C,"$&/")+"/"),W(Te,X,pe,"",function(Oe){return Oe})):Te!=null&&(P(Te)&&(Te=O(Te,pe+(Te.key==null||V&&V.key===Te.key?"":(""+Te.key).replace(C,"$&/")+"/")+re)),X.push(Te)),1;re=0;var me=_e===""?".":_e+":";if(se(V))for(var we=0;we<V.length;we++)_e=V[we],J=me+Ue(_e,we),re+=W(_e,X,pe,J,Te);else if(we=S(V),typeof we=="function")for(V=we.call(V),we=0;!(_e=V.next()).done;)_e=_e.value,J=me+Ue(_e,we++),re+=W(_e,X,pe,J,Te);else if(J==="object"){if(typeof V.then=="function")return W(Ve(V),X,pe,_e,Te);throw X=String(V),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return re}function ue(V,X,pe){if(V==null)return V;var _e=[],Te=0;return W(V,_e,"","",function(J){return X.call(pe,J,Te++)}),_e}function Ee(V){if(V._status===-1){var X=V._result;X=X(),X.then(function(pe){(V._status===0||V._status===-1)&&(V._status=1,V._result=pe)},function(pe){(V._status===0||V._status===-1)&&(V._status=2,V._result=pe)}),V._status===-1&&(V._status=0,V._result=X)}if(V._status===1)return V._result.default;throw V._result}var Me=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},qe={map:ue,forEach:function(V,X,pe){ue(V,function(){X.apply(this,arguments)},pe)},count:function(V){var X=0;return ue(V,function(){X++}),X},toArray:function(V){return ue(V,function(X){return X})||[]},only:function(V){if(!P(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Le.Activity=E,Le.Children=qe,Le.Component=R,Le.Fragment=t,Le.Profiler=a,Le.PureComponent=ae,Le.StrictMode=r,Le.Suspense=h,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Le.__COMPILER_RUNTIME={__proto__:null,c:function(V){return A.H.useMemoCache(V)}},Le.cache=function(V){return function(){return V.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(V,X,pe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var _e=Y({},V.props),Te=V.key;if(X!=null)for(J in X.key!==void 0&&(Te=""+X.key),X)!N.call(X,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&X.ref===void 0||(_e[J]=X[J]);var J=arguments.length-2;if(J===1)_e.children=pe;else if(1<J){for(var re=Array(J),me=0;me<J;me++)re[me]=arguments[me+2];_e.children=re}return k(V.type,Te,_e)},Le.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Le.createElement=function(V,X,pe){var _e,Te={},J=null;if(X!=null)for(_e in X.key!==void 0&&(J=""+X.key),X)N.call(X,_e)&&_e!=="key"&&_e!=="__self"&&_e!=="__source"&&(Te[_e]=X[_e]);var re=arguments.length-2;if(re===1)Te.children=pe;else if(1<re){for(var me=Array(re),we=0;we<re;we++)me[we]=arguments[we+2];Te.children=me}if(V&&V.defaultProps)for(_e in re=V.defaultProps,re)Te[_e]===void 0&&(Te[_e]=re[_e]);return k(V,J,Te)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(V){return{$$typeof:m,render:V}},Le.isValidElement=P,Le.lazy=function(V){return{$$typeof:b,_payload:{_status:-1,_result:V},_init:Ee}},Le.memo=function(V,X){return{$$typeof:y,type:V,compare:X===void 0?null:X}},Le.startTransition=function(V){var X=A.T,pe={};A.T=pe;try{var _e=V(),Te=A.S;Te!==null&&Te(pe,_e),typeof _e=="object"&&_e!==null&&typeof _e.then=="function"&&_e.then(he,Me)}catch(J){Me(J)}finally{X!==null&&pe.types!==null&&(X.types=pe.types),A.T=X}},Le.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Le.use=function(V){return A.H.use(V)},Le.useActionState=function(V,X,pe){return A.H.useActionState(V,X,pe)},Le.useCallback=function(V,X){return A.H.useCallback(V,X)},Le.useContext=function(V){return A.H.useContext(V)},Le.useDebugValue=function(){},Le.useDeferredValue=function(V,X){return A.H.useDeferredValue(V,X)},Le.useEffect=function(V,X){return A.H.useEffect(V,X)},Le.useEffectEvent=function(V){return A.H.useEffectEvent(V)},Le.useId=function(){return A.H.useId()},Le.useImperativeHandle=function(V,X,pe){return A.H.useImperativeHandle(V,X,pe)},Le.useInsertionEffect=function(V,X){return A.H.useInsertionEffect(V,X)},Le.useLayoutEffect=function(V,X){return A.H.useLayoutEffect(V,X)},Le.useMemo=function(V,X){return A.H.useMemo(V,X)},Le.useOptimistic=function(V,X){return A.H.useOptimistic(V,X)},Le.useReducer=function(V,X,pe){return A.H.useReducer(V,X,pe)},Le.useRef=function(V){return A.H.useRef(V)},Le.useState=function(V){return A.H.useState(V)},Le.useSyncExternalStore=function(V,X,pe){return A.H.useSyncExternalStore(V,X,pe)},Le.useTransition=function(){return A.H.useTransition()},Le.version="19.2.3",Le}var OE;function A0(){return OE||(OE=1,dy.exports=WR()),dy.exports}var Vn=A0();const Ut=S0(Vn);var hy={exports:{}},Ou={},fy={exports:{}},my={};var jE;function XR(){return jE||(jE=1,(function(s){function e(W,ue){var Ee=W.length;W.push(ue);e:for(;0<Ee;){var Me=Ee-1>>>1,qe=W[Me];if(0<a(qe,ue))W[Me]=ue,W[Ee]=qe,Ee=Me;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var ue=W[0],Ee=W.pop();if(Ee!==ue){W[0]=Ee;e:for(var Me=0,qe=W.length,V=qe>>>1;Me<V;){var X=2*(Me+1)-1,pe=W[X],_e=X+1,Te=W[_e];if(0>a(pe,Ee))_e<qe&&0>a(Te,pe)?(W[Me]=Te,W[_e]=Ee,Me=_e):(W[Me]=pe,W[X]=Ee,Me=X);else if(_e<qe&&0>a(Te,Ee))W[Me]=Te,W[_e]=Ee,Me=_e;else break e}}return ue}function a(W,ue){var Ee=W.sortIndex-ue.sortIndex;return Ee!==0?Ee:W.id-ue.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var u=Date,m=u.now();s.unstable_now=function(){return u.now()-m}}var h=[],y=[],b=1,E=null,w=3,S=!1,q=!1,Y=!1,te=!1,R=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function fe(W){for(var ue=t(y);ue!==null;){if(ue.callback===null)r(y);else if(ue.startTime<=W)r(y),ue.sortIndex=ue.expirationTime,e(h,ue);else break;ue=t(y)}}function se(W){if(Y=!1,fe(W),!q)if(t(h)!==null)q=!0,he||(he=!0,M());else{var ue=t(y);ue!==null&&Ve(se,ue.startTime-W)}}var he=!1,A=-1,N=5,k=-1;function O(){return te?!0:!(s.unstable_now()-k<N)}function P(){if(te=!1,he){var W=s.unstable_now();k=W;var ue=!0;try{e:{q=!1,Y&&(Y=!1,Z(A),A=-1),S=!0;var Ee=w;try{t:{for(fe(W),E=t(h);E!==null&&!(E.expirationTime>W&&O());){var Me=E.callback;if(typeof Me=="function"){E.callback=null,w=E.priorityLevel;var qe=Me(E.expirationTime<=W);if(W=s.unstable_now(),typeof qe=="function"){E.callback=qe,fe(W),ue=!0;break t}E===t(h)&&r(h),fe(W)}else r(h);E=t(h)}if(E!==null)ue=!0;else{var V=t(y);V!==null&&Ve(se,V.startTime-W),ue=!1}}break e}finally{E=null,w=Ee,S=!1}ue=void 0}}finally{ue?M():he=!1}}}var M;if(typeof ae=="function")M=function(){ae(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ue=C.port2;C.port1.onmessage=P,M=function(){Ue.postMessage(null)}}else M=function(){R(P,0)};function Ve(W,ue){A=R(function(){W(s.unstable_now())},ue)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(W){W.callback=null},s.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(W){switch(w){case 1:case 2:case 3:var ue=3;break;default:ue=w}var Ee=w;w=ue;try{return W()}finally{w=Ee}},s.unstable_requestPaint=function(){te=!0},s.unstable_runWithPriority=function(W,ue){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Ee=w;w=W;try{return ue()}finally{w=Ee}},s.unstable_scheduleCallback=function(W,ue,Ee){var Me=s.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Me+Ee:Me):Ee=Me,W){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=Ee+qe,W={id:b++,callback:ue,priorityLevel:W,startTime:Ee,expirationTime:qe,sortIndex:-1},Ee>Me?(W.sortIndex=Ee,e(y,W),t(h)===null&&W===t(y)&&(Y?(Z(A),A=-1):Y=!0,Ve(se,Ee-Me))):(W.sortIndex=qe,e(h,W),q||S||(q=!0,he||(he=!0,M()))),W},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(W){var ue=w;return function(){var Ee=w;w=ue;try{return W.apply(this,arguments)}finally{w=Ee}}}})(my)),my}var ME;function JR(){return ME||(ME=1,fy.exports=XR()),fy.exports}var py={exports:{}},Dn={};var LE;function ZR(){if(LE)return Dn;LE=1;var s=A0();function e(h){var y="https://react.dev/errors/"+h;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(h,y,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:h,containerInfo:y,implementation:b}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(h,y){if(h==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Dn.createPortal=function(h,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(h,y,null,b)},Dn.flushSync=function(h){var y=u.T,b=r.p;try{if(u.T=null,r.p=2,h)return h()}finally{u.T=y,r.p=b,r.d.f()}},Dn.preconnect=function(h,y){typeof h=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(h,y))},Dn.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Dn.preinit=function(h,y){if(typeof h=="string"&&y&&typeof y.as=="string"){var b=y.as,E=m(b,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,S=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(h,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:S}):b==="script"&&r.d.X(h,{crossOrigin:E,integrity:w,fetchPriority:S,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Dn.preinitModule=function(h,y){if(typeof h=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=m(y.as,y.crossOrigin);r.d.M(h,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(h)},Dn.preload=function(h,y){if(typeof h=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,E=m(b,y.crossOrigin);r.d.L(h,b,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Dn.preloadModule=function(h,y){if(typeof h=="string")if(y){var b=m(y.as,y.crossOrigin);r.d.m(h,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(h)},Dn.requestFormReset=function(h){r.d.r(h)},Dn.unstable_batchedUpdates=function(h,y){return h(y)},Dn.useFormState=function(h,y,b){return u.H.useFormState(h,y,b)},Dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Dn.version="19.2.3",Dn}var UE;function Zw(){if(UE)return py.exports;UE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),py.exports=ZR(),py.exports}var zE;function eC(){if(zE)return Ou;zE=1;var s=JR(),e=A0(),t=Zw();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function h(n){if(l(n)!==n)throw Error(r(188))}function y(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,c=i;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return h(f),n;if(g===c)return h(f),i;g=g.sibling}throw Error(r(188))}if(o.return!==c.return)o=f,c=g;else{for(var v=!1,T=f.child;T;){if(T===o){v=!0,o=f,c=g;break}if(T===c){v=!0,c=f,o=g;break}T=T.sibling}if(!v){for(T=g.child;T;){if(T===o){v=!0,o=g,c=f;break}if(T===c){v=!0,c=g,o=f;break}T=T.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function b(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=b(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function M(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Ue(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Y:return"Fragment";case R:return"Profiler";case te:return"StrictMode";case se:return"Suspense";case he:return"SuspenseList";case k:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case q:return"Portal";case ae:return n.displayName||"Context";case Z:return(n._context.displayName||"Context")+".Consumer";case fe:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A:return i=n.displayName||null,i!==null?i:Ue(n.type)||"Memo";case N:i=n._payload,n=n._init;try{return Ue(n(i))}catch{}}return null}var Ve=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Me=[],qe=-1;function V(n){return{current:n}}function X(n){0>qe||(n.current=Me[qe],Me[qe]=null,qe--)}function pe(n,i){qe++,Me[qe]=n.current,n.current=i}var _e=V(null),Te=V(null),J=V(null),re=V(null);function me(n,i){switch(pe(J,i),pe(Te,n),pe(_e,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?tE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=tE(i),n=nE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}X(_e),pe(_e,n)}function we(){X(_e),X(Te),X(J)}function Oe(n){n.memoizedState!==null&&pe(re,n);var i=_e.current,o=nE(i,n.type);i!==o&&(pe(Te,n),pe(_e,o))}function ze(n){Te.current===n&&(X(_e),X(Te)),re.current===n&&(X(re),Cu._currentValue=Ee)}var Cn,or;function Wt(n){if(Cn===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Cn=i&&i[1]||"",or=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cn+n+or}var $n=!1;function kn(n,i){if(!n||$n)return"";$n=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch($){var G=$}Reflect.construct(n,[],ie)}else{try{ie.call()}catch($){G=$}n.call(ie.prototype)}}else{try{throw Error()}catch($){G=$}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch($){if($&&G&&typeof $.stack=="string")return[$.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),v=g[0],T=g[1];if(v&&T){var D=v.split(`
`),F=T.split(`
`);for(f=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(c===D.length||f===F.length)for(c=D.length-1,f=F.length-1;1<=c&&0<=f&&D[c]!==F[f];)f--;for(;1<=c&&0<=f;c--,f--)if(D[c]!==F[f]){if(c!==1||f!==1)do if(c--,f--,0>f||D[c]!==F[f]){var ee=`
`+D[c].replace(" at new "," at ");return n.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",n.displayName)),ee}while(1<=c&&0<=f);break}}}finally{$n=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Wt(o):""}function Yn(n,i){switch(n.tag){case 26:case 27:case 5:return Wt(n.type);case 16:return Wt("Lazy");case 13:return n.child!==i&&i!==null?Wt("Suspense Fallback"):Wt("Suspense");case 19:return Wt("SuspenseList");case 0:case 15:return kn(n.type,!1);case 11:return kn(n.type.render,!1);case 1:return kn(n.type,!0);case 31:return Wt("Activity");default:return""}}function vn(n){try{var i="",o=null;do i+=Yn(n,o),o=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var lt=Object.prototype.hasOwnProperty,vt=s.unstable_scheduleCallback,Un=s.unstable_cancelCallback,H=s.unstable_shouldYield,Re=s.unstable_requestPaint,Qe=s.unstable_now,le=s.unstable_getCurrentPriorityLevel,Xt=s.unstable_ImmediatePriority,Nt=s.unstable_UserBlockingPriority,zn=s.unstable_NormalPriority,vi=s.unstable_LowPriority,Vc=s.unstable_IdlePriority,Mr=s.log,bi=s.unstable_setDisableYieldValue,xe=null,Pe=null;function Et(n){if(typeof Mr=="function"&&bi(n),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(xe,n)}catch{}}var bt=Math.clz32?Math.clz32:ch,lh=Math.log,Ho=Math.LN2;function ch(n){return n>>>=0,n===0?32:31-(lh(n)/Ho|0)|0}var rs=256,Ca=262144,Jt=4194304;function ss(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function is(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,g=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var T=c&134217727;return T!==0?(c=T&~g,c!==0?f=ss(c):(v&=T,v!==0?f=ss(v):o||(o=T&~n,o!==0&&(f=ss(o))))):(T=c&~g,T!==0?f=ss(T):v!==0?f=ss(v):o||(o=c&~n,o!==0&&(f=ss(o)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:f}function Lr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function mp(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uh(){var n=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),n}function as(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function ka(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function pp(n,i,o,c,f,g){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,D=n.expirationTimes,F=n.hiddenUpdates;for(o=v&~o;0<o;){var ee=31-bt(o),ie=1<<ee;T[ee]=0,D[ee]=-1;var G=F[ee];if(G!==null)for(F[ee]=null,ee=0;ee<G.length;ee++){var $=G[ee];$!==null&&($.lane&=-536870913)}o&=~ie}c!==0&&Da(n,c,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(v&~i))}function Da(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-bt(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Oc(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-bt(o),f=1<<c;f&i|n[c]&i&&(n[c]|=i),o&=~f}}function jc(n,i){var o=i&-i;return o=(o&42)!==0?1:Pa(o),(o&(n.suspendedLanes|i))!==0?0:o}function Pa(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function zs(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function dh(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:IE(n.type))}function Ur(n,i){var o=ue.p;try{return ue.p=n,i()}finally{ue.p=o}}var zr=Math.random().toString(36).slice(2),Zt="__reactFiber$"+zr,fn="__reactProps$"+zr,os="__reactContainer$"+zr,Go="__reactEvents$"+zr,gp="__reactListeners$"+zr,hh="__reactHandles$"+zr,fh="__reactResources$"+zr,ls="__reactMarker$"+zr;function Qo(n){delete n[Zt],delete n[fn],delete n[Go],delete n[gp],delete n[hh]}function cs(n){var i=n[Zt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[os]||o[Zt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=cE(n);n!==null;){if(o=n[Zt])return o;n=cE(n)}return i}n=o,o=n.parentNode}return null}function Er(n){if(n=n[Zt]||n[os]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function lr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function us(n){var i=n[fh];return i||(i=n[fh]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function en(n){n[ls]=!0}var Mc=new Set,Lc={};function ds(n,i){hs(n,i),hs(n+"Capture",i)}function hs(n,i){for(Lc[n]=i,n=0;n<i.length;n++)Mc.add(i[n])}var Uc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zc={},qc={};function mh(n){return lt.call(qc,n)?!0:lt.call(zc,n)?!1:Uc.test(n)?qc[n]=!0:(zc[n]=!0,!1)}function Ko(n,i,o){if(mh(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function cr(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function tn(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}function mn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function xi(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Bc(n,i,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,g=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,g.call(this,v)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ut(n){if(!n._valueTracker){var i=xi(n)?"checked":"value";n._valueTracker=Bc(n,i,""+n[i])}}function Va(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=xi(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function fs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Oa=/[\n"\\]/g;function Wn(n){return n.replace(Oa,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function $o(n,i,o,c,f,g,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+mn(i)):n.value!==""+mn(i)&&(n.value=""+mn(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?Fc(n,v,mn(i)):o!=null?Fc(n,v,mn(o)):c!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+mn(T):n.removeAttribute("name")}function ph(n,i,o,c,f,g,v,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){ut(n);return}o=o!=null?""+mn(o):"",i=i!=null?""+mn(i):o,T||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=T?n.checked:!!c,n.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),ut(n)}function Fc(n,i,o){i==="number"&&fs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ei(n,i,o,c){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+mn(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function gh(n,i,o){if(i!=null&&(i=""+mn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+mn(o):""}function Ti(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(r(92));if(Ve(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=mn(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),ut(n)}function Xn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var yh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hc(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||yh.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Gc(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&o[f]!==c&&Hc(n,f,c)}else for(var g in i)i.hasOwnProperty(g)&&Hc(n,g,i[g])}function Yo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _h=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wo(n){return wi.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function qr(){}var Qc=null;function Tr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ii=null,ms=null;function ja(n){var i=Er(n);if(i&&(n=i.stateNode)){var o=n[fn]||null;e:switch(n=i.stateNode,i.type){case"input":if($o(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Wn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var f=c[fn]||null;if(!f)throw Error(r(90));$o(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&Va(c)}break e;case"textarea":gh(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ei(n,!!o.multiple,i,!1)}}}var Xo=!1;function Si(n,i,o){if(Xo)return n(i,o);Xo=!0;try{var c=n(i);return c}finally{if(Xo=!1,(Ii!==null||ms!==null)&&(hf(),Ii&&(i=Ii,n=ms,ms=Ii=null,ja(i),n)))for(i=0;i<n.length;i++)ja(n[i])}}function Br(n,i){var o=n.stateNode;if(o===null)return null;var c=o[fn]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ma=!1;if(wr)try{var pt={};Object.defineProperty(pt,"passive",{get:function(){Ma=!0}}),window.addEventListener("test",pt,pt),window.removeEventListener("test",pt,pt)}catch{Ma=!1}var ps=null,Kc=null,La=null;function $c(){if(La)return La;var n,i=Kc,o=i.length,c,f="value"in ps?ps.value:ps.textContent,g=f.length;for(n=0;n<o&&i[n]===f[n];n++);var v=o-n;for(c=1;c<=v&&i[o-c]===f[g-c];c++);return La=f.slice(n,1<c?1-c:void 0)}function Ua(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function qs(){return!0}function Fr(){return!1}function bn(n){function i(o,c,f,g,v){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?qs:Fr,this.isPropagationStopped=Fr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),i}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gs=bn(Bs),Ai=E({},Bs,{view:0,detail:0}),Yc=bn(Ai),Ni,Jo,ys,Zo=E({},Ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ri,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ys&&(ys&&n.type==="mousemove"?(Ni=n.screenX-ys.screenX,Jo=n.screenY-ys.screenY):Jo=Ni=0,ys=n),Ni)},movementY:function(n){return"movementY"in n?n.movementY:Jo}}),Wc=bn(Zo),za=E({},Zo,{dataTransfer:0}),vh=bn(za),bh=E({},Ai,{relatedTarget:0}),qa=bn(bh),Xc=E({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),xh=bn(Xc),el=E({},Bs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Eh=bn(el),Th=E({},Bs,{data:0}),_s=bn(Th),wh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ih={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ah(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Sh[n])?!!i[n]:!1}function Ri(){return Ah}var qn=E({},Ai,{key:function(n){if(n.key){var i=wh[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ua(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ih[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ri,charCode:function(n){return n.type==="keypress"?Ua(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ua(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Nh=bn(qn),Rh=E({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fs=bn(Rh),d=E({},Ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ri}),_=bn(d),x=E({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=bn(x),z=E({},Zo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),K=bn(z),ge=E({},Bs,{newState:0,oldState:0}),Be=bn(ge),Ft=[9,13,27,32],at=wr&&"CompositionEvent"in window,Rt=null;wr&&"documentMode"in document&&(Rt=document.documentMode);var Ir=wr&&"TextEvent"in window&&!Rt,vs=wr&&(!at||Rt&&8<Rt&&11>=Rt),Hr=" ",Gr=!1;function Ba(n,i){switch(n){case"keyup":return Ft.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var nl=!1;function _N(n,i){switch(n){case"compositionend":return tl(i);case"keypress":return i.which!==32?null:(Gr=!0,Hr);case"textInput":return n=i.data,n===Hr&&Gr?null:n;default:return null}}function vN(n,i){if(nl)return n==="compositionend"||!at&&Ba(n,i)?(n=$c(),La=Kc=ps=null,nl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vs&&i.locale!=="ko"?null:i.data;default:return null}}var bN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hv(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!bN[n.type]:i==="textarea"}function fv(n,i,o,c){Ii?ms?ms.push(c):ms=[c]:Ii=c,i=vf(i,"onChange"),0<i.length&&(o=new gs("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var Jc=null,Zc=null;function xN(n){Yx(n,0)}function Ch(n){var i=lr(n);if(Va(i))return n}function mv(n,i){if(n==="change")return i}var pv=!1;if(wr){var yp;if(wr){var _p="oninput"in document;if(!_p){var gv=document.createElement("div");gv.setAttribute("oninput","return;"),_p=typeof gv.oninput=="function"}yp=_p}else yp=!1;pv=yp&&(!document.documentMode||9<document.documentMode)}function yv(){Jc&&(Jc.detachEvent("onpropertychange",_v),Zc=Jc=null)}function _v(n){if(n.propertyName==="value"&&Ch(Zc)){var i=[];fv(i,Zc,n,Tr(n)),Si(xN,i)}}function EN(n,i,o){n==="focusin"?(yv(),Jc=i,Zc=o,Jc.attachEvent("onpropertychange",_v)):n==="focusout"&&yv()}function TN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ch(Zc)}function wN(n,i){if(n==="click")return Ch(i)}function IN(n,i){if(n==="input"||n==="change")return Ch(i)}function SN(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var ur=typeof Object.is=="function"?Object.is:SN;function eu(n,i){if(ur(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!lt.call(i,f)||!ur(n[f],i[f]))return!1}return!0}function vv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function bv(n,i){var o=vv(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=vv(o)}}function xv(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?xv(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Ev(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=fs(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=fs(n.document)}return i}function vp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var AN=wr&&"documentMode"in document&&11>=document.documentMode,rl=null,bp=null,tu=null,xp=!1;function Tv(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xp||rl==null||rl!==fs(c)||(c=rl,"selectionStart"in c&&vp(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),tu&&eu(tu,c)||(tu=c,c=vf(bp,"onSelect"),0<c.length&&(i=new gs("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=rl)))}function Fa(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var sl={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},Ep={},wv={};wr&&(wv=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function Ha(n){if(Ep[n])return Ep[n];if(!sl[n])return n;var i=sl[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in wv)return Ep[n]=i[o];return n}var Iv=Ha("animationend"),Sv=Ha("animationiteration"),Av=Ha("animationstart"),NN=Ha("transitionrun"),RN=Ha("transitionstart"),CN=Ha("transitioncancel"),Nv=Ha("transitionend"),Rv=new Map,Tp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tp.push("scrollEnd");function Qr(n,i){Rv.set(n,i),ds(i,[n])}var kh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Sr=[],il=0,wp=0;function Dh(){for(var n=il,i=wp=il=0;i<n;){var o=Sr[i];Sr[i++]=null;var c=Sr[i];Sr[i++]=null;var f=Sr[i];Sr[i++]=null;var g=Sr[i];if(Sr[i++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}g!==0&&Cv(o,f,g)}}function Ph(n,i,o,c){Sr[il++]=n,Sr[il++]=i,Sr[il++]=o,Sr[il++]=c,wp|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Ip(n,i,o,c){return Ph(n,i,o,c),Vh(n)}function Ga(n,i){return Ph(n,null,null,i),Vh(n)}function Cv(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&i!==null&&(f=31-bt(o),n=g.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=o|536870912),g):null}function Vh(n){if(50<Tu)throw Tu=0,Vg=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var al={};function kN(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(n,i,o,c){return new kN(n,i,o,c)}function Sp(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Hs(n,i){var o=n.alternate;return o===null?(o=dr(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function kv(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Oh(n,i,o,c,f,g){var v=0;if(c=n,typeof n=="function")Sp(n)&&(v=1);else if(typeof n=="string")v=jR(n,o,_e.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case k:return n=dr(31,o,i,f),n.elementType=k,n.lanes=g,n;case Y:return Qa(o.children,f,g,i);case te:v=8,f|=24;break;case R:return n=dr(12,o,i,f|2),n.elementType=R,n.lanes=g,n;case se:return n=dr(13,o,i,f),n.elementType=se,n.lanes=g,n;case he:return n=dr(19,o,i,f),n.elementType=he,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ae:v=10;break e;case Z:v=9;break e;case fe:v=11;break e;case A:v=14;break e;case N:v=16,c=null;break e}v=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return i=dr(v,o,i,f),i.elementType=n,i.type=c,i.lanes=g,i}function Qa(n,i,o,c){return n=dr(7,n,c,i),n.lanes=o,n}function Ap(n,i,o){return n=dr(6,n,null,i),n.lanes=o,n}function Dv(n){var i=dr(18,null,null,0);return i.stateNode=n,i}function Np(n,i,o){return i=dr(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Pv=new WeakMap;function Ar(n,i){if(typeof n=="object"&&n!==null){var o=Pv.get(n);return o!==void 0?o:(i={value:n,source:i,stack:vn(i)},Pv.set(n,i),i)}return{value:n,source:i,stack:vn(i)}}var ol=[],ll=0,jh=null,nu=0,Nr=[],Rr=0,Ci=null,bs=1,xs="";function Gs(n,i){ol[ll++]=nu,ol[ll++]=jh,jh=n,nu=i}function Vv(n,i,o){Nr[Rr++]=bs,Nr[Rr++]=xs,Nr[Rr++]=Ci,Ci=n;var c=bs;n=xs;var f=32-bt(c)-1;c&=~(1<<f),o+=1;var g=32-bt(i)+f;if(30<g){var v=f-f%5;g=(c&(1<<v)-1).toString(32),c>>=v,f-=v,bs=1<<32-bt(i)+f|o<<f|c,xs=g+n}else bs=1<<g|o<<f|c,xs=n}function Rp(n){n.return!==null&&(Gs(n,1),Vv(n,1,0))}function Cp(n){for(;n===jh;)jh=ol[--ll],ol[ll]=null,nu=ol[--ll],ol[ll]=null;for(;n===Ci;)Ci=Nr[--Rr],Nr[Rr]=null,xs=Nr[--Rr],Nr[Rr]=null,bs=Nr[--Rr],Nr[Rr]=null}function Ov(n,i){Nr[Rr++]=bs,Nr[Rr++]=xs,Nr[Rr++]=Ci,bs=i.id,xs=i.overflow,Ci=n}var xn=null,It=null,tt=!1,ki=null,Cr=!1,kp=Error(r(519));function Di(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ru(Ar(i,n)),kp}function jv(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[Zt]=n,i[fn]=c,o){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(o=0;o<Iu.length;o++)Ye(Iu[o],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":Ye("invalid",i),ph(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ye("invalid",i);break;case"textarea":Ye("invalid",i),Ti(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||Zx(i.textContent,o)?(c.popover!=null&&(Ye("beforetoggle",i),Ye("toggle",i)),c.onScroll!=null&&Ye("scroll",i),c.onScrollEnd!=null&&Ye("scrollend",i),c.onClick!=null&&(i.onclick=qr),i=!0):i=!1,i||Di(n,!0)}function Mv(n){for(xn=n.return;xn;)switch(xn.tag){case 5:case 31:case 13:Cr=!1;return;case 27:case 3:Cr=!0;return;default:xn=xn.return}}function cl(n){if(n!==xn)return!1;if(!tt)return Mv(n),tt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Yg(n.type,n.memoizedProps)),o=!o),o&&It&&Di(n),Mv(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));It=lE(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));It=lE(n)}else i===27?(i=It,Qi(n.type)?(n=ey,ey=null,It=n):It=i):It=xn?Dr(n.stateNode.nextSibling):null;return!0}function Ka(){It=xn=null,tt=!1}function Dp(){var n=ki;return n!==null&&(tr===null?tr=n:tr.push.apply(tr,n),ki=null),n}function ru(n){ki===null?ki=[n]:ki.push(n)}var Pp=V(null),$a=null,Qs=null;function Pi(n,i,o){pe(Pp,i._currentValue),i._currentValue=o}function Ks(n){n._currentValue=Pp.current,X(Pp)}function Vp(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function Op(n,i,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var v=f.child;g=g.firstContext;e:for(;g!==null;){var T=g;g=f;for(var D=0;D<i.length;D++)if(T.context===i[D]){g.lanes|=o,T=g.alternate,T!==null&&(T.lanes|=o),Vp(g.return,o,n),c||(v=null);break e}g=T.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=o,g=v.alternate,g!==null&&(g.lanes|=o),Vp(v,o,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function ul(n,i,o,c){n=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=f.type;ur(f.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(f===re.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Cu):n=[Cu])}f=f.return}n!==null&&Op(i,n,o,c),i.flags|=262144}function Mh(n){for(n=n.firstContext;n!==null;){if(!ur(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ya(n){$a=n,Qs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function En(n){return Lv($a,n)}function Lh(n,i){return $a===null&&Ya(n),Lv(n,i)}function Lv(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Qs===null){if(n===null)throw Error(r(308));Qs=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Qs=Qs.next=i;return o}var DN=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},PN=s.unstable_scheduleCallback,VN=s.unstable_NormalPriority,nn={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jp(){return{controller:new DN,data:new Map,refCount:0}}function su(n){n.refCount--,n.refCount===0&&PN(VN,function(){n.controller.abort()})}var iu=null,Mp=0,dl=0,hl=null;function ON(n,i){if(iu===null){var o=iu=[];Mp=0,dl=zg(),hl={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Mp++,i.then(Uv,Uv),i}function Uv(){if(--Mp===0&&iu!==null){hl!==null&&(hl.status="fulfilled");var n=iu;iu=null,dl=0,hl=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function jN(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var zv=W.S;W.S=function(n,i){Tx=Qe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&ON(n,i),zv!==null&&zv(n,i)};var Wa=V(null);function Lp(){var n=Wa.current;return n!==null?n:xt.pooledCache}function Uh(n,i){i===null?pe(Wa,Wa.current):pe(Wa,i.pool)}function qv(){var n=Lp();return n===null?null:{parent:nn._currentValue,pool:n}}var fl=Error(r(460)),Up=Error(r(474)),zh=Error(r(542)),qh={then:function(){}};function Bv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Fv(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(qr,qr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Gv(n),n;default:if(typeof i.status=="string")i.then(qr,qr);else{if(n=xt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Gv(n),n}throw Ja=i,fl}}function Xa(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ja=o,fl):o}}var Ja=null;function Hv(){if(Ja===null)throw Error(r(459));var n=Ja;return Ja=null,n}function Gv(n){if(n===fl||n===zh)throw Error(r(483))}var ml=null,au=0;function Bh(n){var i=au;return au+=1,ml===null&&(ml=[]),Fv(ml,n,i)}function ou(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Fh(n,i){throw i.$$typeof===w?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Qv(n){function i(L,j){if(n){var B=L.deletions;B===null?(L.deletions=[j],L.flags|=16):B.push(j)}}function o(L,j){if(!n)return null;for(;j!==null;)i(L,j),j=j.sibling;return null}function c(L){for(var j=new Map;L!==null;)L.key!==null?j.set(L.key,L):j.set(L.index,L),L=L.sibling;return j}function f(L,j){return L=Hs(L,j),L.index=0,L.sibling=null,L}function g(L,j,B){return L.index=B,n?(B=L.alternate,B!==null?(B=B.index,B<j?(L.flags|=67108866,j):B):(L.flags|=67108866,j)):(L.flags|=1048576,j)}function v(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function T(L,j,B,ne){return j===null||j.tag!==6?(j=Ap(B,L.mode,ne),j.return=L,j):(j=f(j,B),j.return=L,j)}function D(L,j,B,ne){var Ce=B.type;return Ce===Y?ee(L,j,B.props.children,ne,B.key):j!==null&&(j.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&Xa(Ce)===j.type)?(j=f(j,B.props),ou(j,B),j.return=L,j):(j=Oh(B.type,B.key,B.props,null,L.mode,ne),ou(j,B),j.return=L,j)}function F(L,j,B,ne){return j===null||j.tag!==4||j.stateNode.containerInfo!==B.containerInfo||j.stateNode.implementation!==B.implementation?(j=Np(B,L.mode,ne),j.return=L,j):(j=f(j,B.children||[]),j.return=L,j)}function ee(L,j,B,ne,Ce){return j===null||j.tag!==7?(j=Qa(B,L.mode,ne,Ce),j.return=L,j):(j=f(j,B),j.return=L,j)}function ie(L,j,B){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Ap(""+j,L.mode,B),j.return=L,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case S:return B=Oh(j.type,j.key,j.props,null,L.mode,B),ou(B,j),B.return=L,B;case q:return j=Np(j,L.mode,B),j.return=L,j;case N:return j=Xa(j),ie(L,j,B)}if(Ve(j)||M(j))return j=Qa(j,L.mode,B,null),j.return=L,j;if(typeof j.then=="function")return ie(L,Bh(j),B);if(j.$$typeof===ae)return ie(L,Lh(L,j),B);Fh(L,j)}return null}function G(L,j,B,ne){var Ce=j!==null?j.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Ce!==null?null:T(L,j,""+B,ne);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case S:return B.key===Ce?D(L,j,B,ne):null;case q:return B.key===Ce?F(L,j,B,ne):null;case N:return B=Xa(B),G(L,j,B,ne)}if(Ve(B)||M(B))return Ce!==null?null:ee(L,j,B,ne,null);if(typeof B.then=="function")return G(L,j,Bh(B),ne);if(B.$$typeof===ae)return G(L,j,Lh(L,B),ne);Fh(L,B)}return null}function $(L,j,B,ne,Ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return L=L.get(B)||null,T(j,L,""+ne,Ce);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case S:return L=L.get(ne.key===null?B:ne.key)||null,D(j,L,ne,Ce);case q:return L=L.get(ne.key===null?B:ne.key)||null,F(j,L,ne,Ce);case N:return ne=Xa(ne),$(L,j,B,ne,Ce)}if(Ve(ne)||M(ne))return L=L.get(B)||null,ee(j,L,ne,Ce,null);if(typeof ne.then=="function")return $(L,j,B,Bh(ne),Ce);if(ne.$$typeof===ae)return $(L,j,B,Lh(j,ne),Ce);Fh(j,ne)}return null}function Ie(L,j,B,ne){for(var Ce=null,rt=null,Ae=j,Ke=j=0,Ze=null;Ae!==null&&Ke<B.length;Ke++){Ae.index>Ke?(Ze=Ae,Ae=null):Ze=Ae.sibling;var st=G(L,Ae,B[Ke],ne);if(st===null){Ae===null&&(Ae=Ze);break}n&&Ae&&st.alternate===null&&i(L,Ae),j=g(st,j,Ke),rt===null?Ce=st:rt.sibling=st,rt=st,Ae=Ze}if(Ke===B.length)return o(L,Ae),tt&&Gs(L,Ke),Ce;if(Ae===null){for(;Ke<B.length;Ke++)Ae=ie(L,B[Ke],ne),Ae!==null&&(j=g(Ae,j,Ke),rt===null?Ce=Ae:rt.sibling=Ae,rt=Ae);return tt&&Gs(L,Ke),Ce}for(Ae=c(Ae);Ke<B.length;Ke++)Ze=$(Ae,L,Ke,B[Ke],ne),Ze!==null&&(n&&Ze.alternate!==null&&Ae.delete(Ze.key===null?Ke:Ze.key),j=g(Ze,j,Ke),rt===null?Ce=Ze:rt.sibling=Ze,rt=Ze);return n&&Ae.forEach(function(Xi){return i(L,Xi)}),tt&&Gs(L,Ke),Ce}function De(L,j,B,ne){if(B==null)throw Error(r(151));for(var Ce=null,rt=null,Ae=j,Ke=j=0,Ze=null,st=B.next();Ae!==null&&!st.done;Ke++,st=B.next()){Ae.index>Ke?(Ze=Ae,Ae=null):Ze=Ae.sibling;var Xi=G(L,Ae,st.value,ne);if(Xi===null){Ae===null&&(Ae=Ze);break}n&&Ae&&Xi.alternate===null&&i(L,Ae),j=g(Xi,j,Ke),rt===null?Ce=Xi:rt.sibling=Xi,rt=Xi,Ae=Ze}if(st.done)return o(L,Ae),tt&&Gs(L,Ke),Ce;if(Ae===null){for(;!st.done;Ke++,st=B.next())st=ie(L,st.value,ne),st!==null&&(j=g(st,j,Ke),rt===null?Ce=st:rt.sibling=st,rt=st);return tt&&Gs(L,Ke),Ce}for(Ae=c(Ae);!st.done;Ke++,st=B.next())st=$(Ae,L,Ke,st.value,ne),st!==null&&(n&&st.alternate!==null&&Ae.delete(st.key===null?Ke:st.key),j=g(st,j,Ke),rt===null?Ce=st:rt.sibling=st,rt=st);return n&&Ae.forEach(function(KR){return i(L,KR)}),tt&&Gs(L,Ke),Ce}function _t(L,j,B,ne){if(typeof B=="object"&&B!==null&&B.type===Y&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case S:e:{for(var Ce=B.key;j!==null;){if(j.key===Ce){if(Ce=B.type,Ce===Y){if(j.tag===7){o(L,j.sibling),ne=f(j,B.props.children),ne.return=L,L=ne;break e}}else if(j.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&Xa(Ce)===j.type){o(L,j.sibling),ne=f(j,B.props),ou(ne,B),ne.return=L,L=ne;break e}o(L,j);break}else i(L,j);j=j.sibling}B.type===Y?(ne=Qa(B.props.children,L.mode,ne,B.key),ne.return=L,L=ne):(ne=Oh(B.type,B.key,B.props,null,L.mode,ne),ou(ne,B),ne.return=L,L=ne)}return v(L);case q:e:{for(Ce=B.key;j!==null;){if(j.key===Ce)if(j.tag===4&&j.stateNode.containerInfo===B.containerInfo&&j.stateNode.implementation===B.implementation){o(L,j.sibling),ne=f(j,B.children||[]),ne.return=L,L=ne;break e}else{o(L,j);break}else i(L,j);j=j.sibling}ne=Np(B,L.mode,ne),ne.return=L,L=ne}return v(L);case N:return B=Xa(B),_t(L,j,B,ne)}if(Ve(B))return Ie(L,j,B,ne);if(M(B)){if(Ce=M(B),typeof Ce!="function")throw Error(r(150));return B=Ce.call(B),De(L,j,B,ne)}if(typeof B.then=="function")return _t(L,j,Bh(B),ne);if(B.$$typeof===ae)return _t(L,j,Lh(L,B),ne);Fh(L,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,j!==null&&j.tag===6?(o(L,j.sibling),ne=f(j,B),ne.return=L,L=ne):(o(L,j),ne=Ap(B,L.mode,ne),ne.return=L,L=ne),v(L)):o(L,j)}return function(L,j,B,ne){try{au=0;var Ce=_t(L,j,B,ne);return ml=null,Ce}catch(Ae){if(Ae===fl||Ae===zh)throw Ae;var rt=dr(29,Ae,null,L.mode);return rt.lanes=ne,rt.return=L,rt}}}var Za=Qv(!0),Kv=Qv(!1),Vi=!1;function zp(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Oi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ji(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ot&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Vh(n),Cv(n,null,o),i}return Ph(n,c,i,o),Vh(n)}function lu(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Oc(n,o)}}function Bp(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=v:g=g.next=v,o=o.next}while(o!==null);g===null?f=g=i:g=g.next=i}else f=g=i;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Fp=!1;function cu(){if(Fp){var n=hl;if(n!==null)throw n}}function uu(n,i,o,c){Fp=!1;var f=n.updateQueue;Vi=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var D=T,F=D.next;D.next=null,v===null?g=F:v.next=F,v=D;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,T=ee.lastBaseUpdate,T!==v&&(T===null?ee.firstBaseUpdate=F:T.next=F,ee.lastBaseUpdate=D))}if(g!==null){var ie=f.baseState;v=0,ee=F=D=null,T=g;do{var G=T.lane&-536870913,$=G!==T.lane;if($?(Je&G)===G:(c&G)===G){G!==0&&G===dl&&(Fp=!0),ee!==null&&(ee=ee.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ie=n,De=T;G=i;var _t=o;switch(De.tag){case 1:if(Ie=De.payload,typeof Ie=="function"){ie=Ie.call(_t,ie,G);break e}ie=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=De.payload,G=typeof Ie=="function"?Ie.call(_t,ie,G):Ie,G==null)break e;ie=E({},ie,G);break e;case 2:Vi=!0}}G=T.callback,G!==null&&(n.flags|=64,$&&(n.flags|=8192),$=f.callbacks,$===null?f.callbacks=[G]:$.push(G))}else $={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ee===null?(F=ee=$,D=ie):ee=ee.next=$,v|=G;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;$=T,T=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);ee===null&&(D=ie),f.baseState=D,f.firstBaseUpdate=F,f.lastBaseUpdate=ee,g===null&&(f.shared.lanes=0),qi|=v,n.lanes=v,n.memoizedState=ie}}function $v(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Yv(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)$v(o[n],i)}var pl=V(null),Hh=V(0);function Wv(n,i){n=ni,pe(Hh,n),pe(pl,i),ni=n|i.baseLanes}function Hp(){pe(Hh,ni),pe(pl,pl.current)}function Gp(){ni=Hh.current,X(pl),X(Hh)}var hr=V(null),kr=null;function Mi(n){var i=n.alternate;pe(Ht,Ht.current&1),pe(hr,n),kr===null&&(i===null||pl.current!==null||i.memoizedState!==null)&&(kr=n)}function Qp(n){pe(Ht,Ht.current),pe(hr,n),kr===null&&(kr=n)}function Xv(n){n.tag===22?(pe(Ht,Ht.current),pe(hr,n),kr===null&&(kr=n)):Li()}function Li(){pe(Ht,Ht.current),pe(hr,hr.current)}function fr(n){X(hr),kr===n&&(kr=null),X(Ht)}var Ht=V(0);function Gh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Jg(o)||Zg(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var $s=0,Fe=null,gt=null,rn=null,Qh=!1,gl=!1,eo=!1,Kh=0,du=0,yl=null,MN=0;function Mt(){throw Error(r(321))}function Kp(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!ur(n[o],i[o]))return!1;return!0}function $p(n,i,o,c,f,g){return $s=g,Fe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,W.H=n===null||n.memoizedState===null?Vb:cg,eo=!1,g=o(c,f),eo=!1,gl&&(g=Zv(i,o,c,f)),Jv(n),g}function Jv(n){W.H=mu;var i=gt!==null&&gt.next!==null;if($s=0,rn=gt=Fe=null,Qh=!1,du=0,yl=null,i)throw Error(r(300));n===null||sn||(n=n.dependencies,n!==null&&Mh(n)&&(sn=!0))}function Zv(n,i,o,c){Fe=n;var f=0;do{if(gl&&(yl=null),du=0,gl=!1,25<=f)throw Error(r(301));if(f+=1,rn=gt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}W.H=Ob,g=i(o,c)}while(gl);return g}function LN(){var n=W.H,i=n.useState()[0];return i=typeof i.then=="function"?hu(i):i,n=n.useState()[0],(gt!==null?gt.memoizedState:null)!==n&&(Fe.flags|=1024),i}function Yp(){var n=Kh!==0;return Kh=0,n}function Wp(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Xp(n){if(Qh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Qh=!1}$s=0,rn=gt=Fe=null,gl=!1,du=Kh=0,yl=null}function Bn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Fe.memoizedState=rn=n:rn=rn.next=n,rn}function Gt(){if(gt===null){var n=Fe.alternate;n=n!==null?n.memoizedState:null}else n=gt.next;var i=rn===null?Fe.memoizedState:rn.next;if(i!==null)rn=i,gt=n;else{if(n===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));gt=n,n={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},rn===null?Fe.memoizedState=rn=n:rn=rn.next=n}return rn}function $h(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hu(n){var i=du;return du+=1,yl===null&&(yl=[]),n=Fv(yl,n,i),i=Fe,(rn===null?i.memoizedState:rn.next)===null&&(i=i.alternate,W.H=i===null||i.memoizedState===null?Vb:cg),n}function Yh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return hu(n);if(n.$$typeof===ae)return En(n)}throw Error(r(438,String(n)))}function Jp(n){var i=null,o=Fe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=Fe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=$h(),Fe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=O;return i.index++,o}function Ys(n,i){return typeof i=="function"?i(n):i}function Wh(n){var i=Gt();return Zp(i,gt,n)}function Zp(n,i,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var f=n.baseQueue,g=c.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}i.baseQueue=f=g,c.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{i=f.next;var T=v=null,D=null,F=i,ee=!1;do{var ie=F.lane&-536870913;if(ie!==F.lane?(Je&ie)===ie:($s&ie)===ie){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ie===dl&&(ee=!0);else if(($s&G)===G){F=F.next,G===dl&&(ee=!0);continue}else ie={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=ie,v=g):D=D.next=ie,Fe.lanes|=G,qi|=G;ie=F.action,eo&&o(g,ie),g=F.hasEagerState?F.eagerState:o(g,ie)}else G={lane:ie,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=G,v=g):D=D.next=G,Fe.lanes|=ie,qi|=ie;F=F.next}while(F!==null&&F!==i);if(D===null?v=g:D.next=T,!ur(g,n.memoizedState)&&(sn=!0,ee&&(o=hl,o!==null)))throw o;n.memoizedState=g,n.baseState=v,n.baseQueue=D,c.lastRenderedState=g}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function eg(n){var i=Gt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,g=i.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);ur(g,i.memoizedState)||(sn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,c]}function eb(n,i,o){var c=Fe,f=Gt(),g=tt;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var v=!ur((gt||f).memoizedState,o);if(v&&(f.memoizedState=o,sn=!0),f=f.queue,rg(rb.bind(null,c,f,n),[n]),f.getSnapshot!==i||v||rn!==null&&rn.memoizedState.tag&1){if(c.flags|=2048,_l(9,{destroy:void 0},nb.bind(null,c,f,o,i),null),xt===null)throw Error(r(349));g||($s&127)!==0||tb(c,i,o)}return o}function tb(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Fe.updateQueue,i===null?(i=$h(),Fe.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function nb(n,i,o,c){i.value=o,i.getSnapshot=c,sb(i)&&ib(n)}function rb(n,i,o){return o(function(){sb(i)&&ib(n)})}function sb(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!ur(n,o)}catch{return!0}}function ib(n){var i=Ga(n,2);i!==null&&nr(i,n,2)}function tg(n){var i=Bn();if(typeof n=="function"){var o=n;if(n=o(),eo){Et(!0);try{o()}finally{Et(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:n},i}function ab(n,i,o,c){return n.baseState=o,Zp(n,gt,typeof c=="function"?c:Ys)}function UN(n,i,o,c,f){if(Zh(n))throw Error(r(485));if(n=i.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){g.listeners.push(v)}};W.T!==null?o(!0):g.isTransition=!1,c(g),o=i.pending,o===null?(g.next=i.pending=g,ob(i,g)):(g.next=o.next,i.pending=o.next=g)}}function ob(n,i){var o=i.action,c=i.payload,f=n.state;if(i.isTransition){var g=W.T,v={};W.T=v;try{var T=o(f,c),D=W.S;D!==null&&D(v,T),lb(n,i,T)}catch(F){ng(n,i,F)}finally{g!==null&&v.types!==null&&(g.types=v.types),W.T=g}}else try{g=o(f,c),lb(n,i,g)}catch(F){ng(n,i,F)}}function lb(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){cb(n,i,c)},function(c){return ng(n,i,c)}):cb(n,i,o)}function cb(n,i,o){i.status="fulfilled",i.value=o,ub(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,ob(n,o)))}function ng(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,ub(i),i=i.next;while(i!==c)}n.action=null}function ub(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function db(n,i){return i}function hb(n,i){if(tt){var o=xt.formState;if(o!==null){e:{var c=Fe;if(tt){if(It){t:{for(var f=It,g=Cr;f.nodeType!==8;){if(!g){f=null;break t}if(f=Dr(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){It=Dr(f.nextSibling),c=f.data==="F!";break e}}Di(c)}c=!1}c&&(i=o[0])}}return o=Bn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:db,lastRenderedState:i},o.queue=c,o=kb.bind(null,Fe,c),c.dispatch=o,c=tg(!1),g=lg.bind(null,Fe,!1,c.queue),c=Bn(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,o=UN.bind(null,Fe,f,g,o),f.dispatch=o,c.memoizedState=n,[i,o,!1]}function fb(n){var i=Gt();return mb(i,gt,n)}function mb(n,i,o){if(i=Zp(n,i,db)[0],n=Wh(Ys)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=hu(i)}catch(v){throw v===fl?zh:v}else c=i;i=Gt();var f=i.queue,g=f.dispatch;return o!==i.memoizedState&&(Fe.flags|=2048,_l(9,{destroy:void 0},zN.bind(null,f,o),null)),[c,g,n]}function zN(n,i){n.action=i}function pb(n){var i=Gt(),o=gt;if(o!==null)return mb(i,o,n);Gt(),i=i.memoizedState,o=Gt();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function _l(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=Fe.updateQueue,i===null&&(i=$h(),Fe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function gb(){return Gt().memoizedState}function Xh(n,i,o,c){var f=Bn();Fe.flags|=n,f.memoizedState=_l(1|i,{destroy:void 0},o,c===void 0?null:c)}function Jh(n,i,o,c){var f=Gt();c=c===void 0?null:c;var g=f.memoizedState.inst;gt!==null&&c!==null&&Kp(c,gt.memoizedState.deps)?f.memoizedState=_l(i,g,o,c):(Fe.flags|=n,f.memoizedState=_l(1|i,g,o,c))}function yb(n,i){Xh(8390656,8,n,i)}function rg(n,i){Jh(2048,8,n,i)}function qN(n){Fe.flags|=4;var i=Fe.updateQueue;if(i===null)i=$h(),Fe.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function _b(n){var i=Gt().memoizedState;return qN({ref:i,nextImpl:n}),function(){if((ot&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function vb(n,i){return Jh(4,2,n,i)}function bb(n,i){return Jh(4,4,n,i)}function xb(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Eb(n,i,o){o=o!=null?o.concat([n]):null,Jh(4,4,xb.bind(null,i,n),o)}function sg(){}function Tb(n,i){var o=Gt();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Kp(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function wb(n,i){var o=Gt();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Kp(i,c[1]))return c[0];if(c=n(),eo){Et(!0);try{n()}finally{Et(!1)}}return o.memoizedState=[c,i],c}function ig(n,i,o){return o===void 0||($s&1073741824)!==0&&(Je&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=Ix(),Fe.lanes|=n,qi|=n,o)}function Ib(n,i,o,c){return ur(o,i)?o:pl.current!==null?(n=ig(n,o,c),ur(n,i)||(sn=!0),n):($s&42)===0||($s&1073741824)!==0&&(Je&261930)===0?(sn=!0,n.memoizedState=o):(n=Ix(),Fe.lanes|=n,qi|=n,i)}function Sb(n,i,o,c,f){var g=ue.p;ue.p=g!==0&&8>g?g:8;var v=W.T,T={};W.T=T,lg(n,!1,i,o);try{var D=f(),F=W.S;if(F!==null&&F(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ee=jN(D,c);fu(n,i,ee,gr(n))}else fu(n,i,c,gr(n))}catch(ie){fu(n,i,{then:function(){},status:"rejected",reason:ie},gr())}finally{ue.p=g,v!==null&&T.types!==null&&(v.types=T.types),W.T=v}}function BN(){}function ag(n,i,o,c){if(n.tag!==5)throw Error(r(476));var f=Ab(n).queue;Sb(n,f,i,Ee,o===null?BN:function(){return Nb(n),o(c)})}function Ab(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:Ee},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Nb(n){var i=Ab(n);i.next===null&&(i=n.alternate.memoizedState),fu(n,i.next.queue,{},gr())}function og(){return En(Cu)}function Rb(){return Gt().memoizedState}function Cb(){return Gt().memoizedState}function FN(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=gr();n=Oi(o);var c=ji(i,n,o);c!==null&&(nr(c,i,o),lu(c,i,o)),i={cache:jp()},n.payload=i;return}i=i.return}}function HN(n,i,o){var c=gr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Zh(n)?Db(i,o):(o=Ip(n,i,o,c),o!==null&&(nr(o,n,c),Pb(o,i,c)))}function kb(n,i,o){var c=gr();fu(n,i,o,c)}function fu(n,i,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Zh(n))Db(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var v=i.lastRenderedState,T=g(v,o);if(f.hasEagerState=!0,f.eagerState=T,ur(T,v))return Ph(n,i,f,0),xt===null&&Dh(),!1}catch{}if(o=Ip(n,i,f,c),o!==null)return nr(o,n,c),Pb(o,i,c),!0}return!1}function lg(n,i,o,c){if(c={lane:2,revertLane:zg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Zh(n)){if(i)throw Error(r(479))}else i=Ip(n,o,c,2),i!==null&&nr(i,n,2)}function Zh(n){var i=n.alternate;return n===Fe||i!==null&&i===Fe}function Db(n,i){gl=Qh=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function Pb(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Oc(n,o)}}var mu={readContext:En,use:Yh,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};mu.useEffectEvent=Mt;var Vb={readContext:En,use:Yh,useCallback:function(n,i){return Bn().memoizedState=[n,i===void 0?null:i],n},useContext:En,useEffect:yb,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Xh(4194308,4,xb.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Xh(4194308,4,n,i)},useInsertionEffect:function(n,i){Xh(4,2,n,i)},useMemo:function(n,i){var o=Bn();i=i===void 0?null:i;var c=n();if(eo){Et(!0);try{n()}finally{Et(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=Bn();if(o!==void 0){var f=o(i);if(eo){Et(!0);try{o(i)}finally{Et(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=HN.bind(null,Fe,n),[c.memoizedState,n]},useRef:function(n){var i=Bn();return n={current:n},i.memoizedState=n},useState:function(n){n=tg(n);var i=n.queue,o=kb.bind(null,Fe,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:sg,useDeferredValue:function(n,i){var o=Bn();return ig(o,n,i)},useTransition:function(){var n=tg(!1);return n=Sb.bind(null,Fe,n.queue,!0,!1),Bn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=Fe,f=Bn();if(tt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),xt===null)throw Error(r(349));(Je&127)!==0||tb(c,i,o)}f.memoizedState=o;var g={value:o,getSnapshot:i};return f.queue=g,yb(rb.bind(null,c,g,n),[n]),c.flags|=2048,_l(9,{destroy:void 0},nb.bind(null,c,g,o,i),null),o},useId:function(){var n=Bn(),i=xt.identifierPrefix;if(tt){var o=xs,c=bs;o=(c&~(1<<32-bt(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Kh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=MN++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:og,useFormState:hb,useActionState:hb,useOptimistic:function(n){var i=Bn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=lg.bind(null,Fe,!0,o),o.dispatch=i,[n,i]},useMemoCache:Jp,useCacheRefresh:function(){return Bn().memoizedState=FN.bind(null,Fe)},useEffectEvent:function(n){var i=Bn(),o={impl:n};return i.memoizedState=o,function(){if((ot&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},cg={readContext:En,use:Yh,useCallback:Tb,useContext:En,useEffect:rg,useImperativeHandle:Eb,useInsertionEffect:vb,useLayoutEffect:bb,useMemo:wb,useReducer:Wh,useRef:gb,useState:function(){return Wh(Ys)},useDebugValue:sg,useDeferredValue:function(n,i){var o=Gt();return Ib(o,gt.memoizedState,n,i)},useTransition:function(){var n=Wh(Ys)[0],i=Gt().memoizedState;return[typeof n=="boolean"?n:hu(n),i]},useSyncExternalStore:eb,useId:Rb,useHostTransitionStatus:og,useFormState:fb,useActionState:fb,useOptimistic:function(n,i){var o=Gt();return ab(o,gt,n,i)},useMemoCache:Jp,useCacheRefresh:Cb};cg.useEffectEvent=_b;var Ob={readContext:En,use:Yh,useCallback:Tb,useContext:En,useEffect:rg,useImperativeHandle:Eb,useInsertionEffect:vb,useLayoutEffect:bb,useMemo:wb,useReducer:eg,useRef:gb,useState:function(){return eg(Ys)},useDebugValue:sg,useDeferredValue:function(n,i){var o=Gt();return gt===null?ig(o,n,i):Ib(o,gt.memoizedState,n,i)},useTransition:function(){var n=eg(Ys)[0],i=Gt().memoizedState;return[typeof n=="boolean"?n:hu(n),i]},useSyncExternalStore:eb,useId:Rb,useHostTransitionStatus:og,useFormState:pb,useActionState:pb,useOptimistic:function(n,i){var o=Gt();return gt!==null?ab(o,gt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Jp,useCacheRefresh:Cb};Ob.useEffectEvent=_b;function ug(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:E({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var dg={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=gr(),f=Oi(c);f.payload=i,o!=null&&(f.callback=o),i=ji(n,f,c),i!==null&&(nr(i,n,c),lu(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=gr(),f=Oi(c);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=ji(n,f,c),i!==null&&(nr(i,n,c),lu(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=gr(),c=Oi(o);c.tag=2,i!=null&&(c.callback=i),i=ji(n,c,o),i!==null&&(nr(i,n,o),lu(i,n,o))}};function jb(n,i,o,c,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,v):i.prototype&&i.prototype.isPureReactComponent?!eu(o,c)||!eu(f,g):!0}function Mb(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&dg.enqueueReplaceState(i,i.state,null)}function to(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Lb(n){kh(n)}function Ub(n){console.error(n)}function zb(n){kh(n)}function ef(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function qb(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function hg(n,i,o){return o=Oi(o),o.tag=3,o.payload={element:null},o.callback=function(){ef(n,i)},o}function Bb(n){return n=Oi(n),n.tag=3,n}function Fb(n,i,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;n.payload=function(){return f(g)},n.callback=function(){qb(i,o,c)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){qb(i,o,c),typeof f!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function GN(n,i,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&ul(i,o,f,!0),o=hr.current,o!==null){switch(o.tag){case 31:case 13:return kr===null?ff():o.alternate===null&&Lt===0&&(Lt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===qh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),Mg(n,c,f)),!1;case 22:return o.flags|=65536,c===qh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),Mg(n,c,f)),!1}throw Error(r(435,o.tag))}return Mg(n,c,f),ff(),!1}if(tt)return i=hr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==kp&&(n=Error(r(422),{cause:c}),ru(Ar(n,o)))):(c!==kp&&(i=Error(r(423),{cause:c}),ru(Ar(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Ar(c,o),f=hg(n.stateNode,c,f),Bp(n,f),Lt!==4&&(Lt=2)),!1;var g=Error(r(520),{cause:c});if(g=Ar(g,o),Eu===null?Eu=[g]:Eu.push(g),Lt!==4&&(Lt=2),i===null)return!0;c=Ar(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=hg(o.stateNode,c,n),Bp(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Bi===null||!Bi.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Bb(f),Fb(f,n,o,c),Bp(o,f),!1}o=o.return}while(o!==null);return!1}var fg=Error(r(461)),sn=!1;function Tn(n,i,o,c){i.child=n===null?Kv(i,null,o,c):Za(i,n.child,o,c)}function Hb(n,i,o,c,f){o=o.render;var g=i.ref;if("ref"in c){var v={};for(var T in c)T!=="ref"&&(v[T]=c[T])}else v=c;return Ya(i),c=$p(n,i,o,v,g,f),T=Yp(),n!==null&&!sn?(Wp(n,i,f),Ws(n,i,f)):(tt&&T&&Rp(i),i.flags|=1,Tn(n,i,c,f),i.child)}function Gb(n,i,o,c,f){if(n===null){var g=o.type;return typeof g=="function"&&!Sp(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,Qb(n,i,g,c,f)):(n=Oh(o.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!xg(n,f)){var v=g.memoizedProps;if(o=o.compare,o=o!==null?o:eu,o(v,c)&&n.ref===i.ref)return Ws(n,i,f)}return i.flags|=1,n=Hs(g,c),n.ref=i.ref,n.return=i,i.child=n}function Qb(n,i,o,c,f){if(n!==null){var g=n.memoizedProps;if(eu(g,c)&&n.ref===i.ref)if(sn=!1,i.pendingProps=c=g,xg(n,f))(n.flags&131072)!==0&&(sn=!0);else return i.lanes=n.lanes,Ws(n,i,f)}return mg(n,i,o,c,f)}function Kb(n,i,o,c){var f=c.children,g=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,n!==null){for(c=i.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~g}else c=0,i.child=null;return $b(n,i,g,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Uh(i,g!==null?g.cachePool:null),g!==null?Wv(i,g):Hp(),Xv(i);else return c=i.lanes=536870912,$b(n,i,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(Uh(i,g.cachePool),Wv(i,g),Li(),i.memoizedState=null):(n!==null&&Uh(i,null),Hp(),Li());return Tn(n,i,f,o),i.child}function pu(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function $b(n,i,o,c,f){var g=Lp();return g=g===null?null:{parent:nn._currentValue,pool:g},i.memoizedState={baseLanes:o,cachePool:g},n!==null&&Uh(i,null),Hp(),Xv(i),n!==null&&ul(n,i,c,!0),i.childLanes=f,null}function tf(n,i){return i=rf({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Yb(n,i,o){return Za(i,n.child,null,o),n=tf(i,i.pendingProps),n.flags|=2,fr(i),i.memoizedState=null,n}function QN(n,i,o){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(tt){if(c.mode==="hidden")return n=tf(i,c),i.lanes=536870912,pu(null,n);if(Qp(i),(n=It)?(n=oE(n,Cr),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ci!==null?{id:bs,overflow:xs}:null,retryLane:536870912,hydrationErrors:null},o=Dv(n),o.return=i,i.child=o,xn=i,It=null)):n=null,n===null)throw Di(i);return i.lanes=536870912,null}return tf(i,c)}var g=n.memoizedState;if(g!==null){var v=g.dehydrated;if(Qp(i),f)if(i.flags&256)i.flags&=-257,i=Yb(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(sn||ul(n,i,o,!1),f=(o&n.childLanes)!==0,sn||f){if(c=xt,c!==null&&(v=jc(c,o),v!==0&&v!==g.retryLane))throw g.retryLane=v,Ga(n,v),nr(c,n,v),fg;ff(),i=Yb(n,i,o)}else n=g.treeContext,It=Dr(v.nextSibling),xn=i,tt=!0,ki=null,Cr=!1,n!==null&&Ov(i,n),i=tf(i,c),i.flags|=4096;return i}return n=Hs(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function nf(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function mg(n,i,o,c,f){return Ya(i),o=$p(n,i,o,c,void 0,f),c=Yp(),n!==null&&!sn?(Wp(n,i,f),Ws(n,i,f)):(tt&&c&&Rp(i),i.flags|=1,Tn(n,i,o,f),i.child)}function Wb(n,i,o,c,f,g){return Ya(i),i.updateQueue=null,o=Zv(i,c,o,f),Jv(n),c=Yp(),n!==null&&!sn?(Wp(n,i,g),Ws(n,i,g)):(tt&&c&&Rp(i),i.flags|=1,Tn(n,i,o,g),i.child)}function Xb(n,i,o,c,f){if(Ya(i),i.stateNode===null){var g=al,v=o.contextType;typeof v=="object"&&v!==null&&(g=En(v)),g=new o(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=dg,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},zp(i),v=o.contextType,g.context=typeof v=="object"&&v!==null?En(v):al,g.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(ug(i,o,v,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(v=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),v!==g.state&&dg.enqueueReplaceState(g,g.state,null),uu(i,c,g,f),cu(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){g=i.stateNode;var T=i.memoizedProps,D=to(o,T);g.props=D;var F=g.context,ee=o.contextType;v=al,typeof ee=="object"&&ee!==null&&(v=En(ee));var ie=o.getDerivedStateFromProps;ee=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,ee||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||F!==v)&&Mb(i,g,c,v),Vi=!1;var G=i.memoizedState;g.state=G,uu(i,c,g,f),cu(),F=i.memoizedState,T||G!==F||Vi?(typeof ie=="function"&&(ug(i,o,ie,c),F=i.memoizedState),(D=Vi||jb(i,o,D,c,G,F,v))?(ee||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=F),g.props=c,g.state=F,g.context=v,c=D):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,qp(n,i),v=i.memoizedProps,ee=to(o,v),g.props=ee,ie=i.pendingProps,G=g.context,F=o.contextType,D=al,typeof F=="object"&&F!==null&&(D=En(F)),T=o.getDerivedStateFromProps,(F=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==ie||G!==D)&&Mb(i,g,c,D),Vi=!1,G=i.memoizedState,g.state=G,uu(i,c,g,f),cu();var $=i.memoizedState;v!==ie||G!==$||Vi||n!==null&&n.dependencies!==null&&Mh(n.dependencies)?(typeof T=="function"&&(ug(i,o,T,c),$=i.memoizedState),(ee=Vi||jb(i,o,ee,c,G,$,D)||n!==null&&n.dependencies!==null&&Mh(n.dependencies))?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,$,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,$,D)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=$),g.props=c,g.state=$,g.context=D,c=ee):(typeof g.componentDidUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),c=!1)}return g=c,nf(n,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&c?(i.child=Za(i,n.child,null,f),i.child=Za(i,null,o,f)):Tn(n,i,o,f),i.memoizedState=g.state,n=i.child):n=Ws(n,i,f),n}function Jb(n,i,o,c){return Ka(),i.flags|=256,Tn(n,i,o,c),i.child}var pg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gg(n){return{baseLanes:n,cachePool:qv()}}function yg(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=pr),n}function Zb(n,i,o){var c=i.pendingProps,f=!1,g=(i.flags&128)!==0,v;if((v=g)||(v=n!==null&&n.memoizedState===null?!1:(Ht.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(tt){if(f?Mi(i):Li(),(n=It)?(n=oE(n,Cr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ci!==null?{id:bs,overflow:xs}:null,retryLane:536870912,hydrationErrors:null},o=Dv(n),o.return=i,i.child=o,xn=i,It=null)):n=null,n===null)throw Di(i);return Zg(n)?i.lanes=32:i.lanes=536870912,null}var T=c.children;return c=c.fallback,f?(Li(),f=i.mode,T=rf({mode:"hidden",children:T},f),c=Qa(c,f,o,null),T.return=i,c.return=i,T.sibling=c,i.child=T,c=i.child,c.memoizedState=gg(o),c.childLanes=yg(n,v,o),i.memoizedState=pg,pu(null,c)):(Mi(i),_g(i,T))}var D=n.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(g)i.flags&256?(Mi(i),i.flags&=-257,i=vg(n,i,o)):i.memoizedState!==null?(Li(),i.child=n.child,i.flags|=128,i=null):(Li(),T=c.fallback,f=i.mode,c=rf({mode:"visible",children:c.children},f),T=Qa(T,f,o,null),T.flags|=2,c.return=i,T.return=i,c.sibling=T,i.child=c,Za(i,n.child,null,o),c=i.child,c.memoizedState=gg(o),c.childLanes=yg(n,v,o),i.memoizedState=pg,i=pu(null,c));else if(Mi(i),Zg(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var F=v.dgst;v=F,c=Error(r(419)),c.stack="",c.digest=v,ru({value:c,source:null,stack:null}),i=vg(n,i,o)}else if(sn||ul(n,i,o,!1),v=(o&n.childLanes)!==0,sn||v){if(v=xt,v!==null&&(c=jc(v,o),c!==0&&c!==D.retryLane))throw D.retryLane=c,Ga(n,c),nr(v,n,c),fg;Jg(T)||ff(),i=vg(n,i,o)}else Jg(T)?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,It=Dr(T.nextSibling),xn=i,tt=!0,ki=null,Cr=!1,n!==null&&Ov(i,n),i=_g(i,c.children),i.flags|=4096);return i}return f?(Li(),T=c.fallback,f=i.mode,D=n.child,F=D.sibling,c=Hs(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,F!==null?T=Hs(F,T):(T=Qa(T,f,o,null),T.flags|=2),T.return=i,c.return=i,c.sibling=T,i.child=c,pu(null,c),c=i.child,T=n.child.memoizedState,T===null?T=gg(o):(f=T.cachePool,f!==null?(D=nn._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=qv(),T={baseLanes:T.baseLanes|o,cachePool:f}),c.memoizedState=T,c.childLanes=yg(n,v,o),i.memoizedState=pg,pu(n.child,c)):(Mi(i),o=n.child,n=o.sibling,o=Hs(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=o,i.memoizedState=null,o)}function _g(n,i){return i=rf({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function rf(n,i){return n=dr(22,n,null,i),n.lanes=0,n}function vg(n,i,o){return Za(i,n.child,null,o),n=_g(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function ex(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Vp(n.return,i,o)}function bg(n,i,o,c,f,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:g}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=o,v.tailMode=f,v.treeForkCount=g)}function tx(n,i,o){var c=i.pendingProps,f=c.revealOrder,g=c.tail;c=c.children;var v=Ht.current,T=(v&2)!==0;if(T?(v=v&1|2,i.flags|=128):v&=1,pe(Ht,v),Tn(n,i,c,o),c=tt?nu:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ex(n,o,i);else if(n.tag===19)ex(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Gh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),bg(i,!1,f,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Gh(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}bg(i,!0,o,null,g,c);break;case"together":bg(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Ws(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),qi|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(ul(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=Hs(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Hs(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function xg(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Mh(n)))}function KN(n,i,o){switch(i.tag){case 3:me(i,i.stateNode.containerInfo),Pi(i,nn,n.memoizedState.cache),Ka();break;case 27:case 5:Oe(i);break;case 4:me(i,i.stateNode.containerInfo);break;case 10:Pi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Qp(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Mi(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Zb(n,i,o):(Mi(i),n=Ws(n,i,o),n!==null?n.sibling:null);Mi(i);break;case 19:var f=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(ul(n,i,o,!1),c=(o&i.childLanes)!==0),f){if(c)return tx(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),pe(Ht,Ht.current),c)break;return null;case 22:return i.lanes=0,Kb(n,i,o,i.pendingProps);case 24:Pi(i,nn,n.memoizedState.cache)}return Ws(n,i,o)}function nx(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)sn=!0;else{if(!xg(n,o)&&(i.flags&128)===0)return sn=!1,KN(n,i,o);sn=(n.flags&131072)!==0}else sn=!1,tt&&(i.flags&1048576)!==0&&Vv(i,nu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=Xa(i.elementType),i.type=n,typeof n=="function")Sp(n)?(c=to(n,c),i.tag=1,i=Xb(null,i,n,c,o)):(i.tag=0,i=mg(null,i,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===fe){i.tag=11,i=Hb(null,i,n,c,o);break e}else if(f===A){i.tag=14,i=Gb(null,i,n,c,o);break e}}throw i=Ue(n)||n,Error(r(306,i,""))}}return i;case 0:return mg(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,f=to(c,i.pendingProps),Xb(n,i,c,f,o);case 3:e:{if(me(i,i.stateNode.containerInfo),n===null)throw Error(r(387));c=i.pendingProps;var g=i.memoizedState;f=g.element,qp(n,i),uu(i,c,null,o);var v=i.memoizedState;if(c=v.cache,Pi(i,nn,c),c!==g.cache&&Op(i,[nn],o,!0),cu(),c=v.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Jb(n,i,c,o);break e}else if(c!==f){f=Ar(Error(r(424)),i),ru(f),i=Jb(n,i,c,o);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,It=Dr(n.firstChild),xn=i,tt=!0,ki=null,Cr=!0,o=Kv(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ka(),c===f){i=Ws(n,i,o);break e}Tn(n,i,c,o)}i=i.child}return i;case 26:return nf(n,i),n===null?(o=fE(i.type,null,i.pendingProps,null))?i.memoizedState=o:tt||(o=i.type,n=i.pendingProps,c=bf(J.current).createElement(o),c[Zt]=i,c[fn]=n,wn(c,o,n),en(c),i.stateNode=c):i.memoizedState=fE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Oe(i),n===null&&tt&&(c=i.stateNode=uE(i.type,i.pendingProps,J.current),xn=i,Cr=!0,f=It,Qi(i.type)?(ey=f,It=Dr(c.firstChild)):It=f),Tn(n,i,i.pendingProps.children,o),nf(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&tt&&((f=c=It)&&(c=TR(c,i.type,i.pendingProps,Cr),c!==null?(i.stateNode=c,xn=i,It=Dr(c.firstChild),Cr=!1,f=!0):f=!1),f||Di(i)),Oe(i),f=i.type,g=i.pendingProps,v=n!==null?n.memoizedProps:null,c=g.children,Yg(f,g)?c=null:v!==null&&Yg(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=$p(n,i,LN,null,null,o),Cu._currentValue=f),nf(n,i),Tn(n,i,c,o),i.child;case 6:return n===null&&tt&&((n=o=It)&&(o=wR(o,i.pendingProps,Cr),o!==null?(i.stateNode=o,xn=i,It=null,n=!0):n=!1),n||Di(i)),null;case 13:return Zb(n,i,o);case 4:return me(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Za(i,null,c,o):Tn(n,i,c,o),i.child;case 11:return Hb(n,i,i.type,i.pendingProps,o);case 7:return Tn(n,i,i.pendingProps,o),i.child;case 8:return Tn(n,i,i.pendingProps.children,o),i.child;case 12:return Tn(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Pi(i,i.type,c.value),Tn(n,i,c.children,o),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Ya(i),f=En(f),c=c(f),i.flags|=1,Tn(n,i,c,o),i.child;case 14:return Gb(n,i,i.type,i.pendingProps,o);case 15:return Qb(n,i,i.type,i.pendingProps,o);case 19:return tx(n,i,o);case 31:return QN(n,i,o);case 22:return Kb(n,i,o,i.pendingProps);case 24:return Ya(i),c=En(nn),n===null?(f=Lp(),f===null&&(f=xt,g=jp(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),i.memoizedState={parent:c,cache:f},zp(i),Pi(i,nn,f)):((n.lanes&o)!==0&&(qp(n,i),uu(i,null,null,o),cu()),f=n.memoizedState,g=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Pi(i,nn,c)):(c=g.cache,Pi(i,nn,c),c!==f.cache&&Op(i,[nn],o,!0))),Tn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Xs(n){n.flags|=4}function Eg(n,i,o,c,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Rx())n.flags|=8192;else throw Ja=qh,Up}else n.flags&=-16777217}function rx(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!_E(i))if(Rx())n.flags|=8192;else throw Ja=qh,Up}function sf(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?uh():536870912,n.lanes|=i,El|=i)}function gu(n,i){if(!tt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function St(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function $N(n,i,o){var c=i.pendingProps;switch(Cp(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(i),null;case 1:return St(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Ks(nn),we(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(cl(i)?Xs(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Dp())),St(i),null;case 26:var f=i.type,g=i.memoizedState;return n===null?(Xs(i),g!==null?(St(i),rx(i,g)):(St(i),Eg(i,f,null,c,o))):g?g!==n.memoizedState?(Xs(i),St(i),rx(i,g)):(St(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&Xs(i),St(i),Eg(i,f,n,c,o)),null;case 27:if(ze(i),o=J.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&Xs(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return St(i),null}n=_e.current,cl(i)?jv(i):(n=uE(f,c,o),i.stateNode=n,Xs(i))}return St(i),null;case 5:if(ze(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&Xs(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return St(i),null}if(g=_e.current,cl(i))jv(i);else{var v=bf(J.current);switch(g){case 1:g=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=v.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}g[Zt]=i,g[fn]=c;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)g.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=g;e:switch(wn(g,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Xs(i)}}return St(i),Eg(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&Xs(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(n=J.current,cl(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,f=xn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Zt]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Zx(n.nodeValue,o)),n||Di(i,!0)}else n=bf(n).createTextNode(c),n[Zt]=i,i.stateNode=n}return St(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(c=cl(i),o!==null){if(n===null){if(!c)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Zt]=i}else Ka(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;St(i),n=!1}else o=Dp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(fr(i),i):(fr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return St(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=cl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Zt]=i}else Ka(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;St(i),f=!1}else f=Dp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(fr(i),i):(fr(i),null)}return fr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),sf(i,i.updateQueue),St(i),null);case 4:return we(),n===null&&Hg(i.stateNode.containerInfo),St(i),null;case 10:return Ks(i.type),St(i),null;case 19:if(X(Ht),c=i.memoizedState,c===null)return St(i),null;if(f=(i.flags&128)!==0,g=c.rendering,g===null)if(f)gu(c,!1);else{if(Lt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=Gh(n),g!==null){for(i.flags|=128,gu(c,!1),n=g.updateQueue,i.updateQueue=n,sf(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)kv(o,n),o=o.sibling;return pe(Ht,Ht.current&1|2),tt&&Gs(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&Qe()>uf&&(i.flags|=128,f=!0,gu(c,!1),i.lanes=4194304)}else{if(!f)if(n=Gh(g),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,sf(i,n),gu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!tt)return St(i),null}else 2*Qe()-c.renderingStartTime>uf&&o!==536870912&&(i.flags|=128,f=!0,gu(c,!1),i.lanes=4194304);c.isBackwards?(g.sibling=i.child,i.child=g):(n=c.last,n!==null?n.sibling=g:i.child=g,c.last=g)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Qe(),n.sibling=null,o=Ht.current,pe(Ht,f?o&1|2:o&1),tt&&Gs(i,c.treeForkCount),n):(St(i),null);case 22:case 23:return fr(i),Gp(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(St(i),i.subtreeFlags&6&&(i.flags|=8192)):St(i),o=i.updateQueue,o!==null&&sf(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&X(Wa),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ks(nn),St(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function YN(n,i){switch(Cp(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ks(nn),we(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return ze(i),null;case 31:if(i.memoizedState!==null){if(fr(i),i.alternate===null)throw Error(r(340));Ka()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(fr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ka()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return X(Ht),null;case 4:return we(),null;case 10:return Ks(i.type),null;case 22:case 23:return fr(i),Gp(),n!==null&&X(Wa),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Ks(nn),null;case 25:return null;default:return null}}function sx(n,i){switch(Cp(i),i.tag){case 3:Ks(nn),we();break;case 26:case 27:case 5:ze(i);break;case 4:we();break;case 31:i.memoizedState!==null&&fr(i);break;case 13:fr(i);break;case 19:X(Ht);break;case 10:Ks(i.type);break;case 22:case 23:fr(i),Gp(),n!==null&&X(Wa);break;case 24:Ks(nn)}}function yu(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var g=o.create,v=o.inst;c=g(),v.destroy=c}o=o.next}while(o!==f)}}catch(T){ht(i,i.return,T)}}function Ui(n,i,o){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&n)===n){var v=c.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,f=i;var D=o,F=T;try{F()}catch(ee){ht(f,D,ee)}}}c=c.next}while(c!==g)}}catch(ee){ht(i,i.return,ee)}}function ix(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Yv(i,o)}catch(c){ht(n,n.return,c)}}}function ax(n,i,o){o.props=to(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){ht(n,i,c)}}function _u(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){ht(n,i,f)}}function Es(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){ht(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ht(n,i,f)}else o.current=null}function ox(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){ht(n,n.return,f)}}function Tg(n,i,o){try{var c=n.stateNode;yR(c,n.type,o,i),c[fn]=i}catch(f){ht(n,n.return,f)}}function lx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Qi(n.type)||n.tag===4}function wg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Qi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ig(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=qr));else if(c!==4&&(c===27&&Qi(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Ig(n,i,o),n=n.sibling;n!==null;)Ig(n,i,o),n=n.sibling}function af(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&Qi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(af(n,i,o),n=n.sibling;n!==null;)af(n,i,o),n=n.sibling}function cx(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);wn(i,c,o),i[Zt]=n,i[fn]=o}catch(g){ht(n,n.return,g)}}var Js=!1,an=!1,Sg=!1,ux=typeof WeakSet=="function"?WeakSet:Set,pn=null;function WN(n,i){if(n=n.containerInfo,Kg=Af,n=Ev(n),vp(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var v=0,T=-1,D=-1,F=0,ee=0,ie=n,G=null;t:for(;;){for(var $;ie!==o||f!==0&&ie.nodeType!==3||(T=v+f),ie!==g||c!==0&&ie.nodeType!==3||(D=v+c),ie.nodeType===3&&(v+=ie.nodeValue.length),($=ie.firstChild)!==null;)G=ie,ie=$;for(;;){if(ie===n)break t;if(G===o&&++F===f&&(T=v),G===g&&++ee===c&&(D=v),($=ie.nextSibling)!==null)break;ie=G,G=ie.parentNode}ie=$}o=T===-1||D===-1?null:{start:T,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for($g={focusedElem:n,selectionRange:o},Af=!1,pn=i;pn!==null;)if(i=pn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,pn=n;else for(;pn!==null;){switch(i=pn,g=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,f=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Ie=to(o.type,f);n=c.getSnapshotBeforeUpdate(Ie,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(De){ht(o,o.return,De)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Xg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Xg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,pn=n;break}pn=i.return}}function dx(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:ei(n,o),c&4&&yu(5,o);break;case 1:if(ei(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(v){ht(o,o.return,v)}else{var f=to(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){ht(o,o.return,v)}}c&64&&ix(o),c&512&&_u(o,o.return);break;case 3:if(ei(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Yv(n,i)}catch(v){ht(o,o.return,v)}}break;case 27:i===null&&c&4&&cx(o);case 26:case 5:ei(n,o),i===null&&c&4&&ox(o),c&512&&_u(o,o.return);break;case 12:ei(n,o);break;case 31:ei(n,o),c&4&&mx(n,o);break;case 13:ei(n,o),c&4&&px(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=iR.bind(null,o),IR(n,o))));break;case 22:if(c=o.memoizedState!==null||Js,!c){i=i!==null&&i.memoizedState!==null||an,f=Js;var g=an;Js=c,(an=i)&&!g?ti(n,o,(o.subtreeFlags&8772)!==0):ei(n,o),Js=f,an=g}break;case 30:break;default:ei(n,o)}}function hx(n){var i=n.alternate;i!==null&&(n.alternate=null,hx(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Qo(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ct=null,Jn=!1;function Zs(n,i,o){for(o=o.child;o!==null;)fx(n,i,o),o=o.sibling}function fx(n,i,o){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(xe,o)}catch{}switch(o.tag){case 26:an||Es(o,i),Zs(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:an||Es(o,i);var c=Ct,f=Jn;Qi(o.type)&&(Ct=o.stateNode,Jn=!1),Zs(n,i,o),Au(o.stateNode),Ct=c,Jn=f;break;case 5:an||Es(o,i);case 6:if(c=Ct,f=Jn,Ct=null,Zs(n,i,o),Ct=c,Jn=f,Ct!==null)if(Jn)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(o.stateNode)}catch(g){ht(o,i,g)}else try{Ct.removeChild(o.stateNode)}catch(g){ht(o,i,g)}break;case 18:Ct!==null&&(Jn?(n=Ct,iE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Cl(n)):iE(Ct,o.stateNode));break;case 4:c=Ct,f=Jn,Ct=o.stateNode.containerInfo,Jn=!0,Zs(n,i,o),Ct=c,Jn=f;break;case 0:case 11:case 14:case 15:Ui(2,o,i),an||Ui(4,o,i),Zs(n,i,o);break;case 1:an||(Es(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&ax(o,i,c)),Zs(n,i,o);break;case 21:Zs(n,i,o);break;case 22:an=(c=an)||o.memoizedState!==null,Zs(n,i,o),an=c;break;default:Zs(n,i,o)}}function mx(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Cl(n)}catch(o){ht(i,i.return,o)}}}function px(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Cl(n)}catch(o){ht(i,i.return,o)}}function XN(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new ux),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new ux),i;default:throw Error(r(435,n.tag))}}function of(n,i){var o=XN(n);i.forEach(function(c){if(!o.has(c)){o.add(c);var f=aR.bind(null,n,c);c.then(f,f)}})}function Zn(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],g=n,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Qi(T.type)){Ct=T.stateNode,Jn=!1;break e}break;case 5:Ct=T.stateNode,Jn=!1;break e;case 3:case 4:Ct=T.stateNode.containerInfo,Jn=!0;break e}T=T.return}if(Ct===null)throw Error(r(160));fx(g,v,f),Ct=null,Jn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)gx(i,n),i=i.sibling}var Kr=null;function gx(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Zn(i,n),er(n),c&4&&(Ui(3,n,n.return),yu(3,n),Ui(5,n,n.return));break;case 1:Zn(i,n),er(n),c&512&&(an||o===null||Es(o,o.return)),c&64&&Js&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Kr;if(Zn(i,n),er(n),c&512&&(an||o===null||Es(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[ls]||g[Zt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),wn(g,c,o),g[Zt]=n,en(g),c=g;break e;case"link":var v=gE("link","href",f).get(c+(o.href||""));if(v){for(var T=0;T<v.length;T++)if(g=v[T],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(T,1);break t}}g=f.createElement(c),wn(g,c,o),f.head.appendChild(g);break;case"meta":if(v=gE("meta","content",f).get(c+(o.content||""))){for(T=0;T<v.length;T++)if(g=v[T],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(T,1);break t}}g=f.createElement(c),wn(g,c,o),f.head.appendChild(g);break;default:throw Error(r(468,c))}g[Zt]=n,en(g),c=g}n.stateNode=c}else yE(f,n.type,n.stateNode);else n.stateNode=pE(f,c,n.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?yE(f,n.type,n.stateNode):pE(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Tg(n,n.memoizedProps,o.memoizedProps)}break;case 27:Zn(i,n),er(n),c&512&&(an||o===null||Es(o,o.return)),o!==null&&c&4&&Tg(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Zn(i,n),er(n),c&512&&(an||o===null||Es(o,o.return)),n.flags&32){f=n.stateNode;try{Xn(f,"")}catch(Ie){ht(n,n.return,Ie)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Tg(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Sg=!0);break;case 6:if(Zn(i,n),er(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Ie){ht(n,n.return,Ie)}}break;case 3:if(Tf=null,f=Kr,Kr=xf(i.containerInfo),Zn(i,n),Kr=f,er(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Cl(i.containerInfo)}catch(Ie){ht(n,n.return,Ie)}Sg&&(Sg=!1,yx(n));break;case 4:c=Kr,Kr=xf(n.stateNode.containerInfo),Zn(i,n),er(n),Kr=c;break;case 12:Zn(i,n),er(n);break;case 31:Zn(i,n),er(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,of(n,c)));break;case 13:Zn(i,n),er(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(cf=Qe()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,of(n,c)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,F=Js,ee=an;if(Js=F||f,an=ee||D,Zn(i,n),an=ee,Js=F,er(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||D||Js||an||no(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(g=D.stateNode,f)v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=D.stateNode;var ie=D.memoizedProps.style,G=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Ie){ht(D,D.return,Ie)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(Ie){ht(D,D.return,Ie)}}}else if(i.tag===18){if(o===null){D=i;try{var $=D.stateNode;f?aE($,!0):aE(D.stateNode,!1)}catch(Ie){ht(D,D.return,Ie)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,of(n,o))));break;case 19:Zn(i,n),er(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,of(n,c)));break;case 30:break;case 21:break;default:Zn(i,n),er(n)}}function er(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(lx(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,g=wg(n);af(n,g,f);break;case 5:var v=o.stateNode;o.flags&32&&(Xn(v,""),o.flags&=-33);var T=wg(n);af(n,T,v);break;case 3:case 4:var D=o.stateNode.containerInfo,F=wg(n);Ig(n,F,D);break;default:throw Error(r(161))}}catch(ee){ht(n,n.return,ee)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function yx(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;yx(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ei(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)dx(n,i.alternate,i),i=i.sibling}function no(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ui(4,i,i.return),no(i);break;case 1:Es(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&ax(i,i.return,o),no(i);break;case 27:Au(i.stateNode);case 26:case 5:Es(i,i.return),no(i);break;case 22:i.memoizedState===null&&no(i);break;case 30:no(i);break;default:no(i)}n=n.sibling}}function ti(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,g=i,v=g.flags;switch(g.tag){case 0:case 11:case 15:ti(f,g,o),yu(4,g);break;case 1:if(ti(f,g,o),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){ht(c,c.return,F)}if(c=g,f=c.updateQueue,f!==null){var T=c.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)$v(D[f],T)}catch(F){ht(c,c.return,F)}}o&&v&64&&ix(g),_u(g,g.return);break;case 27:cx(g);case 26:case 5:ti(f,g,o),o&&c===null&&v&4&&ox(g),_u(g,g.return);break;case 12:ti(f,g,o);break;case 31:ti(f,g,o),o&&v&4&&mx(f,g);break;case 13:ti(f,g,o),o&&v&4&&px(f,g);break;case 22:g.memoizedState===null&&ti(f,g,o),_u(g,g.return);break;case 30:break;default:ti(f,g,o)}i=i.sibling}}function Ag(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&su(o))}function Ng(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&su(n))}function $r(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)_x(n,i,o,c),i=i.sibling}function _x(n,i,o,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:$r(n,i,o,c),f&2048&&yu(9,i);break;case 1:$r(n,i,o,c);break;case 3:$r(n,i,o,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&su(n)));break;case 12:if(f&2048){$r(n,i,o,c),n=i.stateNode;try{var g=i.memoizedProps,v=g.id,T=g.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){ht(i,i.return,D)}}else $r(n,i,o,c);break;case 31:$r(n,i,o,c);break;case 13:$r(n,i,o,c);break;case 23:break;case 22:g=i.stateNode,v=i.alternate,i.memoizedState!==null?g._visibility&2?$r(n,i,o,c):vu(n,i):g._visibility&2?$r(n,i,o,c):(g._visibility|=2,vl(n,i,o,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Ag(v,i);break;case 24:$r(n,i,o,c),f&2048&&Ng(i.alternate,i);break;default:$r(n,i,o,c)}}function vl(n,i,o,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=n,v=i,T=o,D=c,F=v.flags;switch(v.tag){case 0:case 11:case 15:vl(g,v,T,D,f),yu(8,v);break;case 23:break;case 22:var ee=v.stateNode;v.memoizedState!==null?ee._visibility&2?vl(g,v,T,D,f):vu(g,v):(ee._visibility|=2,vl(g,v,T,D,f)),f&&F&2048&&Ag(v.alternate,v);break;case 24:vl(g,v,T,D,f),f&&F&2048&&Ng(v.alternate,v);break;default:vl(g,v,T,D,f)}i=i.sibling}}function vu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,f=c.flags;switch(c.tag){case 22:vu(o,c),f&2048&&Ag(c.alternate,c);break;case 24:vu(o,c),f&2048&&Ng(c.alternate,c);break;default:vu(o,c)}i=i.sibling}}var bu=8192;function bl(n,i,o){if(n.subtreeFlags&bu)for(n=n.child;n!==null;)vx(n,i,o),n=n.sibling}function vx(n,i,o){switch(n.tag){case 26:bl(n,i,o),n.flags&bu&&n.memoizedState!==null&&MR(o,Kr,n.memoizedState,n.memoizedProps);break;case 5:bl(n,i,o);break;case 3:case 4:var c=Kr;Kr=xf(n.stateNode.containerInfo),bl(n,i,o),Kr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=bu,bu=16777216,bl(n,i,o),bu=c):bl(n,i,o));break;default:bl(n,i,o)}}function bx(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function xu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];pn=c,Ex(c,n)}bx(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)xx(n),n=n.sibling}function xx(n){switch(n.tag){case 0:case 11:case 15:xu(n),n.flags&2048&&Ui(9,n,n.return);break;case 3:xu(n);break;case 12:xu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,lf(n)):xu(n);break;default:xu(n)}}function lf(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];pn=c,Ex(c,n)}bx(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ui(8,i,i.return),lf(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,lf(i));break;default:lf(i)}n=n.sibling}}function Ex(n,i){for(;pn!==null;){var o=pn;switch(o.tag){case 0:case 11:case 15:Ui(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:su(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,pn=c;else e:for(o=n;pn!==null;){c=pn;var f=c.sibling,g=c.return;if(hx(c),c===o){pn=null;break e}if(f!==null){f.return=g,pn=f;break e}pn=g}}}var JN={getCacheForType:function(n){var i=En(nn),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return En(nn).controller.signal}},ZN=typeof WeakMap=="function"?WeakMap:Map,ot=0,xt=null,$e=null,Je=0,dt=0,mr=null,zi=!1,xl=!1,Rg=!1,ni=0,Lt=0,qi=0,ro=0,Cg=0,pr=0,El=0,Eu=null,tr=null,kg=!1,cf=0,Tx=0,uf=1/0,df=null,Bi=null,un=0,Fi=null,Tl=null,ri=0,Dg=0,Pg=null,wx=null,Tu=0,Vg=null;function gr(){return(ot&2)!==0&&Je!==0?Je&-Je:W.T!==null?zg():dh()}function Ix(){if(pr===0)if((Je&536870912)===0||tt){var n=Ca;Ca<<=1,(Ca&3932160)===0&&(Ca=262144),pr=n}else pr=536870912;return n=hr.current,n!==null&&(n.flags|=32),pr}function nr(n,i,o){(n===xt&&(dt===2||dt===9)||n.cancelPendingCommit!==null)&&(wl(n,0),Hi(n,Je,pr,!1)),ka(n,o),((ot&2)===0||n!==xt)&&(n===xt&&((ot&2)===0&&(ro|=o),Lt===4&&Hi(n,Je,pr,!1)),Ts(n))}function Sx(n,i,o){if((ot&6)!==0)throw Error(r(327));var c=!o&&(i&127)===0&&(i&n.expiredLanes)===0||Lr(n,i),f=c?nR(n,i):jg(n,i,!0),g=c;do{if(f===0){xl&&!c&&Hi(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!eR(o)){f=jg(n,i,!1),g=!1;continue}if(f===2){if(g=i,n.errorRecoveryDisabledLanes&g)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=n;f=Eu;var D=T.current.memoizedState.isDehydrated;if(D&&(wl(T,v).flags|=256),v=jg(T,v,!1),v!==2){if(Rg&&!D){T.errorRecoveryDisabledLanes|=g,ro|=g,f=4;break e}g=tr,tr=f,g!==null&&(tr===null?tr=g:tr.push.apply(tr,g))}f=v}if(g=!1,f!==2)continue}}if(f===1){wl(n,0),Hi(n,i,0,!0);break}e:{switch(c=n,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Hi(c,i,pr,!zi);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=cf+300-Qe(),10<f)){if(Hi(c,i,pr,!zi),is(c,0,!0)!==0)break e;ri=i,c.timeoutHandle=rE(Ax.bind(null,c,o,tr,df,kg,i,pr,ro,El,zi,g,"Throttled",-0,0),f);break e}Ax(c,o,tr,df,kg,i,pr,ro,El,zi,g,null,-0,0)}}break}while(!0);Ts(n)}function Ax(n,i,o,c,f,g,v,T,D,F,ee,ie,G,$){if(n.timeoutHandle=-1,ie=i.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qr},vx(i,g,ie);var Ie=(g&62914560)===g?cf-Qe():(g&4194048)===g?Tx-Qe():0;if(Ie=LR(ie,Ie),Ie!==null){ri=g,n.cancelPendingCommit=Ie(Ox.bind(null,n,i,g,o,c,f,v,T,D,ee,ie,null,G,$)),Hi(n,g,v,!F);return}}Ox(n,i,g,o,c,f,v,T,D)}function eR(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],g=f.getSnapshot;f=f.value;try{if(!ur(g(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Hi(n,i,o,c){i&=~Cg,i&=~ro,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var g=31-bt(f),v=1<<g;c[g]=-1,f&=~v}o!==0&&Da(n,o,i)}function hf(){return(ot&6)===0?(wu(0),!1):!0}function Og(){if($e!==null){if(dt===0)var n=$e.return;else n=$e,Qs=$a=null,Xp(n),ml=null,au=0,n=$e;for(;n!==null;)sx(n.alternate,n),n=n.return;$e=null}}function wl(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,bR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ri=0,Og(),xt=n,$e=o=Hs(n.current,null),Je=i,dt=0,mr=null,zi=!1,xl=Lr(n,i),Rg=!1,El=pr=Cg=ro=qi=Lt=0,tr=Eu=null,kg=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-bt(c),g=1<<f;i|=n[f],c&=~g}return ni=i,Dh(),o}function Nx(n,i){Fe=null,W.H=mu,i===fl||i===zh?(i=Hv(),dt=3):i===Up?(i=Hv(),dt=4):dt=i===fg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,mr=i,$e===null&&(Lt=1,ef(n,Ar(i,n.current)))}function Rx(){var n=hr.current;return n===null?!0:(Je&4194048)===Je?kr===null:(Je&62914560)===Je||(Je&536870912)!==0?n===kr:!1}function Cx(){var n=W.H;return W.H=mu,n===null?mu:n}function kx(){var n=W.A;return W.A=JN,n}function ff(){Lt=4,zi||(Je&4194048)!==Je&&hr.current!==null||(xl=!0),(qi&134217727)===0&&(ro&134217727)===0||xt===null||Hi(xt,Je,pr,!1)}function jg(n,i,o){var c=ot;ot|=2;var f=Cx(),g=kx();(xt!==n||Je!==i)&&(df=null,wl(n,i)),i=!1;var v=Lt;e:do try{if(dt!==0&&$e!==null){var T=$e,D=mr;switch(dt){case 8:Og(),v=6;break e;case 3:case 2:case 9:case 6:hr.current===null&&(i=!0);var F=dt;if(dt=0,mr=null,Il(n,T,D,F),o&&xl){v=0;break e}break;default:F=dt,dt=0,mr=null,Il(n,T,D,F)}}tR(),v=Lt;break}catch(ee){Nx(n,ee)}while(!0);return i&&n.shellSuspendCounter++,Qs=$a=null,ot=c,W.H=f,W.A=g,$e===null&&(xt=null,Je=0,Dh()),v}function tR(){for(;$e!==null;)Dx($e)}function nR(n,i){var o=ot;ot|=2;var c=Cx(),f=kx();xt!==n||Je!==i?(df=null,uf=Qe()+500,wl(n,i)):xl=Lr(n,i);e:do try{if(dt!==0&&$e!==null){i=$e;var g=mr;t:switch(dt){case 1:dt=0,mr=null,Il(n,i,g,1);break;case 2:case 9:if(Bv(g)){dt=0,mr=null,Px(i);break}i=function(){dt!==2&&dt!==9||xt!==n||(dt=7),Ts(n)},g.then(i,i);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Bv(g)?(dt=0,mr=null,Px(i)):(dt=0,mr=null,Il(n,i,g,7));break;case 5:var v=null;switch($e.tag){case 26:v=$e.memoizedState;case 5:case 27:var T=$e;if(v?_E(v):T.stateNode.complete){dt=0,mr=null;var D=T.sibling;if(D!==null)$e=D;else{var F=T.return;F!==null?($e=F,mf(F)):$e=null}break t}}dt=0,mr=null,Il(n,i,g,5);break;case 6:dt=0,mr=null,Il(n,i,g,6);break;case 8:Og(),Lt=6;break e;default:throw Error(r(462))}}rR();break}catch(ee){Nx(n,ee)}while(!0);return Qs=$a=null,W.H=c,W.A=f,ot=o,$e!==null?0:(xt=null,Je=0,Dh(),Lt)}function rR(){for(;$e!==null&&!H();)Dx($e)}function Dx(n){var i=nx(n.alternate,n,ni);n.memoizedProps=n.pendingProps,i===null?mf(n):$e=i}function Px(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Wb(o,i,i.pendingProps,i.type,void 0,Je);break;case 11:i=Wb(o,i,i.pendingProps,i.type.render,i.ref,Je);break;case 5:Xp(i);default:sx(o,i),i=$e=kv(i,ni),i=nx(o,i,ni)}n.memoizedProps=n.pendingProps,i===null?mf(n):$e=i}function Il(n,i,o,c){Qs=$a=null,Xp(i),ml=null,au=0;var f=i.return;try{if(GN(n,f,i,o,Je)){Lt=1,ef(n,Ar(o,n.current)),$e=null;return}}catch(g){if(f!==null)throw $e=f,g;Lt=1,ef(n,Ar(o,n.current)),$e=null;return}i.flags&32768?(tt||c===1?n=!0:xl||(Je&536870912)!==0?n=!1:(zi=n=!0,(c===2||c===9||c===3||c===6)&&(c=hr.current,c!==null&&c.tag===13&&(c.flags|=16384))),Vx(i,n)):mf(i)}function mf(n){var i=n;do{if((i.flags&32768)!==0){Vx(i,zi);return}n=i.return;var o=$N(i.alternate,i,ni);if(o!==null){$e=o;return}if(i=i.sibling,i!==null){$e=i;return}$e=i=n}while(i!==null);Lt===0&&(Lt=5)}function Vx(n,i){do{var o=YN(n.alternate,n);if(o!==null){o.flags&=32767,$e=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){$e=n;return}$e=n=o}while(n!==null);Lt=6,$e=null}function Ox(n,i,o,c,f,g,v,T,D){n.cancelPendingCommit=null;do pf();while(un!==0);if((ot&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=wp,pp(n,o,g,v,T,D),n===xt&&($e=xt=null,Je=0),Tl=i,Fi=n,ri=o,Dg=g,Pg=f,wx=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,oR(zn,function(){return zx(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,f=ue.p,ue.p=2,v=ot,ot|=4;try{WN(n,i,o)}finally{ot=v,ue.p=f,W.T=c}}un=1,jx(),Mx(),Lx()}}function jx(){if(un===1){un=0;var n=Fi,i=Tl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var c=ue.p;ue.p=2;var f=ot;ot|=4;try{gx(i,n);var g=$g,v=Ev(n.containerInfo),T=g.focusedElem,D=g.selectionRange;if(v!==T&&T&&T.ownerDocument&&xv(T.ownerDocument.documentElement,T)){if(D!==null&&vp(T)){var F=D.start,ee=D.end;if(ee===void 0&&(ee=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min(ee,T.value.length);else{var ie=T.ownerDocument||document,G=ie&&ie.defaultView||window;if(G.getSelection){var $=G.getSelection(),Ie=T.textContent.length,De=Math.min(D.start,Ie),_t=D.end===void 0?De:Math.min(D.end,Ie);!$.extend&&De>_t&&(v=_t,_t=De,De=v);var L=bv(T,De),j=bv(T,_t);if(L&&j&&($.rangeCount!==1||$.anchorNode!==L.node||$.anchorOffset!==L.offset||$.focusNode!==j.node||$.focusOffset!==j.offset)){var B=ie.createRange();B.setStart(L.node,L.offset),$.removeAllRanges(),De>_t?($.addRange(B),$.extend(j.node,j.offset)):(B.setEnd(j.node,j.offset),$.addRange(B))}}}}for(ie=[],$=T;$=$.parentNode;)$.nodeType===1&&ie.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ie.length;T++){var ne=ie[T];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Af=!!Kg,$g=Kg=null}finally{ot=f,ue.p=c,W.T=o}}n.current=i,un=2}}function Mx(){if(un===2){un=0;var n=Fi,i=Tl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var c=ue.p;ue.p=2;var f=ot;ot|=4;try{dx(n,i.alternate,i)}finally{ot=f,ue.p=c,W.T=o}}un=3}}function Lx(){if(un===4||un===3){un=0,Re();var n=Fi,i=Tl,o=ri,c=wx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?un=5:(un=0,Tl=Fi=null,Ux(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Bi=null),zs(o),i=i.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(xe,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=W.T,f=ue.p,ue.p=2,W.T=null;try{for(var g=n.onRecoverableError,v=0;v<c.length;v++){var T=c[v];g(T.value,{componentStack:T.stack})}}finally{W.T=i,ue.p=f}}(ri&3)!==0&&pf(),Ts(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Vg?Tu++:(Tu=0,Vg=n):Tu=0,wu(0)}}function Ux(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,su(i)))}function pf(){return jx(),Mx(),Lx(),zx()}function zx(){if(un!==5)return!1;var n=Fi,i=Dg;Dg=0;var o=zs(ri),c=W.T,f=ue.p;try{ue.p=32>o?32:o,W.T=null,o=Pg,Pg=null;var g=Fi,v=ri;if(un=0,Tl=Fi=null,ri=0,(ot&6)!==0)throw Error(r(331));var T=ot;if(ot|=4,xx(g.current),_x(g,g.current,v,o),ot=T,wu(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(xe,g)}catch{}return!0}finally{ue.p=f,W.T=c,Ux(n,i)}}function qx(n,i,o){i=Ar(o,i),i=hg(n.stateNode,i,2),n=ji(n,i,2),n!==null&&(ka(n,2),Ts(n))}function ht(n,i,o){if(n.tag===3)qx(n,n,o);else for(;i!==null;){if(i.tag===3){qx(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Bi===null||!Bi.has(c))){n=Ar(o,n),o=Bb(2),c=ji(i,o,2),c!==null&&(Fb(o,c,i,n),ka(c,2),Ts(c));break}}i=i.return}}function Mg(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new ZN;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(o)||(Rg=!0,f.add(o),n=sR.bind(null,n,i,o),i.then(n,n))}function sR(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,xt===n&&(Je&o)===o&&(Lt===4||Lt===3&&(Je&62914560)===Je&&300>Qe()-cf?(ot&2)===0&&wl(n,0):Cg|=o,El===Je&&(El=0)),Ts(n)}function Bx(n,i){i===0&&(i=uh()),n=Ga(n,i),n!==null&&(ka(n,i),Ts(n))}function iR(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Bx(n,o)}function aR(n,i){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(i),Bx(n,o)}function oR(n,i){return vt(n,i)}var gf=null,Sl=null,Lg=!1,yf=!1,Ug=!1,Gi=0;function Ts(n){n!==Sl&&n.next===null&&(Sl===null?gf=Sl=n:Sl=Sl.next=n),yf=!0,Lg||(Lg=!0,cR())}function wu(n,i){if(!Ug&&yf){Ug=!0;do for(var o=!1,c=gf;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var v=c.suspendedLanes,T=c.pingedLanes;g=(1<<31-bt(42|n)+1)-1,g&=f&~(v&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Qx(c,g))}else g=Je,g=is(c,c===xt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Lr(c,g)||(o=!0,Qx(c,g));c=c.next}while(o);Ug=!1}}function lR(){Fx()}function Fx(){yf=Lg=!1;var n=0;Gi!==0&&vR()&&(n=Gi);for(var i=Qe(),o=null,c=gf;c!==null;){var f=c.next,g=Hx(c,i);g===0?(c.next=null,o===null?gf=f:o.next=f,f===null&&(Sl=o)):(o=c,(n!==0||(g&3)!==0)&&(yf=!0)),c=f}un!==0&&un!==5||wu(n),Gi!==0&&(Gi=0)}function Hx(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var v=31-bt(g),T=1<<v,D=f[v];D===-1?((T&o)===0||(T&c)!==0)&&(f[v]=mp(T,i)):D<=i&&(n.expiredLanes|=T),g&=~T}if(i=xt,o=Je,o=is(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(dt===2||dt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Un(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Lr(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&Un(c),zs(o)){case 2:case 8:o=Nt;break;case 32:o=zn;break;case 268435456:o=Vc;break;default:o=zn}return c=Gx.bind(null,n),o=vt(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&Un(c),n.callbackPriority=2,n.callbackNode=null,2}function Gx(n,i){if(un!==0&&un!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(pf()&&n.callbackNode!==o)return null;var c=Je;return c=is(n,n===xt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Sx(n,c,i),Hx(n,Qe()),n.callbackNode!=null&&n.callbackNode===o?Gx.bind(null,n):null)}function Qx(n,i){if(pf())return null;Sx(n,i,!0)}function cR(){xR(function(){(ot&6)!==0?vt(Xt,lR):Fx()})}function zg(){if(Gi===0){var n=dl;n===0&&(n=rs,rs<<=1,(rs&261888)===0&&(rs=256)),Gi=n}return Gi}function Kx(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Wo(""+n)}function $x(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function uR(n,i,o,c,f){if(i==="submit"&&o&&o.stateNode===f){var g=Kx((f[fn]||null).action),v=c.submitter;v&&(i=(i=v[fn]||null)?Kx(i.formAction):v.getAttribute("formAction"),i!==null&&(g=i,v=null));var T=new gs("action","action",null,c,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Gi!==0){var D=v?$x(f,v):new FormData(f);ag(o,{pending:!0,data:D,method:f.method,action:g},null,D)}}else typeof g=="function"&&(T.preventDefault(),D=v?$x(f,v):new FormData(f),ag(o,{pending:!0,data:D,method:f.method,action:g},g,D))},currentTarget:f}]})}}for(var qg=0;qg<Tp.length;qg++){var Bg=Tp[qg],dR=Bg.toLowerCase(),hR=Bg[0].toUpperCase()+Bg.slice(1);Qr(dR,"on"+hR)}Qr(Iv,"onAnimationEnd"),Qr(Sv,"onAnimationIteration"),Qr(Av,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(NN,"onTransitionRun"),Qr(RN,"onTransitionStart"),Qr(CN,"onTransitionCancel"),Qr(Nv,"onTransitionEnd"),hs("onMouseEnter",["mouseout","mouseover"]),hs("onMouseLeave",["mouseout","mouseover"]),hs("onPointerEnter",["pointerout","pointerover"]),hs("onPointerLeave",["pointerout","pointerover"]),ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ds("onBeforeInput",["compositionend","keypress","textInput","paste"]),ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Iu));function Yx(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var v=c.length-1;0<=v;v--){var T=c[v],D=T.instance,F=T.currentTarget;if(T=T.listener,D!==g&&f.isPropagationStopped())break e;g=T,f.currentTarget=F;try{g(f)}catch(ee){kh(ee)}f.currentTarget=null,g=D}else for(v=0;v<c.length;v++){if(T=c[v],D=T.instance,F=T.currentTarget,T=T.listener,D!==g&&f.isPropagationStopped())break e;g=T,f.currentTarget=F;try{g(f)}catch(ee){kh(ee)}f.currentTarget=null,g=D}}}}function Ye(n,i){var o=i[Go];o===void 0&&(o=i[Go]=new Set);var c=n+"__bubble";o.has(c)||(Wx(i,n,2,!1),o.add(c))}function Fg(n,i,o){var c=0;i&&(c|=4),Wx(o,n,c,i)}var _f="_reactListening"+Math.random().toString(36).slice(2);function Hg(n){if(!n[_f]){n[_f]=!0,Mc.forEach(function(o){o!=="selectionchange"&&(fR.has(o)||Fg(o,!1,n),Fg(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[_f]||(i[_f]=!0,Fg("selectionchange",!1,i))}}function Wx(n,i,o,c){switch(IE(i)){case 2:var f=qR;break;case 8:f=BR;break;default:f=iy}o=f.bind(null,i,o,n),f=void 0,!Ma||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function Gg(n,i,o,c,f){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var T=c.stateNode.containerInfo;if(T===f)break;if(v===4)for(v=c.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;T!==null;){if(v=cs(T),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){c=g=v;continue e}T=T.parentNode}}c=c.return}Si(function(){var F=g,ee=Tr(o),ie=[];e:{var G=Rv.get(n);if(G!==void 0){var $=gs,Ie=n;switch(n){case"keypress":if(Ua(o)===0)break e;case"keydown":case"keyup":$=Nh;break;case"focusin":Ie="focus",$=qa;break;case"focusout":Ie="blur",$=qa;break;case"beforeblur":case"afterblur":$=qa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=_;break;case Iv:case Sv:case Av:$=xh;break;case Nv:$=I;break;case"scroll":case"scrollend":$=Yc;break;case"wheel":$=K;break;case"copy":case"cut":case"paste":$=Eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Fs;break;case"toggle":case"beforetoggle":$=Be}var De=(i&4)!==0,_t=!De&&(n==="scroll"||n==="scrollend"),L=De?G!==null?G+"Capture":null:G;De=[];for(var j=F,B;j!==null;){var ne=j;if(B=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||B===null||L===null||(ne=Br(j,L),ne!=null&&De.push(Su(j,ne,B))),_t)break;j=j.return}0<De.length&&(G=new $(G,Ie,null,o,ee),ie.push({event:G,listeners:De}))}}if((i&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",$=n==="mouseout"||n==="pointerout",G&&o!==Qc&&(Ie=o.relatedTarget||o.fromElement)&&(cs(Ie)||Ie[os]))break e;if(($||G)&&(G=ee.window===ee?ee:(G=ee.ownerDocument)?G.defaultView||G.parentWindow:window,$?(Ie=o.relatedTarget||o.toElement,$=F,Ie=Ie?cs(Ie):null,Ie!==null&&(_t=l(Ie),De=Ie.tag,Ie!==_t||De!==5&&De!==27&&De!==6)&&(Ie=null)):($=null,Ie=F),$!==Ie)){if(De=Wc,ne="onMouseLeave",L="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(De=Fs,ne="onPointerLeave",L="onPointerEnter",j="pointer"),_t=$==null?G:lr($),B=Ie==null?G:lr(Ie),G=new De(ne,j+"leave",$,o,ee),G.target=_t,G.relatedTarget=B,ne=null,cs(ee)===F&&(De=new De(L,j+"enter",Ie,o,ee),De.target=B,De.relatedTarget=_t,ne=De),_t=ne,$&&Ie)t:{for(De=mR,L=$,j=Ie,B=0,ne=L;ne;ne=De(ne))B++;ne=0;for(var Ce=j;Ce;Ce=De(Ce))ne++;for(;0<B-ne;)L=De(L),B--;for(;0<ne-B;)j=De(j),ne--;for(;B--;){if(L===j||j!==null&&L===j.alternate){De=L;break t}L=De(L),j=De(j)}De=null}else De=null;$!==null&&Xx(ie,G,$,De,!1),Ie!==null&&_t!==null&&Xx(ie,_t,Ie,De,!0)}}e:{if(G=F?lr(F):window,$=G.nodeName&&G.nodeName.toLowerCase(),$==="select"||$==="input"&&G.type==="file")var rt=mv;else if(hv(G))if(pv)rt=IN;else{rt=TN;var Ae=EN}else $=G.nodeName,!$||$.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&Yo(F.elementType)&&(rt=mv):rt=wN;if(rt&&(rt=rt(n,F))){fv(ie,rt,o,ee);break e}Ae&&Ae(n,G,F),n==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Fc(G,"number",G.value)}switch(Ae=F?lr(F):window,n){case"focusin":(hv(Ae)||Ae.contentEditable==="true")&&(rl=Ae,bp=F,tu=null);break;case"focusout":tu=bp=rl=null;break;case"mousedown":xp=!0;break;case"contextmenu":case"mouseup":case"dragend":xp=!1,Tv(ie,o,ee);break;case"selectionchange":if(AN)break;case"keydown":case"keyup":Tv(ie,o,ee)}var Ke;if(at)e:{switch(n){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else nl?Ba(n,o)&&(Ze="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ze="onCompositionStart");Ze&&(vs&&o.locale!=="ko"&&(nl||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&nl&&(Ke=$c()):(ps=ee,Kc="value"in ps?ps.value:ps.textContent,nl=!0)),Ae=vf(F,Ze),0<Ae.length&&(Ze=new _s(Ze,n,null,o,ee),ie.push({event:Ze,listeners:Ae}),Ke?Ze.data=Ke:(Ke=tl(o),Ke!==null&&(Ze.data=Ke)))),(Ke=Ir?_N(n,o):vN(n,o))&&(Ze=vf(F,"onBeforeInput"),0<Ze.length&&(Ae=new _s("onBeforeInput","beforeinput",null,o,ee),ie.push({event:Ae,listeners:Ze}),Ae.data=Ke)),uR(ie,n,F,o,ee)}Yx(ie,i)})}function Su(n,i,o){return{instance:n,listener:i,currentTarget:o}}function vf(n,i){for(var o=i+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Br(n,o),f!=null&&c.unshift(Su(n,f,g)),f=Br(n,i),f!=null&&c.push(Su(n,f,g))),n.tag===3)return c;n=n.return}return[]}function mR(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Xx(n,i,o,c,f){for(var g=i._reactName,v=[];o!==null&&o!==c;){var T=o,D=T.alternate,F=T.stateNode;if(T=T.tag,D!==null&&D===c)break;T!==5&&T!==26&&T!==27||F===null||(D=F,f?(F=Br(o,g),F!=null&&v.unshift(Su(o,F,D))):f||(F=Br(o,g),F!=null&&v.push(Su(o,F,D)))),o=o.return}v.length!==0&&n.push({event:i,listeners:v})}var pR=/\r\n?/g,gR=/\u0000|\uFFFD/g;function Jx(n){return(typeof n=="string"?n:""+n).replace(pR,`
`).replace(gR,"")}function Zx(n,i){return i=Jx(i),Jx(n)===i}function yt(n,i,o,c,f,g){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Xn(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Xn(n,""+c);break;case"className":cr(n,"class",c);break;case"tabIndex":cr(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":cr(n,o,c);break;case"style":Gc(n,c,g);break;case"data":if(i!=="object"){cr(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Wo(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&yt(n,i,"name",f.name,f,null),yt(n,i,"formEncType",f.formEncType,f,null),yt(n,i,"formMethod",f.formMethod,f,null),yt(n,i,"formTarget",f.formTarget,f,null)):(yt(n,i,"encType",f.encType,f,null),yt(n,i,"method",f.method,f,null),yt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Wo(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=qr);break;case"onScroll":c!=null&&Ye("scroll",n);break;case"onScrollEnd":c!=null&&Ye("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=Wo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ye("beforetoggle",n),Ye("toggle",n),Ko(n,"popover",c);break;case"xlinkActuate":tn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":tn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":tn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":tn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":tn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":tn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":tn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":tn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":tn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ko(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=_h.get(o)||o,Ko(n,o,c))}}function Qg(n,i,o,c,f,g){switch(o){case"style":Gc(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Xn(n,c):(typeof c=="number"||typeof c=="bigint")&&Xn(n,""+c);break;case"onScroll":c!=null&&Ye("scroll",n);break;case"onScrollEnd":c!=null&&Ye("scrollend",n);break;case"onClick":c!=null&&(n.onclick=qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),g=n[fn]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Ko(n,o,c)}}}function wn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",n),Ye("load",n);var c=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var v=o[g];if(v!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:yt(n,i,g,v,o,null)}}f&&yt(n,i,"srcSet",o.srcSet,o,null),c&&yt(n,i,"src",o.src,o,null);return;case"input":Ye("invalid",n);var T=g=v=f=null,D=null,F=null;for(c in o)if(o.hasOwnProperty(c)){var ee=o[c];if(ee!=null)switch(c){case"name":f=ee;break;case"type":v=ee;break;case"checked":D=ee;break;case"defaultChecked":F=ee;break;case"value":g=ee;break;case"defaultValue":T=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,i));break;default:yt(n,i,c,ee,o,null)}}ph(n,g,T,D,F,v,f,!1);return;case"select":Ye("invalid",n),c=v=g=null;for(f in o)if(o.hasOwnProperty(f)&&(T=o[f],T!=null))switch(f){case"value":g=T;break;case"defaultValue":v=T;break;case"multiple":c=T;default:yt(n,i,f,T,o,null)}i=g,o=v,n.multiple=!!c,i!=null?Ei(n,!!c,i,!1):o!=null&&Ei(n,!!c,o,!0);return;case"textarea":Ye("invalid",n),g=f=c=null;for(v in o)if(o.hasOwnProperty(v)&&(T=o[v],T!=null))switch(v){case"value":c=T;break;case"defaultValue":f=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:yt(n,i,v,T,o,null)}Ti(n,c,f,g);return;case"option":for(D in o)o.hasOwnProperty(D)&&(c=o[D],c!=null)&&(D==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":yt(n,i,D,c,o,null));return;case"dialog":Ye("beforetoggle",n),Ye("toggle",n),Ye("cancel",n),Ye("close",n);break;case"iframe":case"object":Ye("load",n);break;case"video":case"audio":for(c=0;c<Iu.length;c++)Ye(Iu[c],n);break;case"image":Ye("error",n),Ye("load",n);break;case"details":Ye("toggle",n);break;case"embed":case"source":case"link":Ye("error",n),Ye("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(c=o[F],c!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:yt(n,i,F,c,o,null)}return;default:if(Yo(i)){for(ee in o)o.hasOwnProperty(ee)&&(c=o[ee],c!==void 0&&Qg(n,i,ee,c,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(c=o[T],c!=null&&yt(n,i,T,c,o,null))}function yR(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,v=null,T=null,D=null,F=null,ee=null;for($ in o){var ie=o[$];if(o.hasOwnProperty($)&&ie!=null)switch($){case"checked":break;case"value":break;case"defaultValue":D=ie;default:c.hasOwnProperty($)||yt(n,i,$,null,c,ie)}}for(var G in c){var $=c[G];if(ie=o[G],c.hasOwnProperty(G)&&($!=null||ie!=null))switch(G){case"type":g=$;break;case"name":f=$;break;case"checked":F=$;break;case"defaultChecked":ee=$;break;case"value":v=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:$!==ie&&yt(n,i,G,$,c,ie)}}$o(n,v,T,D,F,ee,g,f);return;case"select":$=v=T=G=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":$=D;default:c.hasOwnProperty(g)||yt(n,i,g,null,c,D)}for(f in c)if(g=c[f],D=o[f],c.hasOwnProperty(f)&&(g!=null||D!=null))switch(f){case"value":G=g;break;case"defaultValue":T=g;break;case"multiple":v=g;default:g!==D&&yt(n,i,f,g,c,D)}i=T,o=v,c=$,G!=null?Ei(n,!!o,G,!1):!!c!=!!o&&(i!=null?Ei(n,!!o,i,!0):Ei(n,!!o,o?[]:"",!1));return;case"textarea":$=G=null;for(T in o)if(f=o[T],o.hasOwnProperty(T)&&f!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:yt(n,i,T,null,c,f)}for(v in c)if(f=c[v],g=o[v],c.hasOwnProperty(v)&&(f!=null||g!=null))switch(v){case"value":G=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&yt(n,i,v,f,c,g)}gh(n,G,$);return;case"option":for(var Ie in o)G=o[Ie],o.hasOwnProperty(Ie)&&G!=null&&!c.hasOwnProperty(Ie)&&(Ie==="selected"?n.selected=!1:yt(n,i,Ie,null,c,G));for(D in c)G=c[D],$=o[D],c.hasOwnProperty(D)&&G!==$&&(G!=null||$!=null)&&(D==="selected"?n.selected=G&&typeof G!="function"&&typeof G!="symbol":yt(n,i,D,G,c,$));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)G=o[De],o.hasOwnProperty(De)&&G!=null&&!c.hasOwnProperty(De)&&yt(n,i,De,null,c,G);for(F in c)if(G=c[F],$=o[F],c.hasOwnProperty(F)&&G!==$&&(G!=null||$!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:yt(n,i,F,G,c,$)}return;default:if(Yo(i)){for(var _t in o)G=o[_t],o.hasOwnProperty(_t)&&G!==void 0&&!c.hasOwnProperty(_t)&&Qg(n,i,_t,void 0,c,G);for(ee in c)G=c[ee],$=o[ee],!c.hasOwnProperty(ee)||G===$||G===void 0&&$===void 0||Qg(n,i,ee,G,c,$);return}}for(var L in o)G=o[L],o.hasOwnProperty(L)&&G!=null&&!c.hasOwnProperty(L)&&yt(n,i,L,null,c,G);for(ie in c)G=c[ie],$=o[ie],!c.hasOwnProperty(ie)||G===$||G==null&&$==null||yt(n,i,ie,G,c,$)}function eE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _R(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],g=f.transferSize,v=f.initiatorType,T=f.duration;if(g&&T&&eE(v)){for(v=0,T=f.responseEnd,c+=1;c<o.length;c++){var D=o[c],F=D.startTime;if(F>T)break;var ee=D.transferSize,ie=D.initiatorType;ee&&eE(ie)&&(D=D.responseEnd,v+=ee*(D<T?1:(T-F)/(D-F)))}if(--c,i+=8*(g+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Kg=null,$g=null;function bf(n){return n.nodeType===9?n:n.ownerDocument}function tE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Yg(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Wg=null;function vR(){var n=window.event;return n&&n.type==="popstate"?n===Wg?!1:(Wg=n,!0):(Wg=null,!1)}var rE=typeof setTimeout=="function"?setTimeout:void 0,bR=typeof clearTimeout=="function"?clearTimeout:void 0,sE=typeof Promise=="function"?Promise:void 0,xR=typeof queueMicrotask=="function"?queueMicrotask:typeof sE<"u"?function(n){return sE.resolve(null).then(n).catch(ER)}:rE;function ER(n){setTimeout(function(){throw n})}function Qi(n){return n==="head"}function iE(n,i){var o=i,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),Cl(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Au(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Au(o);for(var g=o.firstChild;g;){var v=g.nextSibling,T=g.nodeName;g[ls]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=v}}else o==="body"&&Au(n.ownerDocument.body);o=f}while(o);Cl(i)}function aE(n,i){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Xg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Xg(o),Qo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function TR(n,i,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[ls])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Dr(n.nextSibling),n===null)break}return null}function wR(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Dr(n.nextSibling),n===null))return null;return n}function oE(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Dr(n.nextSibling),n===null))return null;return n}function Jg(n){return n.data==="$?"||n.data==="$~"}function Zg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function IR(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Dr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var ey=null;function lE(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Dr(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function cE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function uE(n,i,o){switch(i=bf(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Au(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Qo(n)}var Pr=new Map,dE=new Set;function xf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var si=ue.d;ue.d={f:SR,r:AR,D:NR,C:RR,L:CR,m:kR,X:PR,S:DR,M:VR};function SR(){var n=si.f(),i=hf();return n||i}function AR(n){var i=Er(n);i!==null&&i.tag===5&&i.type==="form"?Nb(i):si.r(n)}var Al=typeof document>"u"?null:document;function hE(n,i,o){var c=Al;if(c&&typeof i=="string"&&i){var f=Wn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),dE.has(f)||(dE.add(f),n={rel:n,crossOrigin:o,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),wn(i,"link",n),en(i),c.head.appendChild(i)))}}function NR(n){si.D(n),hE("dns-prefetch",n,null)}function RR(n,i){si.C(n,i),hE("preconnect",n,i)}function CR(n,i,o){si.L(n,i,o);var c=Al;if(c&&n&&i){var f='link[rel="preload"][as="'+Wn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Wn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Wn(o.imageSizes)+'"]')):f+='[href="'+Wn(n)+'"]';var g=f;switch(i){case"style":g=Nl(n);break;case"script":g=Rl(n)}Pr.has(g)||(n=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Pr.set(g,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(Nu(g))||i==="script"&&c.querySelector(Ru(g))||(i=c.createElement("link"),wn(i,"link",n),en(i),c.head.appendChild(i)))}}function kR(n,i){si.m(n,i);var o=Al;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Wn(c)+'"][href="'+Wn(n)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Rl(n)}if(!Pr.has(g)&&(n=E({rel:"modulepreload",href:n},i),Pr.set(g,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ru(g)))return}c=o.createElement("link"),wn(c,"link",n),en(c),o.head.appendChild(c)}}}function DR(n,i,o){si.S(n,i,o);var c=Al;if(c&&n){var f=us(c).hoistableStyles,g=Nl(n);i=i||"default";var v=f.get(g);if(!v){var T={loading:0,preload:null};if(v=c.querySelector(Nu(g)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Pr.get(g))&&ty(n,o);var D=v=c.createElement("link");en(D),wn(D,"link",n),D._p=new Promise(function(F,ee){D.onload=F,D.onerror=ee}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Ef(v,i,c)}v={type:"stylesheet",instance:v,count:1,state:T},f.set(g,v)}}}function PR(n,i){si.X(n,i);var o=Al;if(o&&n){var c=us(o).hoistableScripts,f=Rl(n),g=c.get(f);g||(g=o.querySelector(Ru(f)),g||(n=E({src:n,async:!0},i),(i=Pr.get(f))&&ny(n,i),g=o.createElement("script"),en(g),wn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function VR(n,i){si.M(n,i);var o=Al;if(o&&n){var c=us(o).hoistableScripts,f=Rl(n),g=c.get(f);g||(g=o.querySelector(Ru(f)),g||(n=E({src:n,async:!0,type:"module"},i),(i=Pr.get(f))&&ny(n,i),g=o.createElement("script"),en(g),wn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function fE(n,i,o,c){var f=(f=J.current)?xf(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Nl(o.href),o=us(f).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Nl(o.href);var g=us(f).hoistableStyles,v=g.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,v),(g=f.querySelector(Nu(n)))&&!g._p&&(v.instance=g,v.state.loading=5),Pr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Pr.set(n,o),g||OR(f,n,o,v.state))),i&&c===null)throw Error(r(528,""));return v}if(i&&c!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Rl(o),o=us(f).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Nl(n){return'href="'+Wn(n)+'"'}function Nu(n){return'link[rel="stylesheet"]['+n+"]"}function mE(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function OR(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),wn(i,"link",o),en(i),n.head.appendChild(i))}function Rl(n){return'[src="'+Wn(n)+'"]'}function Ru(n){return"script[async]"+n}function pE(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Wn(o.href)+'"]');if(c)return i.instance=c,en(c),c;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),en(c),wn(c,"style",f),Ef(c,o.precedence,n),i.instance=c;case"stylesheet":f=Nl(o.href);var g=n.querySelector(Nu(f));if(g)return i.state.loading|=4,i.instance=g,en(g),g;c=mE(o),(f=Pr.get(f))&&ty(c,f),g=(n.ownerDocument||n).createElement("link"),en(g);var v=g;return v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),wn(g,"link",c),i.state.loading|=4,Ef(g,o.precedence,n),i.instance=g;case"script":return g=Rl(o.src),(f=n.querySelector(Ru(g)))?(i.instance=f,en(f),f):(c=o,(f=Pr.get(g))&&(c=E({},o),ny(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),en(f),wn(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Ef(c,o.precedence,n));return i.instance}function Ef(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,v=0;v<c.length;v++){var T=c[v];if(T.dataset.precedence===i)g=T;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function ty(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function ny(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Tf=null;function gE(n,i,o){if(Tf===null){var c=new Map,f=Tf=new Map;f.set(o,c)}else f=Tf,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[ls]||g[Zt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var v=g.getAttribute(i)||"";v=n+v;var T=c.get(v);T?T.push(g):c.set(v,[g])}}return c}function yE(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function jR(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function _E(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function MR(n,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Nl(c.href),g=i.querySelector(Nu(f));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=wf.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=g,en(g);return}g=i.ownerDocument||i,c=mE(c),(f=Pr.get(f))&&ty(c,f),g=g.createElement("link"),en(g);var v=g;v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),wn(g,"link",c),o.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=wf.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var ry=0;function LR(n,i){return n.stylesheets&&n.count===0&&Sf(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Sf(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+i);0<n.imgBytes&&ry===0&&(ry=62500*_R());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Sf(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>ry?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function wf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var If=null;function Sf(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,If=new Map,i.forEach(UR,n),If=null,wf.call(n))}function UR(n,i){if(!(i.state.loading&4)){var o=If.get(n);if(o)var c=o.get(null);else{o=new Map,If.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var v=f[g];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),c=v)}c&&o.set(null,c)}f=i.instance,v=f.getAttribute("data-precedence"),g=o.get(v)||c,g===c&&o.set(null,f),o.set(v,f),this.count++,c=wf.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var Cu={$$typeof:ae,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function zR(n,i,o,c,f,g,v,T,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=as(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=as(0),this.hiddenUpdates=as(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function vE(n,i,o,c,f,g,v,T,D,F,ee,ie){return n=new zR(n,i,o,v,D,F,ee,ie,T),i=1,g===!0&&(i|=24),g=dr(3,null,null,i),n.current=g,g.stateNode=n,i=jp(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:i},zp(g),n}function bE(n){return n?(n=al,n):al}function xE(n,i,o,c,f,g){f=bE(f),c.context===null?c.context=f:c.pendingContext=f,c=Oi(i),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=ji(n,c,i),o!==null&&(nr(o,n,i),lu(o,n,i))}function EE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function sy(n,i){EE(n,i),(n=n.alternate)&&EE(n,i)}function TE(n){if(n.tag===13||n.tag===31){var i=Ga(n,67108864);i!==null&&nr(i,n,67108864),sy(n,67108864)}}function wE(n){if(n.tag===13||n.tag===31){var i=gr();i=Pa(i);var o=Ga(n,i);o!==null&&nr(o,n,i),sy(n,i)}}var Af=!0;function qR(n,i,o,c){var f=W.T;W.T=null;var g=ue.p;try{ue.p=2,iy(n,i,o,c)}finally{ue.p=g,W.T=f}}function BR(n,i,o,c){var f=W.T;W.T=null;var g=ue.p;try{ue.p=8,iy(n,i,o,c)}finally{ue.p=g,W.T=f}}function iy(n,i,o,c){if(Af){var f=ay(c);if(f===null)Gg(n,i,c,Nf,o),SE(n,c);else if(HR(f,n,i,o,c))c.stopPropagation();else if(SE(n,c),i&4&&-1<FR.indexOf(n)){for(;f!==null;){var g=Er(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var v=ss(g.pendingLanes);if(v!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var D=1<<31-bt(v);T.entanglements[1]|=D,v&=~D}Ts(g),(ot&6)===0&&(uf=Qe()+500,wu(0))}}break;case 31:case 13:T=Ga(g,2),T!==null&&nr(T,g,2),hf(),sy(g,2)}if(g=ay(c),g===null&&Gg(n,i,c,Nf,o),g===f)break;f=g}f!==null&&c.stopPropagation()}else Gg(n,i,c,null,o)}}function ay(n){return n=Tr(n),oy(n)}var Nf=null;function oy(n){if(Nf=null,n=cs(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===31){if(n=m(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Nf=n,null}function IE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(le()){case Xt:return 2;case Nt:return 8;case zn:case vi:return 32;case Vc:return 268435456;default:return 32}default:return 32}}var ly=!1,Ki=null,$i=null,Yi=null,ku=new Map,Du=new Map,Wi=[],FR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function SE(n,i){switch(n){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":ku.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Du.delete(i.pointerId)}}function Pu(n,i,o,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},i!==null&&(i=Er(i),i!==null&&TE(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function HR(n,i,o,c,f){switch(i){case"focusin":return Ki=Pu(Ki,n,i,o,c,f),!0;case"dragenter":return $i=Pu($i,n,i,o,c,f),!0;case"mouseover":return Yi=Pu(Yi,n,i,o,c,f),!0;case"pointerover":var g=f.pointerId;return ku.set(g,Pu(ku.get(g)||null,n,i,o,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Du.set(g,Pu(Du.get(g)||null,n,i,o,c,f)),!0}return!1}function AE(n){var i=cs(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,Ur(n.priority,function(){wE(o)});return}}else if(i===31){if(i=m(o),i!==null){n.blockedOn=i,Ur(n.priority,function(){wE(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Rf(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=ay(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Qc=c,o.target.dispatchEvent(c),Qc=null}else return i=Er(o),i!==null&&TE(i),n.blockedOn=o,!1;i.shift()}return!0}function NE(n,i,o){Rf(n)&&o.delete(i)}function GR(){ly=!1,Ki!==null&&Rf(Ki)&&(Ki=null),$i!==null&&Rf($i)&&($i=null),Yi!==null&&Rf(Yi)&&(Yi=null),ku.forEach(NE),Du.forEach(NE)}function Cf(n,i){n.blockedOn===i&&(n.blockedOn=null,ly||(ly=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,GR)))}var kf=null;function RE(n){kf!==n&&(kf=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){kf===n&&(kf=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(oy(c||o)===null)continue;break}var g=Er(o);g!==null&&(n.splice(i,3),i-=3,ag(g,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function Cl(n){function i(D){return Cf(D,n)}Ki!==null&&Cf(Ki,n),$i!==null&&Cf($i,n),Yi!==null&&Cf(Yi,n),ku.forEach(i),Du.forEach(i);for(var o=0;o<Wi.length;o++){var c=Wi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Wi.length&&(o=Wi[0],o.blockedOn===null);)AE(o),o.blockedOn===null&&Wi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],g=o[c+1],v=f[fn]||null;if(typeof g=="function")v||RE(o);else if(v){var T=null;if(g&&g.hasAttribute("formAction")){if(f=g,v=g[fn]||null)T=v.formAction;else if(oy(f)!==null)continue}else T=v.action;typeof T=="function"?o[c+1]=T:(o.splice(c,3),c-=3),RE(o)}}}function CE(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function cy(n){this._internalRoot=n}Df.prototype.render=cy.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,c=gr();xE(o,c,n,i,null,null)},Df.prototype.unmount=cy.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;xE(n.current,2,null,n,null,null),hf(),i[os]=null}};function Df(n){this._internalRoot=n}Df.prototype.unstable_scheduleHydration=function(n){if(n){var i=dh();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Wi.length&&i!==0&&i<Wi[o].priority;o++);Wi.splice(o,0,n),o===0&&AE(n)}};var kE=e.version;if(kE!=="19.2.3")throw Error(r(527,kE,"19.2.3"));ue.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(i),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var QR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pf.isDisabled&&Pf.supportsFiber)try{xe=Pf.inject(QR),Pe=Pf}catch{}}return Ou.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,c="",f=Lb,g=Ub,v=zb;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=vE(n,1,!1,null,null,o,c,null,f,g,v,CE),n[os]=i.current,Hg(n),new cy(i)},Ou.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var c=!1,f="",g=Lb,v=Ub,T=zb,D=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),i=vE(n,1,!0,i,o??null,c,f,D,g,v,T,CE),i.context=bE(null),o=i.current,c=gr(),c=Pa(c),f=Oi(c),f.callback=null,ji(o,f,c),o=c,i.current.lanes=o,ka(i,o),Ts(i),n[os]=i.current,Hg(n),new Df(i)},Ou.version="19.2.3",Ou}var qE;function tC(){if(qE)return hy.exports;qE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),hy.exports=eC(),hy.exports}var nC=tC();const rC=S0(nC);const sC=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iC=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),BE=s=>{const e=iC(s);return e.charAt(0).toUpperCase()+e.slice(1)},eI=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),aC=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var oC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lC=Vn.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:u,...m},h)=>Vn.createElement("svg",{ref:h,...oC,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:eI("lucide",a),...!l&&!aC(m)&&{"aria-hidden":"true"},...m},[...u.map(([y,b])=>Vn.createElement(y,b)),...Array.isArray(l)?l:[l]]));const Rn=(s,e)=>{const t=Vn.forwardRef(({className:r,...a},l)=>Vn.createElement(lC,{ref:l,iconNode:e,className:eI(`lucide-${sC(BE(s))}`,`lucide-${s}`,r),...a}));return t.displayName=BE(s),t};const cC=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],ed=Rn("box",cC);const uC=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],dC=Rn("calculator",uC);const hC=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],tI=Rn("copy",hC);const fC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],mC=Rn("download",fC);const pC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jy=Rn("eye",pC);const gC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],My=Rn("file-text",gC);const yC=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],_C=Rn("monitor",yC);const vC=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],bC=Rn("moon",vC);const xC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mo=Rn("plus",xC);const EC=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Bf=Rn("printer",EC);const TC=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ly=Rn("refresh-cw",TC);const wC=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],IC=Rn("save",wC);const SC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],AC=Rn("settings",SC);const NC=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Hl=Rn("square-pen",NC);const RC=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],CC=Rn("sun",RC);const kC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vo=Rn("trash-2",kC);const DC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nI=Rn("x",DC),PC=()=>{};var FE={};const rI=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},VC=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],u=s[t++],m=s[t++],h=((a&7)<<18|(l&63)<<12|(u&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const l=s[t++],u=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},sI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],u=a+1<s.length,m=u?s[a+1]:0,h=a+2<s.length,y=h?s[a+2]:0,b=l>>2,E=(l&3)<<4|m>>4;let w=(m&15)<<2|y>>6,S=y&63;h||(S=64,u||(w=64)),r.push(t[b],t[E],t[w],t[S])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(rI(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):VC(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],m=a<s.length?t[s.charAt(a)]:0;++a;const y=a<s.length?t[s.charAt(a)]:64;++a;const E=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||m==null||y==null||E==null)throw new OC;const w=l<<2|m>>4;if(r.push(w),y!==64){const S=m<<4&240|y>>2;if(r.push(S),E!==64){const q=y<<6&192|E;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class OC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jC=function(s){const e=rI(s);return sI.encodeByteArray(e,!0)},sm=function(s){return jC(s).replace(/\./g,"")},N0=function(s){try{return sI.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function im(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!MC(t)||(s[t]=im(s[t],e[t]));return s}function MC(s){return s!=="__proto__"}function R0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const LC=()=>R0().__FIREBASE_DEFAULTS__,UC=()=>{if(typeof process>"u"||typeof FE>"u")return;const s=FE.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},zC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&N0(s[1]);return e&&JSON.parse(e)},C0=()=>{try{return PC()||LC()||UC()||zC()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},k0=()=>C0()?.config,qC=s=>C0()?.[`_${s}`];class BC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function xc(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iI(s){return(await fetch(s,{credentials:"include"})).ok}function FC(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[sm(JSON.stringify(t)),sm(JSON.stringify(u)),""].join(".")}const td={};function HC(){const s={prod:[],emulator:[]};for(const e of Object.keys(td))td[e]?s.emulator.push(e):s.prod.push(e);return s}function GC(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let HE=!1;function aI(s,e){if(typeof window>"u"||typeof document>"u"||!xc(window.location.host)||td[s]===e||td[s]||HE)return;td[s]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",l=HC().prod.length>0;function u(){const w=document.getElementById(r);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{HE=!0,u()},w}function b(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=GC(r),S=t("text"),q=document.getElementById(S)||document.createElement("span"),Y=t("learnmore"),te=document.getElementById(Y)||document.createElement("a"),R=t("preprendIcon"),Z=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const ae=w.element;m(ae),b(te,Y);const fe=y();h(Z,R),ae.append(Z,q,te,fe),document.body.appendChild(ae)}l?(q.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function Cm(){const s=C0()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KC(){return typeof window<"u"||oI()}function oI(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function $C(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lI(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function D0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cI(){const s=Ot();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function uI(){return!Cm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dI(){return!Cm()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function yd(){try{return typeof indexedDB=="object"}catch{return!1}}function YC(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const WC="FirebaseError";class Gn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=WC,Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lo.prototype.create)}}class Lo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?XC(l,r):"Error",m=`${this.serviceName}: ${u} (${a}).`;return new Gn(a,m,r)}}function XC(s,e){return s.replace(JC,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const JC=/\{\$([^}]+)}/g;function GE(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function ZC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ha(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],u=e[a];if(QE(l)&&QE(u)){if(!ha(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function QE(s){return s!==null&&typeof s=="object"}function Ec(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Qu(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function hI(s,e){const t=new e2(s,e);return t.subscribe.bind(t)}class e2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");t2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=gy),a.error===void 0&&(a.error=gy),a.complete===void 0&&(a.complete=gy);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t2(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function gy(){}function ke(s){return s&&s._delegate?s._delegate:s}class js{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const io="[DEFAULT]";class n2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new BC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s2(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&u.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:r2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r2(s){return s===io?void 0:s}function s2(s){return s.instantiationMode==="EAGER"}class fI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new n2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const P0=[];var We;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(We||(We={}));const mI={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},i2=We.INFO,a2={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},o2=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=a2[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class km{constructor(e){this.name=e,this._logLevel=i2,this._logHandler=o2,this._userLogHandler=null,P0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}function l2(s){P0.forEach(e=>{e.setLogLevel(s)})}function c2(s,e){for(const t of P0){let r=null;e&&e.level&&(r=mI[e.level]),s===null?t.userLogHandler=null:t.userLogHandler=(a,l,...u)=>{const m=u.map(h=>{if(h==null)return null;if(typeof h=="string")return h;if(typeof h=="number"||typeof h=="boolean")return h.toString();if(h instanceof Error)return h.message;try{return JSON.stringify(h)}catch{return null}}).filter(h=>h).join(" ");l>=(r??a.logLevel)&&s({level:We[l].toLowerCase(),message:m,args:u,type:a.name})}}}const u2=(s,e)=>e.some(t=>s instanceof t);let KE,$E;function d2(){return KE||(KE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h2(){return $E||($E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pI=new WeakMap,Uy=new WeakMap,gI=new WeakMap,yy=new WeakMap,V0=new WeakMap;function f2(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",u)},l=()=>{t(oa(s.result)),a()},u=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&pI.set(t,s)}).catch(()=>{}),V0.set(e,s),e}function m2(s){if(Uy.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",u),s.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",u),s.addEventListener("abort",u)});Uy.set(s,e)}let zy={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Uy.get(s);if(e==="objectStoreNames")return s.objectStoreNames||gI.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return oa(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function p2(s){zy=s(zy)}function g2(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(_y(this),e,...t);return gI.set(r,e.sort?e.sort():[e]),oa(r)}:h2().includes(s)?function(...e){return s.apply(_y(this),e),oa(pI.get(this))}:function(...e){return oa(s.apply(_y(this),e))}}function y2(s){return typeof s=="function"?g2(s):(s instanceof IDBTransaction&&m2(s),u2(s,d2())?new Proxy(s,zy):s)}function oa(s){if(s instanceof IDBRequest)return f2(s);if(yy.has(s))return yy.get(s);const e=y2(s);return e!==s&&(yy.set(s,e),V0.set(e,s)),e}const _y=s=>V0.get(s);function _2(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(s,e),m=oa(u);return r&&u.addEventListener("upgradeneeded",h=>{r(oa(u.result),h.oldVersion,h.newVersion,oa(u.transaction),h)}),t&&u.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),m.then(h=>{l&&h.addEventListener("close",()=>l()),a&&h.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const v2=["get","getKey","getAll","getAllKeys","count"],b2=["put","add","delete","clear"],vy=new Map;function YE(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(vy.get(e))return vy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=b2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||v2.includes(t)))return;const l=async function(u,...m){const h=this.transaction(u,a?"readwrite":"readonly");let y=h.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),a&&h.done]))[0]};return vy.set(e,l),l}p2(s=>({...s,get:(e,t,r)=>YE(e,t)||s.get(e,t,r),has:(e,t)=>!!YE(e,t)||s.has(e,t)}));class x2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(E2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function E2(s){return s.getComponent()?.type==="VERSION"}const am="@firebase/app",qy="0.14.7";const ci=new km("@firebase/app"),T2="@firebase/app-compat",w2="@firebase/analytics-compat",I2="@firebase/analytics",S2="@firebase/app-check-compat",A2="@firebase/app-check",N2="@firebase/auth",R2="@firebase/auth-compat",C2="@firebase/database",k2="@firebase/data-connect",D2="@firebase/database-compat",P2="@firebase/functions",V2="@firebase/functions-compat",O2="@firebase/installations",j2="@firebase/installations-compat",M2="@firebase/messaging",L2="@firebase/messaging-compat",U2="@firebase/performance",z2="@firebase/performance-compat",q2="@firebase/remote-config",B2="@firebase/remote-config-compat",F2="@firebase/storage",H2="@firebase/storage-compat",G2="@firebase/firestore",Q2="@firebase/ai",K2="@firebase/firestore-compat",$2="firebase",Y2="12.8.0";const fa="[DEFAULT]",W2={[am]:"fire-core",[T2]:"fire-core-compat",[I2]:"fire-analytics",[w2]:"fire-analytics-compat",[A2]:"fire-app-check",[S2]:"fire-app-check-compat",[N2]:"fire-auth",[R2]:"fire-auth-compat",[C2]:"fire-rtdb",[k2]:"fire-data-connect",[D2]:"fire-rtdb-compat",[P2]:"fire-fn",[V2]:"fire-fn-compat",[O2]:"fire-iid",[j2]:"fire-iid-compat",[M2]:"fire-fcm",[L2]:"fire-fcm-compat",[U2]:"fire-perf",[z2]:"fire-perf-compat",[q2]:"fire-rc",[B2]:"fire-rc-compat",[F2]:"fire-gcs",[H2]:"fire-gcs-compat",[G2]:"fire-fst",[K2]:"fire-fst-compat",[Q2]:"fire-vertex","fire-js":"fire-js",[$2]:"fire-js-all"};const ma=new Map,Jl=new Map,Zl=new Map;function _d(s,e){try{s.container.addComponent(e)}catch(t){ci.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function yI(s,e){s.container.addOrOverwriteComponent(e)}function pa(s){const e=s.name;if(Zl.has(e))return ci.debug(`There were multiple attempts to register component ${e}.`),!1;Zl.set(e,s);for(const t of ma.values())_d(t,s);for(const t of Jl.values())_d(t,s);return!0}function _I(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function X2(s,e,t=fa){_I(s,e).clearInstance(t)}function O0(s){return s.options!==void 0}function vI(s){return O0(s)?!1:"authIdToken"in s||"appCheckToken"in s||"releaseOnDeref"in s||"automaticDataCollectionEnabled"in s}function Dt(s){return s==null?!1:s.settings!==void 0}function J2(){Zl.clear()}const Z2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new Lo("app","Firebase",Z2);let bI=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}};function WE(s,e){const t=N0(s.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class ek extends bI{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,u={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,u,a);else{const m=e;super(m.options,u,a)}this._serverConfig={automaticDataCollectionEnabled:l,...t},this._serverConfig.authIdToken&&WE(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&WE(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Jr(am,qy,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){M0(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw br.create("server-app-deleted")}}const Ta=Y2;function j0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:fa,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw br.create("bad-app-name",{appName:String(a)});if(t||(t=k0()),!t)throw br.create("no-options");const l=ma.get(a);if(l){if(ha(t,l.options)&&ha(r,l.config))return l;throw br.create("duplicate-app",{appName:a})}const u=new fI(a);for(const h of Zl.values())u.addComponent(h);const m=new bI(t,r,u);return ma.set(a,m),m}function tk(s,e={}){if(KC()&&!oI())throw br.create("invalid-server-app-environment");let t,r=e||{};if(s&&(O0(s)?t=s.options:vI(s)?r=s:t=s),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=k0()),!t)throw br.create("no-options");const a={...r,...t};a.releaseOnDeref!==void 0&&delete a.releaseOnDeref;const l=b=>[...b].reduce((E,w)=>Math.imul(31,E)+w.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw br.create("finalization-registry-not-supported",{});const u=""+l(JSON.stringify(a)),m=Jl.get(u);if(m)return m.incRefCount(r.releaseOnDeref),m;const h=new fI(u);for(const b of Zl.values())h.addComponent(b);const y=new ek(t,r,u,h);return Jl.set(u,y),y}function nk(s=fa){const e=ma.get(s);if(!e&&s===fa&&k0())return j0();if(!e)throw br.create("no-app",{appName:s});return e}function rk(){return Array.from(ma.values())}async function M0(s){let e=!1;const t=s.name;ma.has(t)?(e=!0,ma.delete(t)):Jl.has(t)&&s.decRefCount()<=0&&(Jl.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function Jr(s,e,t){let r=W2[s]??s;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ci.warn(u.join(" "));return}pa(new js(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function xI(s,e){if(s!==null&&typeof s!="function")throw br.create("invalid-log-argument");c2(s,e)}function EI(s){l2(s)}const sk="firebase-heartbeat-database",ik=1,vd="firebase-heartbeat-store";let by=null;function TI(){return by||(by=_2(sk,ik,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(vd)}catch(t){console.warn(t)}}}}).catch(s=>{throw br.create("idb-open",{originalErrorMessage:s.message})})),by}async function ak(s){try{const t=(await TI()).transaction(vd),r=await t.objectStore(vd).get(wI(s));return await t.done,r}catch(e){if(e instanceof Gn)ci.warn(e.message);else{const t=br.create("idb-get",{originalErrorMessage:e?.message});ci.warn(t.message)}}}async function XE(s,e){try{const r=(await TI()).transaction(vd,"readwrite");await r.objectStore(vd).put(e,wI(s)),await r.done}catch(t){if(t instanceof Gn)ci.warn(t.message);else{const r=br.create("idb-set",{originalErrorMessage:t?.message});ci.warn(r.message)}}}function wI(s){return`${s.name}!${s.options.appId}`}const ok=1024,lk=30;class ck{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dk(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=JE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>lk){const a=hk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ci.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=JE(),{heartbeatsToSend:t,unsentEntries:r}=uk(this._heartbeatsCache.heartbeats),a=sm(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return ci.warn(e),""}}}function JE(){return new Date().toISOString().substring(0,10)}function uk(s,e=ok){const t=[];let r=s.slice();for(const a of s){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),ZE(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),ZE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class dk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yd()?YC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ak(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return XE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return XE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ZE(s){return sm(JSON.stringify({version:2,heartbeats:s})).length}function hk(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function fk(s){pa(new js("platform-logger",e=>new x2(e),"PRIVATE")),pa(new js("heartbeat",e=>new ck(e),"PRIVATE")),Jr(am,qy,s),Jr(am,qy,"esm2020"),Jr("fire-js","")}fk("");const mk=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Gn,SDK_VERSION:Ta,_DEFAULT_ENTRY_NAME:fa,_addComponent:_d,_addOrOverwriteComponent:yI,_apps:ma,_clearComponents:J2,_components:Zl,_getProvider:_I,_isFirebaseApp:O0,_isFirebaseServerApp:Dt,_isFirebaseServerAppSettings:vI,_registerComponent:pa,_removeServiceInstance:X2,_serverApps:Jl,deleteApp:M0,getApp:nk,getApps:rk,initializeApp:j0,initializeServerApp:tk,onLog:xI,registerVersion:Jr,setLogLevel:EI},Symbol.toStringTag,{value:"Module"}));class pk{constructor(e,t){this._delegate=e,this.firebase=t,_d(e,new js("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),M0(this._delegate)))}_getService(e,t=fa){this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&r.getComponent()?.instantiationMode==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=fa){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){_d(this._delegate,e)}_addOrOverwriteComponent(e){yI(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const gk={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},eT=new Lo("app-compat","Firebase",gk);function yk(s){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:Jr,setLogLevel:EI,onLog:xI,apps:null,SDK_VERSION:Ta,INTERNAL:{registerComponent:m,removeApp:r,useAsService:h,modularAPIs:mk}};t.default=t,Object.defineProperty(t,"apps",{get:u});function r(y){delete e[y]}function a(y){if(y=y||fa,!GE(e,y))throw eT.create("no-app",{appName:y});return e[y]}a.App=s;function l(y,b={}){const E=j0(y,b);if(GE(e,E.name))return e[E.name];const w=new s(E,t);return e[E.name]=w,w}function u(){return Object.keys(e).map(y=>e[y])}function m(y){const b=y.name,E=b.replace("-compat","");if(pa(y)&&y.type==="PUBLIC"){const w=(S=a())=>{if(typeof S[E]!="function")throw eT.create("invalid-app-argument",{appName:b});return S[E]()};y.serviceProps!==void 0&&im(w,y.serviceProps),t[E]=w,s.prototype[E]=function(...S){return this._getService.bind(this,b).apply(this,y.multipleInstances?S:[])}}return y.type==="PUBLIC"?t[E]:null}function h(y,b){return b==="serverAuth"?null:b}return t}function II(){const s=yk(pk);s.INTERNAL={...s.INTERNAL,createFirebaseNamespace:II,extendNamespace:e,createSubscribe:hI,ErrorFactory:Lo,deepExtend:im};function e(t){im(s,t)}return s}const _k=II();const tT=new km("@firebase/app-compat"),vk="@firebase/app-compat",bk="0.5.7";function xk(s){Jr(vk,bk,s)}try{const s=R0();if(s.firebase!==void 0){tT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=s.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&tT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Ps=_k;xk();var Ek="firebase",Tk="12.8.0";Ps.registerVersion(Ek,Tk,"app-compat");const ju={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},kl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function wk(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function SI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ik=wk,Sk=SI,AI=new Lo("auth","Firebase",SI());const om=new km("@firebase/auth");function Ak(s,...e){om.logLevel<=We.WARN&&om.warn(`Auth (${Ta}): ${s}`,...e)}function Ff(s,...e){om.logLevel<=We.ERROR&&om.error(`Auth (${Ta}): ${s}`,...e)}function Nn(s,...e){throw U0(s,...e)}function dn(s,...e){return U0(s,...e)}function L0(s,e,t){const r={...Sk(),[e]:t};return new Lo("auth","Firebase",r).create(e,{appName:s.name})}function _n(s){return L0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tc(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Nn(s,"argument-error"),L0(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function U0(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return AI.create(s,...e)}function de(s,e,...t){if(!s)throw U0(e,...t)}function Cs(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Ff(e),new Error(e)}function ns(s,e){s||Cs(e)}function bd(){return typeof self<"u"&&self.location?.href||""}function z0(){return nT()==="http:"||nT()==="https:"}function nT(){return typeof self<"u"&&self.location?.protocol||null}function Nk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z0()||lI()||"connection"in navigator)?navigator.onLine:!0}function Rk(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class zd{constructor(e,t){this.shortDelay=e,this.longDelay=t,ns(t>e,"Short delay should be less than long delay!"),this.isMobile=QC()||D0()}get(){return Nk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function q0(s,e){ns(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class NI{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ck={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const kk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Dk=new zd(3e4,6e4);function qt(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Bt(s,e,t,r,a={}){return RI(s,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const m=Ec({key:s.config.apiKey,...u}).slice(1),h=await s._getAdditionalHeaders();h["Content-Type"]="application/json",s.languageCode&&(h["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:h,...l};return $C()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&xc(s.emulatorConfig.host)&&(y.credentials="include"),NI.fetch()(await CI(s,s.config.apiHost,t,m),y)})}async function RI(s,e,t){s._canInitEmulator=!1;const r={...Ck,...e};try{const a=new Vk(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Ku(s,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const m=l.ok?u.errorMessage:u.error.message,[h,y]=m.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ku(s,"credential-already-in-use",u);if(h==="EMAIL_EXISTS")throw Ku(s,"email-already-in-use",u);if(h==="USER_DISABLED")throw Ku(s,"user-disabled",u);const b=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw L0(s,b,y);Nn(s,b)}}catch(a){if(a instanceof Gn)throw a;Nn(s,"network-request-failed",{message:String(a)})}}async function fi(s,e,t,r,a={}){const l=await Bt(s,e,t,r,a);return"mfaPendingCredential"in l&&Nn(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function CI(s,e,t,r){const a=`${e}${t}?${r}`,l=s,u=l.config.emulator?q0(s.config,a):`${s.config.apiScheme}://${a}`;return kk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function Pk(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),Dk.get())})}}function Ku(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=dn(s,e,r);return a.customData._tokenResponse=t,a}function rT(s){return s!==void 0&&s.getResponse!==void 0}function sT(s){return s!==void 0&&s.enterprise!==void 0}class kI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Pk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ok(s){return(await Bt(s,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function DI(s,e){return Bt(s,"GET","/v2/recaptchaConfig",qt(s,e))}async function jk(s,e){return Bt(s,"POST","/v1/accounts:delete",e)}async function Mk(s,e){return Bt(s,"POST","/v1/accounts:update",e)}async function lm(s,e){return Bt(s,"POST","/v1/accounts:lookup",e)}function nd(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Lk(s,e=!1){const t=ke(s),r=await t.getIdToken(e),a=Dm(r);de(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:r,authTime:nd(xy(a.auth_time)),issuedAtTime:nd(xy(a.iat)),expirationTime:nd(xy(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function xy(s){return Number(s)*1e3}function Dm(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return Ff("JWT malformed, contained fewer than 3 sections"),null;try{const a=N0(t);return a?JSON.parse(a):(Ff("Failed to decode base64 JWT payload"),null)}catch(a){return Ff("Caught error parsing JWT payload as JSON",a?.toString()),null}}function iT(s){const e=Dm(s);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ui(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Gn&&Uk(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function Uk({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class zk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class By{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nd(this.lastLoginAt),this.creationTime=nd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xd(s){const e=s.auth,t=await s.getIdToken(),r=await ui(s,lm(e,{idToken:t}));de(r?.users.length,e,"internal-error");const a=r.users[0];s._notifyReloadListener(a);const l=a.providerUserInfo?.length?PI(a.providerUserInfo):[],u=Bk(s.providerData,l),m=s.isAnonymous,h=!(s.email&&a.passwordHash)&&!u?.length,y=m?h:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new By(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function qk(s){const e=ke(s);await xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Bk(s,e){return[...s.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function PI(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Fk(s,e){const t=await RI(s,{},async()=>{const r=Ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,u=await CI(s,a,"/v1/token",`key=${l}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:m,body:r};return s.emulatorConfig&&xc(s.emulatorConfig.host)&&(h.credentials="include"),NI.fetch()(u,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Hk(s,e){return Bt(s,"POST","/v2/accounts:revokeToken",qt(s,e))}class Gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){de(e.length!==0,"internal-error");const t=iT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await Fk(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new Gl;return r&&(de(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(de(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(de(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gl,this.toJSON())}_performRefresh(){return Cs("not implemented")}}function Ji(s,e){de(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Wr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new zk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new By(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ui(this,this.stsTokenManager.getToken(this.auth,e));return de(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Lk(this,e)}reload(){return qk(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dt(this.auth.app))return Promise.reject(_n(this.auth));const e=await this.getIdToken();return await ui(this,jk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,h=t._redirectEventId??void 0,y=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:E,emailVerified:w,isAnonymous:S,providerData:q,stsTokenManager:Y}=t;de(E&&Y,e,"internal-error");const te=Gl.fromJSON(this.name,Y);de(typeof E=="string",e,"internal-error"),Ji(r,e.name),Ji(a,e.name),de(typeof w=="boolean",e,"internal-error"),de(typeof S=="boolean",e,"internal-error"),Ji(l,e.name),Ji(u,e.name),Ji(m,e.name),Ji(h,e.name),Ji(y,e.name),Ji(b,e.name);const R=new Wr({uid:E,auth:e,email:a,emailVerified:w,displayName:r,isAnonymous:S,photoURL:u,phoneNumber:l,tenantId:m,stsTokenManager:te,createdAt:y,lastLoginAt:b});return q&&Array.isArray(q)&&(R.providerData=q.map(Z=>({...Z}))),h&&(R._redirectEventId=h),R}static async _fromIdTokenResponse(e,t,r=!1){const a=new Gl;a.updateFromServerResponse(t);const l=new Wr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await xd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];de(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?PI(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,m=new Gl;m.updateFromIdToken(r);const h=new Wr({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new By(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(h,y),h}}const aT=new Map;function vr(s){ns(s instanceof Function,"Expected a class definition");let e=aT.get(s);return e?(ns(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,aT.set(s,e),e)}class VI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VI.type="NONE";const ec=VI;function bo(s,e,t){return`firebase:${s}:${e}:${t}`}class Ql{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=bo(this.userKey,a.apiKey,l),this.fullPersistenceKey=bo("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await lm(this.auth,{idToken:e}).catch(()=>{});return t?Wr._fromGetAccountInfoResponse(this.auth,t,e):null}return Wr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ql(vr(ec),e,r);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||vr(ec);const u=bo(r,e.config.apiKey,e.name);let m=null;for(const y of t)try{const b=await y._get(u);if(b){let E;if(typeof b=="string"){const w=await lm(e,{idToken:b}).catch(()=>{});if(!w)break;E=await Wr._fromGetAccountInfoResponse(e,w,b)}else E=Wr._fromJSON(e,b);y!==l&&(m=E),l=y;break}}catch{}const h=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!h.length?new Ql(l,e,r):(l=h[0],m&&await l._set(u,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Ql(l,e,r))}}function oT(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UI(e))return"Blackberry";if(zI(e))return"Webos";if(jI(e))return"Safari";if((e.includes("chrome/")||MI(e))&&!e.includes("edge/"))return"Chrome";if(qd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function OI(s=Ot()){return/firefox\//i.test(s)}function jI(s=Ot()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MI(s=Ot()){return/crios\//i.test(s)}function LI(s=Ot()){return/iemobile/i.test(s)}function qd(s=Ot()){return/android/i.test(s)}function UI(s=Ot()){return/blackberry/i.test(s)}function zI(s=Ot()){return/webos/i.test(s)}function Bd(s=Ot()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Gk(s=Ot()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(s)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(s)}function Qk(s=Ot()){return Bd(s)&&!!window.navigator?.standalone}function Kk(){return cI()&&document.documentMode===10}function qI(s=Ot()){return Bd(s)||qd(s)||zI(s)||UI(s)||/windows phone/i.test(s)||LI(s)}function BI(s,e=[]){let t;switch(s){case"Browser":t=oT(Ot());break;case"Worker":t=`${oT(Ot())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ta}/${r}`}class $k{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,m)=>{try{const h=e(l);u(h)}catch(h){m(h)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Yk(s,e={}){return Bt(s,"GET","/v2/passwordPolicy",qt(s,e))}const Wk=6;class Xk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Wk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class Jk{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lT(this),this.idTokenSubscription=new lT(this),this.beforeStateQueue=new $k(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ql.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lm(this,{idToken:e}),r=await Wr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Dt(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===u)&&m?.user&&(r=m.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Rk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dt(this.app))return Promise.reject(_n(this));const t=e?ke(e):null;return t&&de(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dt(this.app)?Promise.reject(_n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dt(this.app)?Promise.reject(_n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Yk(this),t=new Xk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Hk(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vr(e)||this._popupRedirectResolver;de(t,this,"argument-error"),this.redirectPersistenceManager=await Ql.create(this,[vr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(m,this,"internal-error"),m.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,a);return()=>{u=!0,h()}}else{const h=e.addObserver(t);return()=>{u=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Dt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ak(`Error while retrieving App Check token: ${e.error}`),e?.token}}function jt(s){return ke(s)}class lT{constructor(e){this.auth=e,this.observer=null,this.addObserver=hI(t=>this.observer=t)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zk(s){Fd=s}function B0(s){return Fd.loadJS(s)}function eD(){return Fd.recaptchaV2Script}function tD(){return Fd.recaptchaEnterpriseScript}function nD(){return Fd.gapiScript}function FI(s){return`__${s}${Math.floor(Math.random()*1e6)}`}const rD=500,sD=6e4,Vf=1e12;class iD{constructor(e){this.auth=e,this.counter=Vf,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new lD(e,this.auth.name,t||{})),this.counter++,r}reset(e){const t=e||Vf;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||Vf;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||Vf;return this._widgets.get(t)?.execute(),""}}class aD{constructor(){this.enterprise=new oD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class oD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lD{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;de(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=cD(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},sD)},rD))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function cD(s){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<s;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const uD="recaptcha-enterprise",rd="NO_RECAPTCHA";class HI{constructor(e){this.type=uD,this.auth=jt(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,m)=>{DI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new kI(h);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(h=>{m(h)})})}function a(l,u,m){const h=window.grecaptcha;sT(h)?h.enterprise.ready(()=>{h.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(rd)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aD().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(m=>{if(!t&&sT(window.grecaptcha))a(m,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let h=tD();h.length!==0&&(h+=m),B0(h).then(()=>{a(m,l,u)}).catch(y=>{u(y)})}}).catch(m=>{u(m)})})}}async function Mu(s,e,t,r=!1,a=!1){const l=new HI(s);let u;if(a)u=rd;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const h=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const h=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:u}):Object.assign(m,{captchaResponse:u}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function la(s,e,t,r,a){if(a==="EMAIL_PASSWORD_PROVIDER")if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Mu(s,e,t,t==="getOobCode");return r(s,l)}else return r(s,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Mu(s,e,t,t==="getOobCode");return r(s,u)}else return Promise.reject(l)});else if(a==="PHONE_PROVIDER")if(s._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const l=await Mu(s,e,t);return r(s,l).catch(async u=>{if(s._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const m=await Mu(s,e,t,!1,!0);return r(s,m)}return Promise.reject(u)})}else{const l=await Mu(s,e,t,!1,!0);return r(s,l)}else return Promise.reject(a+" provider is not supported.")}async function dD(s){const e=jt(s),t=await DI(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new kI(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new HI(e).verify()}function hD(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(vr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function fD(s,e,t){const r=jt(s);de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!!t?.disableWarnings,l=GI(e),{host:u,port:m}=mD(e),h=m===null?"":`:${m}`,y={url:`${l}//${u}${h}/`},b=Object.freeze({host:u,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(ha(y,r.config.emulator)&&ha(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,xc(u)?(iI(`${l}//${u}${h}`),aI("Auth",!0)):a||pD()}function GI(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function mD(s){const e=GI(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:cT(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:cT(u)}}}function cT(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function pD(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class wc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cs("not implemented")}_getIdTokenResponse(e){return Cs("not implemented")}_linkToIdToken(e,t){return Cs("not implemented")}_getReauthenticationResolver(e){return Cs("not implemented")}}async function QI(s,e){return Bt(s,"POST","/v1/accounts:resetPassword",qt(s,e))}async function gD(s,e){return Bt(s,"POST","/v1/accounts:update",e)}async function yD(s,e){return Bt(s,"POST","/v1/accounts:signUp",e)}async function _D(s,e){return Bt(s,"POST","/v1/accounts:update",qt(s,e))}async function vD(s,e){return fi(s,"POST","/v1/accounts:signInWithPassword",qt(s,e))}async function Pm(s,e){return Bt(s,"POST","/v1/accounts:sendOobCode",qt(s,e))}async function bD(s,e){return Pm(s,e)}async function xD(s,e){return Pm(s,e)}async function ED(s,e){return Pm(s,e)}async function TD(s,e){return Pm(s,e)}async function wD(s,e){return fi(s,"POST","/v1/accounts:signInWithEmailLink",qt(s,e))}async function ID(s,e){return fi(s,"POST","/v1/accounts:signInWithEmailLink",qt(s,e))}class Ed extends wc{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Ed(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ed(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return la(e,t,"signInWithPassword",vD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return wD(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return la(e,r,"signUpPassword",yD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ID(e,{idToken:t,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function oi(s,e){return fi(s,"POST","/v1/accounts:signInWithIdp",qt(s,e))}const SD="http://localhost";class Ms extends wc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const u=new Ms(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return oi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,oi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,oi(e,t)}buildRequest(){const e={requestUri:SD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ec(t)}return e}}async function uT(s,e){return Bt(s,"POST","/v1/accounts:sendVerificationCode",qt(s,e))}async function AD(s,e){return fi(s,"POST","/v1/accounts:signInWithPhoneNumber",qt(s,e))}async function ND(s,e){const t=await fi(s,"POST","/v1/accounts:signInWithPhoneNumber",qt(s,e));if(t.temporaryProof)throw Ku(s,"account-exists-with-different-credential",t);return t}const RD={USER_NOT_FOUND:"user-not-found"};async function CD(s,e){const t={...e,operation:"REAUTH"};return fi(s,"POST","/v1/accounts:signInWithPhoneNumber",qt(s,t),RD)}class xo extends wc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new xo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new xo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return AD(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return ND(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return CD(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l}=e;return!r&&!t&&!a&&!l?null:new xo({verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l})}}function kD(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DD(s){const e=Fl(Qu(s)).link,t=e?Fl(Qu(e)).deep_link_id:null,r=Fl(Qu(s)).deep_link_id;return(r?Fl(Qu(r)).link:null)||r||t||e||s}class Vm{constructor(e){const t=Fl(Qu(e)),r=t.apiKey??null,a=t.oobCode??null,l=kD(t.mode??null);de(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=DD(e);try{return new Vm(t)}catch{return null}}}class wa{constructor(){this.providerId=wa.PROVIDER_ID}static credential(e,t){return Ed._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Vm.parseLink(t);return de(r,"argument-error"),Ed._fromEmailAndCode(e,r.code,r.tenantId)}}wa.PROVIDER_ID="password";wa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class mi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ic extends mi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Kl extends Ic{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return de("providerId"in t&&"signInMethod"in t,"argument-error"),Ms._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return de(e.idToken||e.accessToken,"argument-error"),Ms._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Kl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Kl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:a,pendingToken:l,nonce:u,providerId:m}=e;if(!r&&!a&&!t&&!l||!m)return null;try{return new Kl(m)._credential({idToken:t,accessToken:r,nonce:u,pendingToken:l})}catch{return null}}}class Ss extends Ic{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ss.PROVIDER_ID="facebook.com";class As extends Ic{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ms._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return As.credential(t,r)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";class Ns extends Ic{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ns.credential(e.oauthAccessToken)}catch{return null}}}Ns.GITHUB_SIGN_IN_METHOD="github.com";Ns.PROVIDER_ID="github.com";const PD="http://localhost";class tc extends wc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return oi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,oi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,oi(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,pendingToken:l}=t;return!r||!a||!l||r!==a?null:new tc(r,l)}static _create(e,t){return new tc(e,t)}buildRequest(){return{requestUri:PD,returnSecureToken:!0,pendingToken:this.pendingToken}}}const VD="saml.";class cm extends mi{constructor(e){de(e.startsWith(VD),"argument-error"),super(e)}static credentialFromResult(e){return cm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return cm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=tc.fromJSON(e);return de(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return tc._create(r,t)}catch{return null}}}class Rs extends Ic{constructor(){super("twitter.com")}static credential(e,t){return Ms._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Rs.credential(t,r)}catch{return null}}}Rs.TWITTER_SIGN_IN_METHOD="twitter.com";Rs.PROVIDER_ID="twitter.com";async function KI(s,e){return fi(s,"POST","/v1/accounts:signUp",qt(s,e))}class jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Wr._fromIdTokenResponse(e,r,a),u=dT(r);return new jr({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=dT(r);return new jr({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function dT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function OD(s){if(Dt(s.app))return Promise.reject(_n(s));const e=jt(s);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new jr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await KI(e,{returnSecureToken:!0}),r=await jr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class um extends Gn{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,um.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new um(e,t,r,a)}}function $I(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?um._fromErrorAndOperation(s,l,e,r):l})}function YI(s){return new Set(s.map(({providerId:e})=>e).filter(e=>!!e))}async function jD(s,e){const t=ke(s);await Om(!0,t,e);const{providerUserInfo:r}=await Mk(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=YI(r||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function F0(s,e,t=!1){const r=await ui(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return jr._forOperation(s,"link",r)}async function Om(s,e,t){await xd(e);const r=YI(e.providerData),a=s===!1?"provider-already-linked":"no-such-provider";de(r.has(t)===s,e.auth,a)}async function WI(s,e,t=!1){const{auth:r}=s;if(Dt(r.app))return Promise.reject(_n(r));const a="reauthenticate";try{const l=await ui(s,$I(r,a,e,s),t);de(l.idToken,r,"internal-error");const u=Dm(l.idToken);de(u,r,"internal-error");const{sub:m}=u;return de(s.uid===m,r,"user-mismatch"),jr._forOperation(s,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Nn(r,"user-mismatch"),l}}async function XI(s,e,t=!1){if(Dt(s.app))return Promise.reject(_n(s));const r="signIn",a=await $I(s,r,e),l=await jr._fromIdTokenResponse(s,r,a);return t||await s._updateCurrentUser(l.user),l}async function jm(s,e){return XI(jt(s),e)}async function JI(s,e){const t=ke(s);return await Om(!1,t,e.providerId),F0(t,e)}async function ZI(s,e){return WI(ke(s),e)}async function MD(s,e){return fi(s,"POST","/v1/accounts:signInWithCustomToken",qt(s,e))}async function LD(s,e){if(Dt(s.app))return Promise.reject(_n(s));const t=jt(s),r=await MD(t,{token:e,returnSecureToken:!0}),a=await jr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(a.user),a}class Hd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?H0._fromServerResponse(e,t):"totpInfo"in t?G0._fromServerResponse(e,t):Nn(e,"internal-error")}}class H0 extends Hd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new H0(t)}}class G0 extends Hd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new G0(t)}}function Mm(s,e,t){de(t.url?.length>0,s,"invalid-continue-uri"),de(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,s,"invalid-dynamic-link-domain"),de(typeof t.linkDomain>"u"||t.linkDomain.length>0,s,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(de(t.iOS.bundleId.length>0,s,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(de(t.android.packageName.length>0,s,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function Q0(s){const e=jt(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UD(s,e,t){const r=jt(s),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Mm(r,a,t),await la(r,a,"getOobCode",xD,"EMAIL_PASSWORD_PROVIDER")}async function zD(s,e,t){await QI(ke(s),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Q0(s),r})}async function qD(s,e){await _D(ke(s),{oobCode:e})}async function eS(s,e){const t=ke(s),r=await QI(t,{oobCode:e}),a=r.requestType;switch(de(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":de(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":de(r.mfaInfo,t,"internal-error");default:de(r.email,t,"internal-error")}let l=null;return r.mfaInfo&&(l=Hd._fromServerResponse(jt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:l},operation:a}}async function BD(s,e){const{data:t}=await eS(ke(s),e);return t.email}async function FD(s,e,t){if(Dt(s.app))return Promise.reject(_n(s));const r=jt(s),u=await la(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KI,"EMAIL_PASSWORD_PROVIDER").catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Q0(s),h}),m=await jr._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(m.user),m}function HD(s,e,t){return Dt(s.app)?Promise.reject(_n(s)):jm(ke(s),wa.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Q0(s),r})}async function GD(s,e,t){const r=jt(s),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(u,m){de(m.handleCodeInApp,r,"argument-error"),m&&Mm(r,u,m)}l(a,t),await la(r,a,"getOobCode",ED,"EMAIL_PASSWORD_PROVIDER")}function QD(s,e){return Vm.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function KD(s,e,t){if(Dt(s.app))return Promise.reject(_n(s));const r=ke(s),a=wa.credentialWithLink(e,t||bd());return de(a._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),jm(r,a)}async function $D(s,e){return Bt(s,"POST","/v1/accounts:createAuthUri",qt(s,e))}async function YD(s,e){const t=z0()?bd():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:a}=await $D(ke(s),r);return a||[]}async function WD(s,e){const t=ke(s),a={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()};e&&Mm(t.auth,a,e);const{email:l}=await bD(t.auth,a);l!==s.email&&await s.reload()}async function XD(s,e,t){const r=ke(s),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await s.getIdToken(),newEmail:e};t&&Mm(r.auth,l,t);const{email:u}=await TD(r.auth,l);u!==s.email&&await s.reload()}async function JD(s,e){return Bt(s,"POST","/v1/accounts:update",e)}async function ZD(s,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=ke(s),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await ui(r,JD(r.auth,l));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const m=r.providerData.find(({providerId:h})=>h==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function eP(s,e){const t=ke(s);return Dt(t.auth.app)?Promise.reject(_n(t.auth)):tS(t,e,null)}function tP(s,e){return tS(ke(s),null,e)}async function tS(s,e,t){const{auth:r}=s,l={idToken:await s.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const u=await ui(s,gD(r,l));await s._updateTokensIfNecessary(u,!0)}function nP(s){if(!s)return null;const{providerId:e}=s,t=s.rawUserInfo?JSON.parse(s.rawUserInfo):{},r=s.isNewUser||s.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&s?.idToken){const a=Dm(s.idToken)?.firebase?.sign_in_provider;if(a){const l=a!=="anonymous"&&a!=="custom"?a:null;return new $l(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new rP(r,t);case"github.com":return new sP(r,t);case"google.com":return new iP(r,t);case"twitter.com":return new aP(r,t,s.screenName||null);case"custom":case"anonymous":return new $l(r,null);default:return new $l(r,e,t)}}class $l{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class nS extends $l{constructor(e,t,r,a){super(e,t,r),this.username=a}}class rP extends $l{constructor(e,t){super(e,"facebook.com",t)}}class sP extends nS{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}}class iP extends $l{constructor(e,t){super(e,"google.com",t)}}class aP extends nS{constructor(e,t,r){super(e,"twitter.com",t,r)}}function oP(s){const{user:e,_tokenResponse:t}=s;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:nP(t)}class po{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new po("enroll",e,t)}static _fromMfaPendingCredential(e){return new po("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return po._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return po._fromIdtoken(e.multiFactorSession.idToken)}return null}}class K0{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=jt(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(m=>Hd._fromServerResponse(r,m));de(a.mfaPendingCredential,r,"internal-error");const u=po._fromMfaPendingCredential(a.mfaPendingCredential);return new K0(u,l,async m=>{const h=await m._process(r,u);delete a.mfaInfo,delete a.mfaPendingCredential;const y={...a,idToken:h.idToken,refreshToken:h.refreshToken};switch(t.operationType){case"signIn":const b=await jr._fromIdTokenResponse(r,t.operationType,y);return await r._updateCurrentUser(b.user),b;case"reauthenticate":return de(t.user,r,"internal-error"),jr._forOperation(t.user,t.operationType,y);default:Nn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function lP(s,e){const t=ke(s),r=e;return de(e.customData.operationType,t,"argument-error"),de(r.customData._serverResponse?.mfaPendingCredential,t,"argument-error"),K0._fromError(t,r)}function hT(s,e){return Bt(s,"POST","/v2/accounts/mfaEnrollment:start",qt(s,e))}function cP(s,e){return Bt(s,"POST","/v2/accounts/mfaEnrollment:finalize",qt(s,e))}function uP(s,e){return Bt(s,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(s,e))}class $0{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Hd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new $0(e)}async getSession(){return po._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,a=await this.getSession(),l=await ui(this.user,r._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const a=await ui(this.user,uP(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const Ey=new WeakMap;function dP(s){const e=ke(s);return Ey.has(e)||Ey.set(e,$0._fromUser(e)),Ey.get(e)}const dm="__sak";class rS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dm,"1"),this.storage.removeItem(dm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hP=1e3,fP=10;class sS extends rS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,h)=>{this.notifyListeners(u,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);Kk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,fP):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},hP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sS.type="LOCAL";const Y0=sS;class iS extends rS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iS.type="SESSION";const wo=iS;function mP(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Lm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Lm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const m=Array.from(u).map(async y=>y(t.origin,l)),h=await mP(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lm.receivers=[];function Gd(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class pP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((m,h)=>{const y=Gd("",20);a.port1.start();const b=setTimeout(()=>{h(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(E){const w=E;if(w.data.eventId===y)switch(w.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(w.data.response);break;default:clearTimeout(b),clearTimeout(l),h(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function ln(){return window}function gP(s){ln().location.href=s}function W0(){return typeof ln().WorkerGlobalScope<"u"&&typeof ln().importScripts=="function"}async function yP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _P(){return navigator?.serviceWorker?.controller||null}function vP(){return W0()?self:null}const aS="firebaseLocalStorageDb",bP=1,hm="firebaseLocalStorage",oS="fbase_key";class Qd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Um(s,e){return s.transaction([hm],e?"readwrite":"readonly").objectStore(hm)}function xP(){const s=indexedDB.deleteDatabase(aS);return new Qd(s).toPromise()}function Fy(){const s=indexedDB.open(aS,bP);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(hm,{keyPath:oS})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(hm)?e(r):(r.close(),await xP(),e(await Fy()))})})}async function fT(s,e,t){const r=Um(s,!0).put({[oS]:e,value:t});return new Qd(r).toPromise()}async function EP(s,e){const t=Um(s,!1).get(e),r=await new Qd(t).toPromise();return r===void 0?null:r.value}function mT(s,e){const t=Um(s,!0).delete(e);return new Qd(t).toPromise()}const TP=800,wP=3;class lS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>wP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return W0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lm._getInstance(vP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yP(),!this.activeServiceWorker)return;this.sender=new pP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_P()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fy();return await fT(e,dm,"1"),await mT(e,dm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>fT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>EP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>mT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Um(a,!1).getAll();return new Qd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lS.type="LOCAL";const Td=lS;function pT(s,e){return Bt(s,"POST","/v2/accounts/mfaSignIn:start",qt(s,e))}function IP(s,e){return Bt(s,"POST","/v2/accounts/mfaSignIn:finalize",qt(s,e))}const Ty=FI("rcb"),SP=new zd(3e4,6e4);class AP{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ln().grecaptcha?.render}load(e,t=""){return de(NP(t),e,"argument-error"),this.shouldResolveImmediately(t)&&rT(ln().grecaptcha)?Promise.resolve(ln().grecaptcha):new Promise((r,a)=>{const l=ln().setTimeout(()=>{a(dn(e,"network-request-failed"))},SP.get());ln()[Ty]=()=>{ln().clearTimeout(l),delete ln()[Ty];const m=ln().grecaptcha;if(!m||!rT(m)){a(dn(e,"internal-error"));return}const h=m.render;m.render=(y,b)=>{const E=h(y,b);return this.counter++,E},this.hostLanguage=t,r(m)};const u=`${eD()}?${Ec({onload:Ty,render:"explicit",hl:t})}`;B0(u).catch(()=>{clearTimeout(l),a(dn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!ln().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function NP(s){return s.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(s)}class RP{async load(e){return new iD(e)}clearedOneInstance(){}}const sd="recaptcha",CP={theme:"light",type:"image"};let kP=class{constructor(e,t,r={...CP}){this.parameters=r,this.type=sd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jt(e),this.isInvisible=this.parameters.size==="invisible",de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;de(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new RP:new AP,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(a=>{const l=u=>{u&&(this.tokenChangeListeners.delete(l),a(u))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){de(!this.parameters.sitekey,this.auth,"argument-error"),de(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=ln()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){de(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){de(z0()&&!W0(),this.auth,"internal-error"),await DP(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Ok(this.auth);de(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return de(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function DP(){let s=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}s=()=>e(),window.addEventListener("load",s)}).catch(e=>{throw s&&window.removeEventListener("load",s),e})}class X0{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=xo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function PP(s,e,t){if(Dt(s.app))return Promise.reject(_n(s));const r=jt(s),a=await zm(r,e,ke(t));return new X0(a,l=>jm(r,l))}async function VP(s,e,t){const r=ke(s);await Om(!1,r,"phone");const a=await zm(r.auth,e,ke(t));return new X0(a,l=>JI(r,l))}async function OP(s,e,t){const r=ke(s);if(Dt(r.auth.app))return Promise.reject(_n(r.auth));const a=await zm(r.auth,e,ke(t));return new X0(a,l=>ZI(r,l))}async function zm(s,e,t){if(!s._getRecaptchaConfig())try{await dD(s)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const a=r.session;if("phoneNumber"in r){de(a.type==="enroll",s,"internal-error");const l={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await la(s,l,"mfaSmsEnrollment",async(y,b)=>{if(b.phoneEnrollmentInfo.captchaResponse===rd){de(t?.type===sd,y,"argument-error");const E=await wy(y,b,t);return hT(y,E)}return hT(y,b)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneSessionInfo.sessionInfo}else{de(a.type==="signin",s,"internal-error");const l=r.multiFactorHint?.uid||r.multiFactorUid;de(l,s,"missing-multi-factor-info");const u={mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await la(s,u,"mfaSmsSignIn",async(b,E)=>{if(E.phoneSignInInfo.captchaResponse===rd){de(t?.type===sd,b,"argument-error");const w=await wy(b,E,t);return pT(b,w)}return pT(b,E)},"PHONE_PROVIDER").catch(b=>Promise.reject(b))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await la(s,a,"sendVerificationCode",async(h,y)=>{if(y.captchaResponse===rd){de(t?.type===sd,h,"argument-error");const b=await wy(h,y,t);return uT(h,b)}return uT(h,y)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{t?._reset()}}async function jP(s,e){const t=ke(s);if(Dt(t.auth.app))return Promise.reject(_n(t.auth));await F0(t,e)}async function wy(s,e,t){de(t.type===sd,s,"argument-error");const r=await t.verify();de(typeof r=="string",s,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.captchaResponse,m=a.phoneEnrollmentInfo.clientType,h=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:r,captchaResponse:u,clientType:m,recaptchaVersion:h}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,u=a.phoneSignInInfo.clientType,m=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:l,clientType:u,recaptchaVersion:m}}),a}else return Object.assign(a,{recaptchaToken:r}),a}let Io=class Hf{constructor(e){this.providerId=Hf.PROVIDER_ID,this.auth=jt(e)}verifyPhoneNumber(e,t){return zm(this.auth,e,ke(t))}static credential(e,t){return xo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Hf.credentialFromTaggedObject(t)}static credentialFromError(e){return Hf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?xo._fromTokenResponse(t,r):null}};Io.PROVIDER_ID="phone";Io.PHONE_SIGN_IN_METHOD="phone";function Uo(s,e){return e?vr(e):(de(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class J0 extends wc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return oi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return oi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function MP(s){return XI(s.auth,new J0(s),s.bypassAuthState)}function LP(s){const{auth:e,user:t}=s;return de(t,e,"internal-error"),WI(t,new J0(s),s.bypassAuthState)}async function UP(s){const{auth:e,user:t}=s;return de(t,e,"internal-error"),F0(t,new J0(s),s.bypassAuthState)}class cS{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:m}=e;if(u){this.reject(u);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(h))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MP;case"linkViaPopup":case"linkViaRedirect":return UP;case"reauthViaPopup":case"reauthViaRedirect":return LP;default:Nn(this.auth,"internal-error")}}resolve(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zP=new zd(2e3,1e4);async function qP(s,e,t){if(Dt(s.app))return Promise.reject(dn(s,"operation-not-supported-in-this-environment"));const r=jt(s);Tc(s,e,mi);const a=Uo(r,t);return new ii(r,"signInViaPopup",e,a).executeNotNull()}async function BP(s,e,t){const r=ke(s);if(Dt(r.auth.app))return Promise.reject(dn(r.auth,"operation-not-supported-in-this-environment"));Tc(r.auth,e,mi);const a=Uo(r.auth,t);return new ii(r.auth,"reauthViaPopup",e,a,r).executeNotNull()}async function FP(s,e,t){const r=ke(s);Tc(r.auth,e,mi);const a=Uo(r.auth,t);return new ii(r.auth,"linkViaPopup",e,a,r).executeNotNull()}class ii extends cS{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,ii.currentPopupAction&&ii.currentPopupAction.cancel(),ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){ns(this.filter.length===1,"Popup operations only handle one event");const e=Gd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zP.get())};e()}}ii.currentPopupAction=null;const HP="pendingRedirect",id=new Map;class GP extends cS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=id.get(this.auth._key());if(!e){try{const r=await QP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QP(s,e){const t=dS(e),r=uS(s);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}async function Z0(s,e){return uS(s)._set(dS(e),"true")}function KP(){id.clear()}function e_(s,e){id.set(s._key(),e)}function uS(s){return vr(s._redirectPersistence)}function dS(s){return bo(HP,s.config.apiKey,s.name)}function $P(s,e,t){return YP(s,e,t)}async function YP(s,e,t){if(Dt(s.app))return Promise.reject(_n(s));const r=jt(s);Tc(s,e,mi),await r._initializationPromise;const a=Uo(r,t);return await Z0(a,r),a._openRedirect(r,e,"signInViaRedirect")}function WP(s,e,t){return XP(s,e,t)}async function XP(s,e,t){const r=ke(s);if(Tc(r.auth,e,mi),Dt(r.auth.app))return Promise.reject(_n(r.auth));await r.auth._initializationPromise;const a=Uo(r.auth,t);await Z0(a,r.auth);const l=await hS(r);return a._openRedirect(r.auth,e,"reauthViaRedirect",l)}function JP(s,e,t){return ZP(s,e,t)}async function ZP(s,e,t){const r=ke(s);Tc(r.auth,e,mi),await r.auth._initializationPromise;const a=Uo(r.auth,t);await Om(!1,r,e.providerId),await Z0(a,r.auth);const l=await hS(r);return a._openRedirect(r.auth,e,"linkViaRedirect",l)}async function eV(s,e){return await jt(s)._initializationPromise,qm(s,e,!1)}async function qm(s,e,t=!1){if(Dt(s.app))return Promise.reject(_n(s));const r=jt(s),a=Uo(r,e),u=await new GP(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}async function hS(s){const e=Gd(`${s.uid}:::`);return s._redirectEventId=e,await s.auth._setRedirectUser(s),await s.auth._persistUserIfCurrent(s),e}const tV=600*1e3;class fS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!mS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(dn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tV&&this.cachedEventUids.clear(),this.cachedEventUids.has(gT(e))}saveEventToCache(e){this.cachedEventUids.add(gT(e)),this.lastProcessedEventTime=Date.now()}}function gT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function mS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function nV(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mS(s);default:return!1}}async function pS(s,e={}){return Bt(s,"GET","/v1/projects",e)}const rV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sV=/^https?/;async function iV(s){if(s.config.emulator)return;const{authorizedDomains:e}=await pS(s);for(const t of e)try{if(aV(t))return}catch{}Nn(s,"unauthorized-domain")}function aV(s){const e=bd(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!sV.test(t))return!1;if(rV.test(s))return r===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const oV=new zd(3e4,6e4);function yT(){const s=ln().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function lV(s){return new Promise((e,t)=>{function r(){yT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yT(),t(dn(s,"network-request-failed"))},timeout:oV.get()})}if(ln().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ln().gapi?.load)r();else{const a=FI("iframefcb");return ln()[a]=()=>{gapi.load?r():t(dn(s,"network-request-failed"))},B0(`${nD()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Gf=null,e})}let Gf=null;function cV(s){return Gf=Gf||lV(s),Gf}const uV=new zd(5e3,15e3),dV="__/auth/iframe",hV="emulator/auth/iframe",fV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pV(s){const e=s.config;de(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?q0(e,hV):`https://${s.config.authDomain}/${dV}`,r={apiKey:e.apiKey,appName:s.name,v:Ta},a=mV.get(s.config.apiHost);a&&(r.eid=a);const l=s._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Ec(r).slice(1)}`}async function gV(s){const e=await cV(s),t=ln().gapi;return de(t,s,"internal-error"),e.open({where:document.body,url:pV(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fV,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=dn(s,"network-request-failed"),m=ln().setTimeout(()=>{l(u)},uV.get());function h(){ln().clearTimeout(m),a(r)}r.ping(h).then(h,()=>{l(u)})}))}const yV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_V=500,vV=600,bV="_blank",xV="http://localhost";class _T{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EV(s,e,t,r=_V,a=vV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const h={...yV,width:r.toString(),height:a.toString(),top:l,left:u},y=Ot().toLowerCase();t&&(m=MI(y)?bV:t),OI(y)&&(e=e||xV,h.scrollbars="yes");const b=Object.entries(h).reduce((w,[S,q])=>`${w}${S}=${q},`,"");if(Qk(y)&&m!=="_self")return TV(e||"",m),new _T(null);const E=window.open(e||"",m,b);de(E,s,"popup-blocked");try{E.focus()}catch{}return new _T(E)}function TV(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const wV="__/auth/handler",IV="emulator/auth/handler",SV=encodeURIComponent("fac");async function Hy(s,e,t,r,a,l){de(s.config.authDomain,s,"auth-domain-config-required"),de(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:Ta,eventId:a};if(e instanceof mi){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",ZC(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries(l||{}))u[b]=E}if(e instanceof Ic){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(u.scopes=b.join(","))}s.tenantId&&(u.tid=s.tenantId);const m=u;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const h=await s._getAppCheckToken(),y=h?`#${SV}=${encodeURIComponent(h)}`:"";return`${AV(s)}?${Ec(m).slice(1)}${y}`}function AV({config:s}){return s.emulator?q0(s,IV):`https://${s.authDomain}/${wV}`}const Iy="webStorageSupport";class NV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wo,this._completeRedirectFn=qm,this._overrideRedirectResult=e_}async _openPopup(e,t,r,a){ns(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Hy(e,t,r,bd(),a);return EV(e,l,Gd())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Hy(e,t,r,bd(),a);return gP(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ns(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await gV(e),r=new fS(e);return t.register("authEvent",a=>(de(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Iy,{type:Iy},a=>{const l=a?.[0]?.[Iy];l!==void 0&&t(!!l),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qI()||jI()||Bd()}}const RV=NV;class CV{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Cs("unexpected MultiFactorSessionType")}}}class t_ extends CV{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new t_(e)}_finalizeEnroll(e,t,r){return cP(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return IP(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class gS{constructor(){}static assertion(e){return t_._fromCredential(e)}}gS.FACTOR_ID="phone";var vT="@firebase/auth",bT="1.12.0";class kV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function DV(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PV(s){pa(new js("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=r.options;de(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:u,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BI(s)},y=new Jk(r,a,l,h);return hD(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),pa(new js("auth-internal",e=>{const t=jt(e.getProvider("auth").getImmediate());return(r=>new kV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(vT,bT,DV(s)),Jr(vT,bT,"esm2020")}const VV=300;qC("authIdTokenMaxAge");function OV(){return document.getElementsByTagName("head")?.[0]??document}Zk({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=a=>{const l=dn("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",OV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PV("Browser");function So(){return window}const jV=2e3;async function MV(s,e,t){const{BuildInfo:r}=So();ns(e.sessionId,"AuthEvent did not contain a session ID");const a=await BV(e.sessionId),l={};return Bd()?l.ibi=r.packageName:qd()?l.apn=r.packageName:Nn(s,"operation-not-supported-in-this-environment"),r.displayName&&(l.appDisplayName=r.displayName),l.sessionId=a,Hy(s,t,e.type,void 0,e.eventId??void 0,l)}async function LV(s){const{BuildInfo:e}=So(),t={};Bd()?t.iosBundleId=e.packageName:qd()?t.androidPackageName=e.packageName:Nn(s,"operation-not-supported-in-this-environment"),await pS(s,t)}function UV(s){const{cordova:e}=So();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let a=null;r?e.plugins.browsertab.openUrl(s):a=e.InAppBrowser.open(s,Gk()?"_blank":"_system","location=yes"),t(a)})})}async function zV(s,e,t){const{cordova:r}=So();let a=()=>{};try{await new Promise((l,u)=>{let m=null;function h(){l();const E=r.plugins.browsertab?.close;typeof E=="function"&&E(),typeof t?.close=="function"&&t.close()}function y(){m||(m=window.setTimeout(()=>{u(dn(s,"redirect-cancelled-by-user"))},jV))}function b(){document?.visibilityState==="visible"&&y()}e.addPassiveListener(h),document.addEventListener("resume",y,!1),qd()&&document.addEventListener("visibilitychange",b,!1),a=()=>{e.removePassiveListener(h),document.removeEventListener("resume",y,!1),document.removeEventListener("visibilitychange",b,!1),m&&window.clearTimeout(m)}})}finally{a()}}function qV(s){const e=So();de(typeof e?.universalLinks?.subscribe=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),de(typeof e?.BuildInfo?.packageName<"u",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),de(typeof e?.cordova?.plugins?.browsertab?.openUrl=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de(typeof e?.cordova?.plugins?.browsertab?.isAvailable=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de(typeof e?.cordova?.InAppBrowser?.open=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function BV(s){const e=FV(s),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function FV(s){if(ns(/[0-9a-zA-Z]+/.test(s),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(s);const e=new ArrayBuffer(s.length),t=new Uint8Array(e);for(let r=0;r<s.length;r++)t[r]=s.charCodeAt(r);return t}const HV=20;class GV extends fS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function QV(s,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:YV(),postBody:null,tenantId:s.tenantId,error:dn(s,"no-auth-event")}}function KV(s,e){return Gy()._set(Qy(s),e)}async function xT(s){const e=await Gy()._get(Qy(s));return e&&await Gy()._remove(Qy(s)),e}function $V(s,e){const t=XV(e);if(t.includes("/__/auth/callback")){const r=Qf(t),l=(r.firebaseError?WV(decodeURIComponent(r.firebaseError)):null)?.code?.split("auth/")?.[1],u=l?dn(l):null;return u?{type:s.type,eventId:s.eventId,tenantId:s.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:s.type,eventId:s.eventId,tenantId:s.tenantId,sessionId:s.sessionId,urlResponse:t,postBody:null}}return null}function YV(){const s=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<HV;t++){const r=Math.floor(Math.random()*e.length);s.push(e.charAt(r))}return s.join("")}function Gy(){return vr(Y0)}function Qy(s){return bo("authEvent",s.config.apiKey,s.name)}function WV(s){try{return JSON.parse(s)}catch{return null}}function XV(s){const e=Qf(s),t=e.link?decodeURIComponent(e.link):void 0,r=Qf(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Qf(a).link||a||r||t||s}function Qf(s){if(!s?.includes("?"))return{};const[e,...t]=s.split("?");return Fl(t.join("?"))}const JV=500;class ZV{constructor(){this._redirectPersistence=wo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=qm,this._overrideRedirectResult=e_}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new GV(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Nn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,a){qV(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),KP(),await this._originValidation(e);const u=QV(e,r,a);await KV(e,u);const m=await MV(e,u,t),h=await UV(m);return zV(e,l,h)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LV(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:a,BuildInfo:l}=So(),u=setTimeout(async()=>{await xT(e),t.onEvent(ET())},JV),m=async b=>{clearTimeout(u);const E=await xT(e);let w=null;E&&b?.url&&(w=$V(E,b.url)),t.onEvent(w||ET())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,m);const h=a,y=`${l.packageName.toLowerCase()}://`;So().handleOpenURL=async b=>{if(b.toLowerCase().startsWith(y)&&m({url:b}),typeof h=="function")try{h(b)}catch(E){console.error(E)}}}}const eO=ZV;function ET(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:dn("no-auth-event")}}function tO(s,e){jt(s)._logFramework(e)}var nO="@firebase/auth-compat",rO="0.6.2";const sO=1e3;function ad(){return self?.location?.protocol||null}function iO(){return ad()==="http:"||ad()==="https:"}function yS(s=Ot()){return!!((ad()==="file:"||ad()==="ionic:"||ad()==="capacitor:")&&s.toLowerCase().match(/iphone|ipad|ipod|android/))}function aO(){return D0()||Cm()}function oO(){return cI()&&document?.documentMode===11}function lO(s=Ot()){return/Edge\/\d+/.test(s)}function cO(s=Ot()){return oO()||lO(s)}function _S(){try{const s=self.localStorage,e=Gd();if(s)return s.setItem(e,"1"),s.removeItem(e),cO()?yd():!0}catch{return n_()&&yd()}return!1}function n_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Sy(){return(iO()||lI()||yS())&&!aO()&&_S()&&!n_()}function vS(){return yS()&&typeof document<"u"}async function uO(){return vS()?new Promise(s=>{const e=setTimeout(()=>{s(!1)},sO);document.addEventListener("deviceready",()=>{clearTimeout(e),s(!0)})}):!1}function dO(){return typeof window<"u"?window:null}const _r={LOCAL:"local",NONE:"none",SESSION:"session"},Lu=de,bS="persistence";function hO(s,e){if(Lu(Object.values(_r).includes(e),s,"invalid-persistence-type"),D0()){Lu(e!==_r.SESSION,s,"unsupported-persistence-type");return}if(Cm()){Lu(e===_r.NONE,s,"unsupported-persistence-type");return}if(n_()){Lu(e===_r.NONE||e===_r.LOCAL&&yd(),s,"unsupported-persistence-type");return}Lu(e===_r.NONE||_S(),s,"unsupported-persistence-type")}async function Ky(s){await s._initializationPromise;const e=xS(),t=bo(bS,s.config.apiKey,s.name);e&&e.setItem(t,s._getPersistenceType())}function fO(s,e){const t=xS();if(!t)return[];const r=bo(bS,s,e);switch(t.getItem(r)){case _r.NONE:return[ec];case _r.LOCAL:return[Td,wo];case _r.SESSION:return[wo];default:return[]}}function xS(){try{return dO()?.sessionStorage||null}catch{return null}}const mO=de;class sa{constructor(){this.browserResolver=vr(RV),this.cordovaResolver=vr(eO),this.underlyingResolver=null,this._redirectPersistence=wo,this._completeRedirectFn=qm,this._overrideRedirectResult=e_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,a)}async _openRedirect(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return vS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mO(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await uO();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function ES(s){return s.unwrap()}function pO(s){return s.wrapped()}function gO(s){return TS(s)}function yO(s,e){const t=e.customData?._tokenResponse;if(e?.code==="auth/multi-factor-auth-required"){const r=e;r.resolver=new _O(s,lP(s,e))}else if(t){const r=TS(e),a=e;r&&(a.credential=r,a.tenantId=t.tenantId||void 0,a.email=t.email||void 0,a.phoneNumber=t.phoneNumber||void 0)}}function TS(s){const{_tokenResponse:e}=s instanceof Gn?s.customData:s;if(!e)return null;if(!(s instanceof Gn)&&"temporaryProof"in e&&"phoneNumber"in e)return Io.credentialFromResult(s);const t=e.providerId;if(!t||t===ju.PASSWORD)return null;let r;switch(t){case ju.GOOGLE:r=As;break;case ju.FACEBOOK:r=Ss;break;case ju.GITHUB:r=Ns;break;case ju.TWITTER:r=Rs;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:u,pendingToken:m,nonce:h}=e;return!l&&!u&&!a&&!m?null:m?t.startsWith("saml.")?tc._create(t,m):Ms._fromParams({providerId:t,signInMethod:t,pendingToken:m,idToken:a,accessToken:l}):new Kl(t).credential({idToken:a,accessToken:l,rawNonce:h})}return s instanceof Gn?r.credentialFromError(s):r.credentialFromResult(s)}function rr(s,e){return e.catch(t=>{throw t instanceof Gn&&yO(s,t),t}).then(t=>{const r=t.operationType,a=t.user;return{operationType:r,credential:gO(t),additionalUserInfo:oP(t),user:Bm.getOrCreate(a)}})}async function $y(s,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>rr(s,t.confirm(r))}}class _O{constructor(e,t){this.resolver=t,this.auth=pO(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return rr(ES(this.auth),this.resolver.resolveSignIn(e))}}let Bm=class $u{constructor(e){this._delegate=e,this.multiFactor=dP(e)}static getOrCreate(e){return $u.USER_MAP.has(e)||$u.USER_MAP.set(e,new $u(e)),$u.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return rr(this.auth,JI(this._delegate,e))}async linkWithPhoneNumber(e,t){return $y(this.auth,VP(this._delegate,e,t))}async linkWithPopup(e){return rr(this.auth,FP(this._delegate,e,sa))}async linkWithRedirect(e){return await Ky(jt(this.auth)),JP(this._delegate,e,sa)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return rr(this.auth,ZI(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return $y(this.auth,OP(this._delegate,e,t))}reauthenticateWithPopup(e){return rr(this.auth,BP(this._delegate,e,sa))}async reauthenticateWithRedirect(e){return await Ky(jt(this.auth)),WP(this._delegate,e,sa)}sendEmailVerification(e){return WD(this._delegate,e)}async unlink(e){return await jD(this._delegate,e),this}updateEmail(e){return eP(this._delegate,e)}updatePassword(e){return tP(this._delegate,e)}updatePhoneNumber(e){return jP(this._delegate,e)}updateProfile(e){return ZD(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return XD(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Bm.USER_MAP=new WeakMap;const Uu=de;class Yy{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Uu(r,"invalid-api-key",{appName:e.name}),Uu(r,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?sa:void 0;this._delegate=t.initialize({options:{persistence:vO(r,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(Ik),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bm.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){fD(this._delegate,e,t)}applyActionCode(e){return qD(this._delegate,e)}checkActionCode(e){return eS(this._delegate,e)}confirmPasswordReset(e,t){return zD(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return rr(this._delegate,FD(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return YD(this._delegate,e)}isSignInWithEmailLink(e){return QD(this._delegate,e)}async getRedirectResult(){Uu(Sy(),this._delegate,"operation-not-supported-in-this-environment");const e=await eV(this._delegate,sa);return e?rr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){tO(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:a,error:l,complete:u}=TT(e,t,r);return this._delegate.onAuthStateChanged(a,l,u)}onIdTokenChanged(e,t,r){const{next:a,error:l,complete:u}=TT(e,t,r);return this._delegate.onIdTokenChanged(a,l,u)}sendSignInLinkToEmail(e,t){return GD(this._delegate,e,t)}sendPasswordResetEmail(e,t){return UD(this._delegate,e,t||void 0)}async setPersistence(e){hO(this._delegate,e);let t;switch(e){case _r.SESSION:t=wo;break;case _r.LOCAL:t=await vr(Td)._isAvailable()?Td:Y0;break;case _r.NONE:t=ec;break;default:return Nn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return rr(this._delegate,OD(this._delegate))}signInWithCredential(e){return rr(this._delegate,jm(this._delegate,e))}signInWithCustomToken(e){return rr(this._delegate,LD(this._delegate,e))}signInWithEmailAndPassword(e,t){return rr(this._delegate,HD(this._delegate,e,t))}signInWithEmailLink(e,t){return rr(this._delegate,KD(this._delegate,e,t))}signInWithPhoneNumber(e,t){return $y(this._delegate,PP(this._delegate,e,t))}async signInWithPopup(e){return Uu(Sy(),this._delegate,"operation-not-supported-in-this-environment"),rr(this._delegate,qP(this._delegate,e,sa))}async signInWithRedirect(e){return Uu(Sy(),this._delegate,"operation-not-supported-in-this-environment"),await Ky(this._delegate),$P(this._delegate,e,sa)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return BD(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Yy.Persistence=_r;function TT(s,e,t){let r=s;typeof s!="function"&&({next:r,error:e,complete:t}=s);const a=r;return{next:u=>a(u&&Bm.getOrCreate(u)),error:e,complete:t}}function vO(s,e){const t=fO(s,e);if(typeof self<"u"&&!t.includes(Td)&&t.push(Td),typeof window<"u")for(const r of[Y0,wo])t.includes(r)||t.push(r);return t.includes(ec)||t.push(ec),t}class r_{static credential(e,t){return Io.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Io(ES(Ps.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}r_.PHONE_SIGN_IN_METHOD=Io.PHONE_SIGN_IN_METHOD;r_.PROVIDER_ID=Io.PROVIDER_ID;const bO=de;class xO{constructor(e,t,r=Ps.app()){bO(r.options?.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new kP(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const EO="auth-compat";function TO(s){s.INTERNAL.registerComponent(new js(EO,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Yy(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:kl.EMAIL_SIGNIN,PASSWORD_RESET:kl.PASSWORD_RESET,RECOVER_EMAIL:kl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:kl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:kl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:kl.VERIFY_EMAIL}},EmailAuthProvider:wa,FacebookAuthProvider:Ss,GithubAuthProvider:Ns,GoogleAuthProvider:As,OAuthProvider:Kl,SAMLAuthProvider:cm,PhoneAuthProvider:r_,PhoneMultiFactorGenerator:gS,RecaptchaVerifier:xO,TwitterAuthProvider:Rs,Auth:Yy,AuthCredential:wc,Error:Gn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),s.registerVersion(nO,rO)}TO(Ps);var wT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ca,wS;(function(){var s;function e(A,N){function k(){}k.prototype=N.prototype,A.F=N.prototype,A.prototype=new k,A.prototype.constructor=A,A.D=function(O,P,M){for(var C=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)C[Ue-2]=arguments[Ue];return N.prototype[P].apply(O,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,N,k){k||(k=0);const O=Array(16);if(typeof N=="string")for(var P=0;P<16;++P)O[P]=N.charCodeAt(k++)|N.charCodeAt(k++)<<8|N.charCodeAt(k++)<<16|N.charCodeAt(k++)<<24;else for(P=0;P<16;++P)O[P]=N[k++]|N[k++]<<8|N[k++]<<16|N[k++]<<24;N=A.g[0],k=A.g[1],P=A.g[2];let M=A.g[3],C;C=N+(M^k&(P^M))+O[0]+3614090360&4294967295,N=k+(C<<7&4294967295|C>>>25),C=M+(P^N&(k^P))+O[1]+3905402710&4294967295,M=N+(C<<12&4294967295|C>>>20),C=P+(k^M&(N^k))+O[2]+606105819&4294967295,P=M+(C<<17&4294967295|C>>>15),C=k+(N^P&(M^N))+O[3]+3250441966&4294967295,k=P+(C<<22&4294967295|C>>>10),C=N+(M^k&(P^M))+O[4]+4118548399&4294967295,N=k+(C<<7&4294967295|C>>>25),C=M+(P^N&(k^P))+O[5]+1200080426&4294967295,M=N+(C<<12&4294967295|C>>>20),C=P+(k^M&(N^k))+O[6]+2821735955&4294967295,P=M+(C<<17&4294967295|C>>>15),C=k+(N^P&(M^N))+O[7]+4249261313&4294967295,k=P+(C<<22&4294967295|C>>>10),C=N+(M^k&(P^M))+O[8]+1770035416&4294967295,N=k+(C<<7&4294967295|C>>>25),C=M+(P^N&(k^P))+O[9]+2336552879&4294967295,M=N+(C<<12&4294967295|C>>>20),C=P+(k^M&(N^k))+O[10]+4294925233&4294967295,P=M+(C<<17&4294967295|C>>>15),C=k+(N^P&(M^N))+O[11]+2304563134&4294967295,k=P+(C<<22&4294967295|C>>>10),C=N+(M^k&(P^M))+O[12]+1804603682&4294967295,N=k+(C<<7&4294967295|C>>>25),C=M+(P^N&(k^P))+O[13]+4254626195&4294967295,M=N+(C<<12&4294967295|C>>>20),C=P+(k^M&(N^k))+O[14]+2792965006&4294967295,P=M+(C<<17&4294967295|C>>>15),C=k+(N^P&(M^N))+O[15]+1236535329&4294967295,k=P+(C<<22&4294967295|C>>>10),C=N+(P^M&(k^P))+O[1]+4129170786&4294967295,N=k+(C<<5&4294967295|C>>>27),C=M+(k^P&(N^k))+O[6]+3225465664&4294967295,M=N+(C<<9&4294967295|C>>>23),C=P+(N^k&(M^N))+O[11]+643717713&4294967295,P=M+(C<<14&4294967295|C>>>18),C=k+(M^N&(P^M))+O[0]+3921069994&4294967295,k=P+(C<<20&4294967295|C>>>12),C=N+(P^M&(k^P))+O[5]+3593408605&4294967295,N=k+(C<<5&4294967295|C>>>27),C=M+(k^P&(N^k))+O[10]+38016083&4294967295,M=N+(C<<9&4294967295|C>>>23),C=P+(N^k&(M^N))+O[15]+3634488961&4294967295,P=M+(C<<14&4294967295|C>>>18),C=k+(M^N&(P^M))+O[4]+3889429448&4294967295,k=P+(C<<20&4294967295|C>>>12),C=N+(P^M&(k^P))+O[9]+568446438&4294967295,N=k+(C<<5&4294967295|C>>>27),C=M+(k^P&(N^k))+O[14]+3275163606&4294967295,M=N+(C<<9&4294967295|C>>>23),C=P+(N^k&(M^N))+O[3]+4107603335&4294967295,P=M+(C<<14&4294967295|C>>>18),C=k+(M^N&(P^M))+O[8]+1163531501&4294967295,k=P+(C<<20&4294967295|C>>>12),C=N+(P^M&(k^P))+O[13]+2850285829&4294967295,N=k+(C<<5&4294967295|C>>>27),C=M+(k^P&(N^k))+O[2]+4243563512&4294967295,M=N+(C<<9&4294967295|C>>>23),C=P+(N^k&(M^N))+O[7]+1735328473&4294967295,P=M+(C<<14&4294967295|C>>>18),C=k+(M^N&(P^M))+O[12]+2368359562&4294967295,k=P+(C<<20&4294967295|C>>>12),C=N+(k^P^M)+O[5]+4294588738&4294967295,N=k+(C<<4&4294967295|C>>>28),C=M+(N^k^P)+O[8]+2272392833&4294967295,M=N+(C<<11&4294967295|C>>>21),C=P+(M^N^k)+O[11]+1839030562&4294967295,P=M+(C<<16&4294967295|C>>>16),C=k+(P^M^N)+O[14]+4259657740&4294967295,k=P+(C<<23&4294967295|C>>>9),C=N+(k^P^M)+O[1]+2763975236&4294967295,N=k+(C<<4&4294967295|C>>>28),C=M+(N^k^P)+O[4]+1272893353&4294967295,M=N+(C<<11&4294967295|C>>>21),C=P+(M^N^k)+O[7]+4139469664&4294967295,P=M+(C<<16&4294967295|C>>>16),C=k+(P^M^N)+O[10]+3200236656&4294967295,k=P+(C<<23&4294967295|C>>>9),C=N+(k^P^M)+O[13]+681279174&4294967295,N=k+(C<<4&4294967295|C>>>28),C=M+(N^k^P)+O[0]+3936430074&4294967295,M=N+(C<<11&4294967295|C>>>21),C=P+(M^N^k)+O[3]+3572445317&4294967295,P=M+(C<<16&4294967295|C>>>16),C=k+(P^M^N)+O[6]+76029189&4294967295,k=P+(C<<23&4294967295|C>>>9),C=N+(k^P^M)+O[9]+3654602809&4294967295,N=k+(C<<4&4294967295|C>>>28),C=M+(N^k^P)+O[12]+3873151461&4294967295,M=N+(C<<11&4294967295|C>>>21),C=P+(M^N^k)+O[15]+530742520&4294967295,P=M+(C<<16&4294967295|C>>>16),C=k+(P^M^N)+O[2]+3299628645&4294967295,k=P+(C<<23&4294967295|C>>>9),C=N+(P^(k|~M))+O[0]+4096336452&4294967295,N=k+(C<<6&4294967295|C>>>26),C=M+(k^(N|~P))+O[7]+1126891415&4294967295,M=N+(C<<10&4294967295|C>>>22),C=P+(N^(M|~k))+O[14]+2878612391&4294967295,P=M+(C<<15&4294967295|C>>>17),C=k+(M^(P|~N))+O[5]+4237533241&4294967295,k=P+(C<<21&4294967295|C>>>11),C=N+(P^(k|~M))+O[12]+1700485571&4294967295,N=k+(C<<6&4294967295|C>>>26),C=M+(k^(N|~P))+O[3]+2399980690&4294967295,M=N+(C<<10&4294967295|C>>>22),C=P+(N^(M|~k))+O[10]+4293915773&4294967295,P=M+(C<<15&4294967295|C>>>17),C=k+(M^(P|~N))+O[1]+2240044497&4294967295,k=P+(C<<21&4294967295|C>>>11),C=N+(P^(k|~M))+O[8]+1873313359&4294967295,N=k+(C<<6&4294967295|C>>>26),C=M+(k^(N|~P))+O[15]+4264355552&4294967295,M=N+(C<<10&4294967295|C>>>22),C=P+(N^(M|~k))+O[6]+2734768916&4294967295,P=M+(C<<15&4294967295|C>>>17),C=k+(M^(P|~N))+O[13]+1309151649&4294967295,k=P+(C<<21&4294967295|C>>>11),C=N+(P^(k|~M))+O[4]+4149444226&4294967295,N=k+(C<<6&4294967295|C>>>26),C=M+(k^(N|~P))+O[11]+3174756917&4294967295,M=N+(C<<10&4294967295|C>>>22),C=P+(N^(M|~k))+O[2]+718787259&4294967295,P=M+(C<<15&4294967295|C>>>17),C=k+(M^(P|~N))+O[9]+3951481745&4294967295,A.g[0]=A.g[0]+N&4294967295,A.g[1]=A.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+M&4294967295}r.prototype.v=function(A,N){N===void 0&&(N=A.length);const k=N-this.blockSize,O=this.C;let P=this.h,M=0;for(;M<N;){if(P==0)for(;M<=k;)a(this,A,M),M+=this.blockSize;if(typeof A=="string"){for(;M<N;)if(O[P++]=A.charCodeAt(M++),P==this.blockSize){a(this,O),P=0;break}}else for(;M<N;)if(O[P++]=A[M++],P==this.blockSize){a(this,O),P=0;break}}this.h=P,this.o+=N},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var N=1;N<A.length-8;++N)A[N]=0;N=this.o*8;for(var k=A.length-8;k<A.length;++k)A[k]=N&255,N/=256;for(this.v(A),A=Array(16),N=0,k=0;k<4;++k)for(let O=0;O<32;O+=8)A[N++]=this.g[k]>>>O&255;return A};function l(A,N){var k=m;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=N(A)}function u(A,N){this.h=N;const k=[];let O=!0;for(let P=A.length-1;P>=0;P--){const M=A[P]|0;O&&M==N||(k[P]=M,O=!1)}this.g=k}var m={};function h(A){return-128<=A&&A<128?l(A,function(N){return new u([N|0],N<0?-1:0)}):new u([A|0],A<0?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return E;if(A<0)return te(y(-A));const N=[];let k=1;for(let O=0;A>=k;O++)N[O]=A/k|0,k*=4294967296;return new u(N,0)}function b(A,N){if(A.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(A.charAt(0)=="-")return te(b(A.substring(1),N));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=y(Math.pow(N,8));let O=E;for(let M=0;M<A.length;M+=8){var P=Math.min(8,A.length-M);const C=parseInt(A.substring(M,M+P),N);P<8?(P=y(Math.pow(N,P)),O=O.j(P).add(y(C))):(O=O.j(k),O=O.add(y(C)))}return O}var E=h(0),w=h(1),S=h(16777216);s=u.prototype,s.m=function(){if(Y(this))return-te(this).m();let A=0,N=1;for(let k=0;k<this.g.length;k++){const O=this.i(k);A+=(O>=0?O:4294967296+O)*N,N*=4294967296}return A},s.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(q(this))return"0";if(Y(this))return"-"+te(this).toString(A);const N=y(Math.pow(A,6));var k=this;let O="";for(;;){const P=fe(k,N).g;k=R(k,P.j(N));let M=((k.g.length>0?k.g[0]:k.h)>>>0).toString(A);if(k=P,q(k))return M+O;for(;M.length<6;)M="0"+M;O=M+O}},s.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function q(A){if(A.h!=0)return!1;for(let N=0;N<A.g.length;N++)if(A.g[N]!=0)return!1;return!0}function Y(A){return A.h==-1}s.l=function(A){return A=R(this,A),Y(A)?-1:q(A)?0:1};function te(A){const N=A.g.length,k=[];for(let O=0;O<N;O++)k[O]=~A.g[O];return new u(k,~A.h).add(w)}s.abs=function(){return Y(this)?te(this):this},s.add=function(A){const N=Math.max(this.g.length,A.g.length),k=[];let O=0;for(let P=0;P<=N;P++){let M=O+(this.i(P)&65535)+(A.i(P)&65535),C=(M>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);O=C>>>16,M&=65535,C&=65535,k[P]=C<<16|M}return new u(k,k[k.length-1]&-2147483648?-1:0)};function R(A,N){return A.add(te(N))}s.j=function(A){if(q(this)||q(A))return E;if(Y(this))return Y(A)?te(this).j(te(A)):te(te(this).j(A));if(Y(A))return te(this.j(te(A)));if(this.l(S)<0&&A.l(S)<0)return y(this.m()*A.m());const N=this.g.length+A.g.length,k=[];for(var O=0;O<2*N;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(let P=0;P<A.g.length;P++){const M=this.i(O)>>>16,C=this.i(O)&65535,Ue=A.i(P)>>>16,Ve=A.i(P)&65535;k[2*O+2*P]+=C*Ve,Z(k,2*O+2*P),k[2*O+2*P+1]+=M*Ve,Z(k,2*O+2*P+1),k[2*O+2*P+1]+=C*Ue,Z(k,2*O+2*P+1),k[2*O+2*P+2]+=M*Ue,Z(k,2*O+2*P+2)}for(A=0;A<N;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=N;A<2*N;A++)k[A]=0;return new u(k,0)};function Z(A,N){for(;(A[N]&65535)!=A[N];)A[N+1]+=A[N]>>>16,A[N]&=65535,N++}function ae(A,N){this.g=A,this.h=N}function fe(A,N){if(q(N))throw Error("division by zero");if(q(A))return new ae(E,E);if(Y(A))return N=fe(te(A),N),new ae(te(N.g),te(N.h));if(Y(N))return N=fe(A,te(N)),new ae(te(N.g),N.h);if(A.g.length>30){if(Y(A)||Y(N))throw Error("slowDivide_ only works with positive integers.");for(var k=w,O=N;O.l(A)<=0;)k=se(k),O=se(O);var P=he(k,1),M=he(O,1);for(O=he(O,2),k=he(k,2);!q(O);){var C=M.add(O);C.l(A)<=0&&(P=P.add(k),M=C),O=he(O,1),k=he(k,1)}return N=R(A,P.j(N)),new ae(P,N)}for(P=E;A.l(N)>=0;){for(k=Math.max(1,Math.floor(A.m()/N.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),M=y(k),C=M.j(N);Y(C)||C.l(A)>0;)k-=O,M=y(k),C=M.j(N);q(M)&&(M=w),P=P.add(M),A=R(A,C)}return new ae(P,A)}s.B=function(A){return fe(this,A).h},s.and=function(A){const N=Math.max(this.g.length,A.g.length),k=[];for(let O=0;O<N;O++)k[O]=this.i(O)&A.i(O);return new u(k,this.h&A.h)},s.or=function(A){const N=Math.max(this.g.length,A.g.length),k=[];for(let O=0;O<N;O++)k[O]=this.i(O)|A.i(O);return new u(k,this.h|A.h)},s.xor=function(A){const N=Math.max(this.g.length,A.g.length),k=[];for(let O=0;O<N;O++)k[O]=this.i(O)^A.i(O);return new u(k,this.h^A.h)};function se(A){const N=A.g.length+1,k=[];for(let O=0;O<N;O++)k[O]=A.i(O)<<1|A.i(O-1)>>>31;return new u(k,A.h)}function he(A,N){const k=N>>5;N%=32;const O=A.g.length-k,P=[];for(let M=0;M<O;M++)P[M]=N>0?A.i(M+k)>>>N|A.i(M+k+1)<<32-N:A.i(M+k);return new u(P,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,wS=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=b,ca=u}).apply(typeof wT<"u"?wT:typeof self<"u"?self:typeof window<"u"?window:{});var Of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var IS,Yu,SS,Kf,Wy,AS,NS,RS;(function(){var s,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Of=="object"&&Of];for(var _=0;_<d.length;++_){var x=d[_];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function a(d,_){if(_)e:{var x=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var z=d[I];if(!(z in x))break e;x=x[z]}d=d[d.length-1],I=x[d],_=_(I),_!=I&&_!=null&&e(x,d,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(_){var x=[],I;for(I in _)Object.prototype.hasOwnProperty.call(_,I)&&x.push([I,_[I]]);return x}});var l=l||{},u=this||self;function m(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function h(d,_,x){return d.call.apply(d.bind,arguments)}function y(d,_,x){return y=h,y.apply(null,arguments)}function b(d,_){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function E(d,_){function x(){}x.prototype=_.prototype,d.Z=_.prototype,d.prototype=new x,d.prototype.constructor=d,d.Ob=function(I,z,K){for(var ge=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ge[Be-2]=arguments[Be];return _.prototype[z].apply(I,ge)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function S(d){const _=d.length;if(_>0){const x=Array(_);for(let I=0;I<_;I++)x[I]=d[I];return x}return[]}function q(d,_){for(let I=1;I<arguments.length;I++){const z=arguments[I];var x=typeof z;if(x=x!="object"?x:z?Array.isArray(z)?"array":x:"null",x=="array"||x=="object"&&typeof z.length=="number"){x=d.length||0;const K=z.length||0;d.length=x+K;for(let ge=0;ge<K;ge++)d[x+ge]=z[ge]}else d.push(z)}}class Y{constructor(_,x){this.i=_,this.j=x,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function te(d){u.setTimeout(()=>{throw d},0)}function R(){var d=A;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class Z{constructor(){this.h=this.g=null}add(_,x){const I=ae.get();I.set(_,x),this.h?this.h.next=I:this.g=I,this.h=I}}var ae=new Y(()=>new fe,d=>d.reset());class fe{constructor(){this.next=this.g=this.h=null}set(_,x){this.h=_,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let se,he=!1,A=new Z,N=()=>{const d=Promise.resolve(void 0);se=()=>{d.then(k)}};function k(){for(var d;d=R();){try{d.h.call(d.g)}catch(x){te(x)}var _=ae;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}he=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};u.addEventListener("test",x,_),u.removeEventListener("test",x,_)}catch{}return d})();function C(d){return/^[\s\xa0]*$/.test(d)}function Ue(d,_){P.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}E(Ue,P),Ue.prototype.init=function(d,_){const x=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(x=="mouseover"?_=d.fromElement:x=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),W=0;function ue(d,_,x,I,z){this.listener=d,this.proxy=null,this.src=_,this.type=x,this.capture=!!I,this.ha=z,this.key=++W,this.da=this.fa=!1}function Ee(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Me(d,_,x){for(const I in d)_.call(x,d[I],I,d)}function qe(d,_){for(const x in d)_.call(void 0,d[x],x,d)}function V(d){const _={};for(const x in d)_[x]=d[x];return _}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(d,_){let x,I;for(let z=1;z<arguments.length;z++){I=arguments[z];for(x in I)d[x]=I[x];for(let K=0;K<X.length;K++)x=X[K],Object.prototype.hasOwnProperty.call(I,x)&&(d[x]=I[x])}}function _e(d){this.src=d,this.g={},this.h=0}_e.prototype.add=function(d,_,x,I,z){const K=d.toString();d=this.g[K],d||(d=this.g[K]=[],this.h++);const ge=J(d,_,I,z);return ge>-1?(_=d[ge],x||(_.fa=!1)):(_=new ue(_,this.src,K,!!I,z),_.fa=x,d.push(_)),_};function Te(d,_){const x=_.type;if(x in d.g){var I=d.g[x],z=Array.prototype.indexOf.call(I,_,void 0),K;(K=z>=0)&&Array.prototype.splice.call(I,z,1),K&&(Ee(_),d.g[x].length==0&&(delete d.g[x],d.h--))}}function J(d,_,x,I){for(let z=0;z<d.length;++z){const K=d[z];if(!K.da&&K.listener==_&&K.capture==!!x&&K.ha==I)return z}return-1}var re="closure_lm_"+(Math.random()*1e6|0),me={};function we(d,_,x,I,z){if(Array.isArray(_)){for(let K=0;K<_.length;K++)we(d,_[K],x,I,z);return null}return x=vn(x),d&&d[Ve]?d.J(_,x,m(I)?!!I.capture:!1,z):Oe(d,_,x,!1,I,z)}function Oe(d,_,x,I,z,K){if(!_)throw Error("Invalid event type");const ge=m(z)?!!z.capture:!!z;let Be=kn(d);if(Be||(d[re]=Be=new _e(d)),x=Be.add(_,x,I,ge,K),x.proxy)return x;if(I=ze(),x.proxy=I,I.src=d,I.listener=x,d.addEventListener)M||(z=ge),z===void 0&&(z=!1),d.addEventListener(_.toString(),I,z);else if(d.attachEvent)d.attachEvent(Wt(_.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function ze(){function d(x){return _.call(d.src,d.listener,x)}const _=$n;return d}function Cn(d,_,x,I,z){if(Array.isArray(_))for(var K=0;K<_.length;K++)Cn(d,_[K],x,I,z);else I=m(I)?!!I.capture:!!I,x=vn(x),d&&d[Ve]?(d=d.i,K=String(_).toString(),K in d.g&&(_=d.g[K],x=J(_,x,I,z),x>-1&&(Ee(_[x]),Array.prototype.splice.call(_,x,1),_.length==0&&(delete d.g[K],d.h--)))):d&&(d=kn(d))&&(_=d.g[_.toString()],d=-1,_&&(d=J(_,x,I,z)),(x=d>-1?_[d]:null)&&or(x))}function or(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[Ve])Te(_.i,d);else{var x=d.type,I=d.proxy;_.removeEventListener?_.removeEventListener(x,I,d.capture):_.detachEvent?_.detachEvent(Wt(x),I):_.addListener&&_.removeListener&&_.removeListener(I),(x=kn(_))?(Te(x,d),x.h==0&&(x.src=null,_[re]=null)):Ee(d)}}}function Wt(d){return d in me?me[d]:me[d]="on"+d}function $n(d,_){if(d.da)d=!0;else{_=new Ue(_,this);const x=d.listener,I=d.ha||d.src;d.fa&&or(d),d=x.call(I,_)}return d}function kn(d){return d=d[re],d instanceof _e?d:null}var Yn="__closure_events_fn_"+(Math.random()*1e9>>>0);function vn(d){return typeof d=="function"?d:(d[Yn]||(d[Yn]=function(_){return d.handleEvent(_)}),d[Yn])}function lt(){O.call(this),this.i=new _e(this),this.M=this,this.G=null}E(lt,O),lt.prototype[Ve]=!0,lt.prototype.removeEventListener=function(d,_,x,I){Cn(this,d,_,x,I)};function vt(d,_){var x,I=d.G;if(I)for(x=[];I;I=I.G)x.push(I);if(d=d.M,I=_.type||_,typeof _=="string")_=new P(_,d);else if(_ instanceof P)_.target=_.target||d;else{var z=_;_=new P(I,d),pe(_,z)}z=!0;let K,ge;if(x)for(ge=x.length-1;ge>=0;ge--)K=_.g=x[ge],z=Un(K,I,!0,_)&&z;if(K=_.g=d,z=Un(K,I,!0,_)&&z,z=Un(K,I,!1,_)&&z,x)for(ge=0;ge<x.length;ge++)K=_.g=x[ge],z=Un(K,I,!1,_)&&z}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const x=d.g[_];for(let I=0;I<x.length;I++)Ee(x[I]);delete d.g[_],d.h--}}this.G=null},lt.prototype.J=function(d,_,x,I){return this.i.add(String(d),_,!1,x,I)},lt.prototype.K=function(d,_,x,I){return this.i.add(String(d),_,!0,x,I)};function Un(d,_,x,I){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let z=!0;for(let K=0;K<_.length;++K){const ge=_[K];if(ge&&!ge.da&&ge.capture==x){const Be=ge.listener,Ft=ge.ha||ge.src;ge.fa&&Te(d.i,ge),z=Be.call(Ft,I)!==!1&&z}}return z&&!I.defaultPrevented}function H(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(d,_||0)}function Re(d){d.g=H(()=>{d.g=null,d.i&&(d.i=!1,Re(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class Qe extends O{constructor(_,x){super(),this.m=_,this.l=x,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Re(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(d){O.call(this),this.h=d,this.g={}}E(le,O);var Xt=[];function Nt(d){Me(d.g,function(_,x){this.g.hasOwnProperty(x)&&or(_)},d),d.g={}}le.prototype.N=function(){le.Z.N.call(this),Nt(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=u.JSON.stringify,vi=u.JSON.parse,Vc=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function Mr(){}function bi(){}var xe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pe(){P.call(this,"d")}E(Pe,P);function Et(){P.call(this,"c")}E(Et,P);var bt={},lh=null;function Ho(){return lh=lh||new lt}bt.Ia="serverreachability";function ch(d){P.call(this,bt.Ia,d)}E(ch,P);function rs(d){const _=Ho();vt(_,new ch(_))}bt.STAT_EVENT="statevent";function Ca(d,_){P.call(this,bt.STAT_EVENT,d),this.stat=_}E(Ca,P);function Jt(d){const _=Ho();vt(_,new Ca(_,d))}bt.Ja="timingevent";function ss(d,_){P.call(this,bt.Ja,d),this.size=_}E(ss,P);function is(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},_)}function Lr(){this.g=!0}Lr.prototype.ua=function(){this.g=!1};function mp(d,_,x,I,z,K){d.info(function(){if(d.g)if(K){var ge="",Be=K.split("&");for(let at=0;at<Be.length;at++){var Ft=Be[at].split("=");if(Ft.length>1){const Rt=Ft[0];Ft=Ft[1];const Ir=Rt.split("_");ge=Ir.length>=2&&Ir[1]=="type"?ge+(Rt+"="+Ft+"&"):ge+(Rt+"=redacted&")}}}else ge=null;else ge=K;return"XMLHTTP REQ ("+I+") [attempt "+z+"]: "+_+`
`+x+`
`+ge})}function uh(d,_,x,I,z,K,ge){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+z+"]: "+_+`
`+x+`
`+K+" "+ge})}function as(d,_,x,I){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+pp(d,x)+(I?" "+I:"")})}function ka(d,_){d.info(function(){return"TIMEOUT: "+_})}Lr.prototype.info=function(){};function pp(d,_){if(!d.g)return _;if(!_)return null;try{const K=JSON.parse(_);if(K){for(d=0;d<K.length;d++)if(Array.isArray(K[d])){var x=K[d];if(!(x.length<2)){var I=x[1];if(Array.isArray(I)&&!(I.length<1)){var z=I[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ge=1;ge<I.length;ge++)I[ge]=""}}}}return zn(K)}catch{return _}}var Da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jc;function Pa(){}E(Pa,Mr),Pa.prototype.g=function(){return new XMLHttpRequest},jc=new Pa;function zs(d){return encodeURIComponent(String(d))}function dh(d){var _=1;d=d.split(":");const x=[];for(;_>0&&d.length;)x.push(d.shift()),_--;return d.length&&x.push(d.join(":")),x}function Ur(d,_,x,I){this.j=d,this.i=_,this.l=x,this.S=I||1,this.V=new le(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zr}function zr(){this.i=null,this.g="",this.h=!1}var Zt={},fn={};function os(d,_,x){d.M=1,d.A=Va(tn(_)),d.u=x,d.R=!0,Go(d,null)}function Go(d,_){d.F=Date.now(),ls(d),d.B=tn(d.A);var x=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),Yo(x.i,"t",I),d.C=0,x=d.j.L,d.h=new zr,d.g=Sh(d.j,x?_:null,!d.u),d.P>0&&(d.O=new Qe(y(d.Y,d,d.g),d.P)),_=d.V,x=d.g,I=d.ba;var z="readystatechange";Array.isArray(z)||(z&&(Xt[0]=z.toString()),z=Xt);for(let K=0;K<z.length;K++){const ge=we(x,z[K],I||_.handleEvent,!1,_.h||_);if(!ge)break;_.g[ge.key]=ge}_=d.J?V(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),rs(),mp(d.i,d.v,d.B,d.l,d.S,d.u)}Ur.prototype.ba=function(d){d=d.target;const _=this.O;_&&Fr(d)==3?_.j():this.Y(d)},Ur.prototype.Y=function(d){try{if(d==this.g)e:{const Be=Fr(this.g),Ft=this.g.ya(),at=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||bn(this.g)))){this.K||Be!=4||Ft==7||(Ft==8||at<=0?rs(3):rs(2)),cs(this);var _=this.g.ca();this.X=_;var x=gp(this);if(this.o=_==200,uh(this.i,this.v,this.B,this.l,this.S,Be,_),this.o){if(this.U&&!this.L){t:{if(this.g){var I,z=this.g;if((I=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(I)){var K=I;break t}}K=null}if(d=K)as(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,us(this,d);else{this.o=!1,this.m=3,Jt(12),lr(this),Er(this);break e}}if(this.R){d=!0;let Rt;for(;!this.K&&this.C<x.length;)if(Rt=fh(this,x),Rt==fn){Be==4&&(this.m=4,Jt(14),d=!1),as(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Zt){this.m=4,Jt(15),as(this.i,this.l,x,"[Invalid Chunk]"),d=!1;break}else as(this.i,this.l,Rt,null),us(this,Rt);if(hh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||x.length!=0||this.h.h||(this.m=1,Jt(16),d=!1),this.o=this.o&&d,!d)as(this.i,this.l,x,"[Invalid Chunked Response]"),lr(this),Er(this);else if(x.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Xc(ge),ge.P=!0,Jt(11))}}else as(this.i,this.l,x,null),us(this,x);Be==4&&lr(this),this.o&&!this.K&&(Be==4?Eh(this.j,this):(this.o=!1,ls(this)))}else Bs(this.g),_==400&&x.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),lr(this),Er(this)}}}catch{}};function gp(d){if(!hh(d))return d.g.la();const _=bn(d.g);if(_==="")return"";let x="";const I=_.length,z=Fr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return lr(d),Er(d),"";d.h.i=new u.TextDecoder}for(let K=0;K<I;K++)d.h.h=!0,x+=d.h.i.decode(_[K],{stream:!(z&&K==I-1)});return _.length=0,d.h.g+=x,d.C=0,d.h.g}function hh(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function fh(d,_){var x=d.C,I=_.indexOf(`
`,x);return I==-1?fn:(x=Number(_.substring(x,I)),isNaN(x)?Zt:(I+=1,I+x>_.length?fn:(_=_.slice(I,I+x),d.C=I+x,_)))}Ur.prototype.cancel=function(){this.K=!0,lr(this)};function ls(d){d.T=Date.now()+d.H,Qo(d,d.H)}function Qo(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=is(y(d.aa,d),_)}function cs(d){d.D&&(u.clearTimeout(d.D),d.D=null)}Ur.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(ka(this.i,this.B),this.M!=2&&(rs(),Jt(17)),lr(this),this.m=2,Er(this)):Qo(this,this.T-d)};function Er(d){d.j.I==0||d.K||Eh(d.j,d)}function lr(d){cs(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,Nt(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function us(d,_){try{var x=d.j;if(x.I!=0&&(x.g==d||hs(x.h,d))){if(!d.L&&hs(x.h,d)&&x.I==3){try{var I=x.Ba.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var z=I;if(z[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<d.F)el(x),Ni(x);else break e;qa(x),Jt(18)}}else x.xa=z[1],0<x.xa-x.K&&z[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=is(y(x.Va,x),6e3));ds(x.h)<=1&&x.ta&&(x.ta=void 0)}else _s(x,11)}else if((d.L||x.g==d)&&el(x),!C(_))for(z=x.Ba.g.parse(_),_=0;_<z.length;_++){let at=z[_];const Rt=at[0];if(!(Rt<=x.K))if(x.K=Rt,at=at[1],x.I==2)if(at[0]=="c"){x.M=at[1],x.ba=at[2];const Ir=at[3];Ir!=null&&(x.ka=Ir,x.j.info("VER="+x.ka));const vs=at[4];vs!=null&&(x.za=vs,x.j.info("SVER="+x.za));const Hr=at[5];Hr!=null&&typeof Hr=="number"&&Hr>0&&(I=1.5*Hr,x.O=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const Gr=d.g;if(Gr){const Ba=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ba){var K=I.h;K.g||Ba.indexOf("spdy")==-1&&Ba.indexOf("quic")==-1&&Ba.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Uc(K,K.h),K.h=null))}if(I.G){const tl=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(I.wa=tl,ut(I.J,I.G,tl))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-d.F,x.j.info("Handshake RTT: "+x.T+"ms")),I=x;var ge=d;if(I.na=Ih(I,I.L?I.ba:null,I.W),ge.L){zc(I.h,ge);var Be=ge,Ft=I.O;Ft&&(Be.H=Ft),Be.D&&(cs(Be),ls(Be)),I.g=ge}else bh(I);x.i.length>0&&ys(x)}else at[0]!="stop"&&at[0]!="close"||_s(x,7);else x.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?_s(x,7):Yc(x):at[0]!="noop"&&x.l&&x.l.qa(at),x.A=0)}}rs(4)}catch{}}var en=class{constructor(d,_){this.g=d,this.map=_}};function Mc(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Lc(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ds(d){return d.h?1:d.g?d.g.size:0}function hs(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function Uc(d,_){d.g?d.g.add(_):d.h=_}function zc(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Mc.prototype.cancel=function(){if(this.i=qc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function qc(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const x of d.g.values())_=_.concat(x.G);return _}return S(d.i)}var mh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ko(d,_){if(d){d=d.split("&");for(let x=0;x<d.length;x++){const I=d[x].indexOf("=");let z,K=null;I>=0?(z=d[x].substring(0,I),K=d[x].substring(I+1)):z=d[x],_(z,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function cr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof cr?(this.l=d.l,mn(this,d.j),this.o=d.o,this.g=d.g,xi(this,d.u),this.h=d.h,Bc(this,_h(d.i)),this.m=d.m):d&&(_=String(d).match(mh))?(this.l=!1,mn(this,_[1]||"",!0),this.o=fs(_[2]||""),this.g=fs(_[3]||"",!0),xi(this,_[4]),this.h=fs(_[5]||"",!0),Bc(this,_[6]||"",!0),this.m=fs(_[7]||"")):(this.l=!1,this.i=new Ti(null,this.l))}cr.prototype.toString=function(){const d=[];var _=this.j;_&&d.push(Oa(_,$o,!0),":");var x=this.g;return(x||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Oa(_,$o,!0),"@"),d.push(zs(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&d.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(Oa(x,x.charAt(0)=="/"?Fc:ph,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",Oa(x,gh)),d.join("")},cr.prototype.resolve=function(d){const _=tn(this);let x=!!d.j;x?mn(_,d.j):x=!!d.o,x?_.o=d.o:x=!!d.g,x?_.g=d.g:x=d.u!=null;var I=d.h;if(x)xi(_,d.u);else if(x=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var z=_.h.lastIndexOf("/");z!=-1&&(I=_.h.slice(0,z+1)+I)}if(z=I,z==".."||z==".")I="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){I=z.lastIndexOf("/",0)==0,z=z.split("/");const K=[];for(let ge=0;ge<z.length;){const Be=z[ge++];Be=="."?I&&ge==z.length&&K.push(""):Be==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),I&&ge==z.length&&K.push("")):(K.push(Be),I=!0)}I=K.join("/")}else I=z}return x?_.h=I:x=d.i.toString()!=="",x?Bc(_,_h(d.i)):x=!!d.m,x&&(_.m=d.m),_};function tn(d){return new cr(d)}function mn(d,_,x){d.j=x?fs(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function xi(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function Bc(d,_,x){_ instanceof Ti?(d.i=_,Wo(d.i,d.l)):(x||(_=Oa(_,Ei)),d.i=new Ti(_,d.l))}function ut(d,_,x){d.i.set(_,x)}function Va(d){return ut(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function fs(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Oa(d,_,x){return typeof d=="string"?(d=encodeURI(d).replace(_,Wn),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Wn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var $o=/[#\/\?@]/g,ph=/[#\?:]/g,Fc=/[#\?]/g,Ei=/[#\?@]/g,gh=/#/g;function Ti(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Xn(d){d.g||(d.g=new Map,d.h=0,d.i&&Ko(d.i,function(_,x){d.add(decodeURIComponent(_.replace(/\+/g," ")),x)}))}s=Ti.prototype,s.add=function(d,_){Xn(this),this.i=null,d=wi(this,d);let x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(_),this.h+=1,this};function yh(d,_){Xn(d),_=wi(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Hc(d,_){return Xn(d),_=wi(d,_),d.g.has(_)}s.forEach=function(d,_){Xn(this),this.g.forEach(function(x,I){x.forEach(function(z){d.call(_,z,I,this)},this)},this)};function Gc(d,_){Xn(d);let x=[];if(typeof _=="string")Hc(d,_)&&(x=x.concat(d.g.get(wi(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)x=x.concat(d[_]);return x}s.set=function(d,_){return Xn(this),this.i=null,d=wi(this,d),Hc(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},s.get=function(d,_){return d?(d=Gc(this,d),d.length>0?String(d[0]):_):_};function Yo(d,_,x){yh(d,_),x.length>0&&(d.i=null,d.g.set(wi(d,_),S(x)),d.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let I=0;I<_.length;I++){var x=_[I];const z=zs(x);x=Gc(this,x);for(let K=0;K<x.length;K++){let ge=z;x[K]!==""&&(ge+="="+zs(x[K])),d.push(ge)}}return this.i=d.join("&")};function _h(d){const _=new Ti;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function wi(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Wo(d,_){_&&!d.j&&(Xn(d),d.i=null,d.g.forEach(function(x,I){const z=I.toLowerCase();I!=z&&(yh(this,I),Yo(this,z,x))},d)),d.j=_}function qr(d,_){const x=new Lr;if(u.Image){const I=new Image;I.onload=b(Tr,x,"TestLoadImage: loaded",!0,_,I),I.onerror=b(Tr,x,"TestLoadImage: error",!1,_,I),I.onabort=b(Tr,x,"TestLoadImage: abort",!1,_,I),I.ontimeout=b(Tr,x,"TestLoadImage: timeout",!1,_,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else _(!1)}function Qc(d,_){const x=new Lr,I=new AbortController,z=setTimeout(()=>{I.abort(),Tr(x,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:I.signal}).then(K=>{clearTimeout(z),K.ok?Tr(x,"TestPingServer: ok",!0,_):Tr(x,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(z),Tr(x,"TestPingServer: error",!1,_)})}function Tr(d,_,x,I,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),I(x)}catch{}}function Ii(){this.g=new Vc}function ms(d){this.i=d.Sb||null,this.h=d.ab||!1}E(ms,Mr),ms.prototype.g=function(){return new ja(this.i,this.h)};function ja(d,_){lt.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ja,lt),s=ja.prototype,s.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,Br(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Si(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Br(this)),this.g&&(this.readyState=3,Br(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xo(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xo(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Si(this):Br(this),this.readyState==3&&Xo(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Si(this))},s.Na=function(d){this.g&&(this.response=d,Si(this))},s.ga=function(){this.g&&Si(this)};function Si(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Br(d)}s.setRequestHeader=function(d,_){this.A.append(d,_)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var x=_.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=_.next();return d.join(`\r
`)};function Br(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ja.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function wr(d){let _="";return Me(d,function(x,I){_+=I,_+=":",_+=x,_+=`\r
`}),_}function Ma(d,_,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=wr(x),typeof d=="string"?x!=null&&zs(x):ut(d,_,x))}function pt(d){lt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(pt,lt);var ps=/^https?$/i,Kc=["POST","PUT"];s=pt.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,_,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jc.g(),this.g.onreadystatechange=w(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(K){La(this,K);return}if(d=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var z in I)x.set(z,I[z]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const K of I.keys())x.set(K,I.get(K));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find(K=>K.toLowerCase()=="content-type"),z=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(Kc,_,void 0)>=0)||I||z||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ge]of x)this.g.setRequestHeader(K,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(K){La(this,K)}};function La(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,$c(d),qs(d)}function $c(d){d.A||(d.A=!0,vt(d,"complete"),vt(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,vt(this,"complete"),vt(this,"abort"),qs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qs(this,!0)),pt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ua(this):this.Xa())},s.Xa=function(){Ua(this)};function Ua(d){if(d.h&&typeof l<"u"){if(d.v&&Fr(d)==4)setTimeout(d.Ca.bind(d),0);else if(vt(d,"readystatechange"),Fr(d)==4){d.h=!1;try{const K=d.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var x;if(!(x=_)){var I;if(I=K===0){let ge=String(d.D).match(mh)[1]||null;!ge&&u.self&&u.self.location&&(ge=u.self.location.protocol.slice(0,-1)),I=!ps.test(ge?ge.toLowerCase():"")}x=I}if(x)vt(d,"complete"),vt(d,"success");else{d.o=6;try{var z=Fr(d)>2?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.ca()+"]",$c(d)}}finally{qs(d)}}}}function qs(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const x=d.g;d.g=null,_||vt(d,"ready");try{x.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Fr(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Fr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),vi(_)}};function bn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Bs(d){const _={};d=(d.g&&Fr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(C(d[I]))continue;var x=dh(d[I]);const z=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const K=_[z]||[];_[z]=K,K.push(x)}qe(_,function(I){return I.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(d,_,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||_}function Ai(d){this.za=0,this.i=[],this.j=new Lr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gs("baseRetryDelayMs",5e3,d),this.Za=gs("retryDelaySeedMs",1e4,d),this.Ta=gs("forwardChannelMaxRetries",2,d),this.va=gs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Mc(d&&d.concurrentRequestLimit),this.Ba=new Ii,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ai.prototype,s.ka=8,s.I=1,s.connect=function(d,_,x,I){Jt(0),this.W=d,this.H=_||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.J=Ih(this,null,this.W),ys(this)};function Yc(d){if(Jo(d),d.I==3){var _=d.V++,x=tn(d.J);if(ut(x,"SID",d.M),ut(x,"RID",_),ut(x,"TYPE","terminate"),za(d,x),_=new Ur(d,d.j,_),_.M=2,_.A=Va(tn(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!x&&u.Image&&(new Image().src=_.A,x=!0),x||(_.g=Sh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),ls(_)}wh(d)}function Ni(d){d.g&&(Xc(d),d.g.cancel(),d.g=null)}function Jo(d){Ni(d),d.v&&(u.clearTimeout(d.v),d.v=null),el(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function ys(d){if(!Lc(d.h)&&!d.m){d.m=!0;var _=d.Ea;se||N(),he||(se(),he=!0),A.add(_,d),d.D=0}}function Zo(d,_){return ds(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=is(y(d.Ea,d,_),Th(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const z=new Ur(this,this.j,d);let K=this.o;if(this.U&&(K?(K=V(K),pe(K,this.U)):K=this.U),this.u!==null||this.R||(z.J=K,K=null),this.S)e:{for(var _=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(_+=I,_>4096){_=x;break e}if(_===4096||x===this.i.length-1){_=x+1;break e}}_=1e3}else _=1e3;_=vh(this,z,_),x=tn(this.J),ut(x,"RID",d),ut(x,"CVER",22),this.G&&ut(x,"X-HTTP-Session-Id",this.G),za(this,x),K&&(this.R?_="headers="+zs(wr(K))+"&"+_:this.u&&Ma(x,this.u,K)),Uc(this.h,z),this.Ra&&ut(x,"TYPE","init"),this.S?(ut(x,"$req",_),ut(x,"SID","null"),z.U=!0,os(z,x,null)):os(z,x,_),this.I=2}}else this.I==3&&(d?Wc(this,d):this.i.length==0||Lc(this.h)||Wc(this))};function Wc(d,_){var x;_?x=_.l:x=d.V++;const I=tn(d.J);ut(I,"SID",d.M),ut(I,"RID",x),ut(I,"AID",d.K),za(d,I),d.u&&d.o&&Ma(I,d.u,d.o),x=new Ur(d,d.j,x,d.D+1),d.u===null&&(x.J=d.o),_&&(d.i=_.G.concat(d.i)),_=vh(d,x,1e3),x.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Uc(d.h,x),os(x,I,_)}function za(d,_){d.H&&Me(d.H,function(x,I){ut(_,I,x)}),d.l&&Me({},function(x,I){ut(_,I,x)})}function vh(d,_,x){x=Math.min(d.i.length,x);const I=d.l?y(d.l.Ka,d.l,d):null;e:{var z=d.i;let Be=-1;for(;;){const Ft=["count="+x];Be==-1?x>0?(Be=z[0].g,Ft.push("ofs="+Be)):Be=0:Ft.push("ofs="+Be);let at=!0;for(let Rt=0;Rt<x;Rt++){var K=z[Rt].g;const Ir=z[Rt].map;if(K-=Be,K<0)Be=Math.max(0,z[Rt].g-100),at=!1;else try{K="req"+K+"_"||"";try{var ge=Ir instanceof Map?Ir:Object.entries(Ir);for(const[vs,Hr]of ge){let Gr=Hr;m(Hr)&&(Gr=zn(Hr)),Ft.push(K+vs+"="+encodeURIComponent(Gr))}}catch(vs){throw Ft.push(K+"type="+encodeURIComponent("_badmap")),vs}}catch{I&&I(Ir)}}if(at){ge=Ft.join("&");break e}}ge=void 0}return d=d.i.splice(0,x),_.G=d,ge}function bh(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;se||N(),he||(se(),he=!0),A.add(_,d),d.A=0}}function qa(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=is(y(d.Da,d),Th(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,xh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=is(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),Ni(this),xh(this))};function Xc(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function xh(d){d.g=new Ur(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=tn(d.na);ut(_,"RID","rpc"),ut(_,"SID",d.M),ut(_,"AID",d.K),ut(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&ut(_,"TO",d.ia),ut(_,"TYPE","xmlhttp"),za(d,_),d.u&&d.o&&Ma(_,d.u,d.o),d.O&&(d.g.H=d.O);var x=d.g;d=d.ba,x.M=1,x.A=Va(tn(_)),x.u=null,x.R=!0,Go(x,d)}s.Va=function(){this.C!=null&&(this.C=null,Ni(this),qa(this),Jt(19))};function el(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function Eh(d,_){var x=null;if(d.g==_){el(d),Xc(d),d.g=null;var I=2}else if(hs(d.h,_))x=_.G,zc(d.h,_),I=1;else return;if(d.I!=0){if(_.o)if(I==1){x=_.u?_.u.length:0,_=Date.now()-_.F;var z=d.D;I=Ho(),vt(I,new ss(I,x)),ys(d)}else bh(d);else if(z=_.m,z==3||z==0&&_.X>0||!(I==1&&Zo(d,_)||I==2&&qa(d)))switch(x&&x.length>0&&(_=d.h,_.i=_.i.concat(x)),z){case 1:_s(d,5);break;case 4:_s(d,10);break;case 3:_s(d,6);break;default:_s(d,2)}}}function Th(d,_){let x=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(x*=2),x*_}function _s(d,_){if(d.j.info("Error code "+_),_==2){var x=y(d.bb,d),I=d.Ua;const z=!I;I=new cr(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||mn(I,"https"),Va(I),z?qr(I.toString(),x):Qc(I.toString(),x)}else Jt(2);d.I=0,d.l&&d.l.pa(_),wh(d),Jo(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function wh(d){if(d.I=0,d.ja=[],d.l){const _=qc(d.h);(_.length!=0||d.i.length!=0)&&(q(d.ja,_),q(d.ja,d.i),d.h.i.length=0,S(d.i),d.i.length=0),d.l.oa()}}function Ih(d,_,x){var I=x instanceof cr?tn(x):new cr(x);if(I.g!="")_&&(I.g=_+"."+I.g),xi(I,I.u);else{var z=u.location;I=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;const K=new cr(null);I&&mn(K,I),_&&(K.g=_),z&&xi(K,z),x&&(K.h=x),I=K}return x=d.G,_=d.wa,x&&_&&ut(I,x,_),ut(I,"VER",d.ka),za(d,I),I}function Sh(d,_,x){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new pt(new ms({ab:x})):new pt(d.ma),_.Fa(d.L),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ah(){}s=Ah.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ri(){}Ri.prototype.g=function(d,_){return new qn(d,_)};function qn(d,_){lt.call(this),this.g=new Ai(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!C(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!C(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Fs(this)}E(qn,lt),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){Yc(this.g)},qn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.v&&(x={},x.__data__=zn(d),d=x);_.i.push(new en(_.Ya++,d)),_.I==3&&ys(_)},qn.prototype.N=function(){this.g.l=null,delete this.j,Yc(this.g),delete this.g,qn.Z.N.call(this)};function Nh(d){Pe.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const x in _){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}E(Nh,Pe);function Rh(){Et.call(this),this.status=1}E(Rh,Et);function Fs(d){this.g=d}E(Fs,Ah),Fs.prototype.ra=function(){vt(this.g,"a")},Fs.prototype.qa=function(d){vt(this.g,new Nh(d))},Fs.prototype.pa=function(d){vt(this.g,new Rh)},Fs.prototype.oa=function(){vt(this.g,"b")},Ri.prototype.createWebChannel=Ri.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,RS=function(){return new Ri},NS=function(){return Ho()},AS=bt,Wy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Da.NO_ERROR=0,Da.TIMEOUT=8,Da.HTTP_ERROR=6,Kf=Da,Oc.COMPLETE="complete",SS=Oc,bi.EventType=xe,xe.OPEN="a",xe.CLOSE="b",xe.ERROR="c",xe.MESSAGE="d",lt.prototype.listen=lt.prototype.J,Yu=bi,pt.prototype.listenOnce=pt.prototype.K,pt.prototype.getLastError=pt.prototype.Ha,pt.prototype.getLastErrorCode=pt.prototype.ya,pt.prototype.getStatus=pt.prototype.ca,pt.prototype.getResponseJson=pt.prototype.La,pt.prototype.getResponseText=pt.prototype.la,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Fa,IS=pt}).apply(typeof Of<"u"?Of:typeof self<"u"?self:typeof window<"u"?window:{});class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");let Sc="12.8.0";function wO(s){Sc=s}const ga=new km("@firebase/firestore");function Ll(){return ga.logLevel}function IO(s){ga.setLogLevel(s)}function ce(s,...e){if(ga.logLevel<=We.DEBUG){const t=e.map(s_);ga.debug(`Firestore (${Sc}): ${s}`,...t)}}function Kt(s,...e){if(ga.logLevel<=We.ERROR){const t=e.map(s_);ga.error(`Firestore (${Sc}): ${s}`,...t)}}function Ls(s,...e){if(ga.logLevel<=We.WARN){const t=e.map(s_);ga.warn(`Firestore (${Sc}): ${s}`,...t)}}function s_(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function be(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,CS(s,r,t)}function CS(s,e,t){let r=`FIRESTORE (${Sc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Kt(r),new Error(r)}function Se(s,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,s||CS(e,a,r)}function SO(s,e){s||be(57014,e)}function ve(s,e){return s}const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Gn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class An{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class kS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(yn.UNAUTHENTICATED)))}shutdown(){}}class NO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class RO{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Se(this.o===void 0,42304);let r=this.i;const a=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let l=new An;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new An,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const h=l;e.enqueueRetryable((async()=>{await h.promise,await a(this.currentUser)}))},m=h=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((h=>m(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?m(h):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new An)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string",31837,{l:r}),new kS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class CO{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class kO{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new CO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class IT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Se(this.o===void 0,3512);const r=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new IT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Se(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new IT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function PO(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class i_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=PO(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function je(s,e){return s<e?-1:s>e?1:0}function Xy(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const a=s.charAt(r),l=e.charAt(r);if(a!==l)return Ay(a)===Ay(l)?je(a,l):Ay(a)?1:-1}return je(s.length,e.length)}const VO=55296,OO=57343;function Ay(s){const e=s.charCodeAt(0);return e>=VO&&e<=OO}function nc(s,e,t){return s.length===e.length&&s.every(((r,a)=>t(r,e[a])))}function DS(s){return s+"\0"}const ST="__name__";class ws{constructor(e,t,r){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&be(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ws.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ws?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=ws.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return je(e.length,t.length)}static compareSegments(e,t){const r=ws.isNumericId(e),a=ws.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?ws.extractNumericId(e).compare(ws.extractNumericId(t)):Xy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ca.fromString(e.substring(4,e.length-2))}}class Xe extends ws{construct(e,t,r){return new Xe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new Xe(t)}static emptyPath(){return new Xe([])}}const jO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends ws{construct(e,t,r){return new Pt(e,t,r)}static isValidIdentifier(e){return jO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ST}static keyField(){return new Pt([ST])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new oe(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new oe(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[a+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new oe(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,a+=2}else m==="`"?(u=!u,a++):m!=="."||u?(r+=m,a++):(l(),a++)}if(l(),u)throw new oe(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(t)}static emptyPath(){return new Pt([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Xe.fromString(e))}static fromName(e){return new ye(Xe.fromString(e).popFirst(5))}static empty(){return new ye(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Xe(e.slice()))}}function a_(s,e,t){if(!t)throw new oe(Q.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function PS(s,e,t,r){if(e===!0&&r===!0)throw new oe(Q.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function AT(s){if(!ye.isDocumentKey(s))throw new oe(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function NT(s){if(ye.isDocumentKey(s))throw new oe(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function VS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Fm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":be(12329,{type:typeof s})}function it(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new oe(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fm(s);throw new oe(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function OS(s,e){if(e<=0)throw new oe(Q.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function cn(s,e){const t={typeString:s};return e&&(t.value=e),t}function Kd(s,e){if(!VS(s))throw new oe(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const u=s[r];if(a&&typeof u!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new oe(Q.INVALID_ARGUMENT,t);return!0}const RT=-62135596800,CT=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*CT);return new ct(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<RT)throw new oe(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CT}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kd(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-RT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:cn("string",ct._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new ct(0,0))}static max(){return new Ne(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rc=-1;class fm{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Jy(s){return s.fields.find((e=>e.kind===2))}function ao(s){return s.fields.filter((e=>e.kind!==2))}fm.UNKNOWN_ID=-1;class $f{constructor(e,t){this.fieldPath=e,this.kind=t}}class wd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wd(0,xr.min())}}function jS(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Ne.fromTimestamp(r===1e9?new ct(t+1,0):new ct(t,r));return new xr(a,ye.empty(),e)}function MS(s){return new xr(s.readTime,s.key,rc)}class xr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xr(Ne.min(),ye.empty(),rc)}static max(){return new xr(Ne.max(),ye.empty(),rc)}}function o_(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(s.documentKey,e.documentKey),t!==0?t:je(s.largestBatchId,e.largestBatchId))}const LS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class US{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ia(s){if(s.code!==Q.FAILED_PRECONDITION||s.message!==LS)throw s;ce("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):U.reject(t)}static resolve(e){return new U(((t,r)=>{t(e)}))}static reject(e){return new U(((t,r)=>{r(e)}))}static waitFor(e){return new U(((t,r)=>{let a=0,l=0,u=!1;e.forEach((m=>{++a,m.next((()=>{++l,u&&l===a&&t()}),(h=>r(h)))})),u=!0,l===a&&t()}))}static or(e){let t=U.resolve(!1);for(const r of e)t=t.next((a=>a?U.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new U(((r,a)=>{const l=e.length,u=new Array(l);let m=0;for(let h=0;h<l;h++){const y=h;t(e[y]).next((b=>{u[y]=b,++m,m===l&&r(u)}),(b=>a(b)))}}))}static doWhile(e,t){return new U(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}const yr="SimpleDb";class Hm{static open(e,t,r,a){try{return new Hm(t,e.transaction(a,r))}catch(l){throw new od(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new An,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new od(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=l_(r.target.error);this.S.reject(new od(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(yr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new LO(t)}}class Vs{static delete(e){return ce(yr,"Removing database:",e),lo(R0().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!yd())return!1;if(Vs.F())return!0;const e=Ot(),t=Vs.M(e),r=0<t&&t<10,a=zS(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Vs.M(Ot())===12.2&&Kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ce(yr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new od(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new oe(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new oe(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new od(e,u))},a.onupgradeneeded=l=>{ce(yr,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.N.k(u,a.transaction,l.oldVersion,this.version).next((()=>{ce(yr,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const m=Hm.open(this.db,e,l?"readonly":"readwrite",r),h=a(m).next((y=>(m.C(),y))).catch((y=>(m.abort(y),U.reject(y)))).toPromise();return h.catch((()=>{})),await m.D,h}catch(m){const h=m,y=h.name!=="FirebaseError"&&u<3;if(ce(yr,"Transaction failed with error:",h.message,"Retrying:",y),this.close(),!y)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function zS(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class MO{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return lo(this.U.delete())}}class od extends oe{constructor(e,t){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Sa(s){return s.name==="IndexedDbTransactionError"}class LO{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ce(yr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce(yr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lo(r)}add(e){return ce(yr,"ADD",this.store.name,e,e),lo(this.store.add(e))}get(e){return lo(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce(yr,"GET",this.store.name,e,t),t)))}delete(e){return ce(yr,"DELETE",this.store.name,e),lo(this.store.delete(e))}count(){return ce(yr,"COUNT",this.store.name),lo(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new U(((u,m)=>{l.onerror=h=>{m(h.target.error)},l.onsuccess=h=>{u(h.target.result)}}))}{const l=this.cursor(r),u=[];return this.J(l,((m,h)=>{u.push(h)})).next((()=>u))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new U(((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}X(e,t){ce(yr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,u,m)=>m.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new U(((r,a)=>{t.onerror=l=>{const u=l_(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((m=>{m?u.continue():r()})):r()}}))}J(e,t){const r=[];return new U(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const m=u.target.result;if(!m)return void a();const h=new MO(m),y=t(m.primaryKey,m.value,h);if(y instanceof U){const b=y.catch((E=>(h.done(),U.reject(E))));r.push(b)}h.isDone?a():h.G===null?m.continue():m.continue(h.G)}})).next((()=>U.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lo(s){return new U(((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=l_(r.target.error);t(a)}}))}let kT=!1;function l_(s){const e=Vs.M(Ot());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kT||(kT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const ld="IndexBackfiller";class UO{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ce(ld,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ce(ld,`Documents written: ${t}`)}catch(t){Sa(t)?ce(ld,"Ignoring IndexedDB error during index backfill: ",t):await Ia(t)}await this.re(6e4)}))}}class zO{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return U.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return ce(ld,`Processing collection: ${u}`),this.oe(e,u,a).next((m=>{a-=m,r.add(u)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(a,l))).next((m=>(ce(ld,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m)))).next((()=>u.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const u=MS(l);o_(u,r)>0&&(r=u)})),new xr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class sr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sr.ce=-1;const ua=-1;function $d(s){return s==null}function Id(s){return s===0&&1/s==-1/0}function qS(s){return typeof s=="number"&&Number.isInteger(s)&&!Id(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const mm="";function Mn(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=DT(e)),e=qO(s.get(t),e);return DT(e)}function qO(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case mm:t+="";break;default:t+=l}}return t}function DT(s){return s+mm+""}function ks(s){const e=s.length;if(Se(e>=2,64408,{path:s}),e===2)return Se(s.charAt(0)===mm&&s.charAt(1)==="",56145,{path:s}),Xe.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=s.indexOf(mm,l);switch((u<0||u>t)&&be(50515,{path:s}),s.charAt(u+1)){case"":const m=s.substring(l,u);let h;a.length===0?h=m:(a+=m,h=a,a=""),r.push(h);break;case"":a+=s.substring(l,u),a+="\0";break;case"":a+=s.substring(l,u+1);break;default:be(61167,{path:s})}l=u+2}return new Xe(r)}const oo="remoteDocuments",Yd="owner",Dl="owner",Sd="mutationQueues",BO="userId",Yr="mutations",PT="batchId",go="userMutationsIndex",VT=["userId","batchId"];function Yf(s,e){return[s,Mn(e)]}function BS(s,e,t){return[s,Mn(e),t]}const FO={},sc="documentMutations",pm="remoteDocumentsV14",HO=["prefixPath","collectionGroup","readTime","documentId"],Wf="documentKeyIndex",GO=["prefixPath","collectionGroup","documentId"],FS="collectionGroupIndex",QO=["collectionGroup","readTime","prefixPath","documentId"],Ad="remoteDocumentGlobal",Zy="remoteDocumentGlobalKey",ic="targets",HS="queryTargetsIndex",KO=["canonicalId","targetId"],ac="targetDocuments",$O=["targetId","path"],c_="documentTargetsIndex",YO=["path","targetId"],gm="targetGlobalKey",Eo="targetGlobal",Nd="collectionParents",WO=["collectionId","parent"],oc="clientMetadata",XO="clientId",Gm="bundles",JO="bundleId",Qm="namedQueries",ZO="name",u_="indexConfiguration",ej="indexId",e0="collectionGroupIndex",tj="collectionGroup",cd="indexState",nj=["indexId","uid"],GS="sequenceNumberIndex",rj=["uid","sequenceNumber"],ud="indexEntries",sj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QS="documentKeyIndex",ij=["indexId","uid","orderedDocumentKey"],Km="documentOverlays",aj=["userId","collectionPath","documentId"],t0="collectionPathOverlayIndex",oj=["userId","collectionPath","largestBatchId"],KS="collectionGroupOverlayIndex",lj=["userId","collectionGroup","largestBatchId"],d_="globals",cj="name",$S=[Sd,Yr,sc,oo,ic,Yd,Eo,ac,oc,Ad,Nd,Gm,Qm],uj=[...$S,Km],YS=[Sd,Yr,sc,pm,ic,Yd,Eo,ac,oc,Ad,Nd,Gm,Qm,Km],WS=YS,h_=[...WS,u_,cd,ud],dj=h_,XS=[...h_,d_],hj=XS;class n0 extends US{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function hn(s,e){const t=ve(s);return Vs.O(t.le,e)}function OT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Aa(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function JS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class wt{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jf(this.root,e,this.comparator,!1)}getReverseIterator(){return new jf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jf(this.root,e,this.comparator,!0)}}class jf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??In.RED,this.left=a??In.EMPTY,this.right=l??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new In(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return In.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jT(this.data.getIterator())}getIteratorFrom(e){return new jT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mt(this.comparator);return t.data=e,t}}class jT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pl(s){return s.hasNext()?s.getNext():void 0}class ir{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new ir([])}unionWith(e){let t=new mt(Pt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ir(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class ZS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function fj(){return typeof atob<"u"}class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new ZS("Invalid base64 string: "+l):l}})(e);return new zt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const mj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(s){if(Se(!!s,39018),typeof s=="string"){let e=0;const t=mj.exec(s);if(Se(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kt(s.seconds),nanos:kt(s.nanos)}}function kt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function hi(s){return typeof s=="string"?zt.fromBase64String(s):zt.fromUint8Array(s)}const eA="server_timestamp",tA="__type__",nA="__previous_value__",rA="__local_write_time__";function $m(s){return(s?.mapValue?.fields||{})[tA]?.stringValue===eA}function Ym(s){const e=s.mapValue.fields[nA];return $m(e)?Ym(e):e}function Rd(s){const e=di(s.mapValue.fields[rA].timestampValue);return new ct(e.seconds,e.nanos)}class pj{constructor(e,t,r,a,l,u,m,h,y,b,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=h,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=E}}const r0="(default)";class ya{constructor(e,t){this.projectId=e,this.database=t||r0}static empty(){return new ya("","")}get isDefaultDatabase(){return this.database===r0}isEqual(e){return e instanceof ya&&e.projectId===this.projectId&&e.database===this.database}}function gj(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new oe(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(s.options.projectId,e)}const f_="__type__",sA="__max__",ia={mapValue:{fields:{__type__:{stringValue:sA}}}},m_="__vector__",lc="value",Xf={nullValue:"NULL_VALUE"};function _a(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?$m(s)?4:iA(s)?9007199254740991:Wm(s)?10:11:be(28295,{value:s})}function Us(s,e){if(s===e)return!0;const t=_a(s);if(t!==_a(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Rd(s).isEqual(Rd(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=di(a.timestampValue),m=di(l.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return hi(a.bytesValue).isEqual(hi(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return kt(a.geoPointValue.latitude)===kt(l.geoPointValue.latitude)&&kt(a.geoPointValue.longitude)===kt(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return kt(a.integerValue)===kt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=kt(a.doubleValue),m=kt(l.doubleValue);return u===m?Id(u)===Id(m):isNaN(u)&&isNaN(m)}return!1})(s,e);case 9:return nc(s.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},m=l.mapValue.fields||{};if(OT(u)!==OT(m))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(m[h]===void 0||!Us(u[h],m[h])))return!1;return!0})(s,e);default:return be(52216,{left:s})}}function Cd(s,e){return(s.values||[]).find((t=>Us(t,e)))!==void 0}function va(s,e){if(s===e)return 0;const t=_a(s),r=_a(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(s.booleanValue,e.booleanValue);case 2:return(function(l,u){const m=kt(l.integerValue||l.doubleValue),h=kt(u.integerValue||u.doubleValue);return m<h?-1:m>h?1:m===h?0:isNaN(m)?isNaN(h)?0:-1:1})(s,e);case 3:return MT(s.timestampValue,e.timestampValue);case 4:return MT(Rd(s),Rd(e));case 5:return Xy(s.stringValue,e.stringValue);case 6:return(function(l,u){const m=hi(l),h=hi(u);return m.compareTo(h)})(s.bytesValue,e.bytesValue);case 7:return(function(l,u){const m=l.split("/"),h=u.split("/");for(let y=0;y<m.length&&y<h.length;y++){const b=je(m[y],h[y]);if(b!==0)return b}return je(m.length,h.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,u){const m=je(kt(l.latitude),kt(u.latitude));return m!==0?m:je(kt(l.longitude),kt(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return LT(s.arrayValue,e.arrayValue);case 10:return(function(l,u){const m=l.fields||{},h=u.fields||{},y=m[lc]?.arrayValue,b=h[lc]?.arrayValue,E=je(y?.values?.length||0,b?.values?.length||0);return E!==0?E:LT(y,b)})(s.mapValue,e.mapValue);case 11:return(function(l,u){if(l===ia.mapValue&&u===ia.mapValue)return 0;if(l===ia.mapValue)return 1;if(u===ia.mapValue)return-1;const m=l.fields||{},h=Object.keys(m),y=u.fields||{},b=Object.keys(y);h.sort(),b.sort();for(let E=0;E<h.length&&E<b.length;++E){const w=Xy(h[E],b[E]);if(w!==0)return w;const S=va(m[h[E]],y[b[E]]);if(S!==0)return S}return je(h.length,b.length)})(s.mapValue,e.mapValue);default:throw be(23264,{he:t})}}function MT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return je(s,e);const t=di(s),r=di(e),a=je(t.seconds,r.seconds);return a!==0?a:je(t.nanos,r.nanos)}function LT(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=va(t[a],r[a]);if(l)return l}return je(t.length,r.length)}function cc(s){return s0(s)}function s0(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=di(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return hi(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return ye.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=s0(l);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${s0(t.fields[u])}`;return a+"}"})(s.mapValue):be(61005,{value:s})}function Jf(s){switch(_a(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ym(s);return e?16+Jf(e):16;case 5:return 2*s.stringValue.length;case 6:return hi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Jf(l)),0)})(s.arrayValue);case 10:case 11:return(function(r){let a=0;return Aa(r.fields,((l,u)=>{a+=l.length+Jf(u)})),a})(s.mapValue);default:throw be(13486,{value:s})}}function Ao(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function i0(s){return!!s&&"integerValue"in s}function kd(s){return!!s&&"arrayValue"in s}function UT(s){return!!s&&"nullValue"in s}function zT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Zf(s){return!!s&&"mapValue"in s}function Wm(s){return(s?.mapValue?.fields||{})[f_]?.stringValue===m_}function dd(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Aa(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=dd(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dd(s.arrayValue.values[t]);return e}return{...s}}function iA(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===sA}const aA={mapValue:{fields:{[f_]:{stringValue:m_},[lc]:{arrayValue:{}}}}};function yj(s){return"nullValue"in s?Xf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Ao(ya.empty(),ye.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Wm(s)?aA:{mapValue:{}}:be(35942,{value:s})}function _j(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Ao(ya.empty(),ye.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?aA:"mapValue"in s?Wm(s)?{mapValue:{}}:ia:be(61959,{value:s})}function qT(s,e){const t=va(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function BT(s,e){const t=va(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dd(t)}setAll(e){let t=Pt.emptyPath(),r={},a=[];e.forEach(((u,m)=>{if(!t.isImmediateParentOf(m)){const h=this.getFieldsMap(t);this.applyChanges(h,r,a),r={},a=[],t=m.popLast()}u?r[m.lastSegment()]=dd(u):a.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Zf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Aa(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Sn(dd(this.value))}}function oA(s){const e=[];return Aa(s.fields,((t,r)=>{const a=new Pt([t]);if(Zf(r)){const l=oA(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new ir(e)}class At{constructor(e,t,r,a,l,u,m){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=m}static newInvalidDocument(e){return new At(e,0,Ne.min(),Ne.min(),Ne.min(),Sn.empty(),0)}static newFoundDocument(e,t,r,a){return new At(e,1,t,Ne.min(),r,a,0)}static newNoDocument(e,t){return new At(e,2,t,Ne.min(),Ne.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new At(e,3,t,Ne.min(),Ne.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ba{constructor(e,t){this.position=e,this.inclusive=t}}function FT(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],u=s.position[a];if(l.field.isKeyField()?r=ye.comparator(ye.fromName(u.referenceValue),t.key):r=va(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function HT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Us(s.position[t],e.position[t]))return!1;return!0}class Dd{constructor(e,t="asc"){this.field=e,this.dir=t}}function vj(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class lA{}class et extends lA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new bj(e,t,r):t==="array-contains"?new Tj(e,r):t==="in"?new mA(e,r):t==="not-in"?new wj(e,r):t==="array-contains-any"?new Ij(e,r):new et(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xj(e,r):new Ej(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(va(t,this.value)):t!==null&&_a(this.value)===_a(t)&&this.matchesComparison(va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ft extends lA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ft(e,t)}matches(e){return uc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uc(s){return s.op==="and"}function a0(s){return s.op==="or"}function p_(s){return cA(s)&&uc(s)}function cA(s){for(const e of s.filters)if(e instanceof ft)return!1;return!0}function o0(s){if(s instanceof et)return s.field.canonicalString()+s.op.toString()+cc(s.value);if(p_(s))return s.filters.map((e=>o0(e))).join(",");{const e=s.filters.map((t=>o0(t))).join(",");return`${s.op}(${e})`}}function uA(s,e){return s instanceof et?(function(r,a){return a instanceof et&&r.op===a.op&&r.field.isEqual(a.field)&&Us(r.value,a.value)})(s,e):s instanceof ft?(function(r,a){return a instanceof ft&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,m)=>l&&uA(u,a.filters[m])),!0):!1})(s,e):void be(19439)}function dA(s,e){const t=s.filters.concat(e);return ft.create(t,s.op)}function hA(s){return s instanceof et?(function(t){return`${t.field.canonicalString()} ${t.op} ${cc(t.value)}`})(s):s instanceof ft?(function(t){return t.op.toString()+" {"+t.getFilters().map(hA).join(" ,")+"}"})(s):"Filter"}class bj extends et{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class xj extends et{constructor(e,t){super(e,"in",t),this.keys=fA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ej extends et{constructor(e,t){super(e,"not-in",t),this.keys=fA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fA(s,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class Tj extends et{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kd(t)&&Cd(t.arrayValue,this.value)}}class mA extends et{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cd(this.value.arrayValue,t)}}class wj extends et{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cd(this.value.arrayValue,t)}}class Ij extends et{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Cd(this.value.arrayValue,r)))}}class Sj{constructor(e,t=null,r=[],a=[],l=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=m,this.Te=null}}function l0(s,e=null,t=[],r=[],a=null,l=null,u=null){return new Sj(s,e,t,r,a,l,u)}function No(s){const e=ve(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>o0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),$d(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>cc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>cc(r))).join(",")),e.Te=t}return e.Te}function Wd(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!vj(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!uA(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!HT(s.startAt,e.startAt)&&HT(s.endAt,e.endAt)}function ym(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function _m(s,e){return s.filters.filter((t=>t instanceof et&&t.field.isEqual(e)))}function GT(s,e,t){let r=Xf,a=!0;for(const l of _m(s,e)){let u=Xf,m=!0;switch(l.op){case"<":case"<=":u=yj(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,m=!1;break;case"!=":case"not-in":u=Xf}qT({value:r,inclusive:a},{value:u,inclusive:m})<0&&(r=u,a=m)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const u=t.position[l];qT({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function QT(s,e,t){let r=ia,a=!0;for(const l of _m(s,e)){let u=ia,m=!0;switch(l.op){case">=":case">":u=_j(l.value),m=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,m=!1;break;case"!=":case"not-in":u=ia}BT({value:r,inclusive:a},{value:u,inclusive:m})>0&&(r=u,a=m)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const u=t.position[l];BT({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}class pi{constructor(e,t=null,r=[],a=[],l=null,u="F",m=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=m,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function pA(s,e,t,r,a,l,u,m){return new pi(s,e,t,r,a,l,u,m)}function Ac(s){return new pi(s)}function KT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Aj(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function g_(s){return s.collectionGroup!==null}function Yl(s){const e=ve(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new mt(Pt.comparator);return u.filters.forEach((h=>{h.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Dd(l,r))})),t.has(Pt.keyField().canonicalString())||e.Ie.push(new Dd(Pt.keyField(),r))}return e.Ie}function Qn(s){const e=ve(s);return e.Ee||(e.Ee=Nj(e,Yl(s))),e.Ee}function Nj(s,e){if(s.limitType==="F")return l0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Dd(a.field,l)}));const t=s.endAt?new ba(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new ba(s.startAt.position,s.startAt.inclusive):null;return l0(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function c0(s,e){const t=s.filters.concat([e]);return new pi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Rj(s,e){const t=s.explicitOrderBy.concat([e]);return new pi(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function vm(s,e,t){return new pi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Cj(s,e){return new pi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,e,s.endAt)}function kj(s,e){return new pi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,e)}function Xd(s,e){return Wd(Qn(s),Qn(e))&&s.limitType===e.limitType}function gA(s){return`${No(Qn(s))}|lt:${s.limitType}`}function Ul(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>hA(a))).join(", ")}]`),$d(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>cc(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>cc(a))).join(",")),`Target(${r})`})(Qn(s))}; limitType=${s.limitType})`}function Jd(s,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ye.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(s,e)&&(function(r,a){for(const l of Yl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(r,a){return!(r.startAt&&!(function(u,m,h){const y=FT(u,m,h);return u.inclusive?y<=0:y<0})(r.startAt,Yl(r),a)||r.endAt&&!(function(u,m,h){const y=FT(u,m,h);return u.inclusive?y>=0:y>0})(r.endAt,Yl(r),a))})(s,e)}function yA(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function _A(s){return(e,t)=>{let r=!1;for(const a of Yl(s)){const l=Dj(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function Dj(s,e,t){const r=s.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,u,m){const h=u.data.field(l),y=m.data.field(l);return h!==null&&y!==null?va(h,y):be(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return be(19790,{direction:s.dir})}}class gi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Aa(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return JS(this.inner)}size(){return this.innerSize}}const Pj=new wt(ye.comparator);function ar(){return Pj}const vA=new wt(ye.comparator);function Wu(...s){let e=vA;for(const t of s)e=e.insert(t.key,t);return e}function bA(s){let e=vA;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ds(){return hd()}function xA(){return hd()}function hd(){return new gi((s=>s.toString()),((s,e)=>s.isEqual(e)))}const Vj=new wt(ye.comparator),Oj=new mt(ye.comparator);function Ge(...s){let e=Oj;for(const t of s)e=e.add(t);return e}const jj=new mt(je);function y_(){return jj}function __(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Id(e)?"-0":e}}function EA(s){return{integerValue:""+s}}function TA(s,e){return qS(e)?EA(e):__(s,e)}class Xm{constructor(){this._=void 0}}function Mj(s,e,t){return s instanceof dc?(function(a,l){const u={fields:{[tA]:{stringValue:eA},[rA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&$m(l)&&(l=Ym(l)),l&&(u.fields[nA]=l),{mapValue:u}})(t,e):s instanceof Ro?IA(s,e):s instanceof Co?SA(s,e):(function(a,l){const u=wA(a,l),m=$T(u)+$T(a.Ae);return i0(u)&&i0(a.Ae)?EA(m):__(a.serializer,m)})(s,e)}function Lj(s,e,t){return s instanceof Ro?IA(s,e):s instanceof Co?SA(s,e):t}function wA(s,e){return s instanceof hc?(function(r){return i0(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class dc extends Xm{}class Ro extends Xm{constructor(e){super(),this.elements=e}}function IA(s,e){const t=AA(e);for(const r of s.elements)t.some((a=>Us(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Co extends Xm{constructor(e){super(),this.elements=e}}function SA(s,e){let t=AA(e);for(const r of s.elements)t=t.filter((a=>!Us(a,r)));return{arrayValue:{values:t}}}class hc extends Xm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function $T(s){return kt(s.integerValue||s.doubleValue)}function AA(s){return kd(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Zd{constructor(e,t){this.field=e,this.transform=t}}function Uj(s,e){return s.field.isEqual(e.field)&&(function(r,a){return r instanceof Ro&&a instanceof Ro||r instanceof Co&&a instanceof Co?nc(r.elements,a.elements,Us):r instanceof hc&&a instanceof hc?Us(r.Ae,a.Ae):r instanceof dc&&a instanceof dc})(s.transform,e.transform)}class zj{constructor(e,t){this.version=e,this.transformResults=t}}class Vt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vt}static exists(e){return new Vt(void 0,e)}static updateTime(e){return new Vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function em(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Jm{}function NA(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Rc(s.key,Vt.none()):new Nc(s.key,s.data,Vt.none());{const t=s.data,r=Sn.empty();let a=new mt(Pt.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new yi(s.key,r,new ir(a.toArray()),Vt.none())}}function qj(s,e,t){s instanceof Nc?(function(a,l,u){const m=a.value.clone(),h=WT(a.fieldTransforms,l,u.transformResults);m.setAll(h),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(s,e,t):s instanceof yi?(function(a,l,u){if(!em(a.precondition,l))return void l.convertToUnknownDocument(u.version);const m=WT(a.fieldTransforms,l,u.transformResults),h=l.data;h.setAll(RA(a)),h.setAll(m),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(s,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function fd(s,e,t,r){return s instanceof Nc?(function(l,u,m,h){if(!em(l.precondition,u))return m;const y=l.value.clone(),b=XT(l.fieldTransforms,h,u);return y.setAll(b),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(s,e,t,r):s instanceof yi?(function(l,u,m,h){if(!em(l.precondition,u))return m;const y=XT(l.fieldTransforms,h,u),b=u.data;return b.setAll(RA(l)),b.setAll(y),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(s,e,t,r):(function(l,u,m){return em(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m})(s,e,t)}function Bj(s,e){let t=null;for(const r of s.fieldTransforms){const a=e.data.field(r.field),l=wA(r.transform,a||null);l!=null&&(t===null&&(t=Sn.empty()),t.set(r.field,l))}return t||null}function YT(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&nc(r,a,((l,u)=>Uj(l,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Nc extends Jm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class yi extends Jm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function RA(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function WT(s,e,t){const r=new Map;Se(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let a=0;a<t.length;a++){const l=s[a],u=l.transform,m=e.data.field(l.field);r.set(l.field,Lj(u,m,t[a]))}return r}function XT(s,e,t){const r=new Map;for(const a of s){const l=a.transform,u=t.data.field(a.field);r.set(a.field,Mj(l,u,e))}return r}class Rc extends Jm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v_ extends Jm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class b_{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&qj(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=xA();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let m=this.applyToLocalView(u,l.mutatedFields);m=t.has(a.key)?null:m;const h=NA(u,m);h!==null&&r.set(a.key,h),u.isValidDocument()||u.convertToNoDocument(Ne.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&nc(this.mutations,e.mutations,((t,r)=>YT(t,r)))&&nc(this.baseMutations,e.baseMutations,((t,r)=>YT(t,r)))}}class x_{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Se(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return Vj})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new x_(e,t,r,a)}}class E_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Fj{constructor(e,t){this.count=e,this.unchangedNames=t}}var on,nt;function CA(s){switch(s){case Q.OK:return be(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return be(15467,{code:s})}}function kA(s){if(s===void 0)return Kt("GRPC error has no .code"),Q.UNKNOWN;switch(s){case on.OK:return Q.OK;case on.CANCELLED:return Q.CANCELLED;case on.UNKNOWN:return Q.UNKNOWN;case on.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case on.INTERNAL:return Q.INTERNAL;case on.UNAVAILABLE:return Q.UNAVAILABLE;case on.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case on.NOT_FOUND:return Q.NOT_FOUND;case on.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case on.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case on.ABORTED:return Q.ABORTED;case on.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case on.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case on.DATA_LOSS:return Q.DATA_LOSS;default:return be(39323,{code:s})}}(nt=on||(on={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function DA(){return new TextEncoder}const Hj=new ca([4294967295,4294967295],0);function JT(s){const e=DA().encode(s),t=new wS;return t.update(e),new Uint8Array(t.digest())}function ZT(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ca([t,r],0),new ca([a,l],0)]}class T_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Xu(`Invalid padding: ${t}`);if(r<0)throw new Xu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Xu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ca.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(ca.fromNumber(r)));return a.compare(Hj)===1&&(a=new ca([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=JT(e),[r,a]=ZT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);if(!this.we(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new T_(l,a,t);return r.forEach((m=>u.insert(m))),u}insert(e){if(this.ge===0)return;const t=JT(e),[r,a]=ZT(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class eh{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,th.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new eh(Ne.min(),a,new wt(je),ar(),Ge())}}class th{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new th(r,t,Ge(),Ge(),Ge())}}class tm{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class PA{constructor(e,t){this.targetId=e,this.Ce=t}}class VA{constructor(e,t,r=zt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class ew{constructor(){this.ve=0,this.Fe=tw(),this.Me=zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),r=Ge();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:be(38017,{changeType:l})}})),new th(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=tw()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Gj{constructor(e){this.Ge=e,this.ze=new Map,this.je=ar(),this.He=Mf(),this.Je=Mf(),this.Ze=new wt(je)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(ym(l))if(r===0){const u=new ye(l.path);this.et(t,u,At.newNoDocument(u,Ne.min()))}else Se(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const m=this.ut(e),h=m?this.ct(m,e,u):1;if(h!==0){this.it(t);const y=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,m;try{u=hi(r).toUint8Array()}catch(h){if(h instanceof ZS)return Ls("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{m=new T_(u,a,l)}catch(h){return Ls(h instanceof Xu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const m=this.ot(u);if(m){if(l.current&&ym(m.target)){const h=new ye(m.target.path);this.It(h).has(u)||this.Et(u,h)||this.et(u,h,At.newNoDocument(h,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let r=Ge();this.Je.forEach(((l,u)=>{let m=!0;u.forEachWhile((h=>{const y=this.ot(h);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new eh(e,t,this.Ze,this.je,r);return this.je=ar(),this.He=Mf(),this.Je=Mf(),this.Ze=new wt(je),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new ew,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new mt(je),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new mt(je),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ew),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Mf(){return new wt(ye.comparator)}function tw(){return new wt(ye.comparator)}const Qj={asc:"ASCENDING",desc:"DESCENDING"},Kj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$j={and:"AND",or:"OR"};class Yj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function u0(s,e){return s.useProto3Json||$d(e)?e:{value:e}}function fc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OA(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function Wj(s,e){return fc(s,e.toTimestamp())}function $t(s){return Se(!!s,49232),Ne.fromTimestamp((function(t){const r=di(t);return new ct(r.seconds,r.nanos)})(s))}function w_(s,e){return d0(s,e).canonicalString()}function d0(s,e){const t=(function(a){return new Xe(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function jA(s){const e=Xe.fromString(s);return Se(QA(e),10190,{key:e.toString()}),e}function Pd(s,e){return w_(s.databaseId,e.path)}function Os(s,e){const t=jA(e);if(t.get(1)!==s.databaseId.projectId)throw new oe(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new oe(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ye(UA(t))}function MA(s,e){return w_(s.databaseId,e)}function LA(s){const e=jA(s);return e.length===4?Xe.emptyPath():UA(e)}function h0(s){return new Xe(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function UA(s){return Se(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function nw(s,e,t){return{name:Pd(s,e),fields:t.value.mapValue.fields}}function zA(s,e,t){const r=Os(s,e.name),a=$t(e.updateTime),l=e.createTime?$t(e.createTime):Ne.min(),u=new Sn({mapValue:{fields:e.fields}}),m=At.newFoundDocument(r,a,l,u);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Xj(s,e){return"found"in e?(function(r,a){Se(!!a.found,43571),a.found.name,a.found.updateTime;const l=Os(r,a.found.name),u=$t(a.found.updateTime),m=a.found.createTime?$t(a.found.createTime):Ne.min(),h=new Sn({mapValue:{fields:a.found.fields}});return At.newFoundDocument(l,u,m,h)})(s,e):"missing"in e?(function(r,a){Se(!!a.missing,3894),Se(!!a.readTime,22933);const l=Os(r,a.missing),u=$t(a.readTime);return At.newNoDocument(l,u)})(s,e):be(7234,{result:e})}function Jj(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:be(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,b){return y.useProto3Json?(Se(b===void 0||typeof b=="string",58123),zt.fromBase64String(b||"")):(Se(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),zt.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&(function(y){const b=y.code===void 0?Q.UNKNOWN:kA(y.code);return new oe(b,y.message||"")})(u);t=new VA(r,a,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Os(s,r.document.name),l=$t(r.document.updateTime),u=r.document.createTime?$t(r.document.createTime):Ne.min(),m=new Sn({mapValue:{fields:r.document.fields}}),h=At.newFoundDocument(a,l,u,m),y=r.targetIds||[],b=r.removedTargetIds||[];t=new tm(y,b,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Os(s,r.document),l=r.readTime?$t(r.readTime):Ne.min(),u=At.newNoDocument(a,l),m=r.removedTargetIds||[];t=new tm([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Os(s,r.document),l=r.removedTargetIds||[];t=new tm([],l,a,null)}else{if(!("filter"in e))return be(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new Fj(a,l),m=r.targetId;t=new PA(m,u)}}return t}function Vd(s,e){let t;if(e instanceof Nc)t={update:nw(s,e.key,e.value)};else if(e instanceof Rc)t={delete:Pd(s,e.key)};else if(e instanceof yi)t={update:nw(s,e.key,e.data),updateMask:sM(e.fieldMask)};else{if(!(e instanceof v_))return be(16599,{dt:e.type});t={verify:Pd(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const m=u.transform;if(m instanceof dc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ro)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Co)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof hc)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw be(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:Wj(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:be(27497)})(s,e.precondition)),t}function f0(s,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Vt.updateTime($t(l.updateTime)):l.exists!==void 0?Vt.exists(l.exists):Vt.none()})(e.currentDocument):Vt.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(u,m){let h=null;if("setToServerValue"in m)Se(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),h=new dc;else if("appendMissingElements"in m){const b=m.appendMissingElements.values||[];h=new Ro(b)}else if("removeAllFromArray"in m){const b=m.removeAllFromArray.values||[];h=new Co(b)}else"increment"in m?h=new hc(u,m.increment):be(16584,{proto:m});const y=Pt.fromServerFormat(m.fieldPath);return new Zd(y,h)})(s,a))):[];if(e.update){e.update.name;const a=Os(s,e.update.name),l=new Sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(h){const y=h.fieldPaths||[];return new ir(y.map((b=>Pt.fromServerFormat(b))))})(e.updateMask);return new yi(a,l,u,t,r)}return new Nc(a,l,t,r)}if(e.delete){const a=Os(s,e.delete);return new Rc(a,t)}if(e.verify){const a=Os(s,e.verify);return new v_(a,t)}return be(1463,{proto:e})}function Zj(s,e){return s&&s.length>0?(Se(e!==void 0,14353),s.map((t=>(function(a,l){let u=a.updateTime?$t(a.updateTime):$t(l);return u.isEqual(Ne.min())&&(u=$t(l)),new zj(u,a.transformResults||[])})(t,e)))):[]}function qA(s,e){return{documents:[MA(s,e.path)]}}function BA(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=MA(s,a);const l=(function(y){if(y.length!==0)return GA(ft.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((b=>(function(w){return{field:zl(w.field),direction:tM(w.dir)}})(b)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=u0(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function FA(s){let e=LA(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Se(r===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(E){const w=HA(E);return w instanceof ft&&p_(w)?w.getFilters():[w]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((w=>(function(q){return new Dd(ql(q.field),(function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(w)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let w;return w=typeof E=="object"?E.value:E,$d(w)?null:w})(t.limit));let h=null;t.startAt&&(h=(function(E){const w=!!E.before,S=E.values||[];return new ba(S,w)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const w=!E.before,S=E.values||[];return new ba(S,w)})(t.endAt)),pA(e,a,u,l,m,"F",h,y)}function eM(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HA(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ql(t.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=ql(t.unaryFilter.field);return et.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ql(t.unaryFilter.field);return et.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ql(t.unaryFilter.field);return et.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(s):s.fieldFilter!==void 0?(function(t){return et.create(ql(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ft.create(t.compositeFilter.filters.map((r=>HA(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(s):be(30097,{filter:s})}function tM(s){return Qj[s]}function nM(s){return Kj[s]}function rM(s){return $j[s]}function zl(s){return{fieldPath:s.canonicalString()}}function ql(s){return Pt.fromServerFormat(s.fieldPath)}function GA(s){return s instanceof et?(function(t){if(t.op==="=="){if(zT(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NAN"}};if(UT(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zT(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NOT_NAN"}};if(UT(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zl(t.field),op:nM(t.op),value:t.value}}})(s):s instanceof ft?(function(t){const r=t.getFilters().map((a=>GA(a)));return r.length===1?r[0]:{compositeFilter:{op:rM(t.op),filters:r}}})(s):be(54877,{filter:s})}function sM(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function QA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function KA(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class ai{constructor(e,t,r,a,l=Ne.min(),u=Ne.min(),m=zt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=h}withSequenceNumber(e){return new ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $A{constructor(e){this.yt=e}}function iM(s,e){let t;if(e.document)t=zA(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),a=Do(e.noDocument.readTime);t=At.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return be(56709);{const r=ye.fromSegments(e.unknownDocument.path),a=Do(e.unknownDocument.version);t=At.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new ct(a[0],a[1]);return Ne.fromTimestamp(l)})(e.readTime)),t}function rw(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,u){return{name:Pd(l,u.key),fields:u.data.value.mapValue.fields,updateTime:fc(l,u.version.toTimestamp()),createTime:fc(l,u.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ko(e.version)};else{if(!e.isUnknownDocument())return be(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:ko(e.version)}}return r}function bm(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function ko(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Do(s){const e=new ct(s.seconds,s.nanoseconds);return Ne.fromTimestamp(e)}function co(s,e){const t=(e.baseMutations||[]).map((l=>f0(s.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const m=e.mutations[l+1];u.updateTransforms=m.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>f0(s.yt,l))),a=ct.fromMillis(e.localWriteTimeMs);return new b_(e.batchId,a,t,r)}function Ju(s){const e=Do(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Do(s.lastLimboFreeSnapshotVersion):Ne.min();let r;return r=(function(l){return l.documents!==void 0})(s.query)?(function(l){const u=l.documents.length;return Se(u===1,1966,{count:u}),Qn(Ac(LA(l.documents[0])))})(s.query):(function(l){return Qn(FA(l))})(s.query),new ai(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,zt.fromBase64String(s.resumeToken))}function YA(s,e){const t=ko(e.snapshotVersion),r=ko(e.lastLimboFreeSnapshotVersion);let a;a=ym(e.target)?qA(s.yt,e.target):BA(s.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:No(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function I_(s){const e=FA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?vm(e,e.limit,"L"):e}function Ny(s,e){return new E_(e.largestBatchId,f0(s.yt,e.overlayMutation))}function sw(s,e){const t=e.path.lastSegment();return[s,Mn(e.path.popLast()),t]}function iw(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:ko(r.readTime),documentKey:Mn(r.documentKey.path),largestBatchId:r.largestBatchId}}class aM{getBundleMetadata(e,t){return aw(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:Do(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return aw(e).put((function(a){return{bundleId:a.id,createTime:ko($t(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return ow(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:I_(l.bundledQuery),readTime:Do(l.readTime)}})(r)}))}saveNamedQuery(e,t){return ow(e).put((function(a){return{name:a.name,readTime:ko($t(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function aw(s){return hn(s,Gm)}function ow(s){return hn(s,Qm)}class Zm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Zm(e,r)}getOverlay(e,t){return zu(e).get(sw(this.userId,t)).next((r=>r?Ny(this.serializer,r):null))}getOverlays(e,t){const r=Ds();return U.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,u)=>{const m=new E_(t,u);a.push(this.bt(e,m))})),U.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((u=>a.add(Mn(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const m=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(zu(e).X(t0,m))})),U.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Ds(),l=Mn(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return zu(e).H(t0,u).next((m=>{for(const h of m){const y=Ny(this.serializer,h);a.set(y.getKey(),y)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Ds();let u;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zu(e).ee({index:KS,range:m},((h,y,b)=>{const E=Ny(this.serializer,y);l.size()<a||E.largestBatchId===u?(l.set(E.getKey(),E),u=E.largestBatchId):b.done()})).next((()=>l))}bt(e,t){return zu(e).put((function(a,l,u){const[m,h,y]=sw(l,u.mutation.key);return{userId:l,collectionPath:h,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Vd(a.yt,u.mutation)}})(this.serializer,this.userId,t))}}function zu(s){return hn(s,Km)}class oM{St(e){return hn(e,d_)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t?.value;return r?zt.fromUint8Array(r):zt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class uo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(kt(e.integerValue));else if("doubleValue"in e){const r=kt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Id(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=di(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(hi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?iA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Wm(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):be(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=lc,l=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(kt(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}uo.Wt=new uo;const Vl=255;function lM(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function lw(s){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const u=lM(255&r[l]);if(a+=u,u!==8)break}return a})(s);return Math.ceil(e/8)}class cM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=lw(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=lw(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Vl),this.sn(255)}_n(){this.an(Vl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Vl?(this.sn(Vl),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Vl?(this.an(Vl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class uM{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class dM{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class qu{constructor(){this.cn=new cM,this.ascending=new uM(this.cn),this.descending=new dM(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class ho{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new ho(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:nm(this.Tn),directionalValue:nm(this.In),orderedDocumentKey:nm(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Zi(s,e){let t=s.hn-e.hn;return t!==0?t:(t=cw(s.Tn,e.Tn),t!==0?t:(t=cw(s.In,e.In),t!==0?t:ye.comparator(s.Pn,e.Pn)))}function cw(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function nm(s){return dI()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(s):s}function uw(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(s)}class dw{constructor(e){this.Vn=new mt(((t,r)=>Pt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Se(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=Jy(e);if(t!==void 0&&!this.pn(t))return!1;const r=ao(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const m=this.Vn.getIterator().getNext();if(!a.has(m.field.canonicalString())){const h=r[l];if(!this.yn(m,h)||!this.wn(this.dn[u++],h))return!1}++l}for(;l<r.length;++l){const m=r[l];if(u>=this.dn.length||!this.wn(this.dn[u++],m))return!1}return!0}bn(){if(this.fn)return null;let e=new mt(Pt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new $f(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new $f(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new $f(r.field,r.dir==="asc"?0:1)));return new fm(fm.UNKNOWN_ID,this.collectionId,t,wd.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function WA(s){if(Se(s instanceof et||s instanceof ft,20012),s instanceof et){if(s instanceof mA){const t=s.value.arrayValue?.values?.map((r=>et.create(s.field,"==",r)))||[];return ft.create(t,"or")}return s}const e=s.filters.map((t=>WA(t)));return ft.create(e,s.op)}function hM(s){if(s.getFilters().length===0)return[];const e=g0(WA(s));return Se(XA(e),7391),m0(e)||p0(e)?[e]:e.getFilters()}function m0(s){return s instanceof et}function p0(s){return s instanceof ft&&p_(s)}function XA(s){return m0(s)||p0(s)||(function(t){if(t instanceof ft&&a0(t)){for(const r of t.getFilters())if(!m0(r)&&!p0(r))return!1;return!0}return!1})(s)}function g0(s){if(Se(s instanceof et||s instanceof ft,34018),s instanceof et)return s;if(s.filters.length===1)return g0(s.filters[0]);const e=s.filters.map((r=>g0(r)));let t=ft.create(e,s.op);return t=xm(t),XA(t)?t:(Se(t instanceof ft,64498),Se(uc(t),40251),Se(t.filters.length>1,57927),t.filters.reduce(((r,a)=>S_(r,a))))}function S_(s,e){let t;return Se(s instanceof et||s instanceof ft,38388),Se(e instanceof et||e instanceof ft,25473),t=s instanceof et?e instanceof et?(function(a,l){return ft.create([a,l],"and")})(s,e):hw(s,e):e instanceof et?hw(e,s):(function(a,l){if(Se(a.filters.length>0&&l.filters.length>0,48005),uc(a)&&uc(l))return dA(a,l.getFilters());const u=a0(a)?a:l,m=a0(a)?l:a,h=u.filters.map((y=>S_(y,m)));return ft.create(h,"or")})(s,e),xm(t)}function hw(s,e){if(uc(e))return dA(e,s.getFilters());{const t=e.filters.map((r=>S_(s,r)));return ft.create(t,"or")}}function xm(s){if(Se(s instanceof et||s instanceof ft,11850),s instanceof et)return s;const e=s.getFilters();if(e.length===1)return xm(e[0]);if(cA(s))return s;const t=e.map((a=>xm(a))),r=[];return t.forEach((a=>{a instanceof et?r.push(a):a instanceof ft&&(a.op===s.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:ft.create(r,s.op)}class fM{constructor(){this.Sn=new A_}addToCollectionParentIndex(e,t){return this.Sn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(xr.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class A_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new mt(Xe.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new mt(Xe.comparator)).toArray()}}const fw="IndexedDbIndexManager",Lf=new Uint8Array(0);class mM{constructor(e,t){this.databaseId=t,this.Dn=new A_,this.Cn=new gi((r=>No(r)),((r,a)=>Wd(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:Mn(a)};return mw(e).put(l)}return U.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[DS(t),""],!1,!0);return mw(e).H(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;r.push(ks(u.parent))}return r}))}addFieldIndex(e,t){const r=Bu(e),a=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=jl(e);return l.next((m=>{u.put(iw(m,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Bu(e),a=jl(e),l=Ol(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Bu(e),r=Ol(e),a=jl(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return U.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new dw(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=Ol(e);let a=!0;const l=new Map;return U.forEach(this.vn(t),(u=>this.Fn(e,u).next((m=>{a&&(a=!!m),l.set(u,m)})))).next((()=>{if(a){let u=Ge();const m=[];return U.forEach(l,((h,y)=>{ce(fw,`Using index ${(function(ae){return`id=${ae.indexId}|cg=${ae.collectionGroup}|f=${ae.fields.map((fe=>`${fe.fieldPath}:${fe.kind}`)).join(",")}`})(h)} to execute ${No(t)}`);const b=(function(ae,fe){const se=Jy(fe);if(se===void 0)return null;for(const he of _m(ae,se.fieldPath))switch(he.op){case"array-contains-any":return he.value.arrayValue.values||[];case"array-contains":return[he.value]}return null})(y,h),E=(function(ae,fe){const se=new Map;for(const he of ao(fe))for(const A of _m(ae,he.fieldPath))switch(A.op){case"==":case"in":se.set(he.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return se.set(he.fieldPath.canonicalString(),A.value),Array.from(se.values())}return null})(y,h),w=(function(ae,fe){const se=[];let he=!0;for(const A of ao(fe)){const N=A.kind===0?GT(ae,A.fieldPath,ae.startAt):QT(ae,A.fieldPath,ae.startAt);se.push(N.value),he&&(he=N.inclusive)}return new ba(se,he)})(y,h),S=(function(ae,fe){const se=[];let he=!0;for(const A of ao(fe)){const N=A.kind===0?QT(ae,A.fieldPath,ae.endAt):GT(ae,A.fieldPath,ae.endAt);se.push(N.value),he&&(he=N.inclusive)}return new ba(se,he)})(y,h),q=this.Mn(h,y,w),Y=this.Mn(h,y,S),te=this.xn(h,y,E),R=this.On(h.indexId,b,q,w.inclusive,Y,S.inclusive,te);return U.forEach(R,(Z=>r.Z(Z,t.limit).next((ae=>{ae.forEach((fe=>{const se=ye.fromSegments(fe.documentKey);u.has(se)||(u=u.add(se),m.push(se))}))}))))})).next((()=>m))}return U.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=hM(ft.create(e.filters,"and")).map((r=>l0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,u,m){const h=(t!=null?t.length:1)*Math.max(r.length,l.length),y=h/(t!=null?t.length:1),b=[];for(let E=0;E<h;++E){const w=t?this.Nn(t[E/y]):Lf,S=this.Bn(e,w,r[E%y],a),q=this.Ln(e,w,l[E%y],u),Y=m.map((te=>this.Bn(e,w,te,!0)));b.push(...this.createRange(S,q,Y))}return b}Bn(e,t,r,a){const l=new ho(e,ye.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new ho(e,ye.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new dw(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const m of l)r.gn(m)&&(!u||m.fields.length>u.fields.length)&&(u=m);return u}))}getIndexType(e,t){let r=2;const a=this.vn(t);return U.forEach(a,(l=>this.Fn(e,l).next((u=>{u?r!==0&&u.fields.length<(function(h){let y=new mt(Pt.comparator),b=!1;for(const E of h.filters)for(const w of E.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?b=!0:y=y.add(w.field));for(const E of h.orderBy)E.field.isKeyField()||(y=y.add(E.field));return y.size+(b?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new qu;for(const a of ao(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.ln(a.kind);uo.Wt.Dt(l,u)}return r.un()}Nn(e){const t=new qu;return uo.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new qu;return uo.Wt.Dt(Ao(this.databaseId,t),r.ln((function(l){const u=ao(l);return u.length===0?0:u[u.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new qu);let l=0;for(const u of ao(e)){const m=r[l++];for(const h of a)if(this.qn(t,u.fieldPath)&&kd(m))a=this.Un(a,u,m);else{const y=h.ln(u.kind);uo.Wt.Dt(m,y)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const m of a){const h=new qu;h.seed(m.un()),uo.Wt.Dt(u,h.ln(t.kind)),l.push(h)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof et&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Bu(e),a=jl(e);return(t?r.H(e0,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const u=[];return U.forEach(l,(m=>a.get([m.indexId,this.uid]).next((h=>{u.push((function(b,E){const w=E?new wd(E.sequenceNumber,new xr(Do(E.readTime),new ye(ks(E.documentKey)),E.largestBatchId)):wd.empty(),S=b.fields.map((([q,Y])=>new $f(Pt.fromServerFormat(q),Y)));return new fm(b.indexId,b.collectionGroup,S,w)})(m,h))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:je(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Bu(e),l=jl(e);return this.Wn(e).next((u=>a.H(e0,IDBKeyRange.bound(t,t)).next((m=>U.forEach(m,(h=>l.put(iw(h.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return U.forEach(t,((a,l)=>{const u=r.get(a.collectionGroup);return(u?U.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((m=>(r.set(a.collectionGroup,m),U.forEach(m,(h=>this.Qn(e,a,h).next((y=>{const b=this.Gn(l,h);return y.isEqual(b)?U.resolve():this.zn(e,l,h,y,b)})))))))}))}jn(e,t,r,a){return Ol(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return Ol(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=Ol(e);let l=new mt(Zi);return a.ee({index:QS,range:IDBKeyRange.only([r.indexId,this.uid,nm(this.Kn(r,t))])},((u,m)=>{l=l.add(new ho(r.indexId,t,uw(m.arrayValue),uw(m.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new mt(Zi);const a=this.kn(t,e);if(a==null)return r;const l=Jy(t);if(l!=null){const u=e.data.field(l.fieldPath);if(kd(u))for(const m of u.arrayValue.values||[])r=r.add(new ho(t.indexId,e.key,this.Nn(m),a))}else r=r.add(new ho(t.indexId,e.key,Lf,a));return r}zn(e,t,r,a,l){ce(fw,"Updating index entries for document '%s'",t.key);const u=[];return(function(h,y,b,E,w){const S=h.getIterator(),q=y.getIterator();let Y=Pl(S),te=Pl(q);for(;Y||te;){let R=!1,Z=!1;if(Y&&te){const ae=b(Y,te);ae<0?Z=!0:ae>0&&(R=!0)}else Y!=null?Z=!0:R=!0;R?(E(te),te=Pl(q)):Z?(w(Y),Y=Pl(S)):(Y=Pl(S),te=Pl(q))}})(a,l,Zi,(m=>{u.push(this.jn(e,t,r,m))}),(m=>{u.push(this.Hn(e,t,r,m))})),U.waitFor(u)}Wn(e){let t=1;return jl(e).ee({index:GS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,m)=>Zi(u,m))).filter(((u,m,h)=>!m||Zi(u,h[m-1])!==0));const a=[];a.push(e);for(const u of r){const m=Zi(u,e),h=Zi(u,t);if(m===0)a[0]=e.En();else if(m>0&&h<0)a.push(u),a.push(u.En());else if(h>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Jn(a[u],a[u+1]))return[];const m=a[u].An(this.uid,Lf,ye.empty()),h=a[u+1].An(this.uid,Lf,ye.empty());l.push(IDBKeyRange.bound(m,h))}return l}Jn(e,t){return Zi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pw)}getMinOffset(e,t){return U.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||be(44426))))).next(pw)}}function mw(s){return hn(s,Nd)}function Ol(s){return hn(s,ud)}function Bu(s){return hn(s,u_)}function jl(s){return hn(s,cd)}function pw(s){Se(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;o_(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new xr(e.readTime,e.documentKey,t)}const gw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JA=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function ZA(s,e,t){const r=s.store(Yr),a=s.store(sc),l=[],u=IDBKeyRange.only(t.batchId);let m=0;const h=r.ee({range:u},((b,E,w)=>(m++,w.delete())));l.push(h.next((()=>{Se(m===1,47070,{batchId:t.batchId})})));const y=[];for(const b of t.mutations){const E=BS(e,b.key.path,t.batchId);l.push(a.delete(E)),y.push(b.key)}return U.waitFor(l).next((()=>y))}function Em(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw be(14731);e=s.noDocument}return JSON.stringify(e).length}On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(JA,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);class ep{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){Se(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new ep(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ea(e).ee({index:go,range:r},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=Bl(e),u=ea(e);return u.add({}).next((m=>{Se(typeof m=="number",49019);const h=new b_(m,t,r,a),y=(function(S,q,Y){const te=Y.baseMutations.map((Z=>Vd(S.yt,Z))),R=Y.mutations.map((Z=>Vd(S.yt,Z)));return{userId:q,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:te,mutations:R}})(this.serializer,this.userId,h),b=[];let E=new mt(((w,S)=>je(w.canonicalString(),S.canonicalString())));for(const w of a){const S=BS(this.userId,w.key.path,m);E=E.add(w.key.path.popLast()),b.push(u.put(y)),b.push(l.put(S,FO))}return E.forEach((w=>{b.push(this.indexManager.addToCollectionParentIndex(e,w))})),e.addOnCommittedListener((()=>{this.Zn[m]=h.keys()})),U.waitFor(b).next((()=>h))}))}lookupMutationBatch(e,t){return ea(e).get(t).next((r=>r?(Se(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),co(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?U.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return ea(e).ee({index:go,range:a},((u,m,h)=>{m.userId===this.userId&&(Se(m.batchId>=r,47524,{Yn:r}),l=co(this.serializer,m)),h.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ua;return ea(e).ee({index:go,range:t,reverse:!0},((a,l,u)=>{r=l.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ua],[this.userId,Number.POSITIVE_INFINITY]);return ea(e).H(go,t).next((r=>r.map((a=>co(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Yf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Bl(e).ee({range:a},((u,m,h)=>{const[y,b,E]=u,w=ks(b);if(y===this.userId&&t.path.isEqual(w))return ea(e).get(E).next((S=>{if(!S)throw be(61480,{er:u,batchId:E});Se(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:E}),l.push(co(this.serializer,S))}));h.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(je);const a=[];return t.forEach((l=>{const u=Yf(this.userId,l.path),m=IDBKeyRange.lowerBound(u),h=Bl(e).ee({range:m},((y,b,E)=>{const[w,S,q]=y,Y=ks(S);w===this.userId&&l.path.isEqual(Y)?r=r.add(q):E.done()}));a.push(h)})),U.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=Yf(this.userId,r),u=IDBKeyRange.lowerBound(l);let m=new mt(je);return Bl(e).ee({range:u},((h,y,b)=>{const[E,w,S]=h,q=ks(w);E===this.userId&&r.isPrefixOf(q)?q.length===a&&(m=m.add(S)):b.done()})).next((()=>this.tr(e,m)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(ea(e).get(l).next((u=>{if(u===null)throw be(35274,{batchId:l});Se(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),r.push(co(this.serializer,u))})))})),U.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return ZA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),U.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return U.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return Bl(e).ee({range:r},((l,u,m)=>{if(l[0]===this.userId){const h=ks(l[1]);a.push(h)}else m.done()})).next((()=>{Se(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return e1(e,this.userId,t)}ir(e){return t1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ua,lastStreamToken:""}))}}function e1(s,e,t){const r=Yf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return Bl(s).ee({range:l,Y:!0},((m,h,y)=>{const[b,E,w]=m;b===e&&E===a&&(u=!0),y.done()})).next((()=>u))}function ea(s){return hn(s,Yr)}function Bl(s){return hn(s,sc)}function t1(s){return hn(s,Sd)}class Po{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Po(0)}static ar(){return new Po(-1)}}class pM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new Po(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ne.fromTimestamp(new ct(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ml(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(Se(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return Ml(e).ee(((u,m)=>{const h=Ju(m);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(a++,l.push(this.removeTargetData(e,h)))})).next((()=>U.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Ml(e).ee(((r,a)=>{const l=Ju(a);t(l)}))}ur(e){return yw(e).get(gm).next((t=>(Se(t!==null,2888),t)))}cr(e,t){return yw(e).put(gm,t)}lr(e,t){return Ml(e).put(YA(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=No(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Ml(e).ee({range:a,index:HS},((u,m,h)=>{const y=Ju(m);Wd(t,y.target)&&(l=y,h.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=ra(e);return t.forEach((u=>{const m=Mn(u.path);a.push(l.put({targetId:r,path:m})),a.push(this.referenceDelegate.addReference(e,r,u))})),U.waitFor(a)}removeMatchingKeys(e,t,r){const a=ra(e);return U.forEach(t,(l=>{const u=Mn(l.path);return U.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=ra(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=ra(e);let l=Ge();return a.ee({range:r,Y:!0},((u,m,h)=>{const y=ks(u[1]),b=new ye(y);l=l.add(b)})).next((()=>l))}containsKey(e,t){const r=Mn(t.path),a=IDBKeyRange.bound([r],[DS(r)],!1,!0);let l=0;return ra(e).ee({index:c_,Y:!0,range:a},(([u,m],h,y)=>{u!==0&&(l++,y.done())})).next((()=>l>0))}At(e,t){return Ml(e).get(t).next((r=>r?Ju(r):null))}}function Ml(s){return hn(s,ic)}function yw(s){return hn(s,Eo)}function ra(s){return hn(s,ac)}const _w="LruGarbageCollector",gM=1048576;function vw([s,e],[t,r]){const a=je(s,t);return a===0?je(e,r):a}class yM{constructor(e){this.Pr=e,this.buffer=new mt(vw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class n1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ce(_w,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Sa(t)?ce(_w,"Ignoring IndexedDB error during garbage collection: ",t):await Ia(t)}await this.Ar(3e5)}))}}class _M{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return U.resolve(sr.ce);const r=new yM(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(gw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gw):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,u,m,h,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,u=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,m=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(y=Date.now(),Ll()<=We.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-b}ms
	Determined least recently used ${a} in `+(m-u)+`ms
	Removed ${l} targets in `+(h-m)+`ms
	Removed ${E} documents in `+(y-h)+`ms
Total Duration: ${y-b}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function r1(s,e){return new _M(s,e)}class vM{constructor(e,t){this.db=e,this.garbageCollector=r1(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return Uf(e,r)}removeReference(e,t,r){return Uf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Uf(e,t)}wr(e,t){return(function(a,l){let u=!1;return t1(a).te((m=>e1(a,m,l).next((h=>(h&&(u=!0),U.resolve(!h)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((u,m)=>{if(m<=t){const h=this.wr(e,u).next((y=>{if(!y)return l++,r.getEntry(e,u).next((()=>(r.removeEntry(u,Ne.min()),ra(e).delete((function(E){return[0,Mn(E.path)]})(u)))))}));a.push(h)}})).next((()=>U.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Uf(e,t)}yr(e,t){const r=ra(e);let a,l=sr.ce;return r.ee({index:c_},(([u,m],{path:h,sequenceNumber:y})=>{u===0?(l!==sr.ce&&t(new ye(ks(a)),l),l=y,a=h):l=sr.ce})).next((()=>{l!==sr.ce&&t(new ye(ks(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Uf(s,e){return ra(s).put((function(r,a){return{targetId:0,path:Mn(r.path),sequenceNumber:a}})(e,s.currentSequenceNumber))}class s1{constructor(){this.changes=new gi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return so(e).put(r)}removeEntry(e,t,r){return so(e).delete((function(l,u){const m=l.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],bm(u),m[m.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=At.newInvalidDocument(t);return so(e).ee({index:Wf,range:IDBKeyRange.only(Fu(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:At.newInvalidDocument(t)};return so(e).ee({index:Wf,range:IDBKeyRange.only(Fu(t))},((a,l)=>{r={document:this.Sr(t,l),size:Em(l)}})).next((()=>r))}getEntries(e,t){let r=ar();return this.Cr(e,t,((a,l)=>{const u=this.Sr(a,l);r=r.insert(a,u)})).next((()=>r))}vr(e,t){let r=ar(),a=new wt(ye.comparator);return this.Cr(e,t,((l,u)=>{const m=this.Sr(l,u);r=r.insert(l,m),a=a.insert(l,Em(u))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return U.resolve();let a=new mt(Ew);t.forEach((h=>a=a.add(h)));const l=IDBKeyRange.bound(Fu(a.first()),Fu(a.last())),u=a.getIterator();let m=u.getNext();return so(e).ee({index:Wf,range:l},((h,y,b)=>{const E=ye.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;m&&Ew(m,E)<0;)r(m,null),m=u.getNext();m&&m.isEqual(E)&&(r(m,y),m=u.hasNext()?u.getNext():null),m?b.j(Fu(m)):b.done()})).next((()=>{for(;m;)r(m,null),m=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,m=[u.popLast().toArray(),u.lastSegment(),bm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return so(e).H(IDBKeyRange.bound(m,h,!0)).next((y=>{l?.incrementDocumentReadCount(y.length);let b=ar();for(const E of y){const w=this.Sr(ye.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);w.isFoundDocument()&&(Jd(t,w)||a.has(w.key))&&(b=b.insert(w.key,w))}return b}))}getAllFromCollectionGroup(e,t,r,a){let l=ar();const u=xw(t,r),m=xw(t,xr.max());return so(e).ee({index:FS,range:IDBKeyRange.bound(u,m,!0)},((h,y,b)=>{const E=this.Sr(ye.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);l=l.insert(E.key,E),l.size===a&&b.done()})).next((()=>l))}newChangeBuffer(e){return new xM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return bw(e).get(Zy).next((t=>(Se(!!t,20021),t)))}br(e,t){return bw(e).put(Zy,t)}Sr(e,t){if(t){const r=iM(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ne.min())))return r}return At.newInvalidDocument(e)}}function i1(s){return new bM(s)}class xM extends s1{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new gi((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new mt(((l,u)=>je(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const m=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,m.readTime)),u.isValidDocument()){const h=rw(this.Mr.serializer,u);a=a.add(l.path.popLast());const y=Em(h);r+=y-m.size,t.push(this.Mr.addEntry(e,l,h))}else if(r-=m.size,this.trackRemovals){const h=rw(this.Mr.serializer,u.convertToNoDocument(Ne.min()));t.push(this.Mr.addEntry(e,l,h))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),U.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,u)=>{this.Or.set(l,{size:u,readTime:r.get(l).readTime})})),r)))}}function bw(s){return hn(s,Ad)}function so(s){return hn(s,pm)}function Fu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xw(s,e){const t=e.documentKey.path.toArray();return[s,bm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ew(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=je(t[l],r[l]),a)return a;return a=je(t.length,r.length),a||(a=je(t[t.length-2],r[r.length-2]),a||je(t[t.length-1],r[r.length-1]))}class EM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class a1{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&fd(r.mutation,a,ir.empty(),ct.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ge()){const a=Ds();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let u=Wu();return l.forEach(((m,h)=>{u=u.insert(m,h.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Ds();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ge())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,m)=>{t.set(u,m)}))}))}computeViews(e,t,r,a){let l=ar();const u=hd(),m=(function(){return hd()})();return t.forEach(((h,y)=>{const b=r.get(y.key);a.has(y.key)&&(b===void 0||b.mutation instanceof yi)?l=l.insert(y.key,y):b!==void 0?(u.set(y.key,b.mutation.getFieldMask()),fd(b.mutation,y,b.mutation.getFieldMask(),ct.now())):u.set(y.key,ir.empty())})),this.recalculateAndSaveOverlays(e,l).next((h=>(h.forEach(((y,b)=>u.set(y,b))),t.forEach(((y,b)=>m.set(y,new EM(b,u.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=hd();let a=new wt(((u,m)=>u-m)),l=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const m of u)m.keys().forEach((h=>{const y=t.get(h);if(y===null)return;let b=r.get(h)||ir.empty();b=m.applyToLocalView(y,b),r.set(h,b);const E=(a.get(m.batchId)||Ge()).add(h);a=a.insert(m.batchId,E)}))})).next((()=>{const u=[],m=a.getReverseIterator();for(;m.hasNext();){const h=m.getNext(),y=h.key,b=h.value,E=xA();b.forEach((w=>{if(!l.has(w)){const S=NA(t.get(w),r.get(w));S!==null&&E.set(w,S),l=l.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,E))}return U.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return Aj(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):g_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):U.resolve(Ds());let m=rc,h=l;return u.next((y=>U.forEach(y,((b,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),l.get(b)?U.resolve():this.remoteDocumentCache.getEntry(e,b).next((w=>{h=h.insert(b,w)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,h,y,Ge()))).next((b=>({batchId:m,changes:bA(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((r=>{let a=Wu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=Wu();return this.indexManager.getCollectionParents(e,l).next((m=>U.forEach(m,(h=>{const y=(function(E,w){return new pi(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,h.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,r,a).next((b=>{b.forEach(((E,w)=>{u=u.insert(E,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((u=>{l.forEach(((h,y)=>{const b=y.getKey();u.get(b)===null&&(u=u.insert(b,At.newInvalidDocument(b)))}));let m=Wu();return u.forEach(((h,y)=>{const b=l.get(h);b!==void 0&&fd(b.mutation,y,ir.empty(),ct.now()),Jd(t,y)&&(m=m.insert(h,y))})),m}))}}class TM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return U.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:$t(a.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:I_(a.bundledQuery),readTime:$t(a.readTime)}})(t)),U.resolve()}}class wM{constructor(){this.overlays=new wt(ye.comparator),this.Lr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ds();return U.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),U.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){const a=Ds(),l=t.length+1,u=new ye(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const h=m.getNext().value,y=h.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&h.largestBatchId>r&&a.set(h.getKey(),h)}return U.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new wt(((y,b)=>y-b));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let b=l.get(y.largestBatchId);b===null&&(b=Ds(),l=l.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const m=Ds(),h=l.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((y,b)=>m.set(y,b))),!(m.size()>=a)););return U.resolve(m)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new E_(t,r));let l=this.Lr.get(t);l===void 0&&(l=Ge(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}class IM{constructor(){this.sessionToken=zt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}class N_{constructor(){this.kr=new mt(gn.Kr),this.qr=new mt(gn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new gn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new gn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new ye(new Xe([])),r=new gn(t,e),a=new gn(t,e+1),l=[];return this.qr.forEachInRange([r,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ye(new Xe([])),r=new gn(t,e),a=new gn(t,e+1);let l=Ge();return this.qr.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new gn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class gn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ye.comparator(e.key,t.key)||je(e.Hr,t.Hr)}static Ur(e,t){return je(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}class SM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new mt(gn.Kr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new b_(l,t,r,a);this.mutationQueue.push(u);for(const m of a)this.Jr=this.Jr.add(new gn(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return U.resolve(u)}lookupMutationBatch(e,t){return U.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return U.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?ua:this.Yn-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gn(t,0),a=new gn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(u=>{const m=this.Zr(u.Hr);l.push(m)})),U.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(je);return t.forEach((a=>{const l=new gn(a,0),u=new gn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(m=>{r=r.add(m.Hr)}))})),U.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ye.isDocumentKey(l)||(l=l.child(""));const u=new gn(new ye(l),0);let m=new mt(je);return this.Jr.forEachWhile((h=>{const y=h.key.path;return!!r.isPrefixOf(y)&&(y.length===a&&(m=m.add(h.Hr)),!0)}),u),U.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Se(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return U.forEach(t.mutations,(a=>{const l=new gn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new gn(t,0),a=this.Jr.firstAfterOrEqual(r);return U.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class AM{constructor(e){this.ti=e,this.docs=(function(){return new wt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():At.newInvalidDocument(t))}getEntries(e,t){let r=ar();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():At.newInvalidDocument(a))})),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=ar();const u=t.path,m=new ye(u.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(m);for(;h.hasNext();){const{key:y,value:{document:b}}=h.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||o_(MS(b),r)<=0||(a.has(b.key)||Jd(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return U.resolve(l)}getAllFromCollectionGroup(e,t,r,a){be(9500)}ni(e,t){return U.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new NM(this)}getSize(e){return U.resolve(this.size)}}class NM extends s1{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),U.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class RM{constructor(e){this.persistence=e,this.ri=new gi((t=>No(t)),Wd),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.ii=0,this.si=new N_,this.targetCount=0,this.oi=Po._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),U.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.lr(t),U.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((u,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),U.waitFor(l).next((()=>a))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),U.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.si.containsKey(t))}}class R_{constructor(e,t){this._i={},this.overlays={},this.ai=new sr(0),this.ui=!1,this.ui=!0,this.ci=new IM,this.referenceDelegate=e(this),this.li=new RM(this),this.indexManager=new fM,this.remoteDocumentCache=(function(a){return new AM(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new $A(t),this.Pi=new TM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new SM(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const a=new CM(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return U.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class CM extends US{constructor(e){super(),this.currentSequenceNumber=e}}class tp{constructor(e){this.persistence=e,this.Ri=new N_,this.Ai=null}static Vi(e){return new tp(e)}get di(){if(this.Ai)return this.Ai;throw be(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.di,(r=>{const a=ye.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Ne.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return U.or([()=>U.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Tm{constructor(e,t){this.persistence=e,this.fi=new gi((r=>Mn(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=r1(this,t)}static Vi(e,t){return new Tm(e,t)}Ti(){}Ii(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return U.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?U.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((m=>{m||(r++,l.removeEntry(u,Ne.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),U.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jf(e.data.value)),t}wr(e,t,r){return U.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return U.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class kM{constructor(e){this.serializer=e}k(e,t,r,a){const l=new Hm("createOrUpgrade",t);r<1&&a>=1&&((function(h){h.createObjectStore(Yd)})(e),(function(h){h.createObjectStore(Sd,{keyPath:BO}),h.createObjectStore(Yr,{keyPath:PT,autoIncrement:!0}).createIndex(go,VT,{unique:!0}),h.createObjectStore(sc)})(e),Tw(e),(function(h){h.createObjectStore(oo)})(e));let u=U.resolve();return r<3&&a>=3&&(r!==0&&((function(h){h.deleteObjectStore(ac),h.deleteObjectStore(ic),h.deleteObjectStore(Eo)})(e),Tw(e)),u=u.next((()=>(function(h){const y=h.store(Eo),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return y.put(gm,b)})(l)))),r<4&&a>=4&&(r!==0&&(u=u.next((()=>(function(h,y){return y.store(Yr).H().next((E=>{h.deleteObjectStore(Yr),h.createObjectStore(Yr,{keyPath:PT,autoIncrement:!0}).createIndex(go,VT,{unique:!0});const w=y.store(Yr),S=E.map((q=>w.put(q)));return U.waitFor(S)}))})(e,l)))),u=u.next((()=>{(function(h){h.createObjectStore(oc,{keyPath:XO})})(e)}))),r<5&&a>=5&&(u=u.next((()=>this.gi(l)))),r<6&&a>=6&&(u=u.next((()=>((function(h){h.createObjectStore(Ad)})(e),this.pi(l))))),r<7&&a>=7&&(u=u.next((()=>this.yi(l)))),r<8&&a>=8&&(u=u.next((()=>this.wi(e,l)))),r<9&&a>=9&&(u=u.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(u=u.next((()=>this.bi(l)))),r<11&&a>=11&&(u=u.next((()=>{(function(h){h.createObjectStore(Gm,{keyPath:JO})})(e),(function(h){h.createObjectStore(Qm,{keyPath:ZO})})(e)}))),r<12&&a>=12&&(u=u.next((()=>{(function(h){const y=h.createObjectStore(Km,{keyPath:aj});y.createIndex(t0,oj,{unique:!1}),y.createIndex(KS,lj,{unique:!1})})(e)}))),r<13&&a>=13&&(u=u.next((()=>(function(h){const y=h.createObjectStore(pm,{keyPath:HO});y.createIndex(Wf,GO),y.createIndex(FS,QO)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(oo)))),r<14&&a>=14&&(u=u.next((()=>this.Di(e,l)))),r<15&&a>=15&&(u=u.next((()=>(function(h){h.createObjectStore(u_,{keyPath:ej,autoIncrement:!0}).createIndex(e0,tj,{unique:!1}),h.createObjectStore(cd,{keyPath:nj}).createIndex(GS,rj,{unique:!1}),h.createObjectStore(ud,{keyPath:sj}).createIndex(QS,ij,{unique:!1})})(e)))),r<16&&a>=16&&(u=u.next((()=>{t.objectStore(cd).clear()})).next((()=>{t.objectStore(ud).clear()}))),r<17&&a>=17&&(u=u.next((()=>{(function(h){h.createObjectStore(d_,{keyPath:cj})})(e)}))),r<18&&a>=18&&dI()&&(u=u.next((()=>{t.objectStore(cd).clear()})).next((()=>{t.objectStore(ud).clear()}))),u}pi(e){let t=0;return e.store(oo).ee(((r,a)=>{t+=Em(a)})).next((()=>{const r={byteSize:t};return e.store(Ad).put(Zy,r)}))}gi(e){const t=e.store(Sd),r=e.store(Yr);return t.H().next((a=>U.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,ua],[l.userId,l.lastAcknowledgedBatchId]);return r.H(go,u).next((m=>U.forEach(m,(h=>{Se(h.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const y=co(this.serializer,h);return ZA(e,l.userId,y).next((()=>{}))}))))}))))}yi(e){const t=e.store(ac),r=e.store(oo);return e.store(Eo).get(gm).next((a=>{const l=[];return r.ee(((u,m)=>{const h=new Xe(u),y=(function(E){return[0,Mn(E)]})(h);l.push(t.get(y).next((b=>b?U.resolve():(E=>t.put({targetId:0,path:Mn(E),sequenceNumber:a.highestListenSequenceNumber}))(h))))})).next((()=>U.waitFor(l)))}))}wi(e,t){e.createObjectStore(Nd,{keyPath:WO});const r=t.store(Nd),a=new A_,l=u=>{if(a.add(u)){const m=u.lastSegment(),h=u.popLast();return r.put({collectionId:m,parent:Mn(h)})}};return t.store(oo).ee({Y:!0},((u,m)=>{const h=new Xe(u);return l(h.popLast())})).next((()=>t.store(sc).ee({Y:!0},(([u,m,h],y)=>{const b=ks(m);return l(b.popLast())}))))}bi(e){const t=e.store(ic);return t.ee(((r,a)=>{const l=Ju(a),u=YA(this.serializer,l);return t.put(u)}))}Si(e,t){const r=t.store(oo),a=[];return r.ee(((l,u)=>{const m=t.store(pm),h=(function(E){return E.document?new ye(Xe.fromString(E.document.name).popFirst(5)):E.noDocument?ye.fromSegments(E.noDocument.path):E.unknownDocument?ye.fromSegments(E.unknownDocument.path):be(36783)})(u).path.toArray(),y={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(m.put(y))})).next((()=>U.waitFor(a)))}Di(e,t){const r=t.store(Yr),a=i1(this.serializer),l=new R_(tp.Vi,this.serializer.yt);return r.H().next((u=>{const m=new Map;return u.forEach((h=>{let y=m.get(h.userId)??Ge();co(this.serializer,h).keys().forEach((b=>y=y.add(b))),m.set(h.userId,y)})),U.forEach(m,((h,y)=>{const b=new yn(y),E=Zm.wt(this.serializer,b),w=l.getIndexManager(b),S=ep.wt(b,this.serializer,w,l.referenceDelegate);return new a1(a,S,E,w).recalculateAndSaveOverlaysForDocumentKeys(new n0(t,sr.ce),h).next()}))}))}}function Tw(s){s.createObjectStore(ac,{keyPath:$O}).createIndex(c_,YO,{unique:!0}),s.createObjectStore(ic,{keyPath:"targetId"}).createIndex(HS,KO,{unique:!0}),s.createObjectStore(Eo)}const ta="IndexedDbPersistence",Ry=18e5,Cy=5e3,ky="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",o1="main";class C_{constructor(e,t,r,a,l,u,m,h,y,b,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=u,this.document=m,this.Fi=y,this.Mi=b,this.xi=E,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=w=>Promise.resolve(),!C_.v())throw new oe(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vM(this,a),this.Ki=t+o1,this.serializer=new $A(h),this.qi=new Vs(this.Ki,this.xi,new kM(this.serializer)),this.ci=new oM,this.li=new pM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=i1(this.serializer),this.Pi=new aM,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,b===!1&&Kt(ta,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new oe(Q.FAILED_PRECONDITION,ky);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new sr(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>zf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Sa(e))return ce(ta,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(ta,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Hu(e).get(Dl).next((t=>U.resolve(this.Xi(t))))}Yi(e){return zf(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Ry)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=hn(t,oc);return r.H().next((a=>{const l=this.ns(a,Ry),u=a.filter((m=>l.indexOf(m)===-1));return U.forEach(u,(m=>r.delete(m.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?U.resolve(!0):Hu(e).get(Dl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Cy)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new oe(Q.FAILED_PRECONDITION,ky);return!1}}return!(!this.networkEnabled||!this.inForeground)||zf(e).H().next((r=>this.ns(r,Cy).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,m=this.networkEnabled===a.networkEnabled;if(l||u&&m)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce(ta,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Yd,oc],(e=>{const t=new n0(e,sr.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>zf(e).H().next((t=>this.ns(t,Ry).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return ep.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mM(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Zm.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){ce(ta,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(h){return h===18?hj:h===17?XS:h===16?dj:h===15?h_:h===14?WS:h===13?YS:h===12?uj:h===11?$S:void be(60245)})(this.xi);let u;return this.qi.runTransaction(e,a,l,(m=>(u=new n0(m,this.ai?this.ai.next():sr.ce),t==="readwrite-primary"?this.ji(u).next((h=>!!h||this.Hi(u))).next((h=>{if(!h)throw Kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new oe(Q.FAILED_PRECONDITION,LS);return r(u)})).next((h=>this.Zi(u).next((()=>h)))):this.Ps(u).next((()=>r(u)))))).then((m=>(u.raiseOnCommittedEvent(),m)))}Ps(e){return Hu(e).get(Dl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Cy)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new oe(Q.FAILED_PRECONDITION,ky)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hu(e).put(Dl,t)}static v(){return Vs.v()}Ji(e){const t=Hu(e);return t.get(Dl).next((r=>this.Xi(r)?(ce(ta,"Releasing primary lease."),t.delete(Dl)):U.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Kt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;uI()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return ce(ta,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Kt(ta,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Kt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hu(s){return hn(s,Yd)}function zf(s){return hn(s,oc)}function k_(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class D_{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=Ge(),a=Ge();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new D_(e,t.fromCache,r,a)}}class DM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class l1{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return uI()?8:zS(Ot())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new DM;return this.ys(e,t,u).next((m=>{if(l.result=m,this.As)return this.ws(e,t,u,m.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(Ll()<=We.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Ul(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(Ll()<=We.DEBUG&&ce("QueryEngine","Query:",Ul(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(Ll()<=We.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Ul(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(t))):U.resolve())}gs(e,t){if(KT(t))return U.resolve(null);let r=Qn(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=vm(t,null,"F"),r=Qn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=Ge(...l);return this.fs.getDocuments(e,u).next((m=>this.indexManager.getMinOffset(e,r).next((h=>{const y=this.bs(t,m);return this.Ss(t,y,u,h.readTime)?this.gs(e,vm(t,null,"F")):this.Ds(e,y,t,h)}))))})))))}ps(e,t,r,a){return KT(t)||a.isEqual(Ne.min())?U.resolve(null):this.fs.getDocuments(e,r).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,r,a)?U.resolve(null):(Ll()<=We.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ul(t)),this.Ds(e,u,t,jS(a,rc)).next((m=>m)))}))}bs(e,t){let r=new mt(_A(e));return t.forEach(((a,l)=>{Jd(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return Ll()<=We.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Ul(t)),this.fs.getDocumentsMatchingQuery(e,t,xr.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const P_="LocalStore",PM=3e8;class VM{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new wt(je),this.Fs=new gi((l=>No(l)),Wd),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a1(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function c1(s,e,t,r){return new VM(s,e,t,r)}async function u1(s,e){const t=ve(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],m=[];let h=Ge();for(const y of a){u.push(y.batchId);for(const b of y.mutations)h=h.add(b.key)}for(const y of l){m.push(y.batchId);for(const b of y.mutations)h=h.add(b.key)}return t.localDocuments.getDocuments(r,h).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:m})))}))}))}function OM(s,e){const t=ve(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,h,y,b){const E=y.batch,w=E.keys();let S=U.resolve();return w.forEach((q=>{S=S.next((()=>b.getEntry(h,q))).next((Y=>{const te=y.docVersions.get(q);Se(te!==null,48541),Y.version.compareTo(te)<0&&(E.applyToRemoteDocument(Y,y),Y.isValidDocument()&&(Y.setReadTime(y.commitVersion),b.addEntry(Y)))}))})),S.next((()=>m.mutationQueue.removeMutationBatch(h,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let h=Ge();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(h=h.add(m.batch.mutations[y].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function d1(s){const e=ve(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function jM(s,e){const t=ve(s),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const m=[];e.targetChanges.forEach(((b,E)=>{const w=a.get(E);if(!w)return;m.push(t.li.removeMatchingKeys(l,b.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,b.addedDocuments,E))));let S=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?S=S.withResumeToken(zt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):b.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(b.resumeToken,r)),a=a.insert(E,S),(function(Y,te,R){return Y.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=PM?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(w,S,b)&&m.push(t.li.updateTargetData(l,S))}));let h=ar(),y=Ge();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),m.push(h1(l,u,e.documentUpdates).next((b=>{h=b.Bs,y=b.Ls}))),!r.isEqual(Ne.min())){const b=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));m.push(b)}return U.waitFor(m).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,h,y))).next((()=>h))})).then((l=>(t.vs=a,l)))}function h1(s,e,t){let r=Ge(),a=Ge();return t.forEach((l=>r=r.add(l))),e.getEntries(s,r).next((l=>{let u=ar();return t.forEach(((m,h)=>{const y=l.get(m);h.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(m)),h.isNoDocument()&&h.version.isEqual(Ne.min())?(e.removeEntry(m,h.readTime),u=u.insert(m,h)):!y.isValidDocument()||h.version.compareTo(y.version)>0||h.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(h),u=u.insert(m,h)):ce(P_,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",h.version)})),{Bs:u,Ls:a}}))}function MM(s,e){const t=ve(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ua),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function mc(s,e){const t=ve(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,U.resolve(a)):t.li.allocateTargetId(r).next((u=>(a=new ai(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function pc(s,e,t){const r=ve(s),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Sa(u))throw u;ce(P_,`Failed to update sequence numbers for target ${e}: ${u}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function wm(s,e,t){const r=ve(s);let a=Ne.min(),l=Ge();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(h,y,b){const E=ve(h),w=E.Fs.get(b);return w!==void 0?U.resolve(E.vs.get(w)):E.li.getTargetData(y,b)})(r,u,Qn(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(u,m.targetId).next((h=>{l=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?a:Ne.min(),t?l:Ge()))).next((m=>(p1(r,yA(e),m),{documents:m,ks:l})))))}function f1(s,e){const t=ve(s),r=ve(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((u=>u?u.target:null))))}function m1(s,e){const t=ve(s),r=t.Ms.get(e)||Ne.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,jS(r,rc),Number.MAX_SAFE_INTEGER))).then((a=>(p1(t,e,a),a)))}function p1(s,e,t){let r=s.Ms.get(e)||Ne.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),s.Ms.set(e,r)}async function LM(s,e,t,r){const a=ve(s);let l=Ge(),u=ar();for(const y of t){const b=e.Ks(y.metadata.name);y.document&&(l=l.add(b));const E=e.qs(y);E.setReadTime(e.Us(y.metadata.readTime)),u=u.insert(b,E)}const m=a.xs.newChangeBuffer({trackRemovals:!0}),h=await mc(a,(function(b){return Qn(Ac(Xe.fromString(`__bundle__/docs/${b}`)))})(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",(y=>h1(y,m,u).next((b=>(m.apply(y),b))).next((b=>a.li.removeMatchingKeysForTargetId(y,h.targetId).next((()=>a.li.addMatchingKeys(y,l,h.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(y,b.Bs,b.Ls))).next((()=>b.Bs))))))}async function UM(s,e,t=Ge()){const r=await mc(s,Qn(I_(e.bundledQuery))),a=ve(s);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const u=$t(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return a.Pi.saveNamedQuery(l,e);const m=r.withResumeToken(zt.EMPTY_BYTE_STRING,u);return a.vs=a.vs.insert(m.targetId,m),a.li.updateTargetData(l,m).next((()=>a.li.removeMatchingKeysForTargetId(l,r.targetId))).next((()=>a.li.addMatchingKeys(l,t,r.targetId))).next((()=>a.Pi.saveNamedQuery(l,e)))}))}const g1="firestore_clients";function ww(s,e){return`${g1}_${s}_${e}`}const y1="firestore_mutations";function Iw(s,e,t){let r=`${y1}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const _1="firestore_targets";function Dy(s,e){return`${_1}_${s}_${e}`}const Is="SharedClientState";class Im{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new oe(a.error.code,a.error.message))),u?new Im(e,t,a.state,l):(Kt(Is,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class md{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new oe(r.error.code,r.error.message))),l?new md(e,r.state,a):(Kt(Is,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=y_();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=qS(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new Sm(e,l):(Kt(Is,`Failed to parse client data for instance '${e}': ${t}`),null)}}class V_{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new V_(t.clientId,t.onlineState):(Kt(Is,`Failed to parse online state: ${e}`),null)}}class y0{constructor(){this.activeTargetIds=y_()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Py{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new wt(je),this.started=!1,this.Zs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=ww(this.persistenceKey,this.zs),this.Ys=(function(h){return`firestore_sequence_number_${h}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new y0),this.eo=new RegExp(`^${g1}_${u}_([^_]*)$`),this.no=new RegExp(`^${y1}_${u}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${_1}_${u}_(\\d+)$`),this.io=(function(h){return`firestore_online_state_${h}`})(this.persistenceKey),this.so=(function(h){return`firestore_bundle_loaded_v2_${h}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(ww(this.persistenceKey,r));if(a){const l=Sm.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Dy(this.persistenceKey,e));if(a){const l=md.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dy(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce(Is,"READ",e,t),t}setItem(e,t){ce(Is,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce(Is,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ce(Is,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let u=sr.ce;if(l!=null)try{const m=JSON.parse(l);Se(typeof m=="number",30636,{yo:l}),u=m}catch(m){Kt(Is,"Failed to read sequence number from WebStorage",m)}return u})(t.newValue);r!==sr.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new Im(this.currentUser,e,t,r),l=Iw(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=Iw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=Dy(this.persistenceKey,e),l=new md(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return Sm.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return Im.$s(new yn(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return md.$s(a,t)}_o(e){return V_.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);ce(Is,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),u=[],m=[];return l.forEach((h=>{a.has(h)||u.push(h)})),a.forEach((h=>{l.has(h)||m.push(h)})),this.syncEngine.Co(u,m).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=y_();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class v1{constructor(){this.vo=new y0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new y0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zM{Mo(e){}shutdown(){}}const Sw="ConnectivityMonitor";class Aw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ce(Sw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ce(Sw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let qf=null;function _0(){return qf===null?qf=(function(){return 268435456+Math.round(2147483648*Math.random())})():qf++,"0x"+qf.toString(16)}const Vy="RestConnection",qM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class BM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===r0?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const u=_0(),m=this.Qo(e,t.toUriEncodedString());ce(Vy,`Sending RPC '${e}' ${u}:`,m,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,a,l);const{host:y}=new URL(m),b=xc(y);return this.zo(e,m,h,r,b).then((E=>(ce(Vy,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Ls(Vy,`RPC '${e}' ${u} failed with error: `,E,"url: ",m,"request:",r),E}))}jo(e,t,r,a,l,u){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=qM[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class FM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Pn="WebChannelConnection",Gu=(s,e,t)=>{s.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Wl extends BM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Wl.c_){const e=NS();Gu(e,AS.STAT_EVENT,(t=>{t.stat===Wy.PROXY?ce(Pn,"STAT_EVENT: detected buffering proxy"):t.stat===Wy.NOPROXY&&ce(Pn,"STAT_EVENT: detected no buffering proxy")})),Wl.c_=!0}}zo(e,t,r,a,l){const u=_0();return new Promise(((m,h)=>{const y=new IS;y.setWithCredentials(!0),y.listenOnce(SS.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Kf.NO_ERROR:const E=y.getResponseJson();ce(Pn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),m(E);break;case Kf.TIMEOUT:ce(Pn,`RPC '${e}' ${u} timed out`),h(new oe(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Kf.HTTP_ERROR:const w=y.getStatus();if(ce(Pn,`RPC '${e}' ${u} failed with status:`,w,"response text:",y.getResponseText()),w>0){let S=y.getResponseJson();Array.isArray(S)&&(S=S[0]);const q=S?.error;if(q&&q.status&&q.message){const Y=(function(R){const Z=R.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(Z)>=0?Z:Q.UNKNOWN})(q.status);h(new oe(Y,q.message))}else h(new oe(Q.UNKNOWN,"Server responded with status "+y.getStatus()))}else h(new oe(Q.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ce(Pn,`RPC '${e}' ${u} completed.`)}}));const b=JSON.stringify(a);ce(Pn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",b,r,15)}))}T_(e,t,r){const a=_0(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(m.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const y=l.join("");ce(Pn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const b=u.createWebChannel(y,m);this.I_(b);let E=!1,w=!1;const S=new FM({Ho:q=>{w?ce(Pn,`Not sending because RPC '${e}' stream ${a} is closed:`,q):(E||(ce(Pn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),E=!0),ce(Pn,`RPC '${e}' stream ${a} sending:`,q),b.send(q))},Jo:()=>b.close()});return Gu(b,Yu.EventType.OPEN,(()=>{w||(ce(Pn,`RPC '${e}' stream ${a} transport opened.`),S.i_())})),Gu(b,Yu.EventType.CLOSE,(()=>{w||(w=!0,ce(Pn,`RPC '${e}' stream ${a} transport closed`),S.o_(),this.E_(b))})),Gu(b,Yu.EventType.ERROR,(q=>{w||(w=!0,Ls(Pn,`RPC '${e}' stream ${a} transport errored. Name:`,q.name,"Message:",q.message),S.o_(new oe(Q.UNAVAILABLE,"The operation could not be completed")))})),Gu(b,Yu.EventType.MESSAGE,(q=>{if(!w){const Y=q.data[0];Se(!!Y,16349);const te=Y,R=te?.error||te[0]?.error;if(R){ce(Pn,`RPC '${e}' stream ${a} received error:`,R);const Z=R.status;let ae=(function(he){const A=on[he];if(A!==void 0)return kA(A)})(Z),fe=R.message;ae===void 0&&(ae=Q.INTERNAL,fe="Unknown error status: "+Z+" with message "+R.message),w=!0,S.o_(new oe(ae,fe)),b.close()}else ce(Pn,`RPC '${e}' stream ${a} received:`,Y),S.__(Y)}})),Wl.u_(),setTimeout((()=>{S.s_()}),0),S}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return RS()}}function HM(s){return new Wl(s)}function b1(){return typeof window<"u"?window:null}function rm(){return typeof document<"u"?document:null}function nh(s){return new Yj(s,!0)}Wl.c_=!1;class O_{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Nw="PersistentStream";class x1{constructor(e,t,r,a,l,u,m,h){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new O_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(Kt(t.toString()),Kt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new oe(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Nw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ce(Nw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GM extends x1{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Jj(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ne.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ne.min():u.readTime?$t(u.readTime):Ne.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=h0(this.serializer),t.addTarget=(function(l,u){let m;const h=u.target;if(m=ym(h)?{documents:qA(l,h)}:{query:BA(l,h).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=OA(l,u.resumeToken);const y=u0(l,u.expectedCount);y!==null&&(m.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ne.min())>0){m.readTime=fc(l,u.snapshotVersion.toTimestamp());const y=u0(l,u.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const r=eM(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=h0(this.serializer),t.removeTarget=e,this.K_(t)}}class QM extends x1{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Zj(e.writeResults,e.commitTime),r=$t(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=h0(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Vd(this.serializer,r)))};this.K_(t)}}class KM{}class $M extends KM{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new oe(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,d0(t,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(Q.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.jo(e,d0(t,r),a,u,m,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new oe(Q.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function YM(s,e,t,r){return new $M(s,e,t,r)}class WM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kt(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Vo="RemoteStore";class XM{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{r.enqueueAndForget((async()=>{Na(this)&&(ce(Vo,"Restarting streams for network reachability change."),await(async function(h){const y=ve(h);y.Ea.add(4),await Cc(y),y.Va.set("Unknown"),y.Ea.delete(4),await rh(y)})(this))}))})),this.Va=new WM(r,a)}}async function rh(s){if(Na(s))for(const e of s.Ra)await e(!0)}async function Cc(s){for(const e of s.Ra)await e(!1)}function np(s,e){const t=ve(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),L_(t)?M_(t):Dc(t).O_()&&j_(t,e))}function gc(s,e){const t=ve(s),r=Dc(t);t.Ia.delete(e),r.O_()&&E1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Na(t)&&t.Va.set("Unknown"))}function j_(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Dc(s).Z_(e)}function E1(s,e){s.da.$e(e),Dc(s).X_(e)}function M_(s){s.da=new Gj({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Dc(s).start(),s.Va.ua()}function L_(s){return Na(s)&&!Dc(s).x_()&&s.Ia.size>0}function Na(s){return ve(s).Ea.size===0}function T1(s){s.da=void 0}async function JM(s){s.Va.set("Online")}async function ZM(s){s.Ia.forEach(((e,t)=>{j_(s,e)}))}async function e4(s,e){T1(s),L_(s)?(s.Va.ha(e),M_(s)):s.Va.set("Unknown")}async function t4(s,e,t){if(s.Va.set("Online"),e instanceof VA&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const m of l.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,u),a.Ia.delete(m),a.da.removeTarget(m))})(s,e)}catch(r){ce(Vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Am(s,r)}else if(e instanceof tm?s.da.Xe(e):e instanceof PA?s.da.st(e):s.da.tt(e),!t.isEqual(Ne.min()))try{const r=await d1(s.localStore);t.compareTo(r)>=0&&await(function(l,u){const m=l.da.Tt(u);return m.targetChanges.forEach(((h,y)=>{if(h.resumeToken.approximateByteSize()>0){const b=l.Ia.get(y);b&&l.Ia.set(y,b.withResumeToken(h.resumeToken,u))}})),m.targetMismatches.forEach(((h,y)=>{const b=l.Ia.get(h);if(!b)return;l.Ia.set(h,b.withResumeToken(zt.EMPTY_BYTE_STRING,b.snapshotVersion)),E1(l,h);const E=new ai(b.target,h,y,b.sequenceNumber);j_(l,E)})),l.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(r){ce(Vo,"Failed to raise snapshot:",r),await Am(s,r)}}async function Am(s,e,t){if(!Sa(e))throw e;s.Ea.add(1),await Cc(s),s.Va.set("Offline"),t||(t=()=>d1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ce(Vo,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await rh(s)}))}function w1(s,e){return e().catch((t=>Am(s,t,e)))}async function kc(s){const e=ve(s),t=xa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ua;for(;n4(e);)try{const a=await MM(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,r4(e,a)}catch(a){await Am(e,a)}I1(e)&&S1(e)}function n4(s){return Na(s)&&s.Ta.length<10}function r4(s,e){s.Ta.push(e);const t=xa(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function I1(s){return Na(s)&&!xa(s).x_()&&s.Ta.length>0}function S1(s){xa(s).start()}async function s4(s){xa(s).ra()}async function i4(s){const e=xa(s);for(const t of s.Ta)e.ea(t.mutations)}async function a4(s,e,t){const r=s.Ta.shift(),a=x_.from(r,e,t);await w1(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await kc(s)}async function o4(s,e){e&&xa(s).Y_&&await(async function(r,a){if((function(u){return CA(u)&&u!==Q.ABORTED})(a.code)){const l=r.Ta.shift();xa(r).B_(),await w1(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await kc(r)}})(s,e),I1(s)&&S1(s)}async function Rw(s,e){const t=ve(s);t.asyncQueue.verifyOperationInProgress(),ce(Vo,"RemoteStore received new credentials");const r=Na(t);t.Ea.add(3),await Cc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await rh(t)}async function v0(s,e){const t=ve(s);e?(t.Ea.delete(2),await rh(t)):e||(t.Ea.add(2),await Cc(t),t.Va.set("Unknown"))}function Dc(s){return s.ma||(s.ma=(function(t,r,a){const l=ve(t);return l.sa(),new GM(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:JM.bind(null,s),Yo:ZM.bind(null,s),t_:e4.bind(null,s),J_:t4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),L_(s)?M_(s):s.Va.set("Unknown")):(await s.ma.stop(),T1(s))}))),s.ma}function xa(s){return s.fa||(s.fa=(function(t,r,a){const l=ve(t);return l.sa(),new QM(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:s4.bind(null,s),t_:o4.bind(null,s),ta:i4.bind(null,s),na:a4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await kc(s)):(await s.fa.stop(),s.Ta.length>0&&(ce(Vo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class U_{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,m=new U_(e,t,u,a,l);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pc(s,e){if(Kt("AsyncQueue",`${e}: ${s}`),Sa(s))return new oe(Q.UNAVAILABLE,`${e}: ${s}`);throw s}class Xl{static emptySet(e){return new Xl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=Wu(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Xl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Cw{constructor(){this.ga=new wt(ye.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):be(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class yc{constructor(e,t,r,a,l,u,m,h,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=h,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach((m=>{u.push({type:0,doc:m})})),new yc(e,t,Xl.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class l4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class c4{constructor(){this.queries=kw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=ve(t),l=a.queries;a.queries=kw(),l.forEach(((u,m)=>{for(const h of m.ba)h.onError(r)}))})(this,new oe(Q.ABORTED,"Firestore shutting down"))}}function kw(){return new gi((s=>gA(s)),Xd)}async function z_(s,e){const t=ve(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new l4,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const m=Pc(u,`Initialization of query '${Ul(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&B_(t)}async function q_(s,e){const t=ve(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function u4(s,e){const t=ve(s);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const m of u.ba)m.Fa(a)&&(r=!0);u.wa=a}}r&&B_(t)}function d4(s,e,t){const r=ve(s),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function B_(s){s.Ca.forEach((e=>{e.next()}))}var b0,Dw;(Dw=b0||(b0={})).Ma="default",Dw.Cache="cache";class F_{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new yc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==b0.Cache}}class h4{constructor(e,t){this.qa=e,this.byteLength=t}Ua(){return"metadata"in this.qa}}class Pw{constructor(e){this.serializer=e}Ks(e){return Os(this.serializer,e)}qs(e){return e.metadata.exists?zA(this.serializer,e.document,!1):At.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return $t(e)}}class f4{constructor(e,t){this.$a=e,this.serializer=t,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=A1(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const r=Xe.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new Pw(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.Ks(a.metadata.name);for(const u of a.metadata.queries){const m=(t.get(u)||Ge()).add(l);t.set(u,m)}}return t}async ja(e){const t=await LM(e,new Pw(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const a of this.Wa)await UM(e,a,r.get(a.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:t}}}function A1(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class N1{constructor(e){this.key=e}}class R1{constructor(e){this.key=e}}class C1{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ge(),this.mutatedKeys=Ge(),this.eu=_A(e),this.tu=new Xl(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new Cw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,m=!1;const h=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,E)=>{const w=a.get(b),S=Jd(this.query,E)?E:null,q=!!w&&this.mutatedKeys.has(w.key),Y=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let te=!1;w&&S?w.data.isEqual(S.data)?q!==Y&&(r.track({type:3,doc:S}),te=!0):this.su(w,S)||(r.track({type:2,doc:S}),te=!0,(h&&this.eu(S,h)>0||y&&this.eu(S,y)<0)&&(m=!0)):!w&&S?(r.track({type:0,doc:S}),te=!0):w&&!S&&(r.track({type:1,doc:w}),te=!0,(h||y)&&(m=!0)),te&&(S?(u=u.add(S),l=Y?l.add(b):l.delete(b)):(u=u.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const b=this.query.limitType==="F"?u.last():u.first();u=u.delete(b.key),l=l.delete(b.key),r.track({type:1,doc:b})}return{tu:u,iu:r,Ss:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((b,E)=>(function(S,q){const Y=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Vt:te})}};return Y(S)-Y(q)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(r),a=a??!1;const m=t&&!a?this._u():[],h=this.Ya.size===0&&this.current&&!a?1:0,y=h!==this.Xa;return this.Xa=h,u.length!==0||y?{snapshot:new yc(this.query,e.tu,l,u,e.mutatedKeys,h===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Cw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ge(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new R1(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new N1(r))})),t}cu(e){this.Za=e.ks,this.Ya=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ra="SyncEngine";class m4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class p4{constructor(e){this.key=e,this.hu=!1}}class g4{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new gi((m=>gA(m)),Xd),this.Iu=new Map,this.Eu=new Set,this.Ru=new wt(ye.comparator),this.Au=new Map,this.Vu=new N_,this.du={},this.mu=new Map,this.fu=Po.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function y4(s,e,t=!0){const r=rp(s);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await k1(r,e,t,!0),a}async function _4(s,e){const t=rp(s);await k1(t,e,!0,!1)}async function k1(s,e,t,r){const a=await mc(s.localStore,Qn(e)),l=a.targetId,u=s.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await H_(s,e,l,u==="current",a.resumeToken)),s.isPrimaryClient&&t&&np(s.remoteStore,a),m}async function H_(s,e,t,r,a){s.pu=(E,w,S)=>(async function(Y,te,R,Z){let ae=te.view.ru(R);ae.Ss&&(ae=await wm(Y.localStore,te.query,!1).then((({documents:A})=>te.view.ru(A,ae))));const fe=Z&&Z.targetChanges.get(te.targetId),se=Z&&Z.targetMismatches.get(te.targetId)!=null,he=te.view.applyChanges(ae,Y.isPrimaryClient,fe,se);return x0(Y,te.targetId,he.au),he.snapshot})(s,E,w,S);const l=await wm(s.localStore,e,!0),u=new C1(e,l.ks),m=u.ru(l.documents),h=th.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),y=u.applyChanges(m,s.isPrimaryClient,h);x0(s,t,y.au);const b=new m4(e,t,u);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function v4(s,e,t){const r=ve(s),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((u=>!Xd(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await pc(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&gc(r.remoteStore,a.targetId),_c(r,a.targetId)})).catch(Ia)):(_c(r,a.targetId),await pc(r.localStore,a.targetId,!0))}async function b4(s,e){const t=ve(s),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),gc(t.remoteStore,r.targetId))}async function x4(s,e,t){const r=$_(s);try{const a=await(function(u,m){const h=ve(u),y=ct.now(),b=m.reduce(((S,q)=>S.add(q.key)),Ge());let E,w;return h.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let q=ar(),Y=Ge();return h.xs.getEntries(S,b).next((te=>{q=te,q.forEach(((R,Z)=>{Z.isValidDocument()||(Y=Y.add(R))}))})).next((()=>h.localDocuments.getOverlayedDocuments(S,q))).next((te=>{E=te;const R=[];for(const Z of m){const ae=Bj(Z,E.get(Z.key).overlayedDocument);ae!=null&&R.push(new yi(Z.key,ae,oA(ae.value.mapValue),Vt.exists(!0)))}return h.mutationQueue.addMutationBatch(S,y,R,m)})).next((te=>{w=te;const R=te.applyToLocalDocumentSet(E,Y);return h.documentOverlayCache.saveOverlays(S,te.batchId,R)}))})).then((()=>({batchId:w.batchId,changes:bA(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,m,h){let y=u.du[u.currentUser.toKey()];y||(y=new wt(je)),y=y.insert(m,h),u.du[u.currentUser.toKey()]=y})(r,a.batchId,t),await _i(r,a.changes),await kc(r.remoteStore)}catch(a){const l=Pc(a,"Failed to persist write");t.reject(l)}}async function D1(s,e){const t=ve(s);try{const r=await jM(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(Se(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Se(u.hu,14607):a.removedDocuments.size>0&&(Se(u.hu,42227),u.hu=!1))})),await _i(t,r,e)}catch(r){await Ia(r)}}function Vw(s,e,t){const r=ve(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,u)=>{const m=u.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(u,m){const h=ve(u);h.onlineState=m;let y=!1;h.queries.forEach(((b,E)=>{for(const w of E.ba)w.va(m)&&(y=!0)})),y&&B_(h)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E4(s,e,t){const r=ve(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let u=new wt(ye.comparator);u=u.insert(l,At.newNoDocument(l,Ne.min()));const m=Ge().add(l),h=new eh(Ne.min(),new Map,new wt(je),u,m);await D1(r,h),r.Ru=r.Ru.remove(l),r.Au.delete(e),K_(r)}else await pc(r.localStore,e,!1).then((()=>_c(r,e,t))).catch(Ia)}async function T4(s,e){const t=ve(s),r=e.batch.batchId;try{const a=await OM(t.localStore,e);Q_(t,r,null),G_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await _i(t,a)}catch(a){await Ia(a)}}async function w4(s,e,t){const r=ve(s);try{const a=await(function(u,m){const h=ve(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return h.mutationQueue.lookupMutationBatch(y,m).next((E=>(Se(E!==null,37113),b=E.keys(),h.mutationQueue.removeMutationBatch(y,E)))).next((()=>h.mutationQueue.performConsistencyCheck(y))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(y,b,m))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>h.localDocuments.getDocuments(y,b)))}))})(r.localStore,e);Q_(r,e,t),G_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await _i(r,a)}catch(a){await Ia(a)}}async function I4(s,e){const t=ve(s);Na(t.remoteStore)||ce(Ra,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(u){const m=ve(u);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(h=>m.mutationQueue.getHighestUnacknowledgedBatchId(h)))})(t.localStore);if(r===ua)return void e.resolve();const a=t.mu.get(r)||[];a.push(e),t.mu.set(r,a)}catch(r){const a=Pc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function G_(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function Q_(s,e,t){const r=ve(s);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function _c(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||P1(s,r)}))}function P1(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(gc(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),K_(s))}function x0(s,e,t){for(const r of t)r instanceof N1?(s.Vu.addReference(r.key,e),S4(s,r)):r instanceof R1?(ce(Ra,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||P1(s,r.key)):be(19791,{wu:r})}function S4(s,e){const t=e.key,r=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(r)||(ce(Ra,"New document in limbo: "+t),s.Eu.add(r),K_(s))}function K_(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new ye(Xe.fromString(e)),r=s.fu.next();s.Au.set(r,new p4(t)),s.Ru=s.Ru.insert(t,r),np(s.remoteStore,new ai(Qn(Ac(t.path)),r,"TargetPurposeLimboResolution",sr.ce))}}async function _i(s,e,t){const r=ve(s),a=[],l=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,h)=>{u.push(r.pu(h,e,t).then((y=>{if((y||t)&&r.isPrimaryClient){const b=y?!y.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,b?"current":"not-current")}if(y){a.push(y);const b=D_.Es(h.targetId,y);l.push(b)}})))})),await Promise.all(u),r.Pu.J_(a),await(async function(h,y){const b=ve(h);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>U.forEach(y,(w=>U.forEach(w.Ts,(S=>b.persistence.referenceDelegate.addReference(E,w.targetId,S))).next((()=>U.forEach(w.Is,(S=>b.persistence.referenceDelegate.removeReference(E,w.targetId,S)))))))))}catch(E){if(!Sa(E))throw E;ce(P_,"Failed to update sequence numbers: "+E)}for(const E of y){const w=E.targetId;if(!E.fromCache){const S=b.vs.get(w),q=S.snapshotVersion,Y=S.withLastLimboFreeSnapshotVersion(q);b.vs=b.vs.insert(w,Y)}}})(r.localStore,l))}async function A4(s,e){const t=ve(s);if(!t.currentUser.isEqual(e)){ce(Ra,"User change. New user:",e.toKey());const r=await u1(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((m=>{m.forEach((h=>{h.reject(new oe(Q.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _i(t,r.Ns)}}function N4(s,e){const t=ve(s),r=t.Au.get(e);if(r&&r.hu)return Ge().add(r.key);{let a=Ge();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const m=t.Tu.get(u);a=a.unionWith(m.view.nu)}return a}}async function R4(s,e){const t=ve(s),r=await wm(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&x0(t,e.targetId,a.au),a}async function C4(s,e){const t=ve(s);return m1(t.localStore,e).then((r=>_i(t,r)))}async function k4(s,e,t,r){const a=ve(s),l=await(function(m,h){const y=ve(m),b=ve(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",(E=>b.Xn(E,h).next((w=>w?y.localDocuments.getDocuments(E,w):U.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await kc(a.remoteStore):t==="acknowledged"||t==="rejected"?(Q_(a,e,r||null),G_(a,e),(function(m,h){ve(ve(m).mutationQueue).nr(h)})(a.localStore,e)):be(6720,"Unknown batchState",{bu:t}),await _i(a,l)):ce(Ra,"Cannot apply mutation batch with id: "+e)}async function D4(s,e){const t=ve(s);if(rp(t),$_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await Ow(t,r.toArray());t.gu=!0,await v0(t.remoteStore,!0);for(const l of a)np(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then((()=>(_c(t,u),pc(t.localStore,u,!0)))),gc(t.remoteStore,u)})),await a,await Ow(t,r),(function(u){const m=ve(u);m.Au.forEach(((h,y)=>{gc(m.remoteStore,y)})),m.Vu.zr(),m.Au=new Map,m.Ru=new wt(ye.comparator)})(t),t.gu=!1,await v0(t.remoteStore,!1)}}async function Ow(s,e,t){const r=ve(s),a=[],l=[];for(const u of e){let m;const h=r.Iu.get(u);if(h&&h.length!==0){m=await mc(r.localStore,Qn(h[0]));for(const y of h){const b=r.Tu.get(y),E=await R4(r,b);E.snapshot&&l.push(E.snapshot)}}else{const y=await f1(r.localStore,u);m=await mc(r.localStore,y),await H_(r,V1(y),u,!1,m.resumeToken)}a.push(m)}return r.Pu.J_(l),a}function V1(s){return pA(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function P4(s){return(function(t){return ve(ve(t).persistence).hs()})(ve(s).localStore)}async function V4(s,e,t,r){const a=ve(s);if(a.gu)return void ce(Ra,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await m1(a.localStore,yA(l[0])),m=eh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",zt.EMPTY_BYTE_STRING);await _i(a,u,m);break}case"rejected":await pc(a.localStore,e,!0),_c(a,e,r);break;default:be(64155,t)}}async function O4(s,e,t){const r=rp(s);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ce(Ra,"Adding an already active target "+a);continue}const l=await f1(r.localStore,a),u=await mc(r.localStore,l);await H_(r,V1(l),u.targetId,!1,u.resumeToken),np(r.remoteStore,u)}for(const a of t)r.Iu.has(a)&&await pc(r.localStore,a,!1).then((()=>{gc(r.remoteStore,a),_c(r,a)})).catch(Ia)}}function rp(s){const e=ve(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=D1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E4.bind(null,e),e.Pu.J_=u4.bind(null,e.eventManager),e.Pu.yu=d4.bind(null,e.eventManager),e}function $_(s){const e=ve(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w4.bind(null,e),e}function j4(s,e,t){const r=ve(s);(async function(l,u,m){try{const h=await u.getMetadata();if(await(function(S,q){const Y=ve(S),te=$t(q.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",(R=>Y.Pi.getBundleMetadata(R,q.id))).then((R=>!!R&&R.createTime.compareTo(te)>=0))})(l.localStore,h))return await u.close(),m._completeWith((function(S){return{taskState:"Success",documentsLoaded:S.totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}})(h)),Promise.resolve(new Set);m._updateProgress(A1(h));const y=new f4(h,u.serializer);let b=await u.Su();for(;b;){const w=await y.Ga(b);w&&m._updateProgress(w),b=await u.Su()}const E=await y.ja(l.localStore);return await _i(l,E.Ja,void 0),await(function(S,q){const Y=ve(S);return Y.persistence.runTransaction("Save bundle","readwrite",(te=>Y.Pi.saveBundleMetadata(te,q)))})(l.localStore,h),m._completeWith(E.progress),Promise.resolve(E.Ha)}catch(h){return Ls(Ra,`Loading bundle failed with ${h}`),m._failWith(h),Promise.resolve(new Set)}})(r,e,t).then((a=>{r.sharedClientState.notifyBundleLoaded(a)}))}class Od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return c1(this.persistence,new l1,e.initialUser,this.serializer)}Cu(e){return new R_(tp.Vi,this.serializer)}Du(e){return new v1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Od.provider={build:()=>new Od};class M4 extends Od{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Se(this.persistence.referenceDelegate instanceof Tm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new n1(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new R_((r=>Tm.Vi(r,t)),this.serializer)}}class O1 extends Od{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await $_(this.xu.syncEngine),await kc(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return c1(this.persistence,new l1,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new n1(r,e.asyncQueue,t)}Mu(e,t){const r=new zO(t,this.persistence);return new UO(e.asyncQueue,r)}Cu(e){const t=k_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new C_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,b1(),rm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new v1}}class L4 extends O1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Py&&(this.sharedClientState.syncEngine={So:k4.bind(null,t),Do:V4.bind(null,t),Co:O4.bind(null,t),hs:P4.bind(null,t),bo:C4.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await D4(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=b1();if(!Py.v(t))throw new oe(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=k_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Py(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class jd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=A4.bind(null,this.syncEngine),await v0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new c4})()}createDatastore(e){const t=nh(e.databaseInfo.databaseId),r=HM(e.databaseInfo);return YM(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,u,m){return new XM(r,a,l,u,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Vw(this.syncEngine,t,0)),(function(){return Aw.v()?new Aw:new zM})())}createSyncEngine(e,t){return(function(a,l,u,m,h,y,b){const E=new g4(a,l,u,m,h,y);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ve(t);ce(Vo,"RemoteStore shutting down."),r.Ea.add(5),await Cc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jd.provider={build:()=>new jd};function jw(s,e=10240){let t=0;return{async read(){if(t<s.byteLength){const r={value:s.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class sp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Kt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class U4{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new An,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);const a=await this.Uu(r);return new h4(JSON.parse(a),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}let z4=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const u=ve(a),m={documents:l.map((E=>Pd(u.serializer,E)))},h=await u.jo("BatchGetDocuments",u.serializer.databaseId,Xe.emptyPath(),m,l.length),y=new Map;h.forEach((E=>{const w=Xj(u.serializer,E);y.set(w.key.toString(),w)}));const b=[];return l.forEach((E=>{const w=y.get(E.toString());Se(!!w,55234,{key:E}),b.push(w)})),b})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const a=ye.fromPath(r);this.mutations.push(new v_(a,this.precondition(a)))})),await(async function(r,a){const l=ve(r),u={writes:a.map((m=>Vd(l.serializer,m)))};await l.Wo("Commit",l.serializer.databaseId,Xe.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw be(50498,{Gu:e.constructor.name});t=Ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new oe(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ne.min())?Vt.exists(!1):Vt.updateTime(t):Vt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ne.min()))throw new oe(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vt.updateTime(t)}return Vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class q4{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.zu=r.maxAttempts,this.M_=new O_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new z4(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((a=>{this.Zu(a)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!$d(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!CA(t)}return!1}}const Ea="FirestoreClient";class B4{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=yn.UNAUTHENTICATED,this.clientId=i_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{ce(Ea,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ce(Ea,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Pc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Oy(s,e){s.asyncQueue.verifyOperationInProgress(),ce(Ea,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async a=>{r.isEqual(a)||(await u1(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Mw(s,e){s.asyncQueue.verifyOperationInProgress();const t=await Y_(s);ce(Ea,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>Rw(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,a)=>Rw(e.remoteStore,a))),s._onlineComponents=e}async function Y_(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ce(Ea,"Using user provided OfflineComponentProvider");try{await Oy(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Q.FAILED_PRECONDITION||a.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ls("Error using user provided cache. Falling back to memory cache: "+t),await Oy(s,new Od)}}else ce(Ea,"Using default OfflineComponentProvider"),await Oy(s,new M4(void 0));return s._offlineComponents}async function ip(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ce(Ea,"Using user provided OnlineComponentProvider"),await Mw(s,s._uninitializedComponentsProvider._online)):(ce(Ea,"Using default OnlineComponentProvider"),await Mw(s,new jd))),s._onlineComponents}function j1(s){return Y_(s).then((e=>e.persistence))}function W_(s){return Y_(s).then((e=>e.localStore))}function M1(s){return ip(s).then((e=>e.remoteStore))}function X_(s){return ip(s).then((e=>e.syncEngine))}function F4(s){return ip(s).then((e=>e.datastore))}async function vc(s){const e=await ip(s),t=e.eventManager;return t.onListen=y4.bind(null,e.syncEngine),t.onUnlisten=v4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=b4.bind(null,e.syncEngine),t}function H4(s){return s.asyncQueue.enqueue((async()=>{const e=await j1(s),t=await M1(s);return e.setNetworkEnabled(!0),(function(a){const l=ve(a);return l.Ea.delete(0),rh(l)})(t)}))}function G4(s){return s.asyncQueue.enqueue((async()=>{const e=await j1(s),t=await M1(s);return e.setNetworkEnabled(!1),(async function(a){const l=ve(a);l.Ea.add(0),await Cc(l),l.Va.set("Offline")})(t)}))}function Q4(s,e,t,r){const a=new sp(r),l=new F_(e,a,t);return s.asyncQueue.enqueueAndForget((async()=>z_(await vc(s),l))),()=>{a.Nu(),s.asyncQueue.enqueueAndForget((async()=>q_(await vc(s),l)))}}function K4(s,e){const t=new An;return s.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const m=await(function(y,b){const E=ve(y);return E.persistence.runTransaction("read document","readonly",(w=>E.localDocuments.getDocument(w,b)))})(a,l);m.isFoundDocument()?u.resolve(m):m.isNoDocument()?u.resolve(null):u.reject(new oe(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const h=Pc(m,`Failed to get document '${l} from cache`);u.reject(h)}})(await W_(s),e,t))),t.promise}function L1(s,e,t={}){const r=new An;return s.asyncQueue.enqueueAndForget((async()=>(function(l,u,m,h,y){const b=new sp({next:w=>{b.Nu(),u.enqueueAndForget((()=>q_(l,E)));const S=w.docs.has(m);!S&&w.fromCache?y.reject(new oe(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&h&&h.source==="server"?y.reject(new oe(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(w)},error:w=>y.reject(w)}),E=new F_(Ac(m.path),b,{includeMetadataChanges:!0,Ka:!0});return z_(l,E)})(await vc(s),s.asyncQueue,e,t,r))),r.promise}function $4(s,e){const t=new An;return s.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const m=await wm(a,l,!0),h=new C1(l,m.ks),y=h.ru(m.documents),b=h.applyChanges(y,!1);u.resolve(b.snapshot)}catch(m){const h=Pc(m,`Failed to execute query '${l} against cache`);u.reject(h)}})(await W_(s),e,t))),t.promise}function U1(s,e,t={}){const r=new An;return s.asyncQueue.enqueueAndForget((async()=>(function(l,u,m,h,y){const b=new sp({next:w=>{b.Nu(),u.enqueueAndForget((()=>q_(l,E))),w.fromCache&&h.source==="server"?y.reject(new oe(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(w)},error:w=>y.reject(w)}),E=new F_(m,b,{includeMetadataChanges:!0,Ka:!0});return z_(l,E)})(await vc(s),s.asyncQueue,e,t,r))),r.promise}function Y4(s,e){const t=new An;return s.asyncQueue.enqueueAndForget((async()=>x4(await X_(s),e,t))),t.promise}function W4(s,e){const t=new sp(e);return s.asyncQueue.enqueueAndForget((async()=>(function(a,l){ve(a).Ca.add(l),l.next()})(await vc(s),t))),()=>{t.Nu(),s.asyncQueue.enqueueAndForget((async()=>(function(a,l){ve(a).Ca.delete(l)})(await vc(s),t)))}}function X4(s,e,t){const r=new An;return s.asyncQueue.enqueueAndForget((async()=>{const a=await F4(s);new q4(s.asyncQueue,a,t,e,r).ju()})),r.promise}function J4(s,e,t,r){const a=(function(u,m){let h;return h=typeof u=="string"?DA().encode(u):u,(function(b,E){return new U4(b,E)})((function(b,E){if(b instanceof Uint8Array)return jw(b,E);if(b instanceof ArrayBuffer)return jw(new Uint8Array(b),E);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(h),m)})(t,nh(e));s.asyncQueue.enqueueAndForget((async()=>{j4(await X_(s),a,r)}))}function Z4(s,e){return s.asyncQueue.enqueue((async()=>(function(r,a){const l=ve(r);return l.persistence.runTransaction("Get named query","readonly",(u=>l.Pi.getNamedQuery(u,a)))})(await W_(s),e)))}function z1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const e6="ComponentProvider",Lw=new Map;function t6(s,e,t,r,a){return new pj(s,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,z1(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}const q1="firestore.googleapis.com",Uw=!0;class zw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q1,this.ssl=Uw}else this.host=e.host,this.ssl=e.ssl??Uw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gM)throw new oe(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=z1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sh{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new AO;switch(r.type){case"firstParty":return new kO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Lw.get(t);r&&(ce(e6,"Removing Datastore"),Lw.delete(t),r.terminate())})(this),Promise.resolve()}}function n6(s,e,t,r={}){s=it(s,sh);const a=xc(e),l=s._getSettings(),u={...l,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;a&&(iI(`https://${m}`),aI("Firestore",!0)),l.host!==q1&&l.host!==m&&Ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...l,host:m,ssl:a,emulatorOptions:r};if(!ha(h,u)&&(s._setSettings(h),r.mockUserToken)){let y,b;if(typeof r.mockUserToken=="string")y=r.mockUserToken,b=yn.MOCK_USER;else{y=FC(r.mockUserToken,s._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new oe(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new yn(E)}s._authCredentials=new NO(new kS(y,b))}}let Kn=class B1{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new B1(this.firestore,e,this._query)}},Tt=class Zu{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new da(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zu(this.firestore,e,this._key)}toJSON(){return{type:Zu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Kd(t,Zu._jsonSchema))return new Zu(e,r||null,new ye(Xe.fromString(t.referencePath)))}};Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:cn("string",Tt._jsonSchemaVersion),referencePath:cn("string")};let da=class F1 extends Kn{constructor(e,t,r){super(e,t,Ac(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new ye(e))}withConverter(e){return new F1(this.firestore,e,this._path)}};function H1(s,e,...t){if(s=ke(s),a_("collection","path",e),s instanceof sh){const r=Xe.fromString(e,...t);return NT(r),new da(s,null,r)}{if(!(s instanceof Tt||s instanceof da))throw new oe(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Xe.fromString(e,...t));return NT(r),new da(s.firestore,null,r)}}function r6(s,e){if(s=it(s,sh),a_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new oe(Q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kn(s,null,(function(r){return new pi(Xe.emptyPath(),r)})(e))}function Nm(s,e,...t){if(s=ke(s),arguments.length===1&&(e=i_.newId()),a_("doc","path",e),s instanceof sh){const r=Xe.fromString(e,...t);return AT(r),new Tt(s,null,new ye(r))}{if(!(s instanceof Tt||s instanceof da))throw new oe(Q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Xe.fromString(e,...t));return AT(r),new Tt(s.firestore,s instanceof da?s.converter:null,new ye(r))}}function G1(s,e){return s=ke(s),e=ke(e),(s instanceof Tt||s instanceof da)&&(e instanceof Tt||e instanceof da)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function Q1(s,e){return s=ke(s),e=ke(e),s instanceof Kn&&e instanceof Kn&&s.firestore===e.firestore&&Xd(s._query,e._query)&&s.converter===e.converter}const qw="AsyncQueue";class Bw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new O_(this,"async_queue_retry"),this._c=()=>{const r=rm();r&&ce(qw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=rm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=rm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new An;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Sa(e))throw e;ce(qw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Kt("INTERNAL UNHANDLED ERROR: ",Fw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=U_.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&be(47125,{Pc:Fw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Fw(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class s6{constructor(){this._progressObserver={},this._taskCompletionResolver=new An,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const i6=-1;let Yt=class extends sh{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new Bw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bw(e),this._firestoreClient=void 0,await e}}};function Ln(s){if(s._terminated)throw new oe(Q.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||K1(s),s._firestoreClient}function K1(s){const e=s._freezeSettings(),t=t6(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new B4(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}function a6(s,e){Ls("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return $1(s,jd.provider,{build:r=>new O1(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function o6(s){Ls("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();$1(s,jd.provider,{build:t=>new L4(t,e.cacheSizeBytes)})}function $1(s,e,t){if((s=it(s,Yt))._firestoreClient||s._terminated)throw new oe(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new oe(Q.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},K1(s)}function l6(s){if(s._initialized&&!s._terminated)throw new oe(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new An;return s._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Vs.v())return Promise.resolve();const a=r+o1;await Vs.delete(a)})(k_(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function c6(s){return(function(t){const r=new An;return t.asyncQueue.enqueueAndForget((async()=>I4(await X_(t),r))),r.promise})(Ln(s=it(s,Yt)))}function u6(s){return H4(Ln(s=it(s,Yt)))}function d6(s){return G4(Ln(s=it(s,Yt)))}function h6(s,e){const t=Ln(s=it(s,Yt)),r=new s6;return J4(t,s._databaseId,e,r),r}function f6(s,e){return Z4(Ln(s=it(s,Yt)),e).then((t=>t?new Kn(s,null,t.query):null))}class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(zt.fromBase64String(e))}catch(t){throw new oe(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jn(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kd(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:cn("string",jn._jsonSchemaVersion),bytes:cn("string")};let Oo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};let zo=class{constructor(e){this._methodName=e}};class Zr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zr._jsonSchemaVersion}}static fromJSON(e){if(Kd(e,Zr._jsonSchema))return new Zr(e.latitude,e.longitude)}}Zr._jsonSchemaVersion="firestore/geoPoint/1.0",Zr._jsonSchema={type:cn("string",Zr._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};class es{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kd(e,es._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new es(e.vectorValues);throw new oe(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}es._jsonSchemaVersion="firestore/vectorValue/1.0",es._jsonSchema={type:cn("string",es._jsonSchemaVersion),vectorValues:cn("object")};const m6=/^__.*__$/;class p6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new yi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nc(e,this.data,t,this.fieldTransforms)}}class Y1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new yi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function W1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{dataSource:s})}}class ap{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Rm(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(W1(this.dataSource)&&m6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class g6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nh(e)}createContext(e,t,r,a=!1){return new ap({dataSource:e,methodName:t,targetDoc:r,path:Pt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qo(s){const e=s._freezeSettings(),t=nh(s._databaseId);return new g6(s._databaseId,!!e.ignoreUndefinedProperties,t)}function op(s,e,t,r,a,l={}){const u=s.createContext(l.merge||l.mergeFields?2:0,e,t,a);sv("Data must be an object, but it was:",u,r);const m=Z1(r,u);let h,y;if(l.merge)h=new ir(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const b=[];for(const E of l.mergeFields){const w=jo(e,E,t);if(!u.contains(w))throw new oe(Q.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);nN(b,w)||b.push(w)}h=new ir(b),y=u.fieldTransforms.filter((E=>h.covers(E.field)))}else h=null,y=u.fieldTransforms;return new p6(new Sn(m),h,y)}class ih extends zo{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ih}}function X1(s,e,t){return new ap({dataSource:3,targetDoc:e.settings.targetDoc,methodName:s._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class J_ extends zo{_toFieldTransform(e){return new Zd(e.path,new dc)}isEqual(e){return e instanceof J_}}class Z_ extends zo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=X1(this,e,!0),r=this.Ac.map((l=>Bo(l,t))),a=new Ro(r);return new Zd(e.path,a)}isEqual(e){return e instanceof Z_&&ha(this.Ac,e.Ac)}}class ev extends zo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=X1(this,e,!0),r=this.Ac.map((l=>Bo(l,t))),a=new Co(r);return new Zd(e.path,a)}isEqual(e){return e instanceof ev&&ha(this.Ac,e.Ac)}}class tv extends zo{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new hc(e.serializer,TA(e.serializer,this.Vc));return new Zd(e.path,t)}isEqual(e){return e instanceof tv&&this.Vc===e.Vc}}function nv(s,e,t,r){const a=s.createContext(1,e,t);sv("Data must be an object, but it was:",a,r);const l=[],u=Sn.empty();Aa(r,((h,y)=>{const b=tN(e,h,t);y=ke(y);const E=a.childContextForFieldPath(b);if(y instanceof ih)l.push(b);else{const w=Bo(y,E);w!=null&&(l.push(b),u.set(b,w))}}));const m=new ir(l);return new Y1(u,m,a.fieldTransforms)}function rv(s,e,t,r,a,l){const u=s.createContext(1,e,t),m=[jo(e,r,t)],h=[a];if(l.length%2!=0)throw new oe(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)m.push(jo(e,l[w])),h.push(l[w+1]);const y=[],b=Sn.empty();for(let w=m.length-1;w>=0;--w)if(!nN(y,m[w])){const S=m[w];let q=h[w];q=ke(q);const Y=u.childContextForFieldPath(S);if(q instanceof ih)y.push(S);else{const te=Bo(q,Y);te!=null&&(y.push(S),b.set(S,te))}}const E=new ir(y);return new Y1(b,E,u.fieldTransforms)}function J1(s,e,t,r=!1){return Bo(t,s.createContext(r?4:3,e))}function Bo(s,e){if(eN(s=ke(s)))return sv("Unsupported field value:",e,s),Z1(s,e);if(s instanceof zo)return(function(r,a){if(!W1(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const m of r){let h=Bo(m,a.childContextForArray(u));h==null&&(h={nullValue:"NULL_VALUE"}),l.push(h),u++}return{arrayValue:{values:l}}})(s,e)}return(function(r,a){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TA(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ct.fromDate(r);return{timestampValue:fc(a.serializer,l)}}if(r instanceof ct){const l=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fc(a.serializer,l)}}if(r instanceof Zr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:OA(a.serializer,r._byteString)};if(r instanceof Tt){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:w_(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof es)return(function(u,m){const h=u instanceof es?u.toArray():u;return{mapValue:{fields:{[f_]:{stringValue:m_},[lc]:{arrayValue:{values:h.map((b=>{if(typeof b!="number")throw m.createError("VectorValues must only contain numeric values.");return __(m.serializer,b)}))}}}}}})(r,a);if(KA(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Fm(r)}`)})(s,e)}function Z1(s,e){const t={};return JS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Aa(s,((r,a)=>{const l=Bo(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function eN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ct||s instanceof Zr||s instanceof jn||s instanceof Tt||s instanceof zo||s instanceof es||KA(s))}function sv(s,e,t){if(!eN(t)||!VS(t)){const r=Fm(t);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function jo(s,e,t){if((e=ke(e))instanceof Oo)return e._internalPath;if(typeof e=="string")return tN(s,e);throw Rm("Field path arguments must be of type string or ",s,!1,void 0,t)}const y6=new RegExp("[~\\*/\\[\\]]");function tN(s,e,t){if(e.search(y6)>=0)throw Rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Oo(...e.split("."))._internalPath}catch{throw Rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Rm(s,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let h="";return(l||u)&&(h+=" (found",l&&(h+=` in field ${r}`),u&&(h+=` in document ${a}`),h+=")"),new oe(Q.INVALID_ARGUMENT,m+s+h)}function nN(s,e){return s.some((t=>t.isEqual(e)))}class iv{convertValue(e,t="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Aa(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[lc].arrayValue?.values?.map((r=>kt(r.doubleValue)));return new es(t)}convertGeoPoint(e){return new Zr(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ym(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Rd(e));default:return null}}convertTimestamp(e){const t=di(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xe.fromString(e);Se(QA(r),9688,{name:e});const a=new ya(r.get(1),r.get(3)),l=new ye(r.popFirst(5));return a.isEqual(t)||Kt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class Fo extends iv{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}function _6(){return new ih("deleteField")}function v6(){return new J_("serverTimestamp")}function b6(...s){return new Z_("arrayUnion",s)}function x6(...s){return new ev("arrayRemove",s)}function E6(s){return new tv("increment",s)}const Hw="@firebase/firestore",Gw="4.10.0";function E0(s){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(s,["next","error","complete"])}class Md{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(jo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class T6 extends Md{data(){return super.data()}}function rN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new oe(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class av{}class ah extends av{}function na(s,e,...t){let r=[];e instanceof av&&r.push(e),r=r.concat(t),(function(l){const u=l.filter((h=>h instanceof ov)).length,m=l.filter((h=>h instanceof lp)).length;if(u>1||u>0&&m>0)throw new oe(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)s=a._apply(s);return s}class lp extends ah{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new lp(e,t,r)}_apply(e){const t=this._parse(e);return iN(e._query,t),new Kn(e.firestore,e.converter,c0(e._query,t))}_parse(e){const t=qo(e.firestore);return(function(l,u,m,h,y,b,E){let w;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new oe(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Kw(E,b);const q=[];for(const Y of E)q.push(Qw(h,l,Y));w={arrayValue:{values:q}}}else w=Qw(h,l,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Kw(E,b),w=J1(m,u,E,b==="in"||b==="not-in");return et.create(y,b,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function w6(s,e,t){const r=e,a=jo("where",s);return lp._create(a,r,t)}class ov extends av{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ov(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ft.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const m=l.getFlattenedFilters();for(const h of m)iN(u,h),u=c0(u,h)})(e._query,t),new Kn(e.firestore,e.converter,c0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lv extends ah{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lv(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new oe(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new oe(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dd(l,u)})(e._query,this._field,this._direction);return new Kn(e.firestore,e.converter,Rj(e._query,t))}}function I6(s,e="asc"){const t=e,r=jo("orderBy",s);return lv._create(r,t)}class cp extends ah{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new cp(e,t,r)}_apply(e){return new Kn(e.firestore,e.converter,vm(e._query,this._limit,this._limitType))}}function S6(s){return OS("limit",s),cp._create("limit",s,"F")}function A6(s){return OS("limitToLast",s),cp._create("limitToLast",s,"L")}class up extends ah{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new up(e,t,r)}_apply(e){const t=sN(e,this.type,this._docOrFields,this._inclusive);return new Kn(e.firestore,e.converter,Cj(e._query,t))}}function N6(...s){return up._create("startAt",s,!0)}function R6(...s){return up._create("startAfter",s,!1)}class dp extends ah{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new dp(e,t,r)}_apply(e){const t=sN(e,this.type,this._docOrFields,this._inclusive);return new Kn(e.firestore,e.converter,kj(e._query,t))}}function C6(...s){return dp._create("endBefore",s,!1)}function k6(...s){return dp._create("endAt",s,!0)}function sN(s,e,t,r){if(t[0]=ke(t[0]),t[0]instanceof Md)return(function(l,u,m,h,y){if(!h)throw new oe(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const b=[];for(const E of Yl(l))if(E.field.isKeyField())b.push(Ao(u,h.key));else{const w=h.data.field(E.field);if($m(w))throw new oe(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){const S=E.field.canonicalString();throw new oe(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}b.push(w)}return new ba(b,y)})(s._query,s.firestore._databaseId,e,t[0]._document,r);{const a=qo(s.firestore);return(function(u,m,h,y,b,E){const w=u.explicitOrderBy;if(b.length>w.length)throw new oe(Q.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let q=0;q<b.length;q++){const Y=b[q];if(w[q].field.isKeyField()){if(typeof Y!="string")throw new oe(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof Y}`);if(!g_(u)&&Y.indexOf("/")!==-1)throw new oe(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${Y}' contains a slash.`);const te=u.path.child(Xe.fromString(Y));if(!ye.isDocumentKey(te))throw new oe(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${te}' is not because it contains an odd number of segments.`);const R=new ye(te);S.push(Ao(m,R))}else{const te=J1(h,y,Y);S.push(te)}}return new ba(S,E)})(s._query,s.firestore._databaseId,a,e,t,r)}}function Qw(s,e,t){if(typeof(t=ke(t))=="string"){if(t==="")throw new oe(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g_(e)&&t.indexOf("/")!==-1)throw new oe(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xe.fromString(t));if(!ye.isDocumentKey(r))throw new oe(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ao(s,new ye(r))}if(t instanceof Tt)return Ao(s,t._key);throw new oe(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fm(t)}.`)}function Kw(s,e){if(!Array.isArray(s)||s.length===0)throw new oe(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iN(s,e){const t=(function(a,l){for(const u of a)for(const m of u.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function hp(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class D6 extends iv{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}class yo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Or=class aN extends Md{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jo("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=aN._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Or._jsonSchemaVersion="firestore/documentSnapshot/1.0",Or._jsonSchema={type:cn("string",Or._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};let pd=class extends Or{data(e={}){return super.data(e)}},ts=class oN{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new yo(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new pd(this._firestore,this._userDataWriter,r.key,r,new yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((m=>{const h=new pd(a._firestore,a._userDataWriter,m.doc.key,m.doc,new yo(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const h=new pd(a._firestore,a._userDataWriter,m.doc.key,m.doc,new yo(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,b=-1;return m.type!==0&&(y=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),b=u.indexOf(m.doc.key)),{type:P6(m.type),doc:h,oldIndex:y,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=oN._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=i_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function P6(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:s})}}function lN(s,e){return s instanceof Or&&e instanceof Or?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(s._document===null?e._document===null:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof ts&&e instanceof ts&&s._firestore===e._firestore&&Q1(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}ts._jsonSchemaVersion="firestore/querySnapshot/1.0",ts._jsonSchema={type:cn("string",ts._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};const V6={maxAttempts:5};let O6=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qo(e)}set(e,t,r){this._verifyNotCommitted();const a=aa(e,this._firestore),l=hp(a.converter,t,r),u=op(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(u.toMutation(a._key,Vt.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=aa(e,this._firestore);let u;return u=typeof(t=ke(t))=="string"||t instanceof Oo?rv(this._dataReader,"WriteBatch.update",l._key,t,r,a):nv(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=aa(e,this._firestore);return this._mutations=this._mutations.concat(new Rc(t._key,Vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function aa(s,e){if((s=ke(s)).firestore!==e)throw new oe(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class j6{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qo(e)}get(e){const t=aa(e,this._firestore),r=new D6(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return be(24041);const l=a[0];if(l.isFoundDocument())return new Md(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Md(this._firestore,r,t._key,null,t.converter);throw be(18433,{doc:l})}))}set(e,t,r){const a=aa(e,this._firestore),l=hp(a.converter,t,r),u=op(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,u),this}update(e,t,r,...a){const l=aa(e,this._firestore);let u;return u=typeof(t=ke(t))=="string"||t instanceof Oo?rv(this._dataReader,"Transaction.update",l._key,t,r,a):nv(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=aa(e,this._firestore);return this._transaction.delete(t._key),this}}let M6=class extends j6{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=aa(e,this._firestore),r=new Fo(this._firestore);return super.get(e).then((a=>new Or(this._firestore,r,t._key,a._document,new yo(!1,!1),t.converter)))}};function L6(s,e,t){s=it(s,Yt);const r={...V6,...t};(function(u){if(u.maxAttempts<1)throw new oe(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const a=Ln(s);return X4(a,(l=>e(new M6(s,l))),r)}function U6(s){s=it(s,Tt);const e=it(s.firestore,Yt),t=Ln(e);return L1(t,s._key).then((r=>cv(e,s,r)))}function z6(s){s=it(s,Tt);const e=it(s.firestore,Yt),t=Ln(e),r=new Fo(e);return K4(t,s._key).then((a=>new Or(e,r,s._key,a,new yo(a!==null&&a.hasLocalMutations,!0),s.converter)))}function q6(s){s=it(s,Tt);const e=it(s.firestore,Yt),t=Ln(e);return L1(t,s._key,{source:"server"}).then((r=>cv(e,s,r)))}function B6(s){s=it(s,Kn);const e=it(s.firestore,Yt),t=Ln(e),r=new Fo(e);return rN(s._query),U1(t,s._query).then((a=>new ts(e,r,s,a)))}function F6(s){s=it(s,Kn);const e=it(s.firestore,Yt),t=Ln(e),r=new Fo(e);return $4(t,s._query).then((a=>new ts(e,r,s,a)))}function H6(s){s=it(s,Kn);const e=it(s.firestore,Yt),t=Ln(e),r=new Fo(e);return U1(t,s._query,{source:"server"}).then((a=>new ts(e,r,s,a)))}function $w(s,e,t){s=it(s,Tt);const r=it(s.firestore,Yt),a=hp(s.converter,e,t),l=qo(r);return oh(r,[op(l,"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,Vt.none())])}function Yw(s,e,t,...r){s=it(s,Tt);const a=it(s.firestore,Yt),l=qo(a);let u;return u=typeof(e=ke(e))=="string"||e instanceof Oo?rv(l,"updateDoc",s._key,e,t,r):nv(l,"updateDoc",s._key,e),oh(a,[u.toMutation(s._key,Vt.exists(!0))])}function G6(s){return oh(it(s.firestore,Yt),[new Rc(s._key,Vt.none())])}function Q6(s,e){const t=it(s.firestore,Yt),r=Nm(s),a=hp(s.converter,e),l=qo(s.firestore);return oh(t,[op(l,"addDoc",r._key,a,s.converter!==null,{}).toMutation(r._key,Vt.exists(!1))]).then((()=>r))}function cN(s,...e){s=ke(s);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||E0(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(E0(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let l,u,m;if(s instanceof Tt)u=it(s.firestore,Yt),m=Ac(s._key.path),l={next:y=>{e[r]&&e[r](cv(u,s,y))},error:e[r+1],complete:e[r+2]};else{const y=it(s,Kn);u=it(y.firestore,Yt),m=y._query;const b=new Fo(u);l={next:E=>{e[r]&&e[r](new ts(u,b,y,E))},error:e[r+1],complete:e[r+2]},rN(s._query)}const h=Ln(u);return Q4(h,m,a,l)}function K6(s,e){s=it(s,Yt);const t=Ln(s),r=E0(e)?e:{next:e};return W4(t,r)}function oh(s,e){const t=Ln(s);return Y4(t,e)}function cv(s,e,t){const r=t.docs.get(e._key),a=new Fo(s);return new Or(s,a,e._key,r,new yo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){wO(Ta),pa(new js("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),m=new Yt(new RO(r.getProvider("auth-internal")),new DO(u,r.getProvider("app-check-internal")),gj(u,a),u);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Jr(Hw,Gw,e),Jr(Hw,Gw,"esm2020")})();const $6="@firebase/firestore-compat",Y6="0.4.4";function uv(s,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new oe("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ww(){if(typeof Uint8Array>"u")throw new oe("unimplemented","Uint8Arrays are not available in this environment.")}function Xw(){if(!fj())throw new oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}let uN=class T0{constructor(e){this._delegate=e}static fromBase64String(e){return Xw(),new T0(jn.fromBase64String(e))}static fromUint8Array(e){return Ww(),new T0(jn.fromUint8Array(e))}toBase64(){return Xw(),this._delegate.toBase64()}toUint8Array(){return Ww(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function w0(s){return W6(s,["next","error","complete"])}function W6(s,e){if(typeof s!="object"||s===null)return!1;const t=s;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}class X6{enableIndexedDbPersistence(e,t){return a6(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return o6(e._delegate)}clearIndexedDbPersistence(e){return l6(e._delegate)}}class dN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ya||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ls("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){n6(this._delegate,e,t,r)}enableNetwork(){return u6(this._delegate)}disableNetwork(){return d6(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,PS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return c6(this._delegate)}onSnapshotsInSync(e){return K6(this._delegate,e)}get app(){if(!this._appCompat)throw new oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bc(this,H1(this._delegate,e))}catch(t){throw Hn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vr(this,Nm(this._delegate,e))}catch(t){throw Hn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fn(this,r6(this._delegate,e))}catch(t){throw Hn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return L6(this._delegate,t=>e(new hN(this,t)))}batch(){return Ln(this._delegate),new fN(new O6(this._delegate,e=>oh(this._delegate,e)))}loadBundle(e){return h6(this._delegate,e)}namedQuery(e){return f6(this._delegate,e).then(t=>t?new Fn(this,t):null)}}class fp extends iv{constructor(e){super(),this.firestore=e}convertBytes(e){return new uN(new jn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Vr.forKey(t,this.firestore,null)}}function J6(s){IO(s)}class hN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fp(e)}get(e){const t=_o(e);return this._delegate.get(t).then(r=>new Ld(this._firestore,new Or(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=_o(e);return r?(uv("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=_o(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=_o(e);return this._delegate.delete(t),this}}class fN{constructor(e){this._delegate=e}set(e,t,r){const a=_o(e);return r?(uv("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=_o(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=_o(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mo{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ud(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Mo.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new Mo(e,new fp(e),t),a.set(t,l)),l}}Mo.INSTANCES=new WeakMap;class Vr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vr(t,new Tt(t._delegate,r,new ye(e)))}static forKey(e,t,r){return new Vr(t,new Tt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new bc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bc(this.firestore,H1(this._delegate,e))}catch(t){throw Hn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ke(e),e instanceof Tt?G1(this._delegate,e):!1}set(e,t){t=uv("DocumentReference.set",t);try{return t?$w(this._delegate,e,t):$w(this._delegate,e)}catch(r){throw Hn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Yw(this._delegate,e):Yw(this._delegate,e,t,...r)}catch(a){throw Hn(a,"updateDoc()","DocumentReference.update()")}}delete(){return G6(this._delegate)}onSnapshot(...e){const t=mN(e),r=pN(e,a=>new Ld(this.firestore,new Or(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return cN(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=z6(this._delegate):e?.source==="server"?t=q6(this._delegate):t=U6(this._delegate),t.then(r=>new Ld(this.firestore,new Or(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Vr(this.firestore,e?this._delegate.withConverter(Mo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Hn(s,e,t){return s.message=s.message.replace(e,t),s}function mN(s){for(const e of s)if(typeof e=="object"&&!w0(e))return e;return{}}function pN(s,e){let t;return w0(s[0])?t=s[0]:w0(s[1])?t=s[1]:typeof s[0]=="function"?t={next:s[0],error:s[1],complete:s[2]}:t={next:s[1],error:s[2],complete:s[3]},{next:r=>{t.next&&t.next(e(r))},error:t.error?.bind(t),complete:t.complete?.bind(t)}}class Ld{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lN(this._delegate,e._delegate)}}class Ud extends Ld{data(e){const t=this._delegate.data(e);return this._delegate._converter||SO(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class Fn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fp(e)}where(e,t,r){try{return new Fn(this.firestore,na(this._delegate,w6(e,t,r)))}catch(a){throw Hn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Fn(this.firestore,na(this._delegate,I6(e,t)))}catch(r){throw Hn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Fn(this.firestore,na(this._delegate,S6(e)))}catch(t){throw Hn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Fn(this.firestore,na(this._delegate,A6(e)))}catch(t){throw Hn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Fn(this.firestore,na(this._delegate,N6(...e)))}catch(t){throw Hn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Fn(this.firestore,na(this._delegate,R6(...e)))}catch(t){throw Hn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Fn(this.firestore,na(this._delegate,C6(...e)))}catch(t){throw Hn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Fn(this.firestore,na(this._delegate,k6(...e)))}catch(t){throw Hn(t,"endAt()","Query.endAt()")}}isEqual(e){return Q1(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=F6(this._delegate):e?.source==="server"?t=H6(this._delegate):t=B6(this._delegate),t.then(r=>new I0(this.firestore,new ts(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=mN(e),r=pN(e,a=>new I0(this.firestore,new ts(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return cN(this._delegate,t,r)}withConverter(e){return new Fn(this.firestore,e?this._delegate.withConverter(Mo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Z6{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ud(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class I0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Fn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ud(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Z6(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ud(this._firestore,r))})}isEqual(e){return lN(this._delegate,e._delegate)}}class bc extends Fn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vr(this.firestore,e):null}doc(e){try{return e===void 0?new Vr(this.firestore,Nm(this._delegate)):new Vr(this.firestore,Nm(this._delegate,e))}catch(t){throw Hn(t,"doc()","CollectionReference.doc()")}}add(e){return Q6(this._delegate,e).then(t=>new Vr(this.firestore,t))}isEqual(e){return G1(this._delegate,e._delegate)}withConverter(e){return new bc(this.firestore,e?this._delegate.withConverter(Mo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _o(s){return it(s,Tt)}class dv{constructor(...e){this._delegate=new Oo(...e)}static documentId(){return new dv(Pt.keyField().canonicalString())}isEqual(e){return e=ke(e),e instanceof Oo?this._delegate._internalPath.isEqual(e._internalPath):!1}}class fo{static serverTimestamp(){const e=v6();return e._methodName="FieldValue.serverTimestamp",new fo(e)}static delete(){const e=_6();return e._methodName="FieldValue.delete",new fo(e)}static arrayUnion(...e){const t=b6(...e);return t._methodName="FieldValue.arrayUnion",new fo(t)}static arrayRemove(...e){const t=x6(...e);return t._methodName="FieldValue.arrayRemove",new fo(t)}static increment(e){const t=E6(e);return t._methodName="FieldValue.increment",new fo(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const e3={Firestore:dN,GeoPoint:Zr,Timestamp:ct,Blob:uN,Transaction:hN,WriteBatch:fN,DocumentReference:Vr,DocumentSnapshot:Ld,Query:Fn,QueryDocumentSnapshot:Ud,QuerySnapshot:I0,CollectionReference:bc,FieldPath:dv,FieldValue:fo,setLogLevel:J6,CACHE_SIZE_UNLIMITED:i6};function t3(s,e){s.INTERNAL.registerComponent(new js("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps({...e3}))}function n3(s){t3(s,(e,t)=>new dN(e,t,new X6)),s.registerVersion($6,Y6)}n3(Ps);const r3={apiKey:"AIzaSyDS5RsnYL49tertpcIUXPa3dppw_soU1FQ",authDomain:"led-react-6204e.firebaseapp.com",projectId:"led-react-6204e",storageBucket:"led-react-6204e.firebasestorage.app",messagingSenderId:"500086523818",appId:"1:500086523818:web:74b4a57f9c55730eee4dd3",measurementId:"G-B0D52YG6QQ"};Ps.apps.length?Ps.app():Ps.initializeApp(r3);const Jw=Ps.auth(),Xr=Ps.firestore(),li="admire-signage-external",He=(s,e="INR",t=!1)=>new Intl.NumberFormat(e==="INR"?"en-IN":"en-US",{style:"currency",currency:e,maximumFractionDigits:0,notation:t?"compact":"standard"}).format(s),gd=()=>Math.random().toString(36).substr(2,9).toUpperCase(),To=(s,e,t,r)=>{if(!s||!e)return null;const{screenQty:a,targetWidth:l,targetHeight:u,unit:m,selectedIndoor:h,assemblyMode:y,selectedPitch:b,selectedModuleId:E,selectedCabinetId:w,selectedCardId:S,selectedPSUId:q,selectedProcId:Y,sizingMode:te,readyId:R,margin:Z,extras:ae,overrides:fe,extraComponents:se,pricingMode:he,targetSellPrice:A,commercials:N,terms:k}=s,O=xe=>{if(!xe)return 0;const Pe=Number(xe.price||0),Et=Number(xe.carriage||0),bt=Pe+Et;return xe.currency==="USD"?bt*r:bt};let P,M,C,Ue,Ve,W=0;if(y==="assembled"){if(P=e.find(xe=>xe.id===E),M=e.find(xe=>xe.id===w),C=e.find(xe=>xe.id===S),Ue=e.find(xe=>xe.id===q),Ve=e.find(xe=>xe.id===Y),!P||!M)return null}else{const xe=e.find(Pe=>Pe.id===R);if(Ve=e.find(Pe=>Pe.id===Y),!xe)return null;P=xe,M=xe}const ue=m==="m"?l*1e3:l*304.8,Ee=m==="m"?u*1e3:u*304.8,Me=ue/M.width,qe=Ee/M.height;let V,X;te==="up"?(V=Math.ceil(Me),X=Math.ceil(qe)):te==="down"?(V=Math.max(1,Math.floor(Me)),X=Math.max(1,Math.floor(qe))):(V=Math.max(1,Math.round(Me)),X=Math.max(1,Math.round(qe)));const pe=V*M.width,_e=X*M.height,Te=V*X,J=pe*_e/92903;let re=[];if(y==="assembled"){const xe=Math.floor(M.width/P.width)*Math.floor(M.height/P.height);W=Te*xe,re=[{id:"modules",inventoryId:E,name:"Modules",spec:`${P.brand} ${P.model}`,qty:W,unit:O(P),total:W*O(P),type:"led"},{id:"cabinets",inventoryId:w,name:"Cabinets",spec:`${M.brand} ${M.model}`,qty:Te,unit:O(M),total:Te*O(M),type:"led"},{id:"cards",inventoryId:S,name:"Cards",spec:C?C.brand:"-",qty:Te,unit:O(C),total:Te*O(C),type:"led"},{id:"psu",inventoryId:q,name:"SMPS",spec:Ue?Ue.brand:"-",qty:Te,unit:O(Ue),total:Te*O(Ue),type:"led"}]}else re=[{id:"ready",inventoryId:R,name:"LED Panels (Ready)",spec:`${M.brand} ${M.model}`,qty:Te,unit:O(M),total:Te*O(M),type:"led"}],W=Te;re.push({id:"processor",inventoryId:Y,name:"Processor",spec:Ve?Ve.brand:"Select Processor",qty:1,unit:Ve?O(Ve):0,total:Ve?O(Ve):0,type:"service"}),se&&se.length>0&&se.forEach(xe=>{const Pe=e.find(Et=>Et.id===xe.componentId);if(Pe){const Et=xe.type==="cabinet"?xe.qty*Te:xe.qty;re.push({id:xe.id,inventoryId:xe.componentId,name:`Extra: ${Pe.type}`,spec:`${Pe.brand} ${Pe.model}`,qty:Et,unit:O(Pe),total:Et*O(Pe),type:Pe.type==="processor"?"service":"led"})}else re.push({id:xe.id,inventoryId:"",name:"Extra Component",spec:"Select Item...",qty:xe.qty||1,unit:0,total:0,type:"led"})});const me=re.map(xe=>{if(fe&&fe[xe.id]){const Pe=fe[xe.id],Et=Pe.qty!==void 0&&Pe.qty!==""?Number(Pe.qty):xe.qty,bt=Pe.rate!==void 0&&Pe.rate!==""?Number(Pe.rate):xe.unit;return{...xe,qty:Et,unit:bt,total:Et*bt,isOverridden:!0}}return xe}),we=me.filter(xe=>xe.type==="led").reduce((xe,Pe)=>xe+Pe.total,0),Oe=me.filter(xe=>xe.type!=="led").reduce((xe,Pe)=>xe+Pe.total,0),ze={};let Cn=0,or=0;Array.isArray(ae)&&ae.forEach(xe=>{let Pe=0;const Et=we;xe.type==="pct"?Pe=Et*(Number(xe.val)/100):Pe=Number(xe.val),ze[xe.id]=Pe,Cn+=Pe});const Wt=N?.installation||{cost:0,costType:"abs"};let $n=0;Wt.costType==="pct"?$n=Oe*(Number(Wt.cost)/100):(Wt.unit||"sqft")==="sqft"?$n=Number(Wt.cost)*J:$n=Number(Wt.cost),ze.install=$n,or+=$n;const kn=N?.structure||{cost:0,costType:"abs"};let Yn=0;kn.costType==="pct"?Yn=Oe*(Number(kn.cost)/100):(kn.unit||"sqft")==="sqft"?Yn=Number(kn.cost)*J:Yn=Number(kn.cost),ze.structure=Yn,or+=Yn;const vn=we+Cn,lt=Oe+or,vt=vn+lt,Un=vt*a,H=N||{processor:{val:0},installation:{val:0},structure:{val:0}};let Re=0;if(H.processor.unit==="unit"){const xe=me.find(Et=>Et.id==="processor"),Pe=xe?xe.qty:1;Re=Number(H.processor.val)*Pe*a}else Re=Number(H.processor.val)*a;let Qe=0;H.installation.unit==="sqft"?Qe=Number(H.installation.val)*J*a:Qe=Number(H.installation.val)*a;let le=0;H.structure.unit==="sqft"?le=Number(H.structure.val)*J*a:le=Number(H.structure.val)*a;const Xt=Re+Qe+le;let Nt=0,zn=Z;const vi=he||"margin";if(vi==="margin")Nt=vn*(1+Z/100);else{const xe=Number(A||0);vi==="screen"?Nt=xe:vi==="sqft"?Nt=xe*J:vi==="sqm"&&(Nt=xe*(J/10.7639)),vn>0?zn=(Nt-vn)/vn*100:zn=0}const Mr=Nt*a+Xt,bi=Mr-Un;return{gridCols:V,gridRows:X,finalWidth:(pe/1e3).toFixed(2),finalHeight:(_e/1e3).toFixed(2),totalCabinets:Te,moduleType:P,cabinetType:M,processor:Ve,breakdown:{qtyModules:W,ledOps:Cn,serviceOps:or},detailedItems:me,calculatedExtras:ze,costLEDPerScreen:vn,costServicesPerScreen:lt,costPerScreen:vt,totalProjectCost:Un,finalPrice:Mr,totalProjectSell:Mr,assemblyMode:y,screenQty:a,commercials:{sellProcTotal:Re,sellInstallTotal:Qe,sellStructureTotal:le},terms:k||{price:"Ex-works Mumbai",deliveryWeeks:10,payment:[]},matrix:{cost:{sqft:vt/J,unit:vt,total:Un},margin:{sqft:bi/a/J,unit:bi/a,total:bi},sell:{sqft:Mr/a/J,unit:Mr/a,total:Mr},led:{cost:vn,sell:Nt,margin:Nt-vn,marginPct:zn},sqft:{perScreen:J,total:J*a}}}},Qt={COMPANY:{NAME:"ADMIRE SIGN & DISPLAY PVT. LTD.",ADDRESS_1:"102, Priya Industrial Estate 4, K.T. Industrial Estate",ADDRESS_2:"Kherpada, Waliv, Vasai East, Mumbai - 401208",EMAIL:"info@admiresign.com",WEB:"www.admiresign.com"},DEFAULTS:{EXCHANGE_RATE:90,GST_RATE:18,DELIVERY_WEEKS:10,PRICE_BASIS:"Ex-works Mumbai",PAYMENT_TERMS:[{name:"Advance with PO",percent:60},{name:"Before dispatch",percent:30},{name:"After installation",percent:10}]},TEXT:{WARRANTY:"Against any manufacturing defect. Offsite support for troubleshooting. Client can sign up for Admires excellent AMC services for on-site support. Serious fault will be attended to by our technical team within 48-72 hours upon receipt of written complaints with pictures/videos of the fault. 2% Extra spares includes Modules, Power Supply, Receiver Card (if there are over 100 cabinets), Flat cables, 5V connectors, Power and Data Cable. Any damage to the screen due to force majure, natural disasters, electricity surge, earthing, accident, etc is not covered under the warranty. Power supplies damage due to power fluctuation will not be covered under warranty. Power supply will be under the direct warranty of the OEM supplier. If the repair requires additional components then these will be charged extra. Brightness control meter, Video Processor & Timer can be supplied at extra cost. Maintenance team visit in six months during warranty period.",SCOPE_STRUCTURE:"Foundation & Structure. Structural stability certificate from a consultant. For wall mounted outdoor screen, Client to ensure strong and solid brick wall, RCC beams and column base. For front access indoor screen, Client to ensure a strong base. Indoor Structures cannot be mounted on ACP Sheets, Gypsum boards etc. Scaffolding, Aluminium composite panelling if required. Personnel for troubleshooting training during the screen installation. Helpers for loading, unloading and installing the display at site.",SCOPE_ELEC:"Electricity 3 phase electric power near the site, not more than 5m from the site, before the commencement of work. Electrical distribution board within 5m from the screen. Conduited electrical cable. 4mm 2 core armored cable or 4mm 3 core cables, 32 ampere MCB, 1 switch board with 2 sockets. Good quality Stabiliser and timers. 1 Certified electrical engineer for all connections from power Main to the unit. Ventilation machineries such as Air Conditioners or Fans.",SCOPE_NET:"CAT 6 or Optic Fiber Data cable and its terminations. Data points near the screen. Space with power sockets for Video wall Controllers. Data source/AV room within 80 meters of the screen. Connections to be availed through CAT 6 cables duly terminated with RJ45. If the length is farther then Fiber optic converter will be required. Fiber optic converters, if required, will be charged extra. In case the fiber optic converter is required, single mode Fiber optic cable is to be provided by client from source point to the display, terminated as per specs with Patch Chords from the splicing unit to connect to screen.",SCOPE_SOFT:"3rd party Software for Content upload on screen will be provided by the controller card supplier. Admire cannot provide regular updates and application stability.",SCOPE_PERM:"All permissions such as PTW, work permits & gate passes for workers, engineers and executives.",SCOPE_PC:"As per specification, to be arranged by client.",VALIDITY:"30 days."}},s3=({user:s,transactions:e=[]})=>{const[t,r]=Ut.useState([]),[a,l]=Ut.useState(null),[u,m]=Ut.useState(!1),[h,y]=Ut.useState({type:"module",brand:"",model:"",vendor:"",pitch:"",width:"",height:"",price:"",carriage:"",currency:"INR",indoor:!0,brightness:"",refreshRate:"",ledType:"",lampMake:"",material:"",weight:"",avgPower:"",maxPower:"",contrast:"",viewAngleH:"",viewAngleV:"",ipFront:"",ipBack:"",ports:"",amps:""}),[b,E]=Ut.useState(!0);Ut.useEffect(()=>{if(!s||!Xr)return;const R=Xr.collection("artifacts").doc(li).collection("public").doc("data").collection("inventory").onSnapshot(Z=>{const ae=Z.docs.map(fe=>({id:fe.id,...fe.data()}));r(ae),E(!1)},Z=>console.error(Z));return()=>R()},[s]);const w=async()=>{if(h.type==="module"){if(!h.pitch||!h.brand||!h.model||!h.price||!h.width||!h.height||!h.weight||!h.avgPower||!h.maxPower||!h.brightness||!h.refreshRate||!h.contrast||!h.viewAngleH||!h.viewAngleV||!h.ipFront||!h.ipBack)return alert("Please fill all compulsory (*) fields.")}else if(h.type==="cabinet"){if(!h.material||!h.model||!h.price||!h.vendor||!h.width||!h.height)return alert("Please fill all compulsory (*) fields.")}else if(h.type==="card"||h.type==="processor"){if(!h.brand||!h.model||!h.price||!h.vendor)return alert("Please fill all compulsory (*) fields.")}else if(h.type==="psu"){if(!h.brand||!h.model||!h.price||!h.vendor||!h.amps)return alert("Please fill all compulsory (*) fields.")}else if(!h.brand||!h.model)return alert("Brand and Model are required");try{const R=Xr.collection("artifacts").doc(li).collection("public").doc("data").collection("inventory"),Z={...h,width:Number(h.width),height:Number(h.height),price:Number(h.price),carriage:Number(h.carriage||0),pitch:Number(h.pitch),currency:h.currency||"INR",indoor:h.indoor==="true"||h.indoor===!0,material:h.material||"",weight:h.weight?Number(h.weight):0,avgPower:h.avgPower?Number(h.avgPower):0,maxPower:h.maxPower?Number(h.maxPower):0,brightness:h.brightness?parseInt(h.brightness):0,refreshRate:h.refreshRate?parseInt(h.refreshRate):0,viewAngleH:h.viewAngleH?parseInt(h.viewAngleH):0,viewAngleV:h.viewAngleV?parseInt(h.viewAngleV):0,ipFront:h.ipFront?parseInt(h.ipFront):0,ipBack:h.ipBack?parseInt(h.ipBack):0,ports:h.ports?parseInt(h.ports):0,amps:h.amps?Number(h.amps):0,updatedAt:new Date};a?(await R.doc(a).update(Z),l(null),m(!1)):(await R.add({...Z,createdAt:new Date}),y({type:h.type,brand:"",model:"",vendor:"",pitch:"",width:"",height:"",price:"",carriage:"",currency:"INR",indoor:!0,brightness:"",refreshRate:"",ledType:"",lampMake:"",material:"",weight:"",avgPower:"",maxPower:"",contrast:"",viewAngleH:"",viewAngleV:"",ipFront:"",ipBack:"",ports:"",amps:""}),alert("Item Added!"))}catch(R){console.error(R)}},S=R=>{y({...R,vendor:R.vendor||"",currency:R.currency||"INR",carriage:R.carriage||0}),l(R.id),m(!0),window.scrollTo({top:0,behavior:"smooth"})},q=()=>{l(null),m(!1),y({type:"module",brand:"",model:"",vendor:"",pitch:"",width:"",height:"",price:"",carriage:"",currency:"INR",indoor:!0,brightness:"",refreshRate:"",ledType:"",lampMake:"",material:"",weight:"",avgPower:"",maxPower:"",contrast:"",viewAngleH:"",viewAngleV:"",ipFront:"",ipBack:"",ports:"",amps:""})},Y=async R=>{confirm("Delete this item?")&&await Xr.collection("artifacts").doc(li).collection("public").doc("data").collection("inventory").doc(R).delete()},te=[...t].sort((R,Z)=>{const ae=(R.type||"").toLowerCase(),fe=(Z.type||"").toLowerCase();if(ae<fe)return-1;if(ae>fe)return 1;const se=(R.brand+" "+R.model).toLowerCase(),he=(Z.brand+" "+Z.model).toLowerCase();return se<he?-1:se>he?1:0});return p.jsxs("div",{className:"p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-slate-800 dark:text-white",children:[p.jsx(ed,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})," Components Management"]}),!u&&p.jsxs("button",{onClick:()=>m(!0),className:"bg-teal-600 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-teal-700 transition-colors",children:[p.jsx(mo,{size:16})," Add New Component"]})]}),u&&p.jsxs("div",{className:`grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 p-6 rounded-lg transition-colors border shadow-sm ${a?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700/50 border-slate-200 dark:border-slate-600"}`,children:[p.jsxs("div",{className:"col-span-2 md:col-span-4 flex justify-between items-center mb-2 pb-2 border-b border-slate-200 dark:border-slate-600",children:[p.jsx("h3",{className:"text-sm font-bold uppercase text-slate-500 dark:text-slate-400",children:a?"Editing Item":"Add New Item"}),p.jsxs("button",{onClick:q,className:"text-xs text-slate-500 hover:text-red-500 flex items-center gap-1",children:[p.jsx(nI,{size:14})," Close"]})]}),p.jsxs("select",{className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.type,onChange:R=>y({...h,type:R.target.value}),children:[p.jsx("option",{value:"module",children:"Module"}),p.jsx("option",{value:"cabinet",children:"Cabinet"}),p.jsx("option",{value:"ready",children:"Ready Unit"}),p.jsx("option",{value:"card",children:"Receiving Card"}),p.jsx("option",{value:"psu",children:"SMPS"}),p.jsx("option",{value:"processor",children:"Processor"})]}),h.type==="module"&&p.jsxs(p.Fragment,{children:[p.jsx("input",{placeholder:"Pitch*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white border-teal-500 ring-1 ring-teal-500",value:h.pitch,onChange:R=>y({...h,pitch:R.target.value})}),p.jsxs("select",{className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white border-teal-500 ring-1 ring-teal-500",value:h.indoor,onChange:R=>y({...h,indoor:R.target.value}),children:[p.jsx("option",{value:"true",children:"Indoor"}),p.jsx("option",{value:"false",children:"Outdoor"})]})]}),p.jsx("input",{placeholder:h.type==="module"||h.type==="card"||h.type==="processor"||h.type==="psu"?"Brand*":"Brand",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.brand,onChange:R=>y({...h,brand:R.target.value})}),p.jsx("input",{placeholder:h.type==="module"||h.type==="cabinet"||h.type==="card"||h.type==="processor"||h.type==="psu"?"Model/SKU*":"Model",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.model,onChange:R=>y({...h,model:R.target.value})}),p.jsxs("div",{className:"flex gap-2 items-center col-span-2 md:col-span-1",children:[p.jsxs("div",{className:"flex-1 min-w-[100px]",title:"Base Price",children:[p.jsx("input",{placeholder:"Base Rate*",type:"number",className:"p-2 w-full border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.price,onChange:R=>y({...h,price:R.target.value})}),p.jsx("div",{className:"text-[9px] text-slate-400 mt-0.5 ml-1",children:"BASE RATE*"})]}),p.jsx("span",{className:"text-slate-400 font-bold mb-3",children:"+"}),p.jsxs("div",{className:"flex-1 min-w-[80px]",title:"Carriage Inwards",children:[p.jsx("input",{placeholder:"Carriage",type:"number",className:"p-2 w-full border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.carriage,onChange:R=>y({...h,carriage:R.target.value})}),p.jsx("div",{className:"text-[9px] text-slate-400 mt-0.5 ml-1",children:"CARRIAGE"})]}),p.jsx("div",{className:"flex-none mb-3",children:p.jsxs("select",{className:"p-2 border rounded bg-slate-100 dark:bg-slate-600 dark:border-slate-600 dark:text-white",value:h.currency,onChange:R=>y({...h,currency:R.target.value}),children:[p.jsx("option",{value:"INR",children:"INR"}),p.jsx("option",{value:"USD",children:"USD"})]})})]}),p.jsx("input",{placeholder:h.type==="cabinet"||h.type==="card"||h.type==="processor"||h.type==="psu"?"Vendor*":"Vendor",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.vendor,onChange:R=>y({...h,vendor:R.target.value})}),(h.type==="card"||h.type==="processor")&&p.jsx("input",{placeholder:"Ports (Optional)",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.ports,onChange:R=>y({...h,ports:R.target.value})}),h.type==="psu"&&p.jsx("input",{placeholder:"Capacity (Amps)*",type:"number",step:"0.1",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.amps,onChange:R=>y({...h,amps:R.target.value})}),h.type==="module"&&p.jsxs(p.Fragment,{children:[p.jsx("input",{placeholder:"LED Type",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.ledType,onChange:R=>y({...h,ledType:R.target.value})}),p.jsx("input",{placeholder:"Lamp Make",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.lampMake,onChange:R=>y({...h,lampMake:R.target.value})}),p.jsx("input",{placeholder:"Width (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.width,onChange:R=>y({...h,width:R.target.value})}),p.jsx("input",{placeholder:"Height (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.height,onChange:R=>y({...h,height:R.target.value})}),p.jsx("input",{placeholder:"Weight/sqm (kg)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.weight,onChange:R=>y({...h,weight:R.target.value})}),p.jsx("input",{placeholder:"Avg Power/sqm (W)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.avgPower,onChange:R=>y({...h,avgPower:R.target.value})}),p.jsx("input",{placeholder:"Max Power/sqm (W)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.maxPower,onChange:R=>y({...h,maxPower:R.target.value})}),p.jsx("input",{placeholder:"Brightness (nits)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.brightness,onChange:R=>y({...h,brightness:R.target.value})}),p.jsx("input",{placeholder:"Refresh Rate*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.refreshRate,onChange:R=>y({...h,refreshRate:R.target.value})}),p.jsx("input",{placeholder:"Contrast* (e.g. 5000:1)",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.contrast,onChange:R=>y({...h,contrast:R.target.value})}),p.jsx("input",{placeholder:"Viewing Angle (H)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.viewAngleH,onChange:R=>y({...h,viewAngleH:R.target.value})}),p.jsx("input",{placeholder:"Viewing Angle (V)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.viewAngleV,onChange:R=>y({...h,viewAngleV:R.target.value})}),p.jsx("input",{placeholder:"IP Protection (Front)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.ipFront,onChange:R=>y({...h,ipFront:R.target.value})}),p.jsx("input",{placeholder:"IP Protection (Back)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.ipBack,onChange:R=>y({...h,ipBack:R.target.value})})]}),h.type==="cabinet"&&p.jsxs(p.Fragment,{children:[p.jsx("input",{placeholder:"Material*",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.material,onChange:R=>y({...h,material:R.target.value})}),p.jsxs("select",{className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.indoor,onChange:R=>y({...h,indoor:R.target.value}),children:[p.jsx("option",{value:"true",children:"Indoor"}),p.jsx("option",{value:"false",children:"Outdoor"})]}),p.jsx("input",{placeholder:"Width (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.width,onChange:R=>y({...h,width:R.target.value})}),p.jsx("input",{placeholder:"Height (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.height,onChange:R=>y({...h,height:R.target.value})}),p.jsx("input",{placeholder:"Weight (kg)",type:"number",step:"1",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.weight,onChange:R=>y({...h,weight:R.target.value})})]}),h.type==="ready"&&p.jsxs(p.Fragment,{children:[p.jsx("input",{placeholder:"Width (mm)",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.width,onChange:R=>y({...h,width:R.target.value})}),p.jsx("input",{placeholder:"Height (mm)",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.height,onChange:R=>y({...h,height:R.target.value})})]}),p.jsxs("button",{onClick:w,className:`px-4 py-2 rounded text-white flex items-center justify-center gap-2 hover:opacity-90 transition ${a?"bg-amber-600":"bg-teal-600"} col-span-2 md:col-span-1`,children:[a?p.jsx(Hl,{size:16}):p.jsx(mo,{size:16}),a?"Update Item":"Add Item"]})]}),p.jsxs("div",{className:"mt-6",children:[p.jsx("div",{className:"md:hidden space-y-4",children:te.map(R=>{const Z=e.filter(ae=>ae.itemId===R.id).reduce((ae,fe)=>ae+(fe.type==="in"?Number(fe.qty):-Number(fe.qty)),0);return p.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm relative overflow-hidden",children:[p.jsx("div",{className:`absolute top-0 right-0 px-3 py-1 rounded-bl-lg text-[10px] font-bold uppercase tracking-wider ${R.type==="module"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300"}`,children:R.type}),p.jsxs("div",{className:"pr-16 mb-3",children:[p.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:[R.brand," ",R.model]}),R.vendor&&p.jsx("div",{className:"text-xs text-teal-600 font-medium",children:R.vendor})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-xs text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg",children:[p.jsxs("div",{children:[p.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Specs"}),R.type==="module"?p.jsxs("span",{children:["P",R.pitch," ",R.indoor?"In":"Out","  ",R.width,"x",R.height]}):p.jsx("span",{children:R.width?`${R.width}x${R.height}`:"Standard"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Stock"}),p.jsx("span",{className:`font-bold text-sm ${Z<0?"text-red-500":"text-slate-700 dark:text-slate-200"}`,children:Z})]}),p.jsxs("div",{className:"col-span-2 border-t border-slate-200 dark:border-slate-600 pt-2 mt-1",children:[p.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Landed Cost"}),p.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:He((R.price||0)+(R.carriage||0),R.currency||"INR")})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:()=>S(R),className:"flex-1 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg text-xs font-bold flex justify-center items-center gap-2 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[p.jsx(Hl,{size:14})," Edit"]}),p.jsxs("button",{onClick:()=>Y(R.id),className:"flex-1 py-2 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-xs font-bold flex justify-center items-center gap-2 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:[p.jsx(vo,{size:14})," Delete"]})]})]},R.id)})}),p.jsx("div",{className:"hidden md:block overflow-x-auto rounded border border-slate-200 dark:border-slate-700",children:p.jsxs("table",{className:"w-full text-sm text-left",children:[p.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 uppercase",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-3",children:"Type"}),p.jsx("th",{className:"px-4 py-3",children:"Component"}),p.jsx("th",{className:"px-4 py-3",children:"Specs"}),p.jsx("th",{className:"px-4 py-3 text-center",children:"Stock"}),p.jsx("th",{className:"px-4 py-3",children:"Landed Cost"}),p.jsx("th",{className:"px-4 py-3 text-right",children:"Action"})]})}),p.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:te.map(R=>p.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-700/50 ${a===R.id?"bg-amber-50 dark:bg-amber-900/20":""}`,children:[p.jsx("td",{className:"px-4 py-3 capitalize",children:p.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${R.type==="module"?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":R.type==="ready"?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:R.type==="psu"?"SMPS":R.type})}),p.jsxs("td",{className:"px-4 py-3 dark:text-slate-200",children:[p.jsxs("div",{className:"font-medium",children:[R.brand," ",R.model]}),R.vendor&&p.jsx("div",{className:"text-[10px] text-teal-600 dark:text-teal-400 mt-0.5",children:R.vendor})]}),p.jsxs("td",{className:"px-4 py-3 text-slate-500 dark:text-slate-400 text-xs",children:[R.type==="module"&&p.jsxs("div",{className:"flex flex-col",children:[p.jsxs("span",{children:["P",R.pitch," ",R.indoor?"Indoor":"Outdoor"]}),p.jsxs("span",{children:[R.width,"x",R.height,"mm"]})]}),R.type==="cabinet"&&p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{children:R.material}),p.jsxs("span",{children:[R.width,"x",R.height,"mm"]}),p.jsx("span",{children:R.indoor?"Indoor":"Outdoor"})]}),(R.type==="card"||R.type==="processor")&&p.jsx("span",{children:R.ports?`${R.ports} Ports`:""}),R.type==="psu"&&p.jsx("span",{children:R.amps?`${R.amps} Amps`:""}),R.type==="ready"&&p.jsxs("span",{children:[R.width,"x",R.height,"mm P",R.pitch]})]}),p.jsx("td",{className:"px-4 py-3 font-bold dark:text-slate-200 text-teal-600 text-center",children:e.filter(Z=>Z.itemId===R.id).reduce((Z,ae)=>Z+(ae.type==="in"?Number(ae.qty):-Number(ae.qty)),0)}),p.jsx("td",{className:"px-4 py-3 dark:text-slate-200",children:p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"font-semibold",children:He((R.price||0)+(R.carriage||0),R.currency||"INR")}),R.carriage>0&&p.jsxs("span",{className:"text-[10px] text-slate-400",children:["Base: ",R.price," + Carr: ",R.carriage]})]})}),p.jsxs("td",{className:"px-4 py-3 flex gap-2 justify-end",children:[p.jsx("button",{onClick:()=>S(R),className:"text-blue-500 hover:text-blue-700 p-1 bg-blue-50 dark:bg-blue-900/30 rounded",children:p.jsx(Hl,{size:14})}),p.jsx("button",{onClick:()=>Y(R.id),className:"text-red-400 hover:text-red-600 p-1 bg-red-50 dark:bg-red-900/30 rounded",children:p.jsx(vo,{size:14})})]})]},R.id))})]})}),t.length===0&&!b&&p.jsx("div",{className:"text-center py-12 text-slate-400 bg-white dark:bg-slate-800",children:"No items found."})]})]})},i3=({user:s,inventory:e,transactions:t})=>{const[r,a]=Ut.useState({date:new Date().toISOString().split("T")[0],type:"in",itemId:"",qty:"",source:"",location:"",notes:""}),l=async()=>{if(!r.itemId||!r.qty)return alert("Item and Quantity are required");try{await Xr.collection("artifacts").doc(li).collection("public").doc("data").collection("transactions").add({...r,qty:Number(r.qty),createdAt:new Date}),a({...r,qty:"",source:"",notes:""})}catch(m){console.error(m)}},u=m=>t.filter(h=>h.itemId===m).reduce((h,y)=>h+(y.type==="in"?y.qty:-y.qty),0);return p.jsxs("div",{className:"p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[p.jsx("div",{className:"flex justify-between items-center mb-6",children:p.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-slate-800 dark:text-white",children:[p.jsx(ed,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})," Stock Ledger"]})}),p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-7 gap-2 mb-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg items-end",children:[p.jsxs("div",{className:"col-span-1",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Date"}),p.jsx("input",{type:"date",className:"w-full p-2 border rounded text-sm dark:bg-slate-800 dark:border-slate-600 dark:text-white",value:r.date,onChange:m=>a({...r,date:m.target.value})})]}),p.jsxs("div",{className:"col-span-1",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Action"}),p.jsxs("select",{className:"w-full p-2 border rounded text-sm dark:bg-slate-800 dark:border-slate-600 dark:text-white",value:r.type,onChange:m=>a({...r,type:m.target.value}),children:[p.jsx("option",{value:"in",children:"Stock IN"}),p.jsx("option",{value:"out",children:"Stock OUT"})]})]}),p.jsxs("div",{className:"col-span-2",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Component"}),p.jsxs("select",{className:"w-full p-2 border rounded text-sm dark:bg-slate-800 dark:border-slate-600 dark:text-white",value:r.itemId,onChange:m=>a({...r,itemId:m.target.value}),children:[p.jsx("option",{value:"",children:"Select Item..."}),["module","cabinet","ready","card","processor","psu"].map(m=>{const h=e.filter(y=>y.type===m).sort((y,b)=>(y.brand+" "+y.model).localeCompare(b.brand+" "+b.model));return h.length===0?null:p.jsx("optgroup",{label:m==="psu"?"SMPS":m.toUpperCase(),children:h.map(y=>p.jsxs("option",{value:y.id,children:[y.brand," ",y.model," (Stock: ",u(y.id),")"]},y.id))},m)})]})]}),p.jsxs("div",{className:"col-span-1",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Qty"}),p.jsx("input",{type:"number",placeholder:"Qty",className:"w-full p-2 border rounded text-sm dark:bg-slate-800 dark:border-slate-600 dark:text-white",value:r.qty,onChange:m=>a({...r,qty:m.target.value})})]}),p.jsxs("div",{className:"col-span-1",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Loc/Source"}),p.jsx("input",{placeholder:"Source/Loc",className:"w-full p-2 border rounded text-sm dark:bg-slate-800 dark:border-slate-600 dark:text-white",value:r.source,onChange:m=>a({...r,source:m.target.value})})]}),p.jsx("button",{onClick:l,className:"bg-teal-600 text-white p-2 rounded hover:bg-teal-700 font-bold text-sm h-[38px]",children:"Add"})]}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-sm text-left border border-slate-200 dark:border-slate-700 rounded",children:[p.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 uppercase",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-2",children:"Date"}),p.jsx("th",{className:"px-4 py-2",children:"Type"}),p.jsx("th",{className:"px-4 py-2",children:"Component"}),p.jsx("th",{className:"px-4 py-2",children:"Specs"}),p.jsx("th",{className:"px-4 py-2",children:"Qty"}),p.jsx("th",{className:"px-4 py-2",children:"Source / Loc"})]})}),p.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:t.sort((m,h)=>new Date(h.date)-new Date(m.date)).map(m=>{const h=e.find(y=>y.id===m.itemId)||{};return p.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[p.jsx("td",{className:"px-4 py-2 text-slate-500",children:m.date}),p.jsx("td",{className:"px-4 py-2",children:p.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${m.type==="in"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:m.type.toUpperCase()})}),p.jsxs("td",{className:"px-4 py-2 dark:text-slate-200",children:[p.jsxs("div",{className:"font-medium",children:[h.brand," ",h.model]}),h.vendor&&p.jsx("div",{className:"text-[10px] text-teal-600 dark:text-teal-400 mt-0.5",children:h.vendor})]}),p.jsxs("td",{className:"px-4 py-2 text-slate-500 dark:text-slate-400 text-xs",children:[h.type==="module"&&p.jsxs("div",{className:"flex flex-col",children:[p.jsxs("span",{children:["P",h.pitch," ",h.indoor?"Indoor":"Outdoor"]}),p.jsxs("span",{children:[h.width,"x",h.height,"mm"]})]}),h.type==="cabinet"&&p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{children:h.material}),p.jsxs("span",{children:[h.width,"x",h.height,"mm"]}),p.jsx("span",{children:h.indoor?"Indoor":"Outdoor"})]}),(h.type==="card"||h.type==="processor")&&p.jsx("span",{children:h.ports?`${h.ports} Ports`:""}),h.type==="psu"&&p.jsx("span",{children:h.amps?`${h.amps} Amps`:""}),h.type==="ready"&&p.jsxs("span",{children:[h.width,"x",h.height,"mm P",h.pitch]})]}),p.jsx("td",{className:"px-4 py-2 font-bold dark:text-slate-200",children:m.qty}),p.jsxs("td",{className:"px-4 py-2 text-slate-500",children:[m.source," ",m.location?`(${m.location})`:""]})]},m.id)})})]})})]})};var a3=Zw();const gN=S0(a3),o3=({cols:s,rows:e,module:t,cabinet:r,unit:a})=>{if(!t||!r)return null;const l=r.width,u=r.height,m=l*s,h=u*e,y=b=>{const E=(b/1e3).toFixed(2)+"m",w=(b/304.8).toFixed(2)+"ft";return`${E} / ${w}`};return p.jsx("div",{className:"w-full flex flex-col bg-white rounded-lg border border-slate-200 overflow-hidden",children:p.jsx("div",{className:"w-full h-full min-h-[300px] p-10 flex items-center justify-center",children:p.jsxs("div",{className:"relative",style:{aspectRatio:`${m}/${h}`,width:"100%",maxHeight:"400px"},children:[p.jsxs("div",{className:"absolute -top-8 left-0 right-0 text-center text-xs font-bold text-slate-600 flex items-center justify-center gap-2",children:[p.jsx("div",{className:"h-[1px] flex-1 bg-slate-300"}),p.jsxs("span",{className:"bg-white px-1 whitespace-nowrap",children:[y(m)," (",s," Cabinets)"]}),p.jsx("div",{className:"h-[1px] flex-1 bg-slate-300"})]}),p.jsxs("div",{className:"absolute -left-8 top-0 bottom-0 text-center text-xs font-bold text-slate-600 flex flex-col items-center justify-center gap-2",style:{writingMode:"vertical-rl",transform:"rotate(180deg)"},children:[p.jsx("div",{className:"w-[1px] flex-1 bg-slate-300"}),p.jsxs("span",{className:"bg-white px-1 whitespace-nowrap",children:[y(h)," (",e," Cabinets)"]}),p.jsx("div",{className:"w-[1px] flex-1 bg-slate-300"})]}),p.jsx("div",{className:"w-full h-full grid bg-white border-2 border-slate-900 shadow-sm",style:{gridTemplateColumns:`repeat(${s}, 1fr)`,gridTemplateRows:`repeat(${e}, 1fr)`},children:Array.from({length:s*e}).map((b,E)=>p.jsx("div",{className:"border border-slate-300 relative"},E))})]})})})},yN=({data:s,allScreensData:e,currency:t="INR",exchangeRate:r,date:a})=>{const l=e&&e.calculations&&e.calculations.length>1,u=l?e.calculations:s?[s]:[];if(u.length===0)return null;const m=(l?e.clientName:s?.clientName)||"",h=(l?e.projectName:s?.projectName)||"",y=u[0].terms||{},b=l?e.totalProjectSell:s?.totalProjectSell,E=w=>p.jsxs("div",{className:`bg-white text-slate-800 font-sans text-xs ${w?"print-version-container p-0":"preview-version-container w-full h-full p-8"}`,children:[p.jsxs("div",{className:"flex justify-between items-start mb-6 border-b-2 border-slate-800 pb-4",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-slate-900 uppercase tracking-wide",children:Qt.COMPANY.NAME}),p.jsxs("div",{className:"text-[10px] text-slate-600 mt-1 space-y-0.5",children:[p.jsx("p",{children:Qt.COMPANY.ADDRESS_1}),p.jsx("p",{children:Qt.COMPANY.ADDRESS_2}),p.jsxs("p",{children:["Email: ",Qt.COMPANY.EMAIL," | Web: ",Qt.COMPANY.WEB]})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("h2",{className:"text-xl font-light text-slate-500",children:"QUOTATION"}),p.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Date: ",a||new Date().toLocaleDateString()]}),l&&p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Consolidated Quote"})]})]}),u.map((S,q)=>{const{finalWidth:Y,finalHeight:te,totalCabinets:R,moduleType:Z={},cabinetType:ae={},processor:fe,screenQty:se,totalProjectSell:he,gridCols:A,gridRows:N,commercials:k}=S,O=Number(Y),P=Number(te),M=O*P,C=M*10.7639,Ue=Number(Z.pitch||0),Ve=Ue>0?Math.round(O*1e3/Ue):0,W=Ue>0?Math.round(P*1e3/Ue):0,ue=(Z.weight||0)*M,Ee=(ae.weight||0)*R,Me=ue+Ee,qe=(Z.avgPower||0)*M,V=(Z.maxPower||0)*M,X=k||{sellProcTotal:0,sellInstallTotal:0,sellStructureTotal:0},pe=he/(se||1),_e=(X.sellProcTotal||0)/(se||1),Te=(X.sellInstallTotal||0)/(se||1),J=(X.sellStructureTotal||0)/(se||1),re=pe-_e-Te-J,me=re*.02,Oe=[{name:"LED Panel",rate:re-me},{name:"Processor",rate:_e},{name:"Installation",rate:Te},{name:"Spares (2%)",rate:me},{name:"Structure",rate:J}].filter(ze=>ze.rate>0);return p.jsxs("div",{className:"mb-10 pb-6 border-b-2 border-slate-100 break-inside-avoid print-break-avoid",children:[l&&p.jsx("div",{className:"mb-4 pb-2 border-b border-teal-500",children:p.jsxs("h2",{className:"text-lg font-bold text-teal-800 uppercase",children:["Configuration #",q+1]})}),p.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2",children:"Project Details"}),p.jsxs("div",{className:"grid grid-cols-3 gap-y-1 text-[11px]",children:[p.jsx("span",{className:"font-semibold text-slate-500",children:"Client:"})," ",p.jsx("span",{className:"col-span-2 font-bold",children:m}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Project:"})," ",p.jsx("span",{className:"col-span-2 font-bold",children:h}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Screen Size:"})," ",p.jsxs("span",{className:"col-span-2",children:[O,"m (W) x ",P,"m (H)"]}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Quantity:"})," ",p.jsxs("span",{className:"col-span-2",children:[se," Nos"]})]}),p.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mt-4 mb-2",children:"Module & Cabinet"}),p.jsxs("div",{className:"grid grid-cols-3 gap-y-1 text-[11px]",children:[p.jsx("span",{className:"font-semibold text-slate-500",children:"Module:"})," ",p.jsxs("span",{className:"col-span-2",children:[Z.brand," P",Z.pitch]}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Mod Size:"})," ",p.jsxs("span",{className:"col-span-2",children:[Z.width," x ",Z.height," mm"]}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Lamp:"})," ",p.jsx("span",{className:"col-span-2",children:Z.lampMake||"-"}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Cabinet:"})," ",p.jsx("span",{className:"col-span-2",children:ae.material||"Standard"}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Cab Size:"})," ",p.jsxs("span",{className:"col-span-2",children:[ae.width," x ",ae.height," mm"]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2",children:"Screen Specifications"}),p.jsxs("div",{className:"grid grid-cols-3 gap-y-1 text-[11px]",children:[p.jsx("span",{className:"font-semibold text-slate-500",children:"Resolution:"})," ",p.jsxs("span",{className:"col-span-2",children:[Ve," x ",W," pixels"]}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Total Area:"})," ",p.jsxs("span",{className:"col-span-2",children:[C.toFixed(2)," Sq.ft / ",M.toFixed(2)," Sq.m"]}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Total Weight:"})," ",p.jsxs("span",{className:"col-span-2",children:[Me.toFixed(1)," kg"]}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Avg Power:"})," ",p.jsxs("span",{className:"col-span-2",children:[qe.toFixed(0)," Watts"]}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Max Power:"})," ",p.jsxs("span",{className:"col-span-2",children:[V.toFixed(0)," Watts"]}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Brightness:"})," ",p.jsxs("span",{className:"col-span-2",children:[Z.brightness," nits"]}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Refresh Rate:"})," ",p.jsxs("span",{className:"col-span-2",children:[Z.refreshRate," Hz"]}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Controller:"})," ",p.jsx("span",{className:"col-span-2",children:fe?`${fe.brand} ${fe.model}`:"Standard"}),p.jsx("span",{className:"font-semibold text-slate-500",children:"Viewing:"})," ",p.jsxs("span",{className:"col-span-2",children:["H: ",Z.viewAngleH," / V: ",Z.viewAngleV,""]}),p.jsx("span",{className:"font-semibold text-slate-500",children:"IP Rating:"})," ",p.jsxs("span",{className:"col-span-2",children:["Front: IP",Z.ipFront," / Back: IP",Z.ipBack]})]})]})]}),p.jsxs("div",{className:"mb-2 break-inside-avoid print-break-avoid",children:[p.jsxs("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2 pb-1",children:["Commercial Proposal ",l?`(Config #${q+1})`:""]}),p.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-[11px]",children:[p.jsx("thead",{className:"bg-slate-800 text-white",children:p.jsxs("tr",{children:[p.jsx("th",{className:"p-2 border border-slate-600 text-left w-12",children:"#"}),p.jsx("th",{className:"p-2 border border-slate-600 text-left",children:"Item Description"}),p.jsx("th",{className:"p-2 border border-slate-600 text-right w-32",children:"Amount (1 Screen)"}),p.jsxs("th",{className:"p-2 border border-slate-600 text-right w-32",children:["Amount (",se," Screens)"]})]})}),p.jsxs("tbody",{children:[Oe.map((ze,Cn)=>p.jsxs("tr",{children:[p.jsx("td",{className:"p-2 border border-slate-300 text-center",children:Cn+1}),p.jsx("td",{className:"p-2 border border-slate-300 font-bold",children:ze.name}),p.jsx("td",{className:"p-2 border border-slate-300 text-right",children:He(ze.rate,t)}),p.jsx("td",{className:"p-2 border border-slate-300 text-right font-bold",children:He(ze.rate*se,t)})]},Cn)),p.jsxs("tr",{className:"bg-slate-100",children:[p.jsx("td",{colSpan:"3",className:"p-2 border border-slate-300 text-right font-bold uppercase",children:"Subtotal (Excl. GST)"}),p.jsx("td",{className:"p-2 border border-slate-300 text-right font-bold text-sm",children:He(he,t)})]})]})]})]})]},q)}),l&&p.jsx("div",{className:"mb-8 break-inside-avoid print-break-avoid",children:p.jsxs("div",{className:"bg-slate-800 text-white p-4 rounded-lg flex justify-between items-center shadow-lg",children:[p.jsx("div",{className:"text-lg font-bold uppercase tracking-wide",children:"Grand Total"}),p.jsxs("div",{className:"text-2xl font-bold",children:[He(b,t)," ",p.jsx("span",{className:"text-xs font-normal opacity-70",children:"(Excl. GST)"})]})]})}),p.jsxs("div",{className:"mt-8 break-inside-avoid print-break-avoid",children:[p.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2 pb-1",children:"Terms & Conditions"}),p.jsx("div",{className:"text-[10px] text-slate-600 space-y-3",children:p.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-y-2 gap-x-4",children:[p.jsx("div",{className:"font-bold text-slate-800",children:"PRICE"}),p.jsx("div",{children:y.price}),p.jsx("div",{className:"font-bold text-slate-800",children:"PAYMENT"}),p.jsx("div",{children:(y.payment||[]).map((S,q)=>p.jsxs("span",{children:[S.percent,"% ",S.name,q<(y.payment||[]).length-1?", ":""]},q))}),p.jsx("div",{className:"font-bold text-slate-800",children:"DELIVERY"}),p.jsxs("div",{children:[y.deliveryWeeks," weeks"]}),p.jsx("div",{className:"font-bold text-slate-800",children:"GST"}),p.jsxs("div",{children:["Extra as applicable (currently ",Qt.DEFAULTS.GST_RATE,"%)"]}),p.jsx("div",{className:"font-bold text-slate-800",children:"WARRANTY"}),p.jsx("div",{className:"text-justify leading-snug",children:Qt.TEXT.WARRANTY})]})}),p.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mt-4 mb-2 pb-1",children:"Client's Scope"}),p.jsxs("div",{className:"text-[10px] text-slate-600 grid gap-y-2",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-bold text-slate-800 block",children:"Structure:"}),Qt.TEXT.SCOPE_STRUCTURE]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-bold text-slate-800 block",children:"Electricity:"}),Qt.TEXT.SCOPE_ELEC]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-bold text-slate-800 block",children:"Internet:"}),Qt.TEXT.SCOPE_NET]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-bold text-slate-800 block",children:"Software:"}),Qt.TEXT.SCOPE_SOFT]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-bold text-slate-800 block",children:"Permissions:"}),Qt.TEXT.SCOPE_PERM]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-bold text-slate-800 block",children:"Computer:"}),Qt.TEXT.SCOPE_PC]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-bold text-slate-800 block",children:"Validity:"}),Qt.TEXT.VALIDITY]})]}),p.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-200 flex justify-between items-end",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"h-12 mb-2"}),p.jsx("p",{className:"text-[10px] font-bold border-t border-slate-400 px-4 pt-1",children:"Client Acceptance"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"h-12 mb-2"}),p.jsx("p",{className:"text-[10px] font-bold border-t border-slate-400 px-4 pt-1",children:"For Admire Sign & Display Pvt. Ltd."})]})]})]})]});return p.jsxs(Ut.Fragment,{children:[p.jsx("div",{className:"screen-preview-wrapper",children:E(!1)}),gN.createPortal(p.jsx("div",{className:"print-only-portal",children:E(!0)}),document.body)]})},l3=({user:s,inventory:e,transactions:t,exchangeRate:r,onLoadQuote:a})=>{const[l,u]=Ut.useState([]),[m,h]=Ut.useState(null);Ut.useEffect(()=>{if(!s)return;const w=Xr.collection("artifacts").doc(li).collection("public").doc("data").collection("quotes").orderBy("updatedAt","desc").onSnapshot(S=>{u(S.docs.map(q=>({id:q.id,...q.data()})))});return()=>w()},[s]);const y=async w=>{confirm("Are you sure you want to delete this quote?")&&await Xr.collection("artifacts").doc(li).collection("public").doc("data").collection("quotes").doc(w).delete()},b=w=>{if(w.allScreensData){h({allScreensData:w.allScreensData,client:w.client,project:w.project});return}const S=w.calculatorState;if(S.screens&&S.screens.length>0){const Y=S.screens.map(te=>{const R={...S,...te};return To(R,e,t,r)}).filter(te=>te!==null);if(Y.length>0){const te={totalProjectCost:Y.reduce((R,Z)=>R+Z.totalProjectCost,0),totalProjectSell:Y.reduce((R,Z)=>R+Z.totalProjectSell,0),totalLEDSell:Y.reduce((R,Z)=>R+Z.matrix.led.sell*Z.screenQty,0),totalServicesSell:Y.reduce((R,Z)=>R+(Z.matrix.sell.total-Z.matrix.led.sell*Z.screenQty),0),totalMargin:0,totalScreenQty:Y.reduce((R,Z)=>R+Z.screenQty,0),calculations:Y,screenConfigs:S.screens};te.totalMargin=te.totalProjectSell-te.totalProjectCost,h({allScreensData:te,client:w.client,project:w.project});return}}const q=To(S,e,t,r);q?h({data:q,client:w.client,project:w.project}):alert("Could not calculate quote. Inventory items might be missing.")},E=w=>{const S=To(w.calculatorState,e,t,r);if(!S)return alert("Calculation failed.");let q=`Project,${w.project}
Client,${w.client}
Date,${new Date().toLocaleDateString()}

`;q+=`Bill of Materials
Component,Specification,Qty,Rate,Total
`,S.detailedItems.forEach(Z=>{q+=`"${Z.name}","${Z.spec}",${Z.qty*S.screenQty},${Z.unit},${Z.total*S.screenQty}
`}),q+=`
Financials
`,q+=`Total Cost,${S.totalProjectCost}
`,q+=`Selling Price,${S.totalProjectSell}
`,q+=`Margin,${S.matrix.margin.total}
`;const Y=new Blob([q],{type:"text/csv"}),te=window.URL.createObjectURL(Y),R=document.createElement("a");R.href=te,R.download=`${w.project}_Quote.csv`,R.click()};return p.jsxs("div",{className:"p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[m&&p.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:p.jsxs("div",{className:"bg-white max-w-4xl w-full h-[90vh] rounded-lg shadow-2xl flex flex-col",children:[p.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-100 rounded-t-lg",children:[p.jsxs("h2",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[p.jsx(jy,{size:20})," View Saved Quote"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>h(null),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded",children:"Close"}),p.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-teal-600 text-white hover:bg-teal-700 rounded flex items-center gap-2",children:[p.jsx(Bf,{size:16})," Print / PDF"]})]})]}),p.jsx("div",{className:"flex-1 overflow-auto p-8 bg-slate-200",children:p.jsx(yN,{data:m.data?{...m.data,clientName:m.client,projectName:m.project}:null,allScreensData:m.allScreensData?{...m.allScreensData,clientName:m.client,projectName:m.project}:null,currency:"INR",exchangeRate:r})})]})}),p.jsx("div",{className:"flex justify-between items-center mb-6",children:p.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-slate-800 dark:text-white",children:[p.jsx(My,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})," Saved Quotes"]})}),p.jsxs("div",{className:"grid gap-4",children:[l.map(w=>{const S=w.calculatorState||{},q=S.unit||"m",Y=S.selectedPitch||"N/A",te=S.selectedIndoor==="true";return p.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 flex justify-between items-center",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:w.project||"Untitled Project"}),p.jsx("span",{className:`text-[10px] uppercase font-bold px-2 py-0.5 rounded border ${te?"bg-blue-50 text-blue-600 border-blue-200":"bg-green-50 text-green-600 border-green-200"}`,children:te?"Indoor":"Outdoor"}),p.jsxs("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded bg-slate-200 text-slate-600",children:["P",Y]})]}),p.jsxs("p",{className:"text-sm text-slate-500 mb-2",children:[w.client||"No Client","  ",new Date(w.updatedAt?.seconds*1e3).toLocaleDateString()]}),p.jsxs("div",{className:"flex gap-2 flex-wrap text-xs text-slate-600 dark:text-slate-400",children:[p.jsxs("span",{className:"bg-white dark:bg-slate-800 border dark:border-slate-600 px-2 py-1 rounded",children:["Size: ",S.targetWidth," x ",S.targetHeight," ",q]}),p.jsxs("span",{className:"bg-white dark:bg-slate-800 border dark:border-slate-600 px-2 py-1 rounded",children:["Qty: ",S.screenQty||1]}),p.jsx("span",{className:"bg-teal-50 dark:bg-teal-900/30 text-teal-700 dark:text-teal-300 border border-teal-100 dark:border-teal-800 px-2 py-1 rounded font-bold",children:He(w.finalAmount,"INR")})]})]}),p.jsxs("div",{className:"flex gap-2 ml-4",children:[p.jsxs("button",{onClick:()=>b(w),className:"px-3 py-2 bg-teal-600 text-white rounded text-sm hover:bg-teal-700 flex items-center gap-1",children:[p.jsx(jy,{size:14})," View"]}),p.jsxs("button",{onClick:()=>E(w),className:"px-3 py-2 bg-green-600 text-white rounded text-sm hover:bg-green-700 flex items-center gap-1",children:[p.jsx(mC,{size:14})," Excel"]}),p.jsxs("button",{onClick:()=>a(w,!1),className:"px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 flex items-center gap-1",children:[p.jsx(Hl,{size:14})," Edit"]}),p.jsxs("button",{onClick:()=>a(w,!0),className:"px-3 py-2 bg-slate-600 text-white rounded text-sm hover:bg-slate-700 flex items-center gap-1",children:[p.jsx(tI,{size:14})," Clone"]}),p.jsx("button",{onClick:()=>y(w.id),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:p.jsx(vo,{size:16})})]})]},w.id)}),l.length===0&&p.jsx("p",{className:"text-center text-slate-400 py-10",children:"No saved quotes found."})]})]})},c3=({data:s,allScreensData:e})=>{if(!s&&!e)return null;const t=e&&e.calculations&&e.calculations.length>1;if(!t&&!s)return null;const r=(t?e.clientName:s?.clientName)||"",a=(t?e.projectName:s?.projectName)||"",l=(h,y,b)=>{const{detailedItems:E,screenQty:w,moduleType:S,cabinetType:q,finalWidth:Y,finalHeight:te}=h;return p.jsxs("div",{className:"mb-8 break-inside-avoid print-break-avoid",children:[t&&p.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg mb-3 border border-teal-200 dark:border-teal-800",children:[p.jsxs("h3",{className:"font-bold text-teal-800 dark:text-teal-300 text-sm",children:["Screen Configuration #",y+1]}),p.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2 text-xs text-teal-700 dark:text-teal-400",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-semibold",children:"Target:"})," ",b.targetWidth,"",b.targetHeight,b.unit||"m"]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-semibold",children:"Final:"})," ",Y,"m  ",te,"m"]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-semibold",children:"Quantity:"})," ",w," screens"]}),S&&p.jsxs("div",{children:[p.jsx("span",{className:"font-semibold",children:"Pitch:"})," P",S.pitch]})]})]}),p.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-[10px]",children:[p.jsx("thead",{className:"bg-slate-100 text-slate-700",children:p.jsxs("tr",{children:[p.jsx("th",{className:"p-2 border border-slate-300 text-left w-10",children:"#"}),p.jsx("th",{className:"p-2 border border-slate-300 text-left w-32",children:"Component"}),p.jsx("th",{className:"p-2 border border-slate-300 text-left",children:"Specification / Details"}),p.jsx("th",{className:"p-2 border border-slate-300 text-center w-16",children:"Qty/Scrn"}),p.jsx("th",{className:"p-2 border border-slate-300 text-center w-16",children:"Total Qty"})]})}),p.jsx("tbody",{children:E.map((R,Z)=>{let ae=null;return R.id==="modules"&&S&&(ae=p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[p.jsxs("span",{children:["Size: ",S.width,"x",S.height,"mm"]}),p.jsxs("span",{children:["LED: ",S.ledType||"-"]}),p.jsxs("span",{children:["Bright: ",S.brightness," nits"]}),p.jsxs("span",{children:["Ref: ",S.refreshRate," Hz"]}),p.jsxs("span",{children:["Ang: ",S.viewAngleH,"/",S.viewAngleV]}),p.jsxs("span",{children:["IP: ",S.ipFront,"/",S.ipBack]}),p.jsxs("span",{children:["Pwr: ",S.avgPower,"/",S.maxPower," W"]}),p.jsxs("span",{children:["Wt: ",S.weight," kg"]})]})),R.id==="cabinets"&&q&&(ae=p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[p.jsxs("span",{children:["Size: ",q.width,"x",q.height,"mm"]}),p.jsxs("span",{children:["Mat: ",q.material]}),p.jsxs("span",{children:["Weight: ",q.weight," kg"]})]})),p.jsxs("tr",{children:[p.jsx("td",{className:"p-2 border border-slate-300 text-center",children:Z+1}),p.jsx("td",{className:"p-2 border border-slate-300 font-bold align-top",children:R.name}),p.jsxs("td",{className:"p-2 border border-slate-300 align-top",children:[p.jsx("div",{className:"font-semibold",children:R.spec}),ae]}),p.jsx("td",{className:"p-2 border border-slate-300 text-center align-top",children:R.qty}),p.jsx("td",{className:"p-2 border border-slate-300 text-center font-bold align-top",children:R.qty*w})]},Z)})})]})]},y)},u=()=>{if(!t)return null;const h={};e.calculations.forEach((b,E)=>{b.detailedItems.forEach(w=>{const S=`${w.inventoryId||w.id}_${w.spec}`;h[S]||(h[S]={name:w.name,spec:w.spec,totalQty:0,screens:[]});const q=w.qty*b.screenQty;h[S].totalQty+=q,h[S].screens.push({screenIndex:E+1,qtyPerScreen:w.qty,screenQty:b.screenQty,total:q})})});const y=Object.values(h);return p.jsxs("div",{className:"mt-8 break-inside-avoid print-break-avoid border-t-4 border-slate-800 pt-6",children:[p.jsxs("div",{className:"bg-slate-800 text-white p-3 rounded-t-lg mb-0",children:[p.jsx("h3",{className:"font-bold text-lg uppercase tracking-wide",children:"Consolidated Bill of Materials"}),p.jsx("p",{className:"text-xs text-slate-300 mt-1",children:"Combined quantities across all screen configurations"})]}),p.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-[10px]",children:[p.jsx("thead",{className:"bg-slate-700 text-white",children:p.jsxs("tr",{children:[p.jsx("th",{className:"p-2 border border-slate-600 text-left w-10",children:"#"}),p.jsx("th",{className:"p-2 border border-slate-600 text-left w-32",children:"Component"}),p.jsx("th",{className:"p-2 border border-slate-600 text-left",children:"Specification"}),p.jsx("th",{className:"p-2 border border-slate-600 text-center w-20",children:"Total Qty"}),p.jsx("th",{className:"p-2 border border-slate-600 text-left",children:"Usage Breakdown"})]})}),p.jsx("tbody",{children:y.map((b,E)=>p.jsxs("tr",{className:E%2===0?"bg-slate-50":"bg-white",children:[p.jsx("td",{className:"p-2 border border-slate-300 text-center",children:E+1}),p.jsx("td",{className:"p-2 border border-slate-300 font-bold align-top",children:b.name}),p.jsx("td",{className:"p-2 border border-slate-300 align-top",children:b.spec}),p.jsx("td",{className:"p-2 border border-slate-300 text-center font-bold align-top text-teal-700",children:b.totalQty}),p.jsx("td",{className:"p-2 border border-slate-300 align-top",children:p.jsx("div",{className:"text-[9px] text-slate-600",children:b.screens.map((w,S)=>p.jsxs("span",{children:["Screen #",w.screenIndex,": ",w.total," units",S<b.screens.length-1?"  ":""]},S))})})]},E))})]}),p.jsx("div",{className:"mt-4 p-3 bg-teal-50 dark:bg-teal-900/20 rounded-lg border border-teal-200 dark:border-teal-800",children:p.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-bold text-teal-800 dark:text-teal-300",children:"Total Configurations:"}),p.jsx("span",{className:"ml-2 font-bold text-lg text-teal-600 dark:text-teal-400",children:e.calculations.length})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-bold text-teal-800 dark:text-teal-300",children:"Total Screens:"}),p.jsx("span",{className:"ml-2 font-bold text-lg text-teal-600 dark:text-teal-400",children:e.totalScreenQty})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-bold text-teal-800 dark:text-teal-300",children:"Unique Components:"}),p.jsx("span",{className:"ml-2 font-bold text-lg text-teal-600 dark:text-teal-400",children:y.length})]})]})})]})},m=h=>p.jsxs("div",{className:`p-8 max-w-[210mm] mx-auto bg-white min-h-screen text-slate-800 font-sans text-xs ${h?"print-version-container p-0 w-full":""}`,children:[p.jsxs("div",{className:"flex justify-between items-start mb-6 border-b-2 border-slate-800 pb-4",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-slate-900 uppercase tracking-wide",children:"Bill of Materials"}),p.jsxs("div",{className:"mt-2 space-y-1",children:[p.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Project: ",p.jsx("span",{className:"font-normal",children:a})]}),p.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Client: ",p.jsx("span",{className:"font-normal",children:r})]}),t&&p.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Configurations: ",p.jsxs("span",{className:"font-normal",children:[e.calculations.length," screen types  ",e.totalScreenQty," total screens"]})]}),!t&&s.moduleType&&p.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Specs: ",p.jsxs("span",{className:"font-normal",children:["P",s.moduleType.pitch," ",s.moduleType.indoor?"Indoor":"Outdoor","  ",s.finalWidth,"m x ",s.finalHeight,"m  Qty: ",s.screenQty]})]})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["REF: ",gd()]}),p.jsx("p",{className:"text-xs text-slate-500",children:new Date().toLocaleDateString()})]})]}),t?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mb-6",children:p.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase mb-3 pb-2 border-b border-slate-300",children:"Individual Screen Configurations"})}),e.calculations.map((y,b)=>l(y,b,e.screenConfigs?e.screenConfigs[b]:{})),u()]}):l(s,0,{}),p.jsx("div",{className:"mt-8 text-[10px] text-slate-400 border-t border-slate-200 pt-2 text-center",children:"Internal Document  Generated by Admire Signage Tool"})]});return p.jsxs(Ut.Fragment,{children:[p.jsx("div",{className:"screen-preview-wrapper",children:m(!1)}),gN.createPortal(p.jsx("div",{className:"print-only-portal",children:m(!0)}),document.body)]})},u3=(s,e)=>{const[t,r]=Ut.useState(s);return Ut.useEffect(()=>{const a=setTimeout(()=>{r(s)},e);return()=>{clearTimeout(a)}},[s,e]),t},d3=({calculation:s,state:e,updateState:t,updateExtra:r,updateScreenProp:a,inventory:l,getStock:u,overrides:m,onOverride:h,editingRow:y,setEditingRow:b,onClearOverride:E})=>{const w=e.screens[e.activeScreenIndex],{screenQty:S,selectedPitch:q,selectedModuleId:Y,selectedCabinetId:te,selectedCardId:R,selectedPSUId:Z,selectedProcId:ae,extraComponents:fe,extras:se,commercials:he}=w,{assemblyMode:A,selectedIndoor:N}=e,k=()=>Math.random().toString(36).substr(2,9).toUpperCase(),O=N==="true",P=l.filter(H=>H.type==="module"&&H.indoor===O),M=[...new Set(P.map(H=>H.pitch))].sort((H,Re)=>H-Re),C=q?P.filter(H=>H.pitch==q):[],Ue=l.find(H=>H.id===Y),Ve=l.filter(H=>H.type!=="cabinet"?!1:Ue?H.width%Ue.width===0&&H.height%Ue.height===0:!0),W=l.filter(H=>H.type==="ready"&&H.indoor===O),ue=H=>{const Re=(le,Xt)=>a(e.activeScreenIndex,le,Xt);if(H.id==="modules")return p.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[p.jsxs("select",{value:q,onChange:le=>{Re("selectedPitch",le.target.value),Re("selectedModuleId","")},className:"w-full md:w-20 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[p.jsx("option",{value:"",children:"Pitch"}),M.map(le=>p.jsxs("option",{value:le,children:["P",le]},le))]}),p.jsxs("select",{value:Y,onChange:le=>Re("selectedModuleId",le.target.value),disabled:!q,className:"w-full md:flex-1 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white disabled:opacity-50",children:[p.jsx("option",{value:"",children:"Select Module..."}),C.map(le=>p.jsxs("option",{value:le.id,children:[le.brand," ",le.model," (",u(le.id),")"]},le.id))]})]});if(H.id==="cabinets")return p.jsxs("select",{value:te,onChange:le=>Re("selectedCabinetId",le.target.value),disabled:!Ue,className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white disabled:opacity-50",children:[p.jsx("option",{value:"",children:"Select Cabinet..."}),Ve.map(le=>p.jsxs("option",{value:le.id,children:[le.brand," ",le.model," (",le.width,"x",le.height,") - Stock: ",u(le.id)]},le.id))]});if(H.id==="cards")return p.jsxs("select",{value:R,onChange:le=>Re("selectedCardId",le.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[p.jsx("option",{value:"",children:"Select Card..."}),l.filter(le=>le.type==="card").map(le=>p.jsxs("option",{value:le.id,children:[le.brand," ",le.model," (",u(le.id),")"]},le.id))]});if(H.id==="psu")return p.jsxs("select",{value:Z,onChange:le=>Re("selectedPSUId",le.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[p.jsx("option",{value:"",children:"Select SMPS..."}),l.filter(le=>le.type==="psu").map(le=>p.jsxs("option",{value:le.id,children:[le.brand," ",le.model," (",u(le.id),")"]},le.id))]});if(H.id==="processor")return p.jsxs("div",{className:"flex flex-col gap-2 md:gap-1",children:[p.jsxs("select",{value:ae,onChange:le=>Re("selectedProcId",le.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[p.jsx("option",{value:"",children:"Select Processor..."}),l.filter(le=>le.type==="processor").map(le=>p.jsxs("option",{value:le.id,children:[le.brand," ",le.model," (",u(le.id),")"]},le.id))]}),p.jsxs("div",{className:"flex items-center gap-2 md:gap-1",children:[p.jsx("span",{className:"text-xs md:text-[10px] text-green-600 font-bold",children:"Sell:"}),p.jsx("input",{type:"number",className:"flex-1 md:w-20 p-2 md:p-0.5 text-xs border border-green-200 rounded bg-green-50 text-green-800",value:he.processor?.val||0,onChange:le=>a(e.activeScreenIndex,"commercials",{...he,processor:{...he.processor,val:le.target.value}})})]})]});if(H.id==="ready")return p.jsxs("select",{value:w.readyId,onChange:le=>Re("readyId",le.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[p.jsx("option",{value:"",children:"Select Screen Model..."}),W.map(le=>p.jsxs("option",{value:le.id,children:[le.brand," ",le.model," (P",le.pitch,")"]},le.id))]});const Qe=fe?fe.findIndex(le=>le.id===H.id):-1;return Qe!==-1?p.jsxs("div",{className:"flex gap-1 items-center",children:[p.jsxs("select",{value:fe[Qe].componentId,onChange:le=>{const Xt=[...fe];Xt[Qe].componentId=le.target.value,Re("extraComponents",Xt)},className:"flex-1 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[p.jsx("option",{value:"",children:"Select..."}),["module","cabinet","card","psu"].map(le=>{const Xt=l.filter(Nt=>Nt.type===le).sort((Nt,zn)=>(Nt.brand+" "+Nt.model).localeCompare(zn.brand+" "+zn.model));return Xt.length===0?null:p.jsx("optgroup",{label:le==="psu"?"SMPS":le.toUpperCase(),children:Xt.map(Nt=>p.jsxs("option",{value:Nt.id,children:[Nt.brand," ",Nt.model]},Nt.id))},le)})]}),p.jsxs("select",{value:fe[Qe].type,onChange:le=>{const Xt=[...fe];Xt[Qe].type=le.target.value,Re("extraComponents",Xt)},className:"w-16 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[p.jsx("option",{value:"screen",children:"/Scrn"}),p.jsx("option",{value:"cabinet",children:"/Cab"})]}),p.jsx("button",{type:"button",onClick:()=>Re("extraComponents",fe.filter((le,Xt)=>Xt!==Qe)),className:"text-red-400 hover:text-red-600",children:p.jsx(vo,{size:16})})]}):p.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[H.name," ",p.jsxs("span",{className:"text-[10px] text-slate-400 font-normal",children:["(",H.spec,")"]})]})},Ee=H=>s?.calculatedExtras?.[H]||0,Me=s?.matrix?.sqft?.perScreen||1;let qe=s?s.detailedItems:A==="assembled"?[{id:"modules",type:"led",name:"Modules",qty:0,unit:0,total:0},{id:"cabinets",type:"led",name:"Cabinets",qty:0,unit:0,total:0},{id:"cards",type:"led",name:"Receiving Cards",qty:0,unit:0,total:0},{id:"psu",type:"led",name:"SMPS",qty:0,unit:0,total:0},{id:"processor",type:"service",name:"Processor",qty:1,unit:0,total:0}]:[{id:"ready",type:"led",name:"Ready Unit",qty:0,unit:0,total:0},{id:"processor",type:"service",name:"Processor",qty:1,unit:0,total:0}];!s&&fe?.length>0&&(qe=[...qe,...fe.map(H=>({id:H.id,type:"led",name:"Extra",spec:"Select...",qty:H.qty,unit:0,total:0}))]);const V=qe.filter(H=>H.type==="led"),X=(Array.isArray(se)?se:[]).reduce((H,Re)=>H+Ee(Re.id),0),_e=V.reduce((H,Re)=>H+Re.total*S,0)+X*S,Te=_e/(S||1),J=Te/Me,re=qe.filter(H=>H.type!=="led"),me=Ee("install"),we=Ee("structure"),ze=re.reduce((H,Re)=>H+Re.total*S,0)+(me+we)*S,Cn=ze/(S||1),or=Cn/Me,Wt=_e+ze,$n=Wt/(S||1),kn=$n/Me,Yn=()=>{const H={id:k(),name:"New Cost",val:0,type:"abs"};a(e.activeScreenIndex,"extras",[...se||[],H])},vn=H=>{const Re=[...se];Re.splice(H,1),a(e.activeScreenIndex,"extras",Re)},lt=(H,Re,Qe)=>{const le=[...se];le[H]={...le[H],[Re]:Qe},a(e.activeScreenIndex,"extras",le)},vt=H=>p.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors ${H.isOverridden?"bg-amber-50 dark:bg-amber-900/20":""}`,children:[p.jsx("td",{className:"p-2 pl-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"flex-1",children:ue(H)}),s&&p.jsxs(p.Fragment,{children:[p.jsx("button",{type:"button",onClick:()=>b(y===H.id?null:H.id),className:`p-1 rounded ${y===H.id?"bg-teal-100 text-teal-700":"text-slate-300 hover:text-teal-600"}`,children:p.jsx(Hl,{size:12})}),H.isOverridden&&p.jsx("button",{type:"button",onClick:()=>E(H.id),className:"text-amber-500 hover:text-red-500",children:p.jsx(Ly,{size:12})})]})]})}),p.jsx("td",{className:"p-2 text-right w-24",children:y===H.id?p.jsx("input",{type:"number",className:"w-full p-1 text-right text-xs border rounded",value:m[H.id]?.rate??H.unit,onChange:Re=>h(H.id,"rate",Re.target.value)}):He(H.unit,"INR",!1)}),p.jsx("td",{className:"p-2 text-center border-l border-slate-100 dark:border-slate-700 w-16",children:y===H.id?p.jsx("input",{type:"number",className:"w-full p-1 text-center text-xs border rounded",value:m[H.id]?.qty??H.qty,onChange:Re=>h(H.id,"qty",Re.target.value)}):H.qty}),p.jsx("td",{className:"p-2 text-right text-slate-500 w-24",children:He(H.total,"INR",!1)}),p.jsx("td",{className:"p-2 text-right font-medium border-l border-slate-100 dark:border-slate-700 w-28",children:He(H.total*S,"INR",!1)})]},H.id),Un=H=>p.jsxs("div",{className:`bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 mb-3 shadow-sm ${H.isOverridden?"ring-1 ring-amber-400 bg-amber-50 dark:bg-amber-900/10":""}`,children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:H.name}),s&&p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{type:"button",onClick:()=>b(y===H.id?null:H.id),className:`p-1 rounded ${y===H.id?"bg-teal-100 text-teal-700":"text-slate-300 hover:text-teal-600"}`,children:p.jsx(Hl,{size:14})}),H.isOverridden&&p.jsx("button",{type:"button",onClick:()=>E(H.id),className:"text-amber-500 hover:text-red-500",children:p.jsx(Ly,{size:14})})]})]}),p.jsx("div",{className:"mb-3",children:ue(H)}),p.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs bg-slate-50 dark:bg-slate-700/50 p-2 rounded",children:[p.jsxs("div",{children:[p.jsx("span",{className:"block text-[9px] uppercase text-slate-400 font-bold mb-1",children:"Rate"}),y===H.id?p.jsx("input",{type:"number",className:"w-full p-1 text-right text-xs border rounded",value:m[H.id]?.rate??H.unit,onChange:Re=>h(H.id,"rate",Re.target.value)}):p.jsx("span",{className:"block font-medium dark:text-slate-200",children:He(H.unit,"INR",!1)})]}),p.jsxs("div",{className:"text-center border-l border-slate-200 dark:border-slate-600",children:[p.jsx("span",{className:"block text-[9px] uppercase text-slate-400 font-bold mb-1",children:"Qty"}),y===H.id?p.jsx("input",{type:"number",className:"w-full p-1 text-center text-xs border rounded",value:m[H.id]?.qty??H.qty,onChange:Re=>h(H.id,"qty",Re.target.value)}):p.jsx("span",{className:"block font-medium dark:text-slate-200",children:H.qty})]}),p.jsxs("div",{className:"text-right border-l border-slate-200 dark:border-slate-600",children:[p.jsx("span",{className:"block text-[9px] uppercase text-slate-400 font-bold mb-1",children:"Total"}),p.jsx("span",{className:"block font-bold text-teal-600 dark:text-teal-400",children:He(H.total*S,"INR",!1)})]})]})]},H.id);return p.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[p.jsx("div",{className:"hidden md:block overflow-x-auto",children:p.jsxs("table",{className:"w-full text-xs text-left border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 font-bold",children:[p.jsx("th",{className:"p-2",children:"Component Selection"}),p.jsx("th",{className:"p-2 text-right",children:"Rate (Cost)"}),p.jsx("th",{className:"p-2 text-center border-l border-slate-200 dark:border-slate-700",children:"Qty/Scrn"}),p.jsx("th",{className:"p-2 text-right",children:"Cost/Scrn"}),p.jsx("th",{className:"p-2 text-right border-l border-slate-200 dark:border-slate-700",children:"Total Cost"})]})}),p.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[p.jsx("tr",{className:"bg-slate-50 dark:bg-slate-800/50",children:p.jsx("td",{colSpan:"5",className:"p-2 font-bold text-teal-700 dark:text-teal-400 uppercase tracking-wider text-[10px]",children:"A. LED Panel & Logistics"})}),V.map(vt),p.jsx("tr",{className:"bg-white dark:bg-slate-900",children:p.jsx("td",{colSpan:"5",className:"p-2 text-center",children:p.jsxs("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"extraComponents",[...fe||[],{id:k(),componentId:"",qty:1,type:"screen"}]),className:"text-[10px] text-teal-600 hover:underline flex items-center justify-center gap-1 w-full",children:[p.jsx(mo,{size:10})," Add Component to Panel"]})})}),(Array.isArray(se)?se:[]).map((H,Re)=>p.jsxs("tr",{className:"text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700/50 group",children:[p.jsx("td",{className:"p-2 pl-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>vn(Re),className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(vo,{size:12})}),p.jsx("input",{type:"text",value:H.name,onChange:Qe=>lt(Re,"name",Qe.target.value),className:"text-xs border-b border-transparent hover:border-slate-300 focus:border-teal-500 bg-transparent outline-none w-full text-slate-600 dark:text-slate-300 font-medium"})]})}),p.jsx("td",{className:"p-2 text-right",children:p.jsxs("div",{className:"flex items-center justify-end gap-1",children:[p.jsx("input",{type:"number",value:H.val,onChange:Qe=>lt(Re,"val",Qe.target.value),className:"w-16 p-1 text-right text-xs border rounded bg-white dark:bg-slate-800 dark:border-slate-600"}),p.jsx("button",{type:"button",onClick:()=>lt(Re,"type",H.type==="abs"?"pct":"abs"),className:"px-1 text-[10px] font-bold border rounded bg-slate-100 dark:bg-slate-700",children:H.type==="abs"?"":"%"})]})}),p.jsx("td",{className:"p-2 text-center border-l border-slate-100 dark:border-slate-700 text-[10px] text-slate-400",children:H.type==="pct"?`${H.val}%`:"-"}),p.jsx("td",{className:"p-2 text-right",children:He(Ee(H.id),"INR",!1)}),p.jsx("td",{className:"p-2 text-right border-l border-slate-100 dark:border-slate-700",children:He(Ee(H.id)*S,"INR",!1)})]},H.id)),p.jsx("tr",{className:"bg-slate-50 dark:bg-slate-800/20",children:p.jsx("td",{colSpan:"5",className:"p-1 text-center",children:p.jsxs("button",{onClick:Yn,className:"text-[10px] text-blue-600 hover:text-blue-700 font-bold uppercase tracking-wider flex items-center justify-center gap-1 py-1 w-full hover:bg-slate-100 dark:hover:bg-slate-700 rounded transition-colors",children:[p.jsx(mo,{size:10})," Add Extra Cost"]})})}),p.jsxs("tr",{className:"bg-teal-50 dark:bg-teal-900/20 font-bold border-t border-teal-100 dark:border-teal-800",children:[p.jsx("td",{className:"p-2 text-right text-teal-800 dark:text-teal-300",children:"Sub-total (LED Panel)"}),p.jsxs("td",{className:"p-2 text-right text-teal-700 dark:text-teal-400 text-[10px] font-normal",children:[He(J,"INR"),"/sqft"]}),p.jsx("td",{className:"p-2 text-center border-l border-teal-100 dark:border-teal-800",children:"-"}),p.jsx("td",{className:"p-2 text-right text-teal-800 dark:text-teal-300",children:He(Te,"INR",!1)}),p.jsx("td",{className:"p-2 text-right text-teal-800 dark:text-teal-300 border-l border-teal-100 dark:border-teal-800",children:He(_e,"INR",!1)})]}),p.jsx("tr",{className:"bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700",children:p.jsx("td",{colSpan:"5",className:"p-2 font-bold text-blue-700 dark:text-blue-400 uppercase tracking-wider text-[10px]",children:"B. Additional Costs"})}),re.map(vt),["installation","structure"].map(H=>{const Re=H==="installation"?"install":"structure",Qe=H==="installation"?"Installation":"Structure";return p.jsxs("tr",{className:"text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[p.jsx("td",{className:"p-2 pl-4",children:p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs font-medium",children:Qe}),p.jsxs("select",{value:he[H]?.unit||"sqft",onChange:le=>a(e.activeScreenIndex,"commercials",{...he,[H]:{...he[H],unit:le.target.value}}),className:"text-[10px] p-0.5 border rounded bg-slate-50 dark:bg-slate-700",children:[p.jsx("option",{value:"sqft",children:"/Sq.Ft"}),p.jsx("option",{value:"screen",children:"/Screen"})]})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Sell:"}),p.jsx("input",{type:"number",className:"w-20 p-0.5 text-xs border border-green-200 rounded bg-green-50 text-green-800",value:he[H]?.val||0,onChange:le=>a(e.activeScreenIndex,"commercials",{...he,[H]:{...he[H],val:le.target.value}})})]})]})}),p.jsx("td",{className:"p-2 text-right",children:p.jsxs("div",{className:"flex items-center justify-end gap-1",children:[p.jsx("span",{className:"text-[10px] text-slate-400 mr-1",children:"Cost:"}),p.jsx("input",{type:"number",value:he[H]?.cost||0,onChange:le=>a(e.activeScreenIndex,"commercials",{...he,[H]:{...he[H],cost:le.target.value}}),className:"w-16 p-1 text-right text-xs border rounded bg-white dark:bg-slate-800 dark:border-slate-600"}),p.jsx("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"commercials",{...he,[H]:{...he[H],costType:he[H]?.costType==="abs"?"pct":"abs"}}),className:"px-1 text-[10px] font-bold border rounded bg-slate-100 dark:bg-slate-700",children:he[H]?.costType==="abs"?"":"%"})]})}),p.jsx("td",{className:"p-2 text-center border-l border-slate-100 dark:border-slate-700 text-xs",children:he[H]?.unit==="sqft"?s?.matrix.sqft.perScreen.toFixed(1)||"-":"1"}),p.jsx("td",{className:"p-2 text-right",children:He(Ee(Re),"INR",!1)}),p.jsx("td",{className:"p-2 text-right border-l border-slate-100 dark:border-slate-700",children:He(Ee(Re)*S,"INR",!1)})]},H)}),p.jsxs("tr",{className:"bg-blue-50 dark:bg-blue-900/20 font-bold border-t border-blue-100 dark:border-blue-800",children:[p.jsx("td",{className:"p-2 text-right text-blue-800 dark:text-blue-300",children:"Sub-total (Additional)"}),p.jsxs("td",{className:"p-2 text-right text-blue-700 dark:text-blue-400 text-[10px] font-normal",children:[He(or,"INR"),"/sqft"]}),p.jsx("td",{className:"p-2 text-center border-l border-blue-100 dark:border-blue-800",children:"-"}),p.jsx("td",{className:"p-2 text-right text-blue-800 dark:text-blue-300",children:He(Cn,"INR",!1)}),p.jsx("td",{className:"p-2 text-right text-blue-800 dark:text-blue-300 border-l border-blue-100 dark:border-blue-800",children:He(ze,"INR",!1)})]}),p.jsxs("tr",{className:"bg-slate-800 text-white font-bold border-t-2 border-slate-900 text-sm",children:[p.jsx("td",{className:"p-3 text-right uppercase",children:"Grand Total (Cost)"}),p.jsxs("td",{className:"p-3 text-right text-slate-300 text-xs font-normal",children:[He(kn,"INR"),"/sqft"]}),p.jsx("td",{className:"p-3 text-center border-l border-slate-600",children:"-"}),p.jsx("td",{className:"p-3 text-right border-l border-slate-600",children:He($n,"INR",!1)}),p.jsx("td",{className:"p-3 text-right border-l border-slate-600",children:He(Wt,"INR",!1)})]})]})]})}),p.jsxs("div",{className:"md:hidden bg-slate-50 dark:bg-slate-800/20 p-3",children:[p.jsx("div",{className:"mb-2 font-bold text-teal-700 text-xs uppercase tracking-wider",children:"A. LED Panel & Logistics"}),V.map(Un),p.jsxs("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"extraComponents",[...fe||[],{id:k(),componentId:"",qty:1,type:"screen"}]),className:"w-full py-2 mb-4 bg-white dark:bg-slate-800 border border-teal-200 dark:border-teal-700 text-teal-600 dark:text-teal-400 rounded-lg text-xs font-bold flex items-center justify-center gap-2",children:[p.jsx(mo,{size:14})," Add Component"]}),(Array.isArray(se)?se:[]).map((H,Re)=>p.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 mb-3 shadow-sm flex items-center justify-between",children:[p.jsx("div",{className:"flex-1",children:p.jsx("input",{type:"text",value:H.name,onChange:Qe=>lt(Re,"name",Qe.target.value),className:"text-xs font-bold border-b border-transparent focus:border-teal-500 bg-transparent outline-none w-full text-slate-600 dark:text-slate-300"})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"number",value:H.val,onChange:Qe=>lt(Re,"val",Qe.target.value),className:"w-12 p-1 text-right text-xs border rounded bg-slate-50 dark:bg-slate-700"}),p.jsx("button",{type:"button",onClick:()=>lt(Re,"type",H.type==="abs"?"pct":"abs"),className:"px-1 text-[10px] font-bold border rounded bg-slate-100 dark:bg-slate-600",children:H.type==="abs"?"":"%"}),p.jsx("button",{onClick:()=>vn(Re),className:"text-red-400 p-1",children:p.jsx(vo,{size:14})})]})]},H.id)),p.jsxs("button",{onClick:Yn,className:"w-full py-2 mb-4 bg-white dark:bg-slate-800 border border-blue-200 dark:border-blue-700 text-blue-600 dark:text-blue-400 rounded-lg text-xs font-bold flex items-center justify-center gap-2",children:[p.jsx(mo,{size:14})," Add Overhead Cost"]}),p.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg border border-teal-100 dark:border-teal-800 mb-6",children:[p.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-teal-800 dark:text-teal-300",children:[p.jsx("span",{children:"Sub-total (LED Panel)"}),p.jsx("span",{children:He(_e,"INR",!1)})]}),p.jsxs("div",{className:"text-[10px] text-right text-teal-600 dark:text-teal-400 mt-1",children:[He(J,"INR"),"/sqft"]})]}),p.jsx("div",{className:"mb-2 font-bold text-blue-700 text-xs uppercase tracking-wider",children:"B. Additional Costs"}),re.map(Un),["installation","structure"].map(H=>{const Re=H==="installation"?"install":"structure",Qe=H==="installation"?"Installation":"Structure";return p.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 mb-3 shadow-sm",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:Qe}),p.jsxs("select",{value:he[H]?.unit||"sqft",onChange:le=>a(e.activeScreenIndex,"commercials",{...he,[H]:{...he[H],unit:le.target.value}}),className:"text-[10px] p-0.5 border rounded bg-slate-50 dark:bg-slate-700",children:[p.jsx("option",{value:"sqft",children:"/Sq.Ft"}),p.jsx("option",{value:"screen",children:"/Screen"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[p.jsxs("div",{className:"flex items-center gap-1 bg-green-50 p-1 rounded border border-green-100",children:[p.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Sell:"}),p.jsx("input",{type:"number",className:"w-full p-0.5 text-xs bg-transparent outline-none text-green-800 font-bold",value:he[H]?.val||0,onChange:le=>a(e.activeScreenIndex,"commercials",{...he,[H]:{...he[H],val:le.target.value}})})]}),p.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 p-1 rounded border border-slate-100",children:[p.jsx("span",{className:"text-[10px] text-slate-400",children:"Cost:"}),p.jsx("input",{type:"number",className:"w-full p-0.5 text-xs bg-transparent outline-none",value:he[H]?.cost||0,onChange:le=>a(e.activeScreenIndex,"commercials",{...he,[H]:{...he[H],cost:le.target.value}})}),p.jsx("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"commercials",{...he,[H]:{...he[H],costType:he[H]?.costType==="abs"?"pct":"abs"}}),className:"px-1 text-[10px] font-bold",children:he[H]?.costType==="abs"?"":"%"})]})]}),p.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-100 dark:border-slate-700",children:[p.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"Total Cost"}),p.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:He(Ee(Re)*S,"INR",!1)})]})]},H)}),p.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-100 dark:border-blue-800 mb-6",children:p.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-blue-800 dark:text-blue-300",children:[p.jsx("span",{children:"Sub-total (Additional)"}),p.jsx("span",{children:He(ze,"INR",!1)})]})}),p.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg text-white shadow-lg",children:[p.jsxs("div",{className:"flex justify-between items-end mb-1",children:[p.jsx("span",{className:"text-xs uppercase text-slate-400 font-bold",children:"Grand Total (Cost)"}),p.jsx("span",{className:"text-lg font-bold",children:He(Wt,"INR",!1)})]}),p.jsxs("div",{className:"text-[10px] text-right text-slate-500",children:[He(kn,"INR"),"/sqft"]})]})]})]})},h3=({user:s,inventory:e,transactions:t,state:r,setState:a,exchangeRate:l,setExchangeRate:u,onSaveQuote:m})=>{const{client:h,project:y,screenQty:b,targetWidth:E,targetHeight:w,unit:S,selectedIndoor:q,assemblyMode:Y,sizingMode:te,margin:R,extras:Z,overrides:ae,editingRow:fe}=r,[se,he]=Ut.useState(null),[A,N]=Ut.useState(null),[k,O]=Ut.useState(!1),[P,M]=Ut.useState(!1),[C,Ue]=Ut.useState(!1),Ve=u3(r,300),W=J=>t?t.filter(re=>re.itemId===J).reduce((re,me)=>re+(me.type==="in"?Number(me.qty):-Number(me.qty)),0):0,ue=(J,re)=>a(me=>({...me,[J]:re})),Ee=(J,re,me)=>{const we=r.activeScreenIndex;a(Oe=>{const ze=[...Oe.screens];return ze[we]={...ze[we],extras:{...ze[we].extras,[J]:{...ze[we].extras[J],[re]:me}}},{...Oe,screens:ze}})},Me=()=>{confirm("Reset calculator to defaults?")&&a({client:"",project:"",unit:"ft",screens:[{id:gd(),screenQty:0,targetWidth:0,targetHeight:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedPSUId:"",selectedProcId:"",sizingMode:"closest",readyId:"",extraComponents:[],overrides:{},editingRow:null,extras:[],commercials:{processor:{val:0,unit:"screen",cost:0,costType:"abs"},installation:{val:0,unit:"sqft",cost:0,costType:"abs"},structure:{val:0,unit:"sqft",cost:0,costType:"abs"}}}],activeScreenIndex:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedPSUId:"",selectedProcId:"",sizingMode:"closest",readyId:"",margin:0,pricingMode:"margin",targetSellPrice:0,extraComponents:[],commercials:{processor:{val:0,unit:"screen"},installation:{val:0,unit:"sqft"},structure:{val:0,unit:"sqft"}},terms:{price:Qt.DEFAULTS.PRICE_BASIS,deliveryWeeks:Qt.DEFAULTS.DELIVERY_WEEKS,payment:Qt.DEFAULTS.PAYMENT_TERMS},extras:[],overrides:{},editingRow:null})},qe=()=>{const J={id:gd(),screenQty:1,targetWidth:0,targetHeight:0,selectedIndoor:r.selectedIndoor,assemblyMode:r.assemblyMode,selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedPSUId:"",selectedProcId:"",sizingMode:"closest",readyId:"",extraComponents:[],overrides:{},editingRow:null,extras:[],commercials:{processor:{val:0,unit:"screen",cost:0,costType:"abs"},installation:{val:0,unit:"sqft",cost:0,costType:"abs"},structure:{val:0,unit:"sqft",cost:0,costType:"abs"}}};a(re=>({...re,screens:[...re.screens,J],activeScreenIndex:re.screens.length}))},V=J=>{if(r.screens.length===1){alert("Cannot remove the last screen configuration.");return}confirm("Remove this screen configuration?")&&a(re=>({...re,screens:re.screens.filter((me,we)=>we!==J),activeScreenIndex:Math.min(re.activeScreenIndex,re.screens.length-2)}))},X=(J,re,me)=>{a(we=>{const Oe=[...we.screens];return Oe[J]={...Oe[J],[re]:me},{...we,screens:Oe}})},pe=J=>{const me={...r.screens[J],id:gd(),overrides:{},editingRow:null};a(we=>({...we,screens:[...we.screens,me],activeScreenIndex:we.screens.length}))},_e=(J,re,me)=>{const we=r.screens[r.activeScreenIndex];X(r.activeScreenIndex,"overrides",{...we.overrides,[J]:{...we.overrides[J],[re]:me}})},Te=J=>{const me={...r.screens[r.activeScreenIndex].overrides};delete me[J],X(r.activeScreenIndex,"overrides",me),X(r.activeScreenIndex,"editingRow",null)};return Ut.useEffect(()=>{if(!Ve.screens||Ve.screens.length===0){he(null);return}const J=Ve.screens[Ve.activeScreenIndex];if(!J){he(null);return}const re={...Ve,...J},me=To(re,e,t,l);he(me)},[Ve,e,l]),Ut.useEffect(()=>{const re=(()=>{if(!Ve.screens||Ve.screens.length===0)return null;const me=Ve.screens.map(Oe=>{const ze={...Ve,...Oe};return To(ze,e,t,l)}).filter(Oe=>Oe!==null);if(me.length===0)return null;const we={totalProjectCost:me.reduce((Oe,ze)=>Oe+ze.totalProjectCost,0),totalProjectSell:me.reduce((Oe,ze)=>Oe+ze.totalProjectSell,0),totalLEDSell:me.reduce((Oe,ze)=>Oe+ze.matrix.led.sell*ze.screenQty,0),totalServicesSell:me.reduce((Oe,ze)=>Oe+(ze.matrix.sell.total-ze.matrix.led.sell*ze.screenQty),0),totalMargin:0,totalScreenQty:me.reduce((Oe,ze)=>Oe+ze.screenQty,0),calculations:me,screenConfigs:Ve.screens};return we.totalMargin=we.totalProjectSell-we.totalProjectCost,we})();N(re)},[Ve,e,l]),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 relative items-start",children:[C&&(se||A)&&p.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:p.jsxs("div",{className:"bg-white dark:bg-slate-900 max-w-5xl w-full h-[90vh] rounded-lg shadow-2xl flex flex-col overflow-hidden",children:[p.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800",children:[p.jsx("div",{className:"flex items-center gap-4",children:p.jsxs("h2",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[p.jsx(My,{size:20,className:"text-teal-600"})," Cost Sheet (BOM)"]})}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>Ue(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded text-sm font-bold",children:"Close"}),p.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-slate-800 text-white hover:bg-slate-700 rounded flex items-center gap-2 text-sm font-bold",children:[p.jsx(Bf,{size:16})," Print"]})]})]}),p.jsx("div",{className:"flex-1 overflow-auto bg-slate-100 dark:bg-slate-800 p-8 flex justify-center",children:p.jsx(c3,{data:se?{...se,clientName:h,projectName:y}:null,allScreensData:A?{...A,clientName:h,projectName:y,screenConfigs:r.screens.map(J=>({targetWidth:J.targetWidth,targetHeight:J.targetHeight,unit:S}))}:null})})]})}),k&&(se||A)&&p.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:p.jsxs("div",{className:"bg-white max-w-4xl w-full h-[90vh] rounded-lg shadow-2xl flex flex-col",children:[p.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-100 rounded-t-lg",children:[p.jsxs("h2",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[p.jsx(jy,{size:20})," Print Preview"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded",children:"Close"}),p.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-teal-600 text-white hover:bg-teal-700 rounded flex items-center gap-2",children:[p.jsx(Bf,{size:16})," Print / Save PDF"]})]})]}),p.jsx("div",{className:"flex-1 overflow-auto p-8 bg-slate-200",children:p.jsx(yN,{data:se?{...se,clientName:h,projectName:y,margin:R}:null,allScreensData:A?{...A,clientName:h,projectName:y}:null,currency:"INR",exchangeRate:l})})]})}),P&&se&&p.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:p.jsxs("div",{className:"bg-white dark:bg-slate-900 max-w-2xl w-full rounded-lg shadow-2xl flex flex-col",children:[p.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-100 dark:bg-slate-800 rounded-t-lg",children:[p.jsxs("h2",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[p.jsx(ed,{size:20,className:"text-teal-600"})," Stock Availability"]}),p.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded",children:"Close"})]}),p.jsx("div",{className:"p-6 overflow-auto",children:p.jsxs("table",{className:"w-full text-sm text-left border border-slate-200 dark:border-slate-700 rounded",children:[p.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-300 uppercase font-bold text-xs",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-2",children:"Component"}),p.jsx("th",{className:"px-4 py-2 text-center",children:"Required"}),p.jsx("th",{className:"px-4 py-2 text-center",children:"Stock"}),p.jsx("th",{className:"px-4 py-2 text-center",children:"Balance"})]})}),p.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:se.detailedItems.map((J,re)=>{const me=J.qty*se.screenQty,we=J.inventoryId?W(J.inventoryId):0,Oe=we-me;return p.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[p.jsxs("td",{className:"px-4 py-2",children:[p.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:J.name}),p.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:J.spec})]}),p.jsx("td",{className:"px-4 py-2 text-center font-bold dark:text-slate-200",children:me}),p.jsx("td",{className:"px-4 py-2 text-center text-slate-600 dark:text-slate-400",children:we}),p.jsx("td",{className:`px-4 py-2 text-center font-bold ${Oe>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:Oe})]},re)})})]})})]})}),p.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[p.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-800/50 px-4 py-3 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[p.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2 text-sm",children:[p.jsx(AC,{className:"w-4 h-4 text-teal-600"})," Project Specs"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:Me,className:"text-[10px] font-bold text-red-500 hover:text-red-700 uppercase hover:bg-red-50 dark:hover:bg-red-900/20 px-2 py-1 rounded transition-colors mr-2 flex items-center gap-1",children:[p.jsx(Ly,{size:10})," Reset"]}),p.jsxs("div",{className:"flex bg-slate-200 dark:bg-slate-700 rounded-md p-0.5",children:[p.jsx("button",{onClick:()=>ue("unit","m"),className:`px-2 py-0.5 text-[10px] font-bold rounded transition-all ${S==="m"?"bg-white dark:bg-slate-600 shadow text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400"}`,children:"M"}),p.jsx("button",{onClick:()=>ue("unit","ft"),className:`px-2 py-0.5 text-[10px] font-bold rounded transition-all ${S==="ft"?"bg-white dark:bg-slate-600 shadow text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400"}`,children:"FT"})]})]})]}),p.jsxs("div",{className:"p-4 space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[p.jsxs("div",{className:"relative group",children:[p.jsx("label",{className:"absolute -top-1.5 left-2 bg-white dark:bg-slate-800 px-1 text-[10px] font-bold text-teal-600 dark:text-teal-400",children:"CLIENT"}),p.jsx("input",{value:h,onChange:J=>ue("client",J.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-sm outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 dark:text-white transition-all",placeholder:"Client Name"})]}),p.jsxs("div",{className:"relative group",children:[p.jsx("label",{className:"absolute -top-1.5 left-2 bg-white dark:bg-slate-800 px-1 text-[10px] font-bold text-teal-600 dark:text-teal-400",children:"PROJECT"}),p.jsx("input",{value:y,onChange:J=>ue("project",J.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-sm outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 dark:text-white transition-all",placeholder:"Project Ref"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{className:"flex items-center border border-slate-200 dark:border-slate-600 rounded-md overflow-hidden h-8",children:[p.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-3 h-full flex items-center border-r border-slate-200 dark:border-slate-600 text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase w-20 justify-center",children:"Type"}),p.jsxs("div",{className:"flex-1 flex p-0.5 bg-slate-50 dark:bg-slate-800 h-full",children:[p.jsx("button",{onClick:()=>ue("selectedIndoor","true"),className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${q==="true"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Indoor"}),p.jsx("button",{onClick:()=>ue("selectedIndoor","false"),className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${q==="false"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Outdoor"})]})]}),p.jsxs("div",{className:"flex items-center border border-slate-200 dark:border-slate-600 rounded-md overflow-hidden h-8",children:[p.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-3 h-full flex items-center border-r border-slate-200 dark:border-slate-600 text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase w-20 justify-center",children:"Supply"}),p.jsxs("div",{className:"flex-1 flex p-0.5 bg-slate-50 dark:bg-slate-800 h-full",children:[p.jsx("button",{onClick:()=>ue("assemblyMode","assembled"),className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${Y==="assembled"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Assm"}),p.jsx("button",{onClick:()=>ue("assemblyMode","ready"),className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${Y==="ready"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Ready"})]})]})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Screen Configurations"}),p.jsxs("button",{onClick:qe,className:"text-[10px] font-bold text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 flex items-center gap-1 bg-teal-50 dark:bg-teal-900/30 px-2 py-1 rounded transition-colors border border-teal-100 dark:border-teal-800",children:[p.jsx(mo,{size:12})," Add Size"]})]}),p.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-12 gap-2 mb-1 px-2 text-[9px] font-bold text-slate-400 uppercase tracking-wider hidden md:grid",children:[p.jsx("div",{className:"col-span-1 text-center",children:"#"}),p.jsxs("div",{className:"col-span-3",children:["Width (",S,")"]}),p.jsxs("div",{className:"col-span-3",children:["Height (",S,")"]}),p.jsx("div",{className:"col-span-2 text-center",children:"Qty"}),p.jsx("div",{className:"col-span-2",children:"Sizing"}),p.jsx("div",{className:"col-span-1 text-right",children:"Actions"})]}),p.jsx("div",{className:"space-y-1 max-h-[300px] overflow-y-auto pr-1 custom-scrollbar",children:r.screens.map((J,re)=>p.jsxs("div",{onClick:()=>ue("activeScreenIndex",re),className:`grid grid-cols-4 md:grid-cols-12 gap-2 gap-y-3 items-center p-2 rounded border transition-all cursor-pointer ${r.activeScreenIndex===re?"border-teal-500 bg-teal-50/50 dark:bg-teal-900/20 shadow-sm ring-1 ring-teal-500/20":"border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 hover:border-teal-300"}`,children:[p.jsxs("div",{className:"col-span-4 md:col-span-1 flex justify-between md:justify-center border-b md:border-b-0 pb-1 md:pb-0 mb-1 md:mb-0",children:[p.jsx("span",{className:"md:hidden text-xs font-bold text-slate-500",children:"Config #"}),p.jsx("span",{className:`flex items-center justify-center w-5 h-5 rounded text-[10px] font-bold ${r.activeScreenIndex===re?"bg-teal-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,children:re+1})]}),p.jsx("div",{className:"col-span-2 md:col-span-3",children:p.jsx("input",{type:"number",placeholder:"W",value:J.targetWidth,onChange:me=>X(re,"targetWidth",me.target.value),className:"w-full py-0.5 px-2 border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded text-sm font-semibold focus:border-teal-500 focus:ring-1 focus:ring-teal-500 outline-none"})}),p.jsx("div",{className:"col-span-2 md:col-span-3",children:p.jsx("input",{type:"number",placeholder:"H",value:J.targetHeight,onChange:me=>X(re,"targetHeight",me.target.value),className:"w-full py-0.5 px-2 border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded text-sm font-semibold focus:border-teal-500 focus:ring-1 focus:ring-teal-500 outline-none"})}),p.jsx("div",{className:"col-span-2 md:col-span-2",children:p.jsx("input",{type:"number",min:"0",value:J.screenQty,onChange:me=>X(re,"screenQty",Math.max(0,parseInt(me.target.value))||0),className:"w-full py-0.5 px-2 border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded text-sm font-bold text-center focus:border-teal-500 focus:ring-1 focus:ring-teal-500 outline-none"})}),p.jsx("div",{className:"col-span-2 md:col-span-2",children:p.jsxs("select",{value:J.sizingMode,onChange:me=>X(re,"sizingMode",me.target.value),className:"w-full py-0.5 px-1 border border-slate-200 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded text-[10px] focus:border-teal-500 outline-none",children:[p.jsx("option",{value:"closest",children:"Auto"}),p.jsx("option",{value:"up",children:"Up"}),p.jsx("option",{value:"down",children:"Down"})]})}),p.jsxs("div",{className:"col-span-4 md:col-span-1 flex justify-end gap-1 border-t md:border-t-0 pt-2 md:pt-0 mt-1 md:mt-0",children:[p.jsx("button",{onClick:me=>{me.stopPropagation(),pe(re)},className:"p-1 text-slate-400 hover:text-teal-600 dark:hover:text-teal-400",title:"Duplicate",children:p.jsx(tI,{size:12})}),r.screens.length>1&&p.jsx("button",{onClick:me=>{me.stopPropagation(),V(re)},className:"p-1 text-slate-400 hover:text-red-600 dark:hover:text-red-400",title:"Remove",children:p.jsx(vo,{size:12})})]})]},J.id))})]})]})]}),p.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:p.jsxs("details",{className:"group p-4",open:!0,children:[p.jsxs("summary",{className:"flex justify-between items-center cursor-pointer list-none",children:[p.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[p.jsx(ed,{className:"w-4 h-4 text-teal-600"})," Hardware & Cost Breakdown",r.screens.length>1&&p.jsxs("span",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:["(Screen #",r.activeScreenIndex+1," of ",r.screens.length,")"]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-teal-600 text-xs font-bold group-open:hidden",children:"Show Table"}),p.jsx("span",{className:"text-slate-400 text-xs hidden group-open:block",children:"Hide Table"})]})]}),p.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-700",children:[r.screens.length>1&&p.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:r.screens.map((J,re)=>{const me=r.activeScreenIndex===re,we=J.targetWidth&&J.targetHeight?`${J.targetWidth}${J.targetHeight}${S} (${J.screenQty})`:`Screen #${re+1}`;return p.jsx("button",{onClick:()=>ue("activeScreenIndex",re),className:`flex-shrink-0 px-4 py-2 rounded-lg text-xs font-bold transition-all ${me?"bg-teal-600 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("span",{children:["#",re+1]}),p.jsx("span",{className:"text-[10px] opacity-75",children:we})]})},J.id)})}),r.screens[r.activeScreenIndex]&&p.jsx("div",{className:"mb-4 p-3 bg-slate-50 dark:bg-slate-700/30 rounded-lg border border-slate-200 dark:border-slate-600",children:p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Dimensions:"}),p.jsxs("span",{className:"ml-2 font-bold text-slate-800 dark:text-white",children:[r.screens[r.activeScreenIndex].targetWidth||0,"  ",r.screens[r.activeScreenIndex].targetHeight||0," ",S]})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Quantity:"}),p.jsxs("span",{className:"ml-2 font-bold text-teal-600 dark:text-teal-400",children:[r.screens[r.activeScreenIndex].screenQty||0," screens"]})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Sizing:"}),p.jsx("span",{className:"ml-2 font-bold text-slate-800 dark:text-white capitalize",children:r.screens[r.activeScreenIndex].sizingMode})]}),se&&p.jsxs("div",{children:[p.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Final Size:"}),p.jsxs("span",{className:"ml-2 font-bold text-slate-800 dark:text-white",children:[se.finalWidth,"  ",se.finalHeight," m"]})]})]})}),p.jsx(d3,{calculation:se,state:r,updateState:ue,updateExtra:Ee,updateScreenProp:X,inventory:e,getStock:W,overrides:r.screens[r.activeScreenIndex]?.overrides||{},onOverride:_e,editingRow:r.screens[r.activeScreenIndex]?.editingRow,setEditingRow:J=>X(r.activeScreenIndex,"editingRow",J),onClearOverride:Te})]})]})}),p.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:p.jsxs("details",{className:"group p-4",children:[p.jsxs("summary",{className:"flex justify-between items-center cursor-pointer list-none",children:[p.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"Terms & Conditions"}),p.jsx("span",{className:"text-teal-600 text-xs group-open:hidden",children:"Show Details"})]}),p.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-slate-100 dark:border-slate-700",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Price Basis"}),p.jsx("input",{value:r.terms?.price,onChange:J=>a(re=>({...re,terms:{...re.terms,price:J.target.value}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Delivery Weeks"}),p.jsx("input",{type:"number",value:r.terms?.deliveryWeeks,onChange:J=>a(re=>({...re,terms:{...re.terms,deliveryWeeks:J.target.value}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),p.jsxs("div",{className:"col-span-1 md:col-span-2",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 block mb-2",children:"Payment Milestones"}),(r.terms?.payment||[]).map((J,re)=>p.jsxs("div",{className:"flex gap-2 mb-2",children:[p.jsx("input",{value:J.name,onChange:me=>{const we=[...r.terms.payment];we[re].name=me.target.value,a(Oe=>({...Oe,terms:{...Oe.terms,payment:we}}))},className:"flex-1 p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"Milestone Name"}),p.jsx("input",{type:"number",value:J.percent,onChange:me=>{const we=[...r.terms.payment];we[re].percent=Number(me.target.value),a(Oe=>({...Oe,terms:{...Oe.terms,payment:we}}))},className:"w-16 p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"%"}),p.jsx("button",{onClick:()=>{const me=r.terms.payment.filter((we,Oe)=>Oe!==re);a(we=>({...we,terms:{...we.terms,payment:me}}))},className:"text-red-400",children:p.jsx(nI,{size:14})})]},re)),p.jsx("button",{onClick:()=>a(J=>({...J,terms:{...J.terms,payment:[...J.terms.payment||[],{name:"",percent:0}]}})),className:"text-xs text-teal-600 font-bold",children:"+ Add Milestone"})]})]})]})}),p.jsx("div",{className:"h-10"})]}),p.jsxs("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-24",children:[p.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[p.jsxs("div",{className:"p-5 bg-gradient-to-br from-slate-50 to-white dark:from-slate-700 dark:to-slate-800",children:[r.screens.length>1&&A&&p.jsxs("div",{className:"mb-4 pb-4 border-b border-slate-200 dark:border-slate-600",children:[p.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 mb-2",children:"Project Summary"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded",children:[p.jsx("div",{className:"text-[10px] text-blue-600 dark:text-blue-400 font-semibold",children:"Screen Types"}),p.jsx("div",{className:"font-bold text-blue-800 dark:text-blue-300",children:r.screens.length})]}),p.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-2 rounded",children:[p.jsx("div",{className:"text-[10px] text-teal-600 dark:text-teal-400 font-semibold",children:"Total Qty"}),p.jsx("div",{className:"font-bold text-teal-800 dark:text-teal-300",children:A.totalScreenQty})]})]})]}),p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Margin Strategy"}),p.jsxs("select",{value:r.pricingMode||"margin",onChange:J=>{const re=J.target.value;if(ue("pricingMode",re),re!=="margin"&&se){let me=0;re==="screen"?me=se.matrix.sell.unit:re==="sqft"?me=se.matrix.sell.sqft:re==="sqm"&&(me=se.matrix.sell.sqft*10.7639),ue("targetSellPrice",Math.round(me))}},className:"text-xs border-none bg-transparent font-bold text-teal-600 dark:text-teal-400 focus:ring-0 cursor-pointer outline-none",children:[p.jsx("option",{value:"margin",children:"Margin %"}),p.jsx("option",{value:"sqft",children:"Price / Sq.Ft"}),p.jsx("option",{value:"sqm",children:"Price / Sq.Mtr"}),p.jsx("option",{value:"screen",children:"Price / Screen"})]})]}),p.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[p.jsx("input",{type:"number",value:r.pricingMode==="margin"?R:r.targetSellPrice,onChange:J=>{const re=parseFloat(J.target.value)||0;r.pricingMode==="margin"?ue("margin",re):ue("targetSellPrice",re)},className:"w-24 text-center text-xl font-bold p-2 border rounded-lg bg-white dark:bg-slate-600 dark:border-slate-500 shadow-sm focus:ring-2 focus:ring-teal-500/50 outline-none dark:text-white"}),p.jsx("span",{className:"text-lg font-bold text-slate-400",children:r.pricingMode==="margin"?"%":""}),p.jsxs("div",{className:"flex-1 text-right",children:[p.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold",children:r.screens.length>1?"Total Profit":"Est. Profit"}),p.jsx("div",{className:`text-sm font-bold ${(A?A.totalMargin:se?.matrix.margin.total||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:A?He(A.totalMargin,"INR"):se?He(se.matrix.margin.total,"INR"):"-"})]})]}),p.jsx("div",{className:"space-y-3 pt-4 border-t border-slate-100 dark:border-slate-600",children:r.screens.length>1?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex justify-between items-end",children:[p.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"LED Panels (All)"}),p.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:A?He(A.totalLEDSell,"INR"):"-"})]}),p.jsxs("div",{className:"flex justify-between items-end",children:[p.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Services & Extras"}),p.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:A?He(A.totalServicesSell,"INR"):"-"})]}),p.jsxs("details",{className:"group",children:[p.jsx("summary",{className:"text-[10px] text-teal-600 dark:text-teal-400 font-bold uppercase cursor-pointer hover:underline",children:"View Screen Breakdown"}),p.jsx("div",{className:"mt-2 space-y-2 pl-2 border-l-2 border-slate-200 dark:border-slate-600",children:A?.calculations.map((J,re)=>p.jsx("div",{className:"text-xs",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Screen #",re+1,p.jsxs("span",{className:"text-[10px] ml-1",children:["(",r.screens[re].targetWidth,"",r.screens[re].targetHeight,S," ",J.screenQty,")"]})]}),p.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:He(J.totalProjectSell,"INR")})]})},re))})]})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex justify-between items-end",children:[p.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"LED Panel Price"}),p.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:se?He(se.matrix.led.sell*se.screenQty,"INR"):"-"})]}),p.jsxs("div",{className:"flex justify-between items-end",children:[p.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Services & Extras"}),p.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:se?He(se.matrix.sell.total-se.matrix.led.sell*se.screenQty,"INR"):"-"})]}),p.jsxs("div",{className:"flex justify-between items-end pt-2 mt-2 border-t border-dashed border-slate-200 dark:border-slate-600",children:[p.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"Rate / Sq.Ft"}),p.jsx("span",{className:"font-bold text-slate-500 dark:text-slate-400",children:se?He(se.matrix.sell.sqft,"INR"):"-"})]})]})})]}),p.jsxs("div",{className:"bg-slate-900 p-5 text-white",children:[p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsx("span",{className:"text-sm text-slate-400",children:"Grand Total (Ex. GST)"}),r.screens.length>1&&p.jsxs("span",{className:"text-xs text-teal-400 font-bold",children:[A?.totalScreenQty||0," screens"]})]}),p.jsx("div",{className:"flex justify-between items-baseline",children:p.jsx("span",{className:"text-3xl font-bold tracking-tight",children:A?He(A.totalProjectSell,"INR"):se?He(se.totalProjectSell,"INR"):"-"})}),p.jsxs("button",{onClick:()=>m(A?A.totalProjectSell:se?.totalProjectSell),className:"w-full mt-4 py-3 bg-teal-600 hover:bg-teal-500 text-white font-bold rounded-lg shadow-lg shadow-teal-900/20 transition-all flex justify-center items-center gap-2",children:[p.jsx(IC,{size:18})," Save Quote"]})]})]}),p.jsx("div",{className:"bg-slate-900 rounded-xl shadow-lg p-6 text-white overflow-hidden relative min-h-[250px] flex items-center justify-center",children:se?p.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:p.jsx(o3,{cols:se.gridCols,rows:se.gridRows,module:se.moduleType,cabinet:se.cabinetType,unit:S})}):p.jsxs("div",{className:"text-slate-500 flex flex-col items-center",children:[p.jsx(_C,{size:32,className:"mb-2 opacity-50"}),p.jsx("span",{children:"Enter dimensions"})]})}),p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsxs("button",{onClick:()=>Ue(!0),className:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 flex flex-col items-center justify-center gap-1 transition-colors",children:[p.jsx(My,{size:16,className:"text-blue-500"})," ",p.jsx("span",{className:"text-[10px]",children:"BOM"})]}),p.jsxs("button",{onClick:()=>O(!0),className:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 flex flex-col items-center justify-center gap-1 transition-colors",children:[p.jsx(Bf,{size:16})," ",p.jsx("span",{className:"text-[10px]",children:"Print"})]}),p.jsxs("button",{onClick:()=>M(!0),className:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 flex flex-col items-center justify-center gap-1 transition-colors",children:[p.jsx(ed,{size:16,className:"text-teal-500"})," ",p.jsx("span",{className:"text-[10px]",children:"Stock"})]})]})]})]})},f3=()=>{const[s,e]=Vn.useState(null),[t,r]=Vn.useState("quote"),[a,l]=Vn.useState([]),[u,m]=Vn.useState([]),[h,y]=Vn.useState(!1),[b,E]=Vn.useState(Qt.DEFAULTS.EXCHANGE_RATE),w={client:"",project:"",unit:"m",screens:[{id:gd(),screenQty:0,targetWidth:0,targetHeight:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedPSUId:"",selectedProcId:"",sizingMode:"closest",readyId:"",extraComponents:[],overrides:{},editingRow:null,extras:[],commercials:{processor:{val:0,unit:"screen",cost:0,costType:"abs"},installation:{val:0,unit:"sqft",cost:0,costType:"abs"},structure:{val:0,unit:"sqft",cost:0,costType:"abs"}}}],activeScreenIndex:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedPSUId:"",selectedProcId:"",sizingMode:"closest",readyId:"",margin:0,targetSellPrice:0,pricingMode:"margin",commercials:{processor:{val:0,unit:"screen"},installation:{val:0,unit:"sqft"},structure:{val:0,unit:"sqft"}},terms:{price:Qt.DEFAULTS.PRICE_BASIS,deliveryWeeks:Qt.DEFAULTS.DELIVERY_WEEKS,payment:Qt.DEFAULTS.PAYMENT_TERMS},extraComponents:[],extras:[],overrides:{},editingRow:null},[S,q]=Vn.useState(w);Vn.useEffect(()=>{Jw.onAuthStateChanged(e),Jw.signInAnonymously().catch(console.error)},[]),Vn.useEffect(()=>{document.documentElement.classList.toggle("dark",h)},[h]),Vn.useEffect(()=>{if(!s||!Xr)return;const R=Xr.collection("artifacts").doc(li).collection("public").doc("data").collection("inventory").onSnapshot(ae=>l(ae.docs.map(fe=>({id:fe.id,...fe.data()})))),Z=Xr.collection("artifacts").doc(li).collection("public").doc("data").collection("transactions").onSnapshot(ae=>m(ae.docs.map(fe=>({id:fe.id,...fe.data()}))));return()=>{R(),Z()}},[s]);const Y=async R=>{if(!S.client||!S.project)return alert("Please enter Client and Project names.");let Z=null;if(S.screens&&S.screens.length>0){const ae=S.screens.map(fe=>{const se={...S,...fe};return To(se,a,u,b)}).filter(fe=>fe!==null);ae.length>0&&(Z={totalProjectCost:ae.reduce((fe,se)=>fe+se.totalProjectCost,0),totalProjectSell:ae.reduce((fe,se)=>fe+se.totalProjectSell,0),totalLEDSell:ae.reduce((fe,se)=>fe+se.matrix.led.sell*se.screenQty,0),totalServicesSell:ae.reduce((fe,se)=>fe+(se.matrix.sell.total-se.matrix.led.sell*se.screenQty),0),totalMargin:0,totalScreenQty:ae.reduce((fe,se)=>fe+se.screenQty,0),calculations:ae,screenConfigs:S.screens},Z.totalMargin=Z.totalProjectSell-Z.totalProjectCost)}try{await Xr.collection("artifacts").doc(li).collection("public").doc("data").collection("quotes").add({client:S.client,project:S.project,calculatorState:S,finalAmount:R||0,screenCount:S.screens.length,totalScreenQty:Z?.totalScreenQty||0,allScreensData:Z,updatedAt:new Date}),alert("Quote Saved Successfully!")}catch(ae){console.error(ae),alert("Error saving quote.")}},te=(R,Z)=>{const ae={...R.calculatorState};Z&&(ae.client=ae.client+" (Copy)",ae.project=ae.project+" (Copy)"),q(ae),r("quote")};return s?p.jsxs("div",{className:"min-h-screen no-print pb-20 bg-slate-50 dark:bg-slate-900 transition-colors font-sans",children:[p.jsxs("nav",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50 px-4 md:px-6 h-16 flex items-center justify-between shadow-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/30 p-2 rounded-lg",children:p.jsx(dC,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})}),p.jsxs("span",{className:"font-bold text-lg tracking-tight text-slate-900 dark:text-white",children:["ADMIRE ",p.jsx("span",{className:"text-teal-600 dark:text-teal-400 font-medium",children:"SIGN"})]})]}),p.jsxs("div",{className:"flex gap-4 items-center",children:[p.jsxs("div",{className:"hidden md:flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[p.jsx("button",{onClick:()=>r("quote"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-all ${t==="quote"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Calculator"}),p.jsx("button",{onClick:()=>r("inventory"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${t==="inventory"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Components"}),p.jsx("button",{onClick:()=>r("ledger"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${t==="ledger"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Stock"}),p.jsx("button",{onClick:()=>r("saved"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${t==="saved"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Quotes"})]}),p.jsxs("div",{className:"flex items-center gap-2 pl-4 border-l border-slate-200 dark:border-slate-700",children:[p.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 rounded px-2 py-1",title:"Exchange rate for USD items",children:[p.jsx("span",{className:"text-[10px] text-slate-500 font-bold mr-1",children:"$1="}),p.jsx("input",{type:"number",value:b,onChange:R=>E(Number(R.target.value)),className:"w-8 bg-transparent text-xs outline-none font-bold dark:text-white"})]}),p.jsx("button",{onClick:()=>y(!h),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400 transition-colors",children:h?p.jsx(CC,{size:18}):p.jsx(bC,{size:18})})]})]})]}),p.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-16 z-40 flex shadow-sm",children:[p.jsx("button",{onClick:()=>r("quote"),className:`flex-1 py-3 text-xs font-bold text-center border-b-2 transition-colors ${t==="quote"?"border-teal-600 text-teal-600 dark:text-teal-400":"border-transparent text-slate-500 dark:text-slate-400"}`,children:"Calculator"}),p.jsx("button",{onClick:()=>r("inventory"),className:`flex-1 py-3 text-xs font-bold text-center border-b-2 transition-colors ${t==="inventory"?"border-teal-600 text-teal-600 dark:text-teal-400":"border-transparent text-slate-500 dark:text-slate-400"}`,children:"Components"}),p.jsx("button",{onClick:()=>r("ledger"),className:`flex-1 py-3 text-xs font-bold text-center border-b-2 transition-colors ${t==="ledger"?"border-teal-600 text-teal-600 dark:text-teal-400":"border-transparent text-slate-500 dark:text-slate-400"}`,children:"Stock"}),p.jsx("button",{onClick:()=>r("saved"),className:`flex-1 py-3 text-xs font-bold text-center border-b-2 transition-colors ${t==="saved"?"border-teal-600 text-teal-600 dark:text-teal-400":"border-transparent text-slate-500 dark:text-slate-400"}`,children:"Quotes"})]}),p.jsxs("main",{className:"max-w-[1600px] mx-auto p-4 md:p-6",children:[t==="inventory"&&p.jsx(s3,{user:s,transactions:u}),t==="ledger"&&p.jsx(i3,{user:s,inventory:a,transactions:u}),t==="saved"&&p.jsx(l3,{user:s,inventory:a,transactions:u,exchangeRate:b,onLoadQuote:te}),t==="quote"&&p.jsx(h3,{user:s,inventory:a,transactions:u,state:S,setState:q,exchangeRate:b,setExchangeRate:E,onSaveQuote:Y})]}),p.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 lg:hidden shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-40 flex items-center gap-4",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-bold uppercase",children:"Total Estimate"}),p.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:S.project&&He(To(S,a,u,b)?.totalProjectSell||0,"INR")})]}),p.jsx("button",{onClick:()=>document.querySelector("main").scrollIntoView({behavior:"smooth"}),className:"px-6 py-2.5 bg-teal-600 text-white rounded-lg font-bold shadow-lg shadow-teal-600/30",children:"Top"})]})]}):p.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"})})};rC.createRoot(document.getElementById("root")).render(p.jsx(Ut.StrictMode,{children:p.jsx(f3,{})}));

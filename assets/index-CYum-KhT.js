(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function A0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var cy={exports:{}},Vu={};var PE;function YR(){if(PE)return Vu;PE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var p in a)p!=="key"&&(l[p]=a[p])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:u,ref:a!==void 0?a:null,props:l}}return Vu.Fragment=e,Vu.jsx=t,Vu.jsxs=t,Vu}var jE;function WR(){return jE||(jE=1,cy.exports=YR()),cy.exports}var h=WR(),uy={exports:{}},Oe={};var VE;function XR(){if(VE)return Oe;VE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function C(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,J={};function K(V,O,B){this.props=V,this.context=O,this.refs=J,this.updater=B||U}K.prototype.isReactComponent={},K.prototype.setState=function(V,O){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,O,"setState")},K.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function ne(){}ne.prototype=K.prototype;function oe(V,O,B){this.props=V,this.context=O,this.refs=J,this.updater=B||U}var pe=oe.prototype=new ne;pe.constructor=oe,H(pe,K.prototype),pe.isPureReactComponent=!0;var F=Array.isArray;function ie(){}var N={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function D(V,O,B){var te=B.ref;return{$$typeof:s,type:V,key:O,ref:te!==void 0?te:null,props:B}}function w(V,O){return D(V.type,O,V.props)}function k(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function j(V){var O={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(B){return O[B]})}var A=/\/+/g;function Ce(V,O){return typeof V=="object"&&V!==null&&V.key!=null?j(""+V.key):O.toString(36)}function Pe(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ie,ie):(V.status="pending",V.then(function(O){V.status==="pending"&&(V.status="fulfilled",V.value=O)},function(O){V.status==="pending"&&(V.status="rejected",V.reason=O)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Z(V,O,B,te,de){var fe=typeof V;(fe==="undefined"||fe==="boolean")&&(V=null);var _e=!1;if(V===null)_e=!0;else switch(fe){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(V.$$typeof){case s:case e:_e=!0;break;case v:return _e=V._init,Z(_e(V._payload),O,B,te,de)}}if(_e)return de=de(V),_e=te===""?"."+Ce(V,0):te,F(de)?(B="",_e!=null&&(B=_e.replace(A,"$&/")+"/"),Z(de,O,B,"",function(ar){return ar})):de!=null&&(k(de)&&(de=w(de,B+(de.key==null||V&&V.key===de.key?"":(""+de.key).replace(A,"$&/")+"/")+_e)),O.push(de)),1;_e=0;var it=te===""?".":te+":";if(F(V))for(var tt=0;tt<V.length;tt++)te=V[tt],fe=it+Ce(te,tt),_e+=Z(te,O,B,fe,de);else if(tt=C(V),typeof tt=="function")for(V=tt.call(V),tt=0;!(te=V.next()).done;)te=te.value,fe=it+Ce(te,tt++),_e+=Z(te,O,B,fe,de);else if(fe==="object"){if(typeof V.then=="function")return Z(Pe(V),O,B,te,de);throw O=String(V),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.")}return _e}function me(V,O,B){if(V==null)return V;var te=[],de=0;return Z(V,te,"","",function(fe){return O.call(B,fe,de++)}),te}function Ee(V){if(V._status===-1){var O=V._result;O=O(),O.then(function(B){(V._status===0||V._status===-1)&&(V._status=1,V._result=B)},function(B){(V._status===0||V._status===-1)&&(V._status=2,V._result=B)}),V._status===-1&&(V._status=0,V._result=O)}if(V._status===1)return V._result.default;throw V._result}var Ne=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var O=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(O))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Le={map:me,forEach:function(V,O,B){me(V,function(){O.apply(this,arguments)},B)},count:function(V){var O=0;return me(V,function(){O++}),O},toArray:function(V){return me(V,function(O){return O})||[]},only:function(V){if(!k(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Oe.Activity=E,Oe.Children=Le,Oe.Component=K,Oe.Fragment=t,Oe.Profiler=a,Oe.PureComponent=oe,Oe.StrictMode=r,Oe.Suspense=f,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(V){return N.H.useMemoCache(V)}},Oe.cache=function(V){return function(){return V.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(V,O,B){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var te=H({},V.props),de=V.key;if(O!=null)for(fe in O.key!==void 0&&(de=""+O.key),O)!R.call(O,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&O.ref===void 0||(te[fe]=O[fe]);var fe=arguments.length-2;if(fe===1)te.children=B;else if(1<fe){for(var _e=Array(fe),it=0;it<fe;it++)_e[it]=arguments[it+2];te.children=_e}return D(V.type,de,te)},Oe.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Oe.createElement=function(V,O,B){var te,de={},fe=null;if(O!=null)for(te in O.key!==void 0&&(fe=""+O.key),O)R.call(O,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(de[te]=O[te]);var _e=arguments.length-2;if(_e===1)de.children=B;else if(1<_e){for(var it=Array(_e),tt=0;tt<_e;tt++)it[tt]=arguments[tt+2];de.children=it}if(V&&V.defaultProps)for(te in _e=V.defaultProps,_e)de[te]===void 0&&(de[te]=_e[te]);return D(V,fe,de)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(V){return{$$typeof:p,render:V}},Oe.isValidElement=k,Oe.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:Ee}},Oe.memo=function(V,O){return{$$typeof:y,type:V,compare:O===void 0?null:O}},Oe.startTransition=function(V){var O=N.T,B={};N.T=B;try{var te=V(),de=N.S;de!==null&&de(B,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(ie,Ne)}catch(fe){Ne(fe)}finally{O!==null&&B.types!==null&&(O.types=B.types),N.T=O}},Oe.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Oe.use=function(V){return N.H.use(V)},Oe.useActionState=function(V,O,B){return N.H.useActionState(V,O,B)},Oe.useCallback=function(V,O){return N.H.useCallback(V,O)},Oe.useContext=function(V){return N.H.useContext(V)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(V,O){return N.H.useDeferredValue(V,O)},Oe.useEffect=function(V,O){return N.H.useEffect(V,O)},Oe.useEffectEvent=function(V){return N.H.useEffectEvent(V)},Oe.useId=function(){return N.H.useId()},Oe.useImperativeHandle=function(V,O,B){return N.H.useImperativeHandle(V,O,B)},Oe.useInsertionEffect=function(V,O){return N.H.useInsertionEffect(V,O)},Oe.useLayoutEffect=function(V,O){return N.H.useLayoutEffect(V,O)},Oe.useMemo=function(V,O){return N.H.useMemo(V,O)},Oe.useOptimistic=function(V,O){return N.H.useOptimistic(V,O)},Oe.useReducer=function(V,O,B){return N.H.useReducer(V,O,B)},Oe.useRef=function(V){return N.H.useRef(V)},Oe.useState=function(V){return N.H.useState(V)},Oe.useSyncExternalStore=function(V,O,B){return N.H.useSyncExternalStore(V,O,B)},Oe.useTransition=function(){return N.H.useTransition()},Oe.version="19.2.3",Oe}var OE;function N0(){return OE||(OE=1,uy.exports=XR()),uy.exports}var mn=N0();const Pt=A0(mn);var dy={exports:{}},Ou={},hy={exports:{}},fy={};var ME;function JR(){return ME||(ME=1,(function(s){function e(Z,me){var Ee=Z.length;Z.push(me);e:for(;0<Ee;){var Ne=Ee-1>>>1,Le=Z[Ne];if(0<a(Le,me))Z[Ne]=me,Z[Ee]=Le,Ee=Ne;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var me=Z[0],Ee=Z.pop();if(Ee!==me){Z[0]=Ee;e:for(var Ne=0,Le=Z.length,V=Le>>>1;Ne<V;){var O=2*(Ne+1)-1,B=Z[O],te=O+1,de=Z[te];if(0>a(B,Ee))te<Le&&0>a(de,B)?(Z[Ne]=de,Z[te]=Ee,Ne=te):(Z[Ne]=B,Z[O]=Ee,Ne=O);else if(te<Le&&0>a(de,Ee))Z[Ne]=de,Z[te]=Ee,Ne=te;else break e}}return me}function a(Z,me){var Ee=Z.sortIndex-me.sortIndex;return Ee!==0?Ee:Z.id-me.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var u=Date,p=u.now();s.unstable_now=function(){return u.now()-p}}var f=[],y=[],v=1,E=null,T=3,C=!1,U=!1,H=!1,J=!1,K=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function pe(Z){for(var me=t(y);me!==null;){if(me.callback===null)r(y);else if(me.startTime<=Z)r(y),me.sortIndex=me.expirationTime,e(f,me);else break;me=t(y)}}function F(Z){if(H=!1,pe(Z),!U)if(t(f)!==null)U=!0,ie||(ie=!0,j());else{var me=t(y);me!==null&&Pe(F,me.startTime-Z)}}var ie=!1,N=-1,R=5,D=-1;function w(){return J?!0:!(s.unstable_now()-D<R)}function k(){if(J=!1,ie){var Z=s.unstable_now();D=Z;var me=!0;try{e:{U=!1,H&&(H=!1,ne(N),N=-1),C=!0;var Ee=T;try{t:{for(pe(Z),E=t(f);E!==null&&!(E.expirationTime>Z&&w());){var Ne=E.callback;if(typeof Ne=="function"){E.callback=null,T=E.priorityLevel;var Le=Ne(E.expirationTime<=Z);if(Z=s.unstable_now(),typeof Le=="function"){E.callback=Le,pe(Z),me=!0;break t}E===t(f)&&r(f),pe(Z)}else r(f);E=t(f)}if(E!==null)me=!0;else{var V=t(y);V!==null&&Pe(F,V.startTime-Z),me=!1}}break e}finally{E=null,T=Ee,C=!1}me=void 0}}finally{me?j():ie=!1}}}var j;if(typeof oe=="function")j=function(){oe(k)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Ce=A.port2;A.port1.onmessage=k,j=function(){Ce.postMessage(null)}}else j=function(){K(k,0)};function Pe(Z,me){N=K(function(){Z(s.unstable_now())},me)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Z){Z.callback=null},s.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Z?Math.floor(1e3/Z):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(Z){switch(T){case 1:case 2:case 3:var me=3;break;default:me=T}var Ee=T;T=me;try{return Z()}finally{T=Ee}},s.unstable_requestPaint=function(){J=!0},s.unstable_runWithPriority=function(Z,me){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var Ee=T;T=Z;try{return me()}finally{T=Ee}},s.unstable_scheduleCallback=function(Z,me,Ee){var Ne=s.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Ne+Ee:Ne):Ee=Ne,Z){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=Ee+Le,Z={id:v++,callback:me,priorityLevel:Z,startTime:Ee,expirationTime:Le,sortIndex:-1},Ee>Ne?(Z.sortIndex=Ee,e(y,Z),t(f)===null&&Z===t(y)&&(H?(ne(N),N=-1):H=!0,Pe(F,Ee-Ne))):(Z.sortIndex=Le,e(f,Z),U||C||(U=!0,ie||(ie=!0,j()))),Z},s.unstable_shouldYield=w,s.unstable_wrapCallback=function(Z){var me=T;return function(){var Ee=T;T=me;try{return Z.apply(this,arguments)}finally{T=Ee}}}})(fy)),fy}var LE;function ZR(){return LE||(LE=1,hy.exports=JR()),hy.exports}var my={exports:{}},Dn={};var UE;function eC(){if(UE)return Dn;UE=1;var s=N0();function e(f){var y="https://react.dev/errors/"+f;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,y,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:f,containerInfo:y,implementation:v}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(f,y){if(f==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Dn.createPortal=function(f,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(f,y,null,v)},Dn.flushSync=function(f){var y=u.T,v=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=y,r.p=v,r.d.f()}},Dn.preconnect=function(f,y){typeof f=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(f,y))},Dn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Dn.preinit=function(f,y){if(typeof f=="string"&&y&&typeof y.as=="string"){var v=y.as,E=p(v,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?r.d.S(f,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:C}):v==="script"&&r.d.X(f,{crossOrigin:E,integrity:T,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Dn.preinitModule=function(f,y){if(typeof f=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=p(y.as,y.crossOrigin);r.d.M(f,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(f)},Dn.preload=function(f,y){if(typeof f=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,E=p(v,y.crossOrigin);r.d.L(f,v,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Dn.preloadModule=function(f,y){if(typeof f=="string")if(y){var v=p(y.as,y.crossOrigin);r.d.m(f,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(f)},Dn.requestFormReset=function(f){r.d.r(f)},Dn.unstable_batchedUpdates=function(f,y){return f(y)},Dn.useFormState=function(f,y,v){return u.H.useFormState(f,y,v)},Dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Dn.version="19.2.3",Dn}var zE;function tI(){if(zE)return my.exports;zE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),my.exports=eC(),my.exports}var BE;function tC(){if(BE)return Ou;BE=1;var s=ZR(),e=N0(),t=tI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function p(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(l(n)!==n)throw Error(r(188))}function y(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,c=i;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return f(m),n;if(g===c)return f(m),i;g=g.sibling}throw Error(r(188))}if(o.return!==c.return)o=m,c=g;else{for(var b=!1,I=m.child;I;){if(I===o){b=!0,o=m,c=g;break}if(I===c){b=!0,c=m,o=g;break}I=I.sibling}if(!b){for(I=g.child;I;){if(I===o){b=!0,o=g,c=m;break}if(I===c){b=!0,c=g,o=m;break}I=I.sibling}if(!b)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),w=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var A=Symbol.for("react.client.reference");function Ce(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===A?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case K:return"Profiler";case J:return"StrictMode";case F:return"Suspense";case ie:return"SuspenseList";case D:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case U:return"Portal";case oe:return n.displayName||"Context";case ne:return(n._context.displayName||"Context")+".Consumer";case pe:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return i=n.displayName||null,i!==null?i:Ce(n.type)||"Memo";case R:i=n._payload,n=n._init;try{return Ce(n(i))}catch{}}return null}var Pe=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Ne=[],Le=-1;function V(n){return{current:n}}function O(n){0>Le||(n.current=Ne[Le],Ne[Le]=null,Le--)}function B(n,i){Le++,Ne[Le]=n.current,n.current=i}var te=V(null),de=V(null),fe=V(null),_e=V(null);function it(n,i){switch(B(fe,i),B(de,n),B(te,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?nE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=nE(i),n=rE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}O(te),B(te,n)}function tt(){O(te),O(de),O(fe)}function ar(n){n.memoizedState!==null&&B(_e,n);var i=te.current,o=rE(i,n.type);i!==o&&(B(de,n),B(te,o))}function Bt(n){de.current===n&&(O(te),O(de)),_e.current===n&&(O(_e),ku._currentValue=Ee)}var bn,Er;function on(n){if(bn===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);bn=i&&i[1]||"",Er=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bn+n+Er}var Qn=!1;function Cn(n,i){if(!n||Qn)return"";Qn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(ee){var $=ee}Reflect.construct(n,[],ae)}else{try{ae.call()}catch(ee){$=ee}n.call(ae.prototype)}}else{try{throw Error()}catch(ee){$=ee}(ae=n())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(ee){if(ee&&$&&typeof ee.stack=="string")return[ee.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),b=g[0],I=g[1];if(b&&I){var P=b.split(`
`),Q=I.split(`
`);for(m=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;if(c===P.length||m===Q.length)for(c=P.length-1,m=Q.length-1;1<=c&&0<=m&&P[c]!==Q[m];)m--;for(;1<=c&&0<=m;c--,m--)if(P[c]!==Q[m]){if(c!==1||m!==1)do if(c--,m--,0>m||P[c]!==Q[m]){var re=`
`+P[c].replace(" at new "," at ");return n.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",n.displayName)),re}while(1<=c&&0<=m);break}}}finally{Qn=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?on(o):""}function Kn(n,i){switch(n.tag){case 26:case 27:case 5:return on(n.type);case 16:return on("Lazy");case 13:return n.child!==i&&i!==null?on("Suspense Fallback"):on("Suspense");case 19:return on("SuspenseList");case 0:case 15:return Cn(n.type,!1);case 11:return Cn(n.type.render,!1);case 1:return Cn(n.type,!0);case 31:return on("Activity");default:return""}}function $n(n){try{var i="",o=null;do i+=Kn(n,o),o=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var $e=Object.prototype.hasOwnProperty,xt=s.unstable_scheduleCallback,kn=s.unstable_cancelCallback,Y=s.unstable_shouldYield,Ie=s.unstable_requestPaint,qe=s.unstable_now,ce=s.unstable_getCurrentPriorityLevel,kt=s.unstable_ImmediatePriority,vn=s.unstable_UserBlockingPriority,$t=s.unstable_NormalPriority,Da=s.unstable_LowPriority,qs=s.unstable_IdlePriority,Vc=s.log,Lr=s.unstable_setDisableYieldValue,Ln=null,ve=null;function Ve(n){if(typeof Vc=="function"&&Lr(n),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(Ln,n)}catch{}}var Je=Math.clz32?Math.clz32:oh,ss=Math.log,Qo=Math.LN2;function oh(n){return n>>>=0,n===0?32:31-(ss(n)/Qo|0)|0}var is=256,Pa=262144,Yt=4194304;function as(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function os(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var m=0,g=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var I=c&134217727;return I!==0?(c=I&~g,c!==0?m=as(c):(b&=I,b!==0?m=as(b):o||(o=I&~n,o!==0&&(m=as(o))))):(I=c&~g,I!==0?m=as(I):b!==0?m=as(b):o||(o=c&~n,o!==0&&(m=as(o)))),m===0?0:i!==0&&i!==m&&(i&g)===0&&(g=m&-m,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:m}function Ur(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function fp(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lh(){var n=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),n}function ls(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function ja(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function mp(n,i,o,c,m,g){var b=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var I=n.entanglements,P=n.expirationTimes,Q=n.hiddenUpdates;for(o=b&~o;0<o;){var re=31-Je(o),ae=1<<re;I[re]=0,P[re]=-1;var $=Q[re];if($!==null)for(Q[re]=null,re=0;re<$.length;re++){var ee=$[re];ee!==null&&(ee.lane&=-536870913)}o&=~ae}c!==0&&Va(n,c,0),g!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=g&~(b&~i))}function Va(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-Je(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Oc(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-Je(o),m=1<<c;m&i|n[c]&i&&(n[c]|=i),o&=~m}}function Mc(n,i){var o=i&-i;return o=(o&42)!==0?1:Oa(o),(o&(n.suspendedLanes|i))!==0?0:o}function Oa(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Fs(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ch(){var n=me.p;return n!==0?n:(n=window.event,n===void 0?32:SE(n.type))}function zr(n,i){var o=me.p;try{return me.p=n,i()}finally{me.p=o}}var Br=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Br,dn="__reactProps$"+Br,cs="__reactContainer$"+Br,Ko="__reactEvents$"+Br,pp="__reactListeners$"+Br,uh="__reactHandles$"+Br,dh="__reactResources$"+Br,us="__reactMarker$"+Br;function $o(n){delete n[Wt],delete n[dn],delete n[Ko],delete n[pp],delete n[uh]}function ds(n){var i=n[Wt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[cs]||o[Wt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=uE(n);n!==null;){if(o=n[Wt])return o;n=uE(n)}return i}n=o,o=n.parentNode}return null}function Tr(n){if(n=n[Wt]||n[cs]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function or(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function hs(n){var i=n[dh];return i||(i=n[dh]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Xt(n){n[us]=!0}var Lc=new Set,Uc={};function fs(n,i){ms(n,i),ms(n+"Capture",i)}function ms(n,i){for(Uc[n]=i,n=0;n<i.length;n++)Lc.add(i[n])}var zc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bc={},qc={};function hh(n){return $e.call(qc,n)?!0:$e.call(Bc,n)?!1:zc.test(n)?qc[n]=!0:(Bc[n]=!0,!1)}function Yo(n,i,o){if(hh(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function lr(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Jt(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}function hn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ei(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Fc(n,i,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,g=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return m.call(this)},set:function(b){o=""+b,g.call(this,b)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ct(n){if(!n._valueTracker){var i=Ei(n)?"checked":"value";n._valueTracker=Fc(n,i,""+n[i])}}function Ma(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=Ei(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function ps(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var La=/[\n"\\]/g;function Yn(n){return n.replace(La,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Wo(n,i,o,c,m,g,b,I){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),i!=null?b==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+hn(i)):n.value!==""+hn(i)&&(n.value=""+hn(i)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),i!=null?Hc(n,b,hn(i)):o!=null?Hc(n,b,hn(o)):c!=null&&n.removeAttribute("value"),m==null&&g!=null&&(n.defaultChecked=!!g),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?n.name=""+hn(I):n.removeAttribute("name")}function fh(n,i,o,c,m,g,b,I){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){ct(n);return}o=o!=null?""+hn(o):"",i=i!=null?""+hn(i):o,I||i===n.value||(n.value=i),n.defaultValue=i}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=I?n.checked:!!c,n.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),ct(n)}function Hc(n,i,o){i==="number"&&ps(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ti(n,i,o,c){if(n=n.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=i.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&c&&(n[o].defaultSelected=!0)}else{for(o=""+hn(o),i=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,c&&(n[m].defaultSelected=!0);return}i!==null||n[m].disabled||(i=n[m])}i!==null&&(i.selected=!0)}}function mh(n,i,o){if(i!=null&&(i=""+hn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+hn(o):""}function wi(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(r(92));if(Pe(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=hn(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),ct(n)}function Wn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var ph=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gc(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||ph.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Qc(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var m in i)c=i[m],i.hasOwnProperty(m)&&o[m]!==c&&Gc(n,m,c)}else for(var g in i)i.hasOwnProperty(g)&&Gc(n,g,i[g])}function Xo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ii=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(n){return Ii.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function qr(){}var Kc=null;function wr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Si=null,gs=null;function Ua(n){var i=Tr(n);if(i&&(n=i.stateNode)){var o=n[dn]||null;e:switch(n=i.stateNode,i.type){case"input":if(Wo(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Yn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var m=c[dn]||null;if(!m)throw Error(r(90));Wo(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&Ma(c)}break e;case"textarea":mh(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ti(n,!!o.multiple,i,!1)}}}var Zo=!1;function Ai(n,i,o){if(Zo)return n(i,o);Zo=!0;try{var c=n(i);return c}finally{if(Zo=!1,(Si!==null||gs!==null)&&(uf(),Si&&(i=Si,n=gs,gs=Si=null,Ua(i),n)))for(i=0;i<n.length;i++)Ua(n[i])}}function Fr(n,i){var o=n.stateNode;if(o===null)return null;var c=o[dn]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),za=!1;if(Ir)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){za=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{za=!1}var ys=null,$c=null,Ba=null;function Yc(){if(Ba)return Ba;var n,i=$c,o=i.length,c,m="value"in ys?ys.value:ys.textContent,g=m.length;for(n=0;n<o&&i[n]===m[n];n++);var b=o-n;for(c=1;c<=b&&i[o-c]===m[g-c];c++);return Ba=m.slice(n,1<c?1-c:void 0)}function qa(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Hs(){return!0}function Hr(){return!1}function xn(n){function i(o,c,m,g,b){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var I in n)n.hasOwnProperty(I)&&(o=n[I],this[I]=o?o(g):g[I]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Hs:Hr,this.isPropagationStopped=Hr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Hs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Hs)},persist:function(){},isPersistent:Hs}),i}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_s=xn(Gs),Ni=E({},Gs,{view:0,detail:0}),Wc=xn(Ni),Ri,el,bs,tl=E({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ci,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==bs&&(bs&&n.type==="mousemove"?(Ri=n.screenX-bs.screenX,el=n.screenY-bs.screenY):el=Ri=0,bs=n),Ri)},movementY:function(n){return"movementY"in n?n.movementY:el}}),Xc=xn(tl),Fa=E({},tl,{dataTransfer:0}),yh=xn(Fa),_h=E({},Ni,{relatedTarget:0}),Ha=xn(_h),Jc=E({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),bh=xn(Jc),nl=E({},Gs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),vh=xn(nl),xh=E({},Gs,{data:0}),vs=xn(xh),Eh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Th={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ih(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=wh[n])?!!i[n]:!1}function Ci(){return Ih}var Un=E({},Ni,{key:function(n){if(n.key){var i=Eh[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=qa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Th[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ci,charCode:function(n){return n.type==="keypress"?qa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Sh=xn(Un),Ah=E({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qs=xn(Ah),d=E({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ci}),_=xn(d),x=E({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=xn(x),q=E({},tl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),X=xn(q),ge=E({},Gs,{newState:0,oldState:0}),Ue=xn(ge),qt=[9,13,27,32],at=Ir&&"CompositionEvent"in window,It=null;Ir&&"documentMode"in document&&(It=document.documentMode);var Sr=Ir&&"TextEvent"in window&&!It,xs=Ir&&(!at||It&&8<It&&11>=It),Gr=" ",Qr=!1;function Ga(n,i){switch(n){case"keyup":return qt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var sl=!1;function bN(n,i){switch(n){case"compositionend":return rl(i);case"keypress":return i.which!==32?null:(Qr=!0,Gr);case"textInput":return n=i.data,n===Gr&&Qr?null:n;default:return null}}function vN(n,i){if(sl)return n==="compositionend"||!at&&Ga(n,i)?(n=Yc(),Ba=$c=ys=null,sl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return xs&&i.locale!=="ko"?null:i.data;default:return null}}var xN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fb(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!xN[n.type]:i==="textarea"}function mb(n,i,o,c){Si?gs?gs.push(c):gs=[c]:Si=c,i=yf(i,"onChange"),0<i.length&&(o=new _s("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var Zc=null,eu=null;function EN(n){Wx(n,0)}function Nh(n){var i=or(n);if(Ma(i))return n}function pb(n,i){if(n==="change")return i}var gb=!1;if(Ir){var gp;if(Ir){var yp="oninput"in document;if(!yp){var yb=document.createElement("div");yb.setAttribute("oninput","return;"),yp=typeof yb.oninput=="function"}gp=yp}else gp=!1;gb=gp&&(!document.documentMode||9<document.documentMode)}function _b(){Zc&&(Zc.detachEvent("onpropertychange",bb),eu=Zc=null)}function bb(n){if(n.propertyName==="value"&&Nh(eu)){var i=[];mb(i,eu,n,wr(n)),Ai(EN,i)}}function TN(n,i,o){n==="focusin"?(_b(),Zc=i,eu=o,Zc.attachEvent("onpropertychange",bb)):n==="focusout"&&_b()}function wN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nh(eu)}function IN(n,i){if(n==="click")return Nh(i)}function SN(n,i){if(n==="input"||n==="change")return Nh(i)}function AN(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var cr=typeof Object.is=="function"?Object.is:AN;function tu(n,i){if(cr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!$e.call(i,m)||!cr(n[m],i[m]))return!1}return!0}function vb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xb(n,i){var o=vb(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=vb(o)}}function Eb(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Eb(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Tb(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=ps(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=ps(n.document)}return i}function _p(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var NN=Ir&&"documentMode"in document&&11>=document.documentMode,il=null,bp=null,nu=null,vp=!1;function wb(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;vp||il==null||il!==ps(c)||(c=il,"selectionStart"in c&&_p(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),nu&&tu(nu,c)||(nu=c,c=yf(bp,"onSelect"),0<c.length&&(i=new _s("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=il)))}function Qa(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var al={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},xp={},Ib={};Ir&&(Ib=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function Ka(n){if(xp[n])return xp[n];if(!al[n])return n;var i=al[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in Ib)return xp[n]=i[o];return n}var Sb=Ka("animationend"),Ab=Ka("animationiteration"),Nb=Ka("animationstart"),RN=Ka("transitionrun"),CN=Ka("transitionstart"),kN=Ka("transitioncancel"),Rb=Ka("transitionend"),Cb=new Map,Ep="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ep.push("scrollEnd");function Kr(n,i){Cb.set(n,i),fs(i,[n])}var Rh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ar=[],ol=0,Tp=0;function Ch(){for(var n=ol,i=Tp=ol=0;i<n;){var o=Ar[i];Ar[i++]=null;var c=Ar[i];Ar[i++]=null;var m=Ar[i];Ar[i++]=null;var g=Ar[i];if(Ar[i++]=null,c!==null&&m!==null){var b=c.pending;b===null?m.next=m:(m.next=b.next,b.next=m),c.pending=m}g!==0&&kb(o,m,g)}}function kh(n,i,o,c){Ar[ol++]=n,Ar[ol++]=i,Ar[ol++]=o,Ar[ol++]=c,Tp|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function wp(n,i,o,c){return kh(n,i,o,c),Dh(n)}function $a(n,i){return kh(n,null,null,i),Dh(n)}function kb(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var m=!1,g=n.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(m=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,m&&i!==null&&(m=31-Je(o),n=g.hiddenUpdates,c=n[m],c===null?n[m]=[i]:c.push(i),i.lane=o|536870912),g):null}function Dh(n){if(50<wu)throw wu=0,Pg=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ll={};function DN(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(n,i,o,c){return new DN(n,i,o,c)}function Ip(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ks(n,i){var o=n.alternate;return o===null?(o=ur(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Db(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Ph(n,i,o,c,m,g){var b=0;if(c=n,typeof n=="function")Ip(n)&&(b=1);else if(typeof n=="string")b=MR(n,o,te.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case D:return n=ur(31,o,i,m),n.elementType=D,n.lanes=g,n;case H:return Ya(o.children,m,g,i);case J:b=8,m|=24;break;case K:return n=ur(12,o,i,m|2),n.elementType=K,n.lanes=g,n;case F:return n=ur(13,o,i,m),n.elementType=F,n.lanes=g,n;case ie:return n=ur(19,o,i,m),n.elementType=ie,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case oe:b=10;break e;case ne:b=9;break e;case pe:b=11;break e;case N:b=14;break e;case R:b=16,c=null;break e}b=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return i=ur(b,o,i,m),i.elementType=n,i.type=c,i.lanes=g,i}function Ya(n,i,o,c){return n=ur(7,n,c,i),n.lanes=o,n}function Sp(n,i,o){return n=ur(6,n,null,i),n.lanes=o,n}function Pb(n){var i=ur(18,null,null,0);return i.stateNode=n,i}function Ap(n,i,o){return i=ur(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var jb=new WeakMap;function Nr(n,i){if(typeof n=="object"&&n!==null){var o=jb.get(n);return o!==void 0?o:(i={value:n,source:i,stack:$n(i)},jb.set(n,i),i)}return{value:n,source:i,stack:$n(i)}}var cl=[],ul=0,jh=null,ru=0,Rr=[],Cr=0,ki=null,Es=1,Ts="";function $s(n,i){cl[ul++]=ru,cl[ul++]=jh,jh=n,ru=i}function Vb(n,i,o){Rr[Cr++]=Es,Rr[Cr++]=Ts,Rr[Cr++]=ki,ki=n;var c=Es;n=Ts;var m=32-Je(c)-1;c&=~(1<<m),o+=1;var g=32-Je(i)+m;if(30<g){var b=m-m%5;g=(c&(1<<b)-1).toString(32),c>>=b,m-=b,Es=1<<32-Je(i)+m|o<<m|c,Ts=g+n}else Es=1<<g|o<<m|c,Ts=n}function Np(n){n.return!==null&&($s(n,1),Vb(n,1,0))}function Rp(n){for(;n===jh;)jh=cl[--ul],cl[ul]=null,ru=cl[--ul],cl[ul]=null;for(;n===ki;)ki=Rr[--Cr],Rr[Cr]=null,Ts=Rr[--Cr],Rr[Cr]=null,Es=Rr[--Cr],Rr[Cr]=null}function Ob(n,i){Rr[Cr++]=Es,Rr[Cr++]=Ts,Rr[Cr++]=ki,Es=i.id,Ts=i.overflow,ki=n}var En=null,Et=null,Ze=!1,Di=null,kr=!1,Cp=Error(r(519));function Pi(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw su(Nr(i,n)),Cp}function Mb(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[Wt]=n,i[dn]=c,o){case"dialog":Ge("cancel",i),Ge("close",i);break;case"iframe":case"object":case"embed":Ge("load",i);break;case"video":case"audio":for(o=0;o<Su.length;o++)Ge(Su[o],i);break;case"source":Ge("error",i);break;case"img":case"image":case"link":Ge("error",i),Ge("load",i);break;case"details":Ge("toggle",i);break;case"input":Ge("invalid",i),fh(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ge("invalid",i);break;case"textarea":Ge("invalid",i),wi(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||eE(i.textContent,o)?(c.popover!=null&&(Ge("beforetoggle",i),Ge("toggle",i)),c.onScroll!=null&&Ge("scroll",i),c.onScrollEnd!=null&&Ge("scrollend",i),c.onClick!=null&&(i.onclick=qr),i=!0):i=!1,i||Pi(n,!0)}function Lb(n){for(En=n.return;En;)switch(En.tag){case 5:case 31:case 13:kr=!1;return;case 27:case 3:kr=!0;return;default:En=En.return}}function dl(n){if(n!==En)return!1;if(!Ze)return Lb(n),Ze=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||$g(n.type,n.memoizedProps)),o=!o),o&&Et&&Pi(n),Lb(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Et=cE(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Et=cE(n)}else i===27?(i=Et,Ki(n.type)?(n=Zg,Zg=null,Et=n):Et=i):Et=En?Pr(n.stateNode.nextSibling):null;return!0}function Wa(){Et=En=null,Ze=!1}function kp(){var n=Di;return n!==null&&(er===null?er=n:er.push.apply(er,n),Di=null),n}function su(n){Di===null?Di=[n]:Di.push(n)}var Dp=V(null),Xa=null,Ys=null;function ji(n,i,o){B(Dp,i._currentValue),i._currentValue=o}function Ws(n){n._currentValue=Dp.current,O(Dp)}function Pp(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function jp(n,i,o,c){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var g=m.dependencies;if(g!==null){var b=m.child;g=g.firstContext;e:for(;g!==null;){var I=g;g=m;for(var P=0;P<i.length;P++)if(I.context===i[P]){g.lanes|=o,I=g.alternate,I!==null&&(I.lanes|=o),Pp(g.return,o,n),c||(b=null);break e}g=I.next}}else if(m.tag===18){if(b=m.return,b===null)throw Error(r(341));b.lanes|=o,g=b.alternate,g!==null&&(g.lanes|=o),Pp(b,o,n),b=null}else b=m.child;if(b!==null)b.return=m;else for(b=m;b!==null;){if(b===n){b=null;break}if(m=b.sibling,m!==null){m.return=b.return,b=m;break}b=b.return}m=b}}function hl(n,i,o,c){n=null;for(var m=i,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var b=m.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var I=m.type;cr(m.pendingProps.value,b.value)||(n!==null?n.push(I):n=[I])}}else if(m===_e.current){if(b=m.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(ku):n=[ku])}m=m.return}n!==null&&jp(i,n,o,c),i.flags|=262144}function Vh(n){for(n=n.firstContext;n!==null;){if(!cr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ja(n){Xa=n,Ys=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Tn(n){return Ub(Xa,n)}function Oh(n,i){return Xa===null&&Ja(n),Ub(n,i)}function Ub(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Ys===null){if(n===null)throw Error(r(308));Ys=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Ys=Ys.next=i;return o}var PN=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},jN=s.unstable_scheduleCallback,VN=s.unstable_NormalPriority,Zt={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vp(){return{controller:new PN,data:new Map,refCount:0}}function iu(n){n.refCount--,n.refCount===0&&jN(VN,function(){n.controller.abort()})}var au=null,Op=0,fl=0,ml=null;function ON(n,i){if(au===null){var o=au=[];Op=0,fl=Ug(),ml={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Op++,i.then(zb,zb),i}function zb(){if(--Op===0&&au!==null){ml!==null&&(ml.status="fulfilled");var n=au;au=null,fl=0,ml=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function MN(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var Bb=Z.S;Z.S=function(n,i){wx=qe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&ON(n,i),Bb!==null&&Bb(n,i)};var Za=V(null);function Mp(){var n=Za.current;return n!==null?n:_t.pooledCache}function Mh(n,i){i===null?B(Za,Za.current):B(Za,i.pool)}function qb(){var n=Mp();return n===null?null:{parent:Zt._currentValue,pool:n}}var pl=Error(r(460)),Lp=Error(r(474)),Lh=Error(r(542)),Uh={then:function(){}};function Fb(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Hb(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(qr,qr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Qb(n),n;default:if(typeof i.status=="string")i.then(qr,qr);else{if(n=_t,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=c}},function(c){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Qb(n),n}throw to=i,pl}}function eo(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(to=o,pl):o}}var to=null;function Gb(){if(to===null)throw Error(r(459));var n=to;return to=null,n}function Qb(n){if(n===pl||n===Lh)throw Error(r(483))}var gl=null,ou=0;function zh(n){var i=ou;return ou+=1,gl===null&&(gl=[]),Hb(gl,n,i)}function lu(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Bh(n,i){throw i.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Kb(n){function i(L,M){if(n){var G=L.deletions;G===null?(L.deletions=[M],L.flags|=16):G.push(M)}}function o(L,M){if(!n)return null;for(;M!==null;)i(L,M),M=M.sibling;return null}function c(L){for(var M=new Map;L!==null;)L.key!==null?M.set(L.key,L):M.set(L.index,L),L=L.sibling;return M}function m(L,M){return L=Ks(L,M),L.index=0,L.sibling=null,L}function g(L,M,G){return L.index=G,n?(G=L.alternate,G!==null?(G=G.index,G<M?(L.flags|=67108866,M):G):(L.flags|=67108866,M)):(L.flags|=1048576,M)}function b(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function I(L,M,G,se){return M===null||M.tag!==6?(M=Sp(G,L.mode,se),M.return=L,M):(M=m(M,G),M.return=L,M)}function P(L,M,G,se){var Re=G.type;return Re===H?re(L,M,G.props.children,se,G.key):M!==null&&(M.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&eo(Re)===M.type)?(M=m(M,G.props),lu(M,G),M.return=L,M):(M=Ph(G.type,G.key,G.props,null,L.mode,se),lu(M,G),M.return=L,M)}function Q(L,M,G,se){return M===null||M.tag!==4||M.stateNode.containerInfo!==G.containerInfo||M.stateNode.implementation!==G.implementation?(M=Ap(G,L.mode,se),M.return=L,M):(M=m(M,G.children||[]),M.return=L,M)}function re(L,M,G,se,Re){return M===null||M.tag!==7?(M=Ya(G,L.mode,se,Re),M.return=L,M):(M=m(M,G),M.return=L,M)}function ae(L,M,G){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Sp(""+M,L.mode,G),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case C:return G=Ph(M.type,M.key,M.props,null,L.mode,G),lu(G,M),G.return=L,G;case U:return M=Ap(M,L.mode,G),M.return=L,M;case R:return M=eo(M),ae(L,M,G)}if(Pe(M)||j(M))return M=Ya(M,L.mode,G,null),M.return=L,M;if(typeof M.then=="function")return ae(L,zh(M),G);if(M.$$typeof===oe)return ae(L,Oh(L,M),G);Bh(L,M)}return null}function $(L,M,G,se){var Re=M!==null?M.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Re!==null?null:I(L,M,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case C:return G.key===Re?P(L,M,G,se):null;case U:return G.key===Re?Q(L,M,G,se):null;case R:return G=eo(G),$(L,M,G,se)}if(Pe(G)||j(G))return Re!==null?null:re(L,M,G,se,null);if(typeof G.then=="function")return $(L,M,zh(G),se);if(G.$$typeof===oe)return $(L,M,Oh(L,G),se);Bh(L,G)}return null}function ee(L,M,G,se,Re){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return L=L.get(G)||null,I(M,L,""+se,Re);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case C:return L=L.get(se.key===null?G:se.key)||null,P(M,L,se,Re);case U:return L=L.get(se.key===null?G:se.key)||null,Q(M,L,se,Re);case R:return se=eo(se),ee(L,M,G,se,Re)}if(Pe(se)||j(se))return L=L.get(G)||null,re(M,L,se,Re,null);if(typeof se.then=="function")return ee(L,M,G,zh(se),Re);if(se.$$typeof===oe)return ee(L,M,G,Oh(M,se),Re);Bh(M,se)}return null}function Te(L,M,G,se){for(var Re=null,nt=null,Se=M,Fe=M=0,We=null;Se!==null&&Fe<G.length;Fe++){Se.index>Fe?(We=Se,Se=null):We=Se.sibling;var rt=$(L,Se,G[Fe],se);if(rt===null){Se===null&&(Se=We);break}n&&Se&&rt.alternate===null&&i(L,Se),M=g(rt,M,Fe),nt===null?Re=rt:nt.sibling=rt,nt=rt,Se=We}if(Fe===G.length)return o(L,Se),Ze&&$s(L,Fe),Re;if(Se===null){for(;Fe<G.length;Fe++)Se=ae(L,G[Fe],se),Se!==null&&(M=g(Se,M,Fe),nt===null?Re=Se:nt.sibling=Se,nt=Se);return Ze&&$s(L,Fe),Re}for(Se=c(Se);Fe<G.length;Fe++)We=ee(Se,L,Fe,G[Fe],se),We!==null&&(n&&We.alternate!==null&&Se.delete(We.key===null?Fe:We.key),M=g(We,M,Fe),nt===null?Re=We:nt.sibling=We,nt=We);return n&&Se.forEach(function(Ji){return i(L,Ji)}),Ze&&$s(L,Fe),Re}function De(L,M,G,se){if(G==null)throw Error(r(151));for(var Re=null,nt=null,Se=M,Fe=M=0,We=null,rt=G.next();Se!==null&&!rt.done;Fe++,rt=G.next()){Se.index>Fe?(We=Se,Se=null):We=Se.sibling;var Ji=$(L,Se,rt.value,se);if(Ji===null){Se===null&&(Se=We);break}n&&Se&&Ji.alternate===null&&i(L,Se),M=g(Ji,M,Fe),nt===null?Re=Ji:nt.sibling=Ji,nt=Ji,Se=We}if(rt.done)return o(L,Se),Ze&&$s(L,Fe),Re;if(Se===null){for(;!rt.done;Fe++,rt=G.next())rt=ae(L,rt.value,se),rt!==null&&(M=g(rt,M,Fe),nt===null?Re=rt:nt.sibling=rt,nt=rt);return Ze&&$s(L,Fe),Re}for(Se=c(Se);!rt.done;Fe++,rt=G.next())rt=ee(Se,L,Fe,rt.value,se),rt!==null&&(n&&rt.alternate!==null&&Se.delete(rt.key===null?Fe:rt.key),M=g(rt,M,Fe),nt===null?Re=rt:nt.sibling=rt,nt=rt);return n&&Se.forEach(function($R){return i(L,$R)}),Ze&&$s(L,Fe),Re}function yt(L,M,G,se){if(typeof G=="object"&&G!==null&&G.type===H&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case C:e:{for(var Re=G.key;M!==null;){if(M.key===Re){if(Re=G.type,Re===H){if(M.tag===7){o(L,M.sibling),se=m(M,G.props.children),se.return=L,L=se;break e}}else if(M.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&eo(Re)===M.type){o(L,M.sibling),se=m(M,G.props),lu(se,G),se.return=L,L=se;break e}o(L,M);break}else i(L,M);M=M.sibling}G.type===H?(se=Ya(G.props.children,L.mode,se,G.key),se.return=L,L=se):(se=Ph(G.type,G.key,G.props,null,L.mode,se),lu(se,G),se.return=L,L=se)}return b(L);case U:e:{for(Re=G.key;M!==null;){if(M.key===Re)if(M.tag===4&&M.stateNode.containerInfo===G.containerInfo&&M.stateNode.implementation===G.implementation){o(L,M.sibling),se=m(M,G.children||[]),se.return=L,L=se;break e}else{o(L,M);break}else i(L,M);M=M.sibling}se=Ap(G,L.mode,se),se.return=L,L=se}return b(L);case R:return G=eo(G),yt(L,M,G,se)}if(Pe(G))return Te(L,M,G,se);if(j(G)){if(Re=j(G),typeof Re!="function")throw Error(r(150));return G=Re.call(G),De(L,M,G,se)}if(typeof G.then=="function")return yt(L,M,zh(G),se);if(G.$$typeof===oe)return yt(L,M,Oh(L,G),se);Bh(L,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,M!==null&&M.tag===6?(o(L,M.sibling),se=m(M,G),se.return=L,L=se):(o(L,M),se=Sp(G,L.mode,se),se.return=L,L=se),b(L)):o(L,M)}return function(L,M,G,se){try{ou=0;var Re=yt(L,M,G,se);return gl=null,Re}catch(Se){if(Se===pl||Se===Lh)throw Se;var nt=ur(29,Se,null,L.mode);return nt.lanes=se,nt.return=L,nt}}}var no=Kb(!0),$b=Kb(!1),Vi=!1;function Up(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Oi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Mi(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ot&2)!==0){var m=c.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),c.pending=i,i=Dh(n),kb(n,null,o),i}return kh(n,c,i,o),Dh(n)}function cu(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Oc(n,o)}}function Bp(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=b:g=g.next=b,o=o.next}while(o!==null);g===null?m=g=i:g=g.next=i}else m=g=i;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var qp=!1;function uu(){if(qp){var n=ml;if(n!==null)throw n}}function du(n,i,o,c){qp=!1;var m=n.updateQueue;Vi=!1;var g=m.firstBaseUpdate,b=m.lastBaseUpdate,I=m.shared.pending;if(I!==null){m.shared.pending=null;var P=I,Q=P.next;P.next=null,b===null?g=Q:b.next=Q,b=P;var re=n.alternate;re!==null&&(re=re.updateQueue,I=re.lastBaseUpdate,I!==b&&(I===null?re.firstBaseUpdate=Q:I.next=Q,re.lastBaseUpdate=P))}if(g!==null){var ae=m.baseState;b=0,re=Q=P=null,I=g;do{var $=I.lane&-536870913,ee=$!==I.lane;if(ee?(Ye&$)===$:(c&$)===$){$!==0&&$===fl&&(qp=!0),re!==null&&(re=re.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Te=n,De=I;$=i;var yt=o;switch(De.tag){case 1:if(Te=De.payload,typeof Te=="function"){ae=Te.call(yt,ae,$);break e}ae=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=De.payload,$=typeof Te=="function"?Te.call(yt,ae,$):Te,$==null)break e;ae=E({},ae,$);break e;case 2:Vi=!0}}$=I.callback,$!==null&&(n.flags|=64,ee&&(n.flags|=8192),ee=m.callbacks,ee===null?m.callbacks=[$]:ee.push($))}else ee={lane:$,tag:I.tag,payload:I.payload,callback:I.callback,next:null},re===null?(Q=re=ee,P=ae):re=re.next=ee,b|=$;if(I=I.next,I===null){if(I=m.shared.pending,I===null)break;ee=I,I=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);re===null&&(P=ae),m.baseState=P,m.firstBaseUpdate=Q,m.lastBaseUpdate=re,g===null&&(m.shared.lanes=0),qi|=b,n.lanes=b,n.memoizedState=ae}}function Yb(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Wb(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Yb(o[n],i)}var yl=V(null),qh=V(0);function Xb(n,i){n=ii,B(qh,n),B(yl,i),ii=n|i.baseLanes}function Fp(){B(qh,ii),B(yl,yl.current)}function Hp(){ii=qh.current,O(yl),O(qh)}var dr=V(null),Dr=null;function Li(n){var i=n.alternate;B(Ft,Ft.current&1),B(dr,n),Dr===null&&(i===null||yl.current!==null||i.memoizedState!==null)&&(Dr=n)}function Gp(n){B(Ft,Ft.current),B(dr,n),Dr===null&&(Dr=n)}function Jb(n){n.tag===22?(B(Ft,Ft.current),B(dr,n),Dr===null&&(Dr=n)):Ui()}function Ui(){B(Ft,Ft.current),B(dr,dr.current)}function hr(n){O(dr),Dr===n&&(Dr=null),O(Ft)}var Ft=V(0);function Fh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Xg(o)||Jg(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Xs=0,ze=null,pt=null,en=null,Hh=!1,_l=!1,ro=!1,Gh=0,hu=0,bl=null,LN=0;function Ot(){throw Error(r(321))}function Qp(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!cr(n[o],i[o]))return!1;return!0}function Kp(n,i,o,c,m,g){return Xs=g,ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=n===null||n.memoizedState===null?Vv:lg,ro=!1,g=o(c,m),ro=!1,_l&&(g=ev(i,o,c,m)),Zb(n),g}function Zb(n){Z.H=pu;var i=pt!==null&&pt.next!==null;if(Xs=0,en=pt=ze=null,Hh=!1,hu=0,bl=null,i)throw Error(r(300));n===null||tn||(n=n.dependencies,n!==null&&Vh(n)&&(tn=!0))}function ev(n,i,o,c){ze=n;var m=0;do{if(_l&&(bl=null),hu=0,_l=!1,25<=m)throw Error(r(301));if(m+=1,en=pt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Z.H=Ov,g=i(o,c)}while(_l);return g}function UN(){var n=Z.H,i=n.useState()[0];return i=typeof i.then=="function"?fu(i):i,n=n.useState()[0],(pt!==null?pt.memoizedState:null)!==n&&(ze.flags|=1024),i}function $p(){var n=Gh!==0;return Gh=0,n}function Yp(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Wp(n){if(Hh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Hh=!1}Xs=0,en=pt=ze=null,_l=!1,hu=Gh=0,bl=null}function zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?ze.memoizedState=en=n:en=en.next=n,en}function Ht(){if(pt===null){var n=ze.alternate;n=n!==null?n.memoizedState:null}else n=pt.next;var i=en===null?ze.memoizedState:en.next;if(i!==null)en=i,pt=n;else{if(n===null)throw ze.alternate===null?Error(r(467)):Error(r(310));pt=n,n={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},en===null?ze.memoizedState=en=n:en=en.next=n}return en}function Qh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fu(n){var i=hu;return hu+=1,bl===null&&(bl=[]),n=Hb(bl,n,i),i=ze,(en===null?i.memoizedState:en.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?Vv:lg),n}function Kh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return fu(n);if(n.$$typeof===oe)return Tn(n)}throw Error(r(438,String(n)))}function Xp(n){var i=null,o=ze.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=ze.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Qh(),ze.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=w;return i.index++,o}function Js(n,i){return typeof i=="function"?i(n):i}function $h(n){var i=Ht();return Jp(i,pt,n)}function Jp(n,i,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var m=n.baseQueue,g=c.pending;if(g!==null){if(m!==null){var b=m.next;m.next=g.next,g.next=b}i.baseQueue=m=g,c.pending=null}if(g=n.baseState,m===null)n.memoizedState=g;else{i=m.next;var I=b=null,P=null,Q=i,re=!1;do{var ae=Q.lane&-536870913;if(ae!==Q.lane?(Ye&ae)===ae:(Xs&ae)===ae){var $=Q.revertLane;if($===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ae===fl&&(re=!0);else if((Xs&$)===$){Q=Q.next,$===fl&&(re=!0);continue}else ae={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},P===null?(I=P=ae,b=g):P=P.next=ae,ze.lanes|=$,qi|=$;ae=Q.action,ro&&o(g,ae),g=Q.hasEagerState?Q.eagerState:o(g,ae)}else $={lane:ae,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},P===null?(I=P=$,b=g):P=P.next=$,ze.lanes|=ae,qi|=ae;Q=Q.next}while(Q!==null&&Q!==i);if(P===null?b=g:P.next=I,!cr(g,n.memoizedState)&&(tn=!0,re&&(o=ml,o!==null)))throw o;n.memoizedState=g,n.baseState=b,n.baseQueue=P,c.lastRenderedState=g}return m===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Zp(n){var i=Ht(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,m=o.pending,g=i.memoizedState;if(m!==null){o.pending=null;var b=m=m.next;do g=n(g,b.action),b=b.next;while(b!==m);cr(g,i.memoizedState)||(tn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,c]}function tv(n,i,o){var c=ze,m=Ht(),g=Ze;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var b=!cr((pt||m).memoizedState,o);if(b&&(m.memoizedState=o,tn=!0),m=m.queue,ng(sv.bind(null,c,m,n),[n]),m.getSnapshot!==i||b||en!==null&&en.memoizedState.tag&1){if(c.flags|=2048,vl(9,{destroy:void 0},rv.bind(null,c,m,o,i),null),_t===null)throw Error(r(349));g||(Xs&127)!==0||nv(c,i,o)}return o}function nv(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=ze.updateQueue,i===null?(i=Qh(),ze.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function rv(n,i,o,c){i.value=o,i.getSnapshot=c,iv(i)&&av(n)}function sv(n,i,o){return o(function(){iv(i)&&av(n)})}function iv(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!cr(n,o)}catch{return!0}}function av(n){var i=$a(n,2);i!==null&&tr(i,n,2)}function eg(n){var i=zn();if(typeof n=="function"){var o=n;if(n=o(),ro){Ve(!0);try{o()}finally{Ve(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:n},i}function ov(n,i,o,c){return n.baseState=o,Jp(n,pt,typeof c=="function"?c:Js)}function zN(n,i,o,c,m){if(Xh(n))throw Error(r(485));if(n=i.action,n!==null){var g={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};Z.T!==null?o(!0):g.isTransition=!1,c(g),o=i.pending,o===null?(g.next=i.pending=g,lv(i,g)):(g.next=o.next,i.pending=o.next=g)}}function lv(n,i){var o=i.action,c=i.payload,m=n.state;if(i.isTransition){var g=Z.T,b={};Z.T=b;try{var I=o(m,c),P=Z.S;P!==null&&P(b,I),cv(n,i,I)}catch(Q){tg(n,i,Q)}finally{g!==null&&b.types!==null&&(g.types=b.types),Z.T=g}}else try{g=o(m,c),cv(n,i,g)}catch(Q){tg(n,i,Q)}}function cv(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){uv(n,i,c)},function(c){return tg(n,i,c)}):uv(n,i,o)}function uv(n,i,o){i.status="fulfilled",i.value=o,dv(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,lv(n,o)))}function tg(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,dv(i),i=i.next;while(i!==c)}n.action=null}function dv(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function hv(n,i){return i}function fv(n,i){if(Ze){var o=_t.formState;if(o!==null){e:{var c=ze;if(Ze){if(Et){t:{for(var m=Et,g=kr;m.nodeType!==8;){if(!g){m=null;break t}if(m=Pr(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Et=Pr(m.nextSibling),c=m.data==="F!";break e}}Pi(c)}c=!1}c&&(i=o[0])}}return o=zn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hv,lastRenderedState:i},o.queue=c,o=Dv.bind(null,ze,c),c.dispatch=o,c=eg(!1),g=og.bind(null,ze,!1,c.queue),c=zn(),m={state:i,dispatch:null,action:n,pending:null},c.queue=m,o=zN.bind(null,ze,m,g,o),m.dispatch=o,c.memoizedState=n,[i,o,!1]}function mv(n){var i=Ht();return pv(i,pt,n)}function pv(n,i,o){if(i=Jp(n,i,hv)[0],n=$h(Js)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=fu(i)}catch(b){throw b===pl?Lh:b}else c=i;i=Ht();var m=i.queue,g=m.dispatch;return o!==i.memoizedState&&(ze.flags|=2048,vl(9,{destroy:void 0},BN.bind(null,m,o),null)),[c,g,n]}function BN(n,i){n.action=i}function gv(n){var i=Ht(),o=pt;if(o!==null)return pv(i,o,n);Ht(),i=i.memoizedState,o=Ht();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function vl(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=ze.updateQueue,i===null&&(i=Qh(),ze.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function yv(){return Ht().memoizedState}function Yh(n,i,o,c){var m=zn();ze.flags|=n,m.memoizedState=vl(1|i,{destroy:void 0},o,c===void 0?null:c)}function Wh(n,i,o,c){var m=Ht();c=c===void 0?null:c;var g=m.memoizedState.inst;pt!==null&&c!==null&&Qp(c,pt.memoizedState.deps)?m.memoizedState=vl(i,g,o,c):(ze.flags|=n,m.memoizedState=vl(1|i,g,o,c))}function _v(n,i){Yh(8390656,8,n,i)}function ng(n,i){Wh(2048,8,n,i)}function qN(n){ze.flags|=4;var i=ze.updateQueue;if(i===null)i=Qh(),ze.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function bv(n){var i=Ht().memoizedState;return qN({ref:i,nextImpl:n}),function(){if((ot&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function vv(n,i){return Wh(4,2,n,i)}function xv(n,i){return Wh(4,4,n,i)}function Ev(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Tv(n,i,o){o=o!=null?o.concat([n]):null,Wh(4,4,Ev.bind(null,i,n),o)}function rg(){}function wv(n,i){var o=Ht();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Qp(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function Iv(n,i){var o=Ht();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Qp(i,c[1]))return c[0];if(c=n(),ro){Ve(!0);try{n()}finally{Ve(!1)}}return o.memoizedState=[c,i],c}function sg(n,i,o){return o===void 0||(Xs&1073741824)!==0&&(Ye&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=Sx(),ze.lanes|=n,qi|=n,o)}function Sv(n,i,o,c){return cr(o,i)?o:yl.current!==null?(n=sg(n,o,c),cr(n,i)||(tn=!0),n):(Xs&42)===0||(Xs&1073741824)!==0&&(Ye&261930)===0?(tn=!0,n.memoizedState=o):(n=Sx(),ze.lanes|=n,qi|=n,i)}function Av(n,i,o,c,m){var g=me.p;me.p=g!==0&&8>g?g:8;var b=Z.T,I={};Z.T=I,og(n,!1,i,o);try{var P=m(),Q=Z.S;if(Q!==null&&Q(I,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var re=MN(P,c);mu(n,i,re,pr(n))}else mu(n,i,c,pr(n))}catch(ae){mu(n,i,{then:function(){},status:"rejected",reason:ae},pr())}finally{me.p=g,b!==null&&I.types!==null&&(b.types=I.types),Z.T=b}}function FN(){}function ig(n,i,o,c){if(n.tag!==5)throw Error(r(476));var m=Nv(n).queue;Av(n,m,i,Ee,o===null?FN:function(){return Rv(n),o(c)})}function Nv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:Ee},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Rv(n){var i=Nv(n);i.next===null&&(i=n.alternate.memoizedState),mu(n,i.next.queue,{},pr())}function ag(){return Tn(ku)}function Cv(){return Ht().memoizedState}function kv(){return Ht().memoizedState}function HN(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=pr();n=Oi(o);var c=Mi(i,n,o);c!==null&&(tr(c,i,o),cu(c,i,o)),i={cache:Vp()},n.payload=i;return}i=i.return}}function GN(n,i,o){var c=pr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Xh(n)?Pv(i,o):(o=wp(n,i,o,c),o!==null&&(tr(o,n,c),jv(o,i,c)))}function Dv(n,i,o){var c=pr();mu(n,i,o,c)}function mu(n,i,o,c){var m={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xh(n))Pv(i,m);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var b=i.lastRenderedState,I=g(b,o);if(m.hasEagerState=!0,m.eagerState=I,cr(I,b))return kh(n,i,m,0),_t===null&&Ch(),!1}catch{}if(o=wp(n,i,m,c),o!==null)return tr(o,n,c),jv(o,i,c),!0}return!1}function og(n,i,o,c){if(c={lane:2,revertLane:Ug(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Xh(n)){if(i)throw Error(r(479))}else i=wp(n,o,c,2),i!==null&&tr(i,n,2)}function Xh(n){var i=n.alternate;return n===ze||i!==null&&i===ze}function Pv(n,i){_l=Hh=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function jv(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Oc(n,o)}}var pu={readContext:Tn,use:Kh,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};pu.useEffectEvent=Ot;var Vv={readContext:Tn,use:Kh,useCallback:function(n,i){return zn().memoizedState=[n,i===void 0?null:i],n},useContext:Tn,useEffect:_v,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Yh(4194308,4,Ev.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Yh(4194308,4,n,i)},useInsertionEffect:function(n,i){Yh(4,2,n,i)},useMemo:function(n,i){var o=zn();i=i===void 0?null:i;var c=n();if(ro){Ve(!0);try{n()}finally{Ve(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=zn();if(o!==void 0){var m=o(i);if(ro){Ve(!0);try{o(i)}finally{Ve(!1)}}}else m=i;return c.memoizedState=c.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},c.queue=n,n=n.dispatch=GN.bind(null,ze,n),[c.memoizedState,n]},useRef:function(n){var i=zn();return n={current:n},i.memoizedState=n},useState:function(n){n=eg(n);var i=n.queue,o=Dv.bind(null,ze,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:rg,useDeferredValue:function(n,i){var o=zn();return sg(o,n,i)},useTransition:function(){var n=eg(!1);return n=Av.bind(null,ze,n.queue,!0,!1),zn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=ze,m=zn();if(Ze){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),_t===null)throw Error(r(349));(Ye&127)!==0||nv(c,i,o)}m.memoizedState=o;var g={value:o,getSnapshot:i};return m.queue=g,_v(sv.bind(null,c,g,n),[n]),c.flags|=2048,vl(9,{destroy:void 0},rv.bind(null,c,g,o,i),null),o},useId:function(){var n=zn(),i=_t.identifierPrefix;if(Ze){var o=Ts,c=Es;o=(c&~(1<<32-Je(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Gh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=LN++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:ag,useFormState:fv,useActionState:fv,useOptimistic:function(n){var i=zn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=og.bind(null,ze,!0,o),o.dispatch=i,[n,i]},useMemoCache:Xp,useCacheRefresh:function(){return zn().memoizedState=HN.bind(null,ze)},useEffectEvent:function(n){var i=zn(),o={impl:n};return i.memoizedState=o,function(){if((ot&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},lg={readContext:Tn,use:Kh,useCallback:wv,useContext:Tn,useEffect:ng,useImperativeHandle:Tv,useInsertionEffect:vv,useLayoutEffect:xv,useMemo:Iv,useReducer:$h,useRef:yv,useState:function(){return $h(Js)},useDebugValue:rg,useDeferredValue:function(n,i){var o=Ht();return Sv(o,pt.memoizedState,n,i)},useTransition:function(){var n=$h(Js)[0],i=Ht().memoizedState;return[typeof n=="boolean"?n:fu(n),i]},useSyncExternalStore:tv,useId:Cv,useHostTransitionStatus:ag,useFormState:mv,useActionState:mv,useOptimistic:function(n,i){var o=Ht();return ov(o,pt,n,i)},useMemoCache:Xp,useCacheRefresh:kv};lg.useEffectEvent=bv;var Ov={readContext:Tn,use:Kh,useCallback:wv,useContext:Tn,useEffect:ng,useImperativeHandle:Tv,useInsertionEffect:vv,useLayoutEffect:xv,useMemo:Iv,useReducer:Zp,useRef:yv,useState:function(){return Zp(Js)},useDebugValue:rg,useDeferredValue:function(n,i){var o=Ht();return pt===null?sg(o,n,i):Sv(o,pt.memoizedState,n,i)},useTransition:function(){var n=Zp(Js)[0],i=Ht().memoizedState;return[typeof n=="boolean"?n:fu(n),i]},useSyncExternalStore:tv,useId:Cv,useHostTransitionStatus:ag,useFormState:gv,useActionState:gv,useOptimistic:function(n,i){var o=Ht();return pt!==null?ov(o,pt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Xp,useCacheRefresh:kv};Ov.useEffectEvent=bv;function cg(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:E({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var ug={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=pr(),m=Oi(c);m.payload=i,o!=null&&(m.callback=o),i=Mi(n,m,c),i!==null&&(tr(i,n,c),cu(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=pr(),m=Oi(c);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=Mi(n,m,c),i!==null&&(tr(i,n,c),cu(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=pr(),c=Oi(o);c.tag=2,i!=null&&(c.callback=i),i=Mi(n,c,o),i!==null&&(tr(i,n,o),cu(i,n,o))}};function Mv(n,i,o,c,m,g,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,b):i.prototype&&i.prototype.isPureReactComponent?!tu(o,c)||!tu(m,g):!0}function Lv(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&ug.enqueueReplaceState(i,i.state,null)}function so(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=E({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function Uv(n){Rh(n)}function zv(n){console.error(n)}function Bv(n){Rh(n)}function Jh(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function qv(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function dg(n,i,o){return o=Oi(o),o.tag=3,o.payload={element:null},o.callback=function(){Jh(n,i)},o}function Fv(n){return n=Oi(n),n.tag=3,n}function Hv(n,i,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;n.payload=function(){return m(g)},n.callback=function(){qv(i,o,c)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){qv(i,o,c),typeof m!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function QN(n,i,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&hl(i,o,m,!0),o=dr.current,o!==null){switch(o.tag){case 31:case 13:return Dr===null?df():o.alternate===null&&Mt===0&&(Mt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===Uh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),Og(n,c,m)),!1;case 22:return o.flags|=65536,c===Uh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),Og(n,c,m)),!1}throw Error(r(435,o.tag))}return Og(n,c,m),df(),!1}if(Ze)return i=dr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,c!==Cp&&(n=Error(r(422),{cause:c}),su(Nr(n,o)))):(c!==Cp&&(i=Error(r(423),{cause:c}),su(Nr(i,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,c=Nr(c,o),m=dg(n.stateNode,c,m),Bp(n,m),Mt!==4&&(Mt=2)),!1;var g=Error(r(520),{cause:c});if(g=Nr(g,o),Tu===null?Tu=[g]:Tu.push(g),Mt!==4&&(Mt=2),i===null)return!0;c=Nr(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=dg(o.stateNode,c,n),Bp(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Fi===null||!Fi.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=Fv(m),Hv(m,n,o,c),Bp(o,m),!1}o=o.return}while(o!==null);return!1}var hg=Error(r(461)),tn=!1;function wn(n,i,o,c){i.child=n===null?$b(i,null,o,c):no(i,n.child,o,c)}function Gv(n,i,o,c,m){o=o.render;var g=i.ref;if("ref"in c){var b={};for(var I in c)I!=="ref"&&(b[I]=c[I])}else b=c;return Ja(i),c=Kp(n,i,o,b,g,m),I=$p(),n!==null&&!tn?(Yp(n,i,m),Zs(n,i,m)):(Ze&&I&&Np(i),i.flags|=1,wn(n,i,c,m),i.child)}function Qv(n,i,o,c,m){if(n===null){var g=o.type;return typeof g=="function"&&!Ip(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,Kv(n,i,g,c,m)):(n=Ph(o.type,null,c,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!vg(n,m)){var b=g.memoizedProps;if(o=o.compare,o=o!==null?o:tu,o(b,c)&&n.ref===i.ref)return Zs(n,i,m)}return i.flags|=1,n=Ks(g,c),n.ref=i.ref,n.return=i,i.child=n}function Kv(n,i,o,c,m){if(n!==null){var g=n.memoizedProps;if(tu(g,c)&&n.ref===i.ref)if(tn=!1,i.pendingProps=c=g,vg(n,m))(n.flags&131072)!==0&&(tn=!0);else return i.lanes=n.lanes,Zs(n,i,m)}return fg(n,i,o,c,m)}function $v(n,i,o,c){var m=c.children,g=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,n!==null){for(c=i.child=n.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~g}else c=0,i.child=null;return Yv(n,i,g,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Mh(i,g!==null?g.cachePool:null),g!==null?Xb(i,g):Fp(),Jb(i);else return c=i.lanes=536870912,Yv(n,i,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(Mh(i,g.cachePool),Xb(i,g),Ui(),i.memoizedState=null):(n!==null&&Mh(i,null),Fp(),Ui());return wn(n,i,m,o),i.child}function gu(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Yv(n,i,o,c,m){var g=Mp();return g=g===null?null:{parent:Zt._currentValue,pool:g},i.memoizedState={baseLanes:o,cachePool:g},n!==null&&Mh(i,null),Fp(),Jb(i),n!==null&&hl(n,i,c,!0),i.childLanes=m,null}function Zh(n,i){return i=tf({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Wv(n,i,o){return no(i,n.child,null,o),n=Zh(i,i.pendingProps),n.flags|=2,hr(i),i.memoizedState=null,n}function KN(n,i,o){var c=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Ze){if(c.mode==="hidden")return n=Zh(i,c),i.lanes=536870912,gu(null,n);if(Gp(i),(n=Et)?(n=lE(n,kr),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:ki!==null?{id:Es,overflow:Ts}:null,retryLane:536870912,hydrationErrors:null},o=Pb(n),o.return=i,i.child=o,En=i,Et=null)):n=null,n===null)throw Pi(i);return i.lanes=536870912,null}return Zh(i,c)}var g=n.memoizedState;if(g!==null){var b=g.dehydrated;if(Gp(i),m)if(i.flags&256)i.flags&=-257,i=Wv(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(tn||hl(n,i,o,!1),m=(o&n.childLanes)!==0,tn||m){if(c=_t,c!==null&&(b=Mc(c,o),b!==0&&b!==g.retryLane))throw g.retryLane=b,$a(n,b),tr(c,n,b),hg;df(),i=Wv(n,i,o)}else n=g.treeContext,Et=Pr(b.nextSibling),En=i,Ze=!0,Di=null,kr=!1,n!==null&&Ob(i,n),i=Zh(i,c),i.flags|=4096;return i}return n=Ks(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function ef(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function fg(n,i,o,c,m){return Ja(i),o=Kp(n,i,o,c,void 0,m),c=$p(),n!==null&&!tn?(Yp(n,i,m),Zs(n,i,m)):(Ze&&c&&Np(i),i.flags|=1,wn(n,i,o,m),i.child)}function Xv(n,i,o,c,m,g){return Ja(i),i.updateQueue=null,o=ev(i,c,o,m),Zb(n),c=$p(),n!==null&&!tn?(Yp(n,i,g),Zs(n,i,g)):(Ze&&c&&Np(i),i.flags|=1,wn(n,i,o,g),i.child)}function Jv(n,i,o,c,m){if(Ja(i),i.stateNode===null){var g=ll,b=o.contextType;typeof b=="object"&&b!==null&&(g=Tn(b)),g=new o(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ug,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},Up(i),b=o.contextType,g.context=typeof b=="object"&&b!==null?Tn(b):ll,g.state=i.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(cg(i,o,b,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&ug.enqueueReplaceState(g,g.state,null),du(i,c,g,m),uu(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){g=i.stateNode;var I=i.memoizedProps,P=so(o,I);g.props=P;var Q=g.context,re=o.contextType;b=ll,typeof re=="object"&&re!==null&&(b=Tn(re));var ae=o.getDerivedStateFromProps;re=typeof ae=="function"||typeof g.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,re||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(I||Q!==b)&&Lv(i,g,c,b),Vi=!1;var $=i.memoizedState;g.state=$,du(i,c,g,m),uu(),Q=i.memoizedState,I||$!==Q||Vi?(typeof ae=="function"&&(cg(i,o,ae,c),Q=i.memoizedState),(P=Vi||Mv(i,o,P,c,$,Q,b))?(re||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=Q),g.props=c,g.state=Q,g.context=b,c=P):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,zp(n,i),b=i.memoizedProps,re=so(o,b),g.props=re,ae=i.pendingProps,$=g.context,Q=o.contextType,P=ll,typeof Q=="object"&&Q!==null&&(P=Tn(Q)),I=o.getDerivedStateFromProps,(Q=typeof I=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ae||$!==P)&&Lv(i,g,c,P),Vi=!1,$=i.memoizedState,g.state=$,du(i,c,g,m),uu();var ee=i.memoizedState;b!==ae||$!==ee||Vi||n!==null&&n.dependencies!==null&&Vh(n.dependencies)?(typeof I=="function"&&(cg(i,o,I,c),ee=i.memoizedState),(re=Vi||Mv(i,o,re,c,$,ee,P)||n!==null&&n.dependencies!==null&&Vh(n.dependencies))?(Q||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,ee,P),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,ee,P)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ee),g.props=c,g.state=ee,g.context=P,c=re):(typeof g.componentDidUpdate!="function"||b===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),c=!1)}return g=c,ef(n,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&c?(i.child=no(i,n.child,null,m),i.child=no(i,null,o,m)):wn(n,i,o,m),i.memoizedState=g.state,n=i.child):n=Zs(n,i,m),n}function Zv(n,i,o,c){return Wa(),i.flags|=256,wn(n,i,o,c),i.child}var mg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pg(n){return{baseLanes:n,cachePool:qb()}}function gg(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=mr),n}function ex(n,i,o){var c=i.pendingProps,m=!1,g=(i.flags&128)!==0,b;if((b=g)||(b=n!==null&&n.memoizedState===null?!1:(Ft.current&2)!==0),b&&(m=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ze){if(m?Li(i):Ui(),(n=Et)?(n=lE(n,kr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:ki!==null?{id:Es,overflow:Ts}:null,retryLane:536870912,hydrationErrors:null},o=Pb(n),o.return=i,i.child=o,En=i,Et=null)):n=null,n===null)throw Pi(i);return Jg(n)?i.lanes=32:i.lanes=536870912,null}var I=c.children;return c=c.fallback,m?(Ui(),m=i.mode,I=tf({mode:"hidden",children:I},m),c=Ya(c,m,o,null),I.return=i,c.return=i,I.sibling=c,i.child=I,c=i.child,c.memoizedState=pg(o),c.childLanes=gg(n,b,o),i.memoizedState=mg,gu(null,c)):(Li(i),yg(i,I))}var P=n.memoizedState;if(P!==null&&(I=P.dehydrated,I!==null)){if(g)i.flags&256?(Li(i),i.flags&=-257,i=_g(n,i,o)):i.memoizedState!==null?(Ui(),i.child=n.child,i.flags|=128,i=null):(Ui(),I=c.fallback,m=i.mode,c=tf({mode:"visible",children:c.children},m),I=Ya(I,m,o,null),I.flags|=2,c.return=i,I.return=i,c.sibling=I,i.child=c,no(i,n.child,null,o),c=i.child,c.memoizedState=pg(o),c.childLanes=gg(n,b,o),i.memoizedState=mg,i=gu(null,c));else if(Li(i),Jg(I)){if(b=I.nextSibling&&I.nextSibling.dataset,b)var Q=b.dgst;b=Q,c=Error(r(419)),c.stack="",c.digest=b,su({value:c,source:null,stack:null}),i=_g(n,i,o)}else if(tn||hl(n,i,o,!1),b=(o&n.childLanes)!==0,tn||b){if(b=_t,b!==null&&(c=Mc(b,o),c!==0&&c!==P.retryLane))throw P.retryLane=c,$a(n,c),tr(b,n,c),hg;Xg(I)||df(),i=_g(n,i,o)}else Xg(I)?(i.flags|=192,i.child=n.child,i=null):(n=P.treeContext,Et=Pr(I.nextSibling),En=i,Ze=!0,Di=null,kr=!1,n!==null&&Ob(i,n),i=yg(i,c.children),i.flags|=4096);return i}return m?(Ui(),I=c.fallback,m=i.mode,P=n.child,Q=P.sibling,c=Ks(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&65011712,Q!==null?I=Ks(Q,I):(I=Ya(I,m,o,null),I.flags|=2),I.return=i,c.return=i,c.sibling=I,i.child=c,gu(null,c),c=i.child,I=n.child.memoizedState,I===null?I=pg(o):(m=I.cachePool,m!==null?(P=Zt._currentValue,m=m.parent!==P?{parent:P,pool:P}:m):m=qb(),I={baseLanes:I.baseLanes|o,cachePool:m}),c.memoizedState=I,c.childLanes=gg(n,b,o),i.memoizedState=mg,gu(n.child,c)):(Li(i),o=n.child,n=o.sibling,o=Ks(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(b=i.deletions,b===null?(i.deletions=[n],i.flags|=16):b.push(n)),i.child=o,i.memoizedState=null,o)}function yg(n,i){return i=tf({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function tf(n,i){return n=ur(22,n,null,i),n.lanes=0,n}function _g(n,i,o){return no(i,n.child,null,o),n=yg(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function tx(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Pp(n.return,i,o)}function bg(n,i,o,c,m,g){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m,treeForkCount:g}:(b.isBackwards=i,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=o,b.tailMode=m,b.treeForkCount=g)}function nx(n,i,o){var c=i.pendingProps,m=c.revealOrder,g=c.tail;c=c.children;var b=Ft.current,I=(b&2)!==0;if(I?(b=b&1|2,i.flags|=128):b&=1,B(Ft,b),wn(n,i,c,o),c=Ze?ru:0,!I&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tx(n,o,i);else if(n.tag===19)tx(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)n=o.alternate,n!==null&&Fh(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),bg(i,!1,m,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&Fh(n)===null){i.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}bg(i,!0,o,null,g,c);break;case"together":bg(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Zs(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),qi|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(hl(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=Ks(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Ks(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function vg(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Vh(n)))}function $N(n,i,o){switch(i.tag){case 3:it(i,i.stateNode.containerInfo),ji(i,Zt,n.memoizedState.cache),Wa();break;case 27:case 5:ar(i);break;case 4:it(i,i.stateNode.containerInfo);break;case 10:ji(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Gp(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Li(i),i.flags|=128,null):(o&i.child.childLanes)!==0?ex(n,i,o):(Li(i),n=Zs(n,i,o),n!==null?n.sibling:null);Li(i);break;case 19:var m=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(hl(n,i,o,!1),c=(o&i.childLanes)!==0),m){if(c)return nx(n,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),B(Ft,Ft.current),c)break;return null;case 22:return i.lanes=0,$v(n,i,o,i.pendingProps);case 24:ji(i,Zt,n.memoizedState.cache)}return Zs(n,i,o)}function rx(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)tn=!0;else{if(!vg(n,o)&&(i.flags&128)===0)return tn=!1,$N(n,i,o);tn=(n.flags&131072)!==0}else tn=!1,Ze&&(i.flags&1048576)!==0&&Vb(i,ru,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=eo(i.elementType),i.type=n,typeof n=="function")Ip(n)?(c=so(n,c),i.tag=1,i=Jv(null,i,n,c,o)):(i.tag=0,i=fg(null,i,n,c,o));else{if(n!=null){var m=n.$$typeof;if(m===pe){i.tag=11,i=Gv(null,i,n,c,o);break e}else if(m===N){i.tag=14,i=Qv(null,i,n,c,o);break e}}throw i=Ce(n)||n,Error(r(306,i,""))}}return i;case 0:return fg(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,m=so(c,i.pendingProps),Jv(n,i,c,m,o);case 3:e:{if(it(i,i.stateNode.containerInfo),n===null)throw Error(r(387));c=i.pendingProps;var g=i.memoizedState;m=g.element,zp(n,i),du(i,c,null,o);var b=i.memoizedState;if(c=b.cache,ji(i,Zt,c),c!==g.cache&&jp(i,[Zt],o,!0),uu(),c=b.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Zv(n,i,c,o);break e}else if(c!==m){m=Nr(Error(r(424)),i),su(m),i=Zv(n,i,c,o);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Et=Pr(n.firstChild),En=i,Ze=!0,Di=null,kr=!0,o=$b(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Wa(),c===m){i=Zs(n,i,o);break e}wn(n,i,c,o)}i=i.child}return i;case 26:return ef(n,i),n===null?(o=mE(i.type,null,i.pendingProps,null))?i.memoizedState=o:Ze||(o=i.type,n=i.pendingProps,c=_f(fe.current).createElement(o),c[Wt]=i,c[dn]=n,In(c,o,n),Xt(c),i.stateNode=c):i.memoizedState=mE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ar(i),n===null&&Ze&&(c=i.stateNode=dE(i.type,i.pendingProps,fe.current),En=i,kr=!0,m=Et,Ki(i.type)?(Zg=m,Et=Pr(c.firstChild)):Et=m),wn(n,i,i.pendingProps.children,o),ef(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ze&&((m=c=Et)&&(c=wR(c,i.type,i.pendingProps,kr),c!==null?(i.stateNode=c,En=i,Et=Pr(c.firstChild),kr=!1,m=!0):m=!1),m||Pi(i)),ar(i),m=i.type,g=i.pendingProps,b=n!==null?n.memoizedProps:null,c=g.children,$g(m,g)?c=null:b!==null&&$g(m,b)&&(i.flags|=32),i.memoizedState!==null&&(m=Kp(n,i,UN,null,null,o),ku._currentValue=m),ef(n,i),wn(n,i,c,o),i.child;case 6:return n===null&&Ze&&((n=o=Et)&&(o=IR(o,i.pendingProps,kr),o!==null?(i.stateNode=o,En=i,Et=null,n=!0):n=!1),n||Pi(i)),null;case 13:return ex(n,i,o);case 4:return it(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=no(i,null,c,o):wn(n,i,c,o),i.child;case 11:return Gv(n,i,i.type,i.pendingProps,o);case 7:return wn(n,i,i.pendingProps,o),i.child;case 8:return wn(n,i,i.pendingProps.children,o),i.child;case 12:return wn(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,ji(i,i.type,c.value),wn(n,i,c.children,o),i.child;case 9:return m=i.type._context,c=i.pendingProps.children,Ja(i),m=Tn(m),c=c(m),i.flags|=1,wn(n,i,c,o),i.child;case 14:return Qv(n,i,i.type,i.pendingProps,o);case 15:return Kv(n,i,i.type,i.pendingProps,o);case 19:return nx(n,i,o);case 31:return KN(n,i,o);case 22:return $v(n,i,o,i.pendingProps);case 24:return Ja(i),c=Tn(Zt),n===null?(m=Mp(),m===null&&(m=_t,g=Vp(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),i.memoizedState={parent:c,cache:m},Up(i),ji(i,Zt,m)):((n.lanes&o)!==0&&(zp(n,i),du(i,null,null,o),uu()),m=n.memoizedState,g=i.memoizedState,m.parent!==c?(m={parent:c,cache:c},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),ji(i,Zt,c)):(c=g.cache,ji(i,Zt,c),c!==m.cache&&jp(i,[Zt],o,!0))),wn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ei(n){n.flags|=4}function xg(n,i,o,c,m){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(Cx())n.flags|=8192;else throw to=Uh,Lp}else n.flags&=-16777217}function sx(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!bE(i))if(Cx())n.flags|=8192;else throw to=Uh,Lp}function nf(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?lh():536870912,n.lanes|=i,wl|=i)}function yu(n,i){if(!Ze)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Tt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function YN(n,i,o){var c=i.pendingProps;switch(Rp(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(i),null;case 1:return Tt(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Ws(Zt),tt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(dl(i)?ei(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,kp())),Tt(i),null;case 26:var m=i.type,g=i.memoizedState;return n===null?(ei(i),g!==null?(Tt(i),sx(i,g)):(Tt(i),xg(i,m,null,c,o))):g?g!==n.memoizedState?(ei(i),Tt(i),sx(i,g)):(Tt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&ei(i),Tt(i),xg(i,m,n,c,o)),null;case 27:if(Bt(i),o=fe.current,m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ei(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Tt(i),null}n=te.current,dl(i)?Mb(i):(n=dE(m,c,o),i.stateNode=n,ei(i))}return Tt(i),null;case 5:if(Bt(i),m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ei(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Tt(i),null}if(g=te.current,dl(i))Mb(i);else{var b=_f(fe.current);switch(g){case 1:g=b.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=b.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=b.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=b.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?b.createElement(m,{is:c.is}):b.createElement(m)}}g[Wt]=i,g[dn]=c;e:for(b=i.child;b!==null;){if(b.tag===5||b.tag===6)g.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===i)break e;for(;b.sibling===null;){if(b.return===null||b.return===i)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}i.stateNode=g;e:switch(In(g,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ei(i)}}return Tt(i),xg(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&ei(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(n=fe.current,dl(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,m=En,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}n[Wt]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||eE(n.nodeValue,o)),n||Pi(i,!0)}else n=_f(n).createTextNode(c),n[Wt]=i,i.stateNode=n}return Tt(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(c=dl(i),o!==null){if(n===null){if(!c)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Wt]=i}else Wa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Tt(i),n=!1}else o=kp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(hr(i),i):(hr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return Tt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=dl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(r(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Wt]=i}else Wa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Tt(i),m=!1}else m=kp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(hr(i),i):(hr(i),null)}return hr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=i.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),nf(i,i.updateQueue),Tt(i),null);case 4:return tt(),n===null&&Fg(i.stateNode.containerInfo),Tt(i),null;case 10:return Ws(i.type),Tt(i),null;case 19:if(O(Ft),c=i.memoizedState,c===null)return Tt(i),null;if(m=(i.flags&128)!==0,g=c.rendering,g===null)if(m)yu(c,!1);else{if(Mt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=Fh(n),g!==null){for(i.flags|=128,yu(c,!1),n=g.updateQueue,i.updateQueue=n,nf(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)Db(o,n),o=o.sibling;return B(Ft,Ft.current&1|2),Ze&&$s(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&qe()>lf&&(i.flags|=128,m=!0,yu(c,!1),i.lanes=4194304)}else{if(!m)if(n=Fh(g),n!==null){if(i.flags|=128,m=!0,n=n.updateQueue,i.updateQueue=n,nf(i,n),yu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Ze)return Tt(i),null}else 2*qe()-c.renderingStartTime>lf&&o!==536870912&&(i.flags|=128,m=!0,yu(c,!1),i.lanes=4194304);c.isBackwards?(g.sibling=i.child,i.child=g):(n=c.last,n!==null?n.sibling=g:i.child=g,c.last=g)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=qe(),n.sibling=null,o=Ft.current,B(Ft,m?o&1|2:o&1),Ze&&$s(i,c.treeForkCount),n):(Tt(i),null);case 22:case 23:return hr(i),Hp(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(Tt(i),i.subtreeFlags&6&&(i.flags|=8192)):Tt(i),o=i.updateQueue,o!==null&&nf(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&O(Za),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ws(Zt),Tt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function WN(n,i){switch(Rp(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ws(Zt),tt(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Bt(i),null;case 31:if(i.memoizedState!==null){if(hr(i),i.alternate===null)throw Error(r(340));Wa()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(hr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Wa()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return O(Ft),null;case 4:return tt(),null;case 10:return Ws(i.type),null;case 22:case 23:return hr(i),Hp(),n!==null&&O(Za),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Ws(Zt),null;case 25:return null;default:return null}}function ix(n,i){switch(Rp(i),i.tag){case 3:Ws(Zt),tt();break;case 26:case 27:case 5:Bt(i);break;case 4:tt();break;case 31:i.memoizedState!==null&&hr(i);break;case 13:hr(i);break;case 19:O(Ft);break;case 10:Ws(i.type);break;case 22:case 23:hr(i),Hp(),n!==null&&O(Za);break;case 24:Ws(Zt)}}function _u(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&n)===n){c=void 0;var g=o.create,b=o.inst;c=g(),b.destroy=c}o=o.next}while(o!==m)}}catch(I){dt(i,i.return,I)}}function zi(n,i,o){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&n)===n){var b=c.inst,I=b.destroy;if(I!==void 0){b.destroy=void 0,m=i;var P=o,Q=I;try{Q()}catch(re){dt(m,P,re)}}}c=c.next}while(c!==g)}}catch(re){dt(i,i.return,re)}}function ax(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Wb(i,o)}catch(c){dt(n,n.return,c)}}}function ox(n,i,o){o.props=so(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){dt(n,i,c)}}function bu(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(m){dt(n,i,m)}}function ws(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){dt(n,i,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){dt(n,i,m)}else o.current=null}function lx(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){dt(n,n.return,m)}}function Eg(n,i,o){try{var c=n.stateNode;_R(c,n.type,o,i),c[dn]=i}catch(m){dt(n,n.return,m)}}function cx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ki(n.type)||n.tag===4}function Tg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||cx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ki(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wg(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=qr));else if(c!==4&&(c===27&&Ki(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(wg(n,i,o),n=n.sibling;n!==null;)wg(n,i,o),n=n.sibling}function rf(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&Ki(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(rf(n,i,o),n=n.sibling;n!==null;)rf(n,i,o),n=n.sibling}function ux(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);In(i,c,o),i[Wt]=n,i[dn]=o}catch(g){dt(n,n.return,g)}}var ti=!1,nn=!1,Ig=!1,dx=typeof WeakSet=="function"?WeakSet:Set,fn=null;function XN(n,i){if(n=n.containerInfo,Qg=If,n=Tb(n),_p(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var b=0,I=-1,P=-1,Q=0,re=0,ae=n,$=null;t:for(;;){for(var ee;ae!==o||m!==0&&ae.nodeType!==3||(I=b+m),ae!==g||c!==0&&ae.nodeType!==3||(P=b+c),ae.nodeType===3&&(b+=ae.nodeValue.length),(ee=ae.firstChild)!==null;)$=ae,ae=ee;for(;;){if(ae===n)break t;if($===o&&++Q===m&&(I=b),$===g&&++re===c&&(P=b),(ee=ae.nextSibling)!==null)break;ae=$,$=ae.parentNode}ae=ee}o=I===-1||P===-1?null:{start:I,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(Kg={focusedElem:n,selectionRange:o},If=!1,fn=i;fn!==null;)if(i=fn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,fn=n;else for(;fn!==null;){switch(i=fn,g=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,m=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Te=so(o.type,m);n=c.getSnapshotBeforeUpdate(Te,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(De){dt(o,o.return,De)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Wg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Wg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,fn=n;break}fn=i.return}}function hx(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:ri(n,o),c&4&&_u(5,o);break;case 1:if(ri(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(b){dt(o,o.return,b)}else{var m=so(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(m,i,n.__reactInternalSnapshotBeforeUpdate)}catch(b){dt(o,o.return,b)}}c&64&&ax(o),c&512&&bu(o,o.return);break;case 3:if(ri(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Wb(n,i)}catch(b){dt(o,o.return,b)}}break;case 27:i===null&&c&4&&ux(o);case 26:case 5:ri(n,o),i===null&&c&4&&lx(o),c&512&&bu(o,o.return);break;case 12:ri(n,o);break;case 31:ri(n,o),c&4&&px(n,o);break;case 13:ri(n,o),c&4&&gx(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=aR.bind(null,o),SR(n,o))));break;case 22:if(c=o.memoizedState!==null||ti,!c){i=i!==null&&i.memoizedState!==null||nn,m=ti;var g=nn;ti=c,(nn=i)&&!g?si(n,o,(o.subtreeFlags&8772)!==0):ri(n,o),ti=m,nn=g}break;case 30:break;default:ri(n,o)}}function fx(n){var i=n.alternate;i!==null&&(n.alternate=null,fx(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&$o(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var St=null,Xn=!1;function ni(n,i,o){for(o=o.child;o!==null;)mx(n,i,o),o=o.sibling}function mx(n,i,o){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(Ln,o)}catch{}switch(o.tag){case 26:nn||ws(o,i),ni(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:nn||ws(o,i);var c=St,m=Xn;Ki(o.type)&&(St=o.stateNode,Xn=!1),ni(n,i,o),Nu(o.stateNode),St=c,Xn=m;break;case 5:nn||ws(o,i);case 6:if(c=St,m=Xn,St=null,ni(n,i,o),St=c,Xn=m,St!==null)if(Xn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(o.stateNode)}catch(g){dt(o,i,g)}else try{St.removeChild(o.stateNode)}catch(g){dt(o,i,g)}break;case 18:St!==null&&(Xn?(n=St,aE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Dl(n)):aE(St,o.stateNode));break;case 4:c=St,m=Xn,St=o.stateNode.containerInfo,Xn=!0,ni(n,i,o),St=c,Xn=m;break;case 0:case 11:case 14:case 15:zi(2,o,i),nn||zi(4,o,i),ni(n,i,o);break;case 1:nn||(ws(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&ox(o,i,c)),ni(n,i,o);break;case 21:ni(n,i,o);break;case 22:nn=(c=nn)||o.memoizedState!==null,ni(n,i,o),nn=c;break;default:ni(n,i,o)}}function px(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Dl(n)}catch(o){dt(i,i.return,o)}}}function gx(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Dl(n)}catch(o){dt(i,i.return,o)}}function JN(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new dx),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new dx),i;default:throw Error(r(435,n.tag))}}function sf(n,i){var o=JN(n);i.forEach(function(c){if(!o.has(c)){o.add(c);var m=oR.bind(null,n,c);c.then(m,m)}})}function Jn(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],g=n,b=i,I=b;e:for(;I!==null;){switch(I.tag){case 27:if(Ki(I.type)){St=I.stateNode,Xn=!1;break e}break;case 5:St=I.stateNode,Xn=!1;break e;case 3:case 4:St=I.stateNode.containerInfo,Xn=!0;break e}I=I.return}if(St===null)throw Error(r(160));mx(g,b,m),St=null,Xn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)yx(i,n),i=i.sibling}var $r=null;function yx(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Jn(i,n),Zn(n),c&4&&(zi(3,n,n.return),_u(3,n),zi(5,n,n.return));break;case 1:Jn(i,n),Zn(n),c&512&&(nn||o===null||ws(o,o.return)),c&64&&ti&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=$r;if(Jn(i,n),Zn(n),c&512&&(nn||o===null||ws(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[us]||g[Wt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),In(g,c,o),g[Wt]=n,Xt(g),c=g;break e;case"link":var b=yE("link","href",m).get(c+(o.href||""));if(b){for(var I=0;I<b.length;I++)if(g=b[I],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(I,1);break t}}g=m.createElement(c),In(g,c,o),m.head.appendChild(g);break;case"meta":if(b=yE("meta","content",m).get(c+(o.content||""))){for(I=0;I<b.length;I++)if(g=b[I],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(I,1);break t}}g=m.createElement(c),In(g,c,o),m.head.appendChild(g);break;default:throw Error(r(468,c))}g[Wt]=n,Xt(g),c=g}n.stateNode=c}else _E(m,n.type,n.stateNode);else n.stateNode=gE(m,c,n.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?_E(m,n.type,n.stateNode):gE(m,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Eg(n,n.memoizedProps,o.memoizedProps)}break;case 27:Jn(i,n),Zn(n),c&512&&(nn||o===null||ws(o,o.return)),o!==null&&c&4&&Eg(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Jn(i,n),Zn(n),c&512&&(nn||o===null||ws(o,o.return)),n.flags&32){m=n.stateNode;try{Wn(m,"")}catch(Te){dt(n,n.return,Te)}}c&4&&n.stateNode!=null&&(m=n.memoizedProps,Eg(n,m,o!==null?o.memoizedProps:m)),c&1024&&(Ig=!0);break;case 6:if(Jn(i,n),Zn(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Te){dt(n,n.return,Te)}}break;case 3:if(xf=null,m=$r,$r=bf(i.containerInfo),Jn(i,n),$r=m,Zn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Dl(i.containerInfo)}catch(Te){dt(n,n.return,Te)}Ig&&(Ig=!1,_x(n));break;case 4:c=$r,$r=bf(n.stateNode.containerInfo),Jn(i,n),Zn(n),$r=c;break;case 12:Jn(i,n),Zn(n);break;case 31:Jn(i,n),Zn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,sf(n,c)));break;case 13:Jn(i,n),Zn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(of=qe()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,sf(n,c)));break;case 22:m=n.memoizedState!==null;var P=o!==null&&o.memoizedState!==null,Q=ti,re=nn;if(ti=Q||m,nn=re||P,Jn(i,n),nn=re,ti=Q,Zn(n),c&8192)e:for(i=n.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||P||ti||nn||io(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){P=o=i;try{if(g=P.stateNode,m)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{I=P.stateNode;var ae=P.memoizedProps.style,$=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;I.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Te){dt(P,P.return,Te)}}}else if(i.tag===6){if(o===null){P=i;try{P.stateNode.nodeValue=m?"":P.memoizedProps}catch(Te){dt(P,P.return,Te)}}}else if(i.tag===18){if(o===null){P=i;try{var ee=P.stateNode;m?oE(ee,!0):oE(P.stateNode,!1)}catch(Te){dt(P,P.return,Te)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,sf(n,o))));break;case 19:Jn(i,n),Zn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,sf(n,c)));break;case 30:break;case 21:break;default:Jn(i,n),Zn(n)}}function Zn(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(cx(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var m=o.stateNode,g=Tg(n);rf(n,g,m);break;case 5:var b=o.stateNode;o.flags&32&&(Wn(b,""),o.flags&=-33);var I=Tg(n);rf(n,I,b);break;case 3:case 4:var P=o.stateNode.containerInfo,Q=Tg(n);wg(n,Q,P);break;default:throw Error(r(161))}}catch(re){dt(n,n.return,re)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function _x(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;_x(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ri(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)hx(n,i.alternate,i),i=i.sibling}function io(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:zi(4,i,i.return),io(i);break;case 1:ws(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&ox(i,i.return,o),io(i);break;case 27:Nu(i.stateNode);case 26:case 5:ws(i,i.return),io(i);break;case 22:i.memoizedState===null&&io(i);break;case 30:io(i);break;default:io(i)}n=n.sibling}}function si(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,m=n,g=i,b=g.flags;switch(g.tag){case 0:case 11:case 15:si(m,g,o),_u(4,g);break;case 1:if(si(m,g,o),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Q){dt(c,c.return,Q)}if(c=g,m=c.updateQueue,m!==null){var I=c.stateNode;try{var P=m.shared.hiddenCallbacks;if(P!==null)for(m.shared.hiddenCallbacks=null,m=0;m<P.length;m++)Yb(P[m],I)}catch(Q){dt(c,c.return,Q)}}o&&b&64&&ax(g),bu(g,g.return);break;case 27:ux(g);case 26:case 5:si(m,g,o),o&&c===null&&b&4&&lx(g),bu(g,g.return);break;case 12:si(m,g,o);break;case 31:si(m,g,o),o&&b&4&&px(m,g);break;case 13:si(m,g,o),o&&b&4&&gx(m,g);break;case 22:g.memoizedState===null&&si(m,g,o),bu(g,g.return);break;case 30:break;default:si(m,g,o)}i=i.sibling}}function Sg(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&iu(o))}function Ag(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&iu(n))}function Yr(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)bx(n,i,o,c),i=i.sibling}function bx(n,i,o,c){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Yr(n,i,o,c),m&2048&&_u(9,i);break;case 1:Yr(n,i,o,c);break;case 3:Yr(n,i,o,c),m&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&iu(n)));break;case 12:if(m&2048){Yr(n,i,o,c),n=i.stateNode;try{var g=i.memoizedProps,b=g.id,I=g.onPostCommit;typeof I=="function"&&I(b,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(P){dt(i,i.return,P)}}else Yr(n,i,o,c);break;case 31:Yr(n,i,o,c);break;case 13:Yr(n,i,o,c);break;case 23:break;case 22:g=i.stateNode,b=i.alternate,i.memoizedState!==null?g._visibility&2?Yr(n,i,o,c):vu(n,i):g._visibility&2?Yr(n,i,o,c):(g._visibility|=2,xl(n,i,o,c,(i.subtreeFlags&10256)!==0||!1)),m&2048&&Sg(b,i);break;case 24:Yr(n,i,o,c),m&2048&&Ag(i.alternate,i);break;default:Yr(n,i,o,c)}}function xl(n,i,o,c,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=n,b=i,I=o,P=c,Q=b.flags;switch(b.tag){case 0:case 11:case 15:xl(g,b,I,P,m),_u(8,b);break;case 23:break;case 22:var re=b.stateNode;b.memoizedState!==null?re._visibility&2?xl(g,b,I,P,m):vu(g,b):(re._visibility|=2,xl(g,b,I,P,m)),m&&Q&2048&&Sg(b.alternate,b);break;case 24:xl(g,b,I,P,m),m&&Q&2048&&Ag(b.alternate,b);break;default:xl(g,b,I,P,m)}i=i.sibling}}function vu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,m=c.flags;switch(c.tag){case 22:vu(o,c),m&2048&&Sg(c.alternate,c);break;case 24:vu(o,c),m&2048&&Ag(c.alternate,c);break;default:vu(o,c)}i=i.sibling}}var xu=8192;function El(n,i,o){if(n.subtreeFlags&xu)for(n=n.child;n!==null;)vx(n,i,o),n=n.sibling}function vx(n,i,o){switch(n.tag){case 26:El(n,i,o),n.flags&xu&&n.memoizedState!==null&&LR(o,$r,n.memoizedState,n.memoizedProps);break;case 5:El(n,i,o);break;case 3:case 4:var c=$r;$r=bf(n.stateNode.containerInfo),El(n,i,o),$r=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=xu,xu=16777216,El(n,i,o),xu=c):El(n,i,o));break;default:El(n,i,o)}}function xx(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Eu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];fn=c,Tx(c,n)}xx(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ex(n),n=n.sibling}function Ex(n){switch(n.tag){case 0:case 11:case 15:Eu(n),n.flags&2048&&zi(9,n,n.return);break;case 3:Eu(n);break;case 12:Eu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,af(n)):Eu(n);break;default:Eu(n)}}function af(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];fn=c,Tx(c,n)}xx(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:zi(8,i,i.return),af(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,af(i));break;default:af(i)}n=n.sibling}}function Tx(n,i){for(;fn!==null;){var o=fn;switch(o.tag){case 0:case 11:case 15:zi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:iu(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,fn=c;else e:for(o=n;fn!==null;){c=fn;var m=c.sibling,g=c.return;if(fx(c),c===o){fn=null;break e}if(m!==null){m.return=g,fn=m;break e}fn=g}}}var ZN={getCacheForType:function(n){var i=Tn(Zt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return Tn(Zt).controller.signal}},eR=typeof WeakMap=="function"?WeakMap:Map,ot=0,_t=null,He=null,Ye=0,ut=0,fr=null,Bi=!1,Tl=!1,Ng=!1,ii=0,Mt=0,qi=0,ao=0,Rg=0,mr=0,wl=0,Tu=null,er=null,Cg=!1,of=0,wx=0,lf=1/0,cf=null,Fi=null,ln=0,Hi=null,Il=null,ai=0,kg=0,Dg=null,Ix=null,wu=0,Pg=null;function pr(){return(ot&2)!==0&&Ye!==0?Ye&-Ye:Z.T!==null?Ug():ch()}function Sx(){if(mr===0)if((Ye&536870912)===0||Ze){var n=Pa;Pa<<=1,(Pa&3932160)===0&&(Pa=262144),mr=n}else mr=536870912;return n=dr.current,n!==null&&(n.flags|=32),mr}function tr(n,i,o){(n===_t&&(ut===2||ut===9)||n.cancelPendingCommit!==null)&&(Sl(n,0),Gi(n,Ye,mr,!1)),ja(n,o),((ot&2)===0||n!==_t)&&(n===_t&&((ot&2)===0&&(ao|=o),Mt===4&&Gi(n,Ye,mr,!1)),Is(n))}function Ax(n,i,o){if((ot&6)!==0)throw Error(r(327));var c=!o&&(i&127)===0&&(i&n.expiredLanes)===0||Ur(n,i),m=c?rR(n,i):Vg(n,i,!0),g=c;do{if(m===0){Tl&&!c&&Gi(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!tR(o)){m=Vg(n,i,!1),g=!1;continue}if(m===2){if(g=i,n.errorRecoveryDisabledLanes&g)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var I=n;m=Tu;var P=I.current.memoizedState.isDehydrated;if(P&&(Sl(I,b).flags|=256),b=Vg(I,b,!1),b!==2){if(Ng&&!P){I.errorRecoveryDisabledLanes|=g,ao|=g,m=4;break e}g=er,er=m,g!==null&&(er===null?er=g:er.push.apply(er,g))}m=b}if(g=!1,m!==2)continue}}if(m===1){Sl(n,0),Gi(n,i,0,!0);break}e:{switch(c=n,g=m,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Gi(c,i,mr,!Bi);break e;case 2:er=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(m=of+300-qe(),10<m)){if(Gi(c,i,mr,!Bi),os(c,0,!0)!==0)break e;ai=i,c.timeoutHandle=sE(Nx.bind(null,c,o,er,cf,Cg,i,mr,ao,wl,Bi,g,"Throttled",-0,0),m);break e}Nx(c,o,er,cf,Cg,i,mr,ao,wl,Bi,g,null,-0,0)}}break}while(!0);Is(n)}function Nx(n,i,o,c,m,g,b,I,P,Q,re,ae,$,ee){if(n.timeoutHandle=-1,ae=i.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qr},vx(i,g,ae);var Te=(g&62914560)===g?of-qe():(g&4194048)===g?wx-qe():0;if(Te=UR(ae,Te),Te!==null){ai=g,n.cancelPendingCommit=Te(Ox.bind(null,n,i,g,o,c,m,b,I,P,re,ae,null,$,ee)),Gi(n,g,b,!Q);return}}Ox(n,i,g,o,c,m,b,I,P)}function tR(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],g=m.getSnapshot;m=m.value;try{if(!cr(g(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gi(n,i,o,c){i&=~Rg,i&=~ao,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var m=i;0<m;){var g=31-Je(m),b=1<<g;c[g]=-1,m&=~b}o!==0&&Va(n,o,i)}function uf(){return(ot&6)===0?(Iu(0),!1):!0}function jg(){if(He!==null){if(ut===0)var n=He.return;else n=He,Ys=Xa=null,Wp(n),gl=null,ou=0,n=He;for(;n!==null;)ix(n.alternate,n),n=n.return;He=null}}function Sl(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,xR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ai=0,jg(),_t=n,He=o=Ks(n.current,null),Ye=i,ut=0,fr=null,Bi=!1,Tl=Ur(n,i),Ng=!1,wl=mr=Rg=ao=qi=Mt=0,er=Tu=null,Cg=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var m=31-Je(c),g=1<<m;i|=n[m],c&=~g}return ii=i,Ch(),o}function Rx(n,i){ze=null,Z.H=pu,i===pl||i===Lh?(i=Gb(),ut=3):i===Lp?(i=Gb(),ut=4):ut=i===hg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fr=i,He===null&&(Mt=1,Jh(n,Nr(i,n.current)))}function Cx(){var n=dr.current;return n===null?!0:(Ye&4194048)===Ye?Dr===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?n===Dr:!1}function kx(){var n=Z.H;return Z.H=pu,n===null?pu:n}function Dx(){var n=Z.A;return Z.A=ZN,n}function df(){Mt=4,Bi||(Ye&4194048)!==Ye&&dr.current!==null||(Tl=!0),(qi&134217727)===0&&(ao&134217727)===0||_t===null||Gi(_t,Ye,mr,!1)}function Vg(n,i,o){var c=ot;ot|=2;var m=kx(),g=Dx();(_t!==n||Ye!==i)&&(cf=null,Sl(n,i)),i=!1;var b=Mt;e:do try{if(ut!==0&&He!==null){var I=He,P=fr;switch(ut){case 8:jg(),b=6;break e;case 3:case 2:case 9:case 6:dr.current===null&&(i=!0);var Q=ut;if(ut=0,fr=null,Al(n,I,P,Q),o&&Tl){b=0;break e}break;default:Q=ut,ut=0,fr=null,Al(n,I,P,Q)}}nR(),b=Mt;break}catch(re){Rx(n,re)}while(!0);return i&&n.shellSuspendCounter++,Ys=Xa=null,ot=c,Z.H=m,Z.A=g,He===null&&(_t=null,Ye=0,Ch()),b}function nR(){for(;He!==null;)Px(He)}function rR(n,i){var o=ot;ot|=2;var c=kx(),m=Dx();_t!==n||Ye!==i?(cf=null,lf=qe()+500,Sl(n,i)):Tl=Ur(n,i);e:do try{if(ut!==0&&He!==null){i=He;var g=fr;t:switch(ut){case 1:ut=0,fr=null,Al(n,i,g,1);break;case 2:case 9:if(Fb(g)){ut=0,fr=null,jx(i);break}i=function(){ut!==2&&ut!==9||_t!==n||(ut=7),Is(n)},g.then(i,i);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Fb(g)?(ut=0,fr=null,jx(i)):(ut=0,fr=null,Al(n,i,g,7));break;case 5:var b=null;switch(He.tag){case 26:b=He.memoizedState;case 5:case 27:var I=He;if(b?bE(b):I.stateNode.complete){ut=0,fr=null;var P=I.sibling;if(P!==null)He=P;else{var Q=I.return;Q!==null?(He=Q,hf(Q)):He=null}break t}}ut=0,fr=null,Al(n,i,g,5);break;case 6:ut=0,fr=null,Al(n,i,g,6);break;case 8:jg(),Mt=6;break e;default:throw Error(r(462))}}sR();break}catch(re){Rx(n,re)}while(!0);return Ys=Xa=null,Z.H=c,Z.A=m,ot=o,He!==null?0:(_t=null,Ye=0,Ch(),Mt)}function sR(){for(;He!==null&&!Y();)Px(He)}function Px(n){var i=rx(n.alternate,n,ii);n.memoizedProps=n.pendingProps,i===null?hf(n):He=i}function jx(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Xv(o,i,i.pendingProps,i.type,void 0,Ye);break;case 11:i=Xv(o,i,i.pendingProps,i.type.render,i.ref,Ye);break;case 5:Wp(i);default:ix(o,i),i=He=Db(i,ii),i=rx(o,i,ii)}n.memoizedProps=n.pendingProps,i===null?hf(n):He=i}function Al(n,i,o,c){Ys=Xa=null,Wp(i),gl=null,ou=0;var m=i.return;try{if(QN(n,m,i,o,Ye)){Mt=1,Jh(n,Nr(o,n.current)),He=null;return}}catch(g){if(m!==null)throw He=m,g;Mt=1,Jh(n,Nr(o,n.current)),He=null;return}i.flags&32768?(Ze||c===1?n=!0:Tl||(Ye&536870912)!==0?n=!1:(Bi=n=!0,(c===2||c===9||c===3||c===6)&&(c=dr.current,c!==null&&c.tag===13&&(c.flags|=16384))),Vx(i,n)):hf(i)}function hf(n){var i=n;do{if((i.flags&32768)!==0){Vx(i,Bi);return}n=i.return;var o=YN(i.alternate,i,ii);if(o!==null){He=o;return}if(i=i.sibling,i!==null){He=i;return}He=i=n}while(i!==null);Mt===0&&(Mt=5)}function Vx(n,i){do{var o=WN(n.alternate,n);if(o!==null){o.flags&=32767,He=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){He=n;return}He=n=o}while(n!==null);Mt=6,He=null}function Ox(n,i,o,c,m,g,b,I,P){n.cancelPendingCommit=null;do ff();while(ln!==0);if((ot&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=Tp,mp(n,o,g,b,I,P),n===_t&&(He=_t=null,Ye=0),Il=i,Hi=n,ai=o,kg=g,Dg=m,Ix=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,lR($t,function(){return Bx(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,m=me.p,me.p=2,b=ot,ot|=4;try{XN(n,i,o)}finally{ot=b,me.p=m,Z.T=c}}ln=1,Mx(),Lx(),Ux()}}function Mx(){if(ln===1){ln=0;var n=Hi,i=Il,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var c=me.p;me.p=2;var m=ot;ot|=4;try{yx(i,n);var g=Kg,b=Tb(n.containerInfo),I=g.focusedElem,P=g.selectionRange;if(b!==I&&I&&I.ownerDocument&&Eb(I.ownerDocument.documentElement,I)){if(P!==null&&_p(I)){var Q=P.start,re=P.end;if(re===void 0&&(re=Q),"selectionStart"in I)I.selectionStart=Q,I.selectionEnd=Math.min(re,I.value.length);else{var ae=I.ownerDocument||document,$=ae&&ae.defaultView||window;if($.getSelection){var ee=$.getSelection(),Te=I.textContent.length,De=Math.min(P.start,Te),yt=P.end===void 0?De:Math.min(P.end,Te);!ee.extend&&De>yt&&(b=yt,yt=De,De=b);var L=xb(I,De),M=xb(I,yt);if(L&&M&&(ee.rangeCount!==1||ee.anchorNode!==L.node||ee.anchorOffset!==L.offset||ee.focusNode!==M.node||ee.focusOffset!==M.offset)){var G=ae.createRange();G.setStart(L.node,L.offset),ee.removeAllRanges(),De>yt?(ee.addRange(G),ee.extend(M.node,M.offset)):(G.setEnd(M.node,M.offset),ee.addRange(G))}}}}for(ae=[],ee=I;ee=ee.parentNode;)ee.nodeType===1&&ae.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ae.length;I++){var se=ae[I];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}If=!!Qg,Kg=Qg=null}finally{ot=m,me.p=c,Z.T=o}}n.current=i,ln=2}}function Lx(){if(ln===2){ln=0;var n=Hi,i=Il,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var c=me.p;me.p=2;var m=ot;ot|=4;try{hx(n,i.alternate,i)}finally{ot=m,me.p=c,Z.T=o}}ln=3}}function Ux(){if(ln===4||ln===3){ln=0,Ie();var n=Hi,i=Il,o=ai,c=Ix;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ln=5:(ln=0,Il=Hi=null,zx(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Fi=null),Fs(o),i=i.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(Ln,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=Z.T,m=me.p,me.p=2,Z.T=null;try{for(var g=n.onRecoverableError,b=0;b<c.length;b++){var I=c[b];g(I.value,{componentStack:I.stack})}}finally{Z.T=i,me.p=m}}(ai&3)!==0&&ff(),Is(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===Pg?wu++:(wu=0,Pg=n):wu=0,Iu(0)}}function zx(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,iu(i)))}function ff(){return Mx(),Lx(),Ux(),Bx()}function Bx(){if(ln!==5)return!1;var n=Hi,i=kg;kg=0;var o=Fs(ai),c=Z.T,m=me.p;try{me.p=32>o?32:o,Z.T=null,o=Dg,Dg=null;var g=Hi,b=ai;if(ln=0,Il=Hi=null,ai=0,(ot&6)!==0)throw Error(r(331));var I=ot;if(ot|=4,Ex(g.current),bx(g,g.current,b,o),ot=I,Iu(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(Ln,g)}catch{}return!0}finally{me.p=m,Z.T=c,zx(n,i)}}function qx(n,i,o){i=Nr(o,i),i=dg(n.stateNode,i,2),n=Mi(n,i,2),n!==null&&(ja(n,2),Is(n))}function dt(n,i,o){if(n.tag===3)qx(n,n,o);else for(;i!==null;){if(i.tag===3){qx(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Fi===null||!Fi.has(c))){n=Nr(o,n),o=Fv(2),c=Mi(i,o,2),c!==null&&(Hv(o,c,i,n),ja(c,2),Is(c));break}}i=i.return}}function Og(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new eR;var m=new Set;c.set(i,m)}else m=c.get(i),m===void 0&&(m=new Set,c.set(i,m));m.has(o)||(Ng=!0,m.add(o),n=iR.bind(null,n,i,o),i.then(n,n))}function iR(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,_t===n&&(Ye&o)===o&&(Mt===4||Mt===3&&(Ye&62914560)===Ye&&300>qe()-of?(ot&2)===0&&Sl(n,0):Rg|=o,wl===Ye&&(wl=0)),Is(n)}function Fx(n,i){i===0&&(i=lh()),n=$a(n,i),n!==null&&(ja(n,i),Is(n))}function aR(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Fx(n,o)}function oR(n,i){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(i),Fx(n,o)}function lR(n,i){return xt(n,i)}var mf=null,Nl=null,Mg=!1,pf=!1,Lg=!1,Qi=0;function Is(n){n!==Nl&&n.next===null&&(Nl===null?mf=Nl=n:Nl=Nl.next=n),pf=!0,Mg||(Mg=!0,uR())}function Iu(n,i){if(!Lg&&pf){Lg=!0;do for(var o=!1,c=mf;c!==null;){if(n!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var b=c.suspendedLanes,I=c.pingedLanes;g=(1<<31-Je(42|n)+1)-1,g&=m&~(b&~I),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Kx(c,g))}else g=Ye,g=os(c,c===_t?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Ur(c,g)||(o=!0,Kx(c,g));c=c.next}while(o);Lg=!1}}function cR(){Hx()}function Hx(){pf=Mg=!1;var n=0;Qi!==0&&vR()&&(n=Qi);for(var i=qe(),o=null,c=mf;c!==null;){var m=c.next,g=Gx(c,i);g===0?(c.next=null,o===null?mf=m:o.next=m,m===null&&(Nl=o)):(o=c,(n!==0||(g&3)!==0)&&(pf=!0)),c=m}ln!==0&&ln!==5||Iu(n),Qi!==0&&(Qi=0)}function Gx(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,m=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var b=31-Je(g),I=1<<b,P=m[b];P===-1?((I&o)===0||(I&c)!==0)&&(m[b]=fp(I,i)):P<=i&&(n.expiredLanes|=I),g&=~I}if(i=_t,o=Ye,o=os(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(ut===2||ut===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&kn(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Ur(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&kn(c),Fs(o)){case 2:case 8:o=vn;break;case 32:o=$t;break;case 268435456:o=qs;break;default:o=$t}return c=Qx.bind(null,n),o=xt(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&kn(c),n.callbackPriority=2,n.callbackNode=null,2}function Qx(n,i){if(ln!==0&&ln!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(ff()&&n.callbackNode!==o)return null;var c=Ye;return c=os(n,n===_t?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Ax(n,c,i),Gx(n,qe()),n.callbackNode!=null&&n.callbackNode===o?Qx.bind(null,n):null)}function Kx(n,i){if(ff())return null;Ax(n,i,!0)}function uR(){ER(function(){(ot&6)!==0?xt(kt,cR):Hx()})}function Ug(){if(Qi===0){var n=fl;n===0&&(n=is,is<<=1,(is&261888)===0&&(is=256)),Qi=n}return Qi}function $x(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Jo(""+n)}function Yx(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function dR(n,i,o,c,m){if(i==="submit"&&o&&o.stateNode===m){var g=$x((m[dn]||null).action),b=c.submitter;b&&(i=(i=b[dn]||null)?$x(i.formAction):b.getAttribute("formAction"),i!==null&&(g=i,b=null));var I=new _s("action","action",null,c,m);n.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Qi!==0){var P=b?Yx(m,b):new FormData(m);ig(o,{pending:!0,data:P,method:m.method,action:g},null,P)}}else typeof g=="function"&&(I.preventDefault(),P=b?Yx(m,b):new FormData(m),ig(o,{pending:!0,data:P,method:m.method,action:g},g,P))},currentTarget:m}]})}}for(var zg=0;zg<Ep.length;zg++){var Bg=Ep[zg],hR=Bg.toLowerCase(),fR=Bg[0].toUpperCase()+Bg.slice(1);Kr(hR,"on"+fR)}Kr(Sb,"onAnimationEnd"),Kr(Ab,"onAnimationIteration"),Kr(Nb,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(RN,"onTransitionRun"),Kr(CN,"onTransitionStart"),Kr(kN,"onTransitionCancel"),Kr(Rb,"onTransitionEnd"),ms("onMouseEnter",["mouseout","mouseover"]),ms("onMouseLeave",["mouseout","mouseover"]),ms("onPointerEnter",["pointerout","pointerover"]),ms("onPointerLeave",["pointerout","pointerover"]),fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fs("onBeforeInput",["compositionend","keypress","textInput","paste"]),fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Su));function Wx(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],m=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var b=c.length-1;0<=b;b--){var I=c[b],P=I.instance,Q=I.currentTarget;if(I=I.listener,P!==g&&m.isPropagationStopped())break e;g=I,m.currentTarget=Q;try{g(m)}catch(re){Rh(re)}m.currentTarget=null,g=P}else for(b=0;b<c.length;b++){if(I=c[b],P=I.instance,Q=I.currentTarget,I=I.listener,P!==g&&m.isPropagationStopped())break e;g=I,m.currentTarget=Q;try{g(m)}catch(re){Rh(re)}m.currentTarget=null,g=P}}}}function Ge(n,i){var o=i[Ko];o===void 0&&(o=i[Ko]=new Set);var c=n+"__bubble";o.has(c)||(Xx(i,n,2,!1),o.add(c))}function qg(n,i,o){var c=0;i&&(c|=4),Xx(o,n,c,i)}var gf="_reactListening"+Math.random().toString(36).slice(2);function Fg(n){if(!n[gf]){n[gf]=!0,Lc.forEach(function(o){o!=="selectionchange"&&(mR.has(o)||qg(o,!1,n),qg(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[gf]||(i[gf]=!0,qg("selectionchange",!1,i))}}function Xx(n,i,o,c){switch(SE(i)){case 2:var m=qR;break;case 8:m=FR;break;default:m=sy}o=m.bind(null,i,o,n),m=void 0,!za||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),c?m!==void 0?n.addEventListener(i,o,{capture:!0,passive:m}):n.addEventListener(i,o,!0):m!==void 0?n.addEventListener(i,o,{passive:m}):n.addEventListener(i,o,!1)}function Hg(n,i,o,c,m){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var I=c.stateNode.containerInfo;if(I===m)break;if(b===4)for(b=c.return;b!==null;){var P=b.tag;if((P===3||P===4)&&b.stateNode.containerInfo===m)return;b=b.return}for(;I!==null;){if(b=ds(I),b===null)return;if(P=b.tag,P===5||P===6||P===26||P===27){c=g=b;continue e}I=I.parentNode}}c=c.return}Ai(function(){var Q=g,re=wr(o),ae=[];e:{var $=Cb.get(n);if($!==void 0){var ee=_s,Te=n;switch(n){case"keypress":if(qa(o)===0)break e;case"keydown":case"keyup":ee=Sh;break;case"focusin":Te="focus",ee=Ha;break;case"focusout":Te="blur",ee=Ha;break;case"beforeblur":case"afterblur":ee=Ha;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=_;break;case Sb:case Ab:case Nb:ee=bh;break;case Rb:ee=S;break;case"scroll":case"scrollend":ee=Wc;break;case"wheel":ee=X;break;case"copy":case"cut":case"paste":ee=vh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Qs;break;case"toggle":case"beforetoggle":ee=Ue}var De=(i&4)!==0,yt=!De&&(n==="scroll"||n==="scrollend"),L=De?$!==null?$+"Capture":null:$;De=[];for(var M=Q,G;M!==null;){var se=M;if(G=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||G===null||L===null||(se=Fr(M,L),se!=null&&De.push(Au(M,se,G))),yt)break;M=M.return}0<De.length&&($=new ee($,Te,null,o,re),ae.push({event:$,listeners:De}))}}if((i&7)===0){e:{if($=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",$&&o!==Kc&&(Te=o.relatedTarget||o.fromElement)&&(ds(Te)||Te[cs]))break e;if((ee||$)&&($=re.window===re?re:($=re.ownerDocument)?$.defaultView||$.parentWindow:window,ee?(Te=o.relatedTarget||o.toElement,ee=Q,Te=Te?ds(Te):null,Te!==null&&(yt=l(Te),De=Te.tag,Te!==yt||De!==5&&De!==27&&De!==6)&&(Te=null)):(ee=null,Te=Q),ee!==Te)){if(De=Xc,se="onMouseLeave",L="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(De=Qs,se="onPointerLeave",L="onPointerEnter",M="pointer"),yt=ee==null?$:or(ee),G=Te==null?$:or(Te),$=new De(se,M+"leave",ee,o,re),$.target=yt,$.relatedTarget=G,se=null,ds(re)===Q&&(De=new De(L,M+"enter",Te,o,re),De.target=G,De.relatedTarget=yt,se=De),yt=se,ee&&Te)t:{for(De=pR,L=ee,M=Te,G=0,se=L;se;se=De(se))G++;se=0;for(var Re=M;Re;Re=De(Re))se++;for(;0<G-se;)L=De(L),G--;for(;0<se-G;)M=De(M),se--;for(;G--;){if(L===M||M!==null&&L===M.alternate){De=L;break t}L=De(L),M=De(M)}De=null}else De=null;ee!==null&&Jx(ae,$,ee,De,!1),Te!==null&&yt!==null&&Jx(ae,yt,Te,De,!0)}}e:{if($=Q?or(Q):window,ee=$.nodeName&&$.nodeName.toLowerCase(),ee==="select"||ee==="input"&&$.type==="file")var nt=pb;else if(fb($))if(gb)nt=SN;else{nt=wN;var Se=TN}else ee=$.nodeName,!ee||ee.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Q&&Xo(Q.elementType)&&(nt=pb):nt=IN;if(nt&&(nt=nt(n,Q))){mb(ae,nt,o,re);break e}Se&&Se(n,$,Q),n==="focusout"&&Q&&$.type==="number"&&Q.memoizedProps.value!=null&&Hc($,"number",$.value)}switch(Se=Q?or(Q):window,n){case"focusin":(fb(Se)||Se.contentEditable==="true")&&(il=Se,bp=Q,nu=null);break;case"focusout":nu=bp=il=null;break;case"mousedown":vp=!0;break;case"contextmenu":case"mouseup":case"dragend":vp=!1,wb(ae,o,re);break;case"selectionchange":if(NN)break;case"keydown":case"keyup":wb(ae,o,re)}var Fe;if(at)e:{switch(n){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else sl?Ga(n,o)&&(We="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(We="onCompositionStart");We&&(xs&&o.locale!=="ko"&&(sl||We!=="onCompositionStart"?We==="onCompositionEnd"&&sl&&(Fe=Yc()):(ys=re,$c="value"in ys?ys.value:ys.textContent,sl=!0)),Se=yf(Q,We),0<Se.length&&(We=new vs(We,n,null,o,re),ae.push({event:We,listeners:Se}),Fe?We.data=Fe:(Fe=rl(o),Fe!==null&&(We.data=Fe)))),(Fe=Sr?bN(n,o):vN(n,o))&&(We=yf(Q,"onBeforeInput"),0<We.length&&(Se=new vs("onBeforeInput","beforeinput",null,o,re),ae.push({event:Se,listeners:We}),Se.data=Fe)),dR(ae,n,Q,o,re)}Wx(ae,i)})}function Au(n,i,o){return{instance:n,listener:i,currentTarget:o}}function yf(n,i){for(var o=i+"Capture",c=[];n!==null;){var m=n,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Fr(n,o),m!=null&&c.unshift(Au(n,m,g)),m=Fr(n,i),m!=null&&c.push(Au(n,m,g))),n.tag===3)return c;n=n.return}return[]}function pR(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Jx(n,i,o,c,m){for(var g=i._reactName,b=[];o!==null&&o!==c;){var I=o,P=I.alternate,Q=I.stateNode;if(I=I.tag,P!==null&&P===c)break;I!==5&&I!==26&&I!==27||Q===null||(P=Q,m?(Q=Fr(o,g),Q!=null&&b.unshift(Au(o,Q,P))):m||(Q=Fr(o,g),Q!=null&&b.push(Au(o,Q,P)))),o=o.return}b.length!==0&&n.push({event:i,listeners:b})}var gR=/\r\n?/g,yR=/\u0000|\uFFFD/g;function Zx(n){return(typeof n=="string"?n:""+n).replace(gR,`
`).replace(yR,"")}function eE(n,i){return i=Zx(i),Zx(n)===i}function gt(n,i,o,c,m,g){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Wn(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Wn(n,""+c);break;case"className":lr(n,"class",c);break;case"tabIndex":lr(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(n,o,c);break;case"style":Qc(n,c,g);break;case"data":if(i!=="object"){lr(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Jo(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&gt(n,i,"name",m.name,m,null),gt(n,i,"formEncType",m.formEncType,m,null),gt(n,i,"formMethod",m.formMethod,m,null),gt(n,i,"formTarget",m.formTarget,m,null)):(gt(n,i,"encType",m.encType,m,null),gt(n,i,"method",m.method,m,null),gt(n,i,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Jo(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=qr);break;case"onScroll":c!=null&&Ge("scroll",n);break;case"onScrollEnd":c!=null&&Ge("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=Jo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ge("beforetoggle",n),Ge("toggle",n),Yo(n,"popover",c);break;case"xlinkActuate":Jt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Jt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Jt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Jt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Jt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Jt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Yo(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gh.get(o)||o,Yo(n,o,c))}}function Gg(n,i,o,c,m,g){switch(o){case"style":Qc(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Wn(n,c):(typeof c=="number"||typeof c=="bigint")&&Wn(n,""+c);break;case"onScroll":c!=null&&Ge("scroll",n);break;case"onScrollEnd":c!=null&&Ge("scrollend",n);break;case"onClick":c!=null&&(n.onclick=qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),g=n[dn]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,m);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Yo(n,o,c)}}}function In(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",n),Ge("load",n);var c=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var b=o[g];if(b!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:gt(n,i,g,b,o,null)}}m&&gt(n,i,"srcSet",o.srcSet,o,null),c&&gt(n,i,"src",o.src,o,null);return;case"input":Ge("invalid",n);var I=g=b=m=null,P=null,Q=null;for(c in o)if(o.hasOwnProperty(c)){var re=o[c];if(re!=null)switch(c){case"name":m=re;break;case"type":b=re;break;case"checked":P=re;break;case"defaultChecked":Q=re;break;case"value":g=re;break;case"defaultValue":I=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,i));break;default:gt(n,i,c,re,o,null)}}fh(n,g,I,P,Q,b,m,!1);return;case"select":Ge("invalid",n),c=b=g=null;for(m in o)if(o.hasOwnProperty(m)&&(I=o[m],I!=null))switch(m){case"value":g=I;break;case"defaultValue":b=I;break;case"multiple":c=I;default:gt(n,i,m,I,o,null)}i=g,o=b,n.multiple=!!c,i!=null?Ti(n,!!c,i,!1):o!=null&&Ti(n,!!c,o,!0);return;case"textarea":Ge("invalid",n),g=m=c=null;for(b in o)if(o.hasOwnProperty(b)&&(I=o[b],I!=null))switch(b){case"value":c=I;break;case"defaultValue":m=I;break;case"children":g=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:gt(n,i,b,I,o,null)}wi(n,c,m,g);return;case"option":for(P in o)o.hasOwnProperty(P)&&(c=o[P],c!=null)&&(P==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":gt(n,i,P,c,o,null));return;case"dialog":Ge("beforetoggle",n),Ge("toggle",n),Ge("cancel",n),Ge("close",n);break;case"iframe":case"object":Ge("load",n);break;case"video":case"audio":for(c=0;c<Su.length;c++)Ge(Su[c],n);break;case"image":Ge("error",n),Ge("load",n);break;case"details":Ge("toggle",n);break;case"embed":case"source":case"link":Ge("error",n),Ge("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in o)if(o.hasOwnProperty(Q)&&(c=o[Q],c!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:gt(n,i,Q,c,o,null)}return;default:if(Xo(i)){for(re in o)o.hasOwnProperty(re)&&(c=o[re],c!==void 0&&Gg(n,i,re,c,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(c=o[I],c!=null&&gt(n,i,I,c,o,null))}function _R(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,b=null,I=null,P=null,Q=null,re=null;for(ee in o){var ae=o[ee];if(o.hasOwnProperty(ee)&&ae!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":P=ae;default:c.hasOwnProperty(ee)||gt(n,i,ee,null,c,ae)}}for(var $ in c){var ee=c[$];if(ae=o[$],c.hasOwnProperty($)&&(ee!=null||ae!=null))switch($){case"type":g=ee;break;case"name":m=ee;break;case"checked":Q=ee;break;case"defaultChecked":re=ee;break;case"value":b=ee;break;case"defaultValue":I=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,i));break;default:ee!==ae&&gt(n,i,$,ee,c,ae)}}Wo(n,b,I,P,Q,re,g,m);return;case"select":ee=b=I=$=null;for(g in o)if(P=o[g],o.hasOwnProperty(g)&&P!=null)switch(g){case"value":break;case"multiple":ee=P;default:c.hasOwnProperty(g)||gt(n,i,g,null,c,P)}for(m in c)if(g=c[m],P=o[m],c.hasOwnProperty(m)&&(g!=null||P!=null))switch(m){case"value":$=g;break;case"defaultValue":I=g;break;case"multiple":b=g;default:g!==P&&gt(n,i,m,g,c,P)}i=I,o=b,c=ee,$!=null?Ti(n,!!o,$,!1):!!c!=!!o&&(i!=null?Ti(n,!!o,i,!0):Ti(n,!!o,o?[]:"",!1));return;case"textarea":ee=$=null;for(I in o)if(m=o[I],o.hasOwnProperty(I)&&m!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:gt(n,i,I,null,c,m)}for(b in c)if(m=c[b],g=o[b],c.hasOwnProperty(b)&&(m!=null||g!=null))switch(b){case"value":$=m;break;case"defaultValue":ee=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==g&&gt(n,i,b,m,c,g)}mh(n,$,ee);return;case"option":for(var Te in o)$=o[Te],o.hasOwnProperty(Te)&&$!=null&&!c.hasOwnProperty(Te)&&(Te==="selected"?n.selected=!1:gt(n,i,Te,null,c,$));for(P in c)$=c[P],ee=o[P],c.hasOwnProperty(P)&&$!==ee&&($!=null||ee!=null)&&(P==="selected"?n.selected=$&&typeof $!="function"&&typeof $!="symbol":gt(n,i,P,$,c,ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)$=o[De],o.hasOwnProperty(De)&&$!=null&&!c.hasOwnProperty(De)&&gt(n,i,De,null,c,$);for(Q in c)if($=c[Q],ee=o[Q],c.hasOwnProperty(Q)&&$!==ee&&($!=null||ee!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:gt(n,i,Q,$,c,ee)}return;default:if(Xo(i)){for(var yt in o)$=o[yt],o.hasOwnProperty(yt)&&$!==void 0&&!c.hasOwnProperty(yt)&&Gg(n,i,yt,void 0,c,$);for(re in c)$=c[re],ee=o[re],!c.hasOwnProperty(re)||$===ee||$===void 0&&ee===void 0||Gg(n,i,re,$,c,ee);return}}for(var L in o)$=o[L],o.hasOwnProperty(L)&&$!=null&&!c.hasOwnProperty(L)&&gt(n,i,L,null,c,$);for(ae in c)$=c[ae],ee=o[ae],!c.hasOwnProperty(ae)||$===ee||$==null&&ee==null||gt(n,i,ae,$,c,ee)}function tE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bR(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var m=o[c],g=m.transferSize,b=m.initiatorType,I=m.duration;if(g&&I&&tE(b)){for(b=0,I=m.responseEnd,c+=1;c<o.length;c++){var P=o[c],Q=P.startTime;if(Q>I)break;var re=P.transferSize,ae=P.initiatorType;re&&tE(ae)&&(P=P.responseEnd,b+=re*(P<I?1:(I-Q)/(P-Q)))}if(--c,i+=8*(g+b)/(m.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qg=null,Kg=null;function _f(n){return n.nodeType===9?n:n.ownerDocument}function nE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function $g(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Yg=null;function vR(){var n=window.event;return n&&n.type==="popstate"?n===Yg?!1:(Yg=n,!0):(Yg=null,!1)}var sE=typeof setTimeout=="function"?setTimeout:void 0,xR=typeof clearTimeout=="function"?clearTimeout:void 0,iE=typeof Promise=="function"?Promise:void 0,ER=typeof queueMicrotask=="function"?queueMicrotask:typeof iE<"u"?function(n){return iE.resolve(null).then(n).catch(TR)}:sE;function TR(n){setTimeout(function(){throw n})}function Ki(n){return n==="head"}function aE(n,i){var o=i,c=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(m),Dl(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Nu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Nu(o);for(var g=o.firstChild;g;){var b=g.nextSibling,I=g.nodeName;g[us]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=b}}else o==="body"&&Nu(n.ownerDocument.body);o=m}while(o);Dl(i)}function oE(n,i){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Wg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Wg(o),$o(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function wR(n,i,o,c){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[us])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Pr(n.nextSibling),n===null)break}return null}function IR(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Pr(n.nextSibling),n===null))return null;return n}function lE(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Pr(n.nextSibling),n===null))return null;return n}function Xg(n){return n.data==="$?"||n.data==="$~"}function Jg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function SR(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Pr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Zg=null;function cE(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Pr(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function uE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function dE(n,i,o){switch(i=_f(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Nu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);$o(n)}var jr=new Map,hE=new Set;function bf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var oi=me.d;me.d={f:AR,r:NR,D:RR,C:CR,L:kR,m:DR,X:jR,S:PR,M:VR};function AR(){var n=oi.f(),i=uf();return n||i}function NR(n){var i=Tr(n);i!==null&&i.tag===5&&i.type==="form"?Rv(i):oi.r(n)}var Rl=typeof document>"u"?null:document;function fE(n,i,o){var c=Rl;if(c&&typeof i=="string"&&i){var m=Yn(i);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),hE.has(m)||(hE.add(m),n={rel:n,crossOrigin:o,href:i},c.querySelector(m)===null&&(i=c.createElement("link"),In(i,"link",n),Xt(i),c.head.appendChild(i)))}}function RR(n){oi.D(n),fE("dns-prefetch",n,null)}function CR(n,i){oi.C(n,i),fE("preconnect",n,i)}function kR(n,i,o){oi.L(n,i,o);var c=Rl;if(c&&n&&i){var m='link[rel="preload"][as="'+Yn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Yn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Yn(o.imageSizes)+'"]')):m+='[href="'+Yn(n)+'"]';var g=m;switch(i){case"style":g=Cl(n);break;case"script":g=kl(n)}jr.has(g)||(n=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),jr.set(g,n),c.querySelector(m)!==null||i==="style"&&c.querySelector(Ru(g))||i==="script"&&c.querySelector(Cu(g))||(i=c.createElement("link"),In(i,"link",n),Xt(i),c.head.appendChild(i)))}}function DR(n,i){oi.m(n,i);var o=Rl;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Yn(c)+'"][href="'+Yn(n)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=kl(n)}if(!jr.has(g)&&(n=E({rel:"modulepreload",href:n},i),jr.set(g,n),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Cu(g)))return}c=o.createElement("link"),In(c,"link",n),Xt(c),o.head.appendChild(c)}}}function PR(n,i,o){oi.S(n,i,o);var c=Rl;if(c&&n){var m=hs(c).hoistableStyles,g=Cl(n);i=i||"default";var b=m.get(g);if(!b){var I={loading:0,preload:null};if(b=c.querySelector(Ru(g)))I.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},o),(o=jr.get(g))&&ey(n,o);var P=b=c.createElement("link");Xt(P),In(P,"link",n),P._p=new Promise(function(Q,re){P.onload=Q,P.onerror=re}),P.addEventListener("load",function(){I.loading|=1}),P.addEventListener("error",function(){I.loading|=2}),I.loading|=4,vf(b,i,c)}b={type:"stylesheet",instance:b,count:1,state:I},m.set(g,b)}}}function jR(n,i){oi.X(n,i);var o=Rl;if(o&&n){var c=hs(o).hoistableScripts,m=kl(n),g=c.get(m);g||(g=o.querySelector(Cu(m)),g||(n=E({src:n,async:!0},i),(i=jr.get(m))&&ty(n,i),g=o.createElement("script"),Xt(g),In(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function VR(n,i){oi.M(n,i);var o=Rl;if(o&&n){var c=hs(o).hoistableScripts,m=kl(n),g=c.get(m);g||(g=o.querySelector(Cu(m)),g||(n=E({src:n,async:!0,type:"module"},i),(i=jr.get(m))&&ty(n,i),g=o.createElement("script"),Xt(g),In(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function mE(n,i,o,c){var m=(m=fe.current)?bf(m):null;if(!m)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Cl(o.href),o=hs(m).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Cl(o.href);var g=hs(m).hoistableStyles,b=g.get(n);if(b||(m=m.ownerDocument||m,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,b),(g=m.querySelector(Ru(n)))&&!g._p&&(b.instance=g,b.state.loading=5),jr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},jr.set(n,o),g||OR(m,n,o,b.state))),i&&c===null)throw Error(r(528,""));return b}if(i&&c!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=kl(o),o=hs(m).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Cl(n){return'href="'+Yn(n)+'"'}function Ru(n){return'link[rel="stylesheet"]['+n+"]"}function pE(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function OR(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),In(i,"link",o),Xt(i),n.head.appendChild(i))}function kl(n){return'[src="'+Yn(n)+'"]'}function Cu(n){return"script[async]"+n}function gE(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Yn(o.href)+'"]');if(c)return i.instance=c,Xt(c),c;var m=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Xt(c),In(c,"style",m),vf(c,o.precedence,n),i.instance=c;case"stylesheet":m=Cl(o.href);var g=n.querySelector(Ru(m));if(g)return i.state.loading|=4,i.instance=g,Xt(g),g;c=pE(o),(m=jr.get(m))&&ey(c,m),g=(n.ownerDocument||n).createElement("link"),Xt(g);var b=g;return b._p=new Promise(function(I,P){b.onload=I,b.onerror=P}),In(g,"link",c),i.state.loading|=4,vf(g,o.precedence,n),i.instance=g;case"script":return g=kl(o.src),(m=n.querySelector(Cu(g)))?(i.instance=m,Xt(m),m):(c=o,(m=jr.get(g))&&(c=E({},o),ty(c,m)),n=n.ownerDocument||n,m=n.createElement("script"),Xt(m),In(m,"link",c),n.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,vf(c,o.precedence,n));return i.instance}function vf(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,b=0;b<c.length;b++){var I=c[b];if(I.dataset.precedence===i)g=I;else if(g!==m)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function ey(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function ty(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var xf=null;function yE(n,i,o){if(xf===null){var c=new Map,m=xf=new Map;m.set(o,c)}else m=xf,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var g=o[m];if(!(g[us]||g[Wt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(i)||"";b=n+b;var I=c.get(b);I?I.push(g):c.set(b,[g])}}return c}function _E(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function MR(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function bE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function LR(n,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Cl(c.href),g=i.querySelector(Ru(m));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Ef.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=g,Xt(g);return}g=i.ownerDocument||i,c=pE(c),(m=jr.get(m))&&ey(c,m),g=g.createElement("link"),Xt(g);var b=g;b._p=new Promise(function(I,P){b.onload=I,b.onerror=P}),In(g,"link",c),o.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Ef.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var ny=0;function UR(n,i){return n.stylesheets&&n.count===0&&wf(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&wf(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+i);0<n.imgBytes&&ny===0&&(ny=62500*bR());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&wf(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>ny?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function Ef(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Tf=null;function wf(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Tf=new Map,i.forEach(zR,n),Tf=null,Ef.call(n))}function zR(n,i){if(!(i.state.loading&4)){var o=Tf.get(n);if(o)var c=o.get(null);else{o=new Map,Tf.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var b=m[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),c=b)}c&&o.set(null,c)}m=i.instance,b=m.getAttribute("data-precedence"),g=o.get(b)||c,g===c&&o.set(null,m),o.set(b,m),this.count++,c=Ef.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),i.state.loading|=4}}var ku={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function BR(n,i,o,c,m,g,b,I,P){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ls(0),this.hiddenUpdates=ls(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function vE(n,i,o,c,m,g,b,I,P,Q,re,ae){return n=new BR(n,i,o,b,P,Q,re,ae,I),i=1,g===!0&&(i|=24),g=ur(3,null,null,i),n.current=g,g.stateNode=n,i=Vp(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:i},Up(g),n}function xE(n){return n?(n=ll,n):ll}function EE(n,i,o,c,m,g){m=xE(m),c.context===null?c.context=m:c.pendingContext=m,c=Oi(i),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Mi(n,c,i),o!==null&&(tr(o,n,i),cu(o,n,i))}function TE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function ry(n,i){TE(n,i),(n=n.alternate)&&TE(n,i)}function wE(n){if(n.tag===13||n.tag===31){var i=$a(n,67108864);i!==null&&tr(i,n,67108864),ry(n,67108864)}}function IE(n){if(n.tag===13||n.tag===31){var i=pr();i=Oa(i);var o=$a(n,i);o!==null&&tr(o,n,i),ry(n,i)}}var If=!0;function qR(n,i,o,c){var m=Z.T;Z.T=null;var g=me.p;try{me.p=2,sy(n,i,o,c)}finally{me.p=g,Z.T=m}}function FR(n,i,o,c){var m=Z.T;Z.T=null;var g=me.p;try{me.p=8,sy(n,i,o,c)}finally{me.p=g,Z.T=m}}function sy(n,i,o,c){if(If){var m=iy(c);if(m===null)Hg(n,i,c,Sf,o),AE(n,c);else if(GR(m,n,i,o,c))c.stopPropagation();else if(AE(n,c),i&4&&-1<HR.indexOf(n)){for(;m!==null;){var g=Tr(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=as(g.pendingLanes);if(b!==0){var I=g;for(I.pendingLanes|=2,I.entangledLanes|=2;b;){var P=1<<31-Je(b);I.entanglements[1]|=P,b&=~P}Is(g),(ot&6)===0&&(lf=qe()+500,Iu(0))}}break;case 31:case 13:I=$a(g,2),I!==null&&tr(I,g,2),uf(),ry(g,2)}if(g=iy(c),g===null&&Hg(n,i,c,Sf,o),g===m)break;m=g}m!==null&&c.stopPropagation()}else Hg(n,i,c,null,o)}}function iy(n){return n=wr(n),ay(n)}var Sf=null;function ay(n){if(Sf=null,n=ds(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===31){if(n=p(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Sf=n,null}function SE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case kt:return 2;case vn:return 8;case $t:case Da:return 32;case qs:return 268435456;default:return 32}default:return 32}}var oy=!1,$i=null,Yi=null,Wi=null,Du=new Map,Pu=new Map,Xi=[],HR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AE(n,i){switch(n){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":Du.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pu.delete(i.pointerId)}}function ju(n,i,o,c,m,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},i!==null&&(i=Tr(i),i!==null&&wE(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),n)}function GR(n,i,o,c,m){switch(i){case"focusin":return $i=ju($i,n,i,o,c,m),!0;case"dragenter":return Yi=ju(Yi,n,i,o,c,m),!0;case"mouseover":return Wi=ju(Wi,n,i,o,c,m),!0;case"pointerover":var g=m.pointerId;return Du.set(g,ju(Du.get(g)||null,n,i,o,c,m)),!0;case"gotpointercapture":return g=m.pointerId,Pu.set(g,ju(Pu.get(g)||null,n,i,o,c,m)),!0}return!1}function NE(n){var i=ds(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,zr(n.priority,function(){IE(o)});return}}else if(i===31){if(i=p(o),i!==null){n.blockedOn=i,zr(n.priority,function(){IE(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Af(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=iy(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Kc=c,o.target.dispatchEvent(c),Kc=null}else return i=Tr(o),i!==null&&wE(i),n.blockedOn=o,!1;i.shift()}return!0}function RE(n,i,o){Af(n)&&o.delete(i)}function QR(){oy=!1,$i!==null&&Af($i)&&($i=null),Yi!==null&&Af(Yi)&&(Yi=null),Wi!==null&&Af(Wi)&&(Wi=null),Du.forEach(RE),Pu.forEach(RE)}function Nf(n,i){n.blockedOn===i&&(n.blockedOn=null,oy||(oy=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,QR)))}var Rf=null;function CE(n){Rf!==n&&(Rf=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Rf===n&&(Rf=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],m=n[i+2];if(typeof c!="function"){if(ay(c||o)===null)continue;break}var g=Tr(o);g!==null&&(n.splice(i,3),i-=3,ig(g,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function Dl(n){function i(P){return Nf(P,n)}$i!==null&&Nf($i,n),Yi!==null&&Nf(Yi,n),Wi!==null&&Nf(Wi,n),Du.forEach(i),Pu.forEach(i);for(var o=0;o<Xi.length;o++){var c=Xi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Xi.length&&(o=Xi[0],o.blockedOn===null);)NE(o),o.blockedOn===null&&Xi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],g=o[c+1],b=m[dn]||null;if(typeof g=="function")b||CE(o);else if(b){var I=null;if(g&&g.hasAttribute("formAction")){if(m=g,b=g[dn]||null)I=b.formAction;else if(ay(m)!==null)continue}else I=b.action;typeof I=="function"?o[c+1]=I:(o.splice(c,3),c-=3),CE(o)}}}function kE(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(b){return m=b})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function ly(n){this._internalRoot=n}Cf.prototype.render=ly.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,c=pr();EE(o,c,n,i,null,null)},Cf.prototype.unmount=ly.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;EE(n.current,2,null,n,null,null),uf(),i[cs]=null}};function Cf(n){this._internalRoot=n}Cf.prototype.unstable_scheduleHydration=function(n){if(n){var i=ch();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Xi.length&&i!==0&&i<Xi[o].priority;o++);Xi.splice(o,0,n),o===0&&NE(n)}};var DE=e.version;if(DE!=="19.2.3")throw Error(r(527,DE,"19.2.3"));me.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var KR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kf.isDisabled&&kf.supportsFiber)try{Ln=kf.inject(KR),ve=kf}catch{}}return Ou.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,c="",m=Uv,g=zv,b=Bv;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError)),i=vE(n,1,!1,null,null,o,c,null,m,g,b,kE),n[cs]=i.current,Fg(n),new ly(i)},Ou.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var c=!1,m="",g=Uv,b=zv,I=Bv,P=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(P=o.formState)),i=vE(n,1,!0,i,o??null,c,m,P,g,b,I,kE),i.context=xE(null),o=i.current,c=pr(),c=Oa(c),m=Oi(c),m.callback=null,Mi(o,m,c),o=c,i.current.lanes=o,ja(i,o),Is(i),n[cs]=i.current,Fg(n),new Cf(i)},Ou.version="19.2.3",Ou}var qE;function nC(){if(qE)return dy.exports;qE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),dy.exports=tC(),dy.exports}var rC=nC();const sC=A0(rC);const iC=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aC=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),FE=s=>{const e=aC(s);return e.charAt(0).toUpperCase()+e.slice(1)},nI=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),oC=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var lC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cC=mn.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:u,...p},f)=>mn.createElement("svg",{ref:f,...lC,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:nI("lucide",a),...!l&&!oC(p)&&{"aria-hidden":"true"},...p},[...u.map(([y,v])=>mn.createElement(y,v)),...Array.isArray(l)?l:[l]]));const _n=(s,e)=>{const t=mn.forwardRef(({className:r,...a},l)=>mn.createElement(cC,{ref:l,iconNode:e,className:nI(`lucide-${iC(FE(s))}`,`lucide-${s}`,r),...a}));return t.displayName=FE(s),t};const uC=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],dC=_n("archive",uC);const hC=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],rI=_n("box",hC);const fC=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Vy=_n("copy",fC);const mC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],pC=_n("download",mC);const gC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Oy=_n("eye",gC);const yC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],My=_n("file-text",yC);const _C=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],HE=_n("layers",_C);const bC=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],vC=_n("monitor",bC);const xC=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],EC=_n("moon",xC);const TC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ia=_n("plus",TC);const wC=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],zf=_n("printer",wC);const IC=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ly=_n("refresh-cw",IC);const SC=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],AC=_n("save",SC);const NC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],RC=_n("settings",NC);const CC=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Eo=_n("square-pen",CC);const kC=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],DC=_n("sun",kC);const PC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ui=_n("trash-2",PC);const jC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nm=_n("x",jC),VC=()=>{};var GE={};const sI=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},OC=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],u=s[t++],p=s[t++],f=((a&7)<<18|(l&63)<<12|(u&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const l=s[t++],u=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},iI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],u=a+1<s.length,p=u?s[a+1]:0,f=a+2<s.length,y=f?s[a+2]:0,v=l>>2,E=(l&3)<<4|p>>4;let T=(p&15)<<2|y>>6,C=y&63;f||(C=64,u||(T=64)),r.push(t[v],t[E],t[T],t[C])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(sI(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):OC(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],p=a<s.length?t[s.charAt(a)]:0;++a;const y=a<s.length?t[s.charAt(a)]:64;++a;const E=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||p==null||y==null||E==null)throw new MC;const T=l<<2|p>>4;if(r.push(T),y!==64){const C=p<<4&240|y>>2;if(r.push(C),E!==64){const U=y<<6&192|E;r.push(U)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class MC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LC=function(s){const e=sI(s);return iI.encodeByteArray(e,!0)},rm=function(s){return LC(s).replace(/\./g,"")},R0=function(s){try{return iI.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sm(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!UC(t)||(s[t]=sm(s[t],e[t]));return s}function UC(s){return s!=="__proto__"}function C0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const zC=()=>C0().__FIREBASE_DEFAULTS__,BC=()=>{if(typeof process>"u"||typeof GE>"u")return;const s=GE.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},qC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&R0(s[1]);return e&&JSON.parse(e)},k0=()=>{try{return VC()||zC()||BC()||qC()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},D0=()=>k0()?.config,FC=s=>k0()?.[`_${s}`];class HC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Ec(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aI(s){return(await fetch(s,{credentials:"include"})).ok}function GC(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[rm(JSON.stringify(t)),rm(JSON.stringify(u)),""].join(".")}const td={};function QC(){const s={prod:[],emulator:[]};for(const e of Object.keys(td))td[e]?s.emulator.push(e):s.prod.push(e);return s}function KC(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let QE=!1;function oI(s,e){if(typeof window>"u"||typeof document>"u"||!Ec(window.location.host)||td[s]===e||td[s]||QE)return;td[s]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",l=QC().prod.length>0;function u(){const T=document.getElementById(r);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{QE=!0,u()},T}function v(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=KC(r),C=t("text"),U=document.getElementById(C)||document.createElement("span"),H=t("learnmore"),J=document.getElementById(H)||document.createElement("a"),K=t("preprendIcon"),ne=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const oe=T.element;p(oe),v(J,H);const pe=y();f(ne,K),oe.append(ne,U,J,pe),document.body.appendChild(oe)}l?(U.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $C(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function Rm(){const s=k0()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YC(){return typeof window<"u"||lI()}function lI(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function WC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cI(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function P0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uI(){const s=jt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function dI(){return!Rm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hI(){return!Rm()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function gd(){try{return typeof indexedDB=="object"}catch{return!1}}function XC(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const JC="FirebaseError";class Fn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=JC,Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zo.prototype.create)}}class zo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?ZC(l,r):"Error",p=`${this.serviceName}: ${u} (${a}).`;return new Fn(a,p,r)}}function ZC(s,e){return s.replace(e2,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const e2=/\{\$([^}]+)}/g;function KE(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function t2(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ma(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],u=e[a];if($E(l)&&$E(u)){if(!ma(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function $E(s){return s!==null&&typeof s=="object"}function Tc(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Ku(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function fI(s,e){const t=new n2(s,e);return t.subscribe.bind(t)}class n2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");r2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=py),a.error===void 0&&(a.error=py),a.complete===void 0&&(a.complete=py);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function r2(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function py(){}function ke(s){return s&&s._delegate?s._delegate:s}class Ls{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const lo="[DEFAULT]";class s2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new HC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(a2(e))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lo){return this.instances.has(e)}getOptions(e=lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);r===p&&u.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:i2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=lo){return this.component?this.component.multipleInstances?e:lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i2(s){return s===lo?void 0:s}function a2(s){return s.instantiationMode==="EAGER"}class mI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const j0=[];var Qe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Qe||(Qe={}));const pI={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},o2=Qe.INFO,l2={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},c2=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=l2[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cm{constructor(e){this.name=e,this._logLevel=o2,this._logHandler=c2,this._userLogHandler=null,j0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}function u2(s){j0.forEach(e=>{e.setLogLevel(s)})}function d2(s,e){for(const t of j0){let r=null;e&&e.level&&(r=pI[e.level]),s===null?t.userLogHandler=null:t.userLogHandler=(a,l,...u)=>{const p=u.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");l>=(r??a.logLevel)&&s({level:Qe[l].toLowerCase(),message:p,args:u,type:a.name})}}}const h2=(s,e)=>e.some(t=>s instanceof t);let YE,WE;function f2(){return YE||(YE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m2(){return WE||(WE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gI=new WeakMap,Uy=new WeakMap,yI=new WeakMap,gy=new WeakMap,V0=new WeakMap;function p2(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",u)},l=()=>{t(ca(s.result)),a()},u=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&gI.set(t,s)}).catch(()=>{}),V0.set(e,s),e}function g2(s){if(Uy.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",u),s.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",u),s.addEventListener("abort",u)});Uy.set(s,e)}let zy={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Uy.get(s);if(e==="objectStoreNames")return s.objectStoreNames||yI.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ca(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function y2(s){zy=s(zy)}function _2(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(yy(this),e,...t);return yI.set(r,e.sort?e.sort():[e]),ca(r)}:m2().includes(s)?function(...e){return s.apply(yy(this),e),ca(gI.get(this))}:function(...e){return ca(s.apply(yy(this),e))}}function b2(s){return typeof s=="function"?_2(s):(s instanceof IDBTransaction&&g2(s),h2(s,f2())?new Proxy(s,zy):s)}function ca(s){if(s instanceof IDBRequest)return p2(s);if(gy.has(s))return gy.get(s);const e=b2(s);return e!==s&&(gy.set(s,e),V0.set(e,s)),e}const yy=s=>V0.get(s);function v2(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(s,e),p=ca(u);return r&&u.addEventListener("upgradeneeded",f=>{r(ca(u.result),f.oldVersion,f.newVersion,ca(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),p.then(f=>{l&&f.addEventListener("close",()=>l()),a&&f.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const x2=["get","getKey","getAll","getAllKeys","count"],E2=["put","add","delete","clear"],_y=new Map;function XE(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(_y.get(e))return _y.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=E2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||x2.includes(t)))return;const l=async function(u,...p){const f=this.transaction(u,a?"readwrite":"readonly");let y=f.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),a&&f.done]))[0]};return _y.set(e,l),l}y2(s=>({...s,get:(e,t,r)=>XE(e,t)||s.get(e,t,r),has:(e,t)=>!!XE(e,t)||s.has(e,t)}));class T2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(w2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function w2(s){return s.getComponent()?.type==="VERSION"}const im="@firebase/app",By="0.14.7";const hi=new Cm("@firebase/app"),I2="@firebase/app-compat",S2="@firebase/analytics-compat",A2="@firebase/analytics",N2="@firebase/app-check-compat",R2="@firebase/app-check",C2="@firebase/auth",k2="@firebase/auth-compat",D2="@firebase/database",P2="@firebase/data-connect",j2="@firebase/database-compat",V2="@firebase/functions",O2="@firebase/functions-compat",M2="@firebase/installations",L2="@firebase/installations-compat",U2="@firebase/messaging",z2="@firebase/messaging-compat",B2="@firebase/performance",q2="@firebase/performance-compat",F2="@firebase/remote-config",H2="@firebase/remote-config-compat",G2="@firebase/storage",Q2="@firebase/storage-compat",K2="@firebase/firestore",$2="@firebase/ai",Y2="@firebase/firestore-compat",W2="firebase",X2="12.8.0";const pa="[DEFAULT]",J2={[im]:"fire-core",[I2]:"fire-core-compat",[A2]:"fire-analytics",[S2]:"fire-analytics-compat",[R2]:"fire-app-check",[N2]:"fire-app-check-compat",[C2]:"fire-auth",[k2]:"fire-auth-compat",[D2]:"fire-rtdb",[P2]:"fire-data-connect",[j2]:"fire-rtdb-compat",[V2]:"fire-fn",[O2]:"fire-fn-compat",[M2]:"fire-iid",[L2]:"fire-iid-compat",[U2]:"fire-fcm",[z2]:"fire-fcm-compat",[B2]:"fire-perf",[q2]:"fire-perf-compat",[F2]:"fire-rc",[H2]:"fire-rc-compat",[G2]:"fire-gcs",[Q2]:"fire-gcs-compat",[K2]:"fire-fst",[Y2]:"fire-fst-compat",[$2]:"fire-vertex","fire-js":"fire-js",[W2]:"fire-js-all"};const ga=new Map,Zl=new Map,ec=new Map;function yd(s,e){try{s.container.addComponent(e)}catch(t){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function _I(s,e){s.container.addOrOverwriteComponent(e)}function ya(s){const e=s.name;if(ec.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;ec.set(e,s);for(const t of ga.values())yd(t,s);for(const t of Zl.values())yd(t,s);return!0}function bI(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Z2(s,e,t=pa){bI(s,e).clearInstance(t)}function O0(s){return s.options!==void 0}function vI(s){return O0(s)?!1:"authIdToken"in s||"appCheckToken"in s||"releaseOnDeref"in s||"automaticDataCollectionEnabled"in s}function Nt(s){return s==null?!1:s.settings!==void 0}function ek(){ec.clear()}const tk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new zo("app","Firebase",tk);let xI=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}};function JE(s,e){const t=R0(s.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class nk extends xI{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,u={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,u,a);else{const p=e;super(p.options,u,a)}this._serverConfig={automaticDataCollectionEnabled:l,...t},this._serverConfig.authIdToken&&JE(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&JE(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Zr(im,By,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){L0(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw vr.create("server-app-deleted")}}const Ia=X2;function M0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:pa,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw vr.create("bad-app-name",{appName:String(a)});if(t||(t=D0()),!t)throw vr.create("no-options");const l=ga.get(a);if(l){if(ma(t,l.options)&&ma(r,l.config))return l;throw vr.create("duplicate-app",{appName:a})}const u=new mI(a);for(const f of ec.values())u.addComponent(f);const p=new xI(t,r,u);return ga.set(a,p),p}function rk(s,e={}){if(YC()&&!lI())throw vr.create("invalid-server-app-environment");let t,r=e||{};if(s&&(O0(s)?t=s.options:vI(s)?r=s:t=s),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=D0()),!t)throw vr.create("no-options");const a={...r,...t};a.releaseOnDeref!==void 0&&delete a.releaseOnDeref;const l=v=>[...v].reduce((E,T)=>Math.imul(31,E)+T.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw vr.create("finalization-registry-not-supported",{});const u=""+l(JSON.stringify(a)),p=Zl.get(u);if(p)return p.incRefCount(r.releaseOnDeref),p;const f=new mI(u);for(const v of ec.values())f.addComponent(v);const y=new nk(t,r,u,f);return Zl.set(u,y),y}function sk(s=pa){const e=ga.get(s);if(!e&&s===pa&&D0())return M0();if(!e)throw vr.create("no-app",{appName:s});return e}function ik(){return Array.from(ga.values())}async function L0(s){let e=!1;const t=s.name;ga.has(t)?(e=!0,ga.delete(t)):Zl.has(t)&&s.decRefCount()<=0&&(Zl.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function Zr(s,e,t){let r=J2[s]??s;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(u.join(" "));return}ya(new Ls(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function EI(s,e){if(s!==null&&typeof s!="function")throw vr.create("invalid-log-argument");d2(s,e)}function TI(s){u2(s)}const ak="firebase-heartbeat-database",ok=1,_d="firebase-heartbeat-store";let by=null;function wI(){return by||(by=v2(ak,ok,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(_d)}catch(t){console.warn(t)}}}}).catch(s=>{throw vr.create("idb-open",{originalErrorMessage:s.message})})),by}async function lk(s){try{const t=(await wI()).transaction(_d),r=await t.objectStore(_d).get(II(s));return await t.done,r}catch(e){if(e instanceof Fn)hi.warn(e.message);else{const t=vr.create("idb-get",{originalErrorMessage:e?.message});hi.warn(t.message)}}}async function ZE(s,e){try{const r=(await wI()).transaction(_d,"readwrite");await r.objectStore(_d).put(e,II(s)),await r.done}catch(t){if(t instanceof Fn)hi.warn(t.message);else{const r=vr.create("idb-set",{originalErrorMessage:t?.message});hi.warn(r.message)}}}function II(s){return`${s.name}!${s.options.appId}`}const ck=1024,uk=30;class dk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fk(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=eT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>uk){const a=mk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){hi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=eT(),{heartbeatsToSend:t,unsentEntries:r}=hk(this._heartbeatsCache.heartbeats),a=rm(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return hi.warn(e),""}}}function eT(){return new Date().toISOString().substring(0,10)}function hk(s,e=ck){const t=[];let r=s.slice();for(const a of s){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),tT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),tT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class fk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gd()?XC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ZE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ZE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tT(s){return rm(JSON.stringify({version:2,heartbeats:s})).length}function mk(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function pk(s){ya(new Ls("platform-logger",e=>new T2(e),"PRIVATE")),ya(new Ls("heartbeat",e=>new dk(e),"PRIVATE")),Zr(im,By,s),Zr(im,By,"esm2020"),Zr("fire-js","")}pk("");const gk=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Fn,SDK_VERSION:Ia,_DEFAULT_ENTRY_NAME:pa,_addComponent:yd,_addOrOverwriteComponent:_I,_apps:ga,_clearComponents:ek,_components:ec,_getProvider:bI,_isFirebaseApp:O0,_isFirebaseServerApp:Nt,_isFirebaseServerAppSettings:vI,_registerComponent:ya,_removeServiceInstance:Z2,_serverApps:Zl,deleteApp:L0,getApp:sk,getApps:ik,initializeApp:M0,initializeServerApp:rk,onLog:EI,registerVersion:Zr,setLogLevel:TI},Symbol.toStringTag,{value:"Module"}));class yk{constructor(e,t){this._delegate=e,this.firebase=t,yd(e,new Ls("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),L0(this._delegate)))}_getService(e,t=pa){this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&r.getComponent()?.instantiationMode==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=pa){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){yd(this._delegate,e)}_addOrOverwriteComponent(e){_I(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _k={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},nT=new zo("app-compat","Firebase",_k);function bk(s){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:Zr,setLogLevel:TI,onLog:EI,apps:null,SDK_VERSION:Ia,INTERNAL:{registerComponent:p,removeApp:r,useAsService:f,modularAPIs:gk}};t.default=t,Object.defineProperty(t,"apps",{get:u});function r(y){delete e[y]}function a(y){if(y=y||pa,!KE(e,y))throw nT.create("no-app",{appName:y});return e[y]}a.App=s;function l(y,v={}){const E=M0(y,v);if(KE(e,E.name))return e[E.name];const T=new s(E,t);return e[E.name]=T,T}function u(){return Object.keys(e).map(y=>e[y])}function p(y){const v=y.name,E=v.replace("-compat","");if(ya(y)&&y.type==="PUBLIC"){const T=(C=a())=>{if(typeof C[E]!="function")throw nT.create("invalid-app-argument",{appName:v});return C[E]()};y.serviceProps!==void 0&&sm(T,y.serviceProps),t[E]=T,s.prototype[E]=function(...C){return this._getService.bind(this,v).apply(this,y.multipleInstances?C:[])}}return y.type==="PUBLIC"?t[E]:null}function f(y,v){return v==="serverAuth"?null:v}return t}function SI(){const s=bk(yk);s.INTERNAL={...s.INTERNAL,createFirebaseNamespace:SI,extendNamespace:e,createSubscribe:fI,ErrorFactory:zo,deepExtend:sm};function e(t){sm(s,t)}return s}const vk=SI();const rT=new Cm("@firebase/app-compat"),xk="@firebase/app-compat",Ek="0.5.7";function Tk(s){Zr(xk,Ek,s)}try{const s=C0();if(s.firebase!==void 0){rT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=s.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&rT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Vs=vk;Tk();var wk="firebase",Ik="12.8.0";Vs.registerVersion(wk,Ik,"app-compat");const Mu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Pl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function Sk(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function AI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ak=Sk,Nk=AI,NI=new zo("auth","Firebase",AI());const am=new Cm("@firebase/auth");function Rk(s,...e){am.logLevel<=Qe.WARN&&am.warn(`Auth (${Ia}): ${s}`,...e)}function Bf(s,...e){am.logLevel<=Qe.ERROR&&am.error(`Auth (${Ia}): ${s}`,...e)}function Rn(s,...e){throw z0(s,...e)}function cn(s,...e){return z0(s,...e)}function U0(s,e,t){const r={...Nk(),[e]:t};return new zo("auth","Firebase",r).create(e,{appName:s.name})}function yn(s){return U0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wc(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Rn(s,"argument-error"),U0(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function z0(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return NI.create(s,...e)}function he(s,e,...t){if(!s)throw z0(e,...t)}function Ds(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Bf(e),new Error(e)}function rs(s,e){s||Ds(e)}function bd(){return typeof self<"u"&&self.location?.href||""}function B0(){return sT()==="http:"||sT()==="https:"}function sT(){return typeof self<"u"&&self.location?.protocol||null}function Ck(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B0()||cI()||"connection"in navigator)?navigator.onLine:!0}function kk(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Ud{constructor(e,t){this.shortDelay=e,this.longDelay=t,rs(t>e,"Short delay should be less than long delay!"),this.isMobile=$C()||P0()}get(){return Ck()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function q0(s,e){rs(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class RI{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Pk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jk=new Ud(3e4,6e4);function Ut(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function zt(s,e,t,r,a={}){return CI(s,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const p=Tc({key:s.config.apiKey,...u}).slice(1),f=await s._getAdditionalHeaders();f["Content-Type"]="application/json",s.languageCode&&(f["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:f,...l};return WC()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Ec(s.emulatorConfig.host)&&(y.credentials="include"),RI.fetch()(await kI(s,s.config.apiHost,t,p),y)})}async function CI(s,e,t){s._canInitEmulator=!1;const r={...Dk,...e};try{const a=new Ok(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw $u(s,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const p=l.ok?u.errorMessage:u.error.message,[f,y]=p.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw $u(s,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw $u(s,"email-already-in-use",u);if(f==="USER_DISABLED")throw $u(s,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw U0(s,v,y);Rn(s,v)}}catch(a){if(a instanceof Fn)throw a;Rn(s,"network-request-failed",{message:String(a)})}}async function gi(s,e,t,r,a={}){const l=await zt(s,e,t,r,a);return"mfaPendingCredential"in l&&Rn(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function kI(s,e,t,r){const a=`${e}${t}?${r}`,l=s,u=l.config.emulator?q0(s.config,a):`${s.config.apiScheme}://${a}`;return Pk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function Vk(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ok{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),jk.get())})}}function $u(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=cn(s,e,r);return a.customData._tokenResponse=t,a}function iT(s){return s!==void 0&&s.getResponse!==void 0}function aT(s){return s!==void 0&&s.enterprise!==void 0}class DI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Vk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Mk(s){return(await zt(s,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function PI(s,e){return zt(s,"GET","/v2/recaptchaConfig",Ut(s,e))}async function Lk(s,e){return zt(s,"POST","/v1/accounts:delete",e)}async function Uk(s,e){return zt(s,"POST","/v1/accounts:update",e)}async function om(s,e){return zt(s,"POST","/v1/accounts:lookup",e)}function nd(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zk(s,e=!1){const t=ke(s),r=await t.getIdToken(e),a=km(r);he(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:r,authTime:nd(vy(a.auth_time)),issuedAtTime:nd(vy(a.iat)),expirationTime:nd(vy(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function vy(s){return Number(s)*1e3}function km(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return Bf("JWT malformed, contained fewer than 3 sections"),null;try{const a=R0(t);return a?JSON.parse(a):(Bf("Failed to decode base64 JWT payload"),null)}catch(a){return Bf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function oT(s){const e=km(s);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function fi(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Fn&&Bk(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function Bk({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class qk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class qy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nd(this.lastLoginAt),this.creationTime=nd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vd(s){const e=s.auth,t=await s.getIdToken(),r=await fi(s,om(e,{idToken:t}));he(r?.users.length,e,"internal-error");const a=r.users[0];s._notifyReloadListener(a);const l=a.providerUserInfo?.length?jI(a.providerUserInfo):[],u=Hk(s.providerData,l),p=s.isAnonymous,f=!(s.email&&a.passwordHash)&&!u?.length,y=p?f:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new qy(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(s,v)}async function Fk(s){const e=ke(s);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hk(s,e){return[...s.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function jI(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Gk(s,e){const t=await CI(s,{},async()=>{const r=Tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,u=await kI(s,a,"/v1/token",`key=${l}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:p,body:r};return s.emulatorConfig&&Ec(s.emulatorConfig.host)&&(f.credentials="include"),RI.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Qk(s,e){return zt(s,"POST","/v2/accounts:revokeToken",Ut(s,e))}class Ql{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=oT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await Gk(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new Ql;return r&&(he(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(he(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(he(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ql,this.toJSON())}_performRefresh(){return Ds("not implemented")}}function Zi(s,e){he(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Xr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new qk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new qy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await fi(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return zk(this,e)}reload(){return Fk(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await vd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nt(this.auth.app))return Promise.reject(yn(this.auth));const e=await this.getIdToken();return await fi(this,Lk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,p=t.tenantId??void 0,f=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:C,providerData:U,stsTokenManager:H}=t;he(E&&H,e,"internal-error");const J=Ql.fromJSON(this.name,H);he(typeof E=="string",e,"internal-error"),Zi(r,e.name),Zi(a,e.name),he(typeof T=="boolean",e,"internal-error"),he(typeof C=="boolean",e,"internal-error"),Zi(l,e.name),Zi(u,e.name),Zi(p,e.name),Zi(f,e.name),Zi(y,e.name),Zi(v,e.name);const K=new Xr({uid:E,auth:e,email:a,emailVerified:T,displayName:r,isAnonymous:C,photoURL:u,phoneNumber:l,tenantId:p,stsTokenManager:J,createdAt:y,lastLoginAt:v});return U&&Array.isArray(U)&&(K.providerData=U.map(ne=>({...ne}))),f&&(K._redirectEventId=f),K}static async _fromIdTokenResponse(e,t,r=!1){const a=new Ql;a.updateFromServerResponse(t);const l=new Xr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await vd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];he(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?jI(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,p=new Ql;p.updateFromIdToken(r);const f=new Xr({uid:a.localId,auth:e,stsTokenManager:p,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new qy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(f,y),f}}const lT=new Map;function br(s){rs(s instanceof Function,"Expected a class definition");let e=lT.get(s);return e?(rs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,lT.set(s,e),e)}class VI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VI.type="NONE";const tc=VI;function To(s,e,t){return`firebase:${s}:${e}:${t}`}class Kl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=To(this.userKey,a.apiKey,l),this.fullPersistenceKey=To("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await om(this.auth,{idToken:e}).catch(()=>{});return t?Xr._fromGetAccountInfoResponse(this.auth,t,e):null}return Xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Kl(br(tc),e,r);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||br(tc);const u=To(r,e.config.apiKey,e.name);let p=null;for(const y of t)try{const v=await y._get(u);if(v){let E;if(typeof v=="string"){const T=await om(e,{idToken:v}).catch(()=>{});if(!T)break;E=await Xr._fromGetAccountInfoResponse(e,T,v)}else E=Xr._fromJSON(e,v);y!==l&&(p=E),l=y;break}}catch{}const f=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new Kl(l,e,r):(l=f[0],p&&await l._set(u,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Kl(l,e,r))}}function cT(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zI(e))return"Blackberry";if(BI(e))return"Webos";if(MI(e))return"Safari";if((e.includes("chrome/")||LI(e))&&!e.includes("edge/"))return"Chrome";if(zd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function OI(s=jt()){return/firefox\//i.test(s)}function MI(s=jt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LI(s=jt()){return/crios\//i.test(s)}function UI(s=jt()){return/iemobile/i.test(s)}function zd(s=jt()){return/android/i.test(s)}function zI(s=jt()){return/blackberry/i.test(s)}function BI(s=jt()){return/webos/i.test(s)}function Bd(s=jt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Kk(s=jt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(s)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(s)}function $k(s=jt()){return Bd(s)&&!!window.navigator?.standalone}function Yk(){return uI()&&document.documentMode===10}function qI(s=jt()){return Bd(s)||zd(s)||BI(s)||zI(s)||/windows phone/i.test(s)||UI(s)}function FI(s,e=[]){let t;switch(s){case"Browser":t=cT(jt());break;case"Worker":t=`${cT(jt())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ia}/${r}`}class Wk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,p)=>{try{const f=e(l);u(f)}catch(f){p(f)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Xk(s,e={}){return zt(s,"GET","/v2/passwordPolicy",Ut(s,e))}const Jk=6;class Zk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Jk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class eD{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uT(this),this.idTokenSubscription=new uT(this),this.beforeStateQueue=new Wk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=br(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await om(this,{idToken:e}),r=await Xr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Nt(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!l||l===u)&&p?.user&&(r=p.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nt(this.app))return Promise.reject(yn(this));const t=e?ke(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nt(this.app)?Promise.reject(yn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nt(this.app)?Promise.reject(yn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Xk(this),t=new Zk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Qk(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&br(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[br(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(p,this,"internal-error"),p.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,a);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Nt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Rk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Vt(s){return ke(s)}class uT{constructor(e){this.auth=e,this.observer=null,this.addObserver=fI(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tD(s){qd=s}function F0(s){return qd.loadJS(s)}function nD(){return qd.recaptchaV2Script}function rD(){return qd.recaptchaEnterpriseScript}function sD(){return qd.gapiScript}function HI(s){return`__${s}${Math.floor(Math.random()*1e6)}`}const iD=500,aD=6e4,Df=1e12;class oD{constructor(e){this.auth=e,this.counter=Df,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new uD(e,this.auth.name,t||{})),this.counter++,r}reset(e){const t=e||Df;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||Df;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||Df;return this._widgets.get(t)?.execute(),""}}class lD{constructor(){this.enterprise=new cD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class cD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class uD{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;he(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=dD(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},aD)},iD))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function dD(s){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<s;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const hD="recaptcha-enterprise",rd="NO_RECAPTCHA";class GI{constructor(e){this.type=hD,this.auth=Vt(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,p)=>{PI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new DI(f);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(f=>{p(f)})})}function a(l,u,p){const f=window.grecaptcha;aT(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(rd)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lD().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(p=>{if(!t&&aT(window.grecaptcha))a(p,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=rD();f.length!==0&&(f+=p),F0(f).then(()=>{a(p,l,u)}).catch(y=>{u(y)})}}).catch(p=>{u(p)})})}}async function Lu(s,e,t,r=!1,a=!1){const l=new GI(s);let u;if(a)u=rd;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const f=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const f=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function ua(s,e,t,r,a){if(a==="EMAIL_PASSWORD_PROVIDER")if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Lu(s,e,t,t==="getOobCode");return r(s,l)}else return r(s,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Lu(s,e,t,t==="getOobCode");return r(s,u)}else return Promise.reject(l)});else if(a==="PHONE_PROVIDER")if(s._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const l=await Lu(s,e,t);return r(s,l).catch(async u=>{if(s._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const p=await Lu(s,e,t,!1,!0);return r(s,p)}return Promise.reject(u)})}else{const l=await Lu(s,e,t,!1,!0);return r(s,l)}else return Promise.reject(a+" provider is not supported.")}async function fD(s){const e=Vt(s),t=await PI(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new DI(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new GI(e).verify()}function mD(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(br);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function pD(s,e,t){const r=Vt(s);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!!t?.disableWarnings,l=QI(e),{host:u,port:p}=gD(e),f=p===null?"":`:${p}`,y={url:`${l}//${u}${f}/`},v=Object.freeze({host:u,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(ma(y,r.config.emulator)&&ma(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Ec(u)?(aI(`${l}//${u}${f}`),oI("Auth",!0)):a||yD()}function QI(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function gD(s){const e=QI(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:dT(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:dT(u)}}}function dT(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function yD(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Ic{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ds("not implemented")}_getIdTokenResponse(e){return Ds("not implemented")}_linkToIdToken(e,t){return Ds("not implemented")}_getReauthenticationResolver(e){return Ds("not implemented")}}async function KI(s,e){return zt(s,"POST","/v1/accounts:resetPassword",Ut(s,e))}async function _D(s,e){return zt(s,"POST","/v1/accounts:update",e)}async function bD(s,e){return zt(s,"POST","/v1/accounts:signUp",e)}async function vD(s,e){return zt(s,"POST","/v1/accounts:update",Ut(s,e))}async function xD(s,e){return gi(s,"POST","/v1/accounts:signInWithPassword",Ut(s,e))}async function Dm(s,e){return zt(s,"POST","/v1/accounts:sendOobCode",Ut(s,e))}async function ED(s,e){return Dm(s,e)}async function TD(s,e){return Dm(s,e)}async function wD(s,e){return Dm(s,e)}async function ID(s,e){return Dm(s,e)}async function SD(s,e){return gi(s,"POST","/v1/accounts:signInWithEmailLink",Ut(s,e))}async function AD(s,e){return gi(s,"POST","/v1/accounts:signInWithEmailLink",Ut(s,e))}class xd extends Ic{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new xd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new xd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ua(e,t,"signInWithPassword",xD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return SD(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ua(e,r,"signUpPassword",bD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return AD(e,{idToken:t,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function di(s,e){return gi(s,"POST","/v1/accounts:signInWithIdp",Ut(s,e))}const ND="http://localhost";class Us extends Ic{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Us(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const u=new Us(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return di(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,di(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,di(e,t)}buildRequest(){const e={requestUri:ND,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Tc(t)}return e}}async function hT(s,e){return zt(s,"POST","/v1/accounts:sendVerificationCode",Ut(s,e))}async function RD(s,e){return gi(s,"POST","/v1/accounts:signInWithPhoneNumber",Ut(s,e))}async function CD(s,e){const t=await gi(s,"POST","/v1/accounts:signInWithPhoneNumber",Ut(s,e));if(t.temporaryProof)throw $u(s,"account-exists-with-different-credential",t);return t}const kD={USER_NOT_FOUND:"user-not-found"};async function DD(s,e){const t={...e,operation:"REAUTH"};return gi(s,"POST","/v1/accounts:signInWithPhoneNumber",Ut(s,t),kD)}class wo extends Ic{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new wo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new wo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return RD(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return CD(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return DD(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l}=e;return!r&&!t&&!a&&!l?null:new wo({verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l})}}function PD(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jD(s){const e=Gl(Ku(s)).link,t=e?Gl(Ku(e)).deep_link_id:null,r=Gl(Ku(s)).deep_link_id;return(r?Gl(Ku(r)).link:null)||r||t||e||s}class Pm{constructor(e){const t=Gl(Ku(e)),r=t.apiKey??null,a=t.oobCode??null,l=PD(t.mode??null);he(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=jD(e);try{return new Pm(t)}catch{return null}}}class Sa{constructor(){this.providerId=Sa.PROVIDER_ID}static credential(e,t){return xd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Pm.parseLink(t);return he(r,"argument-error"),xd._fromEmailAndCode(e,r.code,r.tenantId)}}Sa.PROVIDER_ID="password";Sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class yi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Sc extends yi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $l extends Sc{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return he("providerId"in t&&"signInMethod"in t,"argument-error"),Us._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return he(e.idToken||e.accessToken,"argument-error"),Us._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return $l.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return $l.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:a,pendingToken:l,nonce:u,providerId:p}=e;if(!r&&!a&&!t&&!l||!p)return null;try{return new $l(p)._credential({idToken:t,accessToken:r,nonce:u,pendingToken:l})}catch{return null}}}class Ns extends Sc{constructor(){super("facebook.com")}static credential(e){return Us._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ns.credential(e.oauthAccessToken)}catch{return null}}}Ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ns.PROVIDER_ID="facebook.com";class Rs extends Sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Us._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Rs.credential(t,r)}catch{return null}}}Rs.GOOGLE_SIGN_IN_METHOD="google.com";Rs.PROVIDER_ID="google.com";class Cs extends Sc{constructor(){super("github.com")}static credential(e){return Us._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cs.credential(e.oauthAccessToken)}catch{return null}}}Cs.GITHUB_SIGN_IN_METHOD="github.com";Cs.PROVIDER_ID="github.com";const VD="http://localhost";class nc extends Ic{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return di(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,di(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,di(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,pendingToken:l}=t;return!r||!a||!l||r!==a?null:new nc(r,l)}static _create(e,t){return new nc(e,t)}buildRequest(){return{requestUri:VD,returnSecureToken:!0,pendingToken:this.pendingToken}}}const OD="saml.";class lm extends yi{constructor(e){he(e.startsWith(OD),"argument-error"),super(e)}static credentialFromResult(e){return lm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return lm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=nc.fromJSON(e);return he(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return nc._create(r,t)}catch{return null}}}class ks extends Sc{constructor(){super("twitter.com")}static credential(e,t){return Us._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ks.credential(t,r)}catch{return null}}}ks.TWITTER_SIGN_IN_METHOD="twitter.com";ks.PROVIDER_ID="twitter.com";async function $I(s,e){return gi(s,"POST","/v1/accounts:signUp",Ut(s,e))}class Mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Xr._fromIdTokenResponse(e,r,a),u=fT(r);return new Mr({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=fT(r);return new Mr({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function fT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function MD(s){if(Nt(s.app))return Promise.reject(yn(s));const e=Vt(s);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Mr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await $I(e,{returnSecureToken:!0}),r=await Mr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class cm extends Fn{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,cm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new cm(e,t,r,a)}}function YI(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?cm._fromErrorAndOperation(s,l,e,r):l})}function WI(s){return new Set(s.map(({providerId:e})=>e).filter(e=>!!e))}async function LD(s,e){const t=ke(s);await jm(!0,t,e);const{providerUserInfo:r}=await Uk(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=WI(r||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function H0(s,e,t=!1){const r=await fi(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Mr._forOperation(s,"link",r)}async function jm(s,e,t){await vd(e);const r=WI(e.providerData),a=s===!1?"provider-already-linked":"no-such-provider";he(r.has(t)===s,e.auth,a)}async function XI(s,e,t=!1){const{auth:r}=s;if(Nt(r.app))return Promise.reject(yn(r));const a="reauthenticate";try{const l=await fi(s,YI(r,a,e,s),t);he(l.idToken,r,"internal-error");const u=km(l.idToken);he(u,r,"internal-error");const{sub:p}=u;return he(s.uid===p,r,"user-mismatch"),Mr._forOperation(s,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Rn(r,"user-mismatch"),l}}async function JI(s,e,t=!1){if(Nt(s.app))return Promise.reject(yn(s));const r="signIn",a=await YI(s,r,e),l=await Mr._fromIdTokenResponse(s,r,a);return t||await s._updateCurrentUser(l.user),l}async function Vm(s,e){return JI(Vt(s),e)}async function ZI(s,e){const t=ke(s);return await jm(!1,t,e.providerId),H0(t,e)}async function eS(s,e){return XI(ke(s),e)}async function UD(s,e){return gi(s,"POST","/v1/accounts:signInWithCustomToken",Ut(s,e))}async function zD(s,e){if(Nt(s.app))return Promise.reject(yn(s));const t=Vt(s),r=await UD(t,{token:e,returnSecureToken:!0}),a=await Mr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(a.user),a}class Fd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?G0._fromServerResponse(e,t):"totpInfo"in t?Q0._fromServerResponse(e,t):Rn(e,"internal-error")}}class G0 extends Fd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new G0(t)}}class Q0 extends Fd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Q0(t)}}function Om(s,e,t){he(t.url?.length>0,s,"invalid-continue-uri"),he(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,s,"invalid-dynamic-link-domain"),he(typeof t.linkDomain>"u"||t.linkDomain.length>0,s,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(he(t.iOS.bundleId.length>0,s,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(he(t.android.packageName.length>0,s,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function K0(s){const e=Vt(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BD(s,e,t){const r=Vt(s),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Om(r,a,t),await ua(r,a,"getOobCode",TD,"EMAIL_PASSWORD_PROVIDER")}async function qD(s,e,t){await KI(ke(s),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&K0(s),r})}async function FD(s,e){await vD(ke(s),{oobCode:e})}async function tS(s,e){const t=ke(s),r=await KI(t,{oobCode:e}),a=r.requestType;switch(he(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(r.mfaInfo,t,"internal-error");default:he(r.email,t,"internal-error")}let l=null;return r.mfaInfo&&(l=Fd._fromServerResponse(Vt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:l},operation:a}}async function HD(s,e){const{data:t}=await tS(ke(s),e);return t.email}async function GD(s,e,t){if(Nt(s.app))return Promise.reject(yn(s));const r=Vt(s),u=await ua(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$I,"EMAIL_PASSWORD_PROVIDER").catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&K0(s),f}),p=await Mr._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(p.user),p}function QD(s,e,t){return Nt(s.app)?Promise.reject(yn(s)):Vm(ke(s),Sa.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&K0(s),r})}async function KD(s,e,t){const r=Vt(s),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(u,p){he(p.handleCodeInApp,r,"argument-error"),p&&Om(r,u,p)}l(a,t),await ua(r,a,"getOobCode",wD,"EMAIL_PASSWORD_PROVIDER")}function $D(s,e){return Pm.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function YD(s,e,t){if(Nt(s.app))return Promise.reject(yn(s));const r=ke(s),a=Sa.credentialWithLink(e,t||bd());return he(a._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Vm(r,a)}async function WD(s,e){return zt(s,"POST","/v1/accounts:createAuthUri",Ut(s,e))}async function XD(s,e){const t=B0()?bd():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:a}=await WD(ke(s),r);return a||[]}async function JD(s,e){const t=ke(s),a={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()};e&&Om(t.auth,a,e);const{email:l}=await ED(t.auth,a);l!==s.email&&await s.reload()}async function ZD(s,e,t){const r=ke(s),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await s.getIdToken(),newEmail:e};t&&Om(r.auth,l,t);const{email:u}=await ID(r.auth,l);u!==s.email&&await s.reload()}async function eP(s,e){return zt(s,"POST","/v1/accounts:update",e)}async function tP(s,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=ke(s),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await fi(r,eP(r.auth,l));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const p=r.providerData.find(({providerId:f})=>f==="password");p&&(p.displayName=r.displayName,p.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function nP(s,e){const t=ke(s);return Nt(t.auth.app)?Promise.reject(yn(t.auth)):nS(t,e,null)}function rP(s,e){return nS(ke(s),null,e)}async function nS(s,e,t){const{auth:r}=s,l={idToken:await s.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const u=await fi(s,_D(r,l));await s._updateTokensIfNecessary(u,!0)}function sP(s){if(!s)return null;const{providerId:e}=s,t=s.rawUserInfo?JSON.parse(s.rawUserInfo):{},r=s.isNewUser||s.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&s?.idToken){const a=km(s.idToken)?.firebase?.sign_in_provider;if(a){const l=a!=="anonymous"&&a!=="custom"?a:null;return new Yl(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new iP(r,t);case"github.com":return new aP(r,t);case"google.com":return new oP(r,t);case"twitter.com":return new lP(r,t,s.screenName||null);case"custom":case"anonymous":return new Yl(r,null);default:return new Yl(r,e,t)}}class Yl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class rS extends Yl{constructor(e,t,r,a){super(e,t,r),this.username=a}}class iP extends Yl{constructor(e,t){super(e,"facebook.com",t)}}class aP extends rS{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}}class oP extends Yl{constructor(e,t){super(e,"google.com",t)}}class lP extends rS{constructor(e,t,r){super(e,"twitter.com",t,r)}}function cP(s){const{user:e,_tokenResponse:t}=s;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:sP(t)}class yo{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new yo("enroll",e,t)}static _fromMfaPendingCredential(e){return new yo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return yo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return yo._fromIdtoken(e.multiFactorSession.idToken)}return null}}class $0{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Vt(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(p=>Fd._fromServerResponse(r,p));he(a.mfaPendingCredential,r,"internal-error");const u=yo._fromMfaPendingCredential(a.mfaPendingCredential);return new $0(u,l,async p=>{const f=await p._process(r,u);delete a.mfaInfo,delete a.mfaPendingCredential;const y={...a,idToken:f.idToken,refreshToken:f.refreshToken};switch(t.operationType){case"signIn":const v=await Mr._fromIdTokenResponse(r,t.operationType,y);return await r._updateCurrentUser(v.user),v;case"reauthenticate":return he(t.user,r,"internal-error"),Mr._forOperation(t.user,t.operationType,y);default:Rn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function uP(s,e){const t=ke(s),r=e;return he(e.customData.operationType,t,"argument-error"),he(r.customData._serverResponse?.mfaPendingCredential,t,"argument-error"),$0._fromError(t,r)}function mT(s,e){return zt(s,"POST","/v2/accounts/mfaEnrollment:start",Ut(s,e))}function dP(s,e){return zt(s,"POST","/v2/accounts/mfaEnrollment:finalize",Ut(s,e))}function hP(s,e){return zt(s,"POST","/v2/accounts/mfaEnrollment:withdraw",Ut(s,e))}class Y0{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Fd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Y0(e)}async getSession(){return yo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,a=await this.getSession(),l=await fi(this.user,r._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const a=await fi(this.user,hP(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const xy=new WeakMap;function fP(s){const e=ke(s);return xy.has(e)||xy.set(e,Y0._fromUser(e)),xy.get(e)}const um="__sak";class sS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(um,"1"),this.storage.removeItem(um),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const mP=1e3,pP=10;class iS extends sS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,p,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);Yk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,pP):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},mP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iS.type="LOCAL";const W0=iS;class aS extends sS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}aS.type="SESSION";const So=aS;function gP(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Mm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Mm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const p=Array.from(u).map(async y=>y(t.origin,l)),f=await gP(p);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mm.receivers=[];function Hd(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class yP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((p,f)=>{const y=Hd("",20);a.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(T.data.response);break;default:clearTimeout(v),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function sn(){return window}function _P(s){sn().location.href=s}function X0(){return typeof sn().WorkerGlobalScope<"u"&&typeof sn().importScripts=="function"}async function bP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vP(){return navigator?.serviceWorker?.controller||null}function xP(){return X0()?self:null}const oS="firebaseLocalStorageDb",EP=1,dm="firebaseLocalStorage",lS="fbase_key";class Gd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lm(s,e){return s.transaction([dm],e?"readwrite":"readonly").objectStore(dm)}function TP(){const s=indexedDB.deleteDatabase(oS);return new Gd(s).toPromise()}function Fy(){const s=indexedDB.open(oS,EP);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(dm,{keyPath:lS})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(dm)?e(r):(r.close(),await TP(),e(await Fy()))})})}async function pT(s,e,t){const r=Lm(s,!0).put({[lS]:e,value:t});return new Gd(r).toPromise()}async function wP(s,e){const t=Lm(s,!1).get(e),r=await new Gd(t).toPromise();return r===void 0?null:r.value}function gT(s,e){const t=Lm(s,!0).delete(e);return new Gd(t).toPromise()}const IP=800,SP=3;class cS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>SP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mm._getInstance(xP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await bP(),!this.activeServiceWorker)return;this.sender=new yP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fy();return await pT(e,um,"1"),await gT(e,um),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>pT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>wP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>gT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Lm(a,!1).getAll();return new Gd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cS.type="LOCAL";const Ed=cS;function yT(s,e){return zt(s,"POST","/v2/accounts/mfaSignIn:start",Ut(s,e))}function AP(s,e){return zt(s,"POST","/v2/accounts/mfaSignIn:finalize",Ut(s,e))}const Ey=HI("rcb"),NP=new Ud(3e4,6e4);class RP{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!sn().grecaptcha?.render}load(e,t=""){return he(CP(t),e,"argument-error"),this.shouldResolveImmediately(t)&&iT(sn().grecaptcha)?Promise.resolve(sn().grecaptcha):new Promise((r,a)=>{const l=sn().setTimeout(()=>{a(cn(e,"network-request-failed"))},NP.get());sn()[Ey]=()=>{sn().clearTimeout(l),delete sn()[Ey];const p=sn().grecaptcha;if(!p||!iT(p)){a(cn(e,"internal-error"));return}const f=p.render;p.render=(y,v)=>{const E=f(y,v);return this.counter++,E},this.hostLanguage=t,r(p)};const u=`${nD()}?${Tc({onload:Ey,render:"explicit",hl:t})}`;F0(u).catch(()=>{clearTimeout(l),a(cn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!sn().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function CP(s){return s.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(s)}class kP{async load(e){return new oD(e)}clearedOneInstance(){}}const sd="recaptcha",DP={theme:"light",type:"image"};let PP=class{constructor(e,t,r={...DP}){this.parameters=r,this.type=sd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Vt(e),this.isInvisible=this.parameters.size==="invisible",he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;he(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kP:new RP,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(a=>{const l=u=>{u&&(this.tokenChangeListeners.delete(l),a(u))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=sn()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){he(B0()&&!X0(),this.auth,"internal-error"),await jP(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Mk(this.auth);he(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function jP(){let s=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}s=()=>e(),window.addEventListener("load",s)}).catch(e=>{throw s&&window.removeEventListener("load",s),e})}class J0{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=wo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function VP(s,e,t){if(Nt(s.app))return Promise.reject(yn(s));const r=Vt(s),a=await Um(r,e,ke(t));return new J0(a,l=>Vm(r,l))}async function OP(s,e,t){const r=ke(s);await jm(!1,r,"phone");const a=await Um(r.auth,e,ke(t));return new J0(a,l=>ZI(r,l))}async function MP(s,e,t){const r=ke(s);if(Nt(r.auth.app))return Promise.reject(yn(r.auth));const a=await Um(r.auth,e,ke(t));return new J0(a,l=>eS(r,l))}async function Um(s,e,t){if(!s._getRecaptchaConfig())try{await fD(s)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const a=r.session;if("phoneNumber"in r){he(a.type==="enroll",s,"internal-error");const l={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ua(s,l,"mfaSmsEnrollment",async(y,v)=>{if(v.phoneEnrollmentInfo.captchaResponse===rd){he(t?.type===sd,y,"argument-error");const E=await Ty(y,v,t);return mT(y,E)}return mT(y,v)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneSessionInfo.sessionInfo}else{he(a.type==="signin",s,"internal-error");const l=r.multiFactorHint?.uid||r.multiFactorUid;he(l,s,"missing-multi-factor-info");const u={mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ua(s,u,"mfaSmsSignIn",async(v,E)=>{if(E.phoneSignInInfo.captchaResponse===rd){he(t?.type===sd,v,"argument-error");const T=await Ty(v,E,t);return yT(v,T)}return yT(v,E)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ua(s,a,"sendVerificationCode",async(f,y)=>{if(y.captchaResponse===rd){he(t?.type===sd,f,"argument-error");const v=await Ty(f,y,t);return hT(f,v)}return hT(f,y)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{t?._reset()}}async function LP(s,e){const t=ke(s);if(Nt(t.auth.app))return Promise.reject(yn(t.auth));await H0(t,e)}async function Ty(s,e,t){he(t.type===sd,s,"argument-error");const r=await t.verify();he(typeof r=="string",s,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.captchaResponse,p=a.phoneEnrollmentInfo.clientType,f=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:r,captchaResponse:u,clientType:p,recaptchaVersion:f}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,u=a.phoneSignInInfo.clientType,p=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:l,clientType:u,recaptchaVersion:p}}),a}else return Object.assign(a,{recaptchaToken:r}),a}let Ao=class qf{constructor(e){this.providerId=qf.PROVIDER_ID,this.auth=Vt(e)}verifyPhoneNumber(e,t){return Um(this.auth,e,ke(t))}static credential(e,t){return wo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return qf.credentialFromTaggedObject(t)}static credentialFromError(e){return qf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?wo._fromTokenResponse(t,r):null}};Ao.PROVIDER_ID="phone";Ao.PHONE_SIGN_IN_METHOD="phone";function Bo(s,e){return e?br(e):(he(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Z0 extends Ic{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return di(e,this._buildIdpRequest())}_linkToIdToken(e,t){return di(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return di(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UP(s){return JI(s.auth,new Z0(s),s.bypassAuthState)}function zP(s){const{auth:e,user:t}=s;return he(t,e,"internal-error"),XI(t,new Z0(s),s.bypassAuthState)}async function BP(s){const{auth:e,user:t}=s;return he(t,e,"internal-error"),H0(t,new Z0(s),s.bypassAuthState)}class uS{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:p}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(f))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UP;case"linkViaPopup":case"linkViaRedirect":return BP;case"reauthViaPopup":case"reauthViaRedirect":return zP;default:Rn(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qP=new Ud(2e3,1e4);async function FP(s,e,t){if(Nt(s.app))return Promise.reject(cn(s,"operation-not-supported-in-this-environment"));const r=Vt(s);wc(s,e,yi);const a=Bo(r,t);return new li(r,"signInViaPopup",e,a).executeNotNull()}async function HP(s,e,t){const r=ke(s);if(Nt(r.auth.app))return Promise.reject(cn(r.auth,"operation-not-supported-in-this-environment"));wc(r.auth,e,yi);const a=Bo(r.auth,t);return new li(r.auth,"reauthViaPopup",e,a,r).executeNotNull()}async function GP(s,e,t){const r=ke(s);wc(r.auth,e,yi);const a=Bo(r.auth,t);return new li(r.auth,"linkViaPopup",e,a,r).executeNotNull()}class li extends uS{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,li.currentPopupAction&&li.currentPopupAction.cancel(),li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=Hd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,li.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qP.get())};e()}}li.currentPopupAction=null;const QP="pendingRedirect",id=new Map;class KP extends uS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=id.get(this.auth._key());if(!e){try{const r=await $P(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $P(s,e){const t=hS(e),r=dS(s);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}async function e_(s,e){return dS(s)._set(hS(e),"true")}function YP(){id.clear()}function t_(s,e){id.set(s._key(),e)}function dS(s){return br(s._redirectPersistence)}function hS(s){return To(QP,s.config.apiKey,s.name)}function WP(s,e,t){return XP(s,e,t)}async function XP(s,e,t){if(Nt(s.app))return Promise.reject(yn(s));const r=Vt(s);wc(s,e,yi),await r._initializationPromise;const a=Bo(r,t);return await e_(a,r),a._openRedirect(r,e,"signInViaRedirect")}function JP(s,e,t){return ZP(s,e,t)}async function ZP(s,e,t){const r=ke(s);if(wc(r.auth,e,yi),Nt(r.auth.app))return Promise.reject(yn(r.auth));await r.auth._initializationPromise;const a=Bo(r.auth,t);await e_(a,r.auth);const l=await fS(r);return a._openRedirect(r.auth,e,"reauthViaRedirect",l)}function ej(s,e,t){return tj(s,e,t)}async function tj(s,e,t){const r=ke(s);wc(r.auth,e,yi),await r.auth._initializationPromise;const a=Bo(r.auth,t);await jm(!1,r,e.providerId),await e_(a,r.auth);const l=await fS(r);return a._openRedirect(r.auth,e,"linkViaRedirect",l)}async function nj(s,e){return await Vt(s)._initializationPromise,zm(s,e,!1)}async function zm(s,e,t=!1){if(Nt(s.app))return Promise.reject(yn(s));const r=Vt(s),a=Bo(r,e),u=await new KP(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}async function fS(s){const e=Hd(`${s.uid}:::`);return s._redirectEventId=e,await s.auth._setRedirectUser(s),await s.auth._persistUserIfCurrent(s),e}const rj=600*1e3;class mS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!pS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(cn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rj&&this.cachedEventUids.clear(),this.cachedEventUids.has(_T(e))}saveEventToCache(e){this.cachedEventUids.add(_T(e)),this.lastProcessedEventTime=Date.now()}}function _T(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function pS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function sj(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pS(s);default:return!1}}async function gS(s,e={}){return zt(s,"GET","/v1/projects",e)}const ij=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aj=/^https?/;async function oj(s){if(s.config.emulator)return;const{authorizedDomains:e}=await gS(s);for(const t of e)try{if(lj(t))return}catch{}Rn(s,"unauthorized-domain")}function lj(s){const e=bd(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!aj.test(t))return!1;if(ij.test(s))return r===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const cj=new Ud(3e4,6e4);function bT(){const s=sn().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function uj(s){return new Promise((e,t)=>{function r(){bT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bT(),t(cn(s,"network-request-failed"))},timeout:cj.get()})}if(sn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(sn().gapi?.load)r();else{const a=HI("iframefcb");return sn()[a]=()=>{gapi.load?r():t(cn(s,"network-request-failed"))},F0(`${sD()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Ff=null,e})}let Ff=null;function dj(s){return Ff=Ff||uj(s),Ff}const hj=new Ud(5e3,15e3),fj="__/auth/iframe",mj="emulator/auth/iframe",pj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yj(s){const e=s.config;he(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?q0(e,mj):`https://${s.config.authDomain}/${fj}`,r={apiKey:e.apiKey,appName:s.name,v:Ia},a=gj.get(s.config.apiHost);a&&(r.eid=a);const l=s._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Tc(r).slice(1)}`}async function _j(s){const e=await dj(s),t=sn().gapi;return he(t,s,"internal-error"),e.open({where:document.body,url:yj(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pj,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=cn(s,"network-request-failed"),p=sn().setTimeout(()=>{l(u)},hj.get());function f(){sn().clearTimeout(p),a(r)}r.ping(f).then(f,()=>{l(u)})}))}const bj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vj=500,xj=600,Ej="_blank",Tj="http://localhost";class vT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wj(s,e,t,r=vj,a=xj){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const f={...bj,width:r.toString(),height:a.toString(),top:l,left:u},y=jt().toLowerCase();t&&(p=LI(y)?Ej:t),OI(y)&&(e=e||Tj,f.scrollbars="yes");const v=Object.entries(f).reduce((T,[C,U])=>`${T}${C}=${U},`,"");if($k(y)&&p!=="_self")return Ij(e||"",p),new vT(null);const E=window.open(e||"",p,v);he(E,s,"popup-blocked");try{E.focus()}catch{}return new vT(E)}function Ij(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const Sj="__/auth/handler",Aj="emulator/auth/handler",Nj=encodeURIComponent("fac");async function Hy(s,e,t,r,a,l){he(s.config.authDomain,s,"auth-domain-config-required"),he(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:Ia,eventId:a};if(e instanceof yi){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",t2(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries(l||{}))u[v]=E}if(e instanceof Sc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(u.scopes=v.join(","))}s.tenantId&&(u.tid=s.tenantId);const p=u;for(const v of Object.keys(p))p[v]===void 0&&delete p[v];const f=await s._getAppCheckToken(),y=f?`#${Nj}=${encodeURIComponent(f)}`:"";return`${Rj(s)}?${Tc(p).slice(1)}${y}`}function Rj({config:s}){return s.emulator?q0(s,Aj):`https://${s.authDomain}/${Sj}`}const wy="webStorageSupport";class Cj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=So,this._completeRedirectFn=zm,this._overrideRedirectResult=t_}async _openPopup(e,t,r,a){rs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Hy(e,t,r,bd(),a);return wj(e,l,Hd())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Hy(e,t,r,bd(),a);return _P(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(rs(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await _j(e),r=new mS(e);return t.register("authEvent",a=>(he(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wy,{type:wy},a=>{const l=a?.[0]?.[wy];l!==void 0&&t(!!l),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qI()||MI()||Bd()}}const kj=Cj;class Dj{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ds("unexpected MultiFactorSessionType")}}}class n_ extends Dj{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new n_(e)}_finalizeEnroll(e,t,r){return dP(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return AP(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class yS{constructor(){}static assertion(e){return n_._fromCredential(e)}}yS.FACTOR_ID="phone";var xT="@firebase/auth",ET="1.12.0";class Pj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function jj(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vj(s){ya(new Ls("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=r.options;he(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FI(s)},y=new eD(r,a,l,f);return mD(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ya(new Ls("auth-internal",e=>{const t=Vt(e.getProvider("auth").getImmediate());return(r=>new Pj(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zr(xT,ET,jj(s)),Zr(xT,ET,"esm2020")}const Oj=300;FC("authIdTokenMaxAge");function Mj(){return document.getElementsByTagName("head")?.[0]??document}tD({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=a=>{const l=cn("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",Mj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vj("Browser");function No(){return window}const Lj=2e3;async function Uj(s,e,t){const{BuildInfo:r}=No();rs(e.sessionId,"AuthEvent did not contain a session ID");const a=await Hj(e.sessionId),l={};return Bd()?l.ibi=r.packageName:zd()?l.apn=r.packageName:Rn(s,"operation-not-supported-in-this-environment"),r.displayName&&(l.appDisplayName=r.displayName),l.sessionId=a,Hy(s,t,e.type,void 0,e.eventId??void 0,l)}async function zj(s){const{BuildInfo:e}=No(),t={};Bd()?t.iosBundleId=e.packageName:zd()?t.androidPackageName=e.packageName:Rn(s,"operation-not-supported-in-this-environment"),await gS(s,t)}function Bj(s){const{cordova:e}=No();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let a=null;r?e.plugins.browsertab.openUrl(s):a=e.InAppBrowser.open(s,Kk()?"_blank":"_system","location=yes"),t(a)})})}async function qj(s,e,t){const{cordova:r}=No();let a=()=>{};try{await new Promise((l,u)=>{let p=null;function f(){l();const E=r.plugins.browsertab?.close;typeof E=="function"&&E(),typeof t?.close=="function"&&t.close()}function y(){p||(p=window.setTimeout(()=>{u(cn(s,"redirect-cancelled-by-user"))},Lj))}function v(){document?.visibilityState==="visible"&&y()}e.addPassiveListener(f),document.addEventListener("resume",y,!1),zd()&&document.addEventListener("visibilitychange",v,!1),a=()=>{e.removePassiveListener(f),document.removeEventListener("resume",y,!1),document.removeEventListener("visibilitychange",v,!1),p&&window.clearTimeout(p)}})}finally{a()}}function Fj(s){const e=No();he(typeof e?.universalLinks?.subscribe=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),he(typeof e?.BuildInfo?.packageName<"u",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),he(typeof e?.cordova?.plugins?.browsertab?.openUrl=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he(typeof e?.cordova?.plugins?.browsertab?.isAvailable=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he(typeof e?.cordova?.InAppBrowser?.open=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Hj(s){const e=Gj(s),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function Gj(s){if(rs(/[0-9a-zA-Z]+/.test(s),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(s);const e=new ArrayBuffer(s.length),t=new Uint8Array(e);for(let r=0;r<s.length;r++)t[r]=s.charCodeAt(r);return t}const Qj=20;class Kj extends mS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function $j(s,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:Xj(),postBody:null,tenantId:s.tenantId,error:cn(s,"no-auth-event")}}function Yj(s,e){return Gy()._set(Qy(s),e)}async function TT(s){const e=await Gy()._get(Qy(s));return e&&await Gy()._remove(Qy(s)),e}function Wj(s,e){const t=Zj(e);if(t.includes("/__/auth/callback")){const r=Hf(t),l=(r.firebaseError?Jj(decodeURIComponent(r.firebaseError)):null)?.code?.split("auth/")?.[1],u=l?cn(l):null;return u?{type:s.type,eventId:s.eventId,tenantId:s.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:s.type,eventId:s.eventId,tenantId:s.tenantId,sessionId:s.sessionId,urlResponse:t,postBody:null}}return null}function Xj(){const s=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<Qj;t++){const r=Math.floor(Math.random()*e.length);s.push(e.charAt(r))}return s.join("")}function Gy(){return br(W0)}function Qy(s){return To("authEvent",s.config.apiKey,s.name)}function Jj(s){try{return JSON.parse(s)}catch{return null}}function Zj(s){const e=Hf(s),t=e.link?decodeURIComponent(e.link):void 0,r=Hf(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Hf(a).link||a||r||t||s}function Hf(s){if(!s?.includes("?"))return{};const[e,...t]=s.split("?");return Gl(t.join("?"))}const eV=500;class tV{constructor(){this._redirectPersistence=So,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zm,this._overrideRedirectResult=t_}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new Kj(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Rn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,a){Fj(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),YP(),await this._originValidation(e);const u=$j(e,r,a);await Yj(e,u);const p=await Uj(e,u,t),f=await Bj(p);return qj(e,l,f)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zj(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:a,BuildInfo:l}=No(),u=setTimeout(async()=>{await TT(e),t.onEvent(wT())},eV),p=async v=>{clearTimeout(u);const E=await TT(e);let T=null;E&&v?.url&&(T=Wj(E,v.url)),t.onEvent(T||wT())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,p);const f=a,y=`${l.packageName.toLowerCase()}://`;No().handleOpenURL=async v=>{if(v.toLowerCase().startsWith(y)&&p({url:v}),typeof f=="function")try{f(v)}catch(E){console.error(E)}}}}const nV=tV;function wT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:cn("no-auth-event")}}function rV(s,e){Vt(s)._logFramework(e)}var sV="@firebase/auth-compat",iV="0.6.2";const aV=1e3;function ad(){return self?.location?.protocol||null}function oV(){return ad()==="http:"||ad()==="https:"}function _S(s=jt()){return!!((ad()==="file:"||ad()==="ionic:"||ad()==="capacitor:")&&s.toLowerCase().match(/iphone|ipad|ipod|android/))}function lV(){return P0()||Rm()}function cV(){return uI()&&document?.documentMode===11}function uV(s=jt()){return/Edge\/\d+/.test(s)}function dV(s=jt()){return cV()||uV(s)}function bS(){try{const s=self.localStorage,e=Hd();if(s)return s.setItem(e,"1"),s.removeItem(e),dV()?gd():!0}catch{return r_()&&gd()}return!1}function r_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Iy(){return(oV()||cI()||_S())&&!lV()&&bS()&&!r_()}function vS(){return _S()&&typeof document<"u"}async function hV(){return vS()?new Promise(s=>{const e=setTimeout(()=>{s(!1)},aV);document.addEventListener("deviceready",()=>{clearTimeout(e),s(!0)})}):!1}function fV(){return typeof window<"u"?window:null}const yr={LOCAL:"local",NONE:"none",SESSION:"session"},Uu=he,xS="persistence";function mV(s,e){if(Uu(Object.values(yr).includes(e),s,"invalid-persistence-type"),P0()){Uu(e!==yr.SESSION,s,"unsupported-persistence-type");return}if(Rm()){Uu(e===yr.NONE,s,"unsupported-persistence-type");return}if(r_()){Uu(e===yr.NONE||e===yr.LOCAL&&gd(),s,"unsupported-persistence-type");return}Uu(e===yr.NONE||bS(),s,"unsupported-persistence-type")}async function Ky(s){await s._initializationPromise;const e=ES(),t=To(xS,s.config.apiKey,s.name);e&&e.setItem(t,s._getPersistenceType())}function pV(s,e){const t=ES();if(!t)return[];const r=To(xS,s,e);switch(t.getItem(r)){case yr.NONE:return[tc];case yr.LOCAL:return[Ed,So];case yr.SESSION:return[So];default:return[]}}function ES(){try{return fV()?.sessionStorage||null}catch{return null}}const gV=he;class aa{constructor(){this.browserResolver=br(kj),this.cordovaResolver=br(nV),this.underlyingResolver=null,this._redirectPersistence=So,this._completeRedirectFn=zm,this._overrideRedirectResult=t_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,a)}async _openRedirect(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return vS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gV(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await hV();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function TS(s){return s.unwrap()}function yV(s){return s.wrapped()}function _V(s){return wS(s)}function bV(s,e){const t=e.customData?._tokenResponse;if(e?.code==="auth/multi-factor-auth-required"){const r=e;r.resolver=new vV(s,uP(s,e))}else if(t){const r=wS(e),a=e;r&&(a.credential=r,a.tenantId=t.tenantId||void 0,a.email=t.email||void 0,a.phoneNumber=t.phoneNumber||void 0)}}function wS(s){const{_tokenResponse:e}=s instanceof Fn?s.customData:s;if(!e)return null;if(!(s instanceof Fn)&&"temporaryProof"in e&&"phoneNumber"in e)return Ao.credentialFromResult(s);const t=e.providerId;if(!t||t===Mu.PASSWORD)return null;let r;switch(t){case Mu.GOOGLE:r=Rs;break;case Mu.FACEBOOK:r=Ns;break;case Mu.GITHUB:r=Cs;break;case Mu.TWITTER:r=ks;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:u,pendingToken:p,nonce:f}=e;return!l&&!u&&!a&&!p?null:p?t.startsWith("saml.")?nc._create(t,p):Us._fromParams({providerId:t,signInMethod:t,pendingToken:p,idToken:a,accessToken:l}):new $l(t).credential({idToken:a,accessToken:l,rawNonce:f})}return s instanceof Fn?r.credentialFromError(s):r.credentialFromResult(s)}function nr(s,e){return e.catch(t=>{throw t instanceof Fn&&bV(s,t),t}).then(t=>{const r=t.operationType,a=t.user;return{operationType:r,credential:_V(t),additionalUserInfo:cP(t),user:Bm.getOrCreate(a)}})}async function $y(s,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>nr(s,t.confirm(r))}}class vV{constructor(e,t){this.resolver=t,this.auth=yV(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return nr(TS(this.auth),this.resolver.resolveSignIn(e))}}let Bm=class Yu{constructor(e){this._delegate=e,this.multiFactor=fP(e)}static getOrCreate(e){return Yu.USER_MAP.has(e)||Yu.USER_MAP.set(e,new Yu(e)),Yu.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return nr(this.auth,ZI(this._delegate,e))}async linkWithPhoneNumber(e,t){return $y(this.auth,OP(this._delegate,e,t))}async linkWithPopup(e){return nr(this.auth,GP(this._delegate,e,aa))}async linkWithRedirect(e){return await Ky(Vt(this.auth)),ej(this._delegate,e,aa)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return nr(this.auth,eS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return $y(this.auth,MP(this._delegate,e,t))}reauthenticateWithPopup(e){return nr(this.auth,HP(this._delegate,e,aa))}async reauthenticateWithRedirect(e){return await Ky(Vt(this.auth)),JP(this._delegate,e,aa)}sendEmailVerification(e){return JD(this._delegate,e)}async unlink(e){return await LD(this._delegate,e),this}updateEmail(e){return nP(this._delegate,e)}updatePassword(e){return rP(this._delegate,e)}updatePhoneNumber(e){return LP(this._delegate,e)}updateProfile(e){return tP(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return ZD(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Bm.USER_MAP=new WeakMap;const zu=he;class Yy{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;zu(r,"invalid-api-key",{appName:e.name}),zu(r,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?aa:void 0;this._delegate=t.initialize({options:{persistence:xV(r,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(Ak),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bm.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){pD(this._delegate,e,t)}applyActionCode(e){return FD(this._delegate,e)}checkActionCode(e){return tS(this._delegate,e)}confirmPasswordReset(e,t){return qD(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return nr(this._delegate,GD(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return XD(this._delegate,e)}isSignInWithEmailLink(e){return $D(this._delegate,e)}async getRedirectResult(){zu(Iy(),this._delegate,"operation-not-supported-in-this-environment");const e=await nj(this._delegate,aa);return e?nr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){rV(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:a,error:l,complete:u}=IT(e,t,r);return this._delegate.onAuthStateChanged(a,l,u)}onIdTokenChanged(e,t,r){const{next:a,error:l,complete:u}=IT(e,t,r);return this._delegate.onIdTokenChanged(a,l,u)}sendSignInLinkToEmail(e,t){return KD(this._delegate,e,t)}sendPasswordResetEmail(e,t){return BD(this._delegate,e,t||void 0)}async setPersistence(e){mV(this._delegate,e);let t;switch(e){case yr.SESSION:t=So;break;case yr.LOCAL:t=await br(Ed)._isAvailable()?Ed:W0;break;case yr.NONE:t=tc;break;default:return Rn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return nr(this._delegate,MD(this._delegate))}signInWithCredential(e){return nr(this._delegate,Vm(this._delegate,e))}signInWithCustomToken(e){return nr(this._delegate,zD(this._delegate,e))}signInWithEmailAndPassword(e,t){return nr(this._delegate,QD(this._delegate,e,t))}signInWithEmailLink(e,t){return nr(this._delegate,YD(this._delegate,e,t))}signInWithPhoneNumber(e,t){return $y(this._delegate,VP(this._delegate,e,t))}async signInWithPopup(e){return zu(Iy(),this._delegate,"operation-not-supported-in-this-environment"),nr(this._delegate,FP(this._delegate,e,aa))}async signInWithRedirect(e){return zu(Iy(),this._delegate,"operation-not-supported-in-this-environment"),await Ky(this._delegate),WP(this._delegate,e,aa)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return HD(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Yy.Persistence=yr;function IT(s,e,t){let r=s;typeof s!="function"&&({next:r,error:e,complete:t}=s);const a=r;return{next:u=>a(u&&Bm.getOrCreate(u)),error:e,complete:t}}function xV(s,e){const t=pV(s,e);if(typeof self<"u"&&!t.includes(Ed)&&t.push(Ed),typeof window<"u")for(const r of[W0,So])t.includes(r)||t.push(r);return t.includes(tc)||t.push(tc),t}class s_{static credential(e,t){return Ao.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Ao(TS(Vs.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}s_.PHONE_SIGN_IN_METHOD=Ao.PHONE_SIGN_IN_METHOD;s_.PROVIDER_ID=Ao.PROVIDER_ID;const EV=he;class TV{constructor(e,t,r=Vs.app()){EV(r.options?.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new PP(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const wV="auth-compat";function IV(s){s.INTERNAL.registerComponent(new Ls(wV,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Yy(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Pl.EMAIL_SIGNIN,PASSWORD_RESET:Pl.PASSWORD_RESET,RECOVER_EMAIL:Pl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Pl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Pl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Pl.VERIFY_EMAIL}},EmailAuthProvider:Sa,FacebookAuthProvider:Ns,GithubAuthProvider:Cs,GoogleAuthProvider:Rs,OAuthProvider:$l,SAMLAuthProvider:lm,PhoneAuthProvider:s_,PhoneMultiFactorGenerator:yS,RecaptchaVerifier:TV,TwitterAuthProvider:ks,Auth:Yy,AuthCredential:Ic,Error:Fn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),s.registerVersion(sV,iV)}IV(Vs);var ST=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var da,IS;(function(){var s;function e(N,R){function D(){}D.prototype=R.prototype,N.F=R.prototype,N.prototype=new D,N.prototype.constructor=N,N.D=function(w,k,j){for(var A=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)A[Ce-2]=arguments[Ce];return R.prototype[k].apply(w,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,R,D){D||(D=0);const w=Array(16);if(typeof R=="string")for(var k=0;k<16;++k)w[k]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(k=0;k<16;++k)w[k]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=N.g[0],D=N.g[1],k=N.g[2];let j=N.g[3],A;A=R+(j^D&(k^j))+w[0]+3614090360&4294967295,R=D+(A<<7&4294967295|A>>>25),A=j+(k^R&(D^k))+w[1]+3905402710&4294967295,j=R+(A<<12&4294967295|A>>>20),A=k+(D^j&(R^D))+w[2]+606105819&4294967295,k=j+(A<<17&4294967295|A>>>15),A=D+(R^k&(j^R))+w[3]+3250441966&4294967295,D=k+(A<<22&4294967295|A>>>10),A=R+(j^D&(k^j))+w[4]+4118548399&4294967295,R=D+(A<<7&4294967295|A>>>25),A=j+(k^R&(D^k))+w[5]+1200080426&4294967295,j=R+(A<<12&4294967295|A>>>20),A=k+(D^j&(R^D))+w[6]+2821735955&4294967295,k=j+(A<<17&4294967295|A>>>15),A=D+(R^k&(j^R))+w[7]+4249261313&4294967295,D=k+(A<<22&4294967295|A>>>10),A=R+(j^D&(k^j))+w[8]+1770035416&4294967295,R=D+(A<<7&4294967295|A>>>25),A=j+(k^R&(D^k))+w[9]+2336552879&4294967295,j=R+(A<<12&4294967295|A>>>20),A=k+(D^j&(R^D))+w[10]+4294925233&4294967295,k=j+(A<<17&4294967295|A>>>15),A=D+(R^k&(j^R))+w[11]+2304563134&4294967295,D=k+(A<<22&4294967295|A>>>10),A=R+(j^D&(k^j))+w[12]+1804603682&4294967295,R=D+(A<<7&4294967295|A>>>25),A=j+(k^R&(D^k))+w[13]+4254626195&4294967295,j=R+(A<<12&4294967295|A>>>20),A=k+(D^j&(R^D))+w[14]+2792965006&4294967295,k=j+(A<<17&4294967295|A>>>15),A=D+(R^k&(j^R))+w[15]+1236535329&4294967295,D=k+(A<<22&4294967295|A>>>10),A=R+(k^j&(D^k))+w[1]+4129170786&4294967295,R=D+(A<<5&4294967295|A>>>27),A=j+(D^k&(R^D))+w[6]+3225465664&4294967295,j=R+(A<<9&4294967295|A>>>23),A=k+(R^D&(j^R))+w[11]+643717713&4294967295,k=j+(A<<14&4294967295|A>>>18),A=D+(j^R&(k^j))+w[0]+3921069994&4294967295,D=k+(A<<20&4294967295|A>>>12),A=R+(k^j&(D^k))+w[5]+3593408605&4294967295,R=D+(A<<5&4294967295|A>>>27),A=j+(D^k&(R^D))+w[10]+38016083&4294967295,j=R+(A<<9&4294967295|A>>>23),A=k+(R^D&(j^R))+w[15]+3634488961&4294967295,k=j+(A<<14&4294967295|A>>>18),A=D+(j^R&(k^j))+w[4]+3889429448&4294967295,D=k+(A<<20&4294967295|A>>>12),A=R+(k^j&(D^k))+w[9]+568446438&4294967295,R=D+(A<<5&4294967295|A>>>27),A=j+(D^k&(R^D))+w[14]+3275163606&4294967295,j=R+(A<<9&4294967295|A>>>23),A=k+(R^D&(j^R))+w[3]+4107603335&4294967295,k=j+(A<<14&4294967295|A>>>18),A=D+(j^R&(k^j))+w[8]+1163531501&4294967295,D=k+(A<<20&4294967295|A>>>12),A=R+(k^j&(D^k))+w[13]+2850285829&4294967295,R=D+(A<<5&4294967295|A>>>27),A=j+(D^k&(R^D))+w[2]+4243563512&4294967295,j=R+(A<<9&4294967295|A>>>23),A=k+(R^D&(j^R))+w[7]+1735328473&4294967295,k=j+(A<<14&4294967295|A>>>18),A=D+(j^R&(k^j))+w[12]+2368359562&4294967295,D=k+(A<<20&4294967295|A>>>12),A=R+(D^k^j)+w[5]+4294588738&4294967295,R=D+(A<<4&4294967295|A>>>28),A=j+(R^D^k)+w[8]+2272392833&4294967295,j=R+(A<<11&4294967295|A>>>21),A=k+(j^R^D)+w[11]+1839030562&4294967295,k=j+(A<<16&4294967295|A>>>16),A=D+(k^j^R)+w[14]+4259657740&4294967295,D=k+(A<<23&4294967295|A>>>9),A=R+(D^k^j)+w[1]+2763975236&4294967295,R=D+(A<<4&4294967295|A>>>28),A=j+(R^D^k)+w[4]+1272893353&4294967295,j=R+(A<<11&4294967295|A>>>21),A=k+(j^R^D)+w[7]+4139469664&4294967295,k=j+(A<<16&4294967295|A>>>16),A=D+(k^j^R)+w[10]+3200236656&4294967295,D=k+(A<<23&4294967295|A>>>9),A=R+(D^k^j)+w[13]+681279174&4294967295,R=D+(A<<4&4294967295|A>>>28),A=j+(R^D^k)+w[0]+3936430074&4294967295,j=R+(A<<11&4294967295|A>>>21),A=k+(j^R^D)+w[3]+3572445317&4294967295,k=j+(A<<16&4294967295|A>>>16),A=D+(k^j^R)+w[6]+76029189&4294967295,D=k+(A<<23&4294967295|A>>>9),A=R+(D^k^j)+w[9]+3654602809&4294967295,R=D+(A<<4&4294967295|A>>>28),A=j+(R^D^k)+w[12]+3873151461&4294967295,j=R+(A<<11&4294967295|A>>>21),A=k+(j^R^D)+w[15]+530742520&4294967295,k=j+(A<<16&4294967295|A>>>16),A=D+(k^j^R)+w[2]+3299628645&4294967295,D=k+(A<<23&4294967295|A>>>9),A=R+(k^(D|~j))+w[0]+4096336452&4294967295,R=D+(A<<6&4294967295|A>>>26),A=j+(D^(R|~k))+w[7]+1126891415&4294967295,j=R+(A<<10&4294967295|A>>>22),A=k+(R^(j|~D))+w[14]+2878612391&4294967295,k=j+(A<<15&4294967295|A>>>17),A=D+(j^(k|~R))+w[5]+4237533241&4294967295,D=k+(A<<21&4294967295|A>>>11),A=R+(k^(D|~j))+w[12]+1700485571&4294967295,R=D+(A<<6&4294967295|A>>>26),A=j+(D^(R|~k))+w[3]+2399980690&4294967295,j=R+(A<<10&4294967295|A>>>22),A=k+(R^(j|~D))+w[10]+4293915773&4294967295,k=j+(A<<15&4294967295|A>>>17),A=D+(j^(k|~R))+w[1]+2240044497&4294967295,D=k+(A<<21&4294967295|A>>>11),A=R+(k^(D|~j))+w[8]+1873313359&4294967295,R=D+(A<<6&4294967295|A>>>26),A=j+(D^(R|~k))+w[15]+4264355552&4294967295,j=R+(A<<10&4294967295|A>>>22),A=k+(R^(j|~D))+w[6]+2734768916&4294967295,k=j+(A<<15&4294967295|A>>>17),A=D+(j^(k|~R))+w[13]+1309151649&4294967295,D=k+(A<<21&4294967295|A>>>11),A=R+(k^(D|~j))+w[4]+4149444226&4294967295,R=D+(A<<6&4294967295|A>>>26),A=j+(D^(R|~k))+w[11]+3174756917&4294967295,j=R+(A<<10&4294967295|A>>>22),A=k+(R^(j|~D))+w[2]+718787259&4294967295,k=j+(A<<15&4294967295|A>>>17),A=D+(j^(k|~R))+w[9]+3951481745&4294967295,N.g[0]=N.g[0]+R&4294967295,N.g[1]=N.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+j&4294967295}r.prototype.v=function(N,R){R===void 0&&(R=N.length);const D=R-this.blockSize,w=this.C;let k=this.h,j=0;for(;j<R;){if(k==0)for(;j<=D;)a(this,N,j),j+=this.blockSize;if(typeof N=="string"){for(;j<R;)if(w[k++]=N.charCodeAt(j++),k==this.blockSize){a(this,w),k=0;break}}else for(;j<R;)if(w[k++]=N[j++],k==this.blockSize){a(this,w),k=0;break}}this.h=k,this.o+=R},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var R=1;R<N.length-8;++R)N[R]=0;R=this.o*8;for(var D=N.length-8;D<N.length;++D)N[D]=R&255,R/=256;for(this.v(N),N=Array(16),R=0,D=0;D<4;++D)for(let w=0;w<32;w+=8)N[R++]=this.g[D]>>>w&255;return N};function l(N,R){var D=p;return Object.prototype.hasOwnProperty.call(D,N)?D[N]:D[N]=R(N)}function u(N,R){this.h=R;const D=[];let w=!0;for(let k=N.length-1;k>=0;k--){const j=N[k]|0;w&&j==R||(D[k]=j,w=!1)}this.g=D}var p={};function f(N){return-128<=N&&N<128?l(N,function(R){return new u([R|0],R<0?-1:0)}):new u([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return E;if(N<0)return J(y(-N));const R=[];let D=1;for(let w=0;N>=D;w++)R[w]=N/D|0,D*=4294967296;return new u(R,0)}function v(N,R){if(N.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(N.charAt(0)=="-")return J(v(N.substring(1),R));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=y(Math.pow(R,8));let w=E;for(let j=0;j<N.length;j+=8){var k=Math.min(8,N.length-j);const A=parseInt(N.substring(j,j+k),R);k<8?(k=y(Math.pow(R,k)),w=w.j(k).add(y(A))):(w=w.j(D),w=w.add(y(A)))}return w}var E=f(0),T=f(1),C=f(16777216);s=u.prototype,s.m=function(){if(H(this))return-J(this).m();let N=0,R=1;for(let D=0;D<this.g.length;D++){const w=this.i(D);N+=(w>=0?w:4294967296+w)*R,R*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(U(this))return"0";if(H(this))return"-"+J(this).toString(N);const R=y(Math.pow(N,6));var D=this;let w="";for(;;){const k=pe(D,R).g;D=K(D,k.j(R));let j=((D.g.length>0?D.g[0]:D.h)>>>0).toString(N);if(D=k,U(D))return j+w;for(;j.length<6;)j="0"+j;w=j+w}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function U(N){if(N.h!=0)return!1;for(let R=0;R<N.g.length;R++)if(N.g[R]!=0)return!1;return!0}function H(N){return N.h==-1}s.l=function(N){return N=K(this,N),H(N)?-1:U(N)?0:1};function J(N){const R=N.g.length,D=[];for(let w=0;w<R;w++)D[w]=~N.g[w];return new u(D,~N.h).add(T)}s.abs=function(){return H(this)?J(this):this},s.add=function(N){const R=Math.max(this.g.length,N.g.length),D=[];let w=0;for(let k=0;k<=R;k++){let j=w+(this.i(k)&65535)+(N.i(k)&65535),A=(j>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);w=A>>>16,j&=65535,A&=65535,D[k]=A<<16|j}return new u(D,D[D.length-1]&-2147483648?-1:0)};function K(N,R){return N.add(J(R))}s.j=function(N){if(U(this)||U(N))return E;if(H(this))return H(N)?J(this).j(J(N)):J(J(this).j(N));if(H(N))return J(this.j(J(N)));if(this.l(C)<0&&N.l(C)<0)return y(this.m()*N.m());const R=this.g.length+N.g.length,D=[];for(var w=0;w<2*R;w++)D[w]=0;for(w=0;w<this.g.length;w++)for(let k=0;k<N.g.length;k++){const j=this.i(w)>>>16,A=this.i(w)&65535,Ce=N.i(k)>>>16,Pe=N.i(k)&65535;D[2*w+2*k]+=A*Pe,ne(D,2*w+2*k),D[2*w+2*k+1]+=j*Pe,ne(D,2*w+2*k+1),D[2*w+2*k+1]+=A*Ce,ne(D,2*w+2*k+1),D[2*w+2*k+2]+=j*Ce,ne(D,2*w+2*k+2)}for(N=0;N<R;N++)D[N]=D[2*N+1]<<16|D[2*N];for(N=R;N<2*R;N++)D[N]=0;return new u(D,0)};function ne(N,R){for(;(N[R]&65535)!=N[R];)N[R+1]+=N[R]>>>16,N[R]&=65535,R++}function oe(N,R){this.g=N,this.h=R}function pe(N,R){if(U(R))throw Error("division by zero");if(U(N))return new oe(E,E);if(H(N))return R=pe(J(N),R),new oe(J(R.g),J(R.h));if(H(R))return R=pe(N,J(R)),new oe(J(R.g),R.h);if(N.g.length>30){if(H(N)||H(R))throw Error("slowDivide_ only works with positive integers.");for(var D=T,w=R;w.l(N)<=0;)D=F(D),w=F(w);var k=ie(D,1),j=ie(w,1);for(w=ie(w,2),D=ie(D,2);!U(w);){var A=j.add(w);A.l(N)<=0&&(k=k.add(D),j=A),w=ie(w,1),D=ie(D,1)}return R=K(N,k.j(R)),new oe(k,R)}for(k=E;N.l(R)>=0;){for(D=Math.max(1,Math.floor(N.m()/R.m())),w=Math.ceil(Math.log(D)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),j=y(D),A=j.j(R);H(A)||A.l(N)>0;)D-=w,j=y(D),A=j.j(R);U(j)&&(j=T),k=k.add(j),N=K(N,A)}return new oe(k,N)}s.B=function(N){return pe(this,N).h},s.and=function(N){const R=Math.max(this.g.length,N.g.length),D=[];for(let w=0;w<R;w++)D[w]=this.i(w)&N.i(w);return new u(D,this.h&N.h)},s.or=function(N){const R=Math.max(this.g.length,N.g.length),D=[];for(let w=0;w<R;w++)D[w]=this.i(w)|N.i(w);return new u(D,this.h|N.h)},s.xor=function(N){const R=Math.max(this.g.length,N.g.length),D=[];for(let w=0;w<R;w++)D[w]=this.i(w)^N.i(w);return new u(D,this.h^N.h)};function F(N){const R=N.g.length+1,D=[];for(let w=0;w<R;w++)D[w]=N.i(w)<<1|N.i(w-1)>>>31;return new u(D,N.h)}function ie(N,R){const D=R>>5;R%=32;const w=N.g.length-D,k=[];for(let j=0;j<w;j++)k[j]=R>0?N.i(j+D)>>>R|N.i(j+D+1)<<32-R:N.i(j+D);return new u(k,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,IS=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,da=u}).apply(typeof ST<"u"?ST:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var SS,Wu,AS,Gf,Wy,NS,RS,CS;(function(){var s,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var _=0;_<d.length;++_){var x=d[_];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function a(d,_){if(_)e:{var x=r;d=d.split(".");for(var S=0;S<d.length-1;S++){var q=d[S];if(!(q in x))break e;x=x[q]}d=d[d.length-1],S=x[d],_=_(S),_!=S&&_!=null&&e(x,d,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(_){var x=[],S;for(S in _)Object.prototype.hasOwnProperty.call(_,S)&&x.push([S,_[S]]);return x}});var l=l||{},u=this||self;function p(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function f(d,_,x){return d.call.apply(d.bind,arguments)}function y(d,_,x){return y=f,y.apply(null,arguments)}function v(d,_){var x=Array.prototype.slice.call(arguments,1);return function(){var S=x.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function E(d,_){function x(){}x.prototype=_.prototype,d.Z=_.prototype,d.prototype=new x,d.prototype.constructor=d,d.Ob=function(S,q,X){for(var ge=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ge[Ue-2]=arguments[Ue];return _.prototype[q].apply(S,ge)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function C(d){const _=d.length;if(_>0){const x=Array(_);for(let S=0;S<_;S++)x[S]=d[S];return x}return[]}function U(d,_){for(let S=1;S<arguments.length;S++){const q=arguments[S];var x=typeof q;if(x=x!="object"?x:q?Array.isArray(q)?"array":x:"null",x=="array"||x=="object"&&typeof q.length=="number"){x=d.length||0;const X=q.length||0;d.length=x+X;for(let ge=0;ge<X;ge++)d[x+ge]=q[ge]}else d.push(q)}}class H{constructor(_,x){this.i=_,this.j=x,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function J(d){u.setTimeout(()=>{throw d},0)}function K(){var d=N;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class ne{constructor(){this.h=this.g=null}add(_,x){const S=oe.get();S.set(_,x),this.h?this.h.next=S:this.g=S,this.h=S}}var oe=new H(()=>new pe,d=>d.reset());class pe{constructor(){this.next=this.g=this.h=null}set(_,x){this.h=_,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let F,ie=!1,N=new ne,R=()=>{const d=Promise.resolve(void 0);F=()=>{d.then(D)}};function D(){for(var d;d=K();){try{d.h.call(d.g)}catch(x){J(x)}var _=oe;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}ie=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};u.addEventListener("test",x,_),u.removeEventListener("test",x,_)}catch{}return d})();function A(d){return/^[\s\xa0]*$/.test(d)}function Ce(d,_){k.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}E(Ce,k),Ce.prototype.init=function(d,_){const x=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(x=="mouseover"?_=d.fromElement:x=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Pe="closure_listenable_"+(Math.random()*1e6|0),Z=0;function me(d,_,x,S,q){this.listener=d,this.proxy=null,this.src=_,this.type=x,this.capture=!!S,this.ha=q,this.key=++Z,this.da=this.fa=!1}function Ee(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ne(d,_,x){for(const S in d)_.call(x,d[S],S,d)}function Le(d,_){for(const x in d)_.call(void 0,d[x],x,d)}function V(d){const _={};for(const x in d)_[x]=d[x];return _}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(d,_){let x,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(x in S)d[x]=S[x];for(let X=0;X<O.length;X++)x=O[X],Object.prototype.hasOwnProperty.call(S,x)&&(d[x]=S[x])}}function te(d){this.src=d,this.g={},this.h=0}te.prototype.add=function(d,_,x,S,q){const X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);const ge=fe(d,_,S,q);return ge>-1?(_=d[ge],x||(_.fa=!1)):(_=new me(_,this.src,X,!!S,q),_.fa=x,d.push(_)),_};function de(d,_){const x=_.type;if(x in d.g){var S=d.g[x],q=Array.prototype.indexOf.call(S,_,void 0),X;(X=q>=0)&&Array.prototype.splice.call(S,q,1),X&&(Ee(_),d.g[x].length==0&&(delete d.g[x],d.h--))}}function fe(d,_,x,S){for(let q=0;q<d.length;++q){const X=d[q];if(!X.da&&X.listener==_&&X.capture==!!x&&X.ha==S)return q}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),it={};function tt(d,_,x,S,q){if(Array.isArray(_)){for(let X=0;X<_.length;X++)tt(d,_[X],x,S,q);return null}return x=$n(x),d&&d[Pe]?d.J(_,x,p(S)?!!S.capture:!1,q):ar(d,_,x,!1,S,q)}function ar(d,_,x,S,q,X){if(!_)throw Error("Invalid event type");const ge=p(q)?!!q.capture:!!q;let Ue=Cn(d);if(Ue||(d[_e]=Ue=new te(d)),x=Ue.add(_,x,S,ge,X),x.proxy)return x;if(S=Bt(),x.proxy=S,S.src=d,S.listener=x,d.addEventListener)j||(q=ge),q===void 0&&(q=!1),d.addEventListener(_.toString(),S,q);else if(d.attachEvent)d.attachEvent(on(_.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Bt(){function d(x){return _.call(d.src,d.listener,x)}const _=Qn;return d}function bn(d,_,x,S,q){if(Array.isArray(_))for(var X=0;X<_.length;X++)bn(d,_[X],x,S,q);else S=p(S)?!!S.capture:!!S,x=$n(x),d&&d[Pe]?(d=d.i,X=String(_).toString(),X in d.g&&(_=d.g[X],x=fe(_,x,S,q),x>-1&&(Ee(_[x]),Array.prototype.splice.call(_,x,1),_.length==0&&(delete d.g[X],d.h--)))):d&&(d=Cn(d))&&(_=d.g[_.toString()],d=-1,_&&(d=fe(_,x,S,q)),(x=d>-1?_[d]:null)&&Er(x))}function Er(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[Pe])de(_.i,d);else{var x=d.type,S=d.proxy;_.removeEventListener?_.removeEventListener(x,S,d.capture):_.detachEvent?_.detachEvent(on(x),S):_.addListener&&_.removeListener&&_.removeListener(S),(x=Cn(_))?(de(x,d),x.h==0&&(x.src=null,_[_e]=null)):Ee(d)}}}function on(d){return d in it?it[d]:it[d]="on"+d}function Qn(d,_){if(d.da)d=!0;else{_=new Ce(_,this);const x=d.listener,S=d.ha||d.src;d.fa&&Er(d),d=x.call(S,_)}return d}function Cn(d){return d=d[_e],d instanceof te?d:null}var Kn="__closure_events_fn_"+(Math.random()*1e9>>>0);function $n(d){return typeof d=="function"?d:(d[Kn]||(d[Kn]=function(_){return d.handleEvent(_)}),d[Kn])}function $e(){w.call(this),this.i=new te(this),this.M=this,this.G=null}E($e,w),$e.prototype[Pe]=!0,$e.prototype.removeEventListener=function(d,_,x,S){bn(this,d,_,x,S)};function xt(d,_){var x,S=d.G;if(S)for(x=[];S;S=S.G)x.push(S);if(d=d.M,S=_.type||_,typeof _=="string")_=new k(_,d);else if(_ instanceof k)_.target=_.target||d;else{var q=_;_=new k(S,d),B(_,q)}q=!0;let X,ge;if(x)for(ge=x.length-1;ge>=0;ge--)X=_.g=x[ge],q=kn(X,S,!0,_)&&q;if(X=_.g=d,q=kn(X,S,!0,_)&&q,q=kn(X,S,!1,_)&&q,x)for(ge=0;ge<x.length;ge++)X=_.g=x[ge],q=kn(X,S,!1,_)&&q}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const x=d.g[_];for(let S=0;S<x.length;S++)Ee(x[S]);delete d.g[_],d.h--}}this.G=null},$e.prototype.J=function(d,_,x,S){return this.i.add(String(d),_,!1,x,S)},$e.prototype.K=function(d,_,x,S){return this.i.add(String(d),_,!0,x,S)};function kn(d,_,x,S){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let q=!0;for(let X=0;X<_.length;++X){const ge=_[X];if(ge&&!ge.da&&ge.capture==x){const Ue=ge.listener,qt=ge.ha||ge.src;ge.fa&&de(d.i,ge),q=Ue.call(qt,S)!==!1&&q}}return q&&!S.defaultPrevented}function Y(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(d,_||0)}function Ie(d){d.g=Y(()=>{d.g=null,d.i&&(d.i=!1,Ie(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class qe extends w{constructor(_,x){super(),this.m=_,this.l=x,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ie(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(d){w.call(this),this.h=d,this.g={}}E(ce,w);var kt=[];function vn(d){Ne(d.g,function(_,x){this.g.hasOwnProperty(x)&&Er(_)},d),d.g={}}ce.prototype.N=function(){ce.Z.N.call(this),vn(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=u.JSON.stringify,Da=u.JSON.parse,qs=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function Vc(){}function Lr(){}var Ln={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ve(){k.call(this,"d")}E(ve,k);function Ve(){k.call(this,"c")}E(Ve,k);var Je={},ss=null;function Qo(){return ss=ss||new $e}Je.Ia="serverreachability";function oh(d){k.call(this,Je.Ia,d)}E(oh,k);function is(d){const _=Qo();xt(_,new oh(_))}Je.STAT_EVENT="statevent";function Pa(d,_){k.call(this,Je.STAT_EVENT,d),this.stat=_}E(Pa,k);function Yt(d){const _=Qo();xt(_,new Pa(_,d))}Je.Ja="timingevent";function as(d,_){k.call(this,Je.Ja,d),this.size=_}E(as,k);function os(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},_)}function Ur(){this.g=!0}Ur.prototype.ua=function(){this.g=!1};function fp(d,_,x,S,q,X){d.info(function(){if(d.g)if(X){var ge="",Ue=X.split("&");for(let at=0;at<Ue.length;at++){var qt=Ue[at].split("=");if(qt.length>1){const It=qt[0];qt=qt[1];const Sr=It.split("_");ge=Sr.length>=2&&Sr[1]=="type"?ge+(It+"="+qt+"&"):ge+(It+"=redacted&")}}}else ge=null;else ge=X;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+_+`
`+x+`
`+ge})}function lh(d,_,x,S,q,X,ge){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+_+`
`+x+`
`+X+" "+ge})}function ls(d,_,x,S){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+mp(d,x)+(S?" "+S:"")})}function ja(d,_){d.info(function(){return"TIMEOUT: "+_})}Ur.prototype.info=function(){};function mp(d,_){if(!d.g)return _;if(!_)return null;try{const X=JSON.parse(_);if(X){for(d=0;d<X.length;d++)if(Array.isArray(X[d])){var x=X[d];if(!(x.length<2)){var S=x[1];if(Array.isArray(S)&&!(S.length<1)){var q=S[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ge=1;ge<S.length;ge++)S[ge]=""}}}}return $t(X)}catch{return _}}var Va={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mc;function Oa(){}E(Oa,Vc),Oa.prototype.g=function(){return new XMLHttpRequest},Mc=new Oa;function Fs(d){return encodeURIComponent(String(d))}function ch(d){var _=1;d=d.split(":");const x=[];for(;_>0&&d.length;)x.push(d.shift()),_--;return d.length&&x.push(d.join(":")),x}function zr(d,_,x,S){this.j=d,this.i=_,this.l=x,this.S=S||1,this.V=new ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Br}function Br(){this.i=null,this.g="",this.h=!1}var Wt={},dn={};function cs(d,_,x){d.M=1,d.A=Ma(Jt(_)),d.u=x,d.R=!0,Ko(d,null)}function Ko(d,_){d.F=Date.now(),us(d),d.B=Jt(d.A);var x=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),Xo(x.i,"t",S),d.C=0,x=d.j.L,d.h=new Br,d.g=wh(d.j,x?_:null,!d.u),d.P>0&&(d.O=new qe(y(d.Y,d,d.g),d.P)),_=d.V,x=d.g,S=d.ba;var q="readystatechange";Array.isArray(q)||(q&&(kt[0]=q.toString()),q=kt);for(let X=0;X<q.length;X++){const ge=tt(x,q[X],S||_.handleEvent,!1,_.h||_);if(!ge)break;_.g[ge.key]=ge}_=d.J?V(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),is(),fp(d.i,d.v,d.B,d.l,d.S,d.u)}zr.prototype.ba=function(d){d=d.target;const _=this.O;_&&Hr(d)==3?_.j():this.Y(d)},zr.prototype.Y=function(d){try{if(d==this.g)e:{const Ue=Hr(this.g),qt=this.g.ya(),at=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||Ue!=4||qt==7||(qt==8||at<=0?is(3):is(2)),ds(this);var _=this.g.ca();this.X=_;var x=pp(this);if(this.o=_==200,lh(this.i,this.v,this.B,this.l,this.S,Ue,_),this.o){if(this.U&&!this.L){t:{if(this.g){var S,q=this.g;if((S=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(S)){var X=S;break t}}X=null}if(d=X)ls(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hs(this,d);else{this.o=!1,this.m=3,Yt(12),or(this),Tr(this);break e}}if(this.R){d=!0;let It;for(;!this.K&&this.C<x.length;)if(It=dh(this,x),It==dn){Ue==4&&(this.m=4,Yt(14),d=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(It==Wt){this.m=4,Yt(15),ls(this.i,this.l,x,"[Invalid Chunk]"),d=!1;break}else ls(this.i,this.l,It,null),hs(this,It);if(uh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||x.length!=0||this.h.h||(this.m=1,Yt(16),d=!1),this.o=this.o&&d,!d)ls(this.i,this.l,x,"[Invalid Chunked Response]"),or(this),Tr(this);else if(x.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Jc(ge),ge.P=!0,Yt(11))}}else ls(this.i,this.l,x,null),hs(this,x);Ue==4&&or(this),this.o&&!this.K&&(Ue==4?vh(this.j,this):(this.o=!1,us(this)))}else Gs(this.g),_==400&&x.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),or(this),Tr(this)}}}catch{}};function pp(d){if(!uh(d))return d.g.la();const _=xn(d.g);if(_==="")return"";let x="";const S=_.length,q=Hr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return or(d),Tr(d),"";d.h.i=new u.TextDecoder}for(let X=0;X<S;X++)d.h.h=!0,x+=d.h.i.decode(_[X],{stream:!(q&&X==S-1)});return _.length=0,d.h.g+=x,d.C=0,d.h.g}function uh(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function dh(d,_){var x=d.C,S=_.indexOf(`
`,x);return S==-1?dn:(x=Number(_.substring(x,S)),isNaN(x)?Wt:(S+=1,S+x>_.length?dn:(_=_.slice(S,S+x),d.C=S+x,_)))}zr.prototype.cancel=function(){this.K=!0,or(this)};function us(d){d.T=Date.now()+d.H,$o(d,d.H)}function $o(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=os(y(d.aa,d),_)}function ds(d){d.D&&(u.clearTimeout(d.D),d.D=null)}zr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(ja(this.i,this.B),this.M!=2&&(is(),Yt(17)),or(this),this.m=2,Tr(this)):$o(this,this.T-d)};function Tr(d){d.j.I==0||d.K||vh(d.j,d)}function or(d){ds(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,vn(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function hs(d,_){try{var x=d.j;if(x.I!=0&&(x.g==d||ms(x.h,d))){if(!d.L&&ms(x.h,d)&&x.I==3){try{var S=x.Ba.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<d.F)nl(x),Ri(x);else break e;Ha(x),Yt(18)}}else x.xa=q[1],0<x.xa-x.K&&q[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=os(y(x.Va,x),6e3));fs(x.h)<=1&&x.ta&&(x.ta=void 0)}else vs(x,11)}else if((d.L||x.g==d)&&nl(x),!A(_))for(q=x.Ba.g.parse(_),_=0;_<q.length;_++){let at=q[_];const It=at[0];if(!(It<=x.K))if(x.K=It,at=at[1],x.I==2)if(at[0]=="c"){x.M=at[1],x.ba=at[2];const Sr=at[3];Sr!=null&&(x.ka=Sr,x.j.info("VER="+x.ka));const xs=at[4];xs!=null&&(x.za=xs,x.j.info("SVER="+x.za));const Gr=at[5];Gr!=null&&typeof Gr=="number"&&Gr>0&&(S=1.5*Gr,x.O=S,x.j.info("backChannelRequestTimeoutMs_="+S)),S=x;const Qr=d.g;if(Qr){const Ga=Qr.g?Qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ga){var X=S.h;X.g||Ga.indexOf("spdy")==-1&&Ga.indexOf("quic")==-1&&Ga.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(zc(X,X.h),X.h=null))}if(S.G){const rl=Qr.g?Qr.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(S.wa=rl,ct(S.J,S.G,rl))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-d.F,x.j.info("Handshake RTT: "+x.T+"ms")),S=x;var ge=d;if(S.na=Th(S,S.L?S.ba:null,S.W),ge.L){Bc(S.h,ge);var Ue=ge,qt=S.O;qt&&(Ue.H=qt),Ue.D&&(ds(Ue),us(Ue)),S.g=ge}else _h(S);x.i.length>0&&bs(x)}else at[0]!="stop"&&at[0]!="close"||vs(x,7);else x.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?vs(x,7):Wc(x):at[0]!="noop"&&x.l&&x.l.qa(at),x.A=0)}}is(4)}catch{}}var Xt=class{constructor(d,_){this.g=d,this.map=_}};function Lc(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Uc(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function fs(d){return d.h?1:d.g?d.g.size:0}function ms(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function zc(d,_){d.g?d.g.add(_):d.h=_}function Bc(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Lc.prototype.cancel=function(){if(this.i=qc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function qc(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const x of d.g.values())_=_.concat(x.G);return _}return C(d.i)}var hh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yo(d,_){if(d){d=d.split("&");for(let x=0;x<d.length;x++){const S=d[x].indexOf("=");let q,X=null;S>=0?(q=d[x].substring(0,S),X=d[x].substring(S+1)):q=d[x],_(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function lr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof lr?(this.l=d.l,hn(this,d.j),this.o=d.o,this.g=d.g,Ei(this,d.u),this.h=d.h,Fc(this,gh(d.i)),this.m=d.m):d&&(_=String(d).match(hh))?(this.l=!1,hn(this,_[1]||"",!0),this.o=ps(_[2]||""),this.g=ps(_[3]||"",!0),Ei(this,_[4]),this.h=ps(_[5]||"",!0),Fc(this,_[6]||"",!0),this.m=ps(_[7]||"")):(this.l=!1,this.i=new wi(null,this.l))}lr.prototype.toString=function(){const d=[];var _=this.j;_&&d.push(La(_,Wo,!0),":");var x=this.g;return(x||_=="file")&&(d.push("//"),(_=this.o)&&d.push(La(_,Wo,!0),"@"),d.push(Fs(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&d.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(La(x,x.charAt(0)=="/"?Hc:fh,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",La(x,mh)),d.join("")},lr.prototype.resolve=function(d){const _=Jt(this);let x=!!d.j;x?hn(_,d.j):x=!!d.o,x?_.o=d.o:x=!!d.g,x?_.g=d.g:x=d.u!=null;var S=d.h;if(x)Ei(_,d.u);else if(x=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var q=_.h.lastIndexOf("/");q!=-1&&(S=_.h.slice(0,q+1)+S)}if(q=S,q==".."||q==".")S="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){S=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let ge=0;ge<q.length;){const Ue=q[ge++];Ue=="."?S&&ge==q.length&&X.push(""):Ue==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),S&&ge==q.length&&X.push("")):(X.push(Ue),S=!0)}S=X.join("/")}else S=q}return x?_.h=S:x=d.i.toString()!=="",x?Fc(_,gh(d.i)):x=!!d.m,x&&(_.m=d.m),_};function Jt(d){return new lr(d)}function hn(d,_,x){d.j=x?ps(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Ei(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function Fc(d,_,x){_ instanceof wi?(d.i=_,Jo(d.i,d.l)):(x||(_=La(_,Ti)),d.i=new wi(_,d.l))}function ct(d,_,x){d.i.set(_,x)}function Ma(d){return ct(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function ps(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function La(d,_,x){return typeof d=="string"?(d=encodeURI(d).replace(_,Yn),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Yn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Wo=/[#\/\?@]/g,fh=/[#\?:]/g,Hc=/[#\?]/g,Ti=/[#\?@]/g,mh=/#/g;function wi(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Wn(d){d.g||(d.g=new Map,d.h=0,d.i&&Yo(d.i,function(_,x){d.add(decodeURIComponent(_.replace(/\+/g," ")),x)}))}s=wi.prototype,s.add=function(d,_){Wn(this),this.i=null,d=Ii(this,d);let x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(_),this.h+=1,this};function ph(d,_){Wn(d),_=Ii(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Gc(d,_){return Wn(d),_=Ii(d,_),d.g.has(_)}s.forEach=function(d,_){Wn(this),this.g.forEach(function(x,S){x.forEach(function(q){d.call(_,q,S,this)},this)},this)};function Qc(d,_){Wn(d);let x=[];if(typeof _=="string")Gc(d,_)&&(x=x.concat(d.g.get(Ii(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)x=x.concat(d[_]);return x}s.set=function(d,_){return Wn(this),this.i=null,d=Ii(this,d),Gc(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},s.get=function(d,_){return d?(d=Qc(this,d),d.length>0?String(d[0]):_):_};function Xo(d,_,x){ph(d,_),x.length>0&&(d.i=null,d.g.set(Ii(d,_),C(x)),d.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let S=0;S<_.length;S++){var x=_[S];const q=Fs(x);x=Qc(this,x);for(let X=0;X<x.length;X++){let ge=q;x[X]!==""&&(ge+="="+Fs(x[X])),d.push(ge)}}return this.i=d.join("&")};function gh(d){const _=new wi;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function Ii(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Jo(d,_){_&&!d.j&&(Wn(d),d.i=null,d.g.forEach(function(x,S){const q=S.toLowerCase();S!=q&&(ph(this,S),Xo(this,q,x))},d)),d.j=_}function qr(d,_){const x=new Ur;if(u.Image){const S=new Image;S.onload=v(wr,x,"TestLoadImage: loaded",!0,_,S),S.onerror=v(wr,x,"TestLoadImage: error",!1,_,S),S.onabort=v(wr,x,"TestLoadImage: abort",!1,_,S),S.ontimeout=v(wr,x,"TestLoadImage: timeout",!1,_,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else _(!1)}function Kc(d,_){const x=new Ur,S=new AbortController,q=setTimeout(()=>{S.abort(),wr(x,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:S.signal}).then(X=>{clearTimeout(q),X.ok?wr(x,"TestPingServer: ok",!0,_):wr(x,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(q),wr(x,"TestPingServer: error",!1,_)})}function wr(d,_,x,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(x)}catch{}}function Si(){this.g=new qs}function gs(d){this.i=d.Sb||null,this.h=d.ab||!1}E(gs,Vc),gs.prototype.g=function(){return new Ua(this.i,this.h)};function Ua(d,_){$e.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ua,$e),s=Ua.prototype,s.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,Fr(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zo(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zo(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Ai(this):Fr(this),this.readyState==3&&Zo(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Ai(this))},s.Na=function(d){this.g&&(this.response=d,Ai(this))},s.ga=function(){this.g&&Ai(this)};function Ai(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Fr(d)}s.setRequestHeader=function(d,_){this.A.append(d,_)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var x=_.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=_.next();return d.join(`\r
`)};function Fr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ua.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Ir(d){let _="";return Ne(d,function(x,S){_+=S,_+=":",_+=x,_+=`\r
`}),_}function za(d,_,x){e:{for(S in x){var S=!1;break e}S=!0}S||(x=Ir(x),typeof d=="string"?x!=null&&Fs(x):ct(d,_,x))}function mt(d){$e.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(mt,$e);var ys=/^https?$/i,$c=["POST","PUT"];s=mt.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,_,x,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mc.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(X){Ba(this,X);return}if(d=x||"",x=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)x.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const X of S.keys())x.set(X,S.get(X));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(x.keys()).find(X=>X.toLowerCase()=="content-type"),q=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call($c,_,void 0)>=0)||S||q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ge]of x)this.g.setRequestHeader(X,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(X){Ba(this,X)}};function Ba(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,Yc(d),Hs(d)}function Yc(d){d.A||(d.A=!0,xt(d,"complete"),xt(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,xt(this,"complete"),xt(this,"abort"),Hs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hs(this,!0)),mt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?qa(this):this.Xa())},s.Xa=function(){qa(this)};function qa(d){if(d.h&&typeof l<"u"){if(d.v&&Hr(d)==4)setTimeout(d.Ca.bind(d),0);else if(xt(d,"readystatechange"),Hr(d)==4){d.h=!1;try{const X=d.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var x;if(!(x=_)){var S;if(S=X===0){let ge=String(d.D).match(hh)[1]||null;!ge&&u.self&&u.self.location&&(ge=u.self.location.protocol.slice(0,-1)),S=!ys.test(ge?ge.toLowerCase():"")}x=S}if(x)xt(d,"complete"),xt(d,"success");else{d.o=6;try{var q=Hr(d)>2?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.ca()+"]",Yc(d)}}finally{Hs(d)}}}}function Hs(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const x=d.g;d.g=null,_||xt(d,"ready");try{x.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Hr(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Hr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Da(_)}};function xn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Gs(d){const _={};d=(d.g&&Hr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(A(d[S]))continue;var x=ch(d[S]);const q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const X=_[q]||[];_[q]=X,X.push(x)}Le(_,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(d,_,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||_}function Ni(d){this.za=0,this.i=[],this.j=new Ur,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_s("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_s("baseRetryDelayMs",5e3,d),this.Za=_s("retryDelaySeedMs",1e4,d),this.Ta=_s("forwardChannelMaxRetries",2,d),this.va=_s("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Lc(d&&d.concurrentRequestLimit),this.Ba=new Si,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ni.prototype,s.ka=8,s.I=1,s.connect=function(d,_,x,S){Yt(0),this.W=d,this.H=_||{},x&&S!==void 0&&(this.H.OSID=x,this.H.OAID=S),this.F=this.X,this.J=Th(this,null,this.W),bs(this)};function Wc(d){if(el(d),d.I==3){var _=d.V++,x=Jt(d.J);if(ct(x,"SID",d.M),ct(x,"RID",_),ct(x,"TYPE","terminate"),Fa(d,x),_=new zr(d,d.j,_),_.M=2,_.A=Ma(Jt(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!x&&u.Image&&(new Image().src=_.A,x=!0),x||(_.g=wh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),us(_)}Eh(d)}function Ri(d){d.g&&(Jc(d),d.g.cancel(),d.g=null)}function el(d){Ri(d),d.v&&(u.clearTimeout(d.v),d.v=null),nl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function bs(d){if(!Uc(d.h)&&!d.m){d.m=!0;var _=d.Ea;F||R(),ie||(F(),ie=!0),N.add(_,d),d.D=0}}function tl(d,_){return fs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=os(y(d.Ea,d,_),xh(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const q=new zr(this,this.j,d);let X=this.o;if(this.U&&(X?(X=V(X),B(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var _=0,x=0;x<this.i.length;x++){t:{var S=this.i[x];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,_>4096){_=x;break e}if(_===4096||x===this.i.length-1){_=x+1;break e}}_=1e3}else _=1e3;_=yh(this,q,_),x=Jt(this.J),ct(x,"RID",d),ct(x,"CVER",22),this.G&&ct(x,"X-HTTP-Session-Id",this.G),Fa(this,x),X&&(this.R?_="headers="+Fs(Ir(X))+"&"+_:this.u&&za(x,this.u,X)),zc(this.h,q),this.Ra&&ct(x,"TYPE","init"),this.S?(ct(x,"$req",_),ct(x,"SID","null"),q.U=!0,cs(q,x,null)):cs(q,x,_),this.I=2}}else this.I==3&&(d?Xc(this,d):this.i.length==0||Uc(this.h)||Xc(this))};function Xc(d,_){var x;_?x=_.l:x=d.V++;const S=Jt(d.J);ct(S,"SID",d.M),ct(S,"RID",x),ct(S,"AID",d.K),Fa(d,S),d.u&&d.o&&za(S,d.u,d.o),x=new zr(d,d.j,x,d.D+1),d.u===null&&(x.J=d.o),_&&(d.i=_.G.concat(d.i)),_=yh(d,x,1e3),x.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),zc(d.h,x),cs(x,S,_)}function Fa(d,_){d.H&&Ne(d.H,function(x,S){ct(_,S,x)}),d.l&&Ne({},function(x,S){ct(_,S,x)})}function yh(d,_,x){x=Math.min(d.i.length,x);const S=d.l?y(d.l.Ka,d.l,d):null;e:{var q=d.i;let Ue=-1;for(;;){const qt=["count="+x];Ue==-1?x>0?(Ue=q[0].g,qt.push("ofs="+Ue)):Ue=0:qt.push("ofs="+Ue);let at=!0;for(let It=0;It<x;It++){var X=q[It].g;const Sr=q[It].map;if(X-=Ue,X<0)Ue=Math.max(0,q[It].g-100),at=!1;else try{X="req"+X+"_"||"";try{var ge=Sr instanceof Map?Sr:Object.entries(Sr);for(const[xs,Gr]of ge){let Qr=Gr;p(Gr)&&(Qr=$t(Gr)),qt.push(X+xs+"="+encodeURIComponent(Qr))}}catch(xs){throw qt.push(X+"type="+encodeURIComponent("_badmap")),xs}}catch{S&&S(Sr)}}if(at){ge=qt.join("&");break e}}ge=void 0}return d=d.i.splice(0,x),_.G=d,ge}function _h(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;F||R(),ie||(F(),ie=!0),N.add(_,d),d.A=0}}function Ha(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=os(y(d.Da,d),xh(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,bh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=os(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),Ri(this),bh(this))};function Jc(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function bh(d){d.g=new zr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=Jt(d.na);ct(_,"RID","rpc"),ct(_,"SID",d.M),ct(_,"AID",d.K),ct(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&ct(_,"TO",d.ia),ct(_,"TYPE","xmlhttp"),Fa(d,_),d.u&&d.o&&za(_,d.u,d.o),d.O&&(d.g.H=d.O);var x=d.g;d=d.ba,x.M=1,x.A=Ma(Jt(_)),x.u=null,x.R=!0,Ko(x,d)}s.Va=function(){this.C!=null&&(this.C=null,Ri(this),Ha(this),Yt(19))};function nl(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function vh(d,_){var x=null;if(d.g==_){nl(d),Jc(d),d.g=null;var S=2}else if(ms(d.h,_))x=_.G,Bc(d.h,_),S=1;else return;if(d.I!=0){if(_.o)if(S==1){x=_.u?_.u.length:0,_=Date.now()-_.F;var q=d.D;S=Qo(),xt(S,new as(S,x)),bs(d)}else _h(d);else if(q=_.m,q==3||q==0&&_.X>0||!(S==1&&tl(d,_)||S==2&&Ha(d)))switch(x&&x.length>0&&(_=d.h,_.i=_.i.concat(x)),q){case 1:vs(d,5);break;case 4:vs(d,10);break;case 3:vs(d,6);break;default:vs(d,2)}}}function xh(d,_){let x=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(x*=2),x*_}function vs(d,_){if(d.j.info("Error code "+_),_==2){var x=y(d.bb,d),S=d.Ua;const q=!S;S=new lr(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||hn(S,"https"),Ma(S),q?qr(S.toString(),x):Kc(S.toString(),x)}else Yt(2);d.I=0,d.l&&d.l.pa(_),Eh(d),el(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Eh(d){if(d.I=0,d.ja=[],d.l){const _=qc(d.h);(_.length!=0||d.i.length!=0)&&(U(d.ja,_),U(d.ja,d.i),d.h.i.length=0,C(d.i),d.i.length=0),d.l.oa()}}function Th(d,_,x){var S=x instanceof lr?Jt(x):new lr(x);if(S.g!="")_&&(S.g=_+"."+S.g),Ei(S,S.u);else{var q=u.location;S=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;const X=new lr(null);S&&hn(X,S),_&&(X.g=_),q&&Ei(X,q),x&&(X.h=x),S=X}return x=d.G,_=d.wa,x&&_&&ct(S,x,_),ct(S,"VER",d.ka),Fa(d,S),S}function wh(d,_,x){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new mt(new gs({ab:x})):new mt(d.ma),_.Fa(d.L),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ih(){}s=Ih.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ci(){}Ci.prototype.g=function(d,_){return new Un(d,_)};function Un(d,_){$e.call(this),this.g=new Ni(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!A(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!A(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Qs(this)}E(Un,$e),Un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){Wc(this.g)},Un.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.v&&(x={},x.__data__=$t(d),d=x);_.i.push(new Xt(_.Ya++,d)),_.I==3&&bs(_)},Un.prototype.N=function(){this.g.l=null,delete this.j,Wc(this.g),delete this.g,Un.Z.N.call(this)};function Sh(d){ve.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const x in _){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}E(Sh,ve);function Ah(){Ve.call(this),this.status=1}E(Ah,Ve);function Qs(d){this.g=d}E(Qs,Ih),Qs.prototype.ra=function(){xt(this.g,"a")},Qs.prototype.qa=function(d){xt(this.g,new Sh(d))},Qs.prototype.pa=function(d){xt(this.g,new Ah)},Qs.prototype.oa=function(){xt(this.g,"b")},Ci.prototype.createWebChannel=Ci.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,CS=function(){return new Ci},RS=function(){return Qo()},NS=Je,Wy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,Gf=Va,Oc.COMPLETE="complete",AS=Oc,Lr.EventType=Ln,Ln.OPEN="a",Ln.CLOSE="b",Ln.ERROR="c",Ln.MESSAGE="d",$e.prototype.listen=$e.prototype.J,Wu=Lr,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,SS=mt}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");let Ac="12.8.0";function SV(s){Ac=s}const _a=new Cm("@firebase/firestore");function zl(){return _a.logLevel}function AV(s){_a.setLogLevel(s)}function ue(s,...e){if(_a.logLevel<=Qe.DEBUG){const t=e.map(i_);_a.debug(`Firestore (${Ac}): ${s}`,...t)}}function Gt(s,...e){if(_a.logLevel<=Qe.ERROR){const t=e.map(i_);_a.error(`Firestore (${Ac}): ${s}`,...t)}}function zs(s,...e){if(_a.logLevel<=Qe.WARN){const t=e.map(i_);_a.warn(`Firestore (${Ac}): ${s}`,...t)}}function i_(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function xe(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,kS(s,r,t)}function kS(s,e,t){let r=`FIRESTORE (${Ac}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Gt(r),new Error(r)}function we(s,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,s||kS(e,a,r)}function NV(s,e){s||xe(57014,e)}function be(s,e){return s}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Fn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class DS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gn.UNAUTHENTICATED)))}shutdown(){}}class CV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kV{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){we(this.o===void 0,42304);let r=this.i;const a=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let l=new Nn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Nn,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await a(this.currentUser)}))},p=f=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>p(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?p(f):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Nn)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new DS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new gn(e)}}class DV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class PV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new DV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){we(this.o===void 0,3512);const r=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(we(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new AT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function VV(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class a_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=VV(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function je(s,e){return s<e?-1:s>e?1:0}function Xy(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const a=s.charAt(r),l=e.charAt(r);if(a!==l)return Sy(a)===Sy(l)?je(a,l):Sy(a)?1:-1}return je(s.length,e.length)}const OV=55296,MV=57343;function Sy(s){const e=s.charCodeAt(0);return e>=OV&&e<=MV}function rc(s,e,t){return s.length===e.length&&s.every(((r,a)=>t(r,e[a])))}function PS(s){return s+"\0"}const NT="__name__";class Ss{constructor(e,t,r){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&xe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ss.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ss?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Ss.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return je(e.length,t.length)}static compareSegments(e,t){const r=Ss.isNumericId(e),a=Ss.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Ss.extractNumericId(e).compare(Ss.extractNumericId(t)):Xy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return da.fromString(e.substring(4,e.length-2))}}class Ke extends Ss{construct(e,t,r){return new Ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new Ke(t)}static emptyPath(){return new Ke([])}}const LV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Ss{construct(e,t,r){return new Rt(e,t,r)}static isValidIdentifier(e){return LV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===NT}static keyField(){return new Rt([NT])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new le(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const p=e[a];if(p==="\\"){if(a+1===e.length)throw new le(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new le(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,a+=2}else p==="`"?(u=!u,a++):p!=="."||u?(r+=p,a++):(l(),a++)}if(l(),u)throw new le(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(t)}static emptyPath(){return new Rt([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ke.fromString(e))}static fromName(e){return new ye(Ke.fromString(e).popFirst(5))}static empty(){return new ye(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ke(e.slice()))}}function o_(s,e,t){if(!t)throw new le(W.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function jS(s,e,t,r){if(e===!0&&r===!0)throw new le(W.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function RT(s){if(!ye.isDocumentKey(s))throw new le(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function CT(s){if(ye.isDocumentKey(s))throw new le(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function VS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function qm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":xe(12329,{type:typeof s})}function st(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new le(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qm(s);throw new le(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function OS(s,e){if(e<=0)throw new le(W.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function an(s,e){const t={typeString:s};return e&&(t.value=e),t}function Qd(s,e){if(!VS(s))throw new le(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const u=s[r];if(a&&typeof u!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new le(W.INVALID_ARGUMENT,t);return!0}const kT=-62135596800,DT=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*DT);return new lt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<kT)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DT}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qd(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:an("string",lt._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new lt(0,0))}static max(){return new Ae(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const sc=-1;class hm{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Jy(s){return s.fields.find((e=>e.kind===2))}function co(s){return s.fields.filter((e=>e.kind!==2))}hm.UNKNOWN_ID=-1;class Qf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Td{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Td(0,xr.min())}}function MS(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Ae.fromTimestamp(r===1e9?new lt(t+1,0):new lt(t,r));return new xr(a,ye.empty(),e)}function LS(s){return new xr(s.readTime,s.key,sc)}class xr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xr(Ae.min(),ye.empty(),sc)}static max(){return new xr(Ae.max(),ye.empty(),sc)}}function l_(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(s.documentKey,e.documentKey),t!==0?t:je(s.largestBatchId,e.largestBatchId))}const US="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Aa(s){if(s.code!==W.FAILED_PRECONDITION||s.message!==US)throw s;ue("LocalStore","Unexpectedly lost primary lease")}class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):z.reject(t)}static resolve(e){return new z(((t,r)=>{t(e)}))}static reject(e){return new z(((t,r)=>{r(e)}))}static waitFor(e){return new z(((t,r)=>{let a=0,l=0,u=!1;e.forEach((p=>{++a,p.next((()=>{++l,u&&l===a&&t()}),(f=>r(f)))})),u=!0,l===a&&t()}))}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next((a=>a?z.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new z(((r,a)=>{const l=e.length,u=new Array(l);let p=0;for(let f=0;f<l;f++){const y=f;t(e[y]).next((v=>{u[y]=v,++p,p===l&&r(u)}),(v=>a(v)))}}))}static doWhile(e,t){return new z(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}const gr="SimpleDb";class Fm{static open(e,t,r,a){try{return new Fm(t,e.transaction(a,r))}catch(l){throw new od(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Nn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new od(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=c_(r.target.error);this.S.reject(new od(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ue(gr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new zV(t)}}class Os{static delete(e){return ue(gr,"Removing database:",e),ho(C0().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!gd())return!1;if(Os.F())return!0;const e=jt(),t=Os.M(e),r=0<t&&t<10,a=BS(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Os.M(jt())===12.2&&Gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ue(gr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new od(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new le(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new le(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new od(e,u))},a.onupgradeneeded=l=>{ue(gr,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.N.k(u,a.transaction,l.oldVersion,this.version).next((()=>{ue(gr,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const p=Fm.open(this.db,e,l?"readonly":"readwrite",r),f=a(p).next((y=>(p.C(),y))).catch((y=>(p.abort(y),z.reject(y)))).toPromise();return f.catch((()=>{})),await p.D,f}catch(p){const f=p,y=f.name!=="FirebaseError"&&u<3;if(ue(gr,"Transaction failed with error:",f.message,"Retrying:",y),this.close(),!y)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function BS(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class UV{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return ho(this.U.delete())}}class od extends le{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Na(s){return s.name==="IndexedDbTransactionError"}class zV{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ue(gr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ue(gr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ho(r)}add(e){return ue(gr,"ADD",this.store.name,e,e),ho(this.store.add(e))}get(e){return ho(this.store.get(e)).next((t=>(t===void 0&&(t=null),ue(gr,"GET",this.store.name,e,t),t)))}delete(e){return ue(gr,"DELETE",this.store.name,e),ho(this.store.delete(e))}count(){return ue(gr,"COUNT",this.store.name),ho(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new z(((u,p)=>{l.onerror=f=>{p(f.target.error)},l.onsuccess=f=>{u(f.target.result)}}))}{const l=this.cursor(r),u=[];return this.J(l,((p,f)=>{u.push(f)})).next((()=>u))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new z(((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}X(e,t){ue(gr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,u,p)=>p.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new z(((r,a)=>{t.onerror=l=>{const u=c_(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((p=>{p?u.continue():r()})):r()}}))}J(e,t){const r=[];return new z(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const p=u.target.result;if(!p)return void a();const f=new UV(p),y=t(p.primaryKey,p.value,f);if(y instanceof z){const v=y.catch((E=>(f.done(),z.reject(E))));r.push(v)}f.isDone?a():f.G===null?p.continue():p.continue(f.G)}})).next((()=>z.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ho(s){return new z(((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=c_(r.target.error);t(a)}}))}let PT=!1;function c_(s){const e=Os.M(jt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PT||(PT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const ld="IndexBackfiller";class BV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ue(ld,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ue(ld,`Documents written: ${t}`)}catch(t){Na(t)?ue(ld,"Ignoring IndexedDB error during index backfill: ",t):await Aa(t)}await this.re(6e4)}))}}class qV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return z.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return ue(ld,`Processing collection: ${u}`),this.oe(e,u,a).next((p=>{a-=p,r.add(u)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(a,l))).next((p=>(ue(ld,`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p)))).next((()=>u.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const u=LS(l);l_(u,r)>0&&(r=u)})),new xr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class rr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}rr.ce=-1;const ha=-1;function Kd(s){return s==null}function wd(s){return s===0&&1/s==-1/0}function qS(s){return typeof s=="number"&&Number.isInteger(s)&&!wd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const fm="";function On(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=jT(e)),e=FV(s.get(t),e);return jT(e)}function FV(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case fm:t+="";break;default:t+=l}}return t}function jT(s){return s+fm+""}function Ps(s){const e=s.length;if(we(e>=2,64408,{path:s}),e===2)return we(s.charAt(0)===fm&&s.charAt(1)==="",56145,{path:s}),Ke.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=s.indexOf(fm,l);switch((u<0||u>t)&&xe(50515,{path:s}),s.charAt(u+1)){case"":const p=s.substring(l,u);let f;a.length===0?f=p:(a+=p,f=a,a=""),r.push(f);break;case"":a+=s.substring(l,u),a+="\0";break;case"":a+=s.substring(l,u+1);break;default:xe(61167,{path:s})}l=u+2}return new Ke(r)}const uo="remoteDocuments",$d="owner",jl="owner",Id="mutationQueues",HV="userId",Wr="mutations",VT="batchId",_o="userMutationsIndex",OT=["userId","batchId"];function Kf(s,e){return[s,On(e)]}function FS(s,e,t){return[s,On(e),t]}const GV={},ic="documentMutations",mm="remoteDocumentsV14",QV=["prefixPath","collectionGroup","readTime","documentId"],$f="documentKeyIndex",KV=["prefixPath","collectionGroup","documentId"],HS="collectionGroupIndex",$V=["collectionGroup","readTime","prefixPath","documentId"],Sd="remoteDocumentGlobal",Zy="remoteDocumentGlobalKey",ac="targets",GS="queryTargetsIndex",YV=["canonicalId","targetId"],oc="targetDocuments",WV=["targetId","path"],u_="documentTargetsIndex",XV=["path","targetId"],pm="targetGlobalKey",Io="targetGlobal",Ad="collectionParents",JV=["collectionId","parent"],lc="clientMetadata",ZV="clientId",Hm="bundles",eO="bundleId",Gm="namedQueries",tO="name",d_="indexConfiguration",nO="indexId",e0="collectionGroupIndex",rO="collectionGroup",cd="indexState",sO=["indexId","uid"],QS="sequenceNumberIndex",iO=["uid","sequenceNumber"],ud="indexEntries",aO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],KS="documentKeyIndex",oO=["indexId","uid","orderedDocumentKey"],Qm="documentOverlays",lO=["userId","collectionPath","documentId"],t0="collectionPathOverlayIndex",cO=["userId","collectionPath","largestBatchId"],$S="collectionGroupOverlayIndex",uO=["userId","collectionGroup","largestBatchId"],h_="globals",dO="name",YS=[Id,Wr,ic,uo,ac,$d,Io,oc,lc,Sd,Ad,Hm,Gm],hO=[...YS,Qm],WS=[Id,Wr,ic,mm,ac,$d,Io,oc,lc,Sd,Ad,Hm,Gm,Qm],XS=WS,f_=[...XS,d_,cd,ud],fO=f_,JS=[...f_,h_],mO=JS;class n0 extends zS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function un(s,e){const t=be(s);return Os.O(t.le,e)}function MT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Ra(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function ZS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class vt{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jf(this.root,e,this.comparator,!1)}getReverseIterator(){return new jf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jf(this.root,e,this.comparator,!0)}}class jf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??Sn.RED,this.left=a??Sn.EMPTY,this.right=l??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new Sn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Sn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ft{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new LT(this.data.getIterator())}getIteratorFrom(e){return new LT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ft(this.comparator);return t.data=e,t}}class LT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vl(s){return s.hasNext()?s.getNext():void 0}class sr{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new sr([])}unionWith(e){let t=new ft(Rt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class eA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function pO(){return typeof atob<"u"}class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new eA("Invalid base64 string: "+l):l}})(e);return new Lt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const gO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(s){if(we(!!s,39018),typeof s=="string"){let e=0;const t=gO.exec(s);if(we(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(s.seconds),nanos:At(s.nanos)}}function At(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function pi(s){return typeof s=="string"?Lt.fromBase64String(s):Lt.fromUint8Array(s)}const tA="server_timestamp",nA="__type__",rA="__previous_value__",sA="__local_write_time__";function Km(s){return(s?.mapValue?.fields||{})[nA]?.stringValue===tA}function $m(s){const e=s.mapValue.fields[rA];return Km(e)?$m(e):e}function Nd(s){const e=mi(s.mapValue.fields[sA].timestampValue);return new lt(e.seconds,e.nanos)}class yO{constructor(e,t,r,a,l,u,p,f,y,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=f,this.useFetchStreams=y,this.isUsingEmulator=v,this.apiKey=E}}const r0="(default)";class ba{constructor(e,t){this.projectId=e,this.database=t||r0}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database===r0}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}function _O(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new le(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(s.options.projectId,e)}const m_="__type__",iA="__max__",oa={mapValue:{fields:{__type__:{stringValue:iA}}}},p_="__vector__",cc="value",Yf={nullValue:"NULL_VALUE"};function va(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Km(s)?4:aA(s)?9007199254740991:Ym(s)?10:11:xe(28295,{value:s})}function Bs(s,e){if(s===e)return!0;const t=va(s);if(t!==va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Nd(s).isEqual(Nd(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=mi(a.timestampValue),p=mi(l.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return pi(a.bytesValue).isEqual(pi(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return At(a.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(a.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return At(a.integerValue)===At(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=At(a.doubleValue),p=At(l.doubleValue);return u===p?wd(u)===wd(p):isNaN(u)&&isNaN(p)}return!1})(s,e);case 9:return rc(s.arrayValue.values||[],e.arrayValue.values||[],Bs);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},p=l.mapValue.fields||{};if(MT(u)!==MT(p))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(p[f]===void 0||!Bs(u[f],p[f])))return!1;return!0})(s,e);default:return xe(52216,{left:s})}}function Rd(s,e){return(s.values||[]).find((t=>Bs(t,e)))!==void 0}function xa(s,e){if(s===e)return 0;const t=va(s),r=va(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(s.booleanValue,e.booleanValue);case 2:return(function(l,u){const p=At(l.integerValue||l.doubleValue),f=At(u.integerValue||u.doubleValue);return p<f?-1:p>f?1:p===f?0:isNaN(p)?isNaN(f)?0:-1:1})(s,e);case 3:return UT(s.timestampValue,e.timestampValue);case 4:return UT(Nd(s),Nd(e));case 5:return Xy(s.stringValue,e.stringValue);case 6:return(function(l,u){const p=pi(l),f=pi(u);return p.compareTo(f)})(s.bytesValue,e.bytesValue);case 7:return(function(l,u){const p=l.split("/"),f=u.split("/");for(let y=0;y<p.length&&y<f.length;y++){const v=je(p[y],f[y]);if(v!==0)return v}return je(p.length,f.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,u){const p=je(At(l.latitude),At(u.latitude));return p!==0?p:je(At(l.longitude),At(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return zT(s.arrayValue,e.arrayValue);case 10:return(function(l,u){const p=l.fields||{},f=u.fields||{},y=p[cc]?.arrayValue,v=f[cc]?.arrayValue,E=je(y?.values?.length||0,v?.values?.length||0);return E!==0?E:zT(y,v)})(s.mapValue,e.mapValue);case 11:return(function(l,u){if(l===oa.mapValue&&u===oa.mapValue)return 0;if(l===oa.mapValue)return 1;if(u===oa.mapValue)return-1;const p=l.fields||{},f=Object.keys(p),y=u.fields||{},v=Object.keys(y);f.sort(),v.sort();for(let E=0;E<f.length&&E<v.length;++E){const T=Xy(f[E],v[E]);if(T!==0)return T;const C=xa(p[f[E]],y[v[E]]);if(C!==0)return C}return je(f.length,v.length)})(s.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function UT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return je(s,e);const t=mi(s),r=mi(e),a=je(t.seconds,r.seconds);return a!==0?a:je(t.nanos,r.nanos)}function zT(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=xa(t[a],r[a]);if(l)return l}return je(t.length,r.length)}function uc(s){return s0(s)}function s0(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=mi(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return pi(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return ye.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=s0(l);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${s0(t.fields[u])}`;return a+"}"})(s.mapValue):xe(61005,{value:s})}function Wf(s){switch(va(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$m(s);return e?16+Wf(e):16;case 5:return 2*s.stringValue.length;case 6:return pi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Wf(l)),0)})(s.arrayValue);case 10:case 11:return(function(r){let a=0;return Ra(r.fields,((l,u)=>{a+=l.length+Wf(u)})),a})(s.mapValue);default:throw xe(13486,{value:s})}}function Ro(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function i0(s){return!!s&&"integerValue"in s}function Cd(s){return!!s&&"arrayValue"in s}function BT(s){return!!s&&"nullValue"in s}function qT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Xf(s){return!!s&&"mapValue"in s}function Ym(s){return(s?.mapValue?.fields||{})[m_]?.stringValue===p_}function dd(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ra(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=dd(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dd(s.arrayValue.values[t]);return e}return{...s}}function aA(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===iA}const oA={mapValue:{fields:{[m_]:{stringValue:p_},[cc]:{arrayValue:{}}}}};function bO(s){return"nullValue"in s?Yf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Ro(ba.empty(),ye.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Ym(s)?oA:{mapValue:{}}:xe(35942,{value:s})}function vO(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Ro(ba.empty(),ye.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?oA:"mapValue"in s?Ym(s)?{mapValue:{}}:oa:xe(61959,{value:s})}function FT(s,e){const t=xa(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function HT(s,e){const t=xa(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dd(t)}setAll(e){let t=Rt.emptyPath(),r={},a=[];e.forEach(((u,p)=>{if(!t.isImmediateParentOf(p)){const f=this.getFieldsMap(t);this.applyChanges(f,r,a),r={},a=[],t=p.popLast()}u?r[p.lastSegment()]=dd(u):a.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Xf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Xf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Ra(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new An(dd(this.value))}}function lA(s){const e=[];return Ra(s.fields,((t,r)=>{const a=new Rt([t]);if(Xf(r)){const l=lA(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new sr(e)}class wt{constructor(e,t,r,a,l,u,p){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=p}static newInvalidDocument(e){return new wt(e,0,Ae.min(),Ae.min(),Ae.min(),An.empty(),0)}static newFoundDocument(e,t,r,a){return new wt(e,1,t,Ae.min(),r,a,0)}static newNoDocument(e,t){return new wt(e,2,t,Ae.min(),Ae.min(),An.empty(),0)}static newUnknownDocument(e,t){return new wt(e,3,t,Ae.min(),Ae.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ea{constructor(e,t){this.position=e,this.inclusive=t}}function GT(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],u=s.position[a];if(l.field.isKeyField()?r=ye.comparator(ye.fromName(u.referenceValue),t.key):r=xa(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function QT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Bs(s.position[t],e.position[t]))return!1;return!0}class kd{constructor(e,t="asc"){this.field=e,this.dir=t}}function xO(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class cA{}class Xe extends cA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new EO(e,t,r):t==="array-contains"?new IO(e,r):t==="in"?new pA(e,r):t==="not-in"?new SO(e,r):t==="array-contains-any"?new AO(e,r):new Xe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new TO(e,r):new wO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xa(t,this.value)):t!==null&&va(this.value)===va(t)&&this.matchesComparison(xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ht extends cA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ht(e,t)}matches(e){return dc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dc(s){return s.op==="and"}function a0(s){return s.op==="or"}function g_(s){return uA(s)&&dc(s)}function uA(s){for(const e of s.filters)if(e instanceof ht)return!1;return!0}function o0(s){if(s instanceof Xe)return s.field.canonicalString()+s.op.toString()+uc(s.value);if(g_(s))return s.filters.map((e=>o0(e))).join(",");{const e=s.filters.map((t=>o0(t))).join(",");return`${s.op}(${e})`}}function dA(s,e){return s instanceof Xe?(function(r,a){return a instanceof Xe&&r.op===a.op&&r.field.isEqual(a.field)&&Bs(r.value,a.value)})(s,e):s instanceof ht?(function(r,a){return a instanceof ht&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,p)=>l&&dA(u,a.filters[p])),!0):!1})(s,e):void xe(19439)}function hA(s,e){const t=s.filters.concat(e);return ht.create(t,s.op)}function fA(s){return s instanceof Xe?(function(t){return`${t.field.canonicalString()} ${t.op} ${uc(t.value)}`})(s):s instanceof ht?(function(t){return t.op.toString()+" {"+t.getFilters().map(fA).join(" ,")+"}"})(s):"Filter"}class EO extends Xe{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class TO extends Xe{constructor(e,t){super(e,"in",t),this.keys=mA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wO extends Xe{constructor(e,t){super(e,"not-in",t),this.keys=mA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function mA(s,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class IO extends Xe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cd(t)&&Rd(t.arrayValue,this.value)}}class pA extends Xe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rd(this.value.arrayValue,t)}}class SO extends Xe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Rd(this.value.arrayValue,t)}}class AO extends Xe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Rd(this.value.arrayValue,r)))}}class NO{constructor(e,t=null,r=[],a=[],l=null,u=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=p,this.Te=null}}function l0(s,e=null,t=[],r=[],a=null,l=null,u=null){return new NO(s,e,t,r,a,l,u)}function Co(s){const e=be(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>o0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Kd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>uc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>uc(r))).join(",")),e.Te=t}return e.Te}function Yd(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!xO(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!dA(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!QT(s.startAt,e.startAt)&&QT(s.endAt,e.endAt)}function gm(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function ym(s,e){return s.filters.filter((t=>t instanceof Xe&&t.field.isEqual(e)))}function KT(s,e,t){let r=Yf,a=!0;for(const l of ym(s,e)){let u=Yf,p=!0;switch(l.op){case"<":case"<=":u=bO(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,p=!1;break;case"!=":case"not-in":u=Yf}FT({value:r,inclusive:a},{value:u,inclusive:p})<0&&(r=u,a=p)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const u=t.position[l];FT({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function $T(s,e,t){let r=oa,a=!0;for(const l of ym(s,e)){let u=oa,p=!0;switch(l.op){case">=":case">":u=vO(l.value),p=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,p=!1;break;case"!=":case"not-in":u=oa}HT({value:r,inclusive:a},{value:u,inclusive:p})>0&&(r=u,a=p)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const u=t.position[l];HT({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}class _i{constructor(e,t=null,r=[],a=[],l=null,u="F",p=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=p,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function gA(s,e,t,r,a,l,u,p){return new _i(s,e,t,r,a,l,u,p)}function Nc(s){return new _i(s)}function YT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function RO(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function y_(s){return s.collectionGroup!==null}function Wl(s){const e=be(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new ft(Rt.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new kd(l,r))})),t.has(Rt.keyField().canonicalString())||e.Ie.push(new kd(Rt.keyField(),r))}return e.Ie}function Hn(s){const e=be(s);return e.Ee||(e.Ee=CO(e,Wl(s))),e.Ee}function CO(s,e){if(s.limitType==="F")return l0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new kd(a.field,l)}));const t=s.endAt?new Ea(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Ea(s.startAt.position,s.startAt.inclusive):null;return l0(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function c0(s,e){const t=s.filters.concat([e]);return new _i(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function kO(s,e){const t=s.explicitOrderBy.concat([e]);return new _i(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function _m(s,e,t){return new _i(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function DO(s,e){return new _i(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,e,s.endAt)}function PO(s,e){return new _i(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,e)}function Wd(s,e){return Yd(Hn(s),Hn(e))&&s.limitType===e.limitType}function yA(s){return`${Co(Hn(s))}|lt:${s.limitType}`}function Bl(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>fA(a))).join(", ")}]`),Kd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>uc(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>uc(a))).join(",")),`Target(${r})`})(Hn(s))}; limitType=${s.limitType})`}function Xd(s,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ye.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(s,e)&&(function(r,a){for(const l of Wl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(r,a){return!(r.startAt&&!(function(u,p,f){const y=GT(u,p,f);return u.inclusive?y<=0:y<0})(r.startAt,Wl(r),a)||r.endAt&&!(function(u,p,f){const y=GT(u,p,f);return u.inclusive?y>=0:y>0})(r.endAt,Wl(r),a))})(s,e)}function _A(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function bA(s){return(e,t)=>{let r=!1;for(const a of Wl(s)){const l=jO(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function jO(s,e,t){const r=s.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,u,p){const f=u.data.field(l),y=p.data.field(l);return f!==null&&y!==null?xa(f,y):xe(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:s.dir})}}class bi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ra(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return ZS(this.inner)}size(){return this.innerSize}}const VO=new vt(ye.comparator);function ir(){return VO}const vA=new vt(ye.comparator);function Xu(...s){let e=vA;for(const t of s)e=e.insert(t.key,t);return e}function xA(s){let e=vA;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function js(){return hd()}function EA(){return hd()}function hd(){return new bi((s=>s.toString()),((s,e)=>s.isEqual(e)))}const OO=new vt(ye.comparator),MO=new ft(ye.comparator);function Be(...s){let e=MO;for(const t of s)e=e.add(t);return e}const LO=new ft(je);function __(){return LO}function b_(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wd(e)?"-0":e}}function TA(s){return{integerValue:""+s}}function wA(s,e){return qS(e)?TA(e):b_(s,e)}class Wm{constructor(){this._=void 0}}function UO(s,e,t){return s instanceof hc?(function(a,l){const u={fields:{[nA]:{stringValue:tA},[sA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Km(l)&&(l=$m(l)),l&&(u.fields[rA]=l),{mapValue:u}})(t,e):s instanceof ko?SA(s,e):s instanceof Do?AA(s,e):(function(a,l){const u=IA(a,l),p=WT(u)+WT(a.Ae);return i0(u)&&i0(a.Ae)?TA(p):b_(a.serializer,p)})(s,e)}function zO(s,e,t){return s instanceof ko?SA(s,e):s instanceof Do?AA(s,e):t}function IA(s,e){return s instanceof fc?(function(r){return i0(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class hc extends Wm{}class ko extends Wm{constructor(e){super(),this.elements=e}}function SA(s,e){const t=NA(e);for(const r of s.elements)t.some((a=>Bs(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Do extends Wm{constructor(e){super(),this.elements=e}}function AA(s,e){let t=NA(e);for(const r of s.elements)t=t.filter((a=>!Bs(a,r)));return{arrayValue:{values:t}}}class fc extends Wm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function WT(s){return At(s.integerValue||s.doubleValue)}function NA(s){return Cd(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Jd{constructor(e,t){this.field=e,this.transform=t}}function BO(s,e){return s.field.isEqual(e.field)&&(function(r,a){return r instanceof ko&&a instanceof ko||r instanceof Do&&a instanceof Do?rc(r.elements,a.elements,Bs):r instanceof fc&&a instanceof fc?Bs(r.Ae,a.Ae):r instanceof hc&&a instanceof hc})(s.transform,e.transform)}class qO{constructor(e,t){this.version=e,this.transformResults=t}}class Ct{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ct}static exists(e){return new Ct(void 0,e)}static updateTime(e){return new Ct(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Xm{}function RA(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Cc(s.key,Ct.none()):new Rc(s.key,s.data,Ct.none());{const t=s.data,r=An.empty();let a=new ft(Rt.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new vi(s.key,r,new sr(a.toArray()),Ct.none())}}function FO(s,e,t){s instanceof Rc?(function(a,l,u){const p=a.value.clone(),f=JT(a.fieldTransforms,l,u.transformResults);p.setAll(f),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(s,e,t):s instanceof vi?(function(a,l,u){if(!Jf(a.precondition,l))return void l.convertToUnknownDocument(u.version);const p=JT(a.fieldTransforms,l,u.transformResults),f=l.data;f.setAll(CA(a)),f.setAll(p),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(s,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function fd(s,e,t,r){return s instanceof Rc?(function(l,u,p,f){if(!Jf(l.precondition,u))return p;const y=l.value.clone(),v=ZT(l.fieldTransforms,f,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(s,e,t,r):s instanceof vi?(function(l,u,p,f){if(!Jf(l.precondition,u))return p;const y=ZT(l.fieldTransforms,f,u),v=u.data;return v.setAll(CA(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(s,e,t,r):(function(l,u,p){return Jf(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(s,e,t)}function HO(s,e){let t=null;for(const r of s.fieldTransforms){const a=e.data.field(r.field),l=IA(r.transform,a||null);l!=null&&(t===null&&(t=An.empty()),t.set(r.field,l))}return t||null}function XT(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&rc(r,a,((l,u)=>BO(l,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Rc extends Xm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class vi extends Xm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function CA(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function JT(s,e,t){const r=new Map;we(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let a=0;a<t.length;a++){const l=s[a],u=l.transform,p=e.data.field(l.field);r.set(l.field,zO(u,p,t[a]))}return r}function ZT(s,e,t){const r=new Map;for(const a of s){const l=a.transform,u=t.data.field(a.field);r.set(a.field,UO(l,u,e))}return r}class Cc extends Xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v_ extends Xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class x_{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&FO(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=EA();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let p=this.applyToLocalView(u,l.mutatedFields);p=t.has(a.key)?null:p;const f=RA(u,p);f!==null&&r.set(a.key,f),u.isValidDocument()||u.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&rc(this.mutations,e.mutations,((t,r)=>XT(t,r)))&&rc(this.baseMutations,e.baseMutations,((t,r)=>XT(t,r)))}}class E_{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){we(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return OO})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new E_(e,t,r,a)}}class T_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class GO{constructor(e,t){this.count=e,this.unchangedNames=t}}var rn,et;function kA(s){switch(s){case W.OK:return xe(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return xe(15467,{code:s})}}function DA(s){if(s===void 0)return Gt("GRPC error has no .code"),W.UNKNOWN;switch(s){case rn.OK:return W.OK;case rn.CANCELLED:return W.CANCELLED;case rn.UNKNOWN:return W.UNKNOWN;case rn.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case rn.INTERNAL:return W.INTERNAL;case rn.UNAVAILABLE:return W.UNAVAILABLE;case rn.UNAUTHENTICATED:return W.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case rn.NOT_FOUND:return W.NOT_FOUND;case rn.ALREADY_EXISTS:return W.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return W.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case rn.ABORTED:return W.ABORTED;case rn.OUT_OF_RANGE:return W.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return W.UNIMPLEMENTED;case rn.DATA_LOSS:return W.DATA_LOSS;default:return xe(39323,{code:s})}}(et=rn||(rn={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";function PA(){return new TextEncoder}const QO=new da([4294967295,4294967295],0);function ew(s){const e=PA().encode(s),t=new IS;return t.update(e),new Uint8Array(t.digest())}function tw(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new da([t,r],0),new da([a,l],0)]}class w_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ju(`Invalid padding: ${t}`);if(r<0)throw new Ju(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ju(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ju(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=da.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(da.fromNumber(r)));return a.compare(QO)===1&&(a=new da([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ew(e),[r,a]=tw(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);if(!this.we(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new w_(l,a,t);return r.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const t=ew(e),[r,a]=tw(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zd{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,eh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Zd(Ae.min(),a,new vt(je),ir(),Be())}}class eh{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new eh(r,t,Be(),Be(),Be())}}class Zf{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class jA{constructor(e,t){this.targetId=e,this.Ce=t}}class VA{constructor(e,t,r=Lt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class nw{constructor(){this.ve=0,this.Fe=rw(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),r=Be();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:xe(38017,{changeType:l})}})),new eh(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=rw()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class KO{constructor(e){this.Ge=e,this.ze=new Map,this.je=ir(),this.He=Vf(),this.Je=Vf(),this.Ze=new vt(je)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(gm(l))if(r===0){const u=new ye(l.path);this.et(t,u,wt.newNoDocument(u,Ae.min()))}else we(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const p=this.ut(e),f=p?this.ct(p,e,u):1;if(f!==0){this.it(t);const y=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,p;try{u=pi(r).toUint8Array()}catch(f){if(f instanceof eA)return zs("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{p=new w_(u,a,l)}catch(f){return zs(f instanceof Ju?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return p.ge===0?null:p}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const p=this.ot(u);if(p){if(l.current&&gm(p.target)){const f=new ye(p.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,wt.newNoDocument(f,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let r=Be();this.Je.forEach(((l,u)=>{let p=!0;u.forEachWhile((f=>{const y=this.ot(f);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Zd(e,t,this.Ze,this.je,r);return this.je=ir(),this.He=Vf(),this.Je=Vf(),this.Ze=new vt(je),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new nw,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ft(je),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ft(je),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Vf(){return new vt(ye.comparator)}function rw(){return new vt(ye.comparator)}const $O={asc:"ASCENDING",desc:"DESCENDING"},YO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WO={and:"AND",or:"OR"};class XO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function u0(s,e){return s.useProto3Json||Kd(e)?e:{value:e}}function mc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OA(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function JO(s,e){return mc(s,e.toTimestamp())}function Qt(s){return we(!!s,49232),Ae.fromTimestamp((function(t){const r=mi(t);return new lt(r.seconds,r.nanos)})(s))}function I_(s,e){return d0(s,e).canonicalString()}function d0(s,e){const t=(function(a){return new Ke(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function MA(s){const e=Ke.fromString(s);return we(KA(e),10190,{key:e.toString()}),e}function Dd(s,e){return I_(s.databaseId,e.path)}function Ms(s,e){const t=MA(e);if(t.get(1)!==s.databaseId.projectId)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new le(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ye(zA(t))}function LA(s,e){return I_(s.databaseId,e)}function UA(s){const e=MA(s);return e.length===4?Ke.emptyPath():zA(e)}function h0(s){return new Ke(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function zA(s){return we(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function sw(s,e,t){return{name:Dd(s,e),fields:t.value.mapValue.fields}}function BA(s,e,t){const r=Ms(s,e.name),a=Qt(e.updateTime),l=e.createTime?Qt(e.createTime):Ae.min(),u=new An({mapValue:{fields:e.fields}}),p=wt.newFoundDocument(r,a,l,u);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function ZO(s,e){return"found"in e?(function(r,a){we(!!a.found,43571),a.found.name,a.found.updateTime;const l=Ms(r,a.found.name),u=Qt(a.found.updateTime),p=a.found.createTime?Qt(a.found.createTime):Ae.min(),f=new An({mapValue:{fields:a.found.fields}});return wt.newFoundDocument(l,u,p,f)})(s,e):"missing"in e?(function(r,a){we(!!a.missing,3894),we(!!a.readTime,22933);const l=Ms(r,a.missing),u=Qt(a.readTime);return wt.newNoDocument(l,u)})(s,e):xe(7234,{result:e})}function eM(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:xe(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(we(v===void 0||typeof v=="string",58123),Lt.fromBase64String(v||"")):(we(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Lt.fromUint8Array(v||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(y){const v=y.code===void 0?W.UNKNOWN:DA(y.code);return new le(v,y.message||"")})(u);t=new VA(r,a,l,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Ms(s,r.document.name),l=Qt(r.document.updateTime),u=r.document.createTime?Qt(r.document.createTime):Ae.min(),p=new An({mapValue:{fields:r.document.fields}}),f=wt.newFoundDocument(a,l,u,p),y=r.targetIds||[],v=r.removedTargetIds||[];t=new Zf(y,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Ms(s,r.document),l=r.readTime?Qt(r.readTime):Ae.min(),u=wt.newNoDocument(a,l),p=r.removedTargetIds||[];t=new Zf([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Ms(s,r.document),l=r.removedTargetIds||[];t=new Zf([],l,a,null)}else{if(!("filter"in e))return xe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new GO(a,l),p=r.targetId;t=new jA(p,u)}}return t}function Pd(s,e){let t;if(e instanceof Rc)t={update:sw(s,e.key,e.value)};else if(e instanceof Cc)t={delete:Dd(s,e.key)};else if(e instanceof vi)t={update:sw(s,e.key,e.data),updateMask:aM(e.fieldMask)};else{if(!(e instanceof v_))return xe(16599,{dt:e.type});t={verify:Dd(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const p=u.transform;if(p instanceof hc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ko)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Do)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof fc)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw xe(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:JO(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:xe(27497)})(s,e.precondition)),t}function f0(s,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Ct.updateTime(Qt(l.updateTime)):l.exists!==void 0?Ct.exists(l.exists):Ct.none()})(e.currentDocument):Ct.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(u,p){let f=null;if("setToServerValue"in p)we(p.setToServerValue==="REQUEST_TIME",16630,{proto:p}),f=new hc;else if("appendMissingElements"in p){const v=p.appendMissingElements.values||[];f=new ko(v)}else if("removeAllFromArray"in p){const v=p.removeAllFromArray.values||[];f=new Do(v)}else"increment"in p?f=new fc(u,p.increment):xe(16584,{proto:p});const y=Rt.fromServerFormat(p.fieldPath);return new Jd(y,f)})(s,a))):[];if(e.update){e.update.name;const a=Ms(s,e.update.name),l=new An({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(f){const y=f.fieldPaths||[];return new sr(y.map((v=>Rt.fromServerFormat(v))))})(e.updateMask);return new vi(a,l,u,t,r)}return new Rc(a,l,t,r)}if(e.delete){const a=Ms(s,e.delete);return new Cc(a,t)}if(e.verify){const a=Ms(s,e.verify);return new v_(a,t)}return xe(1463,{proto:e})}function tM(s,e){return s&&s.length>0?(we(e!==void 0,14353),s.map((t=>(function(a,l){let u=a.updateTime?Qt(a.updateTime):Qt(l);return u.isEqual(Ae.min())&&(u=Qt(l)),new qO(u,a.transformResults||[])})(t,e)))):[]}function qA(s,e){return{documents:[LA(s,e.path)]}}function FA(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=LA(s,a);const l=(function(y){if(y.length!==0)return QA(ht.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((v=>(function(T){return{field:ql(T.field),direction:rM(T.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const p=u0(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function HA(s){let e=UA(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){we(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const T=GA(E);return T instanceof ht&&g_(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((T=>(function(U){return new kd(Fl(U.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(T)))})(t.orderBy));let p=null;t.limit&&(p=(function(E){let T;return T=typeof E=="object"?E.value:E,Kd(T)?null:T})(t.limit));let f=null;t.startAt&&(f=(function(E){const T=!!E.before,C=E.values||[];return new Ea(C,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const T=!E.before,C=E.values||[];return new Ea(C,T)})(t.endAt)),gA(e,a,u,l,p,"F",f,y)}function nM(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function GA(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Fl(t.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Fl(t.unaryFilter.field);return Xe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Fl(t.unaryFilter.field);return Xe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Fl(t.unaryFilter.field);return Xe.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Xe.create(Fl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ht.create(t.compositeFilter.filters.map((r=>GA(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(s):xe(30097,{filter:s})}function rM(s){return $O[s]}function sM(s){return YO[s]}function iM(s){return WO[s]}function ql(s){return{fieldPath:s.canonicalString()}}function Fl(s){return Rt.fromServerFormat(s.fieldPath)}function QA(s){return s instanceof Xe?(function(t){if(t.op==="=="){if(qT(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NAN"}};if(BT(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qT(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NAN"}};if(BT(t.value))return{unaryFilter:{field:ql(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(t.field),op:sM(t.op),value:t.value}}})(s):s instanceof ht?(function(t){const r=t.getFilters().map((a=>QA(a)));return r.length===1?r[0]:{compositeFilter:{op:iM(t.op),filters:r}}})(s):xe(54877,{filter:s})}function aM(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function KA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function $A(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class ci{constructor(e,t,r,a,l=Ae.min(),u=Ae.min(),p=Lt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=f}withSequenceNumber(e){return new ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class YA{constructor(e){this.yt=e}}function oM(s,e){let t;if(e.document)t=BA(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),a=jo(e.noDocument.readTime);t=wt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xe(56709);{const r=ye.fromSegments(e.unknownDocument.path),a=jo(e.unknownDocument.version);t=wt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new lt(a[0],a[1]);return Ae.fromTimestamp(l)})(e.readTime)),t}function iw(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,u){return{name:Dd(l,u.key),fields:u.data.value.mapValue.fields,updateTime:mc(l,u.version.toTimestamp()),createTime:mc(l,u.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Po(e.version)};else{if(!e.isUnknownDocument())return xe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Po(e.version)}}return r}function bm(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Po(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jo(s){const e=new lt(s.seconds,s.nanoseconds);return Ae.fromTimestamp(e)}function fo(s,e){const t=(e.baseMutations||[]).map((l=>f0(s.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const p=e.mutations[l+1];u.updateTransforms=p.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>f0(s.yt,l))),a=lt.fromMillis(e.localWriteTimeMs);return new x_(e.batchId,a,t,r)}function Zu(s){const e=jo(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?jo(s.lastLimboFreeSnapshotVersion):Ae.min();let r;return r=(function(l){return l.documents!==void 0})(s.query)?(function(l){const u=l.documents.length;return we(u===1,1966,{count:u}),Hn(Nc(UA(l.documents[0])))})(s.query):(function(l){return Hn(HA(l))})(s.query),new ci(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Lt.fromBase64String(s.resumeToken))}function WA(s,e){const t=Po(e.snapshotVersion),r=Po(e.lastLimboFreeSnapshotVersion);let a;a=gm(e.target)?qA(s.yt,e.target):FA(s.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Co(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function S_(s){const e=HA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?_m(e,e.limit,"L"):e}function Ay(s,e){return new T_(e.largestBatchId,f0(s.yt,e.overlayMutation))}function aw(s,e){const t=e.path.lastSegment();return[s,On(e.path.popLast()),t]}function ow(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:Po(r.readTime),documentKey:On(r.documentKey.path),largestBatchId:r.largestBatchId}}class lM{getBundleMetadata(e,t){return lw(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:jo(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return lw(e).put((function(a){return{bundleId:a.id,createTime:Po(Qt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return cw(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:S_(l.bundledQuery),readTime:jo(l.readTime)}})(r)}))}saveNamedQuery(e,t){return cw(e).put((function(a){return{name:a.name,readTime:Po(Qt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function lw(s){return un(s,Hm)}function cw(s){return un(s,Gm)}class Jm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Jm(e,r)}getOverlay(e,t){return Bu(e).get(aw(this.userId,t)).next((r=>r?Ay(this.serializer,r):null))}getOverlays(e,t){const r=js();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,u)=>{const p=new T_(t,u);a.push(this.bt(e,p))})),z.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((u=>a.add(On(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const p=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(Bu(e).X(t0,p))})),z.waitFor(l)}getOverlaysForCollection(e,t,r){const a=js(),l=On(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Bu(e).H(t0,u).next((p=>{for(const f of p){const y=Ay(this.serializer,f);a.set(y.getKey(),y)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=js();let u;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Bu(e).ee({index:$S,range:p},((f,y,v)=>{const E=Ay(this.serializer,y);l.size()<a||E.largestBatchId===u?(l.set(E.getKey(),E),u=E.largestBatchId):v.done()})).next((()=>l))}bt(e,t){return Bu(e).put((function(a,l,u){const[p,f,y]=aw(l,u.mutation.key);return{userId:l,collectionPath:f,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Pd(a.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Bu(s){return un(s,Qm)}class cM{St(e){return un(e,h_)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t?.value;return r?Lt.fromUint8Array(r):Lt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class mo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(At(e.integerValue));else if("doubleValue"in e){const r=At(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),wd(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=mi(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(pi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?aA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ym(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):xe(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=cc,l=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(At(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}mo.Wt=new mo;const Ol=255;function uM(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function uw(s){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const u=uM(255&r[l]);if(a+=u,u!==8)break}return a})(s);return Math.ceil(e/8)}class dM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=uw(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=uw(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Ol),this.sn(255)}_n(){this.an(Ol),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ol?(this.sn(Ol),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ol?(this.an(Ol),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class hM{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class fM{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class qu{constructor(){this.cn=new dM,this.ascending=new hM(this.cn),this.descending=new fM(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class po{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new po(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:em(this.Tn),directionalValue:em(this.In),orderedDocumentKey:em(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function ea(s,e){let t=s.hn-e.hn;return t!==0?t:(t=dw(s.Tn,e.Tn),t!==0?t:(t=dw(s.In,e.In),t!==0?t:ye.comparator(s.Pn,e.Pn)))}function dw(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function em(s){return hI()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(s):s}function hw(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(s)}class fw{constructor(e){this.Vn=new ft(((t,r)=>Rt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(we(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=Jy(e);if(t!==void 0&&!this.pn(t))return!1;const r=co(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const p=this.Vn.getIterator().getNext();if(!a.has(p.field.canonicalString())){const f=r[l];if(!this.yn(p,f)||!this.wn(this.dn[u++],f))return!1}++l}for(;l<r.length;++l){const p=r[l];if(u>=this.dn.length||!this.wn(this.dn[u++],p))return!1}return!0}bn(){if(this.fn)return null;let e=new ft(Rt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Qf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Qf(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Qf(r.field,r.dir==="asc"?0:1)));return new hm(hm.UNKNOWN_ID,this.collectionId,t,Td.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function XA(s){if(we(s instanceof Xe||s instanceof ht,20012),s instanceof Xe){if(s instanceof pA){const t=s.value.arrayValue?.values?.map((r=>Xe.create(s.field,"==",r)))||[];return ht.create(t,"or")}return s}const e=s.filters.map((t=>XA(t)));return ht.create(e,s.op)}function mM(s){if(s.getFilters().length===0)return[];const e=g0(XA(s));return we(JA(e),7391),m0(e)||p0(e)?[e]:e.getFilters()}function m0(s){return s instanceof Xe}function p0(s){return s instanceof ht&&g_(s)}function JA(s){return m0(s)||p0(s)||(function(t){if(t instanceof ht&&a0(t)){for(const r of t.getFilters())if(!m0(r)&&!p0(r))return!1;return!0}return!1})(s)}function g0(s){if(we(s instanceof Xe||s instanceof ht,34018),s instanceof Xe)return s;if(s.filters.length===1)return g0(s.filters[0]);const e=s.filters.map((r=>g0(r)));let t=ht.create(e,s.op);return t=vm(t),JA(t)?t:(we(t instanceof ht,64498),we(dc(t),40251),we(t.filters.length>1,57927),t.filters.reduce(((r,a)=>A_(r,a))))}function A_(s,e){let t;return we(s instanceof Xe||s instanceof ht,38388),we(e instanceof Xe||e instanceof ht,25473),t=s instanceof Xe?e instanceof Xe?(function(a,l){return ht.create([a,l],"and")})(s,e):mw(s,e):e instanceof Xe?mw(e,s):(function(a,l){if(we(a.filters.length>0&&l.filters.length>0,48005),dc(a)&&dc(l))return hA(a,l.getFilters());const u=a0(a)?a:l,p=a0(a)?l:a,f=u.filters.map((y=>A_(y,p)));return ht.create(f,"or")})(s,e),vm(t)}function mw(s,e){if(dc(e))return hA(e,s.getFilters());{const t=e.filters.map((r=>A_(s,r)));return ht.create(t,"or")}}function vm(s){if(we(s instanceof Xe||s instanceof ht,11850),s instanceof Xe)return s;const e=s.getFilters();if(e.length===1)return vm(e[0]);if(uA(s))return s;const t=e.map((a=>vm(a))),r=[];return t.forEach((a=>{a instanceof Xe?r.push(a):a instanceof ht&&(a.op===s.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:ht.create(r,s.op)}class pM{constructor(){this.Sn=new N_}addToCollectionParentIndex(e,t){return this.Sn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(xr.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class N_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new ft(Ke.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new ft(Ke.comparator)).toArray()}}const pw="IndexedDbIndexManager",Of=new Uint8Array(0);class gM{constructor(e,t){this.databaseId=t,this.Dn=new N_,this.Cn=new bi((r=>Co(r)),((r,a)=>Yd(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:On(a)};return gw(e).put(l)}return z.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[PS(t),""],!1,!0);return gw(e).H(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;r.push(Ps(u.parent))}return r}))}addFieldIndex(e,t){const r=Fu(e),a=(function(p){return{indexId:p.indexId,collectionGroup:p.collectionGroup,fields:p.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=Ll(e);return l.next((p=>{u.put(ow(p,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Fu(e),a=Ll(e),l=Ml(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Fu(e),r=Ml(e),a=Ll(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return z.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new fw(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=Ml(e);let a=!0;const l=new Map;return z.forEach(this.vn(t),(u=>this.Fn(e,u).next((p=>{a&&(a=!!p),l.set(u,p)})))).next((()=>{if(a){let u=Be();const p=[];return z.forEach(l,((f,y)=>{ue(pw,`Using index ${(function(oe){return`id=${oe.indexId}|cg=${oe.collectionGroup}|f=${oe.fields.map((pe=>`${pe.fieldPath}:${pe.kind}`)).join(",")}`})(f)} to execute ${Co(t)}`);const v=(function(oe,pe){const F=Jy(pe);if(F===void 0)return null;for(const ie of ym(oe,F.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null})(y,f),E=(function(oe,pe){const F=new Map;for(const ie of co(pe))for(const N of ym(oe,ie.fieldPath))switch(N.op){case"==":case"in":F.set(ie.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return F.set(ie.fieldPath.canonicalString(),N.value),Array.from(F.values())}return null})(y,f),T=(function(oe,pe){const F=[];let ie=!0;for(const N of co(pe)){const R=N.kind===0?KT(oe,N.fieldPath,oe.startAt):$T(oe,N.fieldPath,oe.startAt);F.push(R.value),ie&&(ie=R.inclusive)}return new Ea(F,ie)})(y,f),C=(function(oe,pe){const F=[];let ie=!0;for(const N of co(pe)){const R=N.kind===0?$T(oe,N.fieldPath,oe.endAt):KT(oe,N.fieldPath,oe.endAt);F.push(R.value),ie&&(ie=R.inclusive)}return new Ea(F,ie)})(y,f),U=this.Mn(f,y,T),H=this.Mn(f,y,C),J=this.xn(f,y,E),K=this.On(f.indexId,v,U,T.inclusive,H,C.inclusive,J);return z.forEach(K,(ne=>r.Z(ne,t.limit).next((oe=>{oe.forEach((pe=>{const F=ye.fromSegments(pe.documentKey);u.has(F)||(u=u.add(F),p.push(F))}))}))))})).next((()=>p))}return z.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=mM(ht.create(e.filters,"and")).map((r=>l0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,u,p){const f=(t!=null?t.length:1)*Math.max(r.length,l.length),y=f/(t!=null?t.length:1),v=[];for(let E=0;E<f;++E){const T=t?this.Nn(t[E/y]):Of,C=this.Bn(e,T,r[E%y],a),U=this.Ln(e,T,l[E%y],u),H=p.map((J=>this.Bn(e,T,J,!0)));v.push(...this.createRange(C,U,H))}return v}Bn(e,t,r,a){const l=new po(e,ye.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new po(e,ye.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new fw(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const p of l)r.gn(p)&&(!u||p.fields.length>u.fields.length)&&(u=p);return u}))}getIndexType(e,t){let r=2;const a=this.vn(t);return z.forEach(a,(l=>this.Fn(e,l).next((u=>{u?r!==0&&u.fields.length<(function(f){let y=new ft(Rt.comparator),v=!1;for(const E of f.filters)for(const T of E.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?v=!0:y=y.add(T.field));for(const E of f.orderBy)E.field.isKeyField()||(y=y.add(E.field));return y.size+(v?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new qu;for(const a of co(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.ln(a.kind);mo.Wt.Dt(l,u)}return r.un()}Nn(e){const t=new qu;return mo.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new qu;return mo.Wt.Dt(Ro(this.databaseId,t),r.ln((function(l){const u=co(l);return u.length===0?0:u[u.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new qu);let l=0;for(const u of co(e)){const p=r[l++];for(const f of a)if(this.qn(t,u.fieldPath)&&Cd(p))a=this.Un(a,u,p);else{const y=f.ln(u.kind);mo.Wt.Dt(p,y)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const p of a){const f=new qu;f.seed(p.un()),mo.Wt.Dt(u,f.ln(t.kind)),l.push(f)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof Xe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Fu(e),a=Ll(e);return(t?r.H(e0,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const u=[];return z.forEach(l,(p=>a.get([p.indexId,this.uid]).next((f=>{u.push((function(v,E){const T=E?new Td(E.sequenceNumber,new xr(jo(E.readTime),new ye(Ps(E.documentKey)),E.largestBatchId)):Td.empty(),C=v.fields.map((([U,H])=>new Qf(Rt.fromServerFormat(U),H)));return new hm(v.indexId,v.collectionGroup,C,T)})(p,f))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:je(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Fu(e),l=Ll(e);return this.Wn(e).next((u=>a.H(e0,IDBKeyRange.bound(t,t)).next((p=>z.forEach(p,(f=>l.put(ow(f.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return z.forEach(t,((a,l)=>{const u=r.get(a.collectionGroup);return(u?z.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((p=>(r.set(a.collectionGroup,p),z.forEach(p,(f=>this.Qn(e,a,f).next((y=>{const v=this.Gn(l,f);return y.isEqual(v)?z.resolve():this.zn(e,l,f,y,v)})))))))}))}jn(e,t,r,a){return Ml(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return Ml(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=Ml(e);let l=new ft(ea);return a.ee({index:KS,range:IDBKeyRange.only([r.indexId,this.uid,em(this.Kn(r,t))])},((u,p)=>{l=l.add(new po(r.indexId,t,hw(p.arrayValue),hw(p.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new ft(ea);const a=this.kn(t,e);if(a==null)return r;const l=Jy(t);if(l!=null){const u=e.data.field(l.fieldPath);if(Cd(u))for(const p of u.arrayValue.values||[])r=r.add(new po(t.indexId,e.key,this.Nn(p),a))}else r=r.add(new po(t.indexId,e.key,Of,a));return r}zn(e,t,r,a,l){ue(pw,"Updating index entries for document '%s'",t.key);const u=[];return(function(f,y,v,E,T){const C=f.getIterator(),U=y.getIterator();let H=Vl(C),J=Vl(U);for(;H||J;){let K=!1,ne=!1;if(H&&J){const oe=v(H,J);oe<0?ne=!0:oe>0&&(K=!0)}else H!=null?ne=!0:K=!0;K?(E(J),J=Vl(U)):ne?(T(H),H=Vl(C)):(H=Vl(C),J=Vl(U))}})(a,l,ea,(p=>{u.push(this.jn(e,t,r,p))}),(p=>{u.push(this.Hn(e,t,r,p))})),z.waitFor(u)}Wn(e){let t=1;return Ll(e).ee({index:QS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,p)=>ea(u,p))).filter(((u,p,f)=>!p||ea(u,f[p-1])!==0));const a=[];a.push(e);for(const u of r){const p=ea(u,e),f=ea(u,t);if(p===0)a[0]=e.En();else if(p>0&&f<0)a.push(u),a.push(u.En());else if(f>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Jn(a[u],a[u+1]))return[];const p=a[u].An(this.uid,Of,ye.empty()),f=a[u+1].An(this.uid,Of,ye.empty());l.push(IDBKeyRange.bound(p,f))}return l}Jn(e,t){return ea(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yw)}getMinOffset(e,t){return z.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||xe(44426))))).next(yw)}}function gw(s){return un(s,Ad)}function Ml(s){return un(s,ud)}function Fu(s){return un(s,d_)}function Ll(s){return un(s,cd)}function yw(s){we(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;l_(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new xr(e.readTime,e.documentKey,t)}const _w={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZA=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function e1(s,e,t){const r=s.store(Wr),a=s.store(ic),l=[],u=IDBKeyRange.only(t.batchId);let p=0;const f=r.ee({range:u},((v,E,T)=>(p++,T.delete())));l.push(f.next((()=>{we(p===1,47070,{batchId:t.batchId})})));const y=[];for(const v of t.mutations){const E=FS(e,v.key.path,t.batchId);l.push(a.delete(E)),y.push(v.key)}return z.waitFor(l).next((()=>y))}function xm(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw xe(14731);e=s.noDocument}return JSON.stringify(e).length}jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(ZA,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);class Zm{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){we(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Zm(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).ee({index:_o,range:r},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=Hl(e),u=ta(e);return u.add({}).next((p=>{we(typeof p=="number",49019);const f=new x_(p,t,r,a),y=(function(C,U,H){const J=H.baseMutations.map((ne=>Pd(C.yt,ne))),K=H.mutations.map((ne=>Pd(C.yt,ne)));return{userId:U,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:J,mutations:K}})(this.serializer,this.userId,f),v=[];let E=new ft(((T,C)=>je(T.canonicalString(),C.canonicalString())));for(const T of a){const C=FS(this.userId,T.key.path,p);E=E.add(T.key.path.popLast()),v.push(u.put(y)),v.push(l.put(C,GV))}return E.forEach((T=>{v.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Zn[p]=f.keys()})),z.waitFor(v).next((()=>f))}))}lookupMutationBatch(e,t){return ta(e).get(t).next((r=>r?(we(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),fo(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?z.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return ta(e).ee({index:_o,range:a},((u,p,f)=>{p.userId===this.userId&&(we(p.batchId>=r,47524,{Yn:r}),l=fo(this.serializer,p)),f.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ha;return ta(e).ee({index:_o,range:t,reverse:!0},((a,l,u)=>{r=l.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ha],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).H(_o,t).next((r=>r.map((a=>fo(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Kf(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Hl(e).ee({range:a},((u,p,f)=>{const[y,v,E]=u,T=Ps(v);if(y===this.userId&&t.path.isEqual(T))return ta(e).get(E).next((C=>{if(!C)throw xe(61480,{er:u,batchId:E});we(C.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:C.userId,batchId:E}),l.push(fo(this.serializer,C))}));f.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ft(je);const a=[];return t.forEach((l=>{const u=Kf(this.userId,l.path),p=IDBKeyRange.lowerBound(u),f=Hl(e).ee({range:p},((y,v,E)=>{const[T,C,U]=y,H=Ps(C);T===this.userId&&l.path.isEqual(H)?r=r.add(U):E.done()}));a.push(f)})),z.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=Kf(this.userId,r),u=IDBKeyRange.lowerBound(l);let p=new ft(je);return Hl(e).ee({range:u},((f,y,v)=>{const[E,T,C]=f,U=Ps(T);E===this.userId&&r.isPrefixOf(U)?U.length===a&&(p=p.add(C)):v.done()})).next((()=>this.tr(e,p)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(ta(e).get(l).next((u=>{if(u===null)throw xe(35274,{batchId:l});we(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),r.push(fo(this.serializer,u))})))})),z.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return e1(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),z.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return z.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return Hl(e).ee({range:r},((l,u,p)=>{if(l[0]===this.userId){const f=Ps(l[1]);a.push(f)}else p.done()})).next((()=>{we(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return t1(e,this.userId,t)}ir(e){return n1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ha,lastStreamToken:""}))}}function t1(s,e,t){const r=Kf(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return Hl(s).ee({range:l,Y:!0},((p,f,y)=>{const[v,E,T]=p;v===e&&E===a&&(u=!0),y.done()})).next((()=>u))}function ta(s){return un(s,Wr)}function Hl(s){return un(s,ic)}function n1(s){return un(s,Id)}class Vo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Vo(0)}static ar(){return new Vo(-1)}}class yM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new Vo(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ae.fromTimestamp(new lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ul(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(we(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return Ul(e).ee(((u,p)=>{const f=Zu(p);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(a++,l.push(this.removeTargetData(e,f)))})).next((()=>z.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Ul(e).ee(((r,a)=>{const l=Zu(a);t(l)}))}ur(e){return bw(e).get(pm).next((t=>(we(t!==null,2888),t)))}cr(e,t){return bw(e).put(pm,t)}lr(e,t){return Ul(e).put(WA(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Co(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Ul(e).ee({range:a,index:GS},((u,p,f)=>{const y=Zu(p);Yd(t,y.target)&&(l=y,f.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=sa(e);return t.forEach((u=>{const p=On(u.path);a.push(l.put({targetId:r,path:p})),a.push(this.referenceDelegate.addReference(e,r,u))})),z.waitFor(a)}removeMatchingKeys(e,t,r){const a=sa(e);return z.forEach(t,(l=>{const u=On(l.path);return z.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=sa(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=sa(e);let l=Be();return a.ee({range:r,Y:!0},((u,p,f)=>{const y=Ps(u[1]),v=new ye(y);l=l.add(v)})).next((()=>l))}containsKey(e,t){const r=On(t.path),a=IDBKeyRange.bound([r],[PS(r)],!1,!0);let l=0;return sa(e).ee({index:u_,Y:!0,range:a},(([u,p],f,y)=>{u!==0&&(l++,y.done())})).next((()=>l>0))}At(e,t){return Ul(e).get(t).next((r=>r?Zu(r):null))}}function Ul(s){return un(s,ac)}function bw(s){return un(s,Io)}function sa(s){return un(s,oc)}const vw="LruGarbageCollector",_M=1048576;function xw([s,e],[t,r]){const a=je(s,t);return a===0?je(e,r):a}class bM{constructor(e){this.Pr=e,this.buffer=new ft(xw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();xw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class r1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ue(vw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Na(t)?ue(vw,"Ignoring IndexedDB error during garbage collection: ",t):await Aa(t)}await this.Ar(3e5)}))}}class vM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return z.resolve(rr.ce);const r=new bM(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(_w)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_w):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,u,p,f,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,u=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,p=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(y=Date.now(),zl()<=Qe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(p-u)+`ms
	Removed ${l} targets in `+(f-p)+`ms
	Removed ${E} documents in `+(y-f)+`ms
Total Duration: ${y-v}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function s1(s,e){return new vM(s,e)}class xM{constructor(e,t){this.db=e,this.garbageCollector=s1(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return Mf(e,r)}removeReference(e,t,r){return Mf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Mf(e,t)}wr(e,t){return(function(a,l){let u=!1;return n1(a).te((p=>t1(a,p,l).next((f=>(f&&(u=!0),z.resolve(!f)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((u,p)=>{if(p<=t){const f=this.wr(e,u).next((y=>{if(!y)return l++,r.getEntry(e,u).next((()=>(r.removeEntry(u,Ae.min()),sa(e).delete((function(E){return[0,On(E.path)]})(u)))))}));a.push(f)}})).next((()=>z.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Mf(e,t)}yr(e,t){const r=sa(e);let a,l=rr.ce;return r.ee({index:u_},(([u,p],{path:f,sequenceNumber:y})=>{u===0?(l!==rr.ce&&t(new ye(Ps(a)),l),l=y,a=f):l=rr.ce})).next((()=>{l!==rr.ce&&t(new ye(Ps(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mf(s,e){return sa(s).put((function(r,a){return{targetId:0,path:On(r.path),sequenceNumber:a}})(e,s.currentSequenceNumber))}class i1{constructor(){this.changes=new bi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class EM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return oo(e).put(r)}removeEntry(e,t,r){return oo(e).delete((function(l,u){const p=l.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],bm(u),p[p.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=wt.newInvalidDocument(t);return oo(e).ee({index:$f,range:IDBKeyRange.only(Hu(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:wt.newInvalidDocument(t)};return oo(e).ee({index:$f,range:IDBKeyRange.only(Hu(t))},((a,l)=>{r={document:this.Sr(t,l),size:xm(l)}})).next((()=>r))}getEntries(e,t){let r=ir();return this.Cr(e,t,((a,l)=>{const u=this.Sr(a,l);r=r.insert(a,u)})).next((()=>r))}vr(e,t){let r=ir(),a=new vt(ye.comparator);return this.Cr(e,t,((l,u)=>{const p=this.Sr(l,u);r=r.insert(l,p),a=a.insert(l,xm(u))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return z.resolve();let a=new ft(ww);t.forEach((f=>a=a.add(f)));const l=IDBKeyRange.bound(Hu(a.first()),Hu(a.last())),u=a.getIterator();let p=u.getNext();return oo(e).ee({index:$f,range:l},((f,y,v)=>{const E=ye.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;p&&ww(p,E)<0;)r(p,null),p=u.getNext();p&&p.isEqual(E)&&(r(p,y),p=u.hasNext()?u.getNext():null),p?v.j(Hu(p)):v.done()})).next((()=>{for(;p;)r(p,null),p=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,p=[u.popLast().toArray(),u.lastSegment(),bm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oo(e).H(IDBKeyRange.bound(p,f,!0)).next((y=>{l?.incrementDocumentReadCount(y.length);let v=ir();for(const E of y){const T=this.Sr(ye.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);T.isFoundDocument()&&(Xd(t,T)||a.has(T.key))&&(v=v.insert(T.key,T))}return v}))}getAllFromCollectionGroup(e,t,r,a){let l=ir();const u=Tw(t,r),p=Tw(t,xr.max());return oo(e).ee({index:HS,range:IDBKeyRange.bound(u,p,!0)},((f,y,v)=>{const E=this.Sr(ye.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);l=l.insert(E.key,E),l.size===a&&v.done()})).next((()=>l))}newChangeBuffer(e){return new TM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return Ew(e).get(Zy).next((t=>(we(!!t,20021),t)))}br(e,t){return Ew(e).put(Zy,t)}Sr(e,t){if(t){const r=oM(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ae.min())))return r}return wt.newInvalidDocument(e)}}function a1(s){return new EM(s)}class TM extends i1{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new bi((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new ft(((l,u)=>je(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const p=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,p.readTime)),u.isValidDocument()){const f=iw(this.Mr.serializer,u);a=a.add(l.path.popLast());const y=xm(f);r+=y-p.size,t.push(this.Mr.addEntry(e,l,f))}else if(r-=p.size,this.trackRemovals){const f=iw(this.Mr.serializer,u.convertToNoDocument(Ae.min()));t.push(this.Mr.addEntry(e,l,f))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),z.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,u)=>{this.Or.set(l,{size:u,readTime:r.get(l).readTime})})),r)))}}function Ew(s){return un(s,Sd)}function oo(s){return un(s,mm)}function Hu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Tw(s,e){const t=e.documentKey.path.toArray();return[s,bm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ww(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=je(t[l],r[l]),a)return a;return a=je(t.length,r.length),a||(a=je(t[t.length-2],r[r.length-2]),a||je(t[t.length-1],r[r.length-1]))}class wM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class o1{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&fd(r.mutation,a,sr.empty(),lt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Be()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Be()){const a=js();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let u=Xu();return l.forEach(((p,f)=>{u=u.insert(p,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=js();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Be())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,p)=>{t.set(u,p)}))}))}computeViews(e,t,r,a){let l=ir();const u=hd(),p=(function(){return hd()})();return t.forEach(((f,y)=>{const v=r.get(y.key);a.has(y.key)&&(v===void 0||v.mutation instanceof vi)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),fd(v.mutation,y,v.mutation.getFieldMask(),lt.now())):u.set(y.key,sr.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((y,v)=>u.set(y,v))),t.forEach(((y,v)=>p.set(y,new wM(v,u.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const r=hd();let a=new vt(((u,p)=>u-p)),l=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const p of u)p.keys().forEach((f=>{const y=t.get(f);if(y===null)return;let v=r.get(f)||sr.empty();v=p.applyToLocalView(y,v),r.set(f,v);const E=(a.get(p.batchId)||Be()).add(f);a=a.insert(p.batchId,E)}))})).next((()=>{const u=[],p=a.getReverseIterator();for(;p.hasNext();){const f=p.getNext(),y=f.key,v=f.value,E=EA();v.forEach((T=>{if(!l.has(T)){const C=RA(t.get(T),r.get(T));C!==null&&E.set(T,C),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,E))}return z.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return RO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):y_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):z.resolve(js());let p=sc,f=l;return u.next((y=>z.forEach(y,((v,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),l.get(v)?z.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{f=f.insert(v,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,f,y,Be()))).next((v=>({batchId:p,changes:xA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((r=>{let a=Xu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=Xu();return this.indexManager.getCollectionParents(e,l).next((p=>z.forEach(p,(f=>{const y=(function(E,T){return new _i(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,r,a).next((v=>{v.forEach(((E,T)=>{u=u.insert(E,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((u=>{l.forEach(((f,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,wt.newInvalidDocument(v)))}));let p=Xu();return u.forEach(((f,y)=>{const v=l.get(f);v!==void 0&&fd(v.mutation,y,sr.empty(),lt.now()),Xd(t,y)&&(p=p.insert(f,y))})),p}))}}class IM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Qt(a.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:S_(a.bundledQuery),readTime:Qt(a.readTime)}})(t)),z.resolve()}}class SM{constructor(){this.overlays=new vt(ye.comparator),this.Lr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=js();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),z.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const a=js(),l=t.length+1,u=new ye(t.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const f=p.getNext().value,y=f.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&f.largestBatchId>r&&a.set(f.getKey(),f)}return z.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new vt(((y,v)=>y-v));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let v=l.get(y.largestBatchId);v===null&&(v=js(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const p=js(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((y,v)=>p.set(y,v))),!(p.size()>=a)););return z.resolve(p)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new T_(t,r));let l=this.Lr.get(t);l===void 0&&(l=Be(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}class AM{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}class R_{constructor(){this.kr=new ft(pn.Kr),this.qr=new ft(pn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new pn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new pn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new ye(new Ke([])),r=new pn(t,e),a=new pn(t,e+1),l=[];return this.qr.forEachInRange([r,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ye(new Ke([])),r=new pn(t,e),a=new pn(t,e+1);let l=Be();return this.qr.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new pn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class pn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ye.comparator(e.key,t.key)||je(e.Hr,t.Hr)}static Ur(e,t){return je(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}class NM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ft(pn.Kr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new x_(l,t,r,a);this.mutationQueue.push(u);for(const p of a)this.Jr=this.Jr.add(new pn(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return z.resolve(u)}lookupMutationBatch(e,t){return z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?ha:this.Yn-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pn(t,0),a=new pn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(u=>{const p=this.Zr(u.Hr);l.push(p)})),z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ft(je);return t.forEach((a=>{const l=new pn(a,0),u=new pn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(p=>{r=r.add(p.Hr)}))})),z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;ye.isDocumentKey(l)||(l=l.child(""));const u=new pn(new ye(l),0);let p=new ft(je);return this.Jr.forEachWhile((f=>{const y=f.key.path;return!!r.isPrefixOf(y)&&(y.length===a&&(p=p.add(f.Hr)),!0)}),u),z.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){we(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return z.forEach(t.mutations,(a=>{const l=new pn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new pn(t,0),a=this.Jr.firstAfterOrEqual(r);return z.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class RM{constructor(e){this.ti=e,this.docs=(function(){return new vt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(t))}getEntries(e,t){let r=ir();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():wt.newInvalidDocument(a))})),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=ir();const u=t.path,p=new ye(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(p);for(;f.hasNext();){const{key:y,value:{document:v}}=f.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||l_(LS(v),r)<=0||(a.has(v.key)||Xd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return z.resolve(l)}getAllFromCollectionGroup(e,t,r,a){xe(9500)}ni(e,t){return z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new CM(this)}getSize(e){return z.resolve(this.size)}}class CM extends i1{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class kM{constructor(e){this.persistence=e,this.ri=new bi((t=>Co(t)),Yd),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.ii=0,this.si=new R_,this.targetCount=0,this.oi=Vo._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),z.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Vo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.lr(t),z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((u,p)=>{p.sequenceNumber<=t&&r.get(p.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),a++)})),z.waitFor(l).next((()=>a))}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.si.containsKey(t))}}class C_{constructor(e,t){this._i={},this.overlays={},this.ai=new rr(0),this.ui=!1,this.ui=!0,this.ci=new AM,this.referenceDelegate=e(this),this.li=new kM(this),this.indexManager=new pM,this.remoteDocumentCache=(function(a){return new RM(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new YA(t),this.Pi=new IM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new NM(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const a=new DM(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return z.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class DM extends zS{constructor(e){super(),this.currentSequenceNumber=e}}class ep{constructor(e){this.persistence=e,this.Ri=new R_,this.Ai=null}static Vi(e){return new ep(e)}get di(){if(this.Ai)return this.Ai;throw xe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.di,(r=>{const a=ye.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Ae.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Em{constructor(e,t){this.persistence=e,this.fi=new bi((r=>On(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=s1(this,t)}static Vi(e,t){return new Em(e,t)}Ti(){}Ii(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return z.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?z.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((p=>{p||(r++,l.removeEntry(u,Ae.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wf(e.data.value)),t}wr(e,t,r){return z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return z.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class PM{constructor(e){this.serializer=e}k(e,t,r,a){const l=new Fm("createOrUpgrade",t);r<1&&a>=1&&((function(f){f.createObjectStore($d)})(e),(function(f){f.createObjectStore(Id,{keyPath:HV}),f.createObjectStore(Wr,{keyPath:VT,autoIncrement:!0}).createIndex(_o,OT,{unique:!0}),f.createObjectStore(ic)})(e),Iw(e),(function(f){f.createObjectStore(uo)})(e));let u=z.resolve();return r<3&&a>=3&&(r!==0&&((function(f){f.deleteObjectStore(oc),f.deleteObjectStore(ac),f.deleteObjectStore(Io)})(e),Iw(e)),u=u.next((()=>(function(f){const y=f.store(Io),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ae.min().toTimestamp(),targetCount:0};return y.put(pm,v)})(l)))),r<4&&a>=4&&(r!==0&&(u=u.next((()=>(function(f,y){return y.store(Wr).H().next((E=>{f.deleteObjectStore(Wr),f.createObjectStore(Wr,{keyPath:VT,autoIncrement:!0}).createIndex(_o,OT,{unique:!0});const T=y.store(Wr),C=E.map((U=>T.put(U)));return z.waitFor(C)}))})(e,l)))),u=u.next((()=>{(function(f){f.createObjectStore(lc,{keyPath:ZV})})(e)}))),r<5&&a>=5&&(u=u.next((()=>this.gi(l)))),r<6&&a>=6&&(u=u.next((()=>((function(f){f.createObjectStore(Sd)})(e),this.pi(l))))),r<7&&a>=7&&(u=u.next((()=>this.yi(l)))),r<8&&a>=8&&(u=u.next((()=>this.wi(e,l)))),r<9&&a>=9&&(u=u.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(u=u.next((()=>this.bi(l)))),r<11&&a>=11&&(u=u.next((()=>{(function(f){f.createObjectStore(Hm,{keyPath:eO})})(e),(function(f){f.createObjectStore(Gm,{keyPath:tO})})(e)}))),r<12&&a>=12&&(u=u.next((()=>{(function(f){const y=f.createObjectStore(Qm,{keyPath:lO});y.createIndex(t0,cO,{unique:!1}),y.createIndex($S,uO,{unique:!1})})(e)}))),r<13&&a>=13&&(u=u.next((()=>(function(f){const y=f.createObjectStore(mm,{keyPath:QV});y.createIndex($f,KV),y.createIndex(HS,$V)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(uo)))),r<14&&a>=14&&(u=u.next((()=>this.Di(e,l)))),r<15&&a>=15&&(u=u.next((()=>(function(f){f.createObjectStore(d_,{keyPath:nO,autoIncrement:!0}).createIndex(e0,rO,{unique:!1}),f.createObjectStore(cd,{keyPath:sO}).createIndex(QS,iO,{unique:!1}),f.createObjectStore(ud,{keyPath:aO}).createIndex(KS,oO,{unique:!1})})(e)))),r<16&&a>=16&&(u=u.next((()=>{t.objectStore(cd).clear()})).next((()=>{t.objectStore(ud).clear()}))),r<17&&a>=17&&(u=u.next((()=>{(function(f){f.createObjectStore(h_,{keyPath:dO})})(e)}))),r<18&&a>=18&&hI()&&(u=u.next((()=>{t.objectStore(cd).clear()})).next((()=>{t.objectStore(ud).clear()}))),u}pi(e){let t=0;return e.store(uo).ee(((r,a)=>{t+=xm(a)})).next((()=>{const r={byteSize:t};return e.store(Sd).put(Zy,r)}))}gi(e){const t=e.store(Id),r=e.store(Wr);return t.H().next((a=>z.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,ha],[l.userId,l.lastAcknowledgedBatchId]);return r.H(_o,u).next((p=>z.forEach(p,(f=>{we(f.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const y=fo(this.serializer,f);return e1(e,l.userId,y).next((()=>{}))}))))}))))}yi(e){const t=e.store(oc),r=e.store(uo);return e.store(Io).get(pm).next((a=>{const l=[];return r.ee(((u,p)=>{const f=new Ke(u),y=(function(E){return[0,On(E)]})(f);l.push(t.get(y).next((v=>v?z.resolve():(E=>t.put({targetId:0,path:On(E),sequenceNumber:a.highestListenSequenceNumber}))(f))))})).next((()=>z.waitFor(l)))}))}wi(e,t){e.createObjectStore(Ad,{keyPath:JV});const r=t.store(Ad),a=new N_,l=u=>{if(a.add(u)){const p=u.lastSegment(),f=u.popLast();return r.put({collectionId:p,parent:On(f)})}};return t.store(uo).ee({Y:!0},((u,p)=>{const f=new Ke(u);return l(f.popLast())})).next((()=>t.store(ic).ee({Y:!0},(([u,p,f],y)=>{const v=Ps(p);return l(v.popLast())}))))}bi(e){const t=e.store(ac);return t.ee(((r,a)=>{const l=Zu(a),u=WA(this.serializer,l);return t.put(u)}))}Si(e,t){const r=t.store(uo),a=[];return r.ee(((l,u)=>{const p=t.store(mm),f=(function(E){return E.document?new ye(Ke.fromString(E.document.name).popFirst(5)):E.noDocument?ye.fromSegments(E.noDocument.path):E.unknownDocument?ye.fromSegments(E.unknownDocument.path):xe(36783)})(u).path.toArray(),y={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(p.put(y))})).next((()=>z.waitFor(a)))}Di(e,t){const r=t.store(Wr),a=a1(this.serializer),l=new C_(ep.Vi,this.serializer.yt);return r.H().next((u=>{const p=new Map;return u.forEach((f=>{let y=p.get(f.userId)??Be();fo(this.serializer,f).keys().forEach((v=>y=y.add(v))),p.set(f.userId,y)})),z.forEach(p,((f,y)=>{const v=new gn(y),E=Jm.wt(this.serializer,v),T=l.getIndexManager(v),C=Zm.wt(v,this.serializer,T,l.referenceDelegate);return new o1(a,C,E,T).recalculateAndSaveOverlaysForDocumentKeys(new n0(t,rr.ce),f).next()}))}))}}function Iw(s){s.createObjectStore(oc,{keyPath:WV}).createIndex(u_,XV,{unique:!0}),s.createObjectStore(ac,{keyPath:"targetId"}).createIndex(GS,YV,{unique:!0}),s.createObjectStore(Io)}const na="IndexedDbPersistence",Ny=18e5,Ry=5e3,Cy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",l1="main";class k_{constructor(e,t,r,a,l,u,p,f,y,v,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=u,this.document=p,this.Fi=y,this.Mi=v,this.xi=E,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=T=>Promise.resolve(),!k_.v())throw new le(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xM(this,a),this.Ki=t+l1,this.serializer=new YA(f),this.qi=new Os(this.Ki,this.xi,new PM(this.serializer)),this.ci=new cM,this.li=new yM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=a1(this.serializer),this.Pi=new lM,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&Gt(na,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(W.FAILED_PRECONDITION,Cy);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new rr(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Lf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Na(e))return ue(na,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue(na,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Gu(e).get(jl).next((t=>z.resolve(this.Xi(t))))}Yi(e){return Lf(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Ny)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=un(t,lc);return r.H().next((a=>{const l=this.ns(a,Ny),u=a.filter((p=>l.indexOf(p)===-1));return z.forEach(u,(p=>r.delete(p.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?z.resolve(!0):Gu(e).get(jl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Ry)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new le(W.FAILED_PRECONDITION,Cy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lf(e).H().next((r=>this.ns(r,Ry).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,p=this.networkEnabled===a.networkEnabled;if(l||u&&p)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ue(na,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[$d,lc],(e=>{const t=new n0(e,rr.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Lf(e).H().next((t=>this.ns(t,Ny).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Zm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gM(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Jm.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){ue(na,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(f){return f===18?mO:f===17?JS:f===16?fO:f===15?f_:f===14?XS:f===13?WS:f===12?hO:f===11?YS:void xe(60245)})(this.xi);let u;return this.qi.runTransaction(e,a,l,(p=>(u=new n0(p,this.ai?this.ai.next():rr.ce),t==="readwrite-primary"?this.ji(u).next((f=>!!f||this.Hi(u))).next((f=>{if(!f)throw Gt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new le(W.FAILED_PRECONDITION,US);return r(u)})).next((f=>this.Zi(u).next((()=>f)))):this.Ps(u).next((()=>r(u)))))).then((p=>(u.raiseOnCommittedEvent(),p)))}Ps(e){return Gu(e).get(jl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Ry)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le(W.FAILED_PRECONDITION,Cy)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gu(e).put(jl,t)}static v(){return Os.v()}Ji(e){const t=Gu(e);return t.get(jl).next((r=>this.Xi(r)?(ue(na,"Releasing primary lease."),t.delete(jl)):z.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Gt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;dI()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return ue(na,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Gt(na,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Gt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gu(s){return un(s,$d)}function Lf(s){return un(s,lc)}function D_(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class P_{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=Be(),a=Be();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new P_(e,t.fromCache,r,a)}}class jM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class c1{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return dI()?8:BS(jt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new jM;return this.ys(e,t,u).next((p=>{if(l.result=p,this.As)return this.ws(e,t,u,p.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(zl()<=Qe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Bl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(zl()<=Qe.DEBUG&&ue("QueryEngine","Query:",Bl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(zl()<=Qe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Bl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hn(t))):z.resolve())}gs(e,t){if(YT(t))return z.resolve(null);let r=Hn(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=_m(t,null,"F"),r=Hn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=Be(...l);return this.fs.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,r).next((f=>{const y=this.bs(t,p);return this.Ss(t,y,u,f.readTime)?this.gs(e,_m(t,null,"F")):this.Ds(e,y,t,f)}))))})))))}ps(e,t,r,a){return YT(t)||a.isEqual(Ae.min())?z.resolve(null):this.fs.getDocuments(e,r).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,r,a)?z.resolve(null):(zl()<=Qe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Bl(t)),this.Ds(e,u,t,MS(a,sc)).next((p=>p)))}))}bs(e,t){let r=new ft(bA(e));return t.forEach(((a,l)=>{Xd(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return zl()<=Qe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Bl(t)),this.fs.getDocumentsMatchingQuery(e,t,xr.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const j_="LocalStore",VM=3e8;class OM{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new vt(je),this.Fs=new bi((l=>Co(l)),Yd),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o1(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function u1(s,e,t,r){return new OM(s,e,t,r)}async function d1(s,e){const t=be(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],p=[];let f=Be();for(const y of a){u.push(y.batchId);for(const v of y.mutations)f=f.add(v.key)}for(const y of l){p.push(y.batchId);for(const v of y.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:p})))}))}))}function MM(s,e){const t=be(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,f,y,v){const E=y.batch,T=E.keys();let C=z.resolve();return T.forEach((U=>{C=C.next((()=>v.getEntry(f,U))).next((H=>{const J=y.docVersions.get(U);we(J!==null,48541),H.version.compareTo(J)<0&&(E.applyToRemoteDocument(H,y),H.isValidDocument()&&(H.setReadTime(y.commitVersion),v.addEntry(H)))}))})),C.next((()=>p.mutationQueue.removeMutationBatch(f,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let f=Be();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(f=f.add(p.batch.mutations[y].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function h1(s){const e=be(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function LM(s,e){const t=be(s),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const p=[];e.targetChanges.forEach(((v,E)=>{const T=a.get(E);if(!T)return;p.push(t.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,E))));let C=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(Lt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,r)),a=a.insert(E,C),(function(H,J,K){return H.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=VM?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(T,C,v)&&p.push(t.li.updateTargetData(l,C))}));let f=ir(),y=Be();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),p.push(f1(l,u,e.documentUpdates).next((v=>{f=v.Bs,y=v.Ls}))),!r.isEqual(Ae.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));p.push(v)}return z.waitFor(p).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,y))).next((()=>f))})).then((l=>(t.vs=a,l)))}function f1(s,e,t){let r=Be(),a=Be();return t.forEach((l=>r=r.add(l))),e.getEntries(s,r).next((l=>{let u=ir();return t.forEach(((p,f)=>{const y=l.get(p);f.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(p)),f.isNoDocument()&&f.version.isEqual(Ae.min())?(e.removeEntry(p,f.readTime),u=u.insert(p,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||f.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(f),u=u.insert(p,f)):ue(j_,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",f.version)})),{Bs:u,Ls:a}}))}function UM(s,e){const t=be(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ha),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function pc(s,e){const t=be(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,z.resolve(a)):t.li.allocateTargetId(r).next((u=>(a=new ci(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function gc(s,e,t){const r=be(s),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Na(u))throw u;ue(j_,`Failed to update sequence numbers for target ${e}: ${u}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function Tm(s,e,t){const r=be(s);let a=Ae.min(),l=Be();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,y,v){const E=be(f),T=E.Fs.get(v);return T!==void 0?z.resolve(E.vs.get(T)):E.li.getTargetData(y,v)})(r,u,Hn(e)).next((p=>{if(p)return a=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(u,p.targetId).next((f=>{l=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?a:Ae.min(),t?l:Be()))).next((p=>(g1(r,_A(e),p),{documents:p,ks:l})))))}function m1(s,e){const t=be(s),r=be(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((u=>u?u.target:null))))}function p1(s,e){const t=be(s),r=t.Ms.get(e)||Ae.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,MS(r,sc),Number.MAX_SAFE_INTEGER))).then((a=>(g1(t,e,a),a)))}function g1(s,e,t){let r=s.Ms.get(e)||Ae.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),s.Ms.set(e,r)}async function zM(s,e,t,r){const a=be(s);let l=Be(),u=ir();for(const y of t){const v=e.Ks(y.metadata.name);y.document&&(l=l.add(v));const E=e.qs(y);E.setReadTime(e.Us(y.metadata.readTime)),u=u.insert(v,E)}const p=a.xs.newChangeBuffer({trackRemovals:!0}),f=await pc(a,(function(v){return Hn(Nc(Ke.fromString(`__bundle__/docs/${v}`)))})(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",(y=>f1(y,p,u).next((v=>(p.apply(y),v))).next((v=>a.li.removeMatchingKeysForTargetId(y,f.targetId).next((()=>a.li.addMatchingKeys(y,l,f.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(y,v.Bs,v.Ls))).next((()=>v.Bs))))))}async function BM(s,e,t=Be()){const r=await pc(s,Hn(S_(e.bundledQuery))),a=be(s);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const u=Qt(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return a.Pi.saveNamedQuery(l,e);const p=r.withResumeToken(Lt.EMPTY_BYTE_STRING,u);return a.vs=a.vs.insert(p.targetId,p),a.li.updateTargetData(l,p).next((()=>a.li.removeMatchingKeysForTargetId(l,r.targetId))).next((()=>a.li.addMatchingKeys(l,t,r.targetId))).next((()=>a.Pi.saveNamedQuery(l,e)))}))}const y1="firestore_clients";function Sw(s,e){return`${y1}_${s}_${e}`}const _1="firestore_mutations";function Aw(s,e,t){let r=`${_1}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const b1="firestore_targets";function ky(s,e){return`${b1}_${s}_${e}`}const As="SharedClientState";class wm{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new le(a.error.code,a.error.message))),u?new wm(e,t,a.state,l):(Gt(As,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class md{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new le(r.error.code,r.error.message))),l?new md(e,r.state,a):(Gt(As,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Im{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=__();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=qS(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new Im(e,l):(Gt(As,`Failed to parse client data for instance '${e}': ${t}`),null)}}class V_{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new V_(t.clientId,t.onlineState):(Gt(As,`Failed to parse online state: ${e}`),null)}}class y0{constructor(){this.activeTargetIds=__()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dy{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new vt(je),this.started=!1,this.Zs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=Sw(this.persistenceKey,this.zs),this.Ys=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new y0),this.eo=new RegExp(`^${y1}_${u}_([^_]*)$`),this.no=new RegExp(`^${_1}_${u}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${b1}_${u}_(\\d+)$`),this.io=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this.so=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(Sw(this.persistenceKey,r));if(a){const l=Im.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(ky(this.persistenceKey,e));if(a){const l=md.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ky(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ue(As,"READ",e,t),t}setItem(e,t){ue(As,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ue(As,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ue(As,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Gt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let u=rr.ce;if(l!=null)try{const p=JSON.parse(l);we(typeof p=="number",30636,{yo:l}),u=p}catch(p){Gt(As,"Failed to read sequence number from WebStorage",p)}return u})(t.newValue);r!==rr.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new wm(this.currentUser,e,t,r),l=Aw(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=Aw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=ky(this.persistenceKey,e),l=new md(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return Im.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return wm.$s(new gn(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return md.$s(a,t)}_o(e){return V_.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);ue(As,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),u=[],p=[];return l.forEach((f=>{a.has(f)||u.push(f)})),a.forEach((f=>{l.has(f)||p.push(f)})),this.syncEngine.Co(u,p).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=__();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class v1{constructor(){this.vo=new y0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new y0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qM{Mo(e){}shutdown(){}}const Nw="ConnectivityMonitor";class Rw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ue(Nw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ue(Nw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Uf=null;function _0(){return Uf===null?Uf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uf++,"0x"+Uf.toString(16)}const Py="RestConnection",FM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class HM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===r0?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const u=_0(),p=this.Qo(e,t.toUriEncodedString());ue(Py,`Sending RPC '${e}' ${u}:`,p,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,a,l);const{host:y}=new URL(p),v=Ec(y);return this.zo(e,p,f,r,v).then((E=>(ue(Py,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw zs(Py,`RPC '${e}' ${u} failed with error: `,E,"url: ",p,"request:",r),E}))}jo(e,t,r,a,l,u){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ac})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=FM[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class GM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Pn="WebChannelConnection",Qu=(s,e,t)=>{s.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Xl extends HM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Xl.c_){const e=RS();Qu(e,NS.STAT_EVENT,(t=>{t.stat===Wy.PROXY?ue(Pn,"STAT_EVENT: detected buffering proxy"):t.stat===Wy.NOPROXY&&ue(Pn,"STAT_EVENT: detected no buffering proxy")})),Xl.c_=!0}}zo(e,t,r,a,l){const u=_0();return new Promise(((p,f)=>{const y=new SS;y.setWithCredentials(!0),y.listenOnce(AS.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Gf.NO_ERROR:const E=y.getResponseJson();ue(Pn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),p(E);break;case Gf.TIMEOUT:ue(Pn,`RPC '${e}' ${u} timed out`),f(new le(W.DEADLINE_EXCEEDED,"Request time out"));break;case Gf.HTTP_ERROR:const T=y.getStatus();if(ue(Pn,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const U=C?.error;if(U&&U.status&&U.message){const H=(function(K){const ne=K.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ne)>=0?ne:W.UNKNOWN})(U.status);f(new le(H,U.message))}else f(new le(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new le(W.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(Pn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(a);ue(Pn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=_0(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(p.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const y=l.join("");ue(Pn,`Creating RPC '${e}' stream ${a}: ${y}`,p);const v=u.createWebChannel(y,p);this.I_(v);let E=!1,T=!1;const C=new GM({Ho:U=>{T?ue(Pn,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(E||(ue(Pn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),E=!0),ue(Pn,`RPC '${e}' stream ${a} sending:`,U),v.send(U))},Jo:()=>v.close()});return Qu(v,Wu.EventType.OPEN,(()=>{T||(ue(Pn,`RPC '${e}' stream ${a} transport opened.`),C.i_())})),Qu(v,Wu.EventType.CLOSE,(()=>{T||(T=!0,ue(Pn,`RPC '${e}' stream ${a} transport closed`),C.o_(),this.E_(v))})),Qu(v,Wu.EventType.ERROR,(U=>{T||(T=!0,zs(Pn,`RPC '${e}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),C.o_(new le(W.UNAVAILABLE,"The operation could not be completed")))})),Qu(v,Wu.EventType.MESSAGE,(U=>{if(!T){const H=U.data[0];we(!!H,16349);const J=H,K=J?.error||J[0]?.error;if(K){ue(Pn,`RPC '${e}' stream ${a} received error:`,K);const ne=K.status;let oe=(function(ie){const N=rn[ie];if(N!==void 0)return DA(N)})(ne),pe=K.message;oe===void 0&&(oe=W.INTERNAL,pe="Unknown error status: "+ne+" with message "+K.message),T=!0,C.o_(new le(oe,pe)),v.close()}else ue(Pn,`RPC '${e}' stream ${a} received:`,H),C.__(H)}})),Xl.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return CS()}}function QM(s){return new Xl(s)}function x1(){return typeof window<"u"?window:null}function tm(){return typeof document<"u"?document:null}function th(s){return new XO(s,!0)}Xl.c_=!1;class O_{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&ue("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Cw="PersistentStream";class E1{constructor(e,t,r,a,l,u,p,f){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new O_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Gt(t.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new le(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(Cw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ue(Cw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KM extends E1{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=eM(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ae.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ae.min():u.readTime?Qt(u.readTime):Ae.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=h0(this.serializer),t.addTarget=(function(l,u){let p;const f=u.target;if(p=gm(f)?{documents:qA(l,f)}:{query:FA(l,f).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=OA(l,u.resumeToken);const y=u0(l,u.expectedCount);y!==null&&(p.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ae.min())>0){p.readTime=mc(l,u.snapshotVersion.toTimestamp());const y=u0(l,u.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const r=nM(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=h0(this.serializer),t.removeTarget=e,this.K_(t)}}class $M extends E1{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=tM(e.writeResults,e.commitTime),r=Qt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=h0(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Pd(this.serializer,r)))};this.K_(t)}}class YM{}class WM extends YM{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,d0(t,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(W.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.jo(e,d0(t,r),a,u,p,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(W.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function XM(s,e,t,r){return new WM(s,e,t,r)}class JM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gt(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Oo="RemoteStore";class ZM{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{r.enqueueAndForget((async()=>{Ca(this)&&(ue(Oo,"Restarting streams for network reachability change."),await(async function(f){const y=be(f);y.Ea.add(4),await kc(y),y.Va.set("Unknown"),y.Ea.delete(4),await nh(y)})(this))}))})),this.Va=new JM(r,a)}}async function nh(s){if(Ca(s))for(const e of s.Ra)await e(!0)}async function kc(s){for(const e of s.Ra)await e(!1)}function tp(s,e){const t=be(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),U_(t)?L_(t):Pc(t).O_()&&M_(t,e))}function yc(s,e){const t=be(s),r=Pc(t);t.Ia.delete(e),r.O_()&&T1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ca(t)&&t.Va.set("Unknown"))}function M_(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pc(s).Z_(e)}function T1(s,e){s.da.$e(e),Pc(s).X_(e)}function L_(s){s.da=new KO({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Pc(s).start(),s.Va.ua()}function U_(s){return Ca(s)&&!Pc(s).x_()&&s.Ia.size>0}function Ca(s){return be(s).Ea.size===0}function w1(s){s.da=void 0}async function e4(s){s.Va.set("Online")}async function t4(s){s.Ia.forEach(((e,t)=>{M_(s,e)}))}async function n4(s,e){w1(s),U_(s)?(s.Va.ha(e),L_(s)):s.Va.set("Unknown")}async function r4(s,e,t){if(s.Va.set("Online"),e instanceof VA&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const p of l.targetIds)a.Ia.has(p)&&(await a.remoteSyncer.rejectListen(p,u),a.Ia.delete(p),a.da.removeTarget(p))})(s,e)}catch(r){ue(Oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sm(s,r)}else if(e instanceof Zf?s.da.Xe(e):e instanceof jA?s.da.st(e):s.da.tt(e),!t.isEqual(Ae.min()))try{const r=await h1(s.localStore);t.compareTo(r)>=0&&await(function(l,u){const p=l.da.Tt(u);return p.targetChanges.forEach(((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(f.resumeToken,u))}})),p.targetMismatches.forEach(((f,y)=>{const v=l.Ia.get(f);if(!v)return;l.Ia.set(f,v.withResumeToken(Lt.EMPTY_BYTE_STRING,v.snapshotVersion)),T1(l,f);const E=new ci(v.target,f,y,v.sequenceNumber);M_(l,E)})),l.remoteSyncer.applyRemoteEvent(p)})(s,t)}catch(r){ue(Oo,"Failed to raise snapshot:",r),await Sm(s,r)}}async function Sm(s,e,t){if(!Na(e))throw e;s.Ea.add(1),await kc(s),s.Va.set("Offline"),t||(t=()=>h1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ue(Oo,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await nh(s)}))}function I1(s,e){return e().catch((t=>Sm(s,t,e)))}async function Dc(s){const e=be(s),t=Ta(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ha;for(;s4(e);)try{const a=await UM(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,i4(e,a)}catch(a){await Sm(e,a)}S1(e)&&A1(e)}function s4(s){return Ca(s)&&s.Ta.length<10}function i4(s,e){s.Ta.push(e);const t=Ta(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function S1(s){return Ca(s)&&!Ta(s).x_()&&s.Ta.length>0}function A1(s){Ta(s).start()}async function a4(s){Ta(s).ra()}async function o4(s){const e=Ta(s);for(const t of s.Ta)e.ea(t.mutations)}async function l4(s,e,t){const r=s.Ta.shift(),a=E_.from(r,e,t);await I1(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await Dc(s)}async function c4(s,e){e&&Ta(s).Y_&&await(async function(r,a){if((function(u){return kA(u)&&u!==W.ABORTED})(a.code)){const l=r.Ta.shift();Ta(r).B_(),await I1(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Dc(r)}})(s,e),S1(s)&&A1(s)}async function kw(s,e){const t=be(s);t.asyncQueue.verifyOperationInProgress(),ue(Oo,"RemoteStore received new credentials");const r=Ca(t);t.Ea.add(3),await kc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await nh(t)}async function b0(s,e){const t=be(s);e?(t.Ea.delete(2),await nh(t)):e||(t.Ea.add(2),await kc(t),t.Va.set("Unknown"))}function Pc(s){return s.ma||(s.ma=(function(t,r,a){const l=be(t);return l.sa(),new KM(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:e4.bind(null,s),Yo:t4.bind(null,s),t_:n4.bind(null,s),J_:r4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),U_(s)?L_(s):s.Va.set("Unknown")):(await s.ma.stop(),w1(s))}))),s.ma}function Ta(s){return s.fa||(s.fa=(function(t,r,a){const l=be(t);return l.sa(),new $M(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:a4.bind(null,s),t_:c4.bind(null,s),ta:o4.bind(null,s),na:l4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Dc(s)):(await s.fa.stop(),s.Ta.length>0&&(ue(Oo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class z_{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,p=new z_(e,t,u,a,l);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jc(s,e){if(Gt("AsyncQueue",`${e}: ${s}`),Na(s))return new le(W.UNAVAILABLE,`${e}: ${s}`);throw s}class Jl{static emptySet(e){return new Jl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=Xu(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Jl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Dw{constructor(){this.ga=new vt(ye.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class _c{constructor(e,t,r,a,l,u,p,f,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=f,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach((p=>{u.push({type:0,doc:p})})),new _c(e,t,Jl.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class u4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class d4{constructor(){this.queries=Pw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=be(t),l=a.queries;a.queries=Pw(),l.forEach(((u,p)=>{for(const f of p.ba)f.onError(r)}))})(this,new le(W.ABORTED,"Firestore shutting down"))}}function Pw(){return new bi((s=>yA(s)),Wd)}async function B_(s,e){const t=be(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new u4,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const p=jc(u,`Initialization of query '${Bl(e.query)}' failed`);return void e.onError(p)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&F_(t)}async function q_(s,e){const t=be(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function h4(s,e){const t=be(s);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const p of u.ba)p.Fa(a)&&(r=!0);u.wa=a}}r&&F_(t)}function f4(s,e,t){const r=be(s),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function F_(s){s.Ca.forEach((e=>{e.next()}))}var v0,jw;(jw=v0||(v0={})).Ma="default",jw.Cache="cache";class H_{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new _c(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=_c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==v0.Cache}}class m4{constructor(e,t){this.qa=e,this.byteLength=t}Ua(){return"metadata"in this.qa}}class Vw{constructor(e){this.serializer=e}Ks(e){return Ms(this.serializer,e)}qs(e){return e.metadata.exists?BA(this.serializer,e.document,!1):wt.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Qt(e)}}class p4{constructor(e,t){this.$a=e,this.serializer=t,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=N1(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const r=Ke.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new Vw(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.Ks(a.metadata.name);for(const u of a.metadata.queries){const p=(t.get(u)||Be()).add(l);t.set(u,p)}}return t}async ja(e){const t=await zM(e,new Vw(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const a of this.Wa)await BM(e,a,r.get(a.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:t}}}function N1(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class R1{constructor(e){this.key=e}}class C1{constructor(e){this.key=e}}class k1{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Be(),this.mutatedKeys=Be(),this.eu=bA(e),this.tu=new Jl(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new Dw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,p=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,E)=>{const T=a.get(v),C=Xd(this.query,E)?E:null,U=!!T&&this.mutatedKeys.has(T.key),H=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let J=!1;T&&C?T.data.isEqual(C.data)?U!==H&&(r.track({type:3,doc:C}),J=!0):this.su(T,C)||(r.track({type:2,doc:C}),J=!0,(f&&this.eu(C,f)>0||y&&this.eu(C,y)<0)&&(p=!0)):!T&&C?(r.track({type:0,doc:C}),J=!0):T&&!C&&(r.track({type:1,doc:T}),J=!0,(f||y)&&(p=!0)),J&&(C?(u=u.add(C),l=H?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:u,iu:r,Ss:p,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,E)=>(function(C,U){const H=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Vt:J})}};return H(C)-H(U)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(r),a=a??!1;const p=t&&!a?this._u():[],f=this.Ya.size===0&&this.current&&!a?1:0,y=f!==this.Xa;return this.Xa=f,u.length!==0||y?{snapshot:new _c(this.query,e.tu,l,u,e.mutatedKeys,f===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Dw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Be(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new C1(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new R1(r))})),t}cu(e){this.Za=e.ks,this.Ya=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return _c.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ka="SyncEngine";class g4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class y4{constructor(e){this.key=e,this.hu=!1}}class _4{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new bi((p=>yA(p)),Wd),this.Iu=new Map,this.Eu=new Set,this.Ru=new vt(ye.comparator),this.Au=new Map,this.Vu=new R_,this.du={},this.mu=new Map,this.fu=Vo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function b4(s,e,t=!0){const r=np(s);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await D1(r,e,t,!0),a}async function v4(s,e){const t=np(s);await D1(t,e,!0,!1)}async function D1(s,e,t,r){const a=await pc(s.localStore,Hn(e)),l=a.targetId,u=s.sharedClientState.addLocalQueryTarget(l,t);let p;return r&&(p=await G_(s,e,l,u==="current",a.resumeToken)),s.isPrimaryClient&&t&&tp(s.remoteStore,a),p}async function G_(s,e,t,r,a){s.pu=(E,T,C)=>(async function(H,J,K,ne){let oe=J.view.ru(K);oe.Ss&&(oe=await Tm(H.localStore,J.query,!1).then((({documents:N})=>J.view.ru(N,oe))));const pe=ne&&ne.targetChanges.get(J.targetId),F=ne&&ne.targetMismatches.get(J.targetId)!=null,ie=J.view.applyChanges(oe,H.isPrimaryClient,pe,F);return x0(H,J.targetId,ie.au),ie.snapshot})(s,E,T,C);const l=await Tm(s.localStore,e,!0),u=new k1(e,l.ks),p=u.ru(l.documents),f=eh.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),y=u.applyChanges(p,s.isPrimaryClient,f);x0(s,t,y.au);const v=new g4(e,t,u);return s.Tu.set(e,v),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function x4(s,e,t){const r=be(s),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((u=>!Wd(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await gc(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&yc(r.remoteStore,a.targetId),bc(r,a.targetId)})).catch(Aa)):(bc(r,a.targetId),await gc(r.localStore,a.targetId,!0))}async function E4(s,e){const t=be(s),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),yc(t.remoteStore,r.targetId))}async function T4(s,e,t){const r=Y_(s);try{const a=await(function(u,p){const f=be(u),y=lt.now(),v=p.reduce(((C,U)=>C.add(U.key)),Be());let E,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let U=ir(),H=Be();return f.xs.getEntries(C,v).next((J=>{U=J,U.forEach(((K,ne)=>{ne.isValidDocument()||(H=H.add(K))}))})).next((()=>f.localDocuments.getOverlayedDocuments(C,U))).next((J=>{E=J;const K=[];for(const ne of p){const oe=HO(ne,E.get(ne.key).overlayedDocument);oe!=null&&K.push(new vi(ne.key,oe,lA(oe.value.mapValue),Ct.exists(!0)))}return f.mutationQueue.addMutationBatch(C,y,K,p)})).next((J=>{T=J;const K=J.applyToLocalDocumentSet(E,H);return f.documentOverlayCache.saveOverlays(C,J.batchId,K)}))})).then((()=>({batchId:T.batchId,changes:xA(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,p,f){let y=u.du[u.currentUser.toKey()];y||(y=new vt(je)),y=y.insert(p,f),u.du[u.currentUser.toKey()]=y})(r,a.batchId,t),await xi(r,a.changes),await Dc(r.remoteStore)}catch(a){const l=jc(a,"Failed to persist write");t.reject(l)}}async function P1(s,e){const t=be(s);try{const r=await LM(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(we(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?we(u.hu,14607):a.removedDocuments.size>0&&(we(u.hu,42227),u.hu=!1))})),await xi(t,r,e)}catch(r){await Aa(r)}}function Ow(s,e,t){const r=be(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,u)=>{const p=u.view.va(e);p.snapshot&&a.push(p.snapshot)})),(function(u,p){const f=be(u);f.onlineState=p;let y=!1;f.queries.forEach(((v,E)=>{for(const T of E.ba)T.va(p)&&(y=!0)})),y&&F_(f)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function w4(s,e,t){const r=be(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let u=new vt(ye.comparator);u=u.insert(l,wt.newNoDocument(l,Ae.min()));const p=Be().add(l),f=new Zd(Ae.min(),new Map,new vt(je),u,p);await P1(r,f),r.Ru=r.Ru.remove(l),r.Au.delete(e),$_(r)}else await gc(r.localStore,e,!1).then((()=>bc(r,e,t))).catch(Aa)}async function I4(s,e){const t=be(s),r=e.batch.batchId;try{const a=await MM(t.localStore,e);K_(t,r,null),Q_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await xi(t,a)}catch(a){await Aa(a)}}async function S4(s,e,t){const r=be(s);try{const a=await(function(u,p){const f=be(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return f.mutationQueue.lookupMutationBatch(y,p).next((E=>(we(E!==null,37113),v=E.keys(),f.mutationQueue.removeMutationBatch(y,E)))).next((()=>f.mutationQueue.performConsistencyCheck(y))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(y,v,p))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>f.localDocuments.getDocuments(y,v)))}))})(r.localStore,e);K_(r,e,t),Q_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await xi(r,a)}catch(a){await Aa(a)}}async function A4(s,e){const t=be(s);Ca(t.remoteStore)||ue(ka,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(u){const p=be(u);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(f=>p.mutationQueue.getHighestUnacknowledgedBatchId(f)))})(t.localStore);if(r===ha)return void e.resolve();const a=t.mu.get(r)||[];a.push(e),t.mu.set(r,a)}catch(r){const a=jc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function Q_(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function K_(s,e,t){const r=be(s);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function bc(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||j1(s,r)}))}function j1(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(yc(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),$_(s))}function x0(s,e,t){for(const r of t)r instanceof R1?(s.Vu.addReference(r.key,e),N4(s,r)):r instanceof C1?(ue(ka,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||j1(s,r.key)):xe(19791,{wu:r})}function N4(s,e){const t=e.key,r=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(r)||(ue(ka,"New document in limbo: "+t),s.Eu.add(r),$_(s))}function $_(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new ye(Ke.fromString(e)),r=s.fu.next();s.Au.set(r,new y4(t)),s.Ru=s.Ru.insert(t,r),tp(s.remoteStore,new ci(Hn(Nc(t.path)),r,"TargetPurposeLimboResolution",rr.ce))}}async function xi(s,e,t){const r=be(s),a=[],l=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,f)=>{u.push(r.pu(f,e,t).then((y=>{if((y||t)&&r.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(y){a.push(y);const v=P_.Es(f.targetId,y);l.push(v)}})))})),await Promise.all(u),r.Pu.J_(a),await(async function(f,y){const v=be(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>z.forEach(y,(T=>z.forEach(T.Ts,(C=>v.persistence.referenceDelegate.addReference(E,T.targetId,C))).next((()=>z.forEach(T.Is,(C=>v.persistence.referenceDelegate.removeReference(E,T.targetId,C)))))))))}catch(E){if(!Na(E))throw E;ue(j_,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const C=v.vs.get(T),U=C.snapshotVersion,H=C.withLastLimboFreeSnapshotVersion(U);v.vs=v.vs.insert(T,H)}}})(r.localStore,l))}async function R4(s,e){const t=be(s);if(!t.currentUser.isEqual(e)){ue(ka,"User change. New user:",e.toKey());const r=await d1(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((p=>{p.forEach((f=>{f.reject(new le(W.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xi(t,r.Ns)}}function C4(s,e){const t=be(s),r=t.Au.get(e);if(r&&r.hu)return Be().add(r.key);{let a=Be();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const p=t.Tu.get(u);a=a.unionWith(p.view.nu)}return a}}async function k4(s,e){const t=be(s),r=await Tm(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&x0(t,e.targetId,a.au),a}async function D4(s,e){const t=be(s);return p1(t.localStore,e).then((r=>xi(t,r)))}async function P4(s,e,t,r){const a=be(s),l=await(function(p,f){const y=be(p),v=be(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",(E=>v.Xn(E,f).next((T=>T?y.localDocuments.getDocuments(E,T):z.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Dc(a.remoteStore):t==="acknowledged"||t==="rejected"?(K_(a,e,r||null),Q_(a,e),(function(p,f){be(be(p).mutationQueue).nr(f)})(a.localStore,e)):xe(6720,"Unknown batchState",{bu:t}),await xi(a,l)):ue(ka,"Cannot apply mutation batch with id: "+e)}async function j4(s,e){const t=be(s);if(np(t),Y_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await Mw(t,r.toArray());t.gu=!0,await b0(t.remoteStore,!0);for(const l of a)tp(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then((()=>(bc(t,u),gc(t.localStore,u,!0)))),yc(t.remoteStore,u)})),await a,await Mw(t,r),(function(u){const p=be(u);p.Au.forEach(((f,y)=>{yc(p.remoteStore,y)})),p.Vu.zr(),p.Au=new Map,p.Ru=new vt(ye.comparator)})(t),t.gu=!1,await b0(t.remoteStore,!1)}}async function Mw(s,e,t){const r=be(s),a=[],l=[];for(const u of e){let p;const f=r.Iu.get(u);if(f&&f.length!==0){p=await pc(r.localStore,Hn(f[0]));for(const y of f){const v=r.Tu.get(y),E=await k4(r,v);E.snapshot&&l.push(E.snapshot)}}else{const y=await m1(r.localStore,u);p=await pc(r.localStore,y),await G_(r,V1(y),u,!1,p.resumeToken)}a.push(p)}return r.Pu.J_(l),a}function V1(s){return gA(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function V4(s){return(function(t){return be(be(t).persistence).hs()})(be(s).localStore)}async function O4(s,e,t,r){const a=be(s);if(a.gu)return void ue(ka,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await p1(a.localStore,_A(l[0])),p=Zd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Lt.EMPTY_BYTE_STRING);await xi(a,u,p);break}case"rejected":await gc(a.localStore,e,!0),bc(a,e,r);break;default:xe(64155,t)}}async function M4(s,e,t){const r=np(s);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ue(ka,"Adding an already active target "+a);continue}const l=await m1(r.localStore,a),u=await pc(r.localStore,l);await G_(r,V1(l),u.targetId,!1,u.resumeToken),tp(r.remoteStore,u)}for(const a of t)r.Iu.has(a)&&await gc(r.localStore,a,!1).then((()=>{yc(r.remoteStore,a),bc(r,a)})).catch(Aa)}}function np(s){const e=be(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=P1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w4.bind(null,e),e.Pu.J_=h4.bind(null,e.eventManager),e.Pu.yu=f4.bind(null,e.eventManager),e}function Y_(s){const e=be(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S4.bind(null,e),e}function L4(s,e,t){const r=be(s);(async function(l,u,p){try{const f=await u.getMetadata();if(await(function(C,U){const H=be(C),J=Qt(U.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",(K=>H.Pi.getBundleMetadata(K,U.id))).then((K=>!!K&&K.createTime.compareTo(J)>=0))})(l.localStore,f))return await u.close(),p._completeWith((function(C){return{taskState:"Success",documentsLoaded:C.totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}})(f)),Promise.resolve(new Set);p._updateProgress(N1(f));const y=new p4(f,u.serializer);let v=await u.Su();for(;v;){const T=await y.Ga(v);T&&p._updateProgress(T),v=await u.Su()}const E=await y.ja(l.localStore);return await xi(l,E.Ja,void 0),await(function(C,U){const H=be(C);return H.persistence.runTransaction("Save bundle","readwrite",(J=>H.Pi.saveBundleMetadata(J,U)))})(l.localStore,f),p._completeWith(E.progress),Promise.resolve(E.Ha)}catch(f){return zs(ka,`Loading bundle failed with ${f}`),p._failWith(f),Promise.resolve(new Set)}})(r,e,t).then((a=>{r.sharedClientState.notifyBundleLoaded(a)}))}class jd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=th(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return u1(this.persistence,new c1,e.initialUser,this.serializer)}Cu(e){return new C_(ep.Vi,this.serializer)}Du(e){return new v1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jd.provider={build:()=>new jd};class U4 extends jd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){we(this.persistence.referenceDelegate instanceof Em,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new r1(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new C_((r=>Em.Vi(r,t)),this.serializer)}}class O1 extends jd{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Y_(this.xu.syncEngine),await Dc(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return u1(this.persistence,new c1,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new r1(r,e.asyncQueue,t)}Mu(e,t){const r=new qV(t,this.persistence);return new BV(e.asyncQueue,r)}Cu(e){const t=D_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new k_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,x1(),tm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new v1}}class z4 extends O1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Dy&&(this.sharedClientState.syncEngine={So:P4.bind(null,t),Do:O4.bind(null,t),Co:M4.bind(null,t),hs:V4.bind(null,t),bo:D4.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await j4(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=x1();if(!Dy.v(t))throw new le(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=D_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dy(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ow(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=R4.bind(null,this.syncEngine),await b0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new d4})()}createDatastore(e){const t=th(e.databaseInfo.databaseId),r=QM(e.databaseInfo);return XM(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,u,p){return new ZM(r,a,l,u,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ow(this.syncEngine,t,0)),(function(){return Rw.v()?new Rw:new qM})())}createSyncEngine(e,t){return(function(a,l,u,p,f,y,v){const E=new _4(a,l,u,p,f,y);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=be(t);ue(Oo,"RemoteStore shutting down."),r.Ea.add(5),await kc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Vd.provider={build:()=>new Vd};function Lw(s,e=10240){let t=0;return{async read(){if(t<s.byteLength){const r={value:s.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class rp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class B4{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new Nn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);const a=await this.Uu(r);return new m4(JSON.parse(a),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}let q4=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new le(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const u=be(a),p={documents:l.map((E=>Dd(u.serializer,E)))},f=await u.jo("BatchGetDocuments",u.serializer.databaseId,Ke.emptyPath(),p,l.length),y=new Map;f.forEach((E=>{const T=ZO(u.serializer,E);y.set(T.key.toString(),T)}));const v=[];return l.forEach((E=>{const T=y.get(E.toString());we(!!T,55234,{key:E}),v.push(T)})),v})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const a=ye.fromPath(r);this.mutations.push(new v_(a,this.precondition(a)))})),await(async function(r,a){const l=be(r),u={writes:a.map((p=>Pd(l.serializer,p)))};await l.Wo("Commit",l.serializer.databaseId,Ke.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xe(50498,{Gu:e.constructor.name});t=Ae.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new le(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ae.min())?Ct.exists(!1):Ct.updateTime(t):Ct.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ae.min()))throw new le(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ct.updateTime(t)}return Ct.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class F4{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.zu=r.maxAttempts,this.M_=new O_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new q4(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((a=>{this.Zu(a)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!Kd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!kA(t)}return!1}}const wa="FirestoreClient";class H4{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=gn.UNAUTHENTICATED,this.clientId=a_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{ue(wa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ue(wa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=jc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function jy(s,e){s.asyncQueue.verifyOperationInProgress(),ue(wa,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async a=>{r.isEqual(a)||(await d1(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Uw(s,e){s.asyncQueue.verifyOperationInProgress();const t=await W_(s);ue(wa,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>kw(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,a)=>kw(e.remoteStore,a))),s._onlineComponents=e}async function W_(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ue(wa,"Using user provided OfflineComponentProvider");try{await jy(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===W.FAILED_PRECONDITION||a.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;zs("Error using user provided cache. Falling back to memory cache: "+t),await jy(s,new jd)}}else ue(wa,"Using default OfflineComponentProvider"),await jy(s,new U4(void 0));return s._offlineComponents}async function sp(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ue(wa,"Using user provided OnlineComponentProvider"),await Uw(s,s._uninitializedComponentsProvider._online)):(ue(wa,"Using default OnlineComponentProvider"),await Uw(s,new Vd))),s._onlineComponents}function M1(s){return W_(s).then((e=>e.persistence))}function X_(s){return W_(s).then((e=>e.localStore))}function L1(s){return sp(s).then((e=>e.remoteStore))}function J_(s){return sp(s).then((e=>e.syncEngine))}function G4(s){return sp(s).then((e=>e.datastore))}async function vc(s){const e=await sp(s),t=e.eventManager;return t.onListen=b4.bind(null,e.syncEngine),t.onUnlisten=x4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=v4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E4.bind(null,e.syncEngine),t}function Q4(s){return s.asyncQueue.enqueue((async()=>{const e=await M1(s),t=await L1(s);return e.setNetworkEnabled(!0),(function(a){const l=be(a);return l.Ea.delete(0),nh(l)})(t)}))}function K4(s){return s.asyncQueue.enqueue((async()=>{const e=await M1(s),t=await L1(s);return e.setNetworkEnabled(!1),(async function(a){const l=be(a);l.Ea.add(0),await kc(l),l.Va.set("Offline")})(t)}))}function $4(s,e,t,r){const a=new rp(r),l=new H_(e,a,t);return s.asyncQueue.enqueueAndForget((async()=>B_(await vc(s),l))),()=>{a.Nu(),s.asyncQueue.enqueueAndForget((async()=>q_(await vc(s),l)))}}function Y4(s,e){const t=new Nn;return s.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const p=await(function(y,v){const E=be(y);return E.persistence.runTransaction("read document","readonly",(T=>E.localDocuments.getDocument(T,v)))})(a,l);p.isFoundDocument()?u.resolve(p):p.isNoDocument()?u.resolve(null):u.reject(new le(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const f=jc(p,`Failed to get document '${l} from cache`);u.reject(f)}})(await X_(s),e,t))),t.promise}function U1(s,e,t={}){const r=new Nn;return s.asyncQueue.enqueueAndForget((async()=>(function(l,u,p,f,y){const v=new rp({next:T=>{v.Nu(),u.enqueueAndForget((()=>q_(l,E)));const C=T.docs.has(p);!C&&T.fromCache?y.reject(new le(W.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&f&&f.source==="server"?y.reject(new le(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new H_(Nc(p.path),v,{includeMetadataChanges:!0,Ka:!0});return B_(l,E)})(await vc(s),s.asyncQueue,e,t,r))),r.promise}function W4(s,e){const t=new Nn;return s.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const p=await Tm(a,l,!0),f=new k1(l,p.ks),y=f.ru(p.documents),v=f.applyChanges(y,!1);u.resolve(v.snapshot)}catch(p){const f=jc(p,`Failed to execute query '${l} against cache`);u.reject(f)}})(await X_(s),e,t))),t.promise}function z1(s,e,t={}){const r=new Nn;return s.asyncQueue.enqueueAndForget((async()=>(function(l,u,p,f,y){const v=new rp({next:T=>{v.Nu(),u.enqueueAndForget((()=>q_(l,E))),T.fromCache&&f.source==="server"?y.reject(new le(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new H_(p,v,{includeMetadataChanges:!0,Ka:!0});return B_(l,E)})(await vc(s),s.asyncQueue,e,t,r))),r.promise}function X4(s,e){const t=new Nn;return s.asyncQueue.enqueueAndForget((async()=>T4(await J_(s),e,t))),t.promise}function J4(s,e){const t=new rp(e);return s.asyncQueue.enqueueAndForget((async()=>(function(a,l){be(a).Ca.add(l),l.next()})(await vc(s),t))),()=>{t.Nu(),s.asyncQueue.enqueueAndForget((async()=>(function(a,l){be(a).Ca.delete(l)})(await vc(s),t)))}}function Z4(s,e,t){const r=new Nn;return s.asyncQueue.enqueueAndForget((async()=>{const a=await G4(s);new F4(s.asyncQueue,a,t,e,r).ju()})),r.promise}function e6(s,e,t,r){const a=(function(u,p){let f;return f=typeof u=="string"?PA().encode(u):u,(function(v,E){return new B4(v,E)})((function(v,E){if(v instanceof Uint8Array)return Lw(v,E);if(v instanceof ArrayBuffer)return Lw(new Uint8Array(v),E);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(f),p)})(t,th(e));s.asyncQueue.enqueueAndForget((async()=>{L4(await J_(s),a,r)}))}function t6(s,e){return s.asyncQueue.enqueue((async()=>(function(r,a){const l=be(r);return l.persistence.runTransaction("Get named query","readonly",(u=>l.Pi.getNamedQuery(u,a)))})(await X_(s),e)))}function B1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const n6="ComponentProvider",zw=new Map;function r6(s,e,t,r,a){return new yO(s,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,B1(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}const q1="firestore.googleapis.com",Bw=!0;class qw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q1,this.ssl=Bw}else this.host=e.host,this.ssl=e.ssl??Bw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_M)throw new le(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new RV;switch(r.type){case"firstParty":return new PV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=zw.get(t);r&&(ue(n6,"Removing Datastore"),zw.delete(t),r.terminate())})(this),Promise.resolve()}}function s6(s,e,t,r={}){s=st(s,rh);const a=Ec(e),l=s._getSettings(),u={...l,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${t}`;a&&(aI(`https://${p}`),oI("Firestore",!0)),l.host!==q1&&l.host!==p&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...l,host:p,ssl:a,emulatorOptions:r};if(!ma(f,u)&&(s._setSettings(f),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=gn.MOCK_USER;else{y=GC(r.mockUserToken,s._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new le(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new gn(E)}s._authCredentials=new CV(new DS(y,v))}}let Gn=class F1{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new F1(this.firestore,e,this._query)}},bt=class ed{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ed(this.firestore,e,this._key)}toJSON(){return{type:ed._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Qd(t,ed._jsonSchema))return new ed(e,r||null,new ye(Ke.fromString(t.referencePath)))}};bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:an("string",bt._jsonSchemaVersion),referencePath:an("string")};let fa=class H1 extends Gn{constructor(e,t,r){super(e,t,Nc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new ye(e))}withConverter(e){return new H1(this.firestore,e,this._path)}};function G1(s,e,...t){if(s=ke(s),o_("collection","path",e),s instanceof rh){const r=Ke.fromString(e,...t);return CT(r),new fa(s,null,r)}{if(!(s instanceof bt||s instanceof fa))throw new le(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ke.fromString(e,...t));return CT(r),new fa(s.firestore,null,r)}}function i6(s,e){if(s=st(s,rh),o_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new le(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gn(s,null,(function(r){return new _i(Ke.emptyPath(),r)})(e))}function Am(s,e,...t){if(s=ke(s),arguments.length===1&&(e=a_.newId()),o_("doc","path",e),s instanceof rh){const r=Ke.fromString(e,...t);return RT(r),new bt(s,null,new ye(r))}{if(!(s instanceof bt||s instanceof fa))throw new le(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ke.fromString(e,...t));return RT(r),new bt(s.firestore,s instanceof fa?s.converter:null,new ye(r))}}function Q1(s,e){return s=ke(s),e=ke(e),(s instanceof bt||s instanceof fa)&&(e instanceof bt||e instanceof fa)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function K1(s,e){return s=ke(s),e=ke(e),s instanceof Gn&&e instanceof Gn&&s.firestore===e.firestore&&Wd(s._query,e._query)&&s.converter===e.converter}const Fw="AsyncQueue";class Hw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new O_(this,"async_queue_retry"),this._c=()=>{const r=tm();r&&ue(Fw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=tm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=tm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Nn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Na(e))throw e;ue(Fw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Gt("INTERNAL UNHANDLED ERROR: ",Gw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=z_.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&xe(47125,{Pc:Gw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Gw(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class a6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const o6=-1;let Kt=class extends rh{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new Hw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hw(e),this._firestoreClient=void 0,await e}}};function Mn(s){if(s._terminated)throw new le(W.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||$1(s),s._firestoreClient}function $1(s){const e=s._freezeSettings(),t=r6(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new H4(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}function l6(s,e){zs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return Y1(s,Vd.provider,{build:r=>new O1(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function c6(s){zs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();Y1(s,Vd.provider,{build:t=>new z4(t,e.cacheSizeBytes)})}function Y1(s,e,t){if((s=st(s,Kt))._firestoreClient||s._terminated)throw new le(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new le(W.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},$1(s)}function u6(s){if(s._initialized&&!s._terminated)throw new le(W.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nn;return s._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Os.v())return Promise.resolve();const a=r+l1;await Os.delete(a)})(D_(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function d6(s){return(function(t){const r=new Nn;return t.asyncQueue.enqueueAndForget((async()=>A4(await J_(t),r))),r.promise})(Mn(s=st(s,Kt)))}function h6(s){return Q4(Mn(s=st(s,Kt)))}function f6(s){return K4(Mn(s=st(s,Kt)))}function m6(s,e){const t=Mn(s=st(s,Kt)),r=new a6;return e6(t,s._databaseId,e,r),r}function p6(s,e){return t6(Mn(s=st(s,Kt)),e).then((t=>t?new Gn(s,null,t.query):null))}class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Lt.fromBase64String(e))}catch(t){throw new le(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qd(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:an("string",Vn._jsonSchemaVersion),bytes:an("string")};let Mo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};let qo=class{constructor(e){this._methodName=e}};class es{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:es._jsonSchemaVersion}}static fromJSON(e){if(Qd(e,es._jsonSchema))return new es(e.latitude,e.longitude)}}es._jsonSchemaVersion="firestore/geoPoint/1.0",es._jsonSchema={type:an("string",es._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};class ts{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qd(e,ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ts(e.vectorValues);throw new le(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ts._jsonSchemaVersion="firestore/vectorValue/1.0",ts._jsonSchema={type:an("string",ts._jsonSchemaVersion),vectorValues:an("object")};const g6=/^__.*__$/;class y6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rc(e,this.data,t,this.fieldTransforms)}}class W1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function X1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{dataSource:s})}}class ip{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ip({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Nm(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(X1(this.dataSource)&&g6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class _6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||th(e)}createContext(e,t,r,a=!1){return new ip({dataSource:e,methodName:t,targetDoc:r,path:Rt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fo(s){const e=s._freezeSettings(),t=th(s._databaseId);return new _6(s._databaseId,!!e.ignoreUndefinedProperties,t)}function ap(s,e,t,r,a,l={}){const u=s.createContext(l.merge||l.mergeFields?2:0,e,t,a);ib("Data must be an object, but it was:",u,r);const p=eN(r,u);let f,y;if(l.merge)f=new sr(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const T=Lo(e,E,t);if(!u.contains(T))throw new le(W.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);rN(v,T)||v.push(T)}f=new sr(v),y=u.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,y=u.fieldTransforms;return new y6(new An(p),f,y)}class sh extends qo{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sh}}function J1(s,e,t){return new ip({dataSource:3,targetDoc:e.settings.targetDoc,methodName:s._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Z_ extends qo{_toFieldTransform(e){return new Jd(e.path,new hc)}isEqual(e){return e instanceof Z_}}class eb extends qo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=J1(this,e,!0),r=this.Ac.map((l=>Ho(l,t))),a=new ko(r);return new Jd(e.path,a)}isEqual(e){return e instanceof eb&&ma(this.Ac,e.Ac)}}class tb extends qo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=J1(this,e,!0),r=this.Ac.map((l=>Ho(l,t))),a=new Do(r);return new Jd(e.path,a)}isEqual(e){return e instanceof tb&&ma(this.Ac,e.Ac)}}class nb extends qo{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new fc(e.serializer,wA(e.serializer,this.Vc));return new Jd(e.path,t)}isEqual(e){return e instanceof nb&&this.Vc===e.Vc}}function rb(s,e,t,r){const a=s.createContext(1,e,t);ib("Data must be an object, but it was:",a,r);const l=[],u=An.empty();Ra(r,((f,y)=>{const v=nN(e,f,t);y=ke(y);const E=a.childContextForFieldPath(v);if(y instanceof sh)l.push(v);else{const T=Ho(y,E);T!=null&&(l.push(v),u.set(v,T))}}));const p=new sr(l);return new W1(u,p,a.fieldTransforms)}function sb(s,e,t,r,a,l){const u=s.createContext(1,e,t),p=[Lo(e,r,t)],f=[a];if(l.length%2!=0)throw new le(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)p.push(Lo(e,l[T])),f.push(l[T+1]);const y=[],v=An.empty();for(let T=p.length-1;T>=0;--T)if(!rN(y,p[T])){const C=p[T];let U=f[T];U=ke(U);const H=u.childContextForFieldPath(C);if(U instanceof sh)y.push(C);else{const J=Ho(U,H);J!=null&&(y.push(C),v.set(C,J))}}const E=new sr(y);return new W1(v,E,u.fieldTransforms)}function Z1(s,e,t,r=!1){return Ho(t,s.createContext(r?4:3,e))}function Ho(s,e){if(tN(s=ke(s)))return ib("Unsupported field value:",e,s),eN(s,e);if(s instanceof qo)return(function(r,a){if(!X1(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const p of r){let f=Ho(p,a.childContextForArray(u));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),u++}return{arrayValue:{values:l}}})(s,e)}return(function(r,a){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wA(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=lt.fromDate(r);return{timestampValue:mc(a.serializer,l)}}if(r instanceof lt){const l=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mc(a.serializer,l)}}if(r instanceof es)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vn)return{bytesValue:OA(a.serializer,r._byteString)};if(r instanceof bt){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:I_(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof ts)return(function(u,p){const f=u instanceof ts?u.toArray():u;return{mapValue:{fields:{[m_]:{stringValue:p_},[cc]:{arrayValue:{values:f.map((v=>{if(typeof v!="number")throw p.createError("VectorValues must only contain numeric values.");return b_(p.serializer,v)}))}}}}}})(r,a);if($A(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${qm(r)}`)})(s,e)}function eN(s,e){const t={};return ZS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ra(s,((r,a)=>{const l=Ho(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function tN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof lt||s instanceof es||s instanceof Vn||s instanceof bt||s instanceof qo||s instanceof ts||$A(s))}function ib(s,e,t){if(!tN(t)||!VS(t)){const r=qm(t);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function Lo(s,e,t){if((e=ke(e))instanceof Mo)return e._internalPath;if(typeof e=="string")return nN(s,e);throw Nm("Field path arguments must be of type string or ",s,!1,void 0,t)}const b6=new RegExp("[~\\*/\\[\\]]");function nN(s,e,t){if(e.search(b6)>=0)throw Nm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Mo(...e.split("."))._internalPath}catch{throw Nm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Nm(s,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let f="";return(l||u)&&(f+=" (found",l&&(f+=` in field ${r}`),u&&(f+=` in document ${a}`),f+=")"),new le(W.INVALID_ARGUMENT,p+s+f)}function rN(s,e){return s.some((t=>t.isEqual(e)))}class ab{convertValue(e,t="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ra(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[cc].arrayValue?.values?.map((r=>At(r.doubleValue)));return new ts(t)}convertGeoPoint(e){return new es(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$m(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nd(e));default:return null}}convertTimestamp(e){const t=mi(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ke.fromString(e);we(KA(r),9688,{name:e});const a=new ba(r.get(1),r.get(3)),l=new ye(r.popFirst(5));return a.isEqual(t)||Gt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class Go extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}function v6(){return new sh("deleteField")}function x6(){return new Z_("serverTimestamp")}function E6(...s){return new eb("arrayUnion",s)}function T6(...s){return new tb("arrayRemove",s)}function w6(s){return new nb("increment",s)}const Qw="@firebase/firestore",Kw="4.10.0";function E0(s){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(s,["next","error","complete"])}class Od{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Lo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class I6 extends Od{data(){return super.data()}}function sN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new le(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ob{}class ih extends ob{}function ra(s,e,...t){let r=[];e instanceof ob&&r.push(e),r=r.concat(t),(function(l){const u=l.filter((f=>f instanceof lb)).length,p=l.filter((f=>f instanceof op)).length;if(u>1||u>0&&p>0)throw new le(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)s=a._apply(s);return s}class op extends ih{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new op(e,t,r)}_apply(e){const t=this._parse(e);return aN(e._query,t),new Gn(e.firestore,e.converter,c0(e._query,t))}_parse(e){const t=Fo(e.firestore);return(function(l,u,p,f,y,v,E){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new le(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Yw(E,v);const U=[];for(const H of E)U.push($w(f,l,H));T={arrayValue:{values:U}}}else T=$w(f,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Yw(E,v),T=Z1(p,u,E,v==="in"||v==="not-in");return Xe.create(y,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function S6(s,e,t){const r=e,a=Lo("where",s);return op._create(a,r,t)}class lb extends ob{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lb(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ht.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const p=l.getFlattenedFilters();for(const f of p)aN(u,f),u=c0(u,f)})(e._query,t),new Gn(e.firestore,e.converter,c0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cb extends ih{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cb(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new le(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new le(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kd(l,u)})(e._query,this._field,this._direction);return new Gn(e.firestore,e.converter,kO(e._query,t))}}function A6(s,e="asc"){const t=e,r=Lo("orderBy",s);return cb._create(r,t)}class lp extends ih{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new lp(e,t,r)}_apply(e){return new Gn(e.firestore,e.converter,_m(e._query,this._limit,this._limitType))}}function N6(s){return OS("limit",s),lp._create("limit",s,"F")}function R6(s){return OS("limitToLast",s),lp._create("limitToLast",s,"L")}class cp extends ih{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new cp(e,t,r)}_apply(e){const t=iN(e,this.type,this._docOrFields,this._inclusive);return new Gn(e.firestore,e.converter,DO(e._query,t))}}function C6(...s){return cp._create("startAt",s,!0)}function k6(...s){return cp._create("startAfter",s,!1)}class up extends ih{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new up(e,t,r)}_apply(e){const t=iN(e,this.type,this._docOrFields,this._inclusive);return new Gn(e.firestore,e.converter,PO(e._query,t))}}function D6(...s){return up._create("endBefore",s,!1)}function P6(...s){return up._create("endAt",s,!0)}function iN(s,e,t,r){if(t[0]=ke(t[0]),t[0]instanceof Od)return(function(l,u,p,f,y){if(!f)throw new le(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const v=[];for(const E of Wl(l))if(E.field.isKeyField())v.push(Ro(u,f.key));else{const T=f.data.field(E.field);if(Km(T))throw new le(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const C=E.field.canonicalString();throw new le(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${C}' (used as the orderBy) does not exist.`)}v.push(T)}return new Ea(v,y)})(s._query,s.firestore._databaseId,e,t[0]._document,r);{const a=Fo(s.firestore);return(function(u,p,f,y,v,E){const T=u.explicitOrderBy;if(v.length>T.length)throw new le(W.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const C=[];for(let U=0;U<v.length;U++){const H=v[U];if(T[U].field.isKeyField()){if(typeof H!="string")throw new le(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof H}`);if(!y_(u)&&H.indexOf("/")!==-1)throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${H}' contains a slash.`);const J=u.path.child(Ke.fromString(H));if(!ye.isDocumentKey(J))throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const K=new ye(J);C.push(Ro(p,K))}else{const J=Z1(f,y,H);C.push(J)}}return new Ea(C,E)})(s._query,s.firestore._databaseId,a,e,t,r)}}function $w(s,e,t){if(typeof(t=ke(t))=="string"){if(t==="")throw new le(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y_(e)&&t.indexOf("/")!==-1)throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ke.fromString(t));if(!ye.isDocumentKey(r))throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ro(s,new ye(r))}if(t instanceof bt)return Ro(s,t._key);throw new le(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qm(t)}.`)}function Yw(s,e){if(!Array.isArray(s)||s.length===0)throw new le(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aN(s,e){const t=(function(a,l){for(const u of a)for(const p of u.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function dp(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class j6 extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}class bo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Or=class oN extends Od{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Lo("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=oN._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Or._jsonSchemaVersion="firestore/documentSnapshot/1.0",Or._jsonSchema={type:an("string",Or._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};let pd=class extends Or{data(e={}){return super.data(e)}},ns=class lN{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new bo(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new pd(this._firestore,this._userDataWriter,r.key,r,new bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((p=>{const f=new pd(a._firestore,a._userDataWriter,p.doc.key,p.doc,new bo(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);return p.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const f=new pd(a._firestore,a._userDataWriter,p.doc.key,p.doc,new bo(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,v=-1;return p.type!==0&&(y=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),v=u.indexOf(p.doc.key)),{type:V6(p.type),doc:f,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lN._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=a_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function V6(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:s})}}function cN(s,e){return s instanceof Or&&e instanceof Or?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(s._document===null?e._document===null:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof ns&&e instanceof ns&&s._firestore===e._firestore&&K1(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}ns._jsonSchemaVersion="firestore/querySnapshot/1.0",ns._jsonSchema={type:an("string",ns._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};const O6={maxAttempts:5};let M6=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fo(e)}set(e,t,r){this._verifyNotCommitted();const a=la(e,this._firestore),l=dp(a.converter,t,r),u=ap(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(u.toMutation(a._key,Ct.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=la(e,this._firestore);let u;return u=typeof(t=ke(t))=="string"||t instanceof Mo?sb(this._dataReader,"WriteBatch.update",l._key,t,r,a):rb(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Ct.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=la(e,this._firestore);return this._mutations=this._mutations.concat(new Cc(t._key,Ct.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function la(s,e){if((s=ke(s)).firestore!==e)throw new le(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class L6{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fo(e)}get(e){const t=la(e,this._firestore),r=new j6(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return xe(24041);const l=a[0];if(l.isFoundDocument())return new Od(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Od(this._firestore,r,t._key,null,t.converter);throw xe(18433,{doc:l})}))}set(e,t,r){const a=la(e,this._firestore),l=dp(a.converter,t,r),u=ap(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,u),this}update(e,t,r,...a){const l=la(e,this._firestore);let u;return u=typeof(t=ke(t))=="string"||t instanceof Mo?sb(this._dataReader,"Transaction.update",l._key,t,r,a):rb(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=la(e,this._firestore);return this._transaction.delete(t._key),this}}let U6=class extends L6{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=la(e,this._firestore),r=new Go(this._firestore);return super.get(e).then((a=>new Or(this._firestore,r,t._key,a._document,new bo(!1,!1),t.converter)))}};function z6(s,e,t){s=st(s,Kt);const r={...O6,...t};(function(u){if(u.maxAttempts<1)throw new le(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const a=Mn(s);return Z4(a,(l=>e(new U6(s,l))),r)}function B6(s){s=st(s,bt);const e=st(s.firestore,Kt),t=Mn(e);return U1(t,s._key).then((r=>ub(e,s,r)))}function q6(s){s=st(s,bt);const e=st(s.firestore,Kt),t=Mn(e),r=new Go(e);return Y4(t,s._key).then((a=>new Or(e,r,s._key,a,new bo(a!==null&&a.hasLocalMutations,!0),s.converter)))}function F6(s){s=st(s,bt);const e=st(s.firestore,Kt),t=Mn(e);return U1(t,s._key,{source:"server"}).then((r=>ub(e,s,r)))}function H6(s){s=st(s,Gn);const e=st(s.firestore,Kt),t=Mn(e),r=new Go(e);return sN(s._query),z1(t,s._query).then((a=>new ns(e,r,s,a)))}function G6(s){s=st(s,Gn);const e=st(s.firestore,Kt),t=Mn(e),r=new Go(e);return W4(t,s._query).then((a=>new ns(e,r,s,a)))}function Q6(s){s=st(s,Gn);const e=st(s.firestore,Kt),t=Mn(e),r=new Go(e);return z1(t,s._query,{source:"server"}).then((a=>new ns(e,r,s,a)))}function Ww(s,e,t){s=st(s,bt);const r=st(s.firestore,Kt),a=dp(s.converter,e,t),l=Fo(r);return ah(r,[ap(l,"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,Ct.none())])}function Xw(s,e,t,...r){s=st(s,bt);const a=st(s.firestore,Kt),l=Fo(a);let u;return u=typeof(e=ke(e))=="string"||e instanceof Mo?sb(l,"updateDoc",s._key,e,t,r):rb(l,"updateDoc",s._key,e),ah(a,[u.toMutation(s._key,Ct.exists(!0))])}function K6(s){return ah(st(s.firestore,Kt),[new Cc(s._key,Ct.none())])}function $6(s,e){const t=st(s.firestore,Kt),r=Am(s),a=dp(s.converter,e),l=Fo(s.firestore);return ah(t,[ap(l,"addDoc",r._key,a,s.converter!==null,{}).toMutation(r._key,Ct.exists(!1))]).then((()=>r))}function uN(s,...e){s=ke(s);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||E0(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(E0(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let l,u,p;if(s instanceof bt)u=st(s.firestore,Kt),p=Nc(s._key.path),l={next:y=>{e[r]&&e[r](ub(u,s,y))},error:e[r+1],complete:e[r+2]};else{const y=st(s,Gn);u=st(y.firestore,Kt),p=y._query;const v=new Go(u);l={next:E=>{e[r]&&e[r](new ns(u,v,y,E))},error:e[r+1],complete:e[r+2]},sN(s._query)}const f=Mn(u);return $4(f,p,a,l)}function Y6(s,e){s=st(s,Kt);const t=Mn(s),r=E0(e)?e:{next:e};return J4(t,r)}function ah(s,e){const t=Mn(s);return X4(t,e)}function ub(s,e,t){const r=t.docs.get(e._key),a=new Go(s);return new Or(s,a,e._key,r,new bo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){SV(Ia),ya(new Ls("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),p=new Kt(new kV(r.getProvider("auth-internal")),new jV(u,r.getProvider("app-check-internal")),_O(u,a),u);return l={useFetchStreams:t,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),Zr(Qw,Kw,e),Zr(Qw,Kw,"esm2020")})();const W6="@firebase/firestore-compat",X6="0.4.4";function db(s,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new le("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function Jw(){if(typeof Uint8Array>"u")throw new le("unimplemented","Uint8Arrays are not available in this environment.")}function Zw(){if(!pO())throw new le("unimplemented","Blobs are unavailable in Firestore in this environment.")}let dN=class T0{constructor(e){this._delegate=e}static fromBase64String(e){return Zw(),new T0(Vn.fromBase64String(e))}static fromUint8Array(e){return Jw(),new T0(Vn.fromUint8Array(e))}toBase64(){return Zw(),this._delegate.toBase64()}toUint8Array(){return Jw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function w0(s){return J6(s,["next","error","complete"])}function J6(s,e){if(typeof s!="object"||s===null)return!1;const t=s;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}class Z6{enableIndexedDbPersistence(e,t){return l6(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return c6(e._delegate)}clearIndexedDbPersistence(e){return u6(e._delegate)}}class hN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ba||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&zs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){s6(this._delegate,e,t,r)}enableNetwork(){return h6(this._delegate)}disableNetwork(){return f6(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,jS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return d6(this._delegate)}onSnapshotsInSync(e){return Y6(this._delegate,e)}get app(){if(!this._appCompat)throw new le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xc(this,G1(this._delegate,e))}catch(t){throw qn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vr(this,Am(this._delegate,e))}catch(t){throw qn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Bn(this,i6(this._delegate,e))}catch(t){throw qn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return z6(this._delegate,t=>e(new fN(this,t)))}batch(){return Mn(this._delegate),new mN(new M6(this._delegate,e=>ah(this._delegate,e)))}loadBundle(e){return m6(this._delegate,e)}namedQuery(e){return p6(this._delegate,e).then(t=>t?new Bn(this,t):null)}}class hp extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new dN(new Vn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Vr.forKey(t,this.firestore,null)}}function e3(s){AV(s)}class fN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hp(e)}get(e){const t=vo(e);return this._delegate.get(t).then(r=>new Md(this._firestore,new Or(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=vo(e);return r?(db("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=vo(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=vo(e);return this._delegate.delete(t),this}}class mN{constructor(e){this._delegate=e}set(e,t,r){const a=vo(e);return r?(db("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=vo(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=vo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Uo{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ld(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Uo.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new Uo(e,new hp(e),t),a.set(t,l)),l}}Uo.INSTANCES=new WeakMap;class Vr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vr(t,new bt(t._delegate,r,new ye(e)))}static forKey(e,t,r){return new Vr(t,new bt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new xc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xc(this.firestore,G1(this._delegate,e))}catch(t){throw qn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ke(e),e instanceof bt?Q1(this._delegate,e):!1}set(e,t){t=db("DocumentReference.set",t);try{return t?Ww(this._delegate,e,t):Ww(this._delegate,e)}catch(r){throw qn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Xw(this._delegate,e):Xw(this._delegate,e,t,...r)}catch(a){throw qn(a,"updateDoc()","DocumentReference.update()")}}delete(){return K6(this._delegate)}onSnapshot(...e){const t=pN(e),r=gN(e,a=>new Md(this.firestore,new Or(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return uN(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=q6(this._delegate):e?.source==="server"?t=F6(this._delegate):t=B6(this._delegate),t.then(r=>new Md(this.firestore,new Or(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Vr(this.firestore,e?this._delegate.withConverter(Uo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function qn(s,e,t){return s.message=s.message.replace(e,t),s}function pN(s){for(const e of s)if(typeof e=="object"&&!w0(e))return e;return{}}function gN(s,e){let t;return w0(s[0])?t=s[0]:w0(s[1])?t=s[1]:typeof s[0]=="function"?t={next:s[0],error:s[1],complete:s[2]}:t={next:s[1],error:s[2],complete:s[3]},{next:r=>{t.next&&t.next(e(r))},error:t.error?.bind(t),complete:t.complete?.bind(t)}}class Md{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return cN(this._delegate,e._delegate)}}class Ld extends Md{data(e){const t=this._delegate.data(e);return this._delegate._converter||NV(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class Bn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hp(e)}where(e,t,r){try{return new Bn(this.firestore,ra(this._delegate,S6(e,t,r)))}catch(a){throw qn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Bn(this.firestore,ra(this._delegate,A6(e,t)))}catch(r){throw qn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Bn(this.firestore,ra(this._delegate,N6(e)))}catch(t){throw qn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Bn(this.firestore,ra(this._delegate,R6(e)))}catch(t){throw qn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Bn(this.firestore,ra(this._delegate,C6(...e)))}catch(t){throw qn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Bn(this.firestore,ra(this._delegate,k6(...e)))}catch(t){throw qn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Bn(this.firestore,ra(this._delegate,D6(...e)))}catch(t){throw qn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Bn(this.firestore,ra(this._delegate,P6(...e)))}catch(t){throw qn(t,"endAt()","Query.endAt()")}}isEqual(e){return K1(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=G6(this._delegate):e?.source==="server"?t=Q6(this._delegate):t=H6(this._delegate),t.then(r=>new I0(this.firestore,new ns(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=pN(e),r=gN(e,a=>new I0(this.firestore,new ns(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return uN(this._delegate,t,r)}withConverter(e){return new Bn(this.firestore,e?this._delegate.withConverter(Uo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class t3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ld(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class I0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Bn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ld(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new t3(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ld(this._firestore,r))})}isEqual(e){return cN(this._delegate,e._delegate)}}class xc extends Bn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vr(this.firestore,e):null}doc(e){try{return e===void 0?new Vr(this.firestore,Am(this._delegate)):new Vr(this.firestore,Am(this._delegate,e))}catch(t){throw qn(t,"doc()","CollectionReference.doc()")}}add(e){return $6(this._delegate,e).then(t=>new Vr(this.firestore,t))}isEqual(e){return Q1(this._delegate,e._delegate)}withConverter(e){return new xc(this.firestore,e?this._delegate.withConverter(Uo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function vo(s){return st(s,bt)}class hb{constructor(...e){this._delegate=new Mo(...e)}static documentId(){return new hb(Rt.keyField().canonicalString())}isEqual(e){return e=ke(e),e instanceof Mo?this._delegate._internalPath.isEqual(e._internalPath):!1}}class go{static serverTimestamp(){const e=x6();return e._methodName="FieldValue.serverTimestamp",new go(e)}static delete(){const e=v6();return e._methodName="FieldValue.delete",new go(e)}static arrayUnion(...e){const t=E6(...e);return t._methodName="FieldValue.arrayUnion",new go(t)}static arrayRemove(...e){const t=T6(...e);return t._methodName="FieldValue.arrayRemove",new go(t)}static increment(e){const t=w6(e);return t._methodName="FieldValue.increment",new go(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const n3={Firestore:hN,GeoPoint:es,Timestamp:lt,Blob:dN,Transaction:fN,WriteBatch:mN,DocumentReference:Vr,DocumentSnapshot:Md,Query:Bn,QueryDocumentSnapshot:Ld,QuerySnapshot:I0,CollectionReference:xc,FieldPath:hb,FieldValue:go,setLogLevel:e3,CACHE_SIZE_UNLIMITED:o6};function r3(s,e){s.INTERNAL.registerComponent(new Ls("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps({...n3}))}function s3(s){r3(s,(e,t)=>new hN(e,t,new Z6)),s.registerVersion(W6,X6)}s3(Vs);const i3={apiKey:"AIzaSyDS5RsnYL49tertpcIUXPa3dppw_soU1FQ",authDomain:"led-react-6204e.firebaseapp.com",projectId:"led-react-6204e",storageBucket:"led-react-6204e.firebasestorage.app",messagingSenderId:"500086523818",appId:"1:500086523818:web:74b4a57f9c55730eee4dd3",measurementId:"G-B0D52YG6QQ"};Vs.apps.length?Vs.app():Vs.initializeApp(i3);const eI=Vs.auth(),_r=Vs.firestore(),Jr="admire-signage-external",Me=(s,e="INR",t=!1)=>new Intl.NumberFormat(e==="INR"?"en-IN":"en-US",{style:"currency",currency:e,maximumFractionDigits:t?1:0,notation:t?"compact":"standard"}).format(s),S0=()=>Math.random().toString(36).substr(2,9).toUpperCase(),xo=(s,e,t,r)=>{if(!s||!e)return null;const{screenQty:a,targetWidth:l,targetHeight:u,unit:p,selectedIndoor:f,assemblyMode:y,selectedPitch:v,selectedModuleId:E,selectedCabinetId:T,selectedCardId:C,selectedSMPSId:U,selectedProcId:H,sizingMode:J,readyId:K,margin:ne,extras:oe,overrides:pe,extraComponents:F,pricingMode:ie,targetSellPrice:N,commercials:R,terms:D}=s,w=Number(a||1),k=ve=>{if(!ve)return 0;const Ve=Number(ve.price||0),Je=Number(ve.carriage||0),ss=Ve+Je;return ve.currency==="USD"?ss*r:ss};let j,A,Ce,Pe,Z,me=0;if(y==="assembled"){if(j=e.find(ve=>ve.id===E),A=e.find(ve=>ve.id===T),Ce=e.find(ve=>ve.id===C),Pe=e.find(ve=>ve.id===U),Z=e.find(ve=>ve.id===H),!j||!A)return null}else{const ve=e.find(Ve=>Ve.id===K);if(Z=e.find(Ve=>Ve.id===H),!ve)return null;j=ve,A=ve}const Ee=p==="m"?l*1e3:l*304.8,Ne=p==="m"?u*1e3:u*304.8,Le=Ee/A.width,V=Ne/A.height;let O,B;J==="up"?(O=Math.ceil(Le),B=Math.ceil(V)):J==="down"?(O=Math.max(1,Math.floor(Le)),B=Math.max(1,Math.floor(V))):(O=Math.max(1,Math.round(Le)),B=Math.max(1,Math.round(V)));const te=O*A.width,de=B*A.height,fe=O*B,_e=te*de/92903;let it=[];if(y==="assembled"){const ve=Math.floor(A.width/j.width)*Math.floor(A.height/j.height);me=fe*ve,it=[{id:"modules",inventoryId:E,name:"Modules",spec:`${j.brand} ${j.model}`,qty:me,unit:k(j),total:me*k(j),type:"led"},{id:"cabinets",inventoryId:T,name:"Cabinets",spec:`${A.brand} ${A.model}`,qty:fe,unit:k(A),total:fe*k(A),type:"led"},{id:"cards",inventoryId:C,name:"Cards",spec:Ce?Ce.brand:"-",qty:fe,unit:k(Ce),total:fe*k(Ce),type:"led"},{id:"smps",inventoryId:U,name:"SMPS",spec:Pe?Pe.brand:"-",qty:fe,unit:k(Pe),total:fe*k(Pe),type:"led"}]}else it=[{id:"ready",inventoryId:K,name:"LED Panels (Ready)",spec:`${A.brand} ${A.model}`,qty:fe,unit:k(A),total:fe*k(A),type:"led"}],me=fe;it.push({id:"processor",inventoryId:H,name:"Processor",spec:Z?Z.brand:"Select Processor",qty:1,unit:Z?k(Z):0,total:Z?k(Z):0,type:"service"}),F&&F.length>0&&F.forEach(ve=>{const Ve=e.find(Je=>Je.id===ve.componentId);if(Ve){const Je=ve.type==="cabinet"?ve.qty*fe:ve.qty;it.push({id:ve.id,inventoryId:ve.componentId,name:`Extra: ${Ve.type}`,spec:`${Ve.brand} ${Ve.model}`,qty:Je,unit:k(Ve),total:Je*k(Ve),type:Ve.type==="processor"?"service":"led"})}else it.push({id:ve.id,inventoryId:"",name:"Extra Component",spec:"Select Item...",qty:ve.qty||1,unit:0,total:0,type:"led"})});const tt=it.map(ve=>{if(pe&&pe[ve.id]){const Ve=pe[ve.id],Je=Ve.qty!==void 0&&Ve.qty!==""?Number(Ve.qty):ve.qty,ss=Ve.rate!==void 0&&Ve.rate!==""?Number(Ve.rate):ve.unit;return{...ve,qty:Je,unit:ss,total:Je*ss,isOverridden:!0}}return ve}),ar=tt.filter(ve=>ve.type==="led").reduce((ve,Ve)=>ve+Ve.total,0),Bt=tt.filter(ve=>ve.type!=="led").reduce((ve,Ve)=>ve+Ve.total,0),bn={};let Er=0,on=0;Array.isArray(oe)&&oe.forEach(ve=>{let Ve=0;const Je=ar;ve.type==="pct"?Ve=Je*(Number(ve.val)/100):Ve=Number(ve.val),bn[ve.id]=Ve,Er+=Ve});const Qn=R?.installation||{cost:0,costType:"abs"};let Cn=0;Qn.costType==="pct"?Cn=Bt*(Number(Qn.cost)/100):(Qn.unit||"sqft")==="sqft"?Cn=Number(Qn.cost)*_e:Cn=Number(Qn.cost),bn.install=Cn,on+=Cn;const Kn=R?.structure||{cost:0,costType:"abs"};let $n=0;Kn.costType==="pct"?$n=Bt*(Number(Kn.cost)/100):(Kn.unit||"sqft")==="sqft"?$n=Number(Kn.cost)*_e:$n=Number(Kn.cost),bn.structure=$n,on+=$n;const $e=ar+Er,xt=Bt+on,kn=$e+xt,Y=kn*w,Ie=R||{processor:{val:0},installation:{val:0},structure:{val:0}};let qe=0;if(Ie.processor.unit==="unit"){const ve=tt.find(Je=>Je.id==="processor"),Ve=ve?ve.qty:1;qe=Number(Ie.processor.val)*Ve*w}else qe=Number(Ie.processor.val)*w;let ce=0;Ie.installation.unit==="sqft"?ce=Number(Ie.installation.val)*_e*w:ce=Number(Ie.installation.val)*w;let kt=0;Ie.structure.unit==="sqft"?kt=Number(Ie.structure.val)*_e*w:kt=Number(Ie.structure.val)*w;const vn=qe+ce+kt;let $t=0,Da=ne;const qs=ie||"margin";if(qs==="margin")$t=$e*(1+ne/100);else{const ve=Number(N||0);qs==="screen"?$t=ve:qs==="sqft"?$t=ve*_e:qs==="sqm"&&($t=ve*(_e/10.7639)),$e>0?Da=($t-$e)/$e*100:Da=0}const Lr=$t*w+vn,Ln=Lr-Y;return{gridCols:O,gridRows:B,finalWidth:(te/1e3).toFixed(2),finalHeight:(de/1e3).toFixed(2),totalCabinets:fe,moduleType:j,cabinetType:A,processor:Z,breakdown:{qtyModules:me,ledOps:Er,serviceOps:on},detailedItems:tt,calculatedExtras:bn,costLEDPerScreen:$e,costServicesPerScreen:xt,costPerScreen:kn,totalProjectCost:Y,finalPrice:Lr,totalProjectSell:Lr,assemblyMode:y,screenQty:w,commercials:{sellProcTotal:qe,sellInstallTotal:ce,sellStructureTotal:kt},terms:D||{price:"Ex-works Mumbai",deliveryWeeks:10,payment:[]},matrix:{cost:{sqft:kn/_e,unit:kn,total:Y},margin:{sqft:Ln/w/_e,unit:Ln/w,total:Ln},sell:{sqft:Lr/w/_e,unit:Lr/w,total:Lr},led:{cost:$e,sell:$t,margin:$t-$e,marginPct:Da},sqft:{perScreen:_e,total:_e*w}}}},Dt={COMPANY:{NAME:"ADMIRE SIGN & DISPLAY PVT. LTD.",ADDRESS_1:"102, Priya Industrial Estate 4, K.T. Industrial Estate",ADDRESS_2:"Kherpada, Waliv, Vasai East, Mumbai - 401208",EMAIL:"info@admiresign.com",WEB:"www.admiresign.com"},DEFAULTS:{EXCHANGE_RATE:90,GST_RATE:18,DELIVERY_WEEKS:10,PRICE_BASIS:"Ex-works Mumbai",PAYMENT_TERMS:[{name:"Advance with PO",percent:60},{name:"Before dispatch",percent:30},{name:"After installation",percent:10}]},TEXT:{WARRANTY:"Against any manufacturing defect. Offsite support for troubleshooting. Client can sign up for Admires excellent AMC services for on-site support. Serious fault will be attended to by our technical team within 48-72 hours upon receipt of written complaints with pictures/videos of the fault. 2% Extra spares includes Modules, Power Supply, Receiver Card (if there are over 100 cabinets), Flat cables, 5V connectors, Power and Data Cable. Any damage to the screen due to force majure, natural disasters, electricity surge, earthing, accident, etc is not covered under the warranty. Power supplies damage due to power fluctuation will not be covered under warranty. Power supply will be under the direct warranty of the OEM supplier. If the repair requires additional components then these will be charged extra. Brightness control meter, Video Processor & Timer can be supplied at extra cost. Maintenance team visit in six months during warranty period.",SCOPE_STRUCTURE:"Foundation & Structure. Structural stability certificate from a consultant. For wall mounted outdoor screen, Client to ensure strong and solid brick wall, RCC beams and column base. For front access indoor screen, Client to ensure a strong base. Indoor Structures cannot be mounted on ACP Sheets, Gypsum boards etc. Scaffolding, Aluminium composite panelling if required. Personnel for troubleshooting training during the screen installation. Helpers for loading, unloading and installing the display at site.",SCOPE_ELEC:"Electricity 3 phase electric power near the site, not more than 5m from the site, before the commencement of work. Electrical distribution board within 5m from the screen. Conduited electrical cable. 4mm 2 core armored cable or 4mm 3 core cables, 32 ampere MCB, 1 switch board with 2 sockets. Good quality Stabiliser and timers. 1 Certified electrical engineer for all connections from power Main to the unit. Ventilation machineries such as Air Conditioners or Fans.",SCOPE_NET:"CAT 6 or Optic Fiber Data cable and its terminations. Data points near the screen. Space with power sockets for Video wall Controllers. Data source/AV room within 80 meters of the screen. Connections to be availed through CAT 6 cables duly terminated with RJ45. If the length is farther then Fiber optic converter will be required. Fiber optic converters, if required, will be charged extra. In case the fiber optic converter is required, single mode Fiber optic cable is to be provided by client from source point to the display, terminated as per specs with Patch Chords from the splicing unit to connect to screen.",SCOPE_SOFT:"3rd party Software for Content upload on screen will be provided by the controller card supplier. Admire cannot provide regular updates and application stability.",SCOPE_PERM:"All permissions such as PTW, work permits & gate passes for workers, engineers and executives.",SCOPE_PC:"As per specification, to be arranged by client.",VALIDITY:"30 days."}},a3=({user:s,transactions:e=[]})=>{const[t,r]=Pt.useState([]),[a,l]=Pt.useState(null),[u,p]=Pt.useState(!1),[f,y]=Pt.useState({type:"module",brand:"",model:"",vendor:"",pitch:"",width:"",height:"",price:"",carriage:"",currency:"INR",indoor:!0,brightness:"",refreshRate:"",ledType:"",lampMake:"",material:"",weight:"",avgPower:"",maxPower:"",contrast:"",viewAngleH:"",viewAngleV:"",ipFront:"",ipBack:"",ports:"",amps:""}),[v,E]=Pt.useState(!0),[T,C]=Pt.useState(!1),[U,H]=Pt.useState(null),[J,K]=Pt.useState({name:"",qty:""});Pt.useEffect(()=>{if(!s||!_r)return;const w=_r.collection("artifacts").doc(Jr).collection("public").doc("data").collection("inventory").onSnapshot(k=>{const j=k.docs.map(A=>({id:A.id,...A.data()}));r(j),E(!1)},k=>console.error(k));return()=>w()},[s]);const ne=async()=>{if(f.type==="module"){if(!f.pitch||!f.brand||!f.model||!f.price||!f.width||!f.height||!f.weight||!f.avgPower||!f.maxPower||!f.brightness||!f.refreshRate||!f.contrast||!f.viewAngleH||!f.viewAngleV||!f.ipFront||!f.ipBack)return alert("Please fill all compulsory (*) fields.")}else if(f.type==="cabinet"){if(!f.brand||!f.material||!f.model||!f.price||!f.width||!f.height)return alert("Please fill all compulsory (*) fields.")}else if(f.type==="card"||f.type==="processor"){if(!f.brand||!f.model||!f.price||!f.vendor)return alert("Please fill all compulsory (*) fields.")}else if(f.type==="smps"){if(!f.brand||!f.model||!f.price||!f.vendor||!f.amps)return alert("Please fill all compulsory (*) fields.")}else if(f.type==="ready"){if(!f.pitch||!f.brand||!f.model||!f.price||!f.material||!f.width||!f.height||!f.weight||!f.avgPower||!f.maxPower||!f.brightness||!f.refreshRate||!f.contrast||!f.viewAngleH||!f.viewAngleV||!f.ipFront||!f.ipBack)return alert("Please fill all compulsory (*) fields.")}else if(!f.brand||!f.model)return alert("Brand and Model are required");try{const w=_r.collection("artifacts").doc(Jr).collection("public").doc("data").collection("inventory"),k={...f,width:Number(f.width),height:Number(f.height),price:Number(f.price),carriage:Number(f.carriage||0),pitch:Number(f.pitch),currency:f.currency||"INR",indoor:f.indoor==="true"||f.indoor===!0,material:f.material||"",weight:f.weight?Number(f.weight):0,avgPower:f.avgPower?Number(f.avgPower):0,maxPower:f.maxPower?Number(f.maxPower):0,brightness:f.brightness?parseInt(f.brightness):0,refreshRate:f.refreshRate?parseInt(f.refreshRate):0,viewAngleH:f.viewAngleH?parseInt(f.viewAngleH):0,viewAngleV:f.viewAngleV?parseInt(f.viewAngleV):0,ipFront:f.ipFront?parseInt(f.ipFront):0,ipBack:f.ipBack?parseInt(f.ipBack):0,ports:f.ports?parseInt(f.ports):0,amps:f.amps?Number(f.amps):0,updatedAt:new Date};a?(await w.doc(a).update(k),l(null),p(!1)):(await w.add({...k,createdAt:new Date}),y({type:f.type,brand:"",model:"",vendor:"",pitch:"",width:"",height:"",price:"",carriage:"",currency:"INR",indoor:!0,brightness:"",refreshRate:"",ledType:"",lampMake:"",material:"",weight:"",avgPower:"",maxPower:"",contrast:"",viewAngleH:"",viewAngleV:"",ipFront:"",ipBack:"",ports:"",amps:""}),alert("Item Added!"))}catch(w){console.error(w)}},oe=w=>{y({...w,vendor:w.vendor||"",currency:w.currency||"INR",carriage:w.carriage||0}),l(w.id),p(!0),window.scrollTo({top:0,behavior:"smooth"})},pe=()=>{l(null),p(!1),y({type:"module",brand:"",model:"",vendor:"",pitch:"",width:"",height:"",price:"",carriage:"",currency:"INR",indoor:!0,brightness:"",refreshRate:"",ledType:"",lampMake:"",material:"",weight:"",avgPower:"",maxPower:"",contrast:"",viewAngleH:"",viewAngleV:"",ipFront:"",ipBack:"",ports:"",amps:""})},F=async w=>{confirm("Delete this item?")&&await _r.collection("artifacts").doc(Jr).collection("public").doc("data").collection("inventory").doc(w).delete()},ie=w=>{H(w),K({name:"",qty:""}),C(!0)},N=w=>{const k=e.filter(A=>A.itemId===w),j={};return k.forEach(A=>{const Ce=A.batch||"Unbatched",Pe=A.type==="in"?Number(A.qty):-Number(A.qty);j[Ce]||(j[Ce]=0),j[Ce]+=Pe}),Object.entries(j).map(([A,Ce])=>({name:A,qty:Ce})).filter(A=>A.qty!==0).sort((A,Ce)=>Ce.qty-A.qty)},R=async()=>{if(!(!J.name||!J.qty))try{await _r.collection("artifacts").doc(Jr).collection("public").doc("data").collection("transactions").add({date:new Date().toISOString().split("T")[0],type:"in",itemId:U.id,qty:Number(J.qty),batch:J.name,remarks:"Added via Inventory Manager",createdAt:new Date}),K({name:"",qty:""})}catch(w){console.error(w)}},D=[...t].sort((w,k)=>{const j=(w.type||"").toLowerCase(),A=(k.type||"").toLowerCase();if(j<A)return-1;if(j>A)return 1;const Ce=(w.brand+" "+w.model).toLowerCase(),Pe=(k.brand+" "+k.model).toLowerCase();return Ce<Pe?-1:Ce>Pe?1:0});return h.jsxs("div",{className:"p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-slate-800 dark:text-white",children:[h.jsx(rI,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})," Components Management"]}),!u&&h.jsxs("button",{onClick:()=>p(!0),className:"bg-teal-600 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-teal-700 transition-colors",children:[h.jsx(ia,{size:16})," Add New Component"]})]}),u&&h.jsxs("div",{className:`grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 p-6 rounded-lg transition-colors border shadow-sm ${a?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700/50 border-slate-200 dark:border-slate-600"}`,children:[h.jsxs("div",{className:"col-span-2 md:col-span-4 flex justify-between items-center mb-2 pb-2 border-b border-slate-200 dark:border-slate-600",children:[h.jsx("h3",{className:"text-sm font-bold uppercase text-slate-500 dark:text-slate-400",children:a?"Editing Item":"Add New Item"}),h.jsxs("button",{onClick:pe,className:"text-xs text-slate-500 hover:text-red-500 flex items-center gap-1",children:[h.jsx(nm,{size:14})," Close"]})]}),h.jsxs("select",{className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.type,onChange:w=>y({...f,type:w.target.value}),children:[h.jsx("option",{value:"module",children:"Module"}),h.jsx("option",{value:"cabinet",children:"Cabinet"}),h.jsx("option",{value:"ready",children:"Ready Unit"}),h.jsx("option",{value:"card",children:"Receiving Card"}),h.jsx("option",{value:"smps",children:"SMPS"}),h.jsx("option",{value:"processor",children:"Processor"})]}),(f.type==="module"||f.type==="ready")&&h.jsxs(h.Fragment,{children:[h.jsx("input",{placeholder:"Pitch*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white border-teal-500 ring-1 ring-teal-500",value:f.pitch,onChange:w=>y({...f,pitch:w.target.value})}),h.jsxs("select",{className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white border-teal-500 ring-1 ring-teal-500",value:f.indoor,onChange:w=>y({...f,indoor:w.target.value}),children:[h.jsx("option",{value:"true",children:"Indoor"}),h.jsx("option",{value:"false",children:"Outdoor"})]})]}),h.jsx("input",{placeholder:f.type==="module"||f.type==="ready"||f.type==="cabinet"||f.type==="card"||f.type==="processor"||f.type==="smps"?"Brand*":"Brand",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.brand,onChange:w=>y({...f,brand:w.target.value})}),h.jsx("input",{placeholder:f.type==="module"||f.type==="ready"||f.type==="cabinet"||f.type==="card"||f.type==="processor"||f.type==="psu"?"Model/SKU*":"Model",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.model,onChange:w=>y({...f,model:w.target.value})}),h.jsxs("div",{className:"flex gap-2 items-center col-span-2 md:col-span-1",children:[h.jsxs("div",{className:"flex-1 min-w-[100px]",title:"Base Price",children:[h.jsx("input",{placeholder:"Base Rate*",type:"number",className:"p-2 w-full border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.price,onChange:w=>y({...f,price:w.target.value})}),h.jsx("div",{className:"text-[9px] text-slate-400 mt-0.5 ml-1",children:"BASE RATE*"})]}),h.jsx("span",{className:"text-slate-400 font-bold mb-3",children:"+"}),h.jsxs("div",{className:"flex-1 min-w-[80px]",title:"Carriage Inwards",children:[h.jsx("input",{placeholder:"Carriage",type:"number",className:"p-2 w-full border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.carriage,onChange:w=>y({...f,carriage:w.target.value})}),h.jsx("div",{className:"text-[9px] text-slate-400 mt-0.5 ml-1",children:"CARRIAGE"})]}),h.jsx("div",{className:"flex-none mb-3",children:h.jsxs("select",{className:"p-2 border rounded bg-slate-100 dark:bg-slate-600 dark:border-slate-600 dark:text-white",value:f.currency,onChange:w=>y({...f,currency:w.target.value}),children:[h.jsx("option",{value:"INR",children:"INR"}),h.jsx("option",{value:"USD",children:"USD"})]})})]}),f.type!=="cabinet"&&h.jsx("input",{placeholder:f.type==="card"||f.type==="processor"||f.type==="smps"?"Vendor*":"Vendor",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.vendor,onChange:w=>y({...f,vendor:w.target.value})}),(f.type==="card"||f.type==="processor")&&h.jsx("input",{placeholder:"Ports (Optional)",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.ports,onChange:w=>y({...f,ports:w.target.value})}),f.type==="smps"&&h.jsx("input",{placeholder:"Capacity (Amps)*",type:"number",step:"0.1",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.amps,onChange:w=>y({...f,amps:w.target.value})}),f.type==="module"&&h.jsxs(h.Fragment,{children:[h.jsx("input",{placeholder:"LED Type",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.ledType,onChange:w=>y({...f,ledType:w.target.value})}),h.jsx("input",{placeholder:"Lamp Make",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.lampMake,onChange:w=>y({...f,lampMake:w.target.value})}),h.jsx("input",{placeholder:"Width (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.width,onChange:w=>y({...f,width:w.target.value})}),h.jsx("input",{placeholder:"Height (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.height,onChange:w=>y({...f,height:w.target.value})}),h.jsx("input",{placeholder:"Weight/sqm (kg)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.weight,onChange:w=>y({...f,weight:w.target.value})}),h.jsx("input",{placeholder:"Avg Power/sqm (W)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.avgPower,onChange:w=>y({...f,avgPower:w.target.value})}),h.jsx("input",{placeholder:"Max Power/sqm (W)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.maxPower,onChange:w=>y({...f,maxPower:w.target.value})}),h.jsx("input",{placeholder:"Brightness (nits)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.brightness,onChange:w=>y({...f,brightness:w.target.value})}),h.jsx("input",{placeholder:"Refresh Rate*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.refreshRate,onChange:w=>y({...f,refreshRate:w.target.value})}),h.jsx("input",{placeholder:"Contrast* (e.g. 5000:1)",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.contrast,onChange:w=>y({...f,contrast:w.target.value})}),h.jsx("input",{placeholder:"Viewing Angle (H)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.viewAngleH,onChange:w=>y({...f,viewAngleH:w.target.value})}),h.jsx("input",{placeholder:"Viewing Angle (V)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.viewAngleV,onChange:w=>y({...f,viewAngleV:w.target.value})}),h.jsx("input",{placeholder:"IP Protection (Front)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.ipFront,onChange:w=>y({...f,ipFront:w.target.value})}),h.jsx("input",{placeholder:"IP Protection (Back)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.ipBack,onChange:w=>y({...f,ipBack:w.target.value})})]}),f.type==="cabinet"&&h.jsxs(h.Fragment,{children:[h.jsx("input",{placeholder:"Material*",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.material,onChange:w=>y({...f,material:w.target.value})}),h.jsxs("select",{className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.indoor,onChange:w=>y({...f,indoor:w.target.value}),children:[h.jsx("option",{value:"true",children:"Indoor"}),h.jsx("option",{value:"false",children:"Outdoor"})]}),h.jsx("input",{placeholder:"Width (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.width,onChange:w=>y({...f,width:w.target.value})}),h.jsx("input",{placeholder:"Height (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.height,onChange:w=>y({...f,height:w.target.value})}),h.jsx("input",{placeholder:"Weight (kg)",type:"number",step:"1",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.weight,onChange:w=>y({...f,weight:w.target.value})})]}),f.type==="ready"&&h.jsxs(h.Fragment,{children:[h.jsx("input",{placeholder:"Cabinet Material*",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.material,onChange:w=>y({...f,material:w.target.value})}),h.jsx("input",{placeholder:"LED Type",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.ledType,onChange:w=>y({...f,ledType:w.target.value})}),h.jsx("input",{placeholder:"Lamp Make",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.lampMake,onChange:w=>y({...f,lampMake:w.target.value})}),h.jsx("input",{placeholder:"Width (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.width,onChange:w=>y({...f,width:w.target.value})}),h.jsx("input",{placeholder:"Height (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.height,onChange:w=>y({...f,height:w.target.value})}),h.jsx("input",{placeholder:"Weight/sqm (kg)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.weight,onChange:w=>y({...f,weight:w.target.value})}),h.jsx("input",{placeholder:"Avg Power/sqm (W)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.avgPower,onChange:w=>y({...f,avgPower:w.target.value})}),h.jsx("input",{placeholder:"Max Power/sqm (W)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.maxPower,onChange:w=>y({...f,maxPower:w.target.value})}),h.jsx("input",{placeholder:"Brightness (nits)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.brightness,onChange:w=>y({...f,brightness:w.target.value})}),h.jsx("input",{placeholder:"Refresh Rate*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.refreshRate,onChange:w=>y({...f,refreshRate:w.target.value})}),h.jsx("input",{placeholder:"Contrast* (e.g. 5000:1)",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.contrast,onChange:w=>y({...f,contrast:w.target.value})}),h.jsx("input",{placeholder:"Viewing Angle (H)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.viewAngleH,onChange:w=>y({...f,viewAngleH:w.target.value})}),h.jsx("input",{placeholder:"Viewing Angle (V)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.viewAngleV,onChange:w=>y({...f,viewAngleV:w.target.value})}),h.jsx("input",{placeholder:"IP Protection (Front)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.ipFront,onChange:w=>y({...f,ipFront:w.target.value})}),h.jsx("input",{placeholder:"IP Protection (Back)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:f.ipBack,onChange:w=>y({...f,ipBack:w.target.value})})]}),h.jsxs("button",{onClick:ne,className:`px-4 py-2 rounded text-white flex items-center justify-center gap-2 hover:opacity-90 transition ${a?"bg-amber-600":"bg-teal-600"} col-span-2 md:col-span-1`,children:[a?h.jsx(Eo,{size:16}):h.jsx(ia,{size:16}),a?"Update Item":"Add Item"]})]}),h.jsxs("div",{className:"mt-6",children:[h.jsx("div",{className:"md:hidden space-y-4",children:D.map(w=>{const k=e.filter(j=>j.itemId===w.id).reduce((j,A)=>j+(A.type==="in"?Number(A.qty):-Number(A.qty)),0);return h.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm relative overflow-hidden",children:[h.jsx("div",{className:`absolute top-0 right-0 px-3 py-1 rounded-bl-lg text-[10px] font-bold uppercase tracking-wider ${w.type==="module"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300"}`,children:w.type}),h.jsxs("div",{className:"pr-16 mb-3",children:[h.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:[w.brand," ",w.model]}),w.vendor&&h.jsx("div",{className:"text-xs text-teal-600 font-medium",children:w.vendor})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-xs text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg",children:[h.jsxs("div",{children:[h.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Specs"}),w.type==="module"?h.jsxs("span",{children:["P",w.pitch," ",w.indoor?"In":"Out","  ",w.width,"x",w.height]}):h.jsx("span",{children:w.width?`${w.width}x${w.height}`:"Standard"})]}),h.jsxs("div",{children:[h.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Stock"}),h.jsx("span",{className:`font-bold text-sm ${k<0?"text-red-500":"text-slate-700 dark:text-slate-200"}`,children:k})]}),h.jsxs("div",{className:"col-span-2 border-t border-slate-200 dark:border-slate-600 pt-2 mt-1",children:[h.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Landed Cost"}),h.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:Me((w.price||0)+(w.carriage||0),w.currency||"INR")})]})]}),h.jsxs("div",{className:"flex gap-2",children:[w.type==="module"&&h.jsxs("button",{onClick:()=>ie(w),className:"flex-1 py-2 bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 rounded-lg text-xs font-bold flex justify-center items-center gap-2 hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors",children:[h.jsx(HE,{size:14})," Batches"]}),h.jsxs("button",{onClick:()=>oe(w),className:"flex-1 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg text-xs font-bold flex justify-center items-center gap-2 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[h.jsx(Eo,{size:14})," Edit"]}),h.jsxs("button",{onClick:()=>F(w.id),className:"flex-1 py-2 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-xs font-bold flex justify-center items-center gap-2 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:[h.jsx(ui,{size:14})," Delete"]})]})]},w.id)})}),h.jsx("div",{className:"hidden md:block overflow-x-auto rounded border border-slate-200 dark:border-slate-700",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 uppercase",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3",children:"Type"}),h.jsx("th",{className:"px-4 py-3",children:"Component"}),h.jsx("th",{className:"px-4 py-3",children:"Specs"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"Stock"}),h.jsx("th",{className:"px-4 py-3",children:"Landed Cost"}),h.jsx("th",{className:"px-4 py-3 text-right",children:"Action"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:D.map(w=>h.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-700/50 ${a===w.id?"bg-amber-50 dark:bg-amber-900/20":""}`,children:[h.jsx("td",{className:"px-4 py-3 capitalize",children:h.jsx("span",{className:`px-2 py-1 rounded-full text-xs capitalize ${w.type==="module"?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":w.type==="cabinet"?"bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-300":w.type==="card"?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-300":w.type==="smps"?"bg-rose-100 dark:bg-rose-900 text-rose-700 dark:text-rose-300":w.type==="processor"?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300":w.type==="ready"?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:w.type==="smps"?"SMPS":w.type})}),h.jsxs("td",{className:"px-4 py-3 dark:text-slate-200",children:[h.jsxs("div",{className:"font-medium",children:[w.brand," ",w.model]}),w.vendor&&h.jsx("div",{className:"text-[10px] text-teal-600 dark:text-teal-400 mt-0.5",children:w.vendor})]}),h.jsxs("td",{className:"px-4 py-3 text-slate-500 dark:text-slate-400 text-xs",children:[w.type==="module"&&h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("span",{children:["P",w.pitch," ",w.indoor?"Indoor":"Outdoor"]}),h.jsxs("span",{children:[w.width,"x",w.height,"mm"]})]}),w.type==="cabinet"&&h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{children:w.material}),h.jsxs("span",{children:[w.width,"x",w.height,"mm"]}),h.jsx("span",{children:w.indoor?"Indoor":"Outdoor"})]}),(w.type==="card"||w.type==="processor")&&h.jsx("span",{children:w.ports?`${w.ports} Ports`:""}),w.type==="smps"&&h.jsx("span",{children:w.amps?`${w.amps} Amps`:""}),w.type==="ready"&&h.jsxs("span",{children:[w.width,"x",w.height,"mm P",w.pitch]})]}),h.jsx("td",{className:"px-4 py-3 font-bold dark:text-slate-200 text-teal-600 text-center",children:e.filter(k=>k.itemId===w.id).reduce((k,j)=>k+(j.type==="in"?Number(j.qty):-Number(j.qty)),0)}),h.jsx("td",{className:"px-4 py-3 dark:text-slate-200",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"font-semibold",children:Me((w.price||0)+(w.carriage||0),w.currency||"INR")}),w.carriage>0&&h.jsxs("span",{className:"text-[10px] text-slate-400",children:["Base: ",w.price," + Carr: ",w.carriage]})]})}),h.jsxs("td",{className:"px-4 py-3 flex gap-2 justify-end",children:[w.type==="module"&&h.jsx("button",{onClick:()=>ie(w),title:"Manage Batches",className:"text-purple-500 hover:text-purple-700 p-1 bg-purple-50 dark:bg-purple-900/30 rounded",children:h.jsx(HE,{size:14})}),h.jsx("button",{onClick:()=>oe(w),className:"text-blue-500 hover:text-blue-700 p-1 bg-blue-50 dark:bg-blue-900/30 rounded",children:h.jsx(Eo,{size:14})}),h.jsx("button",{onClick:()=>F(w.id),className:"text-red-400 hover:text-red-600 p-1 bg-red-50 dark:bg-red-900/30 rounded",children:h.jsx(ui,{size:14})})]})]},w.id))})]})}),t.length===0&&!v&&h.jsx("div",{className:"text-center py-12 text-slate-400 bg-white dark:bg-slate-800",children:"No items found."})]}),T&&U&&h.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex justify-center items-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-800",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Batch Management"}),h.jsxs("p",{className:"text-xs text-slate-500",children:[U.brand," ",U.model]})]}),h.jsx("button",{onClick:()=>C(!1),className:"text-slate-400 hover:text-slate-600",children:h.jsx(nm,{size:20})})]}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex gap-2 mb-6",children:[h.jsx("input",{placeholder:"Batch # (e.g. A1)",className:"flex-1 p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-700 dark:text-white",value:J.name,onChange:w=>K({...J,name:w.target.value})}),h.jsx("input",{type:"number",placeholder:"Qty",className:"w-24 p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-700 dark:text-white",value:J.qty,onChange:w=>K({...J,qty:w.target.value})}),h.jsx("button",{onClick:R,className:"bg-teal-600 hover:bg-teal-500 text-white p-2 rounded",children:h.jsx(ia,{size:18})})]}),h.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800 overflow-hidden",children:[h.jsxs("div",{className:"grid grid-cols-2 bg-slate-100 dark:bg-slate-800 p-2 text-xs font-bold text-slate-500 uppercase",children:[h.jsx("div",{children:"Batch No"}),h.jsx("div",{className:"text-right",children:"Current Balance"})]}),h.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[N(U.id).length===0&&h.jsx("div",{className:"p-4 text-center text-xs text-slate-400",children:"No active batches found in ledger."}),N(U.id).map((w,k)=>h.jsxs("div",{className:"grid grid-cols-2 p-2 border-b border-slate-100 dark:border-slate-700/50 last:border-0 text-sm items-center",children:[h.jsx("div",{className:"font-medium text-slate-700 dark:text-slate-200",children:w.name==="Unbatched"?h.jsx("span",{className:"italic text-slate-400",children:"Unbatched Stock"}):w.name}),h.jsx("div",{className:"text-right font-bold text-slate-900 dark:text-white",children:w.qty})]},k))]}),h.jsxs("div",{className:"p-3 bg-teal-50 dark:bg-teal-900/20 flex justify-between items-center border-t border-teal-100 dark:border-teal-800",children:[h.jsx("span",{className:"text-xs font-bold text-teal-800 dark:text-teal-400 uppercase",children:"Total in Batches"}),h.jsx("span",{className:"text-sm font-bold text-teal-700 dark:text-teal-300",children:N(U.id).reduce((w,k)=>w+k.qty,0)})]})]})]})]})})]})},o3=({user:s,inventory:e=[],transactions:t=[]})=>{const[r,a]=mn.useState({date:new Date().toISOString().split("T")[0],type:"in",itemId:"",qty:"",remarks:"",batch:""}),[l,u]=mn.useState(null),p=async()=>{if(!r.itemId||!r.qty)return alert("Select Item and Qty");try{const T=_r.collection("artifacts").doc(Jr).collection("public").doc("data").collection("transactions");l?(await T.doc(l).update({...r,qty:Number(r.qty),updatedAt:new Date}),u(null)):await T.add({...r,qty:Number(r.qty),createdAt:new Date}),a({date:new Date().toISOString().split("T")[0],type:"in",itemId:"",qty:"",remarks:"",batch:""})}catch(T){console.error(T)}},f=T=>{a({...T,qty:T.qty}),u(T.id),window.scrollTo({top:0,behavior:"smooth"})},y=()=>{u(null),a({date:new Date().toISOString().split("T")[0],type:"in",itemId:"",qty:"",remarks:"",batch:""})},v=async T=>{confirm("Delete record?")&&await _r.collection("artifacts").doc(Jr).collection("public").doc("data").collection("transactions").doc(T).delete()},E=[...t].sort((T,C)=>new Date(C.date)-new Date(T.date));return h.jsxs("div",{className:"p-4 md:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[h.jsx(dC,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"}),h.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Stock Ledger"})]}),h.jsxs("div",{className:`p-4 rounded-lg border mb-6 transition-colors ${l?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700/30 border-slate-200 dark:border-slate-700"}`,children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-xs font-bold uppercase text-slate-500 dark:text-slate-400",children:l?"Edit Transaction":"New Transaction"}),l&&h.jsxs("button",{onClick:y,className:"text-xs text-red-500 flex items-center gap-1",children:[h.jsx(nm,{size:14})," Cancel"]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Date & Action"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"date",value:r.date,onChange:T=>a({...r,date:T.target.value}),className:"flex-1 p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white"}),h.jsxs("div",{className:"flex rounded overflow-hidden border border-slate-200 dark:border-slate-600",children:[h.jsx("button",{onClick:()=>a({...r,type:"in"}),className:`flex-1 py-2 text-xs font-bold transition-colors flex items-center justify-center gap-1 ${r.type==="in"?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-400":"bg-white dark:bg-slate-700 text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-600"}`,children:"+ STOCK IN"}),h.jsx("button",{onClick:()=>a({...r,type:"out"}),className:`flex-1 py-2 text-xs font-bold transition-colors flex items-center justify-center gap-1 ${r.type==="out"?"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-400":"bg-white dark:bg-slate-700 text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-600"}`,children:"- STOCK OUT"})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Component"}),h.jsxs("select",{value:r.itemId,onChange:T=>a({...r,itemId:T.target.value}),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white",children:[h.jsx("option",{value:"",children:"Select Item..."}),e.sort((T,C)=>(T.brand+" "+T.model).localeCompare(C.brand+" "+C.model)).map(T=>h.jsxs("option",{value:T.id,children:[T.brand," ",T.model," (",T.type,")"]},T.id))]}),e.find(T=>T.id===r.itemId)?.type==="module"&&h.jsx("input",{type:"text",placeholder:"Batch No. (e.g. BATCH-A)",value:r.batch||"",onChange:T=>a({...r,batch:T.target.value}),className:"w-full mt-2 p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white font-bold text-purple-600 border-purple-200 focus:border-purple-500 focus:ring-purple-500"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Quantity"}),h.jsx("input",{type:"number",placeholder:"Qty",value:r.qty,onChange:T=>a({...r,qty:T.target.value}),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Location / Source"}),h.jsx("input",{type:"text",placeholder:"Source/Loc",value:r.remarks,onChange:T=>a({...r,remarks:T.target.value}),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white"})]})]}),h.jsx("button",{onClick:p,className:`w-full md:w-auto text-white px-6 py-2 rounded-lg font-bold text-sm transition-colors shadow-sm ${l?"bg-amber-600 hover:bg-amber-700":"bg-teal-600 hover:bg-teal-700"}`,children:l?"Update Transaction":"Add Transaction"})]}),h.jsxs("div",{className:"mt-8",children:[h.jsx("h3",{className:"text-sm font-bold uppercase text-slate-500 dark:text-slate-400 mb-4",children:"Transaction History"}),h.jsxs("div",{className:"md:hidden space-y-3",children:[E.map(T=>{const C=e.find(U=>U.id===T.itemId)||{};return h.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold uppercase ${T.type==="in"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:T.type==="in"?"IN":"OUT"}),h.jsx("span",{className:"text-xs text-slate-400",children:new Date(T.date).toLocaleDateString()})]}),h.jsxs("div",{className:"font-bold text-slate-800 dark:text-white text-sm mb-0.5",children:[C.brand," ",C.model,T.batch&&h.jsx("span",{className:"ml-2 inline-block bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 text-[10px] px-1.5 py-0.5 rounded border border-purple-200 dark:border-purple-800",children:T.batch})]}),h.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:T.remarks||"-"})]}),h.jsxs("div",{className:"text-right pl-4 border-l border-slate-100 dark:border-slate-700 ml-2",children:[h.jsxs("span",{className:`block text-lg font-bold ${T.type==="in"?"text-green-600":"text-red-500"}`,children:[T.type==="in"?"+":"-",T.qty]}),h.jsxs("div",{className:"flex gap-3 justify-end mt-1",children:[h.jsx("button",{onClick:()=>f(T),className:"text-[10px] text-blue-500 hover:text-blue-700 underline",children:"Edit"}),h.jsx("button",{onClick:()=>v(T.id),className:"text-[10px] text-red-400 hover:text-red-600 underline",children:"Delete"})]})]})]},T.id)}),E.length===0&&h.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No transactions yet."})]}),h.jsxs("div",{className:"hidden md:block overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700",children:[h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-500 dark:text-slate-400 uppercase text-xs",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3",children:"Date"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"Type"}),h.jsx("th",{className:"px-4 py-3",children:"Component"}),h.jsx("th",{className:"px-4 py-3",children:"Specs"}),h.jsx("th",{className:"px-4 py-3 text-center",children:"Qty"}),h.jsx("th",{className:"px-4 py-3",children:"Loc/Source"}),h.jsx("th",{className:"px-4 py-3 text-right",children:"Action"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:E.map(T=>{const C=e.find(U=>U.id===T.itemId)||{};return h.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[h.jsx("td",{className:"px-4 py-3 whitespace-nowrap dark:text-slate-300",children:new Date(T.date).toLocaleDateString()}),h.jsx("td",{className:"px-4 py-3 text-center",children:h.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${T.type==="in"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:T.type.toUpperCase()})}),h.jsxs("td",{className:"px-4 py-3 font-medium dark:text-white",children:[C.brand," ",C.model,T.batch&&h.jsx("div",{className:"text-[10px] bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300 px-1.5 py-0.5 rounded w-fit mt-1 font-bold border border-purple-200 dark:border-purple-800",children:T.batch})]}),h.jsx("td",{className:"px-4 py-3 text-xs text-slate-500 dark:text-slate-400",children:C.type}),h.jsxs("td",{className:`px-4 py-3 text-center font-bold ${T.type==="in"?"text-green-600":"text-red-500"}`,children:[T.type==="in"?"+":"-",T.qty]}),h.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-slate-400 text-xs",children:T.remarks}),h.jsx("td",{className:"px-4 py-3 text-right",children:h.jsxs("div",{className:"flex justify-end gap-1",children:[h.jsx("button",{onClick:()=>f(T),className:"text-blue-400 hover:text-blue-600 p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",children:h.jsx(Eo,{size:14})}),h.jsx("button",{onClick:()=>v(T.id),className:"text-red-400 hover:text-red-600 p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:h.jsx(ui,{size:14})})]})})]},T.id)})})]}),E.length===0&&h.jsx("div",{className:"text-center py-8 text-slate-400",children:"No transactions recorded."})]})]})]})};var l3=tI();const yN=A0(l3),c3=({cols:s,rows:e,module:t,cabinet:r,unit:a})=>{if(!t||!r)return null;const l=r.width,u=r.height,p=l*s,f=u*e,y=v=>{const E=(v/1e3).toFixed(2)+"m",T=(v/304.8).toFixed(2)+"ft";return`${E} / ${T}`};return h.jsx("div",{className:"w-full flex flex-col bg-white rounded-lg border border-slate-200 overflow-hidden",children:h.jsx("div",{className:"w-full h-full min-h-[300px] p-10 flex items-center justify-center",children:h.jsxs("div",{className:"relative",style:{aspectRatio:`${p}/${f}`,width:"100%",maxHeight:"400px"},children:[h.jsxs("div",{className:"absolute -top-8 left-0 right-0 text-center text-xs font-bold text-slate-600 flex items-center justify-center gap-2",children:[h.jsx("div",{className:"h-[1px] flex-1 bg-slate-300"}),h.jsxs("span",{className:"bg-white px-1 whitespace-nowrap",children:[y(p)," (",s," Cabinets)"]}),h.jsx("div",{className:"h-[1px] flex-1 bg-slate-300"})]}),h.jsxs("div",{className:"absolute -left-8 top-0 bottom-0 text-center text-xs font-bold text-slate-600 flex flex-col items-center justify-center gap-2",style:{writingMode:"vertical-rl",transform:"rotate(180deg)"},children:[h.jsx("div",{className:"w-[1px] flex-1 bg-slate-300"}),h.jsxs("span",{className:"bg-white px-1 whitespace-nowrap",children:[y(f)," (",e," Cabinets)"]}),h.jsx("div",{className:"w-[1px] flex-1 bg-slate-300"})]}),h.jsx("div",{className:"w-full h-full grid bg-white border-2 border-slate-900 shadow-sm",style:{gridTemplateColumns:`repeat(${s}, 1fr)`,gridTemplateRows:`repeat(${e}, 1fr)`},children:Array.from({length:s*e}).map((v,E)=>h.jsx("div",{className:"border border-slate-300 relative"},E))})]})})})},_N=({data:s,allScreensData:e,currency:t="INR",exchangeRate:r,date:a})=>{const l=e&&e.calculations&&e.calculations.length>1,u=l?e.calculations:s?[s]:[];if(u.length===0)return null;const p=(l?e.clientName:s?.clientName)||"",f=(l?e.projectName:s?.projectName)||"",y=u[0].terms||{},v=l?e.totalProjectSell:s?.totalProjectSell,E=T=>h.jsxs("div",{className:`bg-white text-slate-800 font-sans text-xs ${T?"print-version-container p-0":"preview-version-container w-full h-full p-8"}`,children:[h.jsx("div",{className:"flex justify-between items-start mb-6 border-b-2 border-slate-800 pb-4",children:h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("img",{src:"/AdmireLED/logo.png",alt:"Company Logo",className:"h-16 w-auto object-contain"}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-slate-900 uppercase tracking-wide",children:Dt.COMPANY.NAME}),h.jsxs("div",{className:"text-[10px] text-slate-600 mt-1 space-y-0.5",children:[h.jsx("p",{children:Dt.COMPANY.ADDRESS_1}),h.jsx("p",{children:Dt.COMPANY.ADDRESS_2}),h.jsxs("p",{children:["Email: ",Dt.COMPANY.EMAIL," | Web: ",Dt.COMPANY.WEB]})]})]})]})}),u.map((C,U)=>{const{finalWidth:H,finalHeight:J,totalCabinets:K,moduleType:ne={},cabinetType:oe={},processor:pe,screenQty:F,totalProjectSell:ie,gridCols:N,gridRows:R,commercials:D}=C,w=Number(H),k=Number(J),j=w*k,A=j*10.7639,Ce=Number(ne.pitch||0),Pe=Ce>0?Math.round(w*1e3/Ce):0,Z=Ce>0?Math.round(k*1e3/Ce):0,me=(ne.weight||0)*j,Ee=(oe.weight||0)*K,Ne=me+Ee,Le=(ne.avgPower||0)*j,V=(ne.maxPower||0)*j,O=D||{sellProcTotal:0,sellInstallTotal:0,sellStructureTotal:0},B=ie/(F||1),te=(O.sellProcTotal||0)/(F||1),de=(O.sellInstallTotal||0)/(F||1),fe=(O.sellStructureTotal||0)/(F||1),_e=B-te-de-fe,it=_e*.02,ar=[{name:"LED Panel",rate:_e-it},{name:"Processor",rate:te},{name:"Installation",rate:de},{name:"Spares (2%)",rate:it},{name:"Structure",rate:fe}].filter(Bt=>Bt.rate>0);return h.jsxs("div",{className:"mb-10 pb-6 border-b-2 border-slate-100 break-inside-avoid print-break-avoid",children:[l&&h.jsx("div",{className:"mb-4 pb-2 border-b border-teal-500",children:h.jsxs("h2",{className:"text-lg font-bold text-teal-800 uppercase",children:["Configuration #",U+1]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2",children:"Project Details"}),h.jsxs("div",{className:"grid grid-cols-3 gap-y-1 text-[11px]",children:[h.jsx("span",{className:"font-semibold text-slate-500",children:"Client:"})," ",h.jsx("span",{className:"col-span-2 font-bold",children:p}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Project:"})," ",h.jsx("span",{className:"col-span-2 font-bold",children:f}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Screen Size:"}),h.jsxs("span",{className:"col-span-2",children:[w,"m x ",k,"m ",h.jsxs("span",{className:"text-slate-400",children:["/ ",(w*3.28084).toFixed(2),"ft x ",(k*3.28084).toFixed(2),"ft"]})]}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Quantity:"})," ",h.jsxs("span",{className:"col-span-2",children:[F," Nos"]})]}),h.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mt-4 mb-2",children:"Module & Cabinet"}),h.jsxs("div",{className:"grid grid-cols-3 gap-y-1 text-[11px]",children:[h.jsx("span",{className:"font-semibold text-slate-500",children:"Module:"})," ",h.jsxs("span",{className:"col-span-2",children:[ne.brand," P",ne.pitch]}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Mod Size:"})," ",h.jsxs("span",{className:"col-span-2",children:[ne.width," x ",ne.height," mm"]}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Lamp:"})," ",h.jsx("span",{className:"col-span-2",children:ne.lampMake||"-"}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Cabinet:"})," ",h.jsx("span",{className:"col-span-2",children:oe.material||"Standard"}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Cab Size:"})," ",h.jsxs("span",{className:"col-span-2",children:[oe.width," x ",oe.height," mm"]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2",children:"Screen Specifications"}),h.jsxs("div",{className:"grid grid-cols-3 gap-y-1 text-[11px]",children:[h.jsx("span",{className:"font-semibold text-slate-500",children:"Resolution:"})," ",h.jsxs("span",{className:"col-span-2",children:[Pe," x ",Z," pixels"]}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Total Area:"})," ",h.jsxs("span",{className:"col-span-2",children:[A.toFixed(2)," Sq.ft / ",j.toFixed(2)," Sq.m"]}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Total Weight:"})," ",h.jsxs("span",{className:"col-span-2",children:[Ne.toFixed(1)," kg"]}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Avg Power:"})," ",h.jsxs("span",{className:"col-span-2",children:[Le.toFixed(0)," Watts"]}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Max Power:"})," ",h.jsxs("span",{className:"col-span-2",children:[V.toFixed(0)," Watts"]}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Brightness:"})," ",h.jsxs("span",{className:"col-span-2",children:[ne.brightness," nits"]}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Refresh Rate:"})," ",h.jsxs("span",{className:"col-span-2",children:[ne.refreshRate," Hz"]}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Controller:"})," ",h.jsx("span",{className:"col-span-2",children:pe?`${pe.brand} ${pe.model}`:"Standard"}),h.jsx("span",{className:"font-semibold text-slate-500",children:"Viewing:"})," ",h.jsxs("span",{className:"col-span-2",children:["H: ",ne.viewAngleH," / V: ",ne.viewAngleV,""]}),h.jsx("span",{className:"font-semibold text-slate-500",children:"IP Rating:"})," ",h.jsxs("span",{className:"col-span-2",children:["Front: IP",ne.ipFront," / Back: IP",ne.ipBack]})]})]})]}),h.jsxs("div",{className:"mb-2 break-inside-avoid print-break-avoid",children:[h.jsxs("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2 pb-1",children:["Commercial Proposal ",l?`(Config #${U+1})`:""]}),h.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-[11px]",children:[h.jsx("thead",{className:"bg-slate-800 text-white",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-2 border border-slate-600 text-left w-12",children:"#"}),h.jsx("th",{className:"p-2 border border-slate-600 text-left",children:"Item Description"}),h.jsx("th",{className:"p-2 border border-slate-600 text-right w-32",children:"Amount (1 Screen)"}),h.jsxs("th",{className:"p-2 border border-slate-600 text-right w-32",children:["Amount (",F," Screens)"]})]})}),h.jsxs("tbody",{children:[ar.map((Bt,bn)=>h.jsxs("tr",{children:[h.jsx("td",{className:"p-2 border border-slate-300 text-center",children:bn+1}),h.jsx("td",{className:"p-2 border border-slate-300 font-bold",children:Bt.name}),h.jsx("td",{className:"p-2 border border-slate-300 text-right",children:Me(Bt.rate,t)}),h.jsx("td",{className:"p-2 border border-slate-300 text-right font-bold",children:Me(Bt.rate*F,t)})]},bn)),h.jsxs("tr",{className:"bg-slate-100",children:[h.jsx("td",{colSpan:"3",className:"p-2 border border-slate-300 text-right font-bold uppercase",children:"Subtotal (Excl. GST)"}),h.jsx("td",{className:"p-2 border border-slate-300 text-right font-bold text-sm",children:Me(ie,t)})]})]})]})]})]},U)}),l&&h.jsx("div",{className:"mb-8 break-inside-avoid print-break-avoid",children:h.jsxs("div",{className:"bg-slate-800 text-white p-4 rounded-lg flex justify-between items-center shadow-lg",children:[h.jsx("div",{className:"text-lg font-bold uppercase tracking-wide",children:"Grand Total"}),h.jsxs("div",{className:"text-2xl font-bold",children:[Me(v,t)," ",h.jsx("span",{className:"text-xs font-normal opacity-70",children:"(Excl. GST)"})]})]})}),h.jsxs("div",{className:"mt-8 break-inside-avoid print-break-avoid",children:[h.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2 pb-1",children:"Terms & Conditions"}),h.jsx("div",{className:"text-[10px] text-slate-600 space-y-3",children:h.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-y-2 gap-x-4",children:[h.jsx("div",{className:"font-bold text-slate-800",children:"PRICE"}),h.jsx("div",{children:y.price}),h.jsx("div",{className:"font-bold text-slate-800",children:"PAYMENT"}),h.jsx("div",{children:(y.payment||[]).map((C,U)=>h.jsxs("span",{children:[C.percent,"% ",C.name,U<(y.payment||[]).length-1?", ":""]},U))}),h.jsx("div",{className:"font-bold text-slate-800",children:"DELIVERY"}),h.jsxs("div",{children:[y.deliveryWeeks," weeks"]}),h.jsx("div",{className:"font-bold text-slate-800",children:"GST"}),h.jsxs("div",{children:["Extra as applicable (currently ",Dt.DEFAULTS.GST_RATE,"%)"]}),h.jsx("div",{className:"font-bold text-slate-800",children:"WARRANTY"}),h.jsx("div",{className:"text-justify leading-snug",children:y.warranty||Dt.TEXT.WARRANTY})]})}),h.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mt-4 mb-2 pb-1",children:"Client's Scope"}),h.jsxs("div",{className:"text-[10px] text-slate-600 grid gap-y-2",children:[y.scope?.structure&&h.jsxs("div",{children:[h.jsx("span",{className:"font-bold text-slate-800 block",children:"Structure:"}),y.scope.structure]}),y.scope?.elec&&h.jsxs("div",{children:[h.jsx("span",{className:"font-bold text-slate-800 block",children:"Electricity:"}),y.scope.elec]}),y.scope?.net&&h.jsxs("div",{children:[h.jsx("span",{className:"font-bold text-slate-800 block",children:"Internet:"}),y.scope.net]}),y.scope?.soft&&h.jsxs("div",{children:[h.jsx("span",{className:"font-bold text-slate-800 block",children:"Software:"}),y.scope.soft]}),y.scope?.perm&&h.jsxs("div",{children:[h.jsx("span",{className:"font-bold text-slate-800 block",children:"Permissions:"}),y.scope.perm]}),y.scope?.pc&&h.jsxs("div",{children:[h.jsx("span",{className:"font-bold text-slate-800 block",children:"Computer:"}),y.scope.pc]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-bold text-slate-800 block",children:"Validity:"}),y.validity||Dt.TEXT.VALIDITY]})]}),h.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-200 flex justify-between items-end",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"h-12 mb-2"}),h.jsx("p",{className:"text-[10px] font-bold border-t border-slate-400 px-4 pt-1",children:"Client Acceptance"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"h-12 mb-2"}),h.jsx("p",{className:"text-[10px] font-bold border-t border-slate-400 px-4 pt-1",children:"For Admire Sign & Display Pvt. Ltd."})]})]})]})]});return h.jsxs(Pt.Fragment,{children:[h.jsx("div",{className:"screen-preview-wrapper",children:E(!1)}),yN.createPortal(h.jsx("div",{className:"print-only-portal",children:E(!0)}),document.body)]})},u3=({user:s,inventory:e,transactions:t,exchangeRate:r,onLoadQuote:a})=>{const[l,u]=Pt.useState([]),[p,f]=Pt.useState(null);Pt.useEffect(()=>{if(!s)return;const T=_r.collection("artifacts").doc(Jr).collection("public").doc("data").collection("quotes").orderBy("updatedAt","desc").onSnapshot(C=>{u(C.docs.map(U=>({id:U.id,...U.data()})))});return()=>T()},[s]);const y=async T=>{confirm("Are you sure you want to delete this quote?")&&await _r.collection("artifacts").doc(Jr).collection("public").doc("data").collection("quotes").doc(T).delete()},v=T=>{if(T.allScreensData){f({allScreensData:T.allScreensData,client:T.client,project:T.project});return}const C=T.calculatorState;if(C.screens&&C.screens.length>0){const H=C.screens.map(J=>{const K={...C,...J};return xo(K,e,t,r)}).filter(J=>J!==null);if(H.length>0){const J={totalProjectCost:H.reduce((K,ne)=>K+ne.totalProjectCost,0),totalProjectSell:H.reduce((K,ne)=>K+ne.totalProjectSell,0),totalLEDSell:H.reduce((K,ne)=>K+ne.matrix.led.sell*ne.screenQty,0),totalServicesSell:H.reduce((K,ne)=>K+(ne.matrix.sell.total-ne.matrix.led.sell*ne.screenQty),0),totalMargin:0,totalScreenQty:H.reduce((K,ne)=>K+Number(ne.screenQty),0),calculations:H,screenConfigs:C.screens};J.totalMargin=J.totalProjectSell-J.totalProjectCost,f({allScreensData:J,client:T.client,project:T.project});return}}const U=xo(C,e,t,r);U?f({data:U,client:T.client,project:T.project}):alert("Could not calculate quote. Inventory items might be missing.")},E=T=>{let C=[],U=0,H=0;if(T.allScreensData&&T.allScreensData.calculations)C=T.allScreensData.calculations,U=T.allScreensData.totalProjectSell,H=T.allScreensData.totalProjectCost;else{const ie=T.calculatorState;if(ie&&ie.screens&&ie.screens.length>0)C=ie.screens.map(N=>{const R={...ie,...N};return xo(R,e,t,r)}).filter(N=>N!==null);else{const N=xo(ie,e,t,r);N&&(C=[N])}C.length>0&&(H=C.reduce((N,R)=>N+R.totalProjectCost,0),U=C.reduce((N,R)=>N+R.totalProjectSell,0))}if(C.length===0)return alert("Calculation failed. Inventory items might be missing.");const J=(T.project||"").replace(/,/g," "),K=(T.client||"").replace(/,/g," ");let ne=`Project,${J}
Client,${K}
Date,${new Date().toLocaleDateString()}

`;C.forEach((ie,N)=>{ne+=`SCREEN CONFIGURATION #${N+1}
`,ne+=`Dimensions,${ie.finalWidth}m x ${ie.finalHeight}m
`,ne+=`Quantity,${ie.screenQty}
`,ne+=`
Bill of Materials (Config #${N+1})
Component,Specification,Qty/Scrn,Total Qty,Rate,Total Amount
`,ie.detailedItems.forEach(R=>{const D=(R.name||"").replace(/"/g,'""'),w=(R.spec||"").replace(/"/g,'""'),k=R.qty*ie.screenQty,j=R.total*ie.screenQty;ne+=`"${D}","${w}",${R.qty},${k},${R.unit.toFixed(2)},${j.toFixed(2)}
`}),ne+=`
Subtotal (Cost),${ie.totalProjectCost.toFixed(2)}
`,ne+=`Subtotal (Sell),${ie.totalProjectSell.toFixed(2)}
`,ne+=`
--------------------------------

`}),ne+=`PROJECT SUMMARY
`,ne+=`Grand Total Cost,${H.toFixed(2)}
`,ne+=`Grand Total Sell,${U.toFixed(2)}
`,ne+=`Net Margin,${(U-H).toFixed(2)}
`;const oe=new Blob([ne],{type:"text/csv;charset=utf-8;"}),pe=window.URL.createObjectURL(oe),F=document.createElement("a");F.href=pe,F.download=`${K.replace(/[^a-z0-9]/gi,"_")}_${J.replace(/[^a-z0-9]/gi,"_")}_BOM.csv`,F.click(),window.URL.revokeObjectURL(pe)};return h.jsxs("div",{className:"p-4 md:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[p&&h.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:h.jsxs("div",{className:"bg-white max-w-4xl w-full h-[90vh] rounded-lg shadow-2xl flex flex-col",children:[h.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-100 rounded-t-lg",children:[h.jsxs("h2",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[h.jsx(Oy,{size:20})," View Saved Quote"]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>f(null),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded",children:"Close"}),h.jsxs("button",{onClick:()=>{const T=document.title;document.title=`${p.client}_${p.project}_Quote`.replace(/[^a-zA-Z0-9_]/g,"_"),window.print(),document.title=T},className:"px-4 py-2 bg-teal-600 text-white hover:bg-teal-700 rounded flex items-center gap-2",children:[h.jsx(zf,{size:16})," Print / PDF"]})]})]}),h.jsx("div",{className:"flex-1 overflow-auto p-8 bg-slate-200",children:h.jsx(_N,{data:p.data?{...p.data,clientName:p.client,projectName:p.project}:null,allScreensData:p.allScreensData?{...p.allScreensData,clientName:p.client,projectName:p.project}:null,currency:"INR",exchangeRate:r})})]})}),h.jsx("div",{className:"flex justify-between items-center mb-6",children:h.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-slate-800 dark:text-white",children:[h.jsx(My,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})," Saved Quotes"]})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.map(T=>{const C=T.calculatorState||{};C.unit;const U=C.selectedPitch||"N/A",H=C.selectedIndoor==="true";return h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white line-clamp-1",title:T.project,children:T.project||"Untitled"}),h.jsx("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:T.client||"No Client"})]}),h.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${H?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:H?"Indoor":"Outdoor"})]}),h.jsx("div",{className:"text-xs text-slate-400 mb-4",children:new Date(T.updatedAt?.seconds*1e3).toLocaleString()}),h.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-2 rounded-lg mb-4 space-y-1.5 flex-1",children:T.allScreensData?.calculations?T.allScreensData.calculations.map((J,K)=>h.jsxs("div",{className:"flex justify-between items-center text-xs border-b border-slate-100 dark:border-slate-600 last:border-0 pb-1 last:pb-0",children:[h.jsxs("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:["Screen #",K+1," ",h.jsxs("span",{className:"text-slate-400 font-normal",children:["(",J.finalWidth,"x",J.finalHeight,"m / ",(Number(J.finalWidth)*3.28084).toFixed(2),"x",(Number(J.finalHeight)*3.28084).toFixed(2),"ft ",J.screenQty,")"]})]}),h.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:Me(J.totalProjectSell,"INR",!0)})]},K)):h.jsxs("div",{className:"flex justify-between items-center text-xs",children:[h.jsxs("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:["Screen #1 ",h.jsxs("span",{className:"text-slate-400 font-normal",children:["(P",U," ",C.screenQty||1,")"]})]}),h.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:Me(T.finalAmount,"INR",!0)})]})}),h.jsxs("div",{className:"flex justify-between items-end pt-2 border-t border-slate-100 dark:border-slate-700 mt-auto",children:[h.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Total Estimate"}),h.jsx("span",{className:"text-xl font-bold text-teal-600 dark:text-teal-400",children:Me(T.finalAmount,"INR")})]})]}),h.jsxs("div",{className:"grid grid-cols-5 border-t border-slate-100 dark:border-slate-700 divide-x divide-slate-100 dark:divide-slate-700 bg-slate-50 dark:bg-slate-800",children:[h.jsxs("button",{onClick:()=>v(T),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700 transition-colors",title:"View",children:[h.jsx(Oy,{size:16})," ",h.jsx("span",{className:"hidden sm:inline",children:"View"})]}),h.jsxs("button",{onClick:()=>a(T,!1),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-blue-600 dark:text-blue-400 hover:bg-white dark:hover:bg-slate-700 transition-colors",title:"Edit",children:[h.jsx(Eo,{size:16})," ",h.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),h.jsxs("button",{onClick:()=>E(T),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-green-600 dark:text-green-400 hover:bg-white dark:hover:bg-slate-700 transition-colors",title:"Excel",children:[h.jsx(pC,{size:16})," ",h.jsx("span",{className:"hidden sm:inline",children:"Excel"})]}),h.jsxs("button",{onClick:()=>a(T,!0),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-slate-500 hover:bg-white dark:hover:bg-slate-700 transition-colors",title:"Clone",children:[h.jsx(Vy,{size:16})," ",h.jsx("span",{className:"hidden sm:inline",children:"Clone"})]}),h.jsxs("button",{onClick:()=>y(T.id),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Delete",children:[h.jsx(ui,{size:16})," ",h.jsx("span",{className:"hidden sm:inline",children:"Del"})]})]})]},T.id)}),l.length===0&&h.jsx("p",{className:"text-center text-slate-400 py-10 col-span-full",children:"No saved quotes found."})]})]})},d3=({data:s,allScreensData:e,inventory:t=[],transactions:r=[]})=>{if(!s&&!e)return null;const a=e&&e.calculations&&e.calculations.length>1;if(!a&&!s)return null;const l=(a?e.clientName:s?.clientName)||"",u=(a?e.projectName:s?.projectName)||"",p=(v,E,T)=>{const{detailedItems:C,screenQty:U,moduleType:H,cabinetType:J,finalWidth:K,finalHeight:ne}=v;return h.jsxs("div",{className:"mb-8 break-inside-avoid print-break-avoid",children:[a&&h.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg mb-3 border border-teal-200 dark:border-teal-800",children:[h.jsxs("h3",{className:"font-bold text-teal-800 dark:text-teal-300 text-sm",children:["Screen Configuration #",E+1]}),h.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-3 mt-3 text-xs text-teal-800 dark:text-teal-300",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-bold uppercase text-[10px] text-teal-600 dark:text-teal-500 tracking-wider block mb-0.5",children:"Target Size"}),T.targetWidth,"  ",T.targetHeight," ",T.unit||"m"]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-bold uppercase text-[10px] text-teal-600 dark:text-teal-500 tracking-wider block mb-0.5",children:"Final Dimensions"}),K,"m  ",ne,"m ",h.jsxs("span",{className:"text-teal-600/70",children:["/ ",(Number(K)*3.28084).toFixed(2),"ft  ",(Number(ne)*3.28084).toFixed(2),"ft"]})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-bold uppercase text-[10px] text-teal-600 dark:text-teal-500 tracking-wider block mb-0.5",children:"Quantity"}),U," Screens"]}),H&&h.jsxs("div",{children:[h.jsx("span",{className:"font-bold uppercase text-[10px] text-teal-600 dark:text-teal-500 tracking-wider block mb-0.5",children:"Type"}),"P",H.pitch," ",H.indoor?"Indoor":"Outdoor"]})]})]}),h.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-[10px]",children:[h.jsx("thead",{className:"bg-slate-100 text-slate-700",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-2 border border-slate-300 text-left w-10",children:"#"}),h.jsx("th",{className:"p-2 border border-slate-300 text-left w-32",children:"Component"}),h.jsx("th",{className:"p-2 border border-slate-300 text-left",children:"Specification / Details"}),h.jsx("th",{className:"p-2 border border-slate-300 text-center w-16",children:"Qty/Scrn"}),h.jsx("th",{className:"p-2 border border-slate-300 text-center w-16",children:"Total Qty"})]})}),h.jsx("tbody",{children:C.map((oe,pe)=>{const F=t.find(N=>N.id===oe.inventoryId);let ie=null;return F&&(F.type==="module"?ie=h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[h.jsxs("span",{children:["Size: ",F.width,"x",F.height,"mm"]}),h.jsxs("span",{children:["LED: ",F.ledType||"-"]}),h.jsxs("span",{children:["Bright: ",F.brightness," nits"]}),h.jsxs("span",{children:["Ref: ",F.refreshRate," Hz"]}),h.jsxs("span",{children:["Ang: ",F.viewAngleH,"/",F.viewAngleV]}),h.jsxs("span",{children:["IP: ",F.ipFront,"/",F.ipBack]}),h.jsxs("span",{children:["Pwr: ",F.avgPower,"/",F.maxPower," W"]}),h.jsxs("span",{children:["Wt: ",F.weight," kg"]})]}):F.type==="cabinet"?ie=h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[h.jsxs("span",{children:["Size: ",F.width,"x",F.height,"mm"]}),h.jsxs("span",{children:["Mat: ",F.material]}),h.jsxs("span",{children:["Weight: ",F.weight," kg"]})]}):F.type==="ready"?ie=h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[h.jsxs("span",{children:["Size: ",F.width,"x",F.height,"mm"]}),h.jsxs("span",{children:["Mat: ",F.material||"-"]}),h.jsxs("span",{children:["Bright: ",F.brightness," nits"]}),h.jsxs("span",{children:["Ref: ",F.refreshRate," Hz"]}),h.jsxs("span",{children:["IP: ",F.ipFront,"/",F.ipBack]})]}):F.type==="card"?ie=h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[h.jsxs("span",{children:["Brand: ",F.brand]}),h.jsxs("span",{children:["Model: ",F.model]}),F.ports&&h.jsxs("span",{children:["Ports: ",F.ports]})]}):F.type==="smps"||F.type==="psu"?ie=h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[h.jsxs("span",{children:["Brand: ",F.brand]}),h.jsxs("span",{children:["Model: ",F.model]}),F.amps&&h.jsxs("span",{children:["Amps: ",F.amps,"A"]})]}):F.type==="processor"&&(ie=h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[h.jsxs("span",{children:["Brand: ",F.brand]}),h.jsxs("span",{children:["Model: ",F.model]}),F.ports&&h.jsxs("span",{children:["Ports: ",F.ports]})]}))),h.jsxs("tr",{children:[h.jsx("td",{className:"p-2 border border-slate-300 text-center",children:pe+1}),h.jsx("td",{className:"p-2 border border-slate-300 font-bold align-top",children:oe.name}),h.jsxs("td",{className:"p-2 border border-slate-300 align-top",children:[h.jsx("div",{className:"font-semibold",children:oe.spec}),ie]}),h.jsx("td",{className:"p-2 border border-slate-300 text-center align-top",children:oe.qty}),h.jsx("td",{className:"p-2 border border-slate-300 text-center font-bold align-top",children:oe.qty*U})]},pe)})})]})]},E)},f=()=>{if(!a)return null;const v={},E=C=>r?r.filter(U=>U.itemId===C).reduce((U,H)=>U+(H.type==="in"?Number(H.qty):-Number(H.qty)),0):0;e.calculations.forEach((C,U)=>{C.detailedItems.forEach(H=>{const J=H.inventoryId?H.inventoryId:`${H.name}_${H.spec}`;v[J]||(v[J]={name:H.name,spec:H.spec,inventoryId:H.inventoryId,id:H.id,totalQty:0});const K=H.qty*C.screenQty;v[J].totalQty+=K})});const T=Object.values(v);return h.jsxs("div",{className:"mt-8 break-inside-avoid print-break-avoid border-t-4 border-slate-800 pt-6",children:[h.jsx("div",{className:"bg-slate-800 text-white p-3 rounded-t-lg mb-0 flex justify-between items-center",children:h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-lg uppercase tracking-wide",children:"Consolidated Bill of Materials"}),h.jsx("p",{className:"text-xs text-slate-300 mt-1",children:"Combined quantities across all screen configurations"})]})}),h.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-[10px]",children:[h.jsx("thead",{className:"bg-slate-700 text-white",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-2 border border-slate-600 text-left w-10",children:"#"}),h.jsx("th",{className:"p-2 border border-slate-600 text-left w-32",children:"Component"}),h.jsx("th",{className:"p-2 border border-slate-600 text-left",children:"Specification"}),h.jsx("th",{className:"p-2 border border-slate-600 text-center w-16",children:"Stock"}),h.jsx("th",{className:"p-2 border border-slate-600 text-center w-16",children:"Required"}),h.jsx("th",{className:"p-2 border border-slate-600 text-center w-16",children:"Balance"})]})}),h.jsx("tbody",{children:T.map((C,U)=>{const H=C.inventoryId?E(C.inventoryId):0,J=H-C.totalQty,K=C.inventoryId?t.find(oe=>oe.id===C.inventoryId):null;let ne=null;return K&&(K.type==="module"?ne=h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[h.jsxs("span",{children:["Size: ",K.width,"x",K.height,"mm"]}),h.jsxs("span",{children:["LED: ",K.ledType||"-"]}),h.jsxs("span",{children:["Bright: ",K.brightness," nits"]}),h.jsxs("span",{children:["Ref: ",K.refreshRate," Hz"]}),h.jsxs("span",{children:["Ang: ",K.viewAngleH,"/",K.viewAngleV]}),h.jsxs("span",{children:["IP: ",K.ipFront,"/",K.ipBack]}),h.jsxs("span",{children:["Pwr: ",K.avgPower,"/",K.maxPower," W"]}),h.jsxs("span",{children:["Wt: ",K.weight," kg"]})]}):K.type==="cabinet"?ne=h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[h.jsxs("span",{children:["Size: ",K.width,"x",K.height,"mm"]}),h.jsxs("span",{children:["Mat: ",K.material]}),h.jsxs("span",{children:["Weight: ",K.weight," kg"]})]}):K.type==="ready"?ne=h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[h.jsxs("span",{children:["Size: ",K.width,"x",K.height,"mm"]}),h.jsxs("span",{children:["Mat: ",K.material||"-"]}),h.jsxs("span",{children:["Bright: ",K.brightness," nits"]}),h.jsxs("span",{children:["Ref: ",K.refreshRate," Hz"]}),h.jsxs("span",{children:["IP: ",K.ipFront,"/",K.ipBack]})]}):K.type==="card"?ne=h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[h.jsxs("span",{children:["Brand: ",K.brand]}),h.jsxs("span",{children:["Model: ",K.model]}),K.ports&&h.jsxs("span",{children:["Ports: ",K.ports]})]}):K.type==="smps"||K.type==="psu"?ne=h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[h.jsxs("span",{children:["Brand: ",K.brand]}),h.jsxs("span",{children:["Model: ",K.model]}),K.amps&&h.jsxs("span",{children:["Amps: ",K.amps,"A"]})]}):K.type==="processor"&&(ne=h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[h.jsxs("span",{children:["Brand: ",K.brand]}),h.jsxs("span",{children:["Model: ",K.model]}),K.ports&&h.jsxs("span",{children:["Ports: ",K.ports]})]}))),h.jsxs("tr",{className:U%2===0?"bg-slate-50":"bg-white",children:[h.jsx("td",{className:"p-2 border border-slate-300 text-center",children:U+1}),h.jsx("td",{className:"p-2 border border-slate-300 font-bold align-top",children:C.name}),h.jsxs("td",{className:"p-2 border border-slate-300 align-top",children:[h.jsx("div",{className:"font-semibold",children:C.spec}),ne]}),h.jsx("td",{className:"p-2 border border-slate-300 text-center font-medium text-slate-600 align-top",children:C.inventoryId?H:"-"}),h.jsx("td",{className:"p-2 border border-slate-300 text-center font-bold align-top text-slate-800",children:C.totalQty}),h.jsx("td",{className:`p-2 border border-slate-300 text-center font-bold align-top ${J>=0?"text-green-600":"text-red-600"}`,children:C.inventoryId?J:"-"})]},U)})})]}),h.jsx("div",{className:"mt-4 p-3 bg-teal-50 dark:bg-teal-900/20 rounded-lg border border-teal-200 dark:border-teal-800",children:h.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-bold text-teal-800 dark:text-teal-300",children:"Total Configurations:"}),h.jsx("span",{className:"ml-2 font-bold text-lg text-teal-600 dark:text-teal-400",children:e.calculations.length})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-bold text-teal-800 dark:text-teal-300",children:"Total Screens:"}),h.jsx("span",{className:"ml-2 font-bold text-lg text-teal-600 dark:text-teal-400",children:e.totalScreenQty})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-bold text-teal-800 dark:text-teal-300",children:"Unique Components:"}),h.jsx("span",{className:"ml-2 font-bold text-lg text-teal-600 dark:text-teal-400",children:T.length})]})]})})]})},y=v=>h.jsxs("div",{className:`p-8 max-w-[210mm] mx-auto bg-white min-h-screen text-slate-800 font-sans text-xs ${v?"print-version-container p-0 w-full":""}`,children:[h.jsxs("div",{className:"flex justify-between items-start mb-6 border-b-2 border-slate-800 pb-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("img",{src:"/AdmireLED/logo.png",alt:"Logo",className:"h-12 w-auto"}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-slate-900 uppercase tracking-wide",children:"Bill of Materials"}),h.jsxs("div",{className:"mt-1 space-y-0.5",children:[h.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Project: ",h.jsx("span",{className:"font-normal",children:u})]}),h.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Client: ",h.jsx("span",{className:"font-normal",children:l})]}),a&&h.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[e.calculations.length," Configs  ",e.totalScreenQty," Screens"]}),!a&&s.moduleType&&h.jsxs("p",{className:"text-xs text-slate-500 mt-1 font-medium flex items-center gap-2",children:[h.jsxs("span",{className:"inline-block bg-slate-100 px-2 py-0.5 rounded text-slate-700 font-bold border border-slate-200",children:["P",s.moduleType.pitch," ",s.moduleType.indoor?"Indoor":"Outdoor"]}),h.jsxs("span",{children:[s.finalWidth,"m x ",s.finalHeight,"m ",h.jsxs("span",{className:"text-slate-400",children:["/ ",(Number(s.finalWidth)*3.28084).toFixed(2),"ft x ",(Number(s.finalHeight)*3.28084).toFixed(2),"ft"]})]}),h.jsxs("span",{className:"font-bold text-slate-700 border-l border-slate-300 pl-2 ml-1",children:[s.screenQty," Screens"]})]})]})]})]}),h.jsx("div",{className:"text-right",children:h.jsx("p",{className:"text-xs text-slate-500",children:new Date().toLocaleDateString()})})]}),a?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"mb-6",children:h.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase mb-3 pb-2 border-b border-slate-300",children:"Individual Screen Configurations"})}),e.calculations.map((E,T)=>p(E,T,e.screenConfigs?e.screenConfigs[T]:{})),f()]}):p(s,0,{}),h.jsx("div",{className:"mt-8 text-[10px] text-slate-400 border-t border-slate-200 pt-2 text-center",children:"Internal Document  Generated by Admire Sign LED Calculator"})]});return h.jsxs(Pt.Fragment,{children:[h.jsx("div",{className:"screen-preview-wrapper",children:y(!1)}),yN.createPortal(h.jsx("div",{className:"print-only-portal",children:y(!0)}),document.body)]})},h3=(s,e)=>{const[t,r]=Pt.useState(s);return Pt.useEffect(()=>{const a=setTimeout(()=>{r(s)},e);return()=>{clearTimeout(a)}},[s,e]),t},f3=({calculation:s,state:e,updateState:t,updateExtra:r,updateScreenProp:a,inventory:l,getStock:u,overrides:p,onOverride:f,editingRow:y,setEditingRow:v,onClearOverride:E})=>{const T=e.screens[e.activeScreenIndex],{screenQty:C,selectedPitch:U,selectedModuleId:H,selectedCabinetId:J,selectedCardId:K,selectedSMPSId:ne,selectedProcId:oe,extraComponents:pe,extras:F,commercials:ie}=T,{assemblyMode:N,selectedIndoor:R}=e,D=()=>Math.random().toString(36).substr(2,9).toUpperCase(),w=R==="true",k=l.filter(Y=>Y.type==="module"&&Y.indoor===w),j=[...new Set(k.map(Y=>Y.pitch))].sort((Y,Ie)=>Y-Ie),A=U?k.filter(Y=>Y.pitch==U):[],Ce=l.find(Y=>Y.id===H),Pe=l.filter(Y=>Y.type!=="cabinet"?!1:Ce?Y.width%Ce.width===0&&Y.height%Ce.height===0:!0),Z=l.filter(Y=>Y.type==="ready"&&Y.indoor===w),me=Y=>{const Ie=(ce,kt)=>a(e.activeScreenIndex,ce,kt);if(Y.id==="modules")return h.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[h.jsxs("select",{value:U,onChange:ce=>{Ie("selectedPitch",ce.target.value),Ie("selectedModuleId","")},className:"w-full md:w-20 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[h.jsx("option",{value:"",children:"Pitch"}),j.map(ce=>h.jsxs("option",{value:ce,children:["P",ce]},ce))]}),h.jsxs("select",{value:H,onChange:ce=>Ie("selectedModuleId",ce.target.value),disabled:!U,className:"w-full md:flex-1 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white disabled:opacity-50",children:[h.jsx("option",{value:"",children:"Select Module..."}),A.map(ce=>h.jsxs("option",{value:ce.id,children:[ce.brand," ",ce.model," (",u(ce.id),")"]},ce.id))]})]});if(Y.id==="cabinets")return h.jsxs("select",{value:J,onChange:ce=>Ie("selectedCabinetId",ce.target.value),disabled:!Ce,className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white disabled:opacity-50",children:[h.jsx("option",{value:"",children:"Select Cabinet..."}),Pe.map(ce=>h.jsxs("option",{value:ce.id,children:[ce.brand," ",ce.model," (",ce.width,"x",ce.height,") - Stock: ",u(ce.id)]},ce.id))]});if(Y.id==="cards")return h.jsxs("select",{value:K,onChange:ce=>Ie("selectedCardId",ce.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[h.jsx("option",{value:"",children:"Select Card..."}),l.filter(ce=>ce.type==="card").map(ce=>h.jsxs("option",{value:ce.id,children:[ce.brand," ",ce.model," (",u(ce.id),")"]},ce.id))]});if(Y.id==="smps")return h.jsxs("select",{value:ne,onChange:ce=>Ie("selectedSMPSId",ce.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[h.jsx("option",{value:"",children:"Select SMPS..."}),l.filter(ce=>ce.type==="smps").map(ce=>h.jsxs("option",{value:ce.id,children:[ce.brand," ",ce.model," (",u(ce.id),")"]},ce.id))]});if(Y.id==="processor")return h.jsxs("div",{className:"flex flex-col gap-2 md:gap-1",children:[h.jsxs("select",{value:oe,onChange:ce=>Ie("selectedProcId",ce.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[h.jsx("option",{value:"",children:"Select Processor..."}),l.filter(ce=>ce.type==="processor").map(ce=>h.jsxs("option",{value:ce.id,children:[ce.brand," ",ce.model," (",u(ce.id),")"]},ce.id))]}),h.jsxs("div",{className:"flex items-center gap-2 md:gap-1",children:[h.jsx("span",{className:"text-xs md:text-[10px] text-green-600 font-bold",children:"Sell:"}),h.jsx("input",{type:"number",className:"flex-1 md:w-20 p-2 md:p-0.5 text-xs border border-green-200 rounded bg-green-50 text-green-800",value:ie.processor?.val||0,onChange:ce=>a(e.activeScreenIndex,"commercials",{...ie,processor:{...ie.processor,val:ce.target.value}})})]})]});if(Y.id==="ready")return h.jsxs("select",{value:T.readyId,onChange:ce=>Ie("readyId",ce.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[h.jsx("option",{value:"",children:"Select Screen Model..."}),Z.map(ce=>h.jsxs("option",{value:ce.id,children:[ce.brand," ",ce.model," (P",ce.pitch,")"]},ce.id))]});const qe=pe?pe.findIndex(ce=>ce.id===Y.id):-1;return qe!==-1?h.jsxs("div",{className:"flex gap-1 items-center",children:[h.jsxs("select",{value:pe[qe].componentId,onChange:ce=>{const kt=[...pe];kt[qe].componentId=ce.target.value,Ie("extraComponents",kt)},className:"flex-1 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[h.jsx("option",{value:"",children:"Select..."}),["module","cabinet","card","smps"].map(ce=>{const kt=l.filter(vn=>vn.type===ce).sort((vn,$t)=>(vn.brand+" "+vn.model).localeCompare($t.brand+" "+$t.model));return kt.length===0?null:h.jsx("optgroup",{label:ce==="smps"?"SMPS":ce.toUpperCase(),children:kt.map(vn=>h.jsxs("option",{value:vn.id,children:[vn.brand," ",vn.model]},vn.id))},ce)})]}),h.jsxs("select",{value:pe[qe].type,onChange:ce=>{const kt=[...pe];kt[qe].type=ce.target.value,Ie("extraComponents",kt)},className:"w-16 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[h.jsx("option",{value:"screen",children:"/Scrn"}),h.jsx("option",{value:"cabinet",children:"/Cab"})]}),h.jsx("button",{type:"button",onClick:()=>Ie("extraComponents",pe.filter((ce,kt)=>kt!==qe)),className:"text-red-400 hover:text-red-600",children:h.jsx(ui,{size:16})})]}):h.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[Y.name," ",h.jsxs("span",{className:"text-[10px] text-slate-400 font-normal",children:["(",Y.spec,")"]})]})},Ee=Y=>s?.calculatedExtras?.[Y]||0,Ne=s?.matrix?.sqft?.perScreen||1;let Le=s?s.detailedItems:N==="assembled"?[{id:"modules",type:"led",name:"Modules",qty:0,unit:0,total:0},{id:"cabinets",type:"led",name:"Cabinets",qty:0,unit:0,total:0},{id:"cards",type:"led",name:"Receiving Cards",qty:0,unit:0,total:0},{id:"smps",type:"led",name:"SMPS",qty:0,unit:0,total:0},{id:"processor",type:"service",name:"Processor",qty:1,unit:0,total:0}]:[{id:"ready",type:"led",name:"Ready Unit",qty:0,unit:0,total:0},{id:"processor",type:"service",name:"Processor",qty:1,unit:0,total:0}];!s&&pe?.length>0&&(Le=[...Le,...pe.map(Y=>({id:Y.id,type:"led",name:"Extra",spec:"Select...",qty:Y.qty,unit:0,total:0}))]);const V=Le.filter(Y=>Y.type==="led"),O=(Array.isArray(F)?F:[]).reduce((Y,Ie)=>Y+Ee(Ie.id),0),te=V.reduce((Y,Ie)=>Y+Ie.total*C,0)+O*C,de=te/(C||1),fe=de/Ne,_e=Le.filter(Y=>Y.type!=="led"),it=Ee("install"),tt=Ee("structure"),Bt=_e.reduce((Y,Ie)=>Y+Ie.total*C,0)+(it+tt)*C,bn=Bt/(C||1),Er=bn/Ne,on=te+Bt,Qn=on/(C||1),Cn=Qn/Ne,Kn=()=>{const Y={id:D(),name:"New Cost",val:0,type:"abs"};a(e.activeScreenIndex,"extras",[...F||[],Y])},$n=Y=>{const Ie=[...F];Ie.splice(Y,1),a(e.activeScreenIndex,"extras",Ie)},$e=(Y,Ie,qe)=>{const ce=[...F];ce[Y]={...ce[Y],[Ie]:qe},a(e.activeScreenIndex,"extras",ce)},xt=Y=>h.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors ${Y.isOverridden?"bg-amber-50 dark:bg-amber-900/20":""}`,children:[h.jsx("td",{className:"p-2 pl-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"flex-1",children:me(Y)}),s&&h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",onClick:()=>v(y===Y.id?null:Y.id),className:`p-1 rounded ${y===Y.id?"bg-teal-100 text-teal-700":"text-slate-300 hover:text-teal-600"}`,children:h.jsx(Eo,{size:12})}),Y.isOverridden&&h.jsx("button",{type:"button",onClick:()=>E(Y.id),className:"text-amber-500 hover:text-red-500",children:h.jsx(Ly,{size:12})})]})]})}),h.jsx("td",{className:"p-2 text-right w-24",children:y===Y.id?h.jsx("input",{type:"number",className:"w-full p-1 text-right text-xs border rounded",value:p[Y.id]?.rate??Y.unit,onChange:Ie=>f(Y.id,"rate",Ie.target.value)}):Me(Y.unit,"INR",!1)}),h.jsx("td",{className:"p-2 text-center border-l border-slate-100 dark:border-slate-700 w-16",children:y===Y.id?h.jsx("input",{type:"number",className:"w-full p-1 text-center text-xs border rounded",value:p[Y.id]?.qty??Y.qty,onChange:Ie=>f(Y.id,"qty",Ie.target.value)}):Y.qty}),h.jsx("td",{className:"p-2 text-right text-slate-500 w-24",children:Me(Y.total,"INR",!1)}),h.jsx("td",{className:"p-2 text-right font-medium border-l border-slate-100 dark:border-slate-700 w-28",children:Me(Y.total*C,"INR",!1)})]},Y.id),kn=Y=>h.jsxs("div",{className:`bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 mb-3 shadow-sm ${Y.isOverridden?"ring-1 ring-amber-400 bg-amber-50 dark:bg-amber-900/10":""}`,children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:Y.name}),s&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{type:"button",onClick:()=>v(y===Y.id?null:Y.id),className:`p-1 rounded ${y===Y.id?"bg-teal-100 text-teal-700":"text-slate-300 hover:text-teal-600"}`,children:h.jsx(Eo,{size:14})}),Y.isOverridden&&h.jsx("button",{type:"button",onClick:()=>E(Y.id),className:"text-amber-500 hover:text-red-500",children:h.jsx(Ly,{size:14})})]})]}),h.jsx("div",{className:"mb-3",children:me(Y)}),h.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs bg-slate-50 dark:bg-slate-700/50 p-2 rounded",children:[h.jsxs("div",{children:[h.jsx("span",{className:"block text-[9px] uppercase text-slate-400 font-bold mb-1",children:"Rate"}),y===Y.id?h.jsx("input",{type:"number",className:"w-full p-1 text-right text-xs border rounded",value:p[Y.id]?.rate??Y.unit,onChange:Ie=>f(Y.id,"rate",Ie.target.value)}):h.jsx("span",{className:"block font-medium dark:text-slate-200",children:Me(Y.unit,"INR",!1)})]}),h.jsxs("div",{className:"text-center border-l border-slate-200 dark:border-slate-600",children:[h.jsx("span",{className:"block text-[9px] uppercase text-slate-400 font-bold mb-1",children:"Qty"}),y===Y.id?h.jsx("input",{type:"number",className:"w-full p-1 text-center text-xs border rounded",value:p[Y.id]?.qty??Y.qty,onChange:Ie=>f(Y.id,"qty",Ie.target.value)}):h.jsx("span",{className:"block font-medium dark:text-slate-200",children:Y.qty})]}),h.jsxs("div",{className:"text-right border-l border-slate-200 dark:border-slate-600",children:[h.jsx("span",{className:"block text-[9px] uppercase text-slate-400 font-bold mb-1",children:"Total"}),h.jsx("span",{className:"block font-bold text-teal-600 dark:text-teal-400",children:Me(Y.total*C,"INR",!1)})]})]})]},Y.id);return h.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[h.jsx("div",{className:"hidden md:block overflow-x-auto",children:h.jsxs("table",{className:"w-full text-xs text-left border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 font-bold",children:[h.jsx("th",{className:"p-2",children:"Component Selection"}),h.jsx("th",{className:"p-2 text-right",children:"Rate (Cost)"}),h.jsx("th",{className:"p-2 text-center border-l border-slate-200 dark:border-slate-700",children:"Qty/Scrn"}),h.jsx("th",{className:"p-2 text-right",children:"Cost/Scrn"}),h.jsx("th",{className:"p-2 text-right border-l border-slate-200 dark:border-slate-700",children:"Total Cost"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[h.jsx("tr",{className:"bg-slate-50 dark:bg-slate-800/50",children:h.jsx("td",{colSpan:"5",className:"p-2 font-bold text-teal-700 dark:text-teal-400 uppercase tracking-wider text-[10px]",children:"A. LED Panel & Logistics"})}),V.map(xt),h.jsx("tr",{className:"bg-white dark:bg-slate-900",children:h.jsx("td",{colSpan:"5",className:"p-2 text-center",children:h.jsxs("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"extraComponents",[...pe||[],{id:D(),componentId:"",qty:1,type:"screen"}]),className:"text-[10px] text-teal-600 hover:underline flex items-center justify-center gap-1 w-full",children:[h.jsx(ia,{size:10})," Add Component to Panel"]})})}),(Array.isArray(F)?F:[]).map((Y,Ie)=>h.jsxs("tr",{className:"text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700/50 group",children:[h.jsx("td",{className:"p-2 pl-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>$n(Ie),className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx(ui,{size:12})}),h.jsx("input",{type:"text",value:Y.name,onChange:qe=>$e(Ie,"name",qe.target.value),className:"text-xs border-b border-transparent hover:border-slate-300 focus:border-teal-500 bg-transparent outline-none w-full text-slate-600 dark:text-slate-300 font-medium"})]})}),h.jsx("td",{className:"p-2 text-right",children:h.jsxs("div",{className:"flex items-center justify-end gap-1",children:[h.jsx("input",{type:"number",value:Y.val,onChange:qe=>$e(Ie,"val",qe.target.value),className:"w-16 p-1 text-right text-xs border rounded bg-white dark:bg-slate-800 dark:border-slate-600"}),h.jsx("button",{type:"button",onClick:()=>$e(Ie,"type",Y.type==="abs"?"pct":"abs"),className:"px-1 text-[10px] font-bold border rounded bg-slate-100 dark:bg-slate-700",children:Y.type==="abs"?"":"%"})]})}),h.jsx("td",{className:"p-2 text-center border-l border-slate-100 dark:border-slate-700 text-[10px] text-slate-400",children:Y.type==="pct"?`${Y.val}%`:"-"}),h.jsx("td",{className:"p-2 text-right",children:Me(Ee(Y.id),"INR",!1)}),h.jsx("td",{className:"p-2 text-right border-l border-slate-100 dark:border-slate-700",children:Me(Ee(Y.id)*C,"INR",!1)})]},Y.id)),h.jsx("tr",{className:"bg-slate-50 dark:bg-slate-800/20",children:h.jsx("td",{colSpan:"5",className:"p-1 text-center",children:h.jsxs("button",{onClick:Kn,className:"text-[10px] text-blue-600 hover:text-blue-700 font-bold uppercase tracking-wider flex items-center justify-center gap-1 py-1 w-full hover:bg-slate-100 dark:hover:bg-slate-700 rounded transition-colors",children:[h.jsx(ia,{size:10})," Add Extra Cost"]})})}),h.jsxs("tr",{className:"bg-teal-50 dark:bg-teal-900/20 font-bold border-t border-teal-100 dark:border-teal-800",children:[h.jsx("td",{className:"p-2 text-right text-teal-800 dark:text-teal-300",children:"Sub-total (LED Panel)"}),h.jsxs("td",{className:"p-2 text-right text-teal-700 dark:text-teal-400 text-[10px] font-normal",children:[Me(fe,"INR"),"/sqft"]}),h.jsx("td",{className:"p-2 text-center border-l border-teal-100 dark:border-teal-800",children:"-"}),h.jsx("td",{className:"p-2 text-right text-teal-800 dark:text-teal-300",children:Me(de,"INR",!1)}),h.jsx("td",{className:"p-2 text-right text-teal-800 dark:text-teal-300 border-l border-teal-100 dark:border-teal-800",children:Me(te,"INR",!1)})]}),h.jsx("tr",{className:"bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700",children:h.jsx("td",{colSpan:"5",className:"p-2 font-bold text-blue-700 dark:text-blue-400 uppercase tracking-wider text-[10px]",children:"B. Additional Costs"})}),_e.map(xt),["installation","structure"].map(Y=>{const Ie=Y==="installation"?"install":"structure",qe=Y==="installation"?"Installation":"Structure";return h.jsxs("tr",{className:"text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[h.jsx("td",{className:"p-2 pl-4",children:h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-xs font-medium",children:qe}),h.jsxs("select",{value:ie[Y]?.unit||"sqft",onChange:ce=>a(e.activeScreenIndex,"commercials",{...ie,[Y]:{...ie[Y],unit:ce.target.value}}),className:"text-[10px] p-0.5 border rounded bg-slate-50 dark:bg-slate-700",children:[h.jsx("option",{value:"sqft",children:"/Sq.Ft"}),h.jsx("option",{value:"screen",children:"/Screen"})]})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Sell:"}),h.jsx("input",{type:"number",className:"w-20 p-0.5 text-xs border border-green-200 rounded bg-green-50 text-green-800",value:ie[Y]?.val||0,onChange:ce=>a(e.activeScreenIndex,"commercials",{...ie,[Y]:{...ie[Y],val:ce.target.value}})})]})]})}),h.jsx("td",{className:"p-2 text-right",children:h.jsxs("div",{className:"flex items-center justify-end gap-1",children:[h.jsx("span",{className:"text-[10px] text-slate-400 mr-1",children:"Cost:"}),h.jsx("input",{type:"number",value:ie[Y]?.cost||0,onChange:ce=>a(e.activeScreenIndex,"commercials",{...ie,[Y]:{...ie[Y],cost:ce.target.value}}),className:"w-16 p-1 text-right text-xs border rounded bg-white dark:bg-slate-800 dark:border-slate-600"}),h.jsx("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"commercials",{...ie,[Y]:{...ie[Y],costType:ie[Y]?.costType==="abs"?"pct":"abs"}}),className:"px-1 text-[10px] font-bold border rounded bg-slate-100 dark:bg-slate-700",children:ie[Y]?.costType==="abs"?"":"%"})]})}),h.jsx("td",{className:"p-2 text-center border-l border-slate-100 dark:border-slate-700 text-xs",children:ie[Y]?.unit==="sqft"?s?.matrix.sqft.perScreen.toFixed(1)||"-":"1"}),h.jsx("td",{className:"p-2 text-right",children:Me(Ee(Ie),"INR",!1)}),h.jsx("td",{className:"p-2 text-right border-l border-slate-100 dark:border-slate-700",children:Me(Ee(Ie)*C,"INR",!1)})]},Y)}),h.jsxs("tr",{className:"bg-blue-50 dark:bg-blue-900/20 font-bold border-t border-blue-100 dark:border-blue-800",children:[h.jsx("td",{className:"p-2 text-right text-blue-800 dark:text-blue-300",children:"Sub-total (Additional)"}),h.jsxs("td",{className:"p-2 text-right text-blue-700 dark:text-blue-400 text-[10px] font-normal",children:[Me(Er,"INR"),"/sqft"]}),h.jsx("td",{className:"p-2 text-center border-l border-blue-100 dark:border-blue-800",children:"-"}),h.jsx("td",{className:"p-2 text-right text-blue-800 dark:text-blue-300",children:Me(bn,"INR",!1)}),h.jsx("td",{className:"p-2 text-right text-blue-800 dark:text-blue-300 border-l border-blue-100 dark:border-blue-800",children:Me(Bt,"INR",!1)})]}),h.jsxs("tr",{className:"bg-slate-800 text-white font-bold border-t-2 border-slate-900 text-sm",children:[h.jsx("td",{className:"p-3 text-right uppercase",children:"Grand Total (Cost)"}),h.jsxs("td",{className:"p-3 text-right text-slate-300 text-xs font-normal",children:[Me(Cn,"INR"),"/sqft"]}),h.jsx("td",{className:"p-3 text-center border-l border-slate-600",children:"-"}),h.jsx("td",{className:"p-3 text-right border-l border-slate-600",children:Me(Qn,"INR",!1)}),h.jsx("td",{className:"p-3 text-right border-l border-slate-600",children:Me(on,"INR",!1)})]})]})]})}),h.jsxs("div",{className:"md:hidden bg-slate-50 dark:bg-slate-800/20 p-3",children:[h.jsx("div",{className:"mb-2 font-bold text-teal-700 text-xs uppercase tracking-wider",children:"A. LED Panel & Logistics"}),V.map(kn),h.jsxs("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"extraComponents",[...pe||[],{id:D(),componentId:"",qty:1,type:"screen"}]),className:"w-full py-2 mb-4 bg-white dark:bg-slate-800 border border-teal-200 dark:border-teal-700 text-teal-600 dark:text-teal-400 rounded-lg text-xs font-bold flex items-center justify-center gap-2",children:[h.jsx(ia,{size:14})," Add Component"]}),(Array.isArray(F)?F:[]).map((Y,Ie)=>h.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 mb-3 shadow-sm flex items-center justify-between",children:[h.jsx("div",{className:"flex-1",children:h.jsx("input",{type:"text",value:Y.name,onChange:qe=>$e(Ie,"name",qe.target.value),className:"text-xs font-bold border-b border-transparent focus:border-teal-500 bg-transparent outline-none w-full text-slate-600 dark:text-slate-300"})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"number",value:Y.val,onChange:qe=>$e(Ie,"val",qe.target.value),className:"w-12 p-1 text-right text-xs border rounded bg-slate-50 dark:bg-slate-700"}),h.jsx("button",{type:"button",onClick:()=>$e(Ie,"type",Y.type==="abs"?"pct":"abs"),className:"px-1 text-[10px] font-bold border rounded bg-slate-100 dark:bg-slate-600",children:Y.type==="abs"?"":"%"}),h.jsx("button",{onClick:()=>$n(Ie),className:"text-red-400 p-1",children:h.jsx(ui,{size:14})})]})]},Y.id)),h.jsxs("button",{onClick:Kn,className:"w-full py-2 mb-4 bg-white dark:bg-slate-800 border border-blue-200 dark:border-blue-700 text-blue-600 dark:text-blue-400 rounded-lg text-xs font-bold flex items-center justify-center gap-2",children:[h.jsx(ia,{size:14})," Add Overhead Cost"]}),h.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg border border-teal-100 dark:border-teal-800 mb-6",children:[h.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-teal-800 dark:text-teal-300",children:[h.jsx("span",{children:"Sub-total (LED Panel)"}),h.jsx("span",{children:Me(te,"INR",!1)})]}),h.jsxs("div",{className:"text-[10px] text-right text-teal-600 dark:text-teal-400 mt-1",children:[Me(fe,"INR"),"/sqft"]})]}),h.jsx("div",{className:"mb-2 font-bold text-blue-700 text-xs uppercase tracking-wider",children:"B. Additional Costs"}),_e.map(kn),["installation","structure"].map(Y=>{const Ie=Y==="installation"?"install":"structure",qe=Y==="installation"?"Installation":"Structure";return h.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 mb-3 shadow-sm",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:qe}),h.jsxs("select",{value:ie[Y]?.unit||"sqft",onChange:ce=>a(e.activeScreenIndex,"commercials",{...ie,[Y]:{...ie[Y],unit:ce.target.value}}),className:"text-[10px] p-0.5 border rounded bg-slate-50 dark:bg-slate-700",children:[h.jsx("option",{value:"sqft",children:"/Sq.Ft"}),h.jsx("option",{value:"screen",children:"/Screen"})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[h.jsxs("div",{className:"flex items-center gap-1 bg-green-50 p-1 rounded border border-green-100",children:[h.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Sell:"}),h.jsx("input",{type:"number",className:"w-full p-0.5 text-xs bg-transparent outline-none text-green-800 font-bold",value:ie[Y]?.val||0,onChange:ce=>a(e.activeScreenIndex,"commercials",{...ie,[Y]:{...ie[Y],val:ce.target.value}})})]}),h.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 p-1 rounded border border-slate-100",children:[h.jsx("span",{className:"text-[10px] text-slate-400",children:"Cost:"}),h.jsx("input",{type:"number",className:"w-full p-0.5 text-xs bg-transparent outline-none",value:ie[Y]?.cost||0,onChange:ce=>a(e.activeScreenIndex,"commercials",{...ie,[Y]:{...ie[Y],cost:ce.target.value}})}),h.jsx("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"commercials",{...ie,[Y]:{...ie[Y],costType:ie[Y]?.costType==="abs"?"pct":"abs"}}),className:"px-1 text-[10px] font-bold",children:ie[Y]?.costType==="abs"?"":"%"})]})]}),h.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-100 dark:border-slate-700",children:[h.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"Total Cost"}),h.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:Me(Ee(Ie)*C,"INR",!1)})]})]},Y)}),h.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-100 dark:border-blue-800 mb-6",children:h.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-blue-800 dark:text-blue-300",children:[h.jsx("span",{children:"Sub-total (Additional)"}),h.jsx("span",{children:Me(Bt,"INR",!1)})]})}),h.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg text-white shadow-lg",children:[h.jsxs("div",{className:"flex justify-between items-end mb-1",children:[h.jsx("span",{className:"text-xs uppercase text-slate-400 font-bold",children:"Grand Total (Cost)"}),h.jsx("span",{className:"text-lg font-bold",children:Me(on,"INR",!1)})]}),h.jsxs("div",{className:"text-[10px] text-right text-slate-500",children:[Me(Cn,"INR"),"/sqft"]})]})]})]})},m3=({user:s,inventory:e,transactions:t,state:r,setState:a,exchangeRate:l,setExchangeRate:u,onSaveQuote:p})=>{const{client:f,project:y,screenQty:v,targetWidth:E,targetHeight:T,unit:C,selectedIndoor:U,assemblyMode:H,sizingMode:J,margin:K,extras:ne,overrides:oe,editingRow:pe}=r,[F,ie]=Pt.useState(null),[N,R]=Pt.useState(null),[D,w]=Pt.useState(!1),[k,j]=Pt.useState(!1),A=h3(r,300),Ce=O=>t?t.filter(B=>B.itemId===O).reduce((B,te)=>B+(te.type==="in"?Number(te.qty):-Number(te.qty)),0):0,Pe=(O,B)=>a(te=>({...te,[O]:B})),Z=(O,B,te)=>{const de=r.activeScreenIndex;a(fe=>{const _e=[...fe.screens];return _e[de]={..._e[de],extras:{..._e[de].extras,[O]:{..._e[de].extras[O],[B]:te}}},{...fe,screens:_e}})},me=()=>{confirm("Reset calculator to defaults?")&&a({client:"",project:"",unit:"ft",screens:[{id:S0(),screenQty:0,targetWidth:0,targetHeight:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedSMPSId:"",selectedProcId:"",sizingMode:"closest",readyId:"",extraComponents:[],overrides:{},editingRow:null,extras:[],commercials:{processor:{val:0,unit:"screen",cost:0,costType:"abs"},installation:{val:0,unit:"sqft",cost:0,costType:"abs"},structure:{val:0,unit:"sqft",cost:0,costType:"abs"}}}],activeScreenIndex:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedSMPSId:"",selectedProcId:"",sizingMode:"closest",readyId:"",margin:0,pricingMode:"margin",targetSellPrice:0,extraComponents:[],commercials:{processor:{val:0,unit:"screen"},installation:{val:0,unit:"sqft"},structure:{val:0,unit:"sqft"}},terms:{price:Dt.DEFAULTS.PRICE_BASIS,deliveryWeeks:Dt.DEFAULTS.DELIVERY_WEEKS,payment:Dt.DEFAULTS.PAYMENT_TERMS},extras:[],overrides:{},editingRow:null})},Ee=()=>{const O={id:S0(),screenQty:1,targetWidth:0,targetHeight:0,selectedIndoor:r.selectedIndoor,assemblyMode:r.assemblyMode,selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedPSUId:"",selectedProcId:"",sizingMode:"closest",readyId:"",extraComponents:[],overrides:{},editingRow:null,extras:[],commercials:{processor:{val:0,unit:"screen",cost:0,costType:"abs"},installation:{val:0,unit:"sqft",cost:0,costType:"abs"},structure:{val:0,unit:"sqft",cost:0,costType:"abs"}}};a(B=>({...B,screens:[...B.screens,O],activeScreenIndex:B.screens.length}))},Ne=(O,B,te)=>{a(de=>{const fe=[...de.screens];return fe[O]={...fe[O],[B]:te},{...de,screens:fe}})},Le=(O,B,te)=>{const de=r.screens[r.activeScreenIndex];Ne(r.activeScreenIndex,"overrides",{...de.overrides,[O]:{...de.overrides[O],[B]:te}})},V=O=>{const te={...r.screens[r.activeScreenIndex].overrides};delete te[O],Ne(r.activeScreenIndex,"overrides",te),Ne(r.activeScreenIndex,"editingRow",null)};return Pt.useEffect(()=>{if(!A.screens||A.screens.length===0){ie(null);return}const O=A.screens[A.activeScreenIndex];if(!O){ie(null);return}const B={...A,...O},te=xo(B,e,t,l);ie(te)},[A,e,l]),Pt.useEffect(()=>{const B=(()=>{if(!A.screens||A.screens.length===0)return null;const te=A.screens.map(fe=>{const _e={...A,...fe};return xo(_e,e,t,l)}).filter(fe=>fe!==null);if(te.length===0)return null;const de={totalProjectCost:te.reduce((fe,_e)=>fe+_e.totalProjectCost,0),totalProjectSell:te.reduce((fe,_e)=>fe+_e.totalProjectSell,0),totalLEDSell:te.reduce((fe,_e)=>fe+_e.matrix.led.sell*_e.screenQty,0),totalServicesSell:te.reduce((fe,_e)=>fe+(_e.matrix.sell.total-_e.matrix.led.sell*_e.screenQty),0),totalMargin:0,totalScreenQty:te.reduce((fe,_e)=>fe+Number(_e.screenQty),0),calculations:te,screenConfigs:A.screens};return de.totalMargin=de.totalProjectSell-de.totalProjectCost,de})();R(B)},[A,e,l]),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 relative items-start",children:[k&&(F||N)&&h.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:h.jsxs("div",{className:"bg-white dark:bg-slate-900 max-w-5xl w-full h-[90vh] rounded-lg shadow-2xl flex flex-col overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800",children:[h.jsx("div",{className:"flex items-center gap-4",children:h.jsxs("h2",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[h.jsx(My,{size:20,className:"text-teal-600"})," BOM"]})}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded text-sm font-bold",children:"Close"}),h.jsxs("button",{onClick:()=>{const O=document.title;document.title=`${f}_${y}_BOM`.replace(/[^a-zA-Z0-9_]/g,"_"),window.print(),document.title=O},className:"px-4 py-2 bg-slate-800 text-white hover:bg-slate-700 rounded flex items-center gap-2 text-sm font-bold",children:[h.jsx(zf,{size:16})," Print"]})]})]}),h.jsx("div",{className:"flex-1 overflow-auto bg-slate-100 dark:bg-slate-800 p-8 flex justify-center",children:h.jsx(d3,{data:F?{...F,clientName:f,projectName:y}:null,allScreensData:N?{...N,clientName:f,projectName:y,screenConfigs:r.screens.map(O=>({targetWidth:O.targetWidth,targetHeight:O.targetHeight,unit:C}))}:null,inventory:e,transactions:t})})]})}),D&&(F||N)&&h.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:h.jsxs("div",{className:"bg-white max-w-4xl w-full h-[90vh] rounded-lg shadow-2xl flex flex-col",children:[h.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-100 rounded-t-lg",children:[h.jsxs("h2",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[h.jsx(Oy,{size:20})," Print Preview"]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded",children:"Close"}),h.jsxs("button",{onClick:()=>{const O=document.title;document.title=`${f}_${y}_Quote`.replace(/[^a-zA-Z0-9_]/g,"_"),window.print(),document.title=O},className:"px-4 py-2 bg-teal-600 text-white hover:bg-teal-700 rounded flex items-center gap-2",children:[h.jsx(zf,{size:16})," Print / Save PDF"]})]})]}),h.jsx("div",{className:"flex-1 overflow-auto p-8 bg-slate-200",children:h.jsx(_N,{data:F?{...F,clientName:f,projectName:y,margin:K}:null,allScreensData:N?{...N,clientName:f,projectName:y}:null,currency:"INR",exchangeRate:l})})]})}),h.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[h.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-800/50 px-4 py-3 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[h.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2 text-sm",children:[h.jsx(RC,{className:"w-4 h-4 text-teal-600"})," Project Specs"]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{onClick:me,className:"text-[10px] font-bold text-red-500 hover:text-red-700 uppercase hover:bg-red-50 dark:hover:bg-red-900/20 px-2 py-1 rounded transition-colors mr-2 flex items-center gap-1",children:[h.jsx(Ly,{size:10})," Reset"]}),h.jsxs("div",{className:"flex bg-slate-200 dark:bg-slate-700 rounded-md p-0.5",children:[h.jsx("button",{onClick:()=>Pe("unit","m"),className:`px-2 py-0.5 text-[10px] font-bold rounded transition-all ${C==="m"?"bg-white dark:bg-slate-600 shadow text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400"}`,children:"M"}),h.jsx("button",{onClick:()=>Pe("unit","ft"),className:`px-2 py-0.5 text-[10px] font-bold rounded transition-all ${C==="ft"?"bg-white dark:bg-slate-600 shadow text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400"}`,children:"FT"})]})]})]}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[h.jsxs("div",{className:"relative group",children:[h.jsx("label",{className:"absolute -top-1.5 left-2 bg-white dark:bg-slate-800 px-1 text-[10px] font-bold text-teal-600 dark:text-teal-400",children:"CLIENT"}),h.jsx("input",{value:f,onChange:O=>Pe("client",O.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-sm outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 dark:text-white transition-all",placeholder:"Client Name"})]}),h.jsxs("div",{className:"relative group",children:[h.jsx("label",{className:"absolute -top-1.5 left-2 bg-white dark:bg-slate-800 px-1 text-[10px] font-bold text-teal-600 dark:text-teal-400",children:"PROJECT"}),h.jsx("input",{value:y,onChange:O=>Pe("project",O.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-sm outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 dark:text-white transition-all",placeholder:"Project Ref"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[h.jsxs("div",{className:"flex items-center border border-slate-200 dark:border-slate-600 rounded-md overflow-hidden h-8",children:[h.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-3 h-full flex items-center border-r border-slate-200 dark:border-slate-600 text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase w-20 justify-center",children:"Type"}),h.jsxs("div",{className:"flex-1 flex p-0.5 bg-slate-50 dark:bg-slate-800 h-full",children:[h.jsx("button",{onClick:()=>{Pe("selectedIndoor","true"),Ne(r.activeScreenIndex,"selectedIndoor","true")},className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${U==="true"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Indoor"}),h.jsx("button",{onClick:()=>{Pe("selectedIndoor","false"),Ne(r.activeScreenIndex,"selectedIndoor","false")},className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${U==="false"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Outdoor"})]})]}),h.jsxs("div",{className:"flex items-center border border-slate-200 dark:border-slate-600 rounded-md overflow-hidden h-8",children:[h.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-3 h-full flex items-center border-r border-slate-200 dark:border-slate-600 text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase w-20 justify-center",children:"Supply"}),h.jsxs("div",{className:"flex-1 flex p-0.5 bg-slate-50 dark:bg-slate-800 h-full",children:[h.jsx("button",{onClick:()=>{Pe("assemblyMode","assembled"),Ne(r.activeScreenIndex,"assemblyMode","assembled")},className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${H==="assembled"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Assm"}),h.jsx("button",{onClick:()=>{Pe("assemblyMode","ready"),Ne(r.activeScreenIndex,"assemblyMode","ready")},className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${H==="ready"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Ready"})]})]})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Screen Configurations"}),h.jsxs("button",{onClick:Ee,className:"text-[10px] font-bold text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 flex items-center gap-1 bg-teal-50 dark:bg-teal-900/30 px-2 py-1 rounded transition-colors border border-teal-100 dark:border-teal-800",children:[h.jsx(ia,{size:12})," Add Size"]})]}),h.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-12 gap-2 mb-1 px-2 text-[9px] font-bold text-slate-400 uppercase tracking-wider hidden md:grid",children:[h.jsx("div",{className:"col-span-1 text-center",children:"#"}),h.jsxs("div",{className:"col-span-3",children:["Width (",C,")"]}),h.jsxs("div",{className:"col-span-3",children:["Height (",C,")"]}),h.jsx("div",{className:"col-span-2 text-center",children:"Qty"}),h.jsx("div",{className:"col-span-2",children:"Sizing"}),h.jsx("div",{className:"col-span-1 text-right",children:"Actions"})]}),h.jsx("div",{className:"space-y-1 max-h-[300px] overflow-y-auto pr-1 custom-scrollbar",children:r.screens.map((O,B)=>h.jsxs("div",{onClick:()=>a({...r,activeScreenIndex:B}),className:`grid grid-cols-4 md:grid-cols-12 gap-3 items-start p-3 rounded-lg border transition-all cursor-pointer ${r.activeScreenIndex===B?"border-teal-500 ring-1 ring-teal-500 bg-teal-50/50 dark:bg-teal-900/10":"border-slate-200 dark:border-slate-700 hover:border-teal-300"}`,children:[h.jsxs("div",{className:"col-span-4 md:col-span-1 flex justify-between md:justify-center items-center border-b md:border-b-0 pb-2 md:pb-0 mb-1 md:mb-0",children:[h.jsxs("span",{className:"text-xs font-bold text-slate-500 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:["#",B+1]}),h.jsxs("div",{className:"md:hidden flex gap-3",children:[h.jsx("button",{onClick:te=>{te.stopPropagation();const de=[...r.screens],fe=Math.random().toString(36).substr(2,9);de.splice(B+1,0,{...de[B],id:fe}),a({...r,screens:de,activeScreenIndex:B+1})},className:"text-blue-500 hover:text-blue-700 bg-blue-50 p-1.5 rounded",children:h.jsx(Vy,{size:16})}),r.screens.length>1&&h.jsx("button",{onClick:te=>{te.stopPropagation();const de=r.screens.filter((fe,_e)=>_e!==B);a({...r,screens:de,activeScreenIndex:Math.max(0,B-1)})},className:"text-red-400 hover:text-red-600 bg-red-50 p-1.5 rounded",children:h.jsx(ui,{size:16})})]})]}),h.jsxs("div",{className:"col-span-2 md:col-span-3",children:[h.jsxs("label",{className:"md:hidden text-[10px] font-bold text-slate-400 mb-1 block uppercase",children:["Width (",r.unit,")"]}),h.jsx("input",{type:"number",value:O.targetWidth,onChange:te=>Ne(B,"targetWidth",te.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:border-teal-500 outline-none",placeholder:"W"})]}),h.jsxs("div",{className:"col-span-2 md:col-span-3",children:[h.jsxs("label",{className:"md:hidden text-[10px] font-bold text-slate-400 mb-1 block uppercase",children:["Height (",r.unit,")"]}),h.jsx("input",{type:"number",value:O.targetHeight,onChange:te=>Ne(B,"targetHeight",te.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:border-teal-500 outline-none",placeholder:"H"})]}),h.jsxs("div",{className:"col-span-2 md:col-span-2",children:[h.jsx("label",{className:"md:hidden text-[10px] font-bold text-slate-400 mb-1 block uppercase",children:"Qty"}),h.jsx("input",{type:"number",value:O.screenQty,onChange:te=>Ne(B,"screenQty",te.target.value),className:"w-full p-2 text-center text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:border-teal-500 outline-none",placeholder:"Qty"})]}),h.jsxs("div",{className:"col-span-2 md:col-span-2",children:[h.jsx("label",{className:"md:hidden text-[10px] font-bold text-slate-400 mb-1 block uppercase",children:"Sizing"}),h.jsxs("select",{value:O.sizingMode,onChange:te=>Ne(B,"sizingMode",te.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white bg-white outline-none",children:[h.jsx("option",{value:"closest",children:"Auto"}),h.jsx("option",{value:"exact",children:"Exact"})]})]}),h.jsxs("div",{className:"hidden md:flex col-span-1 justify-end gap-1",children:[h.jsx("button",{onClick:te=>{te.stopPropagation();const de=[...r.screens],fe=Math.random().toString(36).substr(2,9);de.splice(B+1,0,{...de[B],id:fe}),a({...r,screens:de,activeScreenIndex:B+1})},className:"p-1.5 text-slate-400 hover:text-blue-500 hover:bg-blue-50 rounded transition-colors",title:"Duplicate",children:h.jsx(Vy,{size:14})}),r.screens.length>1&&h.jsx("button",{onClick:te=>{te.stopPropagation();const de=r.screens.filter((fe,_e)=>_e!==B);a({...r,screens:de,activeScreenIndex:Math.max(0,B-1)})},className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Remove",children:h.jsx(ui,{size:14})})]})]},O.id))})]})]})]}),h.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:h.jsxs("details",{className:"group p-4",open:!0,children:[h.jsxs("summary",{className:"flex justify-between items-center cursor-pointer list-none",children:[h.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[h.jsx(rI,{className:"w-4 h-4 text-teal-600"})," Hardware & Cost Breakdown",r.screens.length>1&&h.jsxs("span",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:["(Screen #",r.activeScreenIndex+1," of ",r.screens.length,")"]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-teal-600 text-xs font-bold group-open:hidden",children:"Show Table"}),h.jsx("span",{className:"text-slate-400 text-xs hidden group-open:block",children:"Hide Table"})]})]}),h.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-700",children:[r.screens.length>1&&h.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:r.screens.map((O,B)=>{const te=r.activeScreenIndex===B,de=O.targetWidth&&O.targetHeight?`${O.targetWidth}${O.targetHeight}${C} (${O.screenQty})`:`Screen #${B+1}`;return h.jsx("button",{onClick:()=>Pe("activeScreenIndex",B),className:`flex-shrink-0 px-4 py-2 rounded-lg text-xs font-bold transition-all ${te?"bg-teal-600 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{children:["#",B+1]}),h.jsx("span",{className:"text-[10px] opacity-75",children:de})]})},O.id)})}),r.screens[r.activeScreenIndex]&&h.jsx("div",{className:"mb-4 p-3 bg-slate-50 dark:bg-slate-700/30 rounded-lg border border-slate-200 dark:border-slate-600",children:h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Dimensions:"}),h.jsxs("span",{className:"ml-2 font-bold text-slate-800 dark:text-white",children:[r.screens[r.activeScreenIndex].targetWidth||0,"  ",r.screens[r.activeScreenIndex].targetHeight||0," ",C]})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Quantity:"}),h.jsxs("span",{className:"ml-2 font-bold text-teal-600 dark:text-teal-400",children:[r.screens[r.activeScreenIndex].screenQty||0," screens"]})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Sizing:"}),h.jsx("span",{className:"ml-2 font-bold text-slate-800 dark:text-white capitalize",children:r.screens[r.activeScreenIndex].sizingMode})]}),F&&h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Final Size:"}),h.jsxs("span",{className:"ml-2 font-bold text-slate-800 dark:text-white",children:[F.finalWidth,"  ",F.finalHeight," m"]})]})]})}),h.jsx(f3,{calculation:F,state:r,updateState:Pe,updateExtra:Z,updateScreenProp:Ne,inventory:e,getStock:Ce,overrides:r.screens[r.activeScreenIndex]?.overrides||{},onOverride:Le,editingRow:r.screens[r.activeScreenIndex]?.editingRow,setEditingRow:O=>Ne(r.activeScreenIndex,"editingRow",O),onClearOverride:V})]})]})}),h.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:h.jsxs("details",{className:"group p-4",children:[h.jsxs("summary",{className:"flex justify-between items-center cursor-pointer list-none",children:[h.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"Terms & Conditions"}),h.jsx("span",{className:"text-teal-600 text-xs group-open:hidden",children:"Show Details"})]}),h.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-slate-100 dark:border-slate-700",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Price Basis"}),h.jsx("input",{value:r.terms?.price,onChange:O=>a(B=>({...B,terms:{...B.terms,price:O.target.value}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Delivery Weeks"}),h.jsx("input",{type:"number",value:r.terms?.deliveryWeeks,onChange:O=>a(B=>({...B,terms:{...B.terms,deliveryWeeks:O.target.value}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),h.jsxs("div",{className:"col-span-1 md:col-span-2",children:[h.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 block mb-2",children:"Payment Milestones"}),(r.terms?.payment||[]).map((O,B)=>h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsx("input",{value:O.name,onChange:te=>{const de=[...r.terms.payment];de[B].name=te.target.value,a(fe=>({...fe,terms:{...fe.terms,payment:de}}))},className:"flex-1 p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"Milestone Name"}),h.jsx("input",{type:"number",value:O.percent,onChange:te=>{const de=[...r.terms.payment];de[B].percent=Number(te.target.value),a(fe=>({...fe,terms:{...fe.terms,payment:de}}))},className:"w-16 p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"%"}),h.jsx("button",{onClick:()=>{const te=r.terms.payment.filter((de,fe)=>fe!==B);a(de=>({...de,terms:{...de.terms,payment:te}}))},className:"text-red-400",children:h.jsx(nm,{size:14})})]},B)),h.jsx("button",{onClick:()=>a(O=>({...O,terms:{...O.terms,payment:[...O.terms.payment||[],{name:"",percent:0}]}})),className:"text-xs text-teal-600 font-bold",children:"+ Add Milestone"})]}),h.jsxs("div",{className:"col-span-1 md:col-span-2 space-y-4 pt-4 border-t border-slate-100 dark:border-slate-700",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Validity"}),h.jsx("input",{value:r.terms?.validity,onChange:O=>a(B=>({...B,terms:{...B.terms,validity:O.target.value}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Warranty Terms"}),h.jsx("textarea",{rows:4,value:r.terms?.warranty,onChange:O=>a(B=>({...B,terms:{...B.terms,warranty:O.target.value}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] uppercase font-bold text-teal-600 dark:text-teal-400 mb-2 block",children:"Client Scope of Work"}),h.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(r.terms?.scope||{}).map(([O,B])=>h.jsxs("div",{children:[h.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:O==="elec"?"Electricity":O==="net"?"Internet":O==="soft"?"Software":O==="perm"?"Permissions":O==="pc"?"Computer":O}),h.jsx("textarea",{rows:2,value:B,onChange:te=>a(de=>({...de,terms:{...de.terms,scope:{...de.terms.scope,[O]:te.target.value}}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]},O))})]})]})]})]})}),h.jsx("div",{className:"h-10"})]}),h.jsxs("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-24",children:[h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[h.jsxs("div",{className:"p-5 bg-gradient-to-br from-slate-50 to-white dark:from-slate-700 dark:to-slate-800",children:[r.screens.length>1&&N&&h.jsxs("div",{className:"mb-4 pb-4 border-b border-slate-200 dark:border-slate-600",children:[h.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 mb-2",children:"Project Summary"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded",children:[h.jsx("div",{className:"text-[10px] text-blue-600 dark:text-blue-400 font-semibold",children:"Screen Types"}),h.jsx("div",{className:"font-bold text-blue-800 dark:text-blue-300",children:r.screens.length})]}),h.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-2 rounded",children:[h.jsx("div",{className:"text-[10px] text-teal-600 dark:text-teal-400 font-semibold",children:"Total Qty"}),h.jsx("div",{className:"font-bold text-teal-800 dark:text-teal-300",children:N.totalScreenQty})]})]})]}),h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Margin Strategy"}),h.jsxs("select",{value:r.pricingMode||"margin",onChange:O=>{const B=O.target.value;if(Pe("pricingMode",B),B!=="margin"&&F){let te=0;B==="screen"?te=F.matrix.sell.unit:B==="sqft"?te=F.matrix.sell.sqft:B==="sqm"&&(te=F.matrix.sell.sqft*10.7639),Pe("targetSellPrice",Math.round(te))}},className:"text-xs border-none bg-transparent font-bold text-teal-600 dark:text-teal-400 focus:ring-0 cursor-pointer outline-none",children:[h.jsx("option",{value:"margin",children:"Margin %"}),h.jsx("option",{value:"sqft",children:"Price / Sq.Ft"}),h.jsx("option",{value:"sqm",children:"Price / Sq.Mtr"}),h.jsx("option",{value:"screen",children:"Price / Screen"})]})]}),h.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[h.jsx("input",{type:"number",value:r.pricingMode==="margin"?K:r.targetSellPrice,onChange:O=>{const B=parseFloat(O.target.value)||0;r.pricingMode==="margin"?Pe("margin",B):Pe("targetSellPrice",B)},className:"w-24 text-center text-xl font-bold p-2 border rounded-lg bg-white dark:bg-slate-600 dark:border-slate-500 shadow-sm focus:ring-2 focus:ring-teal-500/50 outline-none dark:text-white"}),h.jsx("span",{className:"text-lg font-bold text-slate-400",children:r.pricingMode==="margin"?"%":""}),h.jsxs("div",{className:"flex-1 text-right",children:[h.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold",children:r.screens.length>1?"Total Profit":"Est. Profit"}),h.jsx("div",{className:`text-sm font-bold ${(N?N.totalMargin:F?.matrix.margin.total||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:N?Me(N.totalMargin,"INR"):F?Me(F.matrix.margin.total,"INR"):"-"})]})]}),h.jsx("div",{className:"space-y-3 pt-4 border-t border-slate-100 dark:border-slate-600",children:r.screens.length>1?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"LED Panels (All)"}),h.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:N?Me(N.totalLEDSell,"INR"):"-"})]}),h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Services & Extras"}),h.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:N?Me(N.totalServicesSell,"INR"):"-"})]}),h.jsxs("details",{className:"group",children:[h.jsx("summary",{className:"text-[10px] text-teal-600 dark:text-teal-400 font-bold uppercase cursor-pointer hover:underline",children:"View Screen Breakdown"}),h.jsx("div",{className:"mt-2 space-y-2 pl-2 border-l-2 border-slate-200 dark:border-slate-600",children:N?.calculations.map((O,B)=>h.jsx("div",{className:"text-xs",children:h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Screen #",B+1,h.jsxs("span",{className:"text-[10px] ml-1",children:["(",r.screens[B].targetWidth,"",r.screens[B].targetHeight,C," ",O.screenQty,")"]})]}),h.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:Me(O.totalProjectSell,"INR")})]})},B))})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"LED Panel Price"}),h.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:F?Me(F.matrix.led.sell*F.screenQty,"INR"):"-"})]}),h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Services & Extras"}),h.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:F?Me(F.matrix.sell.total-F.matrix.led.sell*F.screenQty,"INR"):"-"})]}),h.jsxs("div",{className:"flex justify-between items-end pt-2 mt-2 border-t border-dashed border-slate-200 dark:border-slate-600",children:[h.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"Rate / Sq.Ft"}),h.jsx("span",{className:"font-bold text-slate-500 dark:text-slate-400",children:F?Me(F.matrix.sell.sqft,"INR"):"-"})]})]})})]}),h.jsxs("div",{className:"bg-slate-900 p-5 text-white",children:[h.jsxs("div",{className:"flex justify-between items-center mb-1",children:[h.jsx("span",{className:"text-sm text-slate-400",children:"Grand Total (Ex. GST)"}),r.screens.length>1&&h.jsxs("span",{className:"text-xs text-teal-400 font-bold",children:[N?.totalScreenQty||0," screens"]})]}),h.jsx("div",{className:"flex justify-between items-baseline",children:h.jsx("span",{className:"text-3xl font-bold tracking-tight",children:N?Me(N.totalProjectSell,"INR"):F?Me(F.totalProjectSell,"INR"):"-"})}),h.jsxs("div",{className:"flex gap-2 mt-4",children:[h.jsxs("button",{onClick:()=>j(!0),className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-xs font-bold flex flex-col items-center justify-center gap-1 transition-colors border border-slate-700 py-2",children:[h.jsx(My,{size:16,className:"text-blue-400"})," BOM"]}),h.jsxs("button",{onClick:()=>w(!0),className:"flex-1 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-xs font-bold flex flex-col items-center justify-center gap-1 transition-colors border border-slate-700 py-2",children:[h.jsx(zf,{size:16})," Print"]}),h.jsxs("button",{onClick:()=>p(N?N.totalProjectSell:F?.totalProjectSell),className:"flex-[2] bg-teal-600 hover:bg-teal-500 text-white font-bold rounded-lg shadow-lg shadow-teal-900/20 transition-all flex justify-center items-center gap-2 py-2",children:[h.jsx(AC,{size:18})," Save"]})]})]})]}),h.jsx("div",{className:"bg-slate-900 rounded-xl shadow-lg p-6 text-white overflow-hidden relative min-h-[250px] flex items-center justify-center",children:F?h.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:h.jsx(c3,{cols:F.gridCols,rows:F.gridRows,module:F.moduleType,cabinet:F.cabinetType,unit:C})}):h.jsxs("div",{className:"text-slate-500 flex flex-col items-center",children:[h.jsx(vC,{size:32,className:"mb-2 opacity-50"}),h.jsx("span",{children:"Enter dimensions"})]})})]})]})},p3=()=>{const[s,e]=mn.useState(null),[t,r]=mn.useState("quote"),[a,l]=mn.useState([]),[u,p]=mn.useState([]),[f,y]=mn.useState(!1),[v,E]=mn.useState(Dt.DEFAULTS.EXCHANGE_RATE),T={client:"",project:"",unit:"m",screens:[{id:S0(),screenQty:0,targetWidth:0,targetHeight:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedSMPSId:"",selectedProcId:"",sizingMode:"closest",readyId:"",extraComponents:[],overrides:{},editingRow:null,extras:[],commercials:{processor:{val:0,unit:"screen",cost:0,costType:"abs"},installation:{val:0,unit:"sqft",cost:0,costType:"abs"},structure:{val:0,unit:"sqft",cost:0,costType:"abs"}}}],activeScreenIndex:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedSMPSId:"",selectedProcId:"",sizingMode:"closest",readyId:"",margin:0,targetSellPrice:0,pricingMode:"margin",commercials:{processor:{val:0,unit:"screen"},installation:{val:0,unit:"sqft"},structure:{val:0,unit:"sqft"}},terms:{price:Dt.DEFAULTS.PRICE_BASIS,deliveryWeeks:Dt.DEFAULTS.DELIVERY_WEEKS,payment:Dt.DEFAULTS.PAYMENT_TERMS,validity:Dt.TEXT.VALIDITY,warranty:Dt.TEXT.WARRANTY,scope:{structure:Dt.TEXT.SCOPE_STRUCTURE,elec:Dt.TEXT.SCOPE_ELEC,net:Dt.TEXT.SCOPE_NET,soft:Dt.TEXT.SCOPE_SOFT,perm:Dt.TEXT.SCOPE_PERM,pc:Dt.TEXT.SCOPE_PC}},extraComponents:[],extras:[],overrides:{},editingRow:null},[C,U]=mn.useState(T);mn.useEffect(()=>{eI.onAuthStateChanged(e),eI.signInAnonymously().catch(console.error)},[]),mn.useEffect(()=>{document.documentElement.classList.toggle("dark",f)},[f]),mn.useEffect(()=>{if(!s||!_r)return;const K=_r.collection("artifacts").doc(Jr).collection("public").doc("data").collection("inventory").onSnapshot(oe=>l(oe.docs.map(pe=>({id:pe.id,...pe.data()})))),ne=_r.collection("artifacts").doc(Jr).collection("public").doc("data").collection("transactions").onSnapshot(oe=>p(oe.docs.map(pe=>({id:pe.id,...pe.data()}))));return()=>{K(),ne()}},[s]);const H=async K=>{if(!C.client||!C.project)return alert("Please enter Client and Project names.");let ne=null;if(C.screens&&C.screens.length>0){const oe=C.screens.map(pe=>{const F={...C,...pe};return xo(F,a,u,v)}).filter(pe=>pe!==null);oe.length>0&&(ne={totalProjectCost:oe.reduce((pe,F)=>pe+F.totalProjectCost,0),totalProjectSell:oe.reduce((pe,F)=>pe+F.totalProjectSell,0),totalLEDSell:oe.reduce((pe,F)=>pe+F.matrix.led.sell*F.screenQty,0),totalServicesSell:oe.reduce((pe,F)=>pe+(F.matrix.sell.total-F.matrix.led.sell*F.screenQty),0),totalMargin:0,totalScreenQty:oe.reduce((pe,F)=>pe+F.screenQty,0),calculations:oe,screenConfigs:C.screens},ne.totalMargin=ne.totalProjectSell-ne.totalProjectCost)}try{await _r.collection("artifacts").doc(Jr).collection("public").doc("data").collection("quotes").add({client:C.client,project:C.project,calculatorState:C,finalAmount:K||0,screenCount:C.screens.length,totalScreenQty:ne?.totalScreenQty||0,allScreensData:ne,updatedAt:new Date}),alert("Quote Saved Successfully!")}catch(oe){console.error(oe),alert("Error saving quote.")}},J=(K,ne)=>{const oe={...T,...K.calculatorState};oe.terms={...T.terms,...K.calculatorState.terms||{},scope:{...T.terms.scope,...K.calculatorState.terms?.scope||{}}},ne&&(oe.client=oe.client+" (Copy)",oe.project=oe.project+" (Copy)"),U(oe),r("quote")};return s?h.jsxs("div",{className:"min-h-screen no-print pb-20 bg-slate-50 dark:bg-slate-900 transition-colors font-sans",children:[h.jsxs("nav",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50 px-4 md:px-6 h-16 flex items-center justify-between shadow-sm",children:[h.jsx("div",{className:"flex items-center gap-3",children:h.jsx("img",{src:"/AdmireLED/logo.png",alt:"Logo",className:"h-10 w-auto"})}),h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsxs("div",{className:"hidden md:flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[h.jsx("button",{onClick:()=>r("quote"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-all ${t==="quote"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Calculator"}),h.jsx("button",{onClick:()=>r("inventory"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${t==="inventory"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Components"}),h.jsx("button",{onClick:()=>r("ledger"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${t==="ledger"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Stock"}),h.jsx("button",{onClick:()=>r("saved"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${t==="saved"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Quotes"})]}),h.jsxs("div",{className:"flex items-center gap-2 pl-4 border-l border-slate-200 dark:border-slate-700",children:[h.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 rounded px-2 py-1",title:"Exchange rate for USD items",children:[h.jsx("span",{className:"text-[10px] text-slate-500 font-bold mr-1",children:"$1="}),h.jsx("input",{type:"number",value:v,onChange:K=>E(Number(K.target.value)),className:"w-8 bg-transparent text-xs outline-none font-bold dark:text-white"})]}),h.jsx("button",{onClick:()=>y(!f),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400 transition-colors",children:f?h.jsx(DC,{size:18}):h.jsx(EC,{size:18})})]})]})]}),h.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-16 z-40 flex shadow-sm",children:[h.jsx("button",{onClick:()=>r("quote"),className:`flex-1 py-3 text-xs font-bold text-center border-b-2 transition-colors ${t==="quote"?"border-teal-600 text-teal-600 dark:text-teal-400":"border-transparent text-slate-500 dark:text-slate-400"}`,children:"Calculator"}),h.jsx("button",{onClick:()=>r("inventory"),className:`flex-1 py-3 text-xs font-bold text-center border-b-2 transition-colors ${t==="inventory"?"border-teal-600 text-teal-600 dark:text-teal-400":"border-transparent text-slate-500 dark:text-slate-400"}`,children:"Components"}),h.jsx("button",{onClick:()=>r("ledger"),className:`flex-1 py-3 text-xs font-bold text-center border-b-2 transition-colors ${t==="ledger"?"border-teal-600 text-teal-600 dark:text-teal-400":"border-transparent text-slate-500 dark:text-slate-400"}`,children:"Stock"}),h.jsx("button",{onClick:()=>r("saved"),className:`flex-1 py-3 text-xs font-bold text-center border-b-2 transition-colors ${t==="saved"?"border-teal-600 text-teal-600 dark:text-teal-400":"border-transparent text-slate-500 dark:text-slate-400"}`,children:"Quotes"})]}),h.jsxs("main",{className:"max-w-[1600px] mx-auto p-4 md:p-6",children:[t==="inventory"&&h.jsx(a3,{user:s,transactions:u}),t==="ledger"&&h.jsx(o3,{user:s,inventory:a,transactions:u}),t==="saved"&&h.jsx(u3,{user:s,inventory:a,transactions:u,exchangeRate:v,onLoadQuote:J}),t==="quote"&&h.jsx(m3,{user:s,inventory:a,transactions:u,state:C,setState:U,exchangeRate:v,setExchangeRate:E,onSaveQuote:H})]})]}):h.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"})})};sC.createRoot(document.getElementById("root")).render(h.jsx(Pt.StrictMode,{children:h.jsx(p3,{})}));

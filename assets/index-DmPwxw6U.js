(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function A0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var cy={exports:{}},ju={};var PE;function $R(){if(PE)return ju;PE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var p in a)p!=="key"&&(l[p]=a[p])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:u,ref:a!==void 0?a:null,props:l}}return ju.Fragment=e,ju.jsx=t,ju.jsxs=t,ju}var VE;function YR(){return VE||(VE=1,cy.exports=$R()),cy.exports}var m=YR(),uy={exports:{}},je={};var jE;function WR(){if(jE)return je;jE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function R(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,W={};function S(V,ee,ge){this.props=V,this.context=ee,this.refs=W,this.updater=ge||q}S.prototype.isReactComponent={},S.prototype.setState=function(V,ee){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ee,"setState")},S.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function J(){}J.prototype=S.prototype;function se(V,ee,ge){this.props=V,this.context=ee,this.refs=W,this.updater=ge||q}var me=se.prototype=new J;me.constructor=se,U(me,S.prototype),me.isPureReactComponent=!0;var re=Array.isArray;function ce(){}var A={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function k(V,ee,ge){var K=ge.ref;return{$$typeof:s,type:V,key:ee,ref:K!==void 0?K:null,props:ge}}function j(V,ee){return k(V.type,ee,V.props)}function P(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function M(V){var ee={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ge){return ee[ge]})}var C=/\/+/g;function Oe(V,ee){return typeof V=="object"&&V!==null&&V.key!=null?M(""+V.key):ee.toString(36)}function Ue(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ce,ce):(V.status="pending",V.then(function(ee){V.status==="pending"&&(V.status="fulfilled",V.value=ee)},function(ee){V.status==="pending"&&(V.status="rejected",V.reason=ee)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function X(V,ee,ge,K,te){var ae=typeof V;(ae==="undefined"||ae==="boolean")&&(V=null);var pe=!1;if(V===null)pe=!0;else switch(ae){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(V.$$typeof){case s:case e:pe=!0;break;case b:return pe=V._init,X(pe(V._payload),ee,ge,K,te)}}if(pe)return te=te(V),pe=K===""?"."+Oe(V,0):K,re(te)?(ge="",pe!=null&&(ge=pe.replace(C,"$&/")+"/"),X(te,ee,ge,"",function(ar){return ar})):te!=null&&(P(te)&&(te=j(te,ge+(te.key==null||V&&V.key===te.key?"":(""+te.key).replace(C,"$&/")+"/")+pe)),ee.push(te)),1;pe=0;var Ee=K===""?".":K+":";if(re(V))for(var Re=0;Re<V.length;Re++)K=V[Re],ae=Ee+Oe(K,Re),pe+=X(K,ee,ge,ae,te);else if(Re=R(V),typeof Re=="function")for(V=Re.call(V),Re=0;!(K=V.next()).done;)K=K.value,ae=Ee+Oe(K,Re++),pe+=X(K,ee,ge,ae,te);else if(ae==="object"){if(typeof V.then=="function")return X(Ue(V),ee,ge,K,te);throw ee=String(V),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return pe}function he(V,ee,ge){if(V==null)return V;var K=[],te=0;return X(V,K,"","",function(ae){return ee.call(ge,ae,te++)}),K}function Te(V){if(V._status===-1){var ee=V._result;ee=ee(),ee.then(function(ge){(V._status===0||V._status===-1)&&(V._status=1,V._result=ge)},function(ge){(V._status===0||V._status===-1)&&(V._status=2,V._result=ge)}),V._status===-1&&(V._status=0,V._result=ee)}if(V._status===1)return V._result.default;throw V._result}var Me=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},ze={map:he,forEach:function(V,ee,ge){he(V,function(){ee.apply(this,arguments)},ge)},count:function(V){var ee=0;return he(V,function(){ee++}),ee},toArray:function(V){return he(V,function(ee){return ee})||[]},only:function(V){if(!P(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return je.Activity=E,je.Children=ze,je.Component=S,je.Fragment=t,je.Profiler=a,je.PureComponent=se,je.StrictMode=r,je.Suspense=h,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,je.__COMPILER_RUNTIME={__proto__:null,c:function(V){return A.H.useMemoCache(V)}},je.cache=function(V){return function(){return V.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(V,ee,ge){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var K=U({},V.props),te=V.key;if(ee!=null)for(ae in ee.key!==void 0&&(te=""+ee.key),ee)!N.call(ee,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&ee.ref===void 0||(K[ae]=ee[ae]);var ae=arguments.length-2;if(ae===1)K.children=ge;else if(1<ae){for(var pe=Array(ae),Ee=0;Ee<ae;Ee++)pe[Ee]=arguments[Ee+2];K.children=pe}return k(V.type,te,K)},je.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},je.createElement=function(V,ee,ge){var K,te={},ae=null;if(ee!=null)for(K in ee.key!==void 0&&(ae=""+ee.key),ee)N.call(ee,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(te[K]=ee[K]);var pe=arguments.length-2;if(pe===1)te.children=ge;else if(1<pe){for(var Ee=Array(pe),Re=0;Re<pe;Re++)Ee[Re]=arguments[Re+2];te.children=Ee}if(V&&V.defaultProps)for(K in pe=V.defaultProps,pe)te[K]===void 0&&(te[K]=pe[K]);return k(V,ae,te)},je.createRef=function(){return{current:null}},je.forwardRef=function(V){return{$$typeof:p,render:V}},je.isValidElement=P,je.lazy=function(V){return{$$typeof:b,_payload:{_status:-1,_result:V},_init:Te}},je.memo=function(V,ee){return{$$typeof:y,type:V,compare:ee===void 0?null:ee}},je.startTransition=function(V){var ee=A.T,ge={};A.T=ge;try{var K=V(),te=A.S;te!==null&&te(ge,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(ce,Me)}catch(ae){Me(ae)}finally{ee!==null&&ge.types!==null&&(ee.types=ge.types),A.T=ee}},je.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},je.use=function(V){return A.H.use(V)},je.useActionState=function(V,ee,ge){return A.H.useActionState(V,ee,ge)},je.useCallback=function(V,ee){return A.H.useCallback(V,ee)},je.useContext=function(V){return A.H.useContext(V)},je.useDebugValue=function(){},je.useDeferredValue=function(V,ee){return A.H.useDeferredValue(V,ee)},je.useEffect=function(V,ee){return A.H.useEffect(V,ee)},je.useEffectEvent=function(V){return A.H.useEffectEvent(V)},je.useId=function(){return A.H.useId()},je.useImperativeHandle=function(V,ee,ge){return A.H.useImperativeHandle(V,ee,ge)},je.useInsertionEffect=function(V,ee){return A.H.useInsertionEffect(V,ee)},je.useLayoutEffect=function(V,ee){return A.H.useLayoutEffect(V,ee)},je.useMemo=function(V,ee){return A.H.useMemo(V,ee)},je.useOptimistic=function(V,ee){return A.H.useOptimistic(V,ee)},je.useReducer=function(V,ee,ge){return A.H.useReducer(V,ee,ge)},je.useRef=function(V){return A.H.useRef(V)},je.useState=function(V){return A.H.useState(V)},je.useSyncExternalStore=function(V,ee,ge){return A.H.useSyncExternalStore(V,ee,ge)},je.useTransition=function(){return A.H.useTransition()},je.version="19.2.3",je}var OE;function N0(){return OE||(OE=1,uy.exports=WR()),uy.exports}var wn=N0();const Ht=A0(wn);var dy={exports:{}},Ou={},hy={exports:{}},fy={};var ME;function XR(){return ME||(ME=1,(function(s){function e(X,he){var Te=X.length;X.push(he);e:for(;0<Te;){var Me=Te-1>>>1,ze=X[Me];if(0<a(ze,he))X[Me]=he,X[Te]=ze,Te=Me;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var he=X[0],Te=X.pop();if(Te!==he){X[0]=Te;e:for(var Me=0,ze=X.length,V=ze>>>1;Me<V;){var ee=2*(Me+1)-1,ge=X[ee],K=ee+1,te=X[K];if(0>a(ge,Te))K<ze&&0>a(te,ge)?(X[Me]=te,X[K]=Te,Me=K):(X[Me]=ge,X[ee]=Te,Me=ee);else if(K<ze&&0>a(te,Te))X[Me]=te,X[K]=Te,Me=K;else break e}}return he}function a(X,he){var Te=X.sortIndex-he.sortIndex;return Te!==0?Te:X.id-he.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var u=Date,p=u.now();s.unstable_now=function(){return u.now()-p}}var h=[],y=[],b=1,E=null,T=3,R=!1,q=!1,U=!1,W=!1,S=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function me(X){for(var he=t(y);he!==null;){if(he.callback===null)r(y);else if(he.startTime<=X)r(y),he.sortIndex=he.expirationTime,e(h,he);else break;he=t(y)}}function re(X){if(U=!1,me(X),!q)if(t(h)!==null)q=!0,ce||(ce=!0,M());else{var he=t(y);he!==null&&Ue(re,he.startTime-X)}}var ce=!1,A=-1,N=5,k=-1;function j(){return W?!0:!(s.unstable_now()-k<N)}function P(){if(W=!1,ce){var X=s.unstable_now();k=X;var he=!0;try{e:{q=!1,U&&(U=!1,J(A),A=-1),R=!0;var Te=T;try{t:{for(me(X),E=t(h);E!==null&&!(E.expirationTime>X&&j());){var Me=E.callback;if(typeof Me=="function"){E.callback=null,T=E.priorityLevel;var ze=Me(E.expirationTime<=X);if(X=s.unstable_now(),typeof ze=="function"){E.callback=ze,me(X),he=!0;break t}E===t(h)&&r(h),me(X)}else r(h);E=t(h)}if(E!==null)he=!0;else{var V=t(y);V!==null&&Ue(re,V.startTime-X),he=!1}}break e}finally{E=null,T=Te,R=!1}he=void 0}}finally{he?M():ce=!1}}}var M;if(typeof se=="function")M=function(){se(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Oe=C.port2;C.port1.onmessage=P,M=function(){Oe.postMessage(null)}}else M=function(){S(P,0)};function Ue(X,he){A=S(function(){X(s.unstable_now())},he)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(X){X.callback=null},s.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(X){switch(T){case 1:case 2:case 3:var he=3;break;default:he=T}var Te=T;T=he;try{return X()}finally{T=Te}},s.unstable_requestPaint=function(){W=!0},s.unstable_runWithPriority=function(X,he){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Te=T;T=X;try{return he()}finally{T=Te}},s.unstable_scheduleCallback=function(X,he,Te){var Me=s.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Me+Te:Me):Te=Me,X){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=Te+ze,X={id:b++,callback:he,priorityLevel:X,startTime:Te,expirationTime:ze,sortIndex:-1},Te>Me?(X.sortIndex=Te,e(y,X),t(h)===null&&X===t(y)&&(U?(J(A),A=-1):U=!0,Ue(re,Te-Me))):(X.sortIndex=ze,e(h,X),q||R||(q=!0,ce||(ce=!0,M()))),X},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(X){var he=T;return function(){var Te=T;T=he;try{return X.apply(this,arguments)}finally{T=Te}}}})(fy)),fy}var LE;function JR(){return LE||(LE=1,hy.exports=XR()),hy.exports}var my={exports:{}},Dn={};var UE;function ZR(){if(UE)return Dn;UE=1;var s=N0();function e(h){var y="https://react.dev/errors/"+h;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+h+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(h,y,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:h,containerInfo:y,implementation:b}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(h,y){if(h==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Dn.createPortal=function(h,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(h,y,null,b)},Dn.flushSync=function(h){var y=u.T,b=r.p;try{if(u.T=null,r.p=2,h)return h()}finally{u.T=y,r.p=b,r.d.f()}},Dn.preconnect=function(h,y){typeof h=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(h,y))},Dn.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Dn.preinit=function(h,y){if(typeof h=="string"&&y&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,R=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(h,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:R}):b==="script"&&r.d.X(h,{crossOrigin:E,integrity:T,fetchPriority:R,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Dn.preinitModule=function(h,y){if(typeof h=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);r.d.M(h,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(h)},Dn.preload=function(h,y){if(typeof h=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin);r.d.L(h,b,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Dn.preloadModule=function(h,y){if(typeof h=="string")if(y){var b=p(y.as,y.crossOrigin);r.d.m(h,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(h)},Dn.requestFormReset=function(h){r.d.r(h)},Dn.unstable_batchedUpdates=function(h,y){return h(y)},Dn.useFormState=function(h,y,b){return u.H.useFormState(h,y,b)},Dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Dn.version="19.2.3",Dn}var zE;function eI(){if(zE)return my.exports;zE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),my.exports=ZR(),my.exports}var BE;function eC(){if(BE)return Ou;BE=1;var s=JR(),e=N0(),t=eI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function p(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function h(n){if(l(n)!==n)throw Error(r(188))}function y(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,c=i;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return h(f),n;if(g===c)return h(f),i;g=g.sibling}throw Error(r(188))}if(o.return!==c.return)o=f,c=g;else{for(var v=!1,w=f.child;w;){if(w===o){v=!0,o=f,c=g;break}if(w===c){v=!0,c=f,o=g;break}w=w.sibling}if(!v){for(w=g.child;w;){if(w===o){v=!0,o=g,c=f;break}if(w===c){v=!0,c=g,o=f;break}w=w.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function b(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=b(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),se=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function M(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Oe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case U:return"Fragment";case S:return"Profiler";case W:return"StrictMode";case re:return"Suspense";case ce:return"SuspenseList";case k:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case q:return"Portal";case se:return n.displayName||"Context";case J:return(n._context.displayName||"Context")+".Consumer";case me:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A:return i=n.displayName||null,i!==null?i:Oe(n.type)||"Memo";case N:i=n._payload,n=n._init;try{return Oe(n(i))}catch{}}return null}var Ue=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Me=[],ze=-1;function V(n){return{current:n}}function ee(n){0>ze||(n.current=Me[ze],Me[ze]=null,ze--)}function ge(n,i){ze++,Me[ze]=n.current,n.current=i}var K=V(null),te=V(null),ae=V(null),pe=V(null);function Ee(n,i){switch(ge(ae,i),ge(te,n),ge(K,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?nE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=nE(i),n=rE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ee(K),ge(K,n)}function Re(){ee(K),ee(te),ee(ae)}function ar(n){n.memoizedState!==null&&ge(pe,n);var i=K.current,o=rE(i,n.type);i!==o&&(ge(te,n),ge(K,o))}function Ut(n){te.current===n&&(ee(K),ee(te)),pe.current===n&&(ee(pe),ku._currentValue=Te)}var yn,xr;function on(n){if(yn===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);yn=i&&i[1]||"",xr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yn+n+xr}var Qn=!1;function Cn(n,i){if(!n||Qn)return"";Qn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var G=Z}Reflect.construct(n,[],oe)}else{try{oe.call()}catch(Z){G=Z}n.call(oe.prototype)}}else{try{throw Error()}catch(Z){G=Z}(oe=n())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&G&&typeof Z.stack=="string")return[Z.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),v=g[0],w=g[1];if(v&&w){var D=v.split(`
`),H=w.split(`
`);for(f=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(c===D.length||f===H.length)for(c=D.length-1,f=H.length-1;1<=c&&0<=f&&D[c]!==H[f];)f--;for(;1<=c&&0<=f;c--,f--)if(D[c]!==H[f]){if(c!==1||f!==1)do if(c--,f--,0>f||D[c]!==H[f]){var ne=`
`+D[c].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=c&&0<=f);break}}}finally{Qn=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?on(o):""}function Kn(n,i){switch(n.tag){case 26:case 27:case 5:return on(n.type);case 16:return on("Lazy");case 13:return n.child!==i&&i!==null?on("Suspense Fallback"):on("Suspense");case 19:return on("SuspenseList");case 0:case 15:return Cn(n.type,!1);case 11:return Cn(n.type.render,!1);case 1:return Cn(n.type,!0);case 31:return on("Activity");default:return""}}function $n(n){try{var i="",o=null;do i+=Kn(n,o),o=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var We=Object.prototype.hasOwnProperty,xt=s.unstable_scheduleCallback,kn=s.unstable_cancelCallback,Q=s.unstable_shouldYield,Se=s.unstable_requestPaint,He=s.unstable_now,ue=s.unstable_getCurrentPriorityLevel,kt=s.unstable_ImmediatePriority,_n=s.unstable_UserBlockingPriority,$t=s.unstable_NormalPriority,ka=s.unstable_LowPriority,qs=s.unstable_IdlePriority,jc=s.log,Lr=s.unstable_setDisableYieldValue,Ln=null,be=null;function Ve(n){if(typeof jc=="function"&&Lr(n),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(Ln,n)}catch{}}var et=Math.clz32?Math.clz32:oh,rs=Math.log,Go=Math.LN2;function oh(n){return n>>>=0,n===0?32:31-(rs(n)/Go|0)|0}var ss=256,Da=262144,Yt=4194304;function is(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function as(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,g=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var w=c&134217727;return w!==0?(c=w&~g,c!==0?f=is(c):(v&=w,v!==0?f=is(v):o||(o=w&~n,o!==0&&(f=is(o))))):(w=c&~g,w!==0?f=is(w):v!==0?f=is(v):o||(o=c&~n,o!==0&&(f=is(o)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:f}function Ur(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function fp(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lh(){var n=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),n}function os(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Pa(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function mp(n,i,o,c,f,g){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var w=n.entanglements,D=n.expirationTimes,H=n.hiddenUpdates;for(o=v&~o;0<o;){var ne=31-et(o),oe=1<<ne;w[ne]=0,D[ne]=-1;var G=H[ne];if(G!==null)for(H[ne]=null,ne=0;ne<G.length;ne++){var Z=G[ne];Z!==null&&(Z.lane&=-536870913)}o&=~oe}c!==0&&Va(n,c,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(v&~i))}function Va(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-et(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Oc(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-et(o),f=1<<c;f&i|n[c]&i&&(n[c]|=i),o&=~f}}function Mc(n,i){var o=i&-i;return o=(o&42)!==0?1:ja(o),(o&(n.suspendedLanes|i))!==0?0:o}function ja(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Fs(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ch(){var n=he.p;return n!==0?n:(n=window.event,n===void 0?32:SE(n.type))}function zr(n,i){var o=he.p;try{return he.p=n,i()}finally{he.p=o}}var Br=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Br,dn="__reactProps$"+Br,ls="__reactContainer$"+Br,Qo="__reactEvents$"+Br,pp="__reactListeners$"+Br,uh="__reactHandles$"+Br,dh="__reactResources$"+Br,cs="__reactMarker$"+Br;function Ko(n){delete n[Wt],delete n[dn],delete n[Qo],delete n[pp],delete n[uh]}function us(n){var i=n[Wt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[ls]||o[Wt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=uE(n);n!==null;){if(o=n[Wt])return o;n=uE(n)}return i}n=o,o=n.parentNode}return null}function Er(n){if(n=n[Wt]||n[ls]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function or(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function ds(n){var i=n[dh];return i||(i=n[dh]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Xt(n){n[cs]=!0}var Lc=new Set,Uc={};function hs(n,i){fs(n,i),fs(n+"Capture",i)}function fs(n,i){for(Uc[n]=i,n=0;n<i.length;n++)Lc.add(i[n])}var zc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bc={},qc={};function hh(n){return We.call(qc,n)?!0:We.call(Bc,n)?!1:zc.test(n)?qc[n]=!0:(Bc[n]=!0,!1)}function $o(n,i,o){if(hh(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function lr(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Jt(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}function hn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ei(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Fc(n,i,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,g=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,g.call(this,v)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ct(n){if(!n._valueTracker){var i=Ei(n)?"checked":"value";n._valueTracker=Fc(n,i,""+n[i])}}function Oa(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=Ei(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function ms(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ma=/[\n"\\]/g;function Yn(n){return n.replace(Ma,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Yo(n,i,o,c,f,g,v,w){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+hn(i)):n.value!==""+hn(i)&&(n.value=""+hn(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?Hc(n,v,hn(i)):o!=null?Hc(n,v,hn(o)):c!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+hn(w):n.removeAttribute("name")}function fh(n,i,o,c,f,g,v,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){ct(n);return}o=o!=null?""+hn(o):"",i=i!=null?""+hn(i):o,w||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=w?n.checked:!!c,n.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),ct(n)}function Hc(n,i,o){i==="number"&&ms(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ti(n,i,o,c){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+hn(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function mh(n,i,o){if(i!=null&&(i=""+hn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+hn(o):""}function wi(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(r(92));if(Ue(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=hn(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),ct(n)}function Wn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var ph=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gc(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||ph.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Qc(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&o[f]!==c&&Gc(n,f,c)}else for(var g in i)i.hasOwnProperty(g)&&Gc(n,g,i[g])}function Wo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ii=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xo(n){return Ii.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function qr(){}var Kc=null;function Tr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Si=null,ps=null;function La(n){var i=Er(n);if(i&&(n=i.stateNode)){var o=n[dn]||null;e:switch(n=i.stateNode,i.type){case"input":if(Yo(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Yn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var f=c[dn]||null;if(!f)throw Error(r(90));Yo(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&Oa(c)}break e;case"textarea":mh(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ti(n,!!o.multiple,i,!1)}}}var Jo=!1;function Ai(n,i,o){if(Jo)return n(i,o);Jo=!0;try{var c=n(i);return c}finally{if(Jo=!1,(Si!==null||ps!==null)&&(uf(),Si&&(i=Si,n=ps,ps=Si=null,La(i),n)))for(i=0;i<n.length;i++)La(n[i])}}function Fr(n,i){var o=n.stateNode;if(o===null)return null;var c=o[dn]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ua=!1;if(wr)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){Ua=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{Ua=!1}var gs=null,$c=null,za=null;function Yc(){if(za)return za;var n,i=$c,o=i.length,c,f="value"in gs?gs.value:gs.textContent,g=f.length;for(n=0;n<o&&i[n]===f[n];n++);var v=o-n;for(c=1;c<=v&&i[o-c]===f[g-c];c++);return za=f.slice(n,1<c?1-c:void 0)}function Ba(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Hs(){return!0}function Hr(){return!1}function vn(n){function i(o,c,f,g,v){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(o=n[w],this[w]=o?o(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Hs:Hr,this.isPropagationStopped=Hr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Hs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Hs)},persist:function(){},isPersistent:Hs}),i}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ys=vn(Gs),Ni=E({},Gs,{view:0,detail:0}),Wc=vn(Ni),Ri,Zo,_s,el=E({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ci,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_s&&(_s&&n.type==="mousemove"?(Ri=n.screenX-_s.screenX,Zo=n.screenY-_s.screenY):Zo=Ri=0,_s=n),Ri)},movementY:function(n){return"movementY"in n?n.movementY:Zo}}),Xc=vn(el),qa=E({},el,{dataTransfer:0}),yh=vn(qa),_h=E({},Ni,{relatedTarget:0}),Fa=vn(_h),Jc=E({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),vh=vn(Jc),tl=E({},Gs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bh=vn(tl),xh=E({},Gs,{data:0}),vs=vn(xh),Eh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Th={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ih(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=wh[n])?!!i[n]:!1}function Ci(){return Ih}var Un=E({},Ni,{key:function(n){if(n.key){var i=Eh[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ba(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Th[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ci,charCode:function(n){return n.type==="keypress"?Ba(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ba(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Sh=vn(Un),Ah=E({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qs=vn(Ah),d=E({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ci}),_=vn(d),x=E({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=vn(x),B=E({},el,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=vn(B),ye=E({},Gs,{newState:0,oldState:0}),Be=vn(ye),zt=[9,13,27,32],at=wr&&"CompositionEvent"in window,It=null;wr&&"documentMode"in document&&(It=document.documentMode);var Ir=wr&&"TextEvent"in window&&!It,bs=wr&&(!at||It&&8<It&&11>=It),Gr=" ",Qr=!1;function Ha(n,i){switch(n){case"keyup":return zt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var rl=!1;function _N(n,i){switch(n){case"compositionend":return nl(i);case"keypress":return i.which!==32?null:(Qr=!0,Gr);case"textInput":return n=i.data,n===Gr&&Qr?null:n;default:return null}}function vN(n,i){if(rl)return n==="compositionend"||!at&&Ha(n,i)?(n=Yc(),za=$c=gs=null,rl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return bs&&i.locale!=="ko"?null:i.data;default:return null}}var bN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fv(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!bN[n.type]:i==="textarea"}function mv(n,i,o,c){Si?ps?ps.push(c):ps=[c]:Si=c,i=yf(i,"onChange"),0<i.length&&(o=new ys("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var Zc=null,eu=null;function xN(n){Wx(n,0)}function Nh(n){var i=or(n);if(Oa(i))return n}function pv(n,i){if(n==="change")return i}var gv=!1;if(wr){var gp;if(wr){var yp="oninput"in document;if(!yp){var yv=document.createElement("div");yv.setAttribute("oninput","return;"),yp=typeof yv.oninput=="function"}gp=yp}else gp=!1;gv=gp&&(!document.documentMode||9<document.documentMode)}function _v(){Zc&&(Zc.detachEvent("onpropertychange",vv),eu=Zc=null)}function vv(n){if(n.propertyName==="value"&&Nh(eu)){var i=[];mv(i,eu,n,Tr(n)),Ai(xN,i)}}function EN(n,i,o){n==="focusin"?(_v(),Zc=i,eu=o,Zc.attachEvent("onpropertychange",vv)):n==="focusout"&&_v()}function TN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nh(eu)}function wN(n,i){if(n==="click")return Nh(i)}function IN(n,i){if(n==="input"||n==="change")return Nh(i)}function SN(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var cr=typeof Object.is=="function"?Object.is:SN;function tu(n,i){if(cr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!We.call(i,f)||!cr(n[f],i[f]))return!1}return!0}function bv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xv(n,i){var o=bv(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=bv(o)}}function Ev(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ev(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Tv(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=ms(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=ms(n.document)}return i}function _p(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var AN=wr&&"documentMode"in document&&11>=document.documentMode,sl=null,vp=null,nu=null,bp=!1;function wv(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;bp||sl==null||sl!==ms(c)||(c=sl,"selectionStart"in c&&_p(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),nu&&tu(nu,c)||(nu=c,c=yf(vp,"onSelect"),0<c.length&&(i=new ys("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=sl)))}function Ga(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var il={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},xp={},Iv={};wr&&(Iv=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function Qa(n){if(xp[n])return xp[n];if(!il[n])return n;var i=il[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in Iv)return xp[n]=i[o];return n}var Sv=Qa("animationend"),Av=Qa("animationiteration"),Nv=Qa("animationstart"),NN=Qa("transitionrun"),RN=Qa("transitionstart"),CN=Qa("transitioncancel"),Rv=Qa("transitionend"),Cv=new Map,Ep="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ep.push("scrollEnd");function Kr(n,i){Cv.set(n,i),hs(i,[n])}var Rh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Sr=[],al=0,Tp=0;function Ch(){for(var n=al,i=Tp=al=0;i<n;){var o=Sr[i];Sr[i++]=null;var c=Sr[i];Sr[i++]=null;var f=Sr[i];Sr[i++]=null;var g=Sr[i];if(Sr[i++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}g!==0&&kv(o,f,g)}}function kh(n,i,o,c){Sr[al++]=n,Sr[al++]=i,Sr[al++]=o,Sr[al++]=c,Tp|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function wp(n,i,o,c){return kh(n,i,o,c),Dh(n)}function Ka(n,i){return kh(n,null,null,i),Dh(n)}function kv(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&i!==null&&(f=31-et(o),n=g.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=o|536870912),g):null}function Dh(n){if(50<wu)throw wu=0,Pg=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ol={};function kN(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(n,i,o,c){return new kN(n,i,o,c)}function Ip(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ks(n,i){var o=n.alternate;return o===null?(o=ur(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Dv(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Ph(n,i,o,c,f,g){var v=0;if(c=n,typeof n=="function")Ip(n)&&(v=1);else if(typeof n=="string")v=OR(n,o,K.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case k:return n=ur(31,o,i,f),n.elementType=k,n.lanes=g,n;case U:return $a(o.children,f,g,i);case W:v=8,f|=24;break;case S:return n=ur(12,o,i,f|2),n.elementType=S,n.lanes=g,n;case re:return n=ur(13,o,i,f),n.elementType=re,n.lanes=g,n;case ce:return n=ur(19,o,i,f),n.elementType=ce,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case se:v=10;break e;case J:v=9;break e;case me:v=11;break e;case A:v=14;break e;case N:v=16,c=null;break e}v=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return i=ur(v,o,i,f),i.elementType=n,i.type=c,i.lanes=g,i}function $a(n,i,o,c){return n=ur(7,n,c,i),n.lanes=o,n}function Sp(n,i,o){return n=ur(6,n,null,i),n.lanes=o,n}function Pv(n){var i=ur(18,null,null,0);return i.stateNode=n,i}function Ap(n,i,o){return i=ur(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Vv=new WeakMap;function Ar(n,i){if(typeof n=="object"&&n!==null){var o=Vv.get(n);return o!==void 0?o:(i={value:n,source:i,stack:$n(i)},Vv.set(n,i),i)}return{value:n,source:i,stack:$n(i)}}var ll=[],cl=0,Vh=null,ru=0,Nr=[],Rr=0,ki=null,xs=1,Es="";function $s(n,i){ll[cl++]=ru,ll[cl++]=Vh,Vh=n,ru=i}function jv(n,i,o){Nr[Rr++]=xs,Nr[Rr++]=Es,Nr[Rr++]=ki,ki=n;var c=xs;n=Es;var f=32-et(c)-1;c&=~(1<<f),o+=1;var g=32-et(i)+f;if(30<g){var v=f-f%5;g=(c&(1<<v)-1).toString(32),c>>=v,f-=v,xs=1<<32-et(i)+f|o<<f|c,Es=g+n}else xs=1<<g|o<<f|c,Es=n}function Np(n){n.return!==null&&($s(n,1),jv(n,1,0))}function Rp(n){for(;n===Vh;)Vh=ll[--cl],ll[cl]=null,ru=ll[--cl],ll[cl]=null;for(;n===ki;)ki=Nr[--Rr],Nr[Rr]=null,Es=Nr[--Rr],Nr[Rr]=null,xs=Nr[--Rr],Nr[Rr]=null}function Ov(n,i){Nr[Rr++]=xs,Nr[Rr++]=Es,Nr[Rr++]=ki,xs=i.id,Es=i.overflow,ki=n}var bn=null,Et=null,tt=!1,Di=null,Cr=!1,Cp=Error(r(519));function Pi(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw su(Ar(i,n)),Cp}function Mv(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[Wt]=n,i[dn]=c,o){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(o=0;o<Su.length;o++)Ke(Su[o],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":Ke("invalid",i),fh(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ke("invalid",i);break;case"textarea":Ke("invalid",i),wi(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||eE(i.textContent,o)?(c.popover!=null&&(Ke("beforetoggle",i),Ke("toggle",i)),c.onScroll!=null&&Ke("scroll",i),c.onScrollEnd!=null&&Ke("scrollend",i),c.onClick!=null&&(i.onclick=qr),i=!0):i=!1,i||Pi(n,!0)}function Lv(n){for(bn=n.return;bn;)switch(bn.tag){case 5:case 31:case 13:Cr=!1;return;case 27:case 3:Cr=!0;return;default:bn=bn.return}}function ul(n){if(n!==bn)return!1;if(!tt)return Lv(n),tt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||$g(n.type,n.memoizedProps)),o=!o),o&&Et&&Pi(n),Lv(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Et=cE(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Et=cE(n)}else i===27?(i=Et,Ki(n.type)?(n=Zg,Zg=null,Et=n):Et=i):Et=bn?Dr(n.stateNode.nextSibling):null;return!0}function Ya(){Et=bn=null,tt=!1}function kp(){var n=Di;return n!==null&&(er===null?er=n:er.push.apply(er,n),Di=null),n}function su(n){Di===null?Di=[n]:Di.push(n)}var Dp=V(null),Wa=null,Ys=null;function Vi(n,i,o){ge(Dp,i._currentValue),i._currentValue=o}function Ws(n){n._currentValue=Dp.current,ee(Dp)}function Pp(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function Vp(n,i,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var v=f.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=f;for(var D=0;D<i.length;D++)if(w.context===i[D]){g.lanes|=o,w=g.alternate,w!==null&&(w.lanes|=o),Pp(g.return,o,n),c||(v=null);break e}g=w.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=o,g=v.alternate,g!==null&&(g.lanes|=o),Pp(v,o,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function dl(n,i,o,c){n=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var w=f.type;cr(f.pendingProps.value,v.value)||(n!==null?n.push(w):n=[w])}}else if(f===pe.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(ku):n=[ku])}f=f.return}n!==null&&Vp(i,n,o,c),i.flags|=262144}function jh(n){for(n=n.firstContext;n!==null;){if(!cr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Xa(n){Wa=n,Ys=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function xn(n){return Uv(Wa,n)}function Oh(n,i){return Wa===null&&Xa(n),Uv(n,i)}function Uv(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Ys===null){if(n===null)throw Error(r(308));Ys=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Ys=Ys.next=i;return o}var DN=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},PN=s.unstable_scheduleCallback,VN=s.unstable_NormalPriority,Zt={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jp(){return{controller:new DN,data:new Map,refCount:0}}function iu(n){n.refCount--,n.refCount===0&&PN(VN,function(){n.controller.abort()})}var au=null,Op=0,hl=0,fl=null;function jN(n,i){if(au===null){var o=au=[];Op=0,hl=Ug(),fl={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Op++,i.then(zv,zv),i}function zv(){if(--Op===0&&au!==null){fl!==null&&(fl.status="fulfilled");var n=au;au=null,hl=0,fl=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function ON(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Bv=X.S;X.S=function(n,i){wx=He(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&jN(n,i),Bv!==null&&Bv(n,i)};var Ja=V(null);function Mp(){var n=Ja.current;return n!==null?n:_t.pooledCache}function Mh(n,i){i===null?ge(Ja,Ja.current):ge(Ja,i.pool)}function qv(){var n=Mp();return n===null?null:{parent:Zt._currentValue,pool:n}}var ml=Error(r(460)),Lp=Error(r(474)),Lh=Error(r(542)),Uh={then:function(){}};function Fv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Hv(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(qr,qr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Qv(n),n;default:if(typeof i.status=="string")i.then(qr,qr);else{if(n=_t,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Qv(n),n}throw eo=i,ml}}function Za(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(eo=o,ml):o}}var eo=null;function Gv(){if(eo===null)throw Error(r(459));var n=eo;return eo=null,n}function Qv(n){if(n===ml||n===Lh)throw Error(r(483))}var pl=null,ou=0;function zh(n){var i=ou;return ou+=1,pl===null&&(pl=[]),Hv(pl,n,i)}function lu(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Bh(n,i){throw i.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Kv(n){function i(L,O){if(n){var F=L.deletions;F===null?(L.deletions=[O],L.flags|=16):F.push(O)}}function o(L,O){if(!n)return null;for(;O!==null;)i(L,O),O=O.sibling;return null}function c(L){for(var O=new Map;L!==null;)L.key!==null?O.set(L.key,L):O.set(L.index,L),L=L.sibling;return O}function f(L,O){return L=Ks(L,O),L.index=0,L.sibling=null,L}function g(L,O,F){return L.index=F,n?(F=L.alternate,F!==null?(F=F.index,F<O?(L.flags|=67108866,O):F):(L.flags|=67108866,O)):(L.flags|=1048576,O)}function v(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function w(L,O,F,ie){return O===null||O.tag!==6?(O=Sp(F,L.mode,ie),O.return=L,O):(O=f(O,F),O.return=L,O)}function D(L,O,F,ie){var Ce=F.type;return Ce===U?ne(L,O,F.props.children,ie,F.key):O!==null&&(O.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&Za(Ce)===O.type)?(O=f(O,F.props),lu(O,F),O.return=L,O):(O=Ph(F.type,F.key,F.props,null,L.mode,ie),lu(O,F),O.return=L,O)}function H(L,O,F,ie){return O===null||O.tag!==4||O.stateNode.containerInfo!==F.containerInfo||O.stateNode.implementation!==F.implementation?(O=Ap(F,L.mode,ie),O.return=L,O):(O=f(O,F.children||[]),O.return=L,O)}function ne(L,O,F,ie,Ce){return O===null||O.tag!==7?(O=$a(F,L.mode,ie,Ce),O.return=L,O):(O=f(O,F),O.return=L,O)}function oe(L,O,F){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Sp(""+O,L.mode,F),O.return=L,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case R:return F=Ph(O.type,O.key,O.props,null,L.mode,F),lu(F,O),F.return=L,F;case q:return O=Ap(O,L.mode,F),O.return=L,O;case N:return O=Za(O),oe(L,O,F)}if(Ue(O)||M(O))return O=$a(O,L.mode,F,null),O.return=L,O;if(typeof O.then=="function")return oe(L,zh(O),F);if(O.$$typeof===se)return oe(L,Oh(L,O),F);Bh(L,O)}return null}function G(L,O,F,ie){var Ce=O!==null?O.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ce!==null?null:w(L,O,""+F,ie);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case R:return F.key===Ce?D(L,O,F,ie):null;case q:return F.key===Ce?H(L,O,F,ie):null;case N:return F=Za(F),G(L,O,F,ie)}if(Ue(F)||M(F))return Ce!==null?null:ne(L,O,F,ie,null);if(typeof F.then=="function")return G(L,O,zh(F),ie);if(F.$$typeof===se)return G(L,O,Oh(L,F),ie);Bh(L,F)}return null}function Z(L,O,F,ie,Ce){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return L=L.get(F)||null,w(O,L,""+ie,Ce);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case R:return L=L.get(ie.key===null?F:ie.key)||null,D(O,L,ie,Ce);case q:return L=L.get(ie.key===null?F:ie.key)||null,H(O,L,ie,Ce);case N:return ie=Za(ie),Z(L,O,F,ie,Ce)}if(Ue(ie)||M(ie))return L=L.get(F)||null,ne(O,L,ie,Ce,null);if(typeof ie.then=="function")return Z(L,O,F,zh(ie),Ce);if(ie.$$typeof===se)return Z(L,O,F,Oh(O,ie),Ce);Bh(O,ie)}return null}function we(L,O,F,ie){for(var Ce=null,rt=null,Ae=O,Ge=O=0,Je=null;Ae!==null&&Ge<F.length;Ge++){Ae.index>Ge?(Je=Ae,Ae=null):Je=Ae.sibling;var st=G(L,Ae,F[Ge],ie);if(st===null){Ae===null&&(Ae=Je);break}n&&Ae&&st.alternate===null&&i(L,Ae),O=g(st,O,Ge),rt===null?Ce=st:rt.sibling=st,rt=st,Ae=Je}if(Ge===F.length)return o(L,Ae),tt&&$s(L,Ge),Ce;if(Ae===null){for(;Ge<F.length;Ge++)Ae=oe(L,F[Ge],ie),Ae!==null&&(O=g(Ae,O,Ge),rt===null?Ce=Ae:rt.sibling=Ae,rt=Ae);return tt&&$s(L,Ge),Ce}for(Ae=c(Ae);Ge<F.length;Ge++)Je=Z(Ae,L,Ge,F[Ge],ie),Je!==null&&(n&&Je.alternate!==null&&Ae.delete(Je.key===null?Ge:Je.key),O=g(Je,O,Ge),rt===null?Ce=Je:rt.sibling=Je,rt=Je);return n&&Ae.forEach(function(Ji){return i(L,Ji)}),tt&&$s(L,Ge),Ce}function De(L,O,F,ie){if(F==null)throw Error(r(151));for(var Ce=null,rt=null,Ae=O,Ge=O=0,Je=null,st=F.next();Ae!==null&&!st.done;Ge++,st=F.next()){Ae.index>Ge?(Je=Ae,Ae=null):Je=Ae.sibling;var Ji=G(L,Ae,st.value,ie);if(Ji===null){Ae===null&&(Ae=Je);break}n&&Ae&&Ji.alternate===null&&i(L,Ae),O=g(Ji,O,Ge),rt===null?Ce=Ji:rt.sibling=Ji,rt=Ji,Ae=Je}if(st.done)return o(L,Ae),tt&&$s(L,Ge),Ce;if(Ae===null){for(;!st.done;Ge++,st=F.next())st=oe(L,st.value,ie),st!==null&&(O=g(st,O,Ge),rt===null?Ce=st:rt.sibling=st,rt=st);return tt&&$s(L,Ge),Ce}for(Ae=c(Ae);!st.done;Ge++,st=F.next())st=Z(Ae,L,Ge,st.value,ie),st!==null&&(n&&st.alternate!==null&&Ae.delete(st.key===null?Ge:st.key),O=g(st,O,Ge),rt===null?Ce=st:rt.sibling=st,rt=st);return n&&Ae.forEach(function(KR){return i(L,KR)}),tt&&$s(L,Ge),Ce}function yt(L,O,F,ie){if(typeof F=="object"&&F!==null&&F.type===U&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case R:e:{for(var Ce=F.key;O!==null;){if(O.key===Ce){if(Ce=F.type,Ce===U){if(O.tag===7){o(L,O.sibling),ie=f(O,F.props.children),ie.return=L,L=ie;break e}}else if(O.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===N&&Za(Ce)===O.type){o(L,O.sibling),ie=f(O,F.props),lu(ie,F),ie.return=L,L=ie;break e}o(L,O);break}else i(L,O);O=O.sibling}F.type===U?(ie=$a(F.props.children,L.mode,ie,F.key),ie.return=L,L=ie):(ie=Ph(F.type,F.key,F.props,null,L.mode,ie),lu(ie,F),ie.return=L,L=ie)}return v(L);case q:e:{for(Ce=F.key;O!==null;){if(O.key===Ce)if(O.tag===4&&O.stateNode.containerInfo===F.containerInfo&&O.stateNode.implementation===F.implementation){o(L,O.sibling),ie=f(O,F.children||[]),ie.return=L,L=ie;break e}else{o(L,O);break}else i(L,O);O=O.sibling}ie=Ap(F,L.mode,ie),ie.return=L,L=ie}return v(L);case N:return F=Za(F),yt(L,O,F,ie)}if(Ue(F))return we(L,O,F,ie);if(M(F)){if(Ce=M(F),typeof Ce!="function")throw Error(r(150));return F=Ce.call(F),De(L,O,F,ie)}if(typeof F.then=="function")return yt(L,O,zh(F),ie);if(F.$$typeof===se)return yt(L,O,Oh(L,F),ie);Bh(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,O!==null&&O.tag===6?(o(L,O.sibling),ie=f(O,F),ie.return=L,L=ie):(o(L,O),ie=Sp(F,L.mode,ie),ie.return=L,L=ie),v(L)):o(L,O)}return function(L,O,F,ie){try{ou=0;var Ce=yt(L,O,F,ie);return pl=null,Ce}catch(Ae){if(Ae===ml||Ae===Lh)throw Ae;var rt=ur(29,Ae,null,L.mode);return rt.lanes=ie,rt.return=L,rt}}}var to=Kv(!0),$v=Kv(!1),ji=!1;function Up(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Oi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Mi(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ot&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Dh(n),kv(n,null,o),i}return kh(n,c,i,o),Dh(n)}function cu(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Oc(n,o)}}function Bp(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=v:g=g.next=v,o=o.next}while(o!==null);g===null?f=g=i:g=g.next=i}else f=g=i;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var qp=!1;function uu(){if(qp){var n=fl;if(n!==null)throw n}}function du(n,i,o,c){qp=!1;var f=n.updateQueue;ji=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var D=w,H=D.next;D.next=null,v===null?g=H:v.next=H,v=D;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,w=ne.lastBaseUpdate,w!==v&&(w===null?ne.firstBaseUpdate=H:w.next=H,ne.lastBaseUpdate=D))}if(g!==null){var oe=f.baseState;v=0,ne=H=D=null,w=g;do{var G=w.lane&-536870913,Z=G!==w.lane;if(Z?(Xe&G)===G:(c&G)===G){G!==0&&G===hl&&(qp=!0),ne!==null&&(ne=ne.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var we=n,De=w;G=i;var yt=o;switch(De.tag){case 1:if(we=De.payload,typeof we=="function"){oe=we.call(yt,oe,G);break e}oe=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=De.payload,G=typeof we=="function"?we.call(yt,oe,G):we,G==null)break e;oe=E({},oe,G);break e;case 2:ji=!0}}G=w.callback,G!==null&&(n.flags|=64,Z&&(n.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[G]:Z.push(G))}else Z={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ne===null?(H=ne=Z,D=oe):ne=ne.next=Z,v|=G;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;Z=w,w=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);ne===null&&(D=oe),f.baseState=D,f.firstBaseUpdate=H,f.lastBaseUpdate=ne,g===null&&(f.shared.lanes=0),qi|=v,n.lanes=v,n.memoizedState=oe}}function Yv(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Wv(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Yv(o[n],i)}var gl=V(null),qh=V(0);function Xv(n,i){n=ii,ge(qh,n),ge(gl,i),ii=n|i.baseLanes}function Fp(){ge(qh,ii),ge(gl,gl.current)}function Hp(){ii=qh.current,ee(gl),ee(qh)}var dr=V(null),kr=null;function Li(n){var i=n.alternate;ge(Bt,Bt.current&1),ge(dr,n),kr===null&&(i===null||gl.current!==null||i.memoizedState!==null)&&(kr=n)}function Gp(n){ge(Bt,Bt.current),ge(dr,n),kr===null&&(kr=n)}function Jv(n){n.tag===22?(ge(Bt,Bt.current),ge(dr,n),kr===null&&(kr=n)):Ui()}function Ui(){ge(Bt,Bt.current),ge(dr,dr.current)}function hr(n){ee(dr),kr===n&&(kr=null),ee(Bt)}var Bt=V(0);function Fh(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Xg(o)||Jg(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Xs=0,qe=null,pt=null,en=null,Hh=!1,yl=!1,no=!1,Gh=0,hu=0,_l=null,MN=0;function Vt(){throw Error(r(321))}function Qp(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!cr(n[o],i[o]))return!1;return!0}function Kp(n,i,o,c,f,g){return Xs=g,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=n===null||n.memoizedState===null?jb:lg,no=!1,g=o(c,f),no=!1,yl&&(g=eb(i,o,c,f)),Zv(n),g}function Zv(n){X.H=pu;var i=pt!==null&&pt.next!==null;if(Xs=0,en=pt=qe=null,Hh=!1,hu=0,_l=null,i)throw Error(r(300));n===null||tn||(n=n.dependencies,n!==null&&jh(n)&&(tn=!0))}function eb(n,i,o,c){qe=n;var f=0;do{if(yl&&(_l=null),hu=0,yl=!1,25<=f)throw Error(r(301));if(f+=1,en=pt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}X.H=Ob,g=i(o,c)}while(yl);return g}function LN(){var n=X.H,i=n.useState()[0];return i=typeof i.then=="function"?fu(i):i,n=n.useState()[0],(pt!==null?pt.memoizedState:null)!==n&&(qe.flags|=1024),i}function $p(){var n=Gh!==0;return Gh=0,n}function Yp(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Wp(n){if(Hh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Hh=!1}Xs=0,en=pt=qe=null,yl=!1,hu=Gh=0,_l=null}function zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?qe.memoizedState=en=n:en=en.next=n,en}function qt(){if(pt===null){var n=qe.alternate;n=n!==null?n.memoizedState:null}else n=pt.next;var i=en===null?qe.memoizedState:en.next;if(i!==null)en=i,pt=n;else{if(n===null)throw qe.alternate===null?Error(r(467)):Error(r(310));pt=n,n={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},en===null?qe.memoizedState=en=n:en=en.next=n}return en}function Qh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fu(n){var i=hu;return hu+=1,_l===null&&(_l=[]),n=Hv(_l,n,i),i=qe,(en===null?i.memoizedState:en.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?jb:lg),n}function Kh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return fu(n);if(n.$$typeof===se)return xn(n)}throw Error(r(438,String(n)))}function Xp(n){var i=null,o=qe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=qe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Qh(),qe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=j;return i.index++,o}function Js(n,i){return typeof i=="function"?i(n):i}function $h(n){var i=qt();return Jp(i,pt,n)}function Jp(n,i,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var f=n.baseQueue,g=c.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}i.baseQueue=f=g,c.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{i=f.next;var w=v=null,D=null,H=i,ne=!1;do{var oe=H.lane&-536870913;if(oe!==H.lane?(Xe&oe)===oe:(Xs&oe)===oe){var G=H.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),oe===hl&&(ne=!0);else if((Xs&G)===G){H=H.next,G===hl&&(ne=!0);continue}else oe={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},D===null?(w=D=oe,v=g):D=D.next=oe,qe.lanes|=G,qi|=G;oe=H.action,no&&o(g,oe),g=H.hasEagerState?H.eagerState:o(g,oe)}else G={lane:oe,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},D===null?(w=D=G,v=g):D=D.next=G,qe.lanes|=oe,qi|=oe;H=H.next}while(H!==null&&H!==i);if(D===null?v=g:D.next=w,!cr(g,n.memoizedState)&&(tn=!0,ne&&(o=fl,o!==null)))throw o;n.memoizedState=g,n.baseState=v,n.baseQueue=D,c.lastRenderedState=g}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Zp(n){var i=qt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,g=i.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);cr(g,i.memoizedState)||(tn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,c]}function tb(n,i,o){var c=qe,f=qt(),g=tt;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var v=!cr((pt||f).memoizedState,o);if(v&&(f.memoizedState=o,tn=!0),f=f.queue,ng(sb.bind(null,c,f,n),[n]),f.getSnapshot!==i||v||en!==null&&en.memoizedState.tag&1){if(c.flags|=2048,vl(9,{destroy:void 0},rb.bind(null,c,f,o,i),null),_t===null)throw Error(r(349));g||(Xs&127)!==0||nb(c,i,o)}return o}function nb(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=qe.updateQueue,i===null?(i=Qh(),qe.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function rb(n,i,o,c){i.value=o,i.getSnapshot=c,ib(i)&&ab(n)}function sb(n,i,o){return o(function(){ib(i)&&ab(n)})}function ib(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!cr(n,o)}catch{return!0}}function ab(n){var i=Ka(n,2);i!==null&&tr(i,n,2)}function eg(n){var i=zn();if(typeof n=="function"){var o=n;if(n=o(),no){Ve(!0);try{o()}finally{Ve(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:n},i}function ob(n,i,o,c){return n.baseState=o,Jp(n,pt,typeof c=="function"?c:Js)}function UN(n,i,o,c,f){if(Xh(n))throw Error(r(485));if(n=i.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){g.listeners.push(v)}};X.T!==null?o(!0):g.isTransition=!1,c(g),o=i.pending,o===null?(g.next=i.pending=g,lb(i,g)):(g.next=o.next,i.pending=o.next=g)}}function lb(n,i){var o=i.action,c=i.payload,f=n.state;if(i.isTransition){var g=X.T,v={};X.T=v;try{var w=o(f,c),D=X.S;D!==null&&D(v,w),cb(n,i,w)}catch(H){tg(n,i,H)}finally{g!==null&&v.types!==null&&(g.types=v.types),X.T=g}}else try{g=o(f,c),cb(n,i,g)}catch(H){tg(n,i,H)}}function cb(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){ub(n,i,c)},function(c){return tg(n,i,c)}):ub(n,i,o)}function ub(n,i,o){i.status="fulfilled",i.value=o,db(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,lb(n,o)))}function tg(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,db(i),i=i.next;while(i!==c)}n.action=null}function db(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function hb(n,i){return i}function fb(n,i){if(tt){var o=_t.formState;if(o!==null){e:{var c=qe;if(tt){if(Et){t:{for(var f=Et,g=Cr;f.nodeType!==8;){if(!g){f=null;break t}if(f=Dr(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){Et=Dr(f.nextSibling),c=f.data==="F!";break e}}Pi(c)}c=!1}c&&(i=o[0])}}return o=zn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hb,lastRenderedState:i},o.queue=c,o=Db.bind(null,qe,c),c.dispatch=o,c=eg(!1),g=og.bind(null,qe,!1,c.queue),c=zn(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,o=UN.bind(null,qe,f,g,o),f.dispatch=o,c.memoizedState=n,[i,o,!1]}function mb(n){var i=qt();return pb(i,pt,n)}function pb(n,i,o){if(i=Jp(n,i,hb)[0],n=$h(Js)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=fu(i)}catch(v){throw v===ml?Lh:v}else c=i;i=qt();var f=i.queue,g=f.dispatch;return o!==i.memoizedState&&(qe.flags|=2048,vl(9,{destroy:void 0},zN.bind(null,f,o),null)),[c,g,n]}function zN(n,i){n.action=i}function gb(n){var i=qt(),o=pt;if(o!==null)return pb(i,o,n);qt(),i=i.memoizedState,o=qt();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function vl(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=qe.updateQueue,i===null&&(i=Qh(),qe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function yb(){return qt().memoizedState}function Yh(n,i,o,c){var f=zn();qe.flags|=n,f.memoizedState=vl(1|i,{destroy:void 0},o,c===void 0?null:c)}function Wh(n,i,o,c){var f=qt();c=c===void 0?null:c;var g=f.memoizedState.inst;pt!==null&&c!==null&&Qp(c,pt.memoizedState.deps)?f.memoizedState=vl(i,g,o,c):(qe.flags|=n,f.memoizedState=vl(1|i,g,o,c))}function _b(n,i){Yh(8390656,8,n,i)}function ng(n,i){Wh(2048,8,n,i)}function BN(n){qe.flags|=4;var i=qe.updateQueue;if(i===null)i=Qh(),qe.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function vb(n){var i=qt().memoizedState;return BN({ref:i,nextImpl:n}),function(){if((ot&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function bb(n,i){return Wh(4,2,n,i)}function xb(n,i){return Wh(4,4,n,i)}function Eb(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Tb(n,i,o){o=o!=null?o.concat([n]):null,Wh(4,4,Eb.bind(null,i,n),o)}function rg(){}function wb(n,i){var o=qt();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Qp(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function Ib(n,i){var o=qt();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Qp(i,c[1]))return c[0];if(c=n(),no){Ve(!0);try{n()}finally{Ve(!1)}}return o.memoizedState=[c,i],c}function sg(n,i,o){return o===void 0||(Xs&1073741824)!==0&&(Xe&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=Sx(),qe.lanes|=n,qi|=n,o)}function Sb(n,i,o,c){return cr(o,i)?o:gl.current!==null?(n=sg(n,o,c),cr(n,i)||(tn=!0),n):(Xs&42)===0||(Xs&1073741824)!==0&&(Xe&261930)===0?(tn=!0,n.memoizedState=o):(n=Sx(),qe.lanes|=n,qi|=n,i)}function Ab(n,i,o,c,f){var g=he.p;he.p=g!==0&&8>g?g:8;var v=X.T,w={};X.T=w,og(n,!1,i,o);try{var D=f(),H=X.S;if(H!==null&&H(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ne=ON(D,c);mu(n,i,ne,pr(n))}else mu(n,i,c,pr(n))}catch(oe){mu(n,i,{then:function(){},status:"rejected",reason:oe},pr())}finally{he.p=g,v!==null&&w.types!==null&&(v.types=w.types),X.T=v}}function qN(){}function ig(n,i,o,c){if(n.tag!==5)throw Error(r(476));var f=Nb(n).queue;Ab(n,f,i,Te,o===null?qN:function(){return Rb(n),o(c)})}function Nb(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:Te},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Rb(n){var i=Nb(n);i.next===null&&(i=n.alternate.memoizedState),mu(n,i.next.queue,{},pr())}function ag(){return xn(ku)}function Cb(){return qt().memoizedState}function kb(){return qt().memoizedState}function FN(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=pr();n=Oi(o);var c=Mi(i,n,o);c!==null&&(tr(c,i,o),cu(c,i,o)),i={cache:jp()},n.payload=i;return}i=i.return}}function HN(n,i,o){var c=pr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Xh(n)?Pb(i,o):(o=wp(n,i,o,c),o!==null&&(tr(o,n,c),Vb(o,i,c)))}function Db(n,i,o){var c=pr();mu(n,i,o,c)}function mu(n,i,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xh(n))Pb(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var v=i.lastRenderedState,w=g(v,o);if(f.hasEagerState=!0,f.eagerState=w,cr(w,v))return kh(n,i,f,0),_t===null&&Ch(),!1}catch{}if(o=wp(n,i,f,c),o!==null)return tr(o,n,c),Vb(o,i,c),!0}return!1}function og(n,i,o,c){if(c={lane:2,revertLane:Ug(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Xh(n)){if(i)throw Error(r(479))}else i=wp(n,o,c,2),i!==null&&tr(i,n,2)}function Xh(n){var i=n.alternate;return n===qe||i!==null&&i===qe}function Pb(n,i){yl=Hh=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function Vb(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Oc(n,o)}}var pu={readContext:xn,use:Kh,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};pu.useEffectEvent=Vt;var jb={readContext:xn,use:Kh,useCallback:function(n,i){return zn().memoizedState=[n,i===void 0?null:i],n},useContext:xn,useEffect:_b,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Yh(4194308,4,Eb.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Yh(4194308,4,n,i)},useInsertionEffect:function(n,i){Yh(4,2,n,i)},useMemo:function(n,i){var o=zn();i=i===void 0?null:i;var c=n();if(no){Ve(!0);try{n()}finally{Ve(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=zn();if(o!==void 0){var f=o(i);if(no){Ve(!0);try{o(i)}finally{Ve(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=HN.bind(null,qe,n),[c.memoizedState,n]},useRef:function(n){var i=zn();return n={current:n},i.memoizedState=n},useState:function(n){n=eg(n);var i=n.queue,o=Db.bind(null,qe,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:rg,useDeferredValue:function(n,i){var o=zn();return sg(o,n,i)},useTransition:function(){var n=eg(!1);return n=Ab.bind(null,qe,n.queue,!0,!1),zn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=qe,f=zn();if(tt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),_t===null)throw Error(r(349));(Xe&127)!==0||nb(c,i,o)}f.memoizedState=o;var g={value:o,getSnapshot:i};return f.queue=g,_b(sb.bind(null,c,g,n),[n]),c.flags|=2048,vl(9,{destroy:void 0},rb.bind(null,c,g,o,i),null),o},useId:function(){var n=zn(),i=_t.identifierPrefix;if(tt){var o=Es,c=xs;o=(c&~(1<<32-et(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Gh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=MN++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:ag,useFormState:fb,useActionState:fb,useOptimistic:function(n){var i=zn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=og.bind(null,qe,!0,o),o.dispatch=i,[n,i]},useMemoCache:Xp,useCacheRefresh:function(){return zn().memoizedState=FN.bind(null,qe)},useEffectEvent:function(n){var i=zn(),o={impl:n};return i.memoizedState=o,function(){if((ot&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},lg={readContext:xn,use:Kh,useCallback:wb,useContext:xn,useEffect:ng,useImperativeHandle:Tb,useInsertionEffect:bb,useLayoutEffect:xb,useMemo:Ib,useReducer:$h,useRef:yb,useState:function(){return $h(Js)},useDebugValue:rg,useDeferredValue:function(n,i){var o=qt();return Sb(o,pt.memoizedState,n,i)},useTransition:function(){var n=$h(Js)[0],i=qt().memoizedState;return[typeof n=="boolean"?n:fu(n),i]},useSyncExternalStore:tb,useId:Cb,useHostTransitionStatus:ag,useFormState:mb,useActionState:mb,useOptimistic:function(n,i){var o=qt();return ob(o,pt,n,i)},useMemoCache:Xp,useCacheRefresh:kb};lg.useEffectEvent=vb;var Ob={readContext:xn,use:Kh,useCallback:wb,useContext:xn,useEffect:ng,useImperativeHandle:Tb,useInsertionEffect:bb,useLayoutEffect:xb,useMemo:Ib,useReducer:Zp,useRef:yb,useState:function(){return Zp(Js)},useDebugValue:rg,useDeferredValue:function(n,i){var o=qt();return pt===null?sg(o,n,i):Sb(o,pt.memoizedState,n,i)},useTransition:function(){var n=Zp(Js)[0],i=qt().memoizedState;return[typeof n=="boolean"?n:fu(n),i]},useSyncExternalStore:tb,useId:Cb,useHostTransitionStatus:ag,useFormState:gb,useActionState:gb,useOptimistic:function(n,i){var o=qt();return pt!==null?ob(o,pt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Xp,useCacheRefresh:kb};Ob.useEffectEvent=vb;function cg(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:E({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var ug={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=pr(),f=Oi(c);f.payload=i,o!=null&&(f.callback=o),i=Mi(n,f,c),i!==null&&(tr(i,n,c),cu(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=pr(),f=Oi(c);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Mi(n,f,c),i!==null&&(tr(i,n,c),cu(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=pr(),c=Oi(o);c.tag=2,i!=null&&(c.callback=i),i=Mi(n,c,o),i!==null&&(tr(i,n,o),cu(i,n,o))}};function Mb(n,i,o,c,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,v):i.prototype&&i.prototype.isPureReactComponent?!tu(o,c)||!tu(f,g):!0}function Lb(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&ug.enqueueReplaceState(i,i.state,null)}function ro(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Ub(n){Rh(n)}function zb(n){console.error(n)}function Bb(n){Rh(n)}function Jh(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function qb(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function dg(n,i,o){return o=Oi(o),o.tag=3,o.payload={element:null},o.callback=function(){Jh(n,i)},o}function Fb(n){return n=Oi(n),n.tag=3,n}function Hb(n,i,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;n.payload=function(){return f(g)},n.callback=function(){qb(i,o,c)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){qb(i,o,c),typeof f!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function GN(n,i,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&dl(i,o,f,!0),o=dr.current,o!==null){switch(o.tag){case 31:case 13:return kr===null?df():o.alternate===null&&jt===0&&(jt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Uh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),Og(n,c,f)),!1;case 22:return o.flags|=65536,c===Uh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),Og(n,c,f)),!1}throw Error(r(435,o.tag))}return Og(n,c,f),df(),!1}if(tt)return i=dr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==Cp&&(n=Error(r(422),{cause:c}),su(Ar(n,o)))):(c!==Cp&&(i=Error(r(423),{cause:c}),su(Ar(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Ar(c,o),f=dg(n.stateNode,c,f),Bp(n,f),jt!==4&&(jt=2)),!1;var g=Error(r(520),{cause:c});if(g=Ar(g,o),Tu===null?Tu=[g]:Tu.push(g),jt!==4&&(jt=2),i===null)return!0;c=Ar(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=dg(o.stateNode,c,n),Bp(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Fi===null||!Fi.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Fb(f),Hb(f,n,o,c),Bp(o,f),!1}o=o.return}while(o!==null);return!1}var hg=Error(r(461)),tn=!1;function En(n,i,o,c){i.child=n===null?$v(i,null,o,c):to(i,n.child,o,c)}function Gb(n,i,o,c,f){o=o.render;var g=i.ref;if("ref"in c){var v={};for(var w in c)w!=="ref"&&(v[w]=c[w])}else v=c;return Xa(i),c=Kp(n,i,o,v,g,f),w=$p(),n!==null&&!tn?(Yp(n,i,f),Zs(n,i,f)):(tt&&w&&Np(i),i.flags|=1,En(n,i,c,f),i.child)}function Qb(n,i,o,c,f){if(n===null){var g=o.type;return typeof g=="function"&&!Ip(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,Kb(n,i,g,c,f)):(n=Ph(o.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!bg(n,f)){var v=g.memoizedProps;if(o=o.compare,o=o!==null?o:tu,o(v,c)&&n.ref===i.ref)return Zs(n,i,f)}return i.flags|=1,n=Ks(g,c),n.ref=i.ref,n.return=i,i.child=n}function Kb(n,i,o,c,f){if(n!==null){var g=n.memoizedProps;if(tu(g,c)&&n.ref===i.ref)if(tn=!1,i.pendingProps=c=g,bg(n,f))(n.flags&131072)!==0&&(tn=!0);else return i.lanes=n.lanes,Zs(n,i,f)}return fg(n,i,o,c,f)}function $b(n,i,o,c){var f=c.children,g=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,n!==null){for(c=i.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~g}else c=0,i.child=null;return Yb(n,i,g,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Mh(i,g!==null?g.cachePool:null),g!==null?Xv(i,g):Fp(),Jv(i);else return c=i.lanes=536870912,Yb(n,i,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(Mh(i,g.cachePool),Xv(i,g),Ui(),i.memoizedState=null):(n!==null&&Mh(i,null),Fp(),Ui());return En(n,i,f,o),i.child}function gu(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Yb(n,i,o,c,f){var g=Mp();return g=g===null?null:{parent:Zt._currentValue,pool:g},i.memoizedState={baseLanes:o,cachePool:g},n!==null&&Mh(i,null),Fp(),Jv(i),n!==null&&dl(n,i,c,!0),i.childLanes=f,null}function Zh(n,i){return i=tf({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Wb(n,i,o){return to(i,n.child,null,o),n=Zh(i,i.pendingProps),n.flags|=2,hr(i),i.memoizedState=null,n}function QN(n,i,o){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(tt){if(c.mode==="hidden")return n=Zh(i,c),i.lanes=536870912,gu(null,n);if(Gp(i),(n=Et)?(n=lE(n,Cr),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:ki!==null?{id:xs,overflow:Es}:null,retryLane:536870912,hydrationErrors:null},o=Pv(n),o.return=i,i.child=o,bn=i,Et=null)):n=null,n===null)throw Pi(i);return i.lanes=536870912,null}return Zh(i,c)}var g=n.memoizedState;if(g!==null){var v=g.dehydrated;if(Gp(i),f)if(i.flags&256)i.flags&=-257,i=Wb(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(tn||dl(n,i,o,!1),f=(o&n.childLanes)!==0,tn||f){if(c=_t,c!==null&&(v=Mc(c,o),v!==0&&v!==g.retryLane))throw g.retryLane=v,Ka(n,v),tr(c,n,v),hg;df(),i=Wb(n,i,o)}else n=g.treeContext,Et=Dr(v.nextSibling),bn=i,tt=!0,Di=null,Cr=!1,n!==null&&Ov(i,n),i=Zh(i,c),i.flags|=4096;return i}return n=Ks(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function ef(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function fg(n,i,o,c,f){return Xa(i),o=Kp(n,i,o,c,void 0,f),c=$p(),n!==null&&!tn?(Yp(n,i,f),Zs(n,i,f)):(tt&&c&&Np(i),i.flags|=1,En(n,i,o,f),i.child)}function Xb(n,i,o,c,f,g){return Xa(i),i.updateQueue=null,o=eb(i,c,o,f),Zv(n),c=$p(),n!==null&&!tn?(Yp(n,i,g),Zs(n,i,g)):(tt&&c&&Np(i),i.flags|=1,En(n,i,o,g),i.child)}function Jb(n,i,o,c,f){if(Xa(i),i.stateNode===null){var g=ol,v=o.contextType;typeof v=="object"&&v!==null&&(g=xn(v)),g=new o(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ug,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},Up(i),v=o.contextType,g.context=typeof v=="object"&&v!==null?xn(v):ol,g.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(cg(i,o,v,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(v=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),v!==g.state&&ug.enqueueReplaceState(g,g.state,null),du(i,c,g,f),uu(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){g=i.stateNode;var w=i.memoizedProps,D=ro(o,w);g.props=D;var H=g.context,ne=o.contextType;v=ol,typeof ne=="object"&&ne!==null&&(v=xn(ne));var oe=o.getDerivedStateFromProps;ne=typeof oe=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=i.pendingProps!==w,ne||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||H!==v)&&Lb(i,g,c,v),ji=!1;var G=i.memoizedState;g.state=G,du(i,c,g,f),uu(),H=i.memoizedState,w||G!==H||ji?(typeof oe=="function"&&(cg(i,o,oe,c),H=i.memoizedState),(D=ji||Mb(i,o,D,c,G,H,v))?(ne||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=H),g.props=c,g.state=H,g.context=v,c=D):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,zp(n,i),v=i.memoizedProps,ne=ro(o,v),g.props=ne,oe=i.pendingProps,G=g.context,H=o.contextType,D=ol,typeof H=="object"&&H!==null&&(D=xn(H)),w=o.getDerivedStateFromProps,(H=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==oe||G!==D)&&Lb(i,g,c,D),ji=!1,G=i.memoizedState,g.state=G,du(i,c,g,f),uu();var Z=i.memoizedState;v!==oe||G!==Z||ji||n!==null&&n.dependencies!==null&&jh(n.dependencies)?(typeof w=="function"&&(cg(i,o,w,c),Z=i.memoizedState),(ne=ji||Mb(i,o,ne,c,G,Z,D)||n!==null&&n.dependencies!==null&&jh(n.dependencies))?(H||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,Z,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,Z,D)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Z),g.props=c,g.state=Z,g.context=D,c=ne):(typeof g.componentDidUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),c=!1)}return g=c,ef(n,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&c?(i.child=to(i,n.child,null,f),i.child=to(i,null,o,f)):En(n,i,o,f),i.memoizedState=g.state,n=i.child):n=Zs(n,i,f),n}function Zb(n,i,o,c){return Ya(),i.flags|=256,En(n,i,o,c),i.child}var mg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pg(n){return{baseLanes:n,cachePool:qv()}}function gg(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=mr),n}function ex(n,i,o){var c=i.pendingProps,f=!1,g=(i.flags&128)!==0,v;if((v=g)||(v=n!==null&&n.memoizedState===null?!1:(Bt.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(tt){if(f?Li(i):Ui(),(n=Et)?(n=lE(n,Cr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:ki!==null?{id:xs,overflow:Es}:null,retryLane:536870912,hydrationErrors:null},o=Pv(n),o.return=i,i.child=o,bn=i,Et=null)):n=null,n===null)throw Pi(i);return Jg(n)?i.lanes=32:i.lanes=536870912,null}var w=c.children;return c=c.fallback,f?(Ui(),f=i.mode,w=tf({mode:"hidden",children:w},f),c=$a(c,f,o,null),w.return=i,c.return=i,w.sibling=c,i.child=w,c=i.child,c.memoizedState=pg(o),c.childLanes=gg(n,v,o),i.memoizedState=mg,gu(null,c)):(Li(i),yg(i,w))}var D=n.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(g)i.flags&256?(Li(i),i.flags&=-257,i=_g(n,i,o)):i.memoizedState!==null?(Ui(),i.child=n.child,i.flags|=128,i=null):(Ui(),w=c.fallback,f=i.mode,c=tf({mode:"visible",children:c.children},f),w=$a(w,f,o,null),w.flags|=2,c.return=i,w.return=i,c.sibling=w,i.child=c,to(i,n.child,null,o),c=i.child,c.memoizedState=pg(o),c.childLanes=gg(n,v,o),i.memoizedState=mg,i=gu(null,c));else if(Li(i),Jg(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var H=v.dgst;v=H,c=Error(r(419)),c.stack="",c.digest=v,su({value:c,source:null,stack:null}),i=_g(n,i,o)}else if(tn||dl(n,i,o,!1),v=(o&n.childLanes)!==0,tn||v){if(v=_t,v!==null&&(c=Mc(v,o),c!==0&&c!==D.retryLane))throw D.retryLane=c,Ka(n,c),tr(v,n,c),hg;Xg(w)||df(),i=_g(n,i,o)}else Xg(w)?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,Et=Dr(w.nextSibling),bn=i,tt=!0,Di=null,Cr=!1,n!==null&&Ov(i,n),i=yg(i,c.children),i.flags|=4096);return i}return f?(Ui(),w=c.fallback,f=i.mode,D=n.child,H=D.sibling,c=Ks(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,H!==null?w=Ks(H,w):(w=$a(w,f,o,null),w.flags|=2),w.return=i,c.return=i,c.sibling=w,i.child=c,gu(null,c),c=i.child,w=n.child.memoizedState,w===null?w=pg(o):(f=w.cachePool,f!==null?(D=Zt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=qv(),w={baseLanes:w.baseLanes|o,cachePool:f}),c.memoizedState=w,c.childLanes=gg(n,v,o),i.memoizedState=mg,gu(n.child,c)):(Li(i),o=n.child,n=o.sibling,o=Ks(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=o,i.memoizedState=null,o)}function yg(n,i){return i=tf({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function tf(n,i){return n=ur(22,n,null,i),n.lanes=0,n}function _g(n,i,o){return to(i,n.child,null,o),n=yg(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function tx(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Pp(n.return,i,o)}function vg(n,i,o,c,f,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:g}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=o,v.tailMode=f,v.treeForkCount=g)}function nx(n,i,o){var c=i.pendingProps,f=c.revealOrder,g=c.tail;c=c.children;var v=Bt.current,w=(v&2)!==0;if(w?(v=v&1|2,i.flags|=128):v&=1,ge(Bt,v),En(n,i,c,o),c=tt?ru:0,!w&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tx(n,o,i);else if(n.tag===19)tx(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Fh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),vg(i,!1,f,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Fh(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}vg(i,!0,o,null,g,c);break;case"together":vg(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Zs(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),qi|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(dl(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=Ks(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Ks(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function bg(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&jh(n)))}function KN(n,i,o){switch(i.tag){case 3:Ee(i,i.stateNode.containerInfo),Vi(i,Zt,n.memoizedState.cache),Ya();break;case 27:case 5:ar(i);break;case 4:Ee(i,i.stateNode.containerInfo);break;case 10:Vi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Gp(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Li(i),i.flags|=128,null):(o&i.child.childLanes)!==0?ex(n,i,o):(Li(i),n=Zs(n,i,o),n!==null?n.sibling:null);Li(i);break;case 19:var f=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(dl(n,i,o,!1),c=(o&i.childLanes)!==0),f){if(c)return nx(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ge(Bt,Bt.current),c)break;return null;case 22:return i.lanes=0,$b(n,i,o,i.pendingProps);case 24:Vi(i,Zt,n.memoizedState.cache)}return Zs(n,i,o)}function rx(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)tn=!0;else{if(!bg(n,o)&&(i.flags&128)===0)return tn=!1,KN(n,i,o);tn=(n.flags&131072)!==0}else tn=!1,tt&&(i.flags&1048576)!==0&&jv(i,ru,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=Za(i.elementType),i.type=n,typeof n=="function")Ip(n)?(c=ro(n,c),i.tag=1,i=Jb(null,i,n,c,o)):(i.tag=0,i=fg(null,i,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===me){i.tag=11,i=Gb(null,i,n,c,o);break e}else if(f===A){i.tag=14,i=Qb(null,i,n,c,o);break e}}throw i=Oe(n)||n,Error(r(306,i,""))}}return i;case 0:return fg(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,f=ro(c,i.pendingProps),Jb(n,i,c,f,o);case 3:e:{if(Ee(i,i.stateNode.containerInfo),n===null)throw Error(r(387));c=i.pendingProps;var g=i.memoizedState;f=g.element,zp(n,i),du(i,c,null,o);var v=i.memoizedState;if(c=v.cache,Vi(i,Zt,c),c!==g.cache&&Vp(i,[Zt],o,!0),uu(),c=v.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Zb(n,i,c,o);break e}else if(c!==f){f=Ar(Error(r(424)),i),su(f),i=Zb(n,i,c,o);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Et=Dr(n.firstChild),bn=i,tt=!0,Di=null,Cr=!0,o=$v(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ya(),c===f){i=Zs(n,i,o);break e}En(n,i,c,o)}i=i.child}return i;case 26:return ef(n,i),n===null?(o=mE(i.type,null,i.pendingProps,null))?i.memoizedState=o:tt||(o=i.type,n=i.pendingProps,c=_f(ae.current).createElement(o),c[Wt]=i,c[dn]=n,Tn(c,o,n),Xt(c),i.stateNode=c):i.memoizedState=mE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ar(i),n===null&&tt&&(c=i.stateNode=dE(i.type,i.pendingProps,ae.current),bn=i,Cr=!0,f=Et,Ki(i.type)?(Zg=f,Et=Dr(c.firstChild)):Et=f),En(n,i,i.pendingProps.children,o),ef(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&tt&&((f=c=Et)&&(c=TR(c,i.type,i.pendingProps,Cr),c!==null?(i.stateNode=c,bn=i,Et=Dr(c.firstChild),Cr=!1,f=!0):f=!1),f||Pi(i)),ar(i),f=i.type,g=i.pendingProps,v=n!==null?n.memoizedProps:null,c=g.children,$g(f,g)?c=null:v!==null&&$g(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Kp(n,i,LN,null,null,o),ku._currentValue=f),ef(n,i),En(n,i,c,o),i.child;case 6:return n===null&&tt&&((n=o=Et)&&(o=wR(o,i.pendingProps,Cr),o!==null?(i.stateNode=o,bn=i,Et=null,n=!0):n=!1),n||Pi(i)),null;case 13:return ex(n,i,o);case 4:return Ee(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=to(i,null,c,o):En(n,i,c,o),i.child;case 11:return Gb(n,i,i.type,i.pendingProps,o);case 7:return En(n,i,i.pendingProps,o),i.child;case 8:return En(n,i,i.pendingProps.children,o),i.child;case 12:return En(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Vi(i,i.type,c.value),En(n,i,c.children,o),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Xa(i),f=xn(f),c=c(f),i.flags|=1,En(n,i,c,o),i.child;case 14:return Qb(n,i,i.type,i.pendingProps,o);case 15:return Kb(n,i,i.type,i.pendingProps,o);case 19:return nx(n,i,o);case 31:return QN(n,i,o);case 22:return $b(n,i,o,i.pendingProps);case 24:return Xa(i),c=xn(Zt),n===null?(f=Mp(),f===null&&(f=_t,g=jp(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),i.memoizedState={parent:c,cache:f},Up(i),Vi(i,Zt,f)):((n.lanes&o)!==0&&(zp(n,i),du(i,null,null,o),uu()),f=n.memoizedState,g=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Vi(i,Zt,c)):(c=g.cache,Vi(i,Zt,c),c!==f.cache&&Vp(i,[Zt],o,!0))),En(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ei(n){n.flags|=4}function xg(n,i,o,c,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Cx())n.flags|=8192;else throw eo=Uh,Lp}else n.flags&=-16777217}function sx(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!vE(i))if(Cx())n.flags|=8192;else throw eo=Uh,Lp}function nf(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?lh():536870912,n.lanes|=i,Tl|=i)}function yu(n,i){if(!tt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Tt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function $N(n,i,o){var c=i.pendingProps;switch(Rp(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(i),null;case 1:return Tt(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Ws(Zt),Re(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ul(i)?ei(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,kp())),Tt(i),null;case 26:var f=i.type,g=i.memoizedState;return n===null?(ei(i),g!==null?(Tt(i),sx(i,g)):(Tt(i),xg(i,f,null,c,o))):g?g!==n.memoizedState?(ei(i),Tt(i),sx(i,g)):(Tt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&ei(i),Tt(i),xg(i,f,n,c,o)),null;case 27:if(Ut(i),o=ae.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ei(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Tt(i),null}n=K.current,ul(i)?Mv(i):(n=dE(f,c,o),i.stateNode=n,ei(i))}return Tt(i),null;case 5:if(Ut(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ei(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Tt(i),null}if(g=K.current,ul(i))Mv(i);else{var v=_f(ae.current);switch(g){case 1:g=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=v.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}g[Wt]=i,g[dn]=c;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)g.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=g;e:switch(Tn(g,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ei(i)}}return Tt(i),xg(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&ei(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(n=ae.current,ul(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,f=bn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Wt]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||eE(n.nodeValue,o)),n||Pi(i,!0)}else n=_f(n).createTextNode(c),n[Wt]=i,i.stateNode=n}return Tt(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(c=ul(i),o!==null){if(n===null){if(!c)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Wt]=i}else Ya(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Tt(i),n=!1}else o=kp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(hr(i),i):(hr(i),null);if((i.flags&128)!==0)throw Error(r(558))}return Tt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ul(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Wt]=i}else Ya(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Tt(i),f=!1}else f=kp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(hr(i),i):(hr(i),null)}return hr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),nf(i,i.updateQueue),Tt(i),null);case 4:return Re(),n===null&&Fg(i.stateNode.containerInfo),Tt(i),null;case 10:return Ws(i.type),Tt(i),null;case 19:if(ee(Bt),c=i.memoizedState,c===null)return Tt(i),null;if(f=(i.flags&128)!==0,g=c.rendering,g===null)if(f)yu(c,!1);else{if(jt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=Fh(n),g!==null){for(i.flags|=128,yu(c,!1),n=g.updateQueue,i.updateQueue=n,nf(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)Dv(o,n),o=o.sibling;return ge(Bt,Bt.current&1|2),tt&&$s(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&He()>lf&&(i.flags|=128,f=!0,yu(c,!1),i.lanes=4194304)}else{if(!f)if(n=Fh(g),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,nf(i,n),yu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!tt)return Tt(i),null}else 2*He()-c.renderingStartTime>lf&&o!==536870912&&(i.flags|=128,f=!0,yu(c,!1),i.lanes=4194304);c.isBackwards?(g.sibling=i.child,i.child=g):(n=c.last,n!==null?n.sibling=g:i.child=g,c.last=g)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=He(),n.sibling=null,o=Bt.current,ge(Bt,f?o&1|2:o&1),tt&&$s(i,c.treeForkCount),n):(Tt(i),null);case 22:case 23:return hr(i),Hp(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(Tt(i),i.subtreeFlags&6&&(i.flags|=8192)):Tt(i),o=i.updateQueue,o!==null&&nf(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&ee(Ja),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ws(Zt),Tt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function YN(n,i){switch(Rp(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ws(Zt),Re(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ut(i),null;case 31:if(i.memoizedState!==null){if(hr(i),i.alternate===null)throw Error(r(340));Ya()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(hr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ya()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ee(Bt),null;case 4:return Re(),null;case 10:return Ws(i.type),null;case 22:case 23:return hr(i),Hp(),n!==null&&ee(Ja),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Ws(Zt),null;case 25:return null;default:return null}}function ix(n,i){switch(Rp(i),i.tag){case 3:Ws(Zt),Re();break;case 26:case 27:case 5:Ut(i);break;case 4:Re();break;case 31:i.memoizedState!==null&&hr(i);break;case 13:hr(i);break;case 19:ee(Bt);break;case 10:Ws(i.type);break;case 22:case 23:hr(i),Hp(),n!==null&&ee(Ja);break;case 24:Ws(Zt)}}function _u(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var g=o.create,v=o.inst;c=g(),v.destroy=c}o=o.next}while(o!==f)}}catch(w){dt(i,i.return,w)}}function zi(n,i,o){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&n)===n){var v=c.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,f=i;var D=o,H=w;try{H()}catch(ne){dt(f,D,ne)}}}c=c.next}while(c!==g)}}catch(ne){dt(i,i.return,ne)}}function ax(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Wv(i,o)}catch(c){dt(n,n.return,c)}}}function ox(n,i,o){o.props=ro(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){dt(n,i,c)}}function vu(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){dt(n,i,f)}}function Ts(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){dt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){dt(n,i,f)}else o.current=null}function lx(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){dt(n,n.return,f)}}function Eg(n,i,o){try{var c=n.stateNode;yR(c,n.type,o,i),c[dn]=i}catch(f){dt(n,n.return,f)}}function cx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ki(n.type)||n.tag===4}function Tg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||cx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ki(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wg(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=qr));else if(c!==4&&(c===27&&Ki(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(wg(n,i,o),n=n.sibling;n!==null;)wg(n,i,o),n=n.sibling}function rf(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&Ki(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(rf(n,i,o),n=n.sibling;n!==null;)rf(n,i,o),n=n.sibling}function ux(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Tn(i,c,o),i[Wt]=n,i[dn]=o}catch(g){dt(n,n.return,g)}}var ti=!1,nn=!1,Ig=!1,dx=typeof WeakSet=="function"?WeakSet:Set,fn=null;function WN(n,i){if(n=n.containerInfo,Qg=If,n=Tv(n),_p(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var v=0,w=-1,D=-1,H=0,ne=0,oe=n,G=null;t:for(;;){for(var Z;oe!==o||f!==0&&oe.nodeType!==3||(w=v+f),oe!==g||c!==0&&oe.nodeType!==3||(D=v+c),oe.nodeType===3&&(v+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)G=oe,oe=Z;for(;;){if(oe===n)break t;if(G===o&&++H===f&&(w=v),G===g&&++ne===c&&(D=v),(Z=oe.nextSibling)!==null)break;oe=G,G=oe.parentNode}oe=Z}o=w===-1||D===-1?null:{start:w,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(Kg={focusedElem:n,selectionRange:o},If=!1,fn=i;fn!==null;)if(i=fn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,fn=n;else for(;fn!==null;){switch(i=fn,g=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,f=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var we=ro(o.type,f);n=c.getSnapshotBeforeUpdate(we,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(De){dt(o,o.return,De)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Wg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Wg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,fn=n;break}fn=i.return}}function hx(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:ri(n,o),c&4&&_u(5,o);break;case 1:if(ri(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(v){dt(o,o.return,v)}else{var f=ro(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){dt(o,o.return,v)}}c&64&&ax(o),c&512&&vu(o,o.return);break;case 3:if(ri(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Wv(n,i)}catch(v){dt(o,o.return,v)}}break;case 27:i===null&&c&4&&ux(o);case 26:case 5:ri(n,o),i===null&&c&4&&lx(o),c&512&&vu(o,o.return);break;case 12:ri(n,o);break;case 31:ri(n,o),c&4&&px(n,o);break;case 13:ri(n,o),c&4&&gx(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=iR.bind(null,o),IR(n,o))));break;case 22:if(c=o.memoizedState!==null||ti,!c){i=i!==null&&i.memoizedState!==null||nn,f=ti;var g=nn;ti=c,(nn=i)&&!g?si(n,o,(o.subtreeFlags&8772)!==0):ri(n,o),ti=f,nn=g}break;case 30:break;default:ri(n,o)}}function fx(n){var i=n.alternate;i!==null&&(n.alternate=null,fx(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ko(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var St=null,Xn=!1;function ni(n,i,o){for(o=o.child;o!==null;)mx(n,i,o),o=o.sibling}function mx(n,i,o){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(Ln,o)}catch{}switch(o.tag){case 26:nn||Ts(o,i),ni(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:nn||Ts(o,i);var c=St,f=Xn;Ki(o.type)&&(St=o.stateNode,Xn=!1),ni(n,i,o),Nu(o.stateNode),St=c,Xn=f;break;case 5:nn||Ts(o,i);case 6:if(c=St,f=Xn,St=null,ni(n,i,o),St=c,Xn=f,St!==null)if(Xn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(o.stateNode)}catch(g){dt(o,i,g)}else try{St.removeChild(o.stateNode)}catch(g){dt(o,i,g)}break;case 18:St!==null&&(Xn?(n=St,aE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),kl(n)):aE(St,o.stateNode));break;case 4:c=St,f=Xn,St=o.stateNode.containerInfo,Xn=!0,ni(n,i,o),St=c,Xn=f;break;case 0:case 11:case 14:case 15:zi(2,o,i),nn||zi(4,o,i),ni(n,i,o);break;case 1:nn||(Ts(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&ox(o,i,c)),ni(n,i,o);break;case 21:ni(n,i,o);break;case 22:nn=(c=nn)||o.memoizedState!==null,ni(n,i,o),nn=c;break;default:ni(n,i,o)}}function px(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{kl(n)}catch(o){dt(i,i.return,o)}}}function gx(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{kl(n)}catch(o){dt(i,i.return,o)}}function XN(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new dx),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new dx),i;default:throw Error(r(435,n.tag))}}function sf(n,i){var o=XN(n);i.forEach(function(c){if(!o.has(c)){o.add(c);var f=aR.bind(null,n,c);c.then(f,f)}})}function Jn(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],g=n,v=i,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(Ki(w.type)){St=w.stateNode,Xn=!1;break e}break;case 5:St=w.stateNode,Xn=!1;break e;case 3:case 4:St=w.stateNode.containerInfo,Xn=!0;break e}w=w.return}if(St===null)throw Error(r(160));mx(g,v,f),St=null,Xn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)yx(i,n),i=i.sibling}var $r=null;function yx(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Jn(i,n),Zn(n),c&4&&(zi(3,n,n.return),_u(3,n),zi(5,n,n.return));break;case 1:Jn(i,n),Zn(n),c&512&&(nn||o===null||Ts(o,o.return)),c&64&&ti&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=$r;if(Jn(i,n),Zn(n),c&512&&(nn||o===null||Ts(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[cs]||g[Wt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),Tn(g,c,o),g[Wt]=n,Xt(g),c=g;break e;case"link":var v=yE("link","href",f).get(c+(o.href||""));if(v){for(var w=0;w<v.length;w++)if(g=v[w],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(w,1);break t}}g=f.createElement(c),Tn(g,c,o),f.head.appendChild(g);break;case"meta":if(v=yE("meta","content",f).get(c+(o.content||""))){for(w=0;w<v.length;w++)if(g=v[w],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(w,1);break t}}g=f.createElement(c),Tn(g,c,o),f.head.appendChild(g);break;default:throw Error(r(468,c))}g[Wt]=n,Xt(g),c=g}n.stateNode=c}else _E(f,n.type,n.stateNode);else n.stateNode=gE(f,c,n.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?_E(f,n.type,n.stateNode):gE(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Eg(n,n.memoizedProps,o.memoizedProps)}break;case 27:Jn(i,n),Zn(n),c&512&&(nn||o===null||Ts(o,o.return)),o!==null&&c&4&&Eg(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Jn(i,n),Zn(n),c&512&&(nn||o===null||Ts(o,o.return)),n.flags&32){f=n.stateNode;try{Wn(f,"")}catch(we){dt(n,n.return,we)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Eg(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Ig=!0);break;case 6:if(Jn(i,n),Zn(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(we){dt(n,n.return,we)}}break;case 3:if(xf=null,f=$r,$r=vf(i.containerInfo),Jn(i,n),$r=f,Zn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{kl(i.containerInfo)}catch(we){dt(n,n.return,we)}Ig&&(Ig=!1,_x(n));break;case 4:c=$r,$r=vf(n.stateNode.containerInfo),Jn(i,n),Zn(n),$r=c;break;case 12:Jn(i,n),Zn(n);break;case 31:Jn(i,n),Zn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,sf(n,c)));break;case 13:Jn(i,n),Zn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(of=He()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,sf(n,c)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,H=ti,ne=nn;if(ti=H||f,nn=ne||D,Jn(i,n),nn=ne,ti=H,Zn(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||D||ti||nn||so(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(g=D.stateNode,f)v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=D.stateNode;var oe=D.memoizedProps.style,G=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(we){dt(D,D.return,we)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(we){dt(D,D.return,we)}}}else if(i.tag===18){if(o===null){D=i;try{var Z=D.stateNode;f?oE(Z,!0):oE(D.stateNode,!1)}catch(we){dt(D,D.return,we)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,sf(n,o))));break;case 19:Jn(i,n),Zn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,sf(n,c)));break;case 30:break;case 21:break;default:Jn(i,n),Zn(n)}}function Zn(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(cx(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,g=Tg(n);rf(n,g,f);break;case 5:var v=o.stateNode;o.flags&32&&(Wn(v,""),o.flags&=-33);var w=Tg(n);rf(n,w,v);break;case 3:case 4:var D=o.stateNode.containerInfo,H=Tg(n);wg(n,H,D);break;default:throw Error(r(161))}}catch(ne){dt(n,n.return,ne)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function _x(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;_x(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ri(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)hx(n,i.alternate,i),i=i.sibling}function so(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:zi(4,i,i.return),so(i);break;case 1:Ts(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&ox(i,i.return,o),so(i);break;case 27:Nu(i.stateNode);case 26:case 5:Ts(i,i.return),so(i);break;case 22:i.memoizedState===null&&so(i);break;case 30:so(i);break;default:so(i)}n=n.sibling}}function si(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,g=i,v=g.flags;switch(g.tag){case 0:case 11:case 15:si(f,g,o),_u(4,g);break;case 1:if(si(f,g,o),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){dt(c,c.return,H)}if(c=g,f=c.updateQueue,f!==null){var w=c.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Yv(D[f],w)}catch(H){dt(c,c.return,H)}}o&&v&64&&ax(g),vu(g,g.return);break;case 27:ux(g);case 26:case 5:si(f,g,o),o&&c===null&&v&4&&lx(g),vu(g,g.return);break;case 12:si(f,g,o);break;case 31:si(f,g,o),o&&v&4&&px(f,g);break;case 13:si(f,g,o),o&&v&4&&gx(f,g);break;case 22:g.memoizedState===null&&si(f,g,o),vu(g,g.return);break;case 30:break;default:si(f,g,o)}i=i.sibling}}function Sg(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&iu(o))}function Ag(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&iu(n))}function Yr(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)vx(n,i,o,c),i=i.sibling}function vx(n,i,o,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Yr(n,i,o,c),f&2048&&_u(9,i);break;case 1:Yr(n,i,o,c);break;case 3:Yr(n,i,o,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&iu(n)));break;case 12:if(f&2048){Yr(n,i,o,c),n=i.stateNode;try{var g=i.memoizedProps,v=g.id,w=g.onPostCommit;typeof w=="function"&&w(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){dt(i,i.return,D)}}else Yr(n,i,o,c);break;case 31:Yr(n,i,o,c);break;case 13:Yr(n,i,o,c);break;case 23:break;case 22:g=i.stateNode,v=i.alternate,i.memoizedState!==null?g._visibility&2?Yr(n,i,o,c):bu(n,i):g._visibility&2?Yr(n,i,o,c):(g._visibility|=2,bl(n,i,o,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Sg(v,i);break;case 24:Yr(n,i,o,c),f&2048&&Ag(i.alternate,i);break;default:Yr(n,i,o,c)}}function bl(n,i,o,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=n,v=i,w=o,D=c,H=v.flags;switch(v.tag){case 0:case 11:case 15:bl(g,v,w,D,f),_u(8,v);break;case 23:break;case 22:var ne=v.stateNode;v.memoizedState!==null?ne._visibility&2?bl(g,v,w,D,f):bu(g,v):(ne._visibility|=2,bl(g,v,w,D,f)),f&&H&2048&&Sg(v.alternate,v);break;case 24:bl(g,v,w,D,f),f&&H&2048&&Ag(v.alternate,v);break;default:bl(g,v,w,D,f)}i=i.sibling}}function bu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,f=c.flags;switch(c.tag){case 22:bu(o,c),f&2048&&Sg(c.alternate,c);break;case 24:bu(o,c),f&2048&&Ag(c.alternate,c);break;default:bu(o,c)}i=i.sibling}}var xu=8192;function xl(n,i,o){if(n.subtreeFlags&xu)for(n=n.child;n!==null;)bx(n,i,o),n=n.sibling}function bx(n,i,o){switch(n.tag){case 26:xl(n,i,o),n.flags&xu&&n.memoizedState!==null&&MR(o,$r,n.memoizedState,n.memoizedProps);break;case 5:xl(n,i,o);break;case 3:case 4:var c=$r;$r=vf(n.stateNode.containerInfo),xl(n,i,o),$r=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=xu,xu=16777216,xl(n,i,o),xu=c):xl(n,i,o));break;default:xl(n,i,o)}}function xx(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Eu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];fn=c,Tx(c,n)}xx(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ex(n),n=n.sibling}function Ex(n){switch(n.tag){case 0:case 11:case 15:Eu(n),n.flags&2048&&zi(9,n,n.return);break;case 3:Eu(n);break;case 12:Eu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,af(n)):Eu(n);break;default:Eu(n)}}function af(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];fn=c,Tx(c,n)}xx(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:zi(8,i,i.return),af(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,af(i));break;default:af(i)}n=n.sibling}}function Tx(n,i){for(;fn!==null;){var o=fn;switch(o.tag){case 0:case 11:case 15:zi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:iu(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,fn=c;else e:for(o=n;fn!==null;){c=fn;var f=c.sibling,g=c.return;if(fx(c),c===o){fn=null;break e}if(f!==null){f.return=g,fn=f;break e}fn=g}}}var JN={getCacheForType:function(n){var i=xn(Zt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return xn(Zt).controller.signal}},ZN=typeof WeakMap=="function"?WeakMap:Map,ot=0,_t=null,Qe=null,Xe=0,ut=0,fr=null,Bi=!1,El=!1,Ng=!1,ii=0,jt=0,qi=0,io=0,Rg=0,mr=0,Tl=0,Tu=null,er=null,Cg=!1,of=0,wx=0,lf=1/0,cf=null,Fi=null,ln=0,Hi=null,wl=null,ai=0,kg=0,Dg=null,Ix=null,wu=0,Pg=null;function pr(){return(ot&2)!==0&&Xe!==0?Xe&-Xe:X.T!==null?Ug():ch()}function Sx(){if(mr===0)if((Xe&536870912)===0||tt){var n=Da;Da<<=1,(Da&3932160)===0&&(Da=262144),mr=n}else mr=536870912;return n=dr.current,n!==null&&(n.flags|=32),mr}function tr(n,i,o){(n===_t&&(ut===2||ut===9)||n.cancelPendingCommit!==null)&&(Il(n,0),Gi(n,Xe,mr,!1)),Pa(n,o),((ot&2)===0||n!==_t)&&(n===_t&&((ot&2)===0&&(io|=o),jt===4&&Gi(n,Xe,mr,!1)),ws(n))}function Ax(n,i,o){if((ot&6)!==0)throw Error(r(327));var c=!o&&(i&127)===0&&(i&n.expiredLanes)===0||Ur(n,i),f=c?nR(n,i):jg(n,i,!0),g=c;do{if(f===0){El&&!c&&Gi(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!eR(o)){f=jg(n,i,!1),g=!1;continue}if(f===2){if(g=i,n.errorRecoveryDisabledLanes&g)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var w=n;f=Tu;var D=w.current.memoizedState.isDehydrated;if(D&&(Il(w,v).flags|=256),v=jg(w,v,!1),v!==2){if(Ng&&!D){w.errorRecoveryDisabledLanes|=g,io|=g,f=4;break e}g=er,er=f,g!==null&&(er===null?er=g:er.push.apply(er,g))}f=v}if(g=!1,f!==2)continue}}if(f===1){Il(n,0),Gi(n,i,0,!0);break}e:{switch(c=n,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Gi(c,i,mr,!Bi);break e;case 2:er=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=of+300-He(),10<f)){if(Gi(c,i,mr,!Bi),as(c,0,!0)!==0)break e;ai=i,c.timeoutHandle=sE(Nx.bind(null,c,o,er,cf,Cg,i,mr,io,Tl,Bi,g,"Throttled",-0,0),f);break e}Nx(c,o,er,cf,Cg,i,mr,io,Tl,Bi,g,null,-0,0)}}break}while(!0);ws(n)}function Nx(n,i,o,c,f,g,v,w,D,H,ne,oe,G,Z){if(n.timeoutHandle=-1,oe=i.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qr},bx(i,g,oe);var we=(g&62914560)===g?of-He():(g&4194048)===g?wx-He():0;if(we=LR(oe,we),we!==null){ai=g,n.cancelPendingCommit=we(Ox.bind(null,n,i,g,o,c,f,v,w,D,ne,oe,null,G,Z)),Gi(n,g,v,!H);return}}Ox(n,i,g,o,c,f,v,w,D)}function eR(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],g=f.getSnapshot;f=f.value;try{if(!cr(g(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gi(n,i,o,c){i&=~Rg,i&=~io,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var g=31-et(f),v=1<<g;c[g]=-1,f&=~v}o!==0&&Va(n,o,i)}function uf(){return(ot&6)===0?(Iu(0),!1):!0}function Vg(){if(Qe!==null){if(ut===0)var n=Qe.return;else n=Qe,Ys=Wa=null,Wp(n),pl=null,ou=0,n=Qe;for(;n!==null;)ix(n.alternate,n),n=n.return;Qe=null}}function Il(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,bR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ai=0,Vg(),_t=n,Qe=o=Ks(n.current,null),Xe=i,ut=0,fr=null,Bi=!1,El=Ur(n,i),Ng=!1,Tl=mr=Rg=io=qi=jt=0,er=Tu=null,Cg=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-et(c),g=1<<f;i|=n[f],c&=~g}return ii=i,Ch(),o}function Rx(n,i){qe=null,X.H=pu,i===ml||i===Lh?(i=Gv(),ut=3):i===Lp?(i=Gv(),ut=4):ut=i===hg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fr=i,Qe===null&&(jt=1,Jh(n,Ar(i,n.current)))}function Cx(){var n=dr.current;return n===null?!0:(Xe&4194048)===Xe?kr===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?n===kr:!1}function kx(){var n=X.H;return X.H=pu,n===null?pu:n}function Dx(){var n=X.A;return X.A=JN,n}function df(){jt=4,Bi||(Xe&4194048)!==Xe&&dr.current!==null||(El=!0),(qi&134217727)===0&&(io&134217727)===0||_t===null||Gi(_t,Xe,mr,!1)}function jg(n,i,o){var c=ot;ot|=2;var f=kx(),g=Dx();(_t!==n||Xe!==i)&&(cf=null,Il(n,i)),i=!1;var v=jt;e:do try{if(ut!==0&&Qe!==null){var w=Qe,D=fr;switch(ut){case 8:Vg(),v=6;break e;case 3:case 2:case 9:case 6:dr.current===null&&(i=!0);var H=ut;if(ut=0,fr=null,Sl(n,w,D,H),o&&El){v=0;break e}break;default:H=ut,ut=0,fr=null,Sl(n,w,D,H)}}tR(),v=jt;break}catch(ne){Rx(n,ne)}while(!0);return i&&n.shellSuspendCounter++,Ys=Wa=null,ot=c,X.H=f,X.A=g,Qe===null&&(_t=null,Xe=0,Ch()),v}function tR(){for(;Qe!==null;)Px(Qe)}function nR(n,i){var o=ot;ot|=2;var c=kx(),f=Dx();_t!==n||Xe!==i?(cf=null,lf=He()+500,Il(n,i)):El=Ur(n,i);e:do try{if(ut!==0&&Qe!==null){i=Qe;var g=fr;t:switch(ut){case 1:ut=0,fr=null,Sl(n,i,g,1);break;case 2:case 9:if(Fv(g)){ut=0,fr=null,Vx(i);break}i=function(){ut!==2&&ut!==9||_t!==n||(ut=7),ws(n)},g.then(i,i);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Fv(g)?(ut=0,fr=null,Vx(i)):(ut=0,fr=null,Sl(n,i,g,7));break;case 5:var v=null;switch(Qe.tag){case 26:v=Qe.memoizedState;case 5:case 27:var w=Qe;if(v?vE(v):w.stateNode.complete){ut=0,fr=null;var D=w.sibling;if(D!==null)Qe=D;else{var H=w.return;H!==null?(Qe=H,hf(H)):Qe=null}break t}}ut=0,fr=null,Sl(n,i,g,5);break;case 6:ut=0,fr=null,Sl(n,i,g,6);break;case 8:Vg(),jt=6;break e;default:throw Error(r(462))}}rR();break}catch(ne){Rx(n,ne)}while(!0);return Ys=Wa=null,X.H=c,X.A=f,ot=o,Qe!==null?0:(_t=null,Xe=0,Ch(),jt)}function rR(){for(;Qe!==null&&!Q();)Px(Qe)}function Px(n){var i=rx(n.alternate,n,ii);n.memoizedProps=n.pendingProps,i===null?hf(n):Qe=i}function Vx(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Xb(o,i,i.pendingProps,i.type,void 0,Xe);break;case 11:i=Xb(o,i,i.pendingProps,i.type.render,i.ref,Xe);break;case 5:Wp(i);default:ix(o,i),i=Qe=Dv(i,ii),i=rx(o,i,ii)}n.memoizedProps=n.pendingProps,i===null?hf(n):Qe=i}function Sl(n,i,o,c){Ys=Wa=null,Wp(i),pl=null,ou=0;var f=i.return;try{if(GN(n,f,i,o,Xe)){jt=1,Jh(n,Ar(o,n.current)),Qe=null;return}}catch(g){if(f!==null)throw Qe=f,g;jt=1,Jh(n,Ar(o,n.current)),Qe=null;return}i.flags&32768?(tt||c===1?n=!0:El||(Xe&536870912)!==0?n=!1:(Bi=n=!0,(c===2||c===9||c===3||c===6)&&(c=dr.current,c!==null&&c.tag===13&&(c.flags|=16384))),jx(i,n)):hf(i)}function hf(n){var i=n;do{if((i.flags&32768)!==0){jx(i,Bi);return}n=i.return;var o=$N(i.alternate,i,ii);if(o!==null){Qe=o;return}if(i=i.sibling,i!==null){Qe=i;return}Qe=i=n}while(i!==null);jt===0&&(jt=5)}function jx(n,i){do{var o=YN(n.alternate,n);if(o!==null){o.flags&=32767,Qe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Qe=n;return}Qe=n=o}while(n!==null);jt=6,Qe=null}function Ox(n,i,o,c,f,g,v,w,D){n.cancelPendingCommit=null;do ff();while(ln!==0);if((ot&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=Tp,mp(n,o,g,v,w,D),n===_t&&(Qe=_t=null,Xe=0),wl=i,Hi=n,ai=o,kg=g,Dg=f,Ix=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,oR($t,function(){return Bx(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,f=he.p,he.p=2,v=ot,ot|=4;try{WN(n,i,o)}finally{ot=v,he.p=f,X.T=c}}ln=1,Mx(),Lx(),Ux()}}function Mx(){if(ln===1){ln=0;var n=Hi,i=wl,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var c=he.p;he.p=2;var f=ot;ot|=4;try{yx(i,n);var g=Kg,v=Tv(n.containerInfo),w=g.focusedElem,D=g.selectionRange;if(v!==w&&w&&w.ownerDocument&&Ev(w.ownerDocument.documentElement,w)){if(D!==null&&_p(w)){var H=D.start,ne=D.end;if(ne===void 0&&(ne=H),"selectionStart"in w)w.selectionStart=H,w.selectionEnd=Math.min(ne,w.value.length);else{var oe=w.ownerDocument||document,G=oe&&oe.defaultView||window;if(G.getSelection){var Z=G.getSelection(),we=w.textContent.length,De=Math.min(D.start,we),yt=D.end===void 0?De:Math.min(D.end,we);!Z.extend&&De>yt&&(v=yt,yt=De,De=v);var L=xv(w,De),O=xv(w,yt);if(L&&O&&(Z.rangeCount!==1||Z.anchorNode!==L.node||Z.anchorOffset!==L.offset||Z.focusNode!==O.node||Z.focusOffset!==O.offset)){var F=oe.createRange();F.setStart(L.node,L.offset),Z.removeAllRanges(),De>yt?(Z.addRange(F),Z.extend(O.node,O.offset)):(F.setEnd(O.node,O.offset),Z.addRange(F))}}}}for(oe=[],Z=w;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<oe.length;w++){var ie=oe[w];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}If=!!Qg,Kg=Qg=null}finally{ot=f,he.p=c,X.T=o}}n.current=i,ln=2}}function Lx(){if(ln===2){ln=0;var n=Hi,i=wl,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var c=he.p;he.p=2;var f=ot;ot|=4;try{hx(n,i.alternate,i)}finally{ot=f,he.p=c,X.T=o}}ln=3}}function Ux(){if(ln===4||ln===3){ln=0,Se();var n=Hi,i=wl,o=ai,c=Ix;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ln=5:(ln=0,wl=Hi=null,zx(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Fi=null),Fs(o),i=i.stateNode,be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(Ln,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=X.T,f=he.p,he.p=2,X.T=null;try{for(var g=n.onRecoverableError,v=0;v<c.length;v++){var w=c[v];g(w.value,{componentStack:w.stack})}}finally{X.T=i,he.p=f}}(ai&3)!==0&&ff(),ws(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Pg?wu++:(wu=0,Pg=n):wu=0,Iu(0)}}function zx(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,iu(i)))}function ff(){return Mx(),Lx(),Ux(),Bx()}function Bx(){if(ln!==5)return!1;var n=Hi,i=kg;kg=0;var o=Fs(ai),c=X.T,f=he.p;try{he.p=32>o?32:o,X.T=null,o=Dg,Dg=null;var g=Hi,v=ai;if(ln=0,wl=Hi=null,ai=0,(ot&6)!==0)throw Error(r(331));var w=ot;if(ot|=4,Ex(g.current),vx(g,g.current,v,o),ot=w,Iu(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(Ln,g)}catch{}return!0}finally{he.p=f,X.T=c,zx(n,i)}}function qx(n,i,o){i=Ar(o,i),i=dg(n.stateNode,i,2),n=Mi(n,i,2),n!==null&&(Pa(n,2),ws(n))}function dt(n,i,o){if(n.tag===3)qx(n,n,o);else for(;i!==null;){if(i.tag===3){qx(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Fi===null||!Fi.has(c))){n=Ar(o,n),o=Fb(2),c=Mi(i,o,2),c!==null&&(Hb(o,c,i,n),Pa(c,2),ws(c));break}}i=i.return}}function Og(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new ZN;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(o)||(Ng=!0,f.add(o),n=sR.bind(null,n,i,o),i.then(n,n))}function sR(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,_t===n&&(Xe&o)===o&&(jt===4||jt===3&&(Xe&62914560)===Xe&&300>He()-of?(ot&2)===0&&Il(n,0):Rg|=o,Tl===Xe&&(Tl=0)),ws(n)}function Fx(n,i){i===0&&(i=lh()),n=Ka(n,i),n!==null&&(Pa(n,i),ws(n))}function iR(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Fx(n,o)}function aR(n,i){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(i),Fx(n,o)}function oR(n,i){return xt(n,i)}var mf=null,Al=null,Mg=!1,pf=!1,Lg=!1,Qi=0;function ws(n){n!==Al&&n.next===null&&(Al===null?mf=Al=n:Al=Al.next=n),pf=!0,Mg||(Mg=!0,cR())}function Iu(n,i){if(!Lg&&pf){Lg=!0;do for(var o=!1,c=mf;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var v=c.suspendedLanes,w=c.pingedLanes;g=(1<<31-et(42|n)+1)-1,g&=f&~(v&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Kx(c,g))}else g=Xe,g=as(c,c===_t?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Ur(c,g)||(o=!0,Kx(c,g));c=c.next}while(o);Lg=!1}}function lR(){Hx()}function Hx(){pf=Mg=!1;var n=0;Qi!==0&&vR()&&(n=Qi);for(var i=He(),o=null,c=mf;c!==null;){var f=c.next,g=Gx(c,i);g===0?(c.next=null,o===null?mf=f:o.next=f,f===null&&(Al=o)):(o=c,(n!==0||(g&3)!==0)&&(pf=!0)),c=f}ln!==0&&ln!==5||Iu(n),Qi!==0&&(Qi=0)}function Gx(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var v=31-et(g),w=1<<v,D=f[v];D===-1?((w&o)===0||(w&c)!==0)&&(f[v]=fp(w,i)):D<=i&&(n.expiredLanes|=w),g&=~w}if(i=_t,o=Xe,o=as(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(ut===2||ut===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&kn(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Ur(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&kn(c),Fs(o)){case 2:case 8:o=_n;break;case 32:o=$t;break;case 268435456:o=qs;break;default:o=$t}return c=Qx.bind(null,n),o=xt(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&kn(c),n.callbackPriority=2,n.callbackNode=null,2}function Qx(n,i){if(ln!==0&&ln!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(ff()&&n.callbackNode!==o)return null;var c=Xe;return c=as(n,n===_t?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Ax(n,c,i),Gx(n,He()),n.callbackNode!=null&&n.callbackNode===o?Qx.bind(null,n):null)}function Kx(n,i){if(ff())return null;Ax(n,i,!0)}function cR(){xR(function(){(ot&6)!==0?xt(kt,lR):Hx()})}function Ug(){if(Qi===0){var n=hl;n===0&&(n=ss,ss<<=1,(ss&261888)===0&&(ss=256)),Qi=n}return Qi}function $x(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Xo(""+n)}function Yx(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function uR(n,i,o,c,f){if(i==="submit"&&o&&o.stateNode===f){var g=$x((f[dn]||null).action),v=c.submitter;v&&(i=(i=v[dn]||null)?$x(i.formAction):v.getAttribute("formAction"),i!==null&&(g=i,v=null));var w=new ys("action","action",null,c,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Qi!==0){var D=v?Yx(f,v):new FormData(f);ig(o,{pending:!0,data:D,method:f.method,action:g},null,D)}}else typeof g=="function"&&(w.preventDefault(),D=v?Yx(f,v):new FormData(f),ig(o,{pending:!0,data:D,method:f.method,action:g},g,D))},currentTarget:f}]})}}for(var zg=0;zg<Ep.length;zg++){var Bg=Ep[zg],dR=Bg.toLowerCase(),hR=Bg[0].toUpperCase()+Bg.slice(1);Kr(dR,"on"+hR)}Kr(Sv,"onAnimationEnd"),Kr(Av,"onAnimationIteration"),Kr(Nv,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(NN,"onTransitionRun"),Kr(RN,"onTransitionStart"),Kr(CN,"onTransitionCancel"),Kr(Rv,"onTransitionEnd"),fs("onMouseEnter",["mouseout","mouseover"]),fs("onMouseLeave",["mouseout","mouseover"]),fs("onPointerEnter",["pointerout","pointerover"]),fs("onPointerLeave",["pointerout","pointerover"]),hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Su));function Wx(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var v=c.length-1;0<=v;v--){var w=c[v],D=w.instance,H=w.currentTarget;if(w=w.listener,D!==g&&f.isPropagationStopped())break e;g=w,f.currentTarget=H;try{g(f)}catch(ne){Rh(ne)}f.currentTarget=null,g=D}else for(v=0;v<c.length;v++){if(w=c[v],D=w.instance,H=w.currentTarget,w=w.listener,D!==g&&f.isPropagationStopped())break e;g=w,f.currentTarget=H;try{g(f)}catch(ne){Rh(ne)}f.currentTarget=null,g=D}}}}function Ke(n,i){var o=i[Qo];o===void 0&&(o=i[Qo]=new Set);var c=n+"__bubble";o.has(c)||(Xx(i,n,2,!1),o.add(c))}function qg(n,i,o){var c=0;i&&(c|=4),Xx(o,n,c,i)}var gf="_reactListening"+Math.random().toString(36).slice(2);function Fg(n){if(!n[gf]){n[gf]=!0,Lc.forEach(function(o){o!=="selectionchange"&&(fR.has(o)||qg(o,!1,n),qg(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[gf]||(i[gf]=!0,qg("selectionchange",!1,i))}}function Xx(n,i,o,c){switch(SE(i)){case 2:var f=BR;break;case 8:f=qR;break;default:f=sy}o=f.bind(null,i,o,n),f=void 0,!Ua||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function Hg(n,i,o,c,f){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var w=c.stateNode.containerInfo;if(w===f)break;if(v===4)for(v=c.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;w!==null;){if(v=us(w),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){c=g=v;continue e}w=w.parentNode}}c=c.return}Ai(function(){var H=g,ne=Tr(o),oe=[];e:{var G=Cv.get(n);if(G!==void 0){var Z=ys,we=n;switch(n){case"keypress":if(Ba(o)===0)break e;case"keydown":case"keyup":Z=Sh;break;case"focusin":we="focus",Z=Fa;break;case"focusout":we="blur",Z=Fa;break;case"beforeblur":case"afterblur":Z=Fa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=yh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=_;break;case Sv:case Av:case Nv:Z=vh;break;case Rv:Z=I;break;case"scroll":case"scrollend":Z=Wc;break;case"wheel":Z=Y;break;case"copy":case"cut":case"paste":Z=bh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Qs;break;case"toggle":case"beforetoggle":Z=Be}var De=(i&4)!==0,yt=!De&&(n==="scroll"||n==="scrollend"),L=De?G!==null?G+"Capture":null:G;De=[];for(var O=H,F;O!==null;){var ie=O;if(F=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||F===null||L===null||(ie=Fr(O,L),ie!=null&&De.push(Au(O,ie,F))),yt)break;O=O.return}0<De.length&&(G=new Z(G,we,null,o,ne),oe.push({event:G,listeners:De}))}}if((i&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",Z=n==="mouseout"||n==="pointerout",G&&o!==Kc&&(we=o.relatedTarget||o.fromElement)&&(us(we)||we[ls]))break e;if((Z||G)&&(G=ne.window===ne?ne:(G=ne.ownerDocument)?G.defaultView||G.parentWindow:window,Z?(we=o.relatedTarget||o.toElement,Z=H,we=we?us(we):null,we!==null&&(yt=l(we),De=we.tag,we!==yt||De!==5&&De!==27&&De!==6)&&(we=null)):(Z=null,we=H),Z!==we)){if(De=Xc,ie="onMouseLeave",L="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(De=Qs,ie="onPointerLeave",L="onPointerEnter",O="pointer"),yt=Z==null?G:or(Z),F=we==null?G:or(we),G=new De(ie,O+"leave",Z,o,ne),G.target=yt,G.relatedTarget=F,ie=null,us(ne)===H&&(De=new De(L,O+"enter",we,o,ne),De.target=F,De.relatedTarget=yt,ie=De),yt=ie,Z&&we)t:{for(De=mR,L=Z,O=we,F=0,ie=L;ie;ie=De(ie))F++;ie=0;for(var Ce=O;Ce;Ce=De(Ce))ie++;for(;0<F-ie;)L=De(L),F--;for(;0<ie-F;)O=De(O),ie--;for(;F--;){if(L===O||O!==null&&L===O.alternate){De=L;break t}L=De(L),O=De(O)}De=null}else De=null;Z!==null&&Jx(oe,G,Z,De,!1),we!==null&&yt!==null&&Jx(oe,yt,we,De,!0)}}e:{if(G=H?or(H):window,Z=G.nodeName&&G.nodeName.toLowerCase(),Z==="select"||Z==="input"&&G.type==="file")var rt=pv;else if(fv(G))if(gv)rt=IN;else{rt=TN;var Ae=EN}else Z=G.nodeName,!Z||Z.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&Wo(H.elementType)&&(rt=pv):rt=wN;if(rt&&(rt=rt(n,H))){mv(oe,rt,o,ne);break e}Ae&&Ae(n,G,H),n==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&Hc(G,"number",G.value)}switch(Ae=H?or(H):window,n){case"focusin":(fv(Ae)||Ae.contentEditable==="true")&&(sl=Ae,vp=H,nu=null);break;case"focusout":nu=vp=sl=null;break;case"mousedown":bp=!0;break;case"contextmenu":case"mouseup":case"dragend":bp=!1,wv(oe,o,ne);break;case"selectionchange":if(AN)break;case"keydown":case"keyup":wv(oe,o,ne)}var Ge;if(at)e:{switch(n){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else rl?Ha(n,o)&&(Je="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Je="onCompositionStart");Je&&(bs&&o.locale!=="ko"&&(rl||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&rl&&(Ge=Yc()):(gs=ne,$c="value"in gs?gs.value:gs.textContent,rl=!0)),Ae=yf(H,Je),0<Ae.length&&(Je=new vs(Je,n,null,o,ne),oe.push({event:Je,listeners:Ae}),Ge?Je.data=Ge:(Ge=nl(o),Ge!==null&&(Je.data=Ge)))),(Ge=Ir?_N(n,o):vN(n,o))&&(Je=yf(H,"onBeforeInput"),0<Je.length&&(Ae=new vs("onBeforeInput","beforeinput",null,o,ne),oe.push({event:Ae,listeners:Je}),Ae.data=Ge)),uR(oe,n,H,o,ne)}Wx(oe,i)})}function Au(n,i,o){return{instance:n,listener:i,currentTarget:o}}function yf(n,i){for(var o=i+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Fr(n,o),f!=null&&c.unshift(Au(n,f,g)),f=Fr(n,i),f!=null&&c.push(Au(n,f,g))),n.tag===3)return c;n=n.return}return[]}function mR(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Jx(n,i,o,c,f){for(var g=i._reactName,v=[];o!==null&&o!==c;){var w=o,D=w.alternate,H=w.stateNode;if(w=w.tag,D!==null&&D===c)break;w!==5&&w!==26&&w!==27||H===null||(D=H,f?(H=Fr(o,g),H!=null&&v.unshift(Au(o,H,D))):f||(H=Fr(o,g),H!=null&&v.push(Au(o,H,D)))),o=o.return}v.length!==0&&n.push({event:i,listeners:v})}var pR=/\r\n?/g,gR=/\u0000|\uFFFD/g;function Zx(n){return(typeof n=="string"?n:""+n).replace(pR,`
`).replace(gR,"")}function eE(n,i){return i=Zx(i),Zx(n)===i}function gt(n,i,o,c,f,g){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Wn(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Wn(n,""+c);break;case"className":lr(n,"class",c);break;case"tabIndex":lr(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(n,o,c);break;case"style":Qc(n,c,g);break;case"data":if(i!=="object"){lr(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Xo(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&gt(n,i,"name",f.name,f,null),gt(n,i,"formEncType",f.formEncType,f,null),gt(n,i,"formMethod",f.formMethod,f,null),gt(n,i,"formTarget",f.formTarget,f,null)):(gt(n,i,"encType",f.encType,f,null),gt(n,i,"method",f.method,f,null),gt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Xo(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=qr);break;case"onScroll":c!=null&&Ke("scroll",n);break;case"onScrollEnd":c!=null&&Ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=Xo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ke("beforetoggle",n),Ke("toggle",n),$o(n,"popover",c);break;case"xlinkActuate":Jt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Jt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Jt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Jt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Jt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Jt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":$o(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gh.get(o)||o,$o(n,o,c))}}function Gg(n,i,o,c,f,g){switch(o){case"style":Qc(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Wn(n,c):(typeof c=="number"||typeof c=="bigint")&&Wn(n,""+c);break;case"onScroll":c!=null&&Ke("scroll",n);break;case"onScrollEnd":c!=null&&Ke("scrollend",n);break;case"onClick":c!=null&&(n.onclick=qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),g=n[dn]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):$o(n,o,c)}}}function Tn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",n),Ke("load",n);var c=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var v=o[g];if(v!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:gt(n,i,g,v,o,null)}}f&&gt(n,i,"srcSet",o.srcSet,o,null),c&&gt(n,i,"src",o.src,o,null);return;case"input":Ke("invalid",n);var w=g=v=f=null,D=null,H=null;for(c in o)if(o.hasOwnProperty(c)){var ne=o[c];if(ne!=null)switch(c){case"name":f=ne;break;case"type":v=ne;break;case"checked":D=ne;break;case"defaultChecked":H=ne;break;case"value":g=ne;break;case"defaultValue":w=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,i));break;default:gt(n,i,c,ne,o,null)}}fh(n,g,w,D,H,v,f,!1);return;case"select":Ke("invalid",n),c=v=g=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":g=w;break;case"defaultValue":v=w;break;case"multiple":c=w;default:gt(n,i,f,w,o,null)}i=g,o=v,n.multiple=!!c,i!=null?Ti(n,!!c,i,!1):o!=null&&Ti(n,!!c,o,!0);return;case"textarea":Ke("invalid",n),g=f=c=null;for(v in o)if(o.hasOwnProperty(v)&&(w=o[v],w!=null))switch(v){case"value":c=w;break;case"defaultValue":f=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:gt(n,i,v,w,o,null)}wi(n,c,f,g);return;case"option":for(D in o)o.hasOwnProperty(D)&&(c=o[D],c!=null)&&(D==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":gt(n,i,D,c,o,null));return;case"dialog":Ke("beforetoggle",n),Ke("toggle",n),Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":Ke("load",n);break;case"video":case"audio":for(c=0;c<Su.length;c++)Ke(Su[c],n);break;case"image":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"embed":case"source":case"link":Ke("error",n),Ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(c=o[H],c!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:gt(n,i,H,c,o,null)}return;default:if(Wo(i)){for(ne in o)o.hasOwnProperty(ne)&&(c=o[ne],c!==void 0&&Gg(n,i,ne,c,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(c=o[w],c!=null&&gt(n,i,w,c,o,null))}function yR(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,v=null,w=null,D=null,H=null,ne=null;for(Z in o){var oe=o[Z];if(o.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":D=oe;default:c.hasOwnProperty(Z)||gt(n,i,Z,null,c,oe)}}for(var G in c){var Z=c[G];if(oe=o[G],c.hasOwnProperty(G)&&(Z!=null||oe!=null))switch(G){case"type":g=Z;break;case"name":f=Z;break;case"checked":H=Z;break;case"defaultChecked":ne=Z;break;case"value":v=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,i));break;default:Z!==oe&&gt(n,i,G,Z,c,oe)}}Yo(n,v,w,D,H,ne,g,f);return;case"select":Z=v=w=G=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":Z=D;default:c.hasOwnProperty(g)||gt(n,i,g,null,c,D)}for(f in c)if(g=c[f],D=o[f],c.hasOwnProperty(f)&&(g!=null||D!=null))switch(f){case"value":G=g;break;case"defaultValue":w=g;break;case"multiple":v=g;default:g!==D&&gt(n,i,f,g,c,D)}i=w,o=v,c=Z,G!=null?Ti(n,!!o,G,!1):!!c!=!!o&&(i!=null?Ti(n,!!o,i,!0):Ti(n,!!o,o?[]:"",!1));return;case"textarea":Z=G=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:gt(n,i,w,null,c,f)}for(v in c)if(f=c[v],g=o[v],c.hasOwnProperty(v)&&(f!=null||g!=null))switch(v){case"value":G=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&gt(n,i,v,f,c,g)}mh(n,G,Z);return;case"option":for(var we in o)G=o[we],o.hasOwnProperty(we)&&G!=null&&!c.hasOwnProperty(we)&&(we==="selected"?n.selected=!1:gt(n,i,we,null,c,G));for(D in c)G=c[D],Z=o[D],c.hasOwnProperty(D)&&G!==Z&&(G!=null||Z!=null)&&(D==="selected"?n.selected=G&&typeof G!="function"&&typeof G!="symbol":gt(n,i,D,G,c,Z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)G=o[De],o.hasOwnProperty(De)&&G!=null&&!c.hasOwnProperty(De)&&gt(n,i,De,null,c,G);for(H in c)if(G=c[H],Z=o[H],c.hasOwnProperty(H)&&G!==Z&&(G!=null||Z!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:gt(n,i,H,G,c,Z)}return;default:if(Wo(i)){for(var yt in o)G=o[yt],o.hasOwnProperty(yt)&&G!==void 0&&!c.hasOwnProperty(yt)&&Gg(n,i,yt,void 0,c,G);for(ne in c)G=c[ne],Z=o[ne],!c.hasOwnProperty(ne)||G===Z||G===void 0&&Z===void 0||Gg(n,i,ne,G,c,Z);return}}for(var L in o)G=o[L],o.hasOwnProperty(L)&&G!=null&&!c.hasOwnProperty(L)&&gt(n,i,L,null,c,G);for(oe in c)G=c[oe],Z=o[oe],!c.hasOwnProperty(oe)||G===Z||G==null&&Z==null||gt(n,i,oe,G,c,Z)}function tE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _R(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],g=f.transferSize,v=f.initiatorType,w=f.duration;if(g&&w&&tE(v)){for(v=0,w=f.responseEnd,c+=1;c<o.length;c++){var D=o[c],H=D.startTime;if(H>w)break;var ne=D.transferSize,oe=D.initiatorType;ne&&tE(oe)&&(D=D.responseEnd,v+=ne*(D<w?1:(w-H)/(D-H)))}if(--c,i+=8*(g+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qg=null,Kg=null;function _f(n){return n.nodeType===9?n:n.ownerDocument}function nE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function $g(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Yg=null;function vR(){var n=window.event;return n&&n.type==="popstate"?n===Yg?!1:(Yg=n,!0):(Yg=null,!1)}var sE=typeof setTimeout=="function"?setTimeout:void 0,bR=typeof clearTimeout=="function"?clearTimeout:void 0,iE=typeof Promise=="function"?Promise:void 0,xR=typeof queueMicrotask=="function"?queueMicrotask:typeof iE<"u"?function(n){return iE.resolve(null).then(n).catch(ER)}:sE;function ER(n){setTimeout(function(){throw n})}function Ki(n){return n==="head"}function aE(n,i){var o=i,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),kl(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Nu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Nu(o);for(var g=o.firstChild;g;){var v=g.nextSibling,w=g.nodeName;g[cs]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=v}}else o==="body"&&Nu(n.ownerDocument.body);o=f}while(o);kl(i)}function oE(n,i){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Wg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Wg(o),Ko(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function TR(n,i,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[cs])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Dr(n.nextSibling),n===null)break}return null}function wR(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Dr(n.nextSibling),n===null))return null;return n}function lE(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Dr(n.nextSibling),n===null))return null;return n}function Xg(n){return n.data==="$?"||n.data==="$~"}function Jg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function IR(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Dr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Zg=null;function cE(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Dr(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function uE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function dE(n,i,o){switch(i=_f(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Nu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ko(n)}var Pr=new Map,hE=new Set;function vf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var oi=he.d;he.d={f:SR,r:AR,D:NR,C:RR,L:CR,m:kR,X:PR,S:DR,M:VR};function SR(){var n=oi.f(),i=uf();return n||i}function AR(n){var i=Er(n);i!==null&&i.tag===5&&i.type==="form"?Rb(i):oi.r(n)}var Nl=typeof document>"u"?null:document;function fE(n,i,o){var c=Nl;if(c&&typeof i=="string"&&i){var f=Yn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),hE.has(f)||(hE.add(f),n={rel:n,crossOrigin:o,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),Tn(i,"link",n),Xt(i),c.head.appendChild(i)))}}function NR(n){oi.D(n),fE("dns-prefetch",n,null)}function RR(n,i){oi.C(n,i),fE("preconnect",n,i)}function CR(n,i,o){oi.L(n,i,o);var c=Nl;if(c&&n&&i){var f='link[rel="preload"][as="'+Yn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Yn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Yn(o.imageSizes)+'"]')):f+='[href="'+Yn(n)+'"]';var g=f;switch(i){case"style":g=Rl(n);break;case"script":g=Cl(n)}Pr.has(g)||(n=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Pr.set(g,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(Ru(g))||i==="script"&&c.querySelector(Cu(g))||(i=c.createElement("link"),Tn(i,"link",n),Xt(i),c.head.appendChild(i)))}}function kR(n,i){oi.m(n,i);var o=Nl;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Yn(c)+'"][href="'+Yn(n)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Cl(n)}if(!Pr.has(g)&&(n=E({rel:"modulepreload",href:n},i),Pr.set(g,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Cu(g)))return}c=o.createElement("link"),Tn(c,"link",n),Xt(c),o.head.appendChild(c)}}}function DR(n,i,o){oi.S(n,i,o);var c=Nl;if(c&&n){var f=ds(c).hoistableStyles,g=Rl(n);i=i||"default";var v=f.get(g);if(!v){var w={loading:0,preload:null};if(v=c.querySelector(Ru(g)))w.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Pr.get(g))&&ey(n,o);var D=v=c.createElement("link");Xt(D),Tn(D,"link",n),D._p=new Promise(function(H,ne){D.onload=H,D.onerror=ne}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,bf(v,i,c)}v={type:"stylesheet",instance:v,count:1,state:w},f.set(g,v)}}}function PR(n,i){oi.X(n,i);var o=Nl;if(o&&n){var c=ds(o).hoistableScripts,f=Cl(n),g=c.get(f);g||(g=o.querySelector(Cu(f)),g||(n=E({src:n,async:!0},i),(i=Pr.get(f))&&ty(n,i),g=o.createElement("script"),Xt(g),Tn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function VR(n,i){oi.M(n,i);var o=Nl;if(o&&n){var c=ds(o).hoistableScripts,f=Cl(n),g=c.get(f);g||(g=o.querySelector(Cu(f)),g||(n=E({src:n,async:!0,type:"module"},i),(i=Pr.get(f))&&ty(n,i),g=o.createElement("script"),Xt(g),Tn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function mE(n,i,o,c){var f=(f=ae.current)?vf(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Rl(o.href),o=ds(f).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Rl(o.href);var g=ds(f).hoistableStyles,v=g.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,v),(g=f.querySelector(Ru(n)))&&!g._p&&(v.instance=g,v.state.loading=5),Pr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Pr.set(n,o),g||jR(f,n,o,v.state))),i&&c===null)throw Error(r(528,""));return v}if(i&&c!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Cl(o),o=ds(f).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Rl(n){return'href="'+Yn(n)+'"'}function Ru(n){return'link[rel="stylesheet"]['+n+"]"}function pE(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function jR(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Tn(i,"link",o),Xt(i),n.head.appendChild(i))}function Cl(n){return'[src="'+Yn(n)+'"]'}function Cu(n){return"script[async]"+n}function gE(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Yn(o.href)+'"]');if(c)return i.instance=c,Xt(c),c;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Xt(c),Tn(c,"style",f),bf(c,o.precedence,n),i.instance=c;case"stylesheet":f=Rl(o.href);var g=n.querySelector(Ru(f));if(g)return i.state.loading|=4,i.instance=g,Xt(g),g;c=pE(o),(f=Pr.get(f))&&ey(c,f),g=(n.ownerDocument||n).createElement("link"),Xt(g);var v=g;return v._p=new Promise(function(w,D){v.onload=w,v.onerror=D}),Tn(g,"link",c),i.state.loading|=4,bf(g,o.precedence,n),i.instance=g;case"script":return g=Cl(o.src),(f=n.querySelector(Cu(g)))?(i.instance=f,Xt(f),f):(c=o,(f=Pr.get(g))&&(c=E({},o),ty(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Xt(f),Tn(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,bf(c,o.precedence,n));return i.instance}function bf(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,v=0;v<c.length;v++){var w=c[v];if(w.dataset.precedence===i)g=w;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function ey(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function ty(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var xf=null;function yE(n,i,o){if(xf===null){var c=new Map,f=xf=new Map;f.set(o,c)}else f=xf,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[cs]||g[Wt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var v=g.getAttribute(i)||"";v=n+v;var w=c.get(v);w?w.push(g):c.set(v,[g])}}return c}function _E(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function OR(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function vE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function MR(n,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Rl(c.href),g=i.querySelector(Ru(f));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Ef.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=g,Xt(g);return}g=i.ownerDocument||i,c=pE(c),(f=Pr.get(f))&&ey(c,f),g=g.createElement("link"),Xt(g);var v=g;v._p=new Promise(function(w,D){v.onload=w,v.onerror=D}),Tn(g,"link",c),o.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Ef.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var ny=0;function LR(n,i){return n.stylesheets&&n.count===0&&wf(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&wf(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+i);0<n.imgBytes&&ny===0&&(ny=62500*_R());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&wf(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>ny?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Ef(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Tf=null;function wf(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Tf=new Map,i.forEach(UR,n),Tf=null,Ef.call(n))}function UR(n,i){if(!(i.state.loading&4)){var o=Tf.get(n);if(o)var c=o.get(null);else{o=new Map,Tf.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var v=f[g];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),c=v)}c&&o.set(null,c)}f=i.instance,v=f.getAttribute("data-precedence"),g=o.get(v)||c,g===c&&o.set(null,f),o.set(v,f),this.count++,c=Ef.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var ku={$$typeof:se,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function zR(n,i,o,c,f,g,v,w,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=os(0),this.hiddenUpdates=os(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function bE(n,i,o,c,f,g,v,w,D,H,ne,oe){return n=new zR(n,i,o,v,D,H,ne,oe,w),i=1,g===!0&&(i|=24),g=ur(3,null,null,i),n.current=g,g.stateNode=n,i=jp(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:i},Up(g),n}function xE(n){return n?(n=ol,n):ol}function EE(n,i,o,c,f,g){f=xE(f),c.context===null?c.context=f:c.pendingContext=f,c=Oi(i),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Mi(n,c,i),o!==null&&(tr(o,n,i),cu(o,n,i))}function TE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function ry(n,i){TE(n,i),(n=n.alternate)&&TE(n,i)}function wE(n){if(n.tag===13||n.tag===31){var i=Ka(n,67108864);i!==null&&tr(i,n,67108864),ry(n,67108864)}}function IE(n){if(n.tag===13||n.tag===31){var i=pr();i=ja(i);var o=Ka(n,i);o!==null&&tr(o,n,i),ry(n,i)}}var If=!0;function BR(n,i,o,c){var f=X.T;X.T=null;var g=he.p;try{he.p=2,sy(n,i,o,c)}finally{he.p=g,X.T=f}}function qR(n,i,o,c){var f=X.T;X.T=null;var g=he.p;try{he.p=8,sy(n,i,o,c)}finally{he.p=g,X.T=f}}function sy(n,i,o,c){if(If){var f=iy(c);if(f===null)Hg(n,i,c,Sf,o),AE(n,c);else if(HR(f,n,i,o,c))c.stopPropagation();else if(AE(n,c),i&4&&-1<FR.indexOf(n)){for(;f!==null;){var g=Er(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var v=is(g.pendingLanes);if(v!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var D=1<<31-et(v);w.entanglements[1]|=D,v&=~D}ws(g),(ot&6)===0&&(lf=He()+500,Iu(0))}}break;case 31:case 13:w=Ka(g,2),w!==null&&tr(w,g,2),uf(),ry(g,2)}if(g=iy(c),g===null&&Hg(n,i,c,Sf,o),g===f)break;f=g}f!==null&&c.stopPropagation()}else Hg(n,i,c,null,o)}}function iy(n){return n=Tr(n),ay(n)}var Sf=null;function ay(n){if(Sf=null,n=us(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===31){if(n=p(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Sf=n,null}function SE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case kt:return 2;case _n:return 8;case $t:case ka:return 32;case qs:return 268435456;default:return 32}default:return 32}}var oy=!1,$i=null,Yi=null,Wi=null,Du=new Map,Pu=new Map,Xi=[],FR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AE(n,i){switch(n){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":Du.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pu.delete(i.pointerId)}}function Vu(n,i,o,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},i!==null&&(i=Er(i),i!==null&&wE(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function HR(n,i,o,c,f){switch(i){case"focusin":return $i=Vu($i,n,i,o,c,f),!0;case"dragenter":return Yi=Vu(Yi,n,i,o,c,f),!0;case"mouseover":return Wi=Vu(Wi,n,i,o,c,f),!0;case"pointerover":var g=f.pointerId;return Du.set(g,Vu(Du.get(g)||null,n,i,o,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Pu.set(g,Vu(Pu.get(g)||null,n,i,o,c,f)),!0}return!1}function NE(n){var i=us(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,zr(n.priority,function(){IE(o)});return}}else if(i===31){if(i=p(o),i!==null){n.blockedOn=i,zr(n.priority,function(){IE(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Af(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=iy(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Kc=c,o.target.dispatchEvent(c),Kc=null}else return i=Er(o),i!==null&&wE(i),n.blockedOn=o,!1;i.shift()}return!0}function RE(n,i,o){Af(n)&&o.delete(i)}function GR(){oy=!1,$i!==null&&Af($i)&&($i=null),Yi!==null&&Af(Yi)&&(Yi=null),Wi!==null&&Af(Wi)&&(Wi=null),Du.forEach(RE),Pu.forEach(RE)}function Nf(n,i){n.blockedOn===i&&(n.blockedOn=null,oy||(oy=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,GR)))}var Rf=null;function CE(n){Rf!==n&&(Rf=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Rf===n&&(Rf=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(ay(c||o)===null)continue;break}var g=Er(o);g!==null&&(n.splice(i,3),i-=3,ig(g,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function kl(n){function i(D){return Nf(D,n)}$i!==null&&Nf($i,n),Yi!==null&&Nf(Yi,n),Wi!==null&&Nf(Wi,n),Du.forEach(i),Pu.forEach(i);for(var o=0;o<Xi.length;o++){var c=Xi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Xi.length&&(o=Xi[0],o.blockedOn===null);)NE(o),o.blockedOn===null&&Xi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],g=o[c+1],v=f[dn]||null;if(typeof g=="function")v||CE(o);else if(v){var w=null;if(g&&g.hasAttribute("formAction")){if(f=g,v=g[dn]||null)w=v.formAction;else if(ay(f)!==null)continue}else w=v.action;typeof w=="function"?o[c+1]=w:(o.splice(c,3),c-=3),CE(o)}}}function kE(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function ly(n){this._internalRoot=n}Cf.prototype.render=ly.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,c=pr();EE(o,c,n,i,null,null)},Cf.prototype.unmount=ly.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;EE(n.current,2,null,n,null,null),uf(),i[ls]=null}};function Cf(n){this._internalRoot=n}Cf.prototype.unstable_scheduleHydration=function(n){if(n){var i=ch();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Xi.length&&i!==0&&i<Xi[o].priority;o++);Xi.splice(o,0,n),o===0&&NE(n)}};var DE=e.version;if(DE!=="19.2.3")throw Error(r(527,DE,"19.2.3"));he.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(i),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var QR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kf.isDisabled&&kf.supportsFiber)try{Ln=kf.inject(QR),be=kf}catch{}}return Ou.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,c="",f=Ub,g=zb,v=Bb;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=bE(n,1,!1,null,null,o,c,null,f,g,v,kE),n[ls]=i.current,Fg(n),new ly(i)},Ou.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var c=!1,f="",g=Ub,v=zb,w=Bb,D=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),i=bE(n,1,!0,i,o??null,c,f,D,g,v,w,kE),i.context=xE(null),o=i.current,c=pr(),c=ja(c),f=Oi(c),f.callback=null,Mi(o,f,c),o=c,i.current.lanes=o,Pa(i,o),ws(i),n[ls]=i.current,Fg(n),new Cf(i)},Ou.version="19.2.3",Ou}var qE;function tC(){if(qE)return dy.exports;qE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),dy.exports=eC(),dy.exports}var nC=tC();const rC=A0(nC);const sC=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iC=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),FE=s=>{const e=iC(s);return e.charAt(0).toUpperCase()+e.slice(1)},tI=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),aC=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var oC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lC=wn.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:u,...p},h)=>wn.createElement("svg",{ref:h,...oC,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:tI("lucide",a),...!l&&!aC(p)&&{"aria-hidden":"true"},...p},[...u.map(([y,b])=>wn.createElement(y,b)),...Array.isArray(l)?l:[l]]));const Rn=(s,e)=>{const t=wn.forwardRef(({className:r,...a},l)=>wn.createElement(lC,{ref:l,iconNode:e,className:tI(`lucide-${sC(FE(s))}`,`lucide-${s}`,r),...a}));return t.displayName=FE(s),t};const cC=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],uC=Rn("archive",cC);const dC=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],zf=Rn("box",dC);const hC=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],jy=Rn("copy",hC);const fC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],mC=Rn("download",fC);const pC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Oy=Rn("eye",pC);const gC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],My=Rn("file-text",gC);const yC=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],_C=Rn("monitor",yC);const vC=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],bC=Rn("moon",vC);const xC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],go=Rn("plus",xC);const EC=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Bf=Rn("printer",EC);const TC=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ly=Rn("refresh-cw",TC);const wC=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],IC=Rn("save",wC);const SC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],AC=Rn("settings",SC);const NC=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Gl=Rn("square-pen",NC);const RC=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],CC=Rn("sun",RC);const kC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ui=Rn("trash-2",kC);const DC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nI=Rn("x",DC),PC=()=>{};var HE={};const rI=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},VC=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],u=s[t++],p=s[t++],h=((a&7)<<18|(l&63)<<12|(u&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const l=s[t++],u=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},sI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],u=a+1<s.length,p=u?s[a+1]:0,h=a+2<s.length,y=h?s[a+2]:0,b=l>>2,E=(l&3)<<4|p>>4;let T=(p&15)<<2|y>>6,R=y&63;h||(R=64,u||(T=64)),r.push(t[b],t[E],t[T],t[R])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(rI(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):VC(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],p=a<s.length?t[s.charAt(a)]:0;++a;const y=a<s.length?t[s.charAt(a)]:64;++a;const E=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||p==null||y==null||E==null)throw new jC;const T=l<<2|p>>4;if(r.push(T),y!==64){const R=p<<4&240|y>>2;if(r.push(R),E!==64){const q=y<<6&192|E;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class jC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OC=function(s){const e=rI(s);return sI.encodeByteArray(e,!0)},rm=function(s){return OC(s).replace(/\./g,"")},R0=function(s){try{return sI.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sm(s,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!MC(t)||(s[t]=sm(s[t],e[t]));return s}function MC(s){return s!=="__proto__"}function C0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const LC=()=>C0().__FIREBASE_DEFAULTS__,UC=()=>{if(typeof process>"u"||typeof HE>"u")return;const s=HE.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},zC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&R0(s[1]);return e&&JSON.parse(e)},k0=()=>{try{return PC()||LC()||UC()||zC()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},D0=()=>k0()?.config,BC=s=>k0()?.[`_${s}`];class qC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Ec(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iI(s){return(await fetch(s,{credentials:"include"})).ok}function FC(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[rm(JSON.stringify(t)),rm(JSON.stringify(u)),""].join(".")}const td={};function HC(){const s={prod:[],emulator:[]};for(const e of Object.keys(td))td[e]?s.emulator.push(e):s.prod.push(e);return s}function GC(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let GE=!1;function aI(s,e){if(typeof window>"u"||typeof document>"u"||!Ec(window.location.host)||td[s]===e||td[s]||GE)return;td[s]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",l=HC().prod.length>0;function u(){const T=document.getElementById(r);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function h(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{GE=!0,u()},T}function b(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=GC(r),R=t("text"),q=document.getElementById(R)||document.createElement("span"),U=t("learnmore"),W=document.getElementById(U)||document.createElement("a"),S=t("preprendIcon"),J=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const se=T.element;p(se),b(W,U);const me=y();h(J,S),se.append(J,q,W,me),document.body.appendChild(se)}l?(q.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function Rm(){const s=k0()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KC(){return typeof window<"u"||oI()}function oI(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function $C(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lI(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function P0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cI(){const s=Dt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function uI(){return!Rm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dI(){return!Rm()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function gd(){try{return typeof indexedDB=="object"}catch{return!1}}function YC(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const WC="FirebaseError";class Fn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=WC,Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uo.prototype.create)}}class Uo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?XC(l,r):"Error",p=`${this.serviceName}: ${u} (${a}).`;return new Fn(a,p,r)}}function XC(s,e){return s.replace(JC,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const JC=/\{\$([^}]+)}/g;function QE(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function ZC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function fa(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],u=e[a];if(KE(l)&&KE(u)){if(!fa(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function KE(s){return s!==null&&typeof s=="object"}function Tc(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Ku(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function hI(s,e){const t=new e2(s,e);return t.subscribe.bind(t)}class e2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");t2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=py),a.error===void 0&&(a.error=py),a.complete===void 0&&(a.complete=py);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t2(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function py(){}function ke(s){return s&&s._delegate?s._delegate:s}class Ls{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const oo="[DEFAULT]";class n2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new qC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s2(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);r===p&&u.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:r2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r2(s){return s===oo?void 0:s}function s2(s){return s.instantiationMode==="EAGER"}class fI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new n2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const V0=[];var $e;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})($e||($e={}));const mI={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},i2=$e.INFO,a2={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},o2=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=a2[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cm{constructor(e){this.name=e,this._logLevel=i2,this._logHandler=o2,this._userLogHandler=null,V0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}function l2(s){V0.forEach(e=>{e.setLogLevel(s)})}function c2(s,e){for(const t of V0){let r=null;e&&e.level&&(r=mI[e.level]),s===null?t.userLogHandler=null:t.userLogHandler=(a,l,...u)=>{const p=u.map(h=>{if(h==null)return null;if(typeof h=="string")return h;if(typeof h=="number"||typeof h=="boolean")return h.toString();if(h instanceof Error)return h.message;try{return JSON.stringify(h)}catch{return null}}).filter(h=>h).join(" ");l>=(r??a.logLevel)&&s({level:$e[l].toLowerCase(),message:p,args:u,type:a.name})}}}const u2=(s,e)=>e.some(t=>s instanceof t);let $E,YE;function d2(){return $E||($E=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h2(){return YE||(YE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pI=new WeakMap,Uy=new WeakMap,gI=new WeakMap,gy=new WeakMap,j0=new WeakMap;function f2(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",u)},l=()=>{t(la(s.result)),a()},u=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&pI.set(t,s)}).catch(()=>{}),j0.set(e,s),e}function m2(s){if(Uy.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",u),s.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",u),s.addEventListener("abort",u)});Uy.set(s,e)}let zy={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Uy.get(s);if(e==="objectStoreNames")return s.objectStoreNames||gI.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return la(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function p2(s){zy=s(zy)}function g2(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(yy(this),e,...t);return gI.set(r,e.sort?e.sort():[e]),la(r)}:h2().includes(s)?function(...e){return s.apply(yy(this),e),la(pI.get(this))}:function(...e){return la(s.apply(yy(this),e))}}function y2(s){return typeof s=="function"?g2(s):(s instanceof IDBTransaction&&m2(s),u2(s,d2())?new Proxy(s,zy):s)}function la(s){if(s instanceof IDBRequest)return f2(s);if(gy.has(s))return gy.get(s);const e=y2(s);return e!==s&&(gy.set(s,e),j0.set(e,s)),e}const yy=s=>j0.get(s);function _2(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(s,e),p=la(u);return r&&u.addEventListener("upgradeneeded",h=>{r(la(u.result),h.oldVersion,h.newVersion,la(u.transaction),h)}),t&&u.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),p.then(h=>{l&&h.addEventListener("close",()=>l()),a&&h.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const v2=["get","getKey","getAll","getAllKeys","count"],b2=["put","add","delete","clear"],_y=new Map;function WE(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(_y.get(e))return _y.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=b2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||v2.includes(t)))return;const l=async function(u,...p){const h=this.transaction(u,a?"readwrite":"readonly");let y=h.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),a&&h.done]))[0]};return _y.set(e,l),l}p2(s=>({...s,get:(e,t,r)=>WE(e,t)||s.get(e,t,r),has:(e,t)=>!!WE(e,t)||s.has(e,t)}));class x2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(E2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function E2(s){return s.getComponent()?.type==="VERSION"}const im="@firebase/app",By="0.14.7";const hi=new Cm("@firebase/app"),T2="@firebase/app-compat",w2="@firebase/analytics-compat",I2="@firebase/analytics",S2="@firebase/app-check-compat",A2="@firebase/app-check",N2="@firebase/auth",R2="@firebase/auth-compat",C2="@firebase/database",k2="@firebase/data-connect",D2="@firebase/database-compat",P2="@firebase/functions",V2="@firebase/functions-compat",j2="@firebase/installations",O2="@firebase/installations-compat",M2="@firebase/messaging",L2="@firebase/messaging-compat",U2="@firebase/performance",z2="@firebase/performance-compat",B2="@firebase/remote-config",q2="@firebase/remote-config-compat",F2="@firebase/storage",H2="@firebase/storage-compat",G2="@firebase/firestore",Q2="@firebase/ai",K2="@firebase/firestore-compat",$2="firebase",Y2="12.8.0";const ma="[DEFAULT]",W2={[im]:"fire-core",[T2]:"fire-core-compat",[I2]:"fire-analytics",[w2]:"fire-analytics-compat",[A2]:"fire-app-check",[S2]:"fire-app-check-compat",[N2]:"fire-auth",[R2]:"fire-auth-compat",[C2]:"fire-rtdb",[k2]:"fire-data-connect",[D2]:"fire-rtdb-compat",[P2]:"fire-fn",[V2]:"fire-fn-compat",[j2]:"fire-iid",[O2]:"fire-iid-compat",[M2]:"fire-fcm",[L2]:"fire-fcm-compat",[U2]:"fire-perf",[z2]:"fire-perf-compat",[B2]:"fire-rc",[q2]:"fire-rc-compat",[F2]:"fire-gcs",[H2]:"fire-gcs-compat",[G2]:"fire-fst",[K2]:"fire-fst-compat",[Q2]:"fire-vertex","fire-js":"fire-js",[$2]:"fire-js-all"};const pa=new Map,Zl=new Map,ec=new Map;function yd(s,e){try{s.container.addComponent(e)}catch(t){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function yI(s,e){s.container.addOrOverwriteComponent(e)}function ga(s){const e=s.name;if(ec.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;ec.set(e,s);for(const t of pa.values())yd(t,s);for(const t of Zl.values())yd(t,s);return!0}function _I(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function X2(s,e,t=ma){_I(s,e).clearInstance(t)}function O0(s){return s.options!==void 0}function vI(s){return O0(s)?!1:"authIdToken"in s||"appCheckToken"in s||"releaseOnDeref"in s||"automaticDataCollectionEnabled"in s}function Nt(s){return s==null?!1:s.settings!==void 0}function J2(){ec.clear()}const Z2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new Uo("app","Firebase",Z2);let bI=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}};function XE(s,e){const t=R0(s.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class ek extends bI{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,u={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,u,a);else{const p=e;super(p.options,u,a)}this._serverConfig={automaticDataCollectionEnabled:l,...t},this._serverConfig.authIdToken&&XE(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&XE(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Jr(im,By,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){L0(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw vr.create("server-app-deleted")}}const wa=Y2;function M0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:ma,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw vr.create("bad-app-name",{appName:String(a)});if(t||(t=D0()),!t)throw vr.create("no-options");const l=pa.get(a);if(l){if(fa(t,l.options)&&fa(r,l.config))return l;throw vr.create("duplicate-app",{appName:a})}const u=new fI(a);for(const h of ec.values())u.addComponent(h);const p=new bI(t,r,u);return pa.set(a,p),p}function tk(s,e={}){if(KC()&&!oI())throw vr.create("invalid-server-app-environment");let t,r=e||{};if(s&&(O0(s)?t=s.options:vI(s)?r=s:t=s),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=D0()),!t)throw vr.create("no-options");const a={...r,...t};a.releaseOnDeref!==void 0&&delete a.releaseOnDeref;const l=b=>[...b].reduce((E,T)=>Math.imul(31,E)+T.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw vr.create("finalization-registry-not-supported",{});const u=""+l(JSON.stringify(a)),p=Zl.get(u);if(p)return p.incRefCount(r.releaseOnDeref),p;const h=new fI(u);for(const b of ec.values())h.addComponent(b);const y=new ek(t,r,u,h);return Zl.set(u,y),y}function nk(s=ma){const e=pa.get(s);if(!e&&s===ma&&D0())return M0();if(!e)throw vr.create("no-app",{appName:s});return e}function rk(){return Array.from(pa.values())}async function L0(s){let e=!1;const t=s.name;pa.has(t)?(e=!0,pa.delete(t)):Zl.has(t)&&s.decRefCount()<=0&&(Zl.delete(t),e=!0),e&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function Jr(s,e,t){let r=W2[s]??s;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${r}" with version "${e}":`];a&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(u.join(" "));return}ga(new Ls(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function xI(s,e){if(s!==null&&typeof s!="function")throw vr.create("invalid-log-argument");c2(s,e)}function EI(s){l2(s)}const sk="firebase-heartbeat-database",ik=1,_d="firebase-heartbeat-store";let vy=null;function TI(){return vy||(vy=_2(sk,ik,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(_d)}catch(t){console.warn(t)}}}}).catch(s=>{throw vr.create("idb-open",{originalErrorMessage:s.message})})),vy}async function ak(s){try{const t=(await TI()).transaction(_d),r=await t.objectStore(_d).get(wI(s));return await t.done,r}catch(e){if(e instanceof Fn)hi.warn(e.message);else{const t=vr.create("idb-get",{originalErrorMessage:e?.message});hi.warn(t.message)}}}async function JE(s,e){try{const r=(await TI()).transaction(_d,"readwrite");await r.objectStore(_d).put(e,wI(s)),await r.done}catch(t){if(t instanceof Fn)hi.warn(t.message);else{const r=vr.create("idb-set",{originalErrorMessage:t?.message});hi.warn(r.message)}}}function wI(s){return`${s.name}!${s.options.appId}`}const ok=1024,lk=30;class ck{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dk(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ZE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>lk){const a=hk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){hi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ZE(),{heartbeatsToSend:t,unsentEntries:r}=uk(this._heartbeatsCache.heartbeats),a=rm(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return hi.warn(e),""}}}function ZE(){return new Date().toISOString().substring(0,10)}function uk(s,e=ok){const t=[];let r=s.slice();for(const a of s){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),eT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),eT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class dk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gd()?YC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ak(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return JE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return JE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function eT(s){return rm(JSON.stringify({version:2,heartbeats:s})).length}function hk(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function fk(s){ga(new Ls("platform-logger",e=>new x2(e),"PRIVATE")),ga(new Ls("heartbeat",e=>new ck(e),"PRIVATE")),Jr(im,By,s),Jr(im,By,"esm2020"),Jr("fire-js","")}fk("");const mk=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Fn,SDK_VERSION:wa,_DEFAULT_ENTRY_NAME:ma,_addComponent:yd,_addOrOverwriteComponent:yI,_apps:pa,_clearComponents:J2,_components:ec,_getProvider:_I,_isFirebaseApp:O0,_isFirebaseServerApp:Nt,_isFirebaseServerAppSettings:vI,_registerComponent:ga,_removeServiceInstance:X2,_serverApps:Zl,deleteApp:L0,getApp:nk,getApps:rk,initializeApp:M0,initializeServerApp:tk,onLog:xI,registerVersion:Jr,setLogLevel:EI},Symbol.toStringTag,{value:"Module"}));class pk{constructor(e,t){this._delegate=e,this.firebase=t,yd(e,new Ls("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),L0(this._delegate)))}_getService(e,t=ma){this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&r.getComponent()?.instantiationMode==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=ma){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){yd(this._delegate,e)}_addOrOverwriteComponent(e){yI(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const gk={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},tT=new Uo("app-compat","Firebase",gk);function yk(s){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:Jr,setLogLevel:EI,onLog:xI,apps:null,SDK_VERSION:wa,INTERNAL:{registerComponent:p,removeApp:r,useAsService:h,modularAPIs:mk}};t.default=t,Object.defineProperty(t,"apps",{get:u});function r(y){delete e[y]}function a(y){if(y=y||ma,!QE(e,y))throw tT.create("no-app",{appName:y});return e[y]}a.App=s;function l(y,b={}){const E=M0(y,b);if(QE(e,E.name))return e[E.name];const T=new s(E,t);return e[E.name]=T,T}function u(){return Object.keys(e).map(y=>e[y])}function p(y){const b=y.name,E=b.replace("-compat","");if(ga(y)&&y.type==="PUBLIC"){const T=(R=a())=>{if(typeof R[E]!="function")throw tT.create("invalid-app-argument",{appName:b});return R[E]()};y.serviceProps!==void 0&&sm(T,y.serviceProps),t[E]=T,s.prototype[E]=function(...R){return this._getService.bind(this,b).apply(this,y.multipleInstances?R:[])}}return y.type==="PUBLIC"?t[E]:null}function h(y,b){return b==="serverAuth"?null:b}return t}function II(){const s=yk(pk);s.INTERNAL={...s.INTERNAL,createFirebaseNamespace:II,extendNamespace:e,createSubscribe:hI,ErrorFactory:Uo,deepExtend:sm};function e(t){sm(s,t)}return s}const _k=II();const nT=new Cm("@firebase/app-compat"),vk="@firebase/app-compat",bk="0.5.7";function xk(s){Jr(vk,bk,s)}try{const s=C0();if(s.firebase!==void 0){nT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=s.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&nT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Vs=_k;xk();var Ek="firebase",Tk="12.8.0";Vs.registerVersion(Ek,Tk,"app-compat");const Mu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Dl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function wk(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function SI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ik=wk,Sk=SI,AI=new Uo("auth","Firebase",SI());const am=new Cm("@firebase/auth");function Ak(s,...e){am.logLevel<=$e.WARN&&am.warn(`Auth (${wa}): ${s}`,...e)}function qf(s,...e){am.logLevel<=$e.ERROR&&am.error(`Auth (${wa}): ${s}`,...e)}function Nn(s,...e){throw z0(s,...e)}function cn(s,...e){return z0(s,...e)}function U0(s,e,t){const r={...Sk(),[e]:t};return new Uo("auth","Firebase",r).create(e,{appName:s.name})}function gn(s){return U0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wc(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Nn(s,"argument-error"),U0(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function z0(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return AI.create(s,...e)}function fe(s,e,...t){if(!s)throw z0(e,...t)}function ks(s){const e="INTERNAL ASSERTION FAILED: "+s;throw qf(e),new Error(e)}function ns(s,e){s||ks(e)}function vd(){return typeof self<"u"&&self.location?.href||""}function B0(){return rT()==="http:"||rT()==="https:"}function rT(){return typeof self<"u"&&self.location?.protocol||null}function Nk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B0()||lI()||"connection"in navigator)?navigator.onLine:!0}function Rk(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Ud{constructor(e,t){this.shortDelay=e,this.longDelay=t,ns(t>e,"Short delay should be less than long delay!"),this.isMobile=QC()||P0()}get(){return Nk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function q0(s,e){ns(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class NI{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ks("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ks("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ks("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ck={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const kk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Dk=new Ud(3e4,6e4);function Mt(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Lt(s,e,t,r,a={}){return RI(s,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const p=Tc({key:s.config.apiKey,...u}).slice(1),h=await s._getAdditionalHeaders();h["Content-Type"]="application/json",s.languageCode&&(h["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:h,...l};return $C()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Ec(s.emulatorConfig.host)&&(y.credentials="include"),NI.fetch()(await CI(s,s.config.apiHost,t,p),y)})}async function RI(s,e,t){s._canInitEmulator=!1;const r={...Ck,...e};try{const a=new Vk(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw $u(s,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const p=l.ok?u.errorMessage:u.error.message,[h,y]=p.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw $u(s,"credential-already-in-use",u);if(h==="EMAIL_EXISTS")throw $u(s,"email-already-in-use",u);if(h==="USER_DISABLED")throw $u(s,"user-disabled",u);const b=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw U0(s,b,y);Nn(s,b)}}catch(a){if(a instanceof Fn)throw a;Nn(s,"network-request-failed",{message:String(a)})}}async function gi(s,e,t,r,a={}){const l=await Lt(s,e,t,r,a);return"mfaPendingCredential"in l&&Nn(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function CI(s,e,t,r){const a=`${e}${t}?${r}`,l=s,u=l.config.emulator?q0(s.config,a):`${s.config.apiScheme}://${a}`;return kk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function Pk(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),Dk.get())})}}function $u(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=cn(s,e,r);return a.customData._tokenResponse=t,a}function sT(s){return s!==void 0&&s.getResponse!==void 0}function iT(s){return s!==void 0&&s.enterprise!==void 0}class kI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Pk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jk(s){return(await Lt(s,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function DI(s,e){return Lt(s,"GET","/v2/recaptchaConfig",Mt(s,e))}async function Ok(s,e){return Lt(s,"POST","/v1/accounts:delete",e)}async function Mk(s,e){return Lt(s,"POST","/v1/accounts:update",e)}async function om(s,e){return Lt(s,"POST","/v1/accounts:lookup",e)}function nd(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Lk(s,e=!1){const t=ke(s),r=await t.getIdToken(e),a=km(r);fe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:r,authTime:nd(by(a.auth_time)),issuedAtTime:nd(by(a.iat)),expirationTime:nd(by(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function by(s){return Number(s)*1e3}function km(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return qf("JWT malformed, contained fewer than 3 sections"),null;try{const a=R0(t);return a?JSON.parse(a):(qf("Failed to decode base64 JWT payload"),null)}catch(a){return qf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function aT(s){const e=km(s);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function fi(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Fn&&Uk(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function Uk({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class zk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class qy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nd(this.lastLoginAt),this.creationTime=nd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bd(s){const e=s.auth,t=await s.getIdToken(),r=await fi(s,om(e,{idToken:t}));fe(r?.users.length,e,"internal-error");const a=r.users[0];s._notifyReloadListener(a);const l=a.providerUserInfo?.length?PI(a.providerUserInfo):[],u=qk(s.providerData,l),p=s.isAnonymous,h=!(s.email&&a.passwordHash)&&!u?.length,y=p?h:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new qy(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function Bk(s){const e=ke(s);await bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qk(s,e){return[...s.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function PI(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Fk(s,e){const t=await RI(s,{},async()=>{const r=Tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,u=await CI(s,a,"/v1/token",`key=${l}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:p,body:r};return s.emulatorConfig&&Ec(s.emulatorConfig.host)&&(h.credentials="include"),NI.fetch()(u,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Hk(s,e){return Lt(s,"POST","/v2/accounts:revokeToken",Mt(s,e))}class Ql{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const t=aT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await Fk(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new Ql;return r&&(fe(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(fe(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(fe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ql,this.toJSON())}_performRefresh(){return ks("not implemented")}}function Zi(s,e){fe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Xr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new zk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new qy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await fi(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Lk(this,e)}reload(){return Bk(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await bd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nt(this.auth.app))return Promise.reject(gn(this.auth));const e=await this.getIdToken();return await fi(this,Ok(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,p=t.tenantId??void 0,h=t._redirectEventId??void 0,y=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:R,providerData:q,stsTokenManager:U}=t;fe(E&&U,e,"internal-error");const W=Ql.fromJSON(this.name,U);fe(typeof E=="string",e,"internal-error"),Zi(r,e.name),Zi(a,e.name),fe(typeof T=="boolean",e,"internal-error"),fe(typeof R=="boolean",e,"internal-error"),Zi(l,e.name),Zi(u,e.name),Zi(p,e.name),Zi(h,e.name),Zi(y,e.name),Zi(b,e.name);const S=new Xr({uid:E,auth:e,email:a,emailVerified:T,displayName:r,isAnonymous:R,photoURL:u,phoneNumber:l,tenantId:p,stsTokenManager:W,createdAt:y,lastLoginAt:b});return q&&Array.isArray(q)&&(S.providerData=q.map(J=>({...J}))),h&&(S._redirectEventId=h),S}static async _fromIdTokenResponse(e,t,r=!1){const a=new Ql;a.updateFromServerResponse(t);const l=new Xr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await bd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];fe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?PI(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,p=new Ql;p.updateFromIdToken(r);const h=new Xr({uid:a.localId,auth:e,stsTokenManager:p,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new qy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(h,y),h}}const oT=new Map;function _r(s){ns(s instanceof Function,"Expected a class definition");let e=oT.get(s);return e?(ns(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,oT.set(s,e),e)}class VI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VI.type="NONE";const tc=VI;function Eo(s,e,t){return`firebase:${s}:${e}:${t}`}class Kl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Eo(this.userKey,a.apiKey,l),this.fullPersistenceKey=Eo("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await om(this.auth,{idToken:e}).catch(()=>{});return t?Xr._fromGetAccountInfoResponse(this.auth,t,e):null}return Xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Kl(_r(tc),e,r);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||_r(tc);const u=Eo(r,e.config.apiKey,e.name);let p=null;for(const y of t)try{const b=await y._get(u);if(b){let E;if(typeof b=="string"){const T=await om(e,{idToken:b}).catch(()=>{});if(!T)break;E=await Xr._fromGetAccountInfoResponse(e,T,b)}else E=Xr._fromJSON(e,b);y!==l&&(p=E),l=y;break}}catch{}const h=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!h.length?new Kl(l,e,r):(l=h[0],p&&await l._set(u,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Kl(l,e,r))}}function lT(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UI(e))return"Blackberry";if(zI(e))return"Webos";if(OI(e))return"Safari";if((e.includes("chrome/")||MI(e))&&!e.includes("edge/"))return"Chrome";if(zd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function jI(s=Dt()){return/firefox\//i.test(s)}function OI(s=Dt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MI(s=Dt()){return/crios\//i.test(s)}function LI(s=Dt()){return/iemobile/i.test(s)}function zd(s=Dt()){return/android/i.test(s)}function UI(s=Dt()){return/blackberry/i.test(s)}function zI(s=Dt()){return/webos/i.test(s)}function Bd(s=Dt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Gk(s=Dt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(s)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(s)}function Qk(s=Dt()){return Bd(s)&&!!window.navigator?.standalone}function Kk(){return cI()&&document.documentMode===10}function BI(s=Dt()){return Bd(s)||zd(s)||zI(s)||UI(s)||/windows phone/i.test(s)||LI(s)}function qI(s,e=[]){let t;switch(s){case"Browser":t=lT(Dt());break;case"Worker":t=`${lT(Dt())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${wa}/${r}`}class $k{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,p)=>{try{const h=e(l);u(h)}catch(h){p(h)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Yk(s,e={}){return Lt(s,"GET","/v2/passwordPolicy",Mt(s,e))}const Wk=6;class Xk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Wk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class Jk{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cT(this),this.idTokenSubscription=new cT(this),this.beforeStateQueue=new $k(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_r(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Kl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await om(this,{idToken:e}),r=await Xr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Nt(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!l||l===u)&&p?.user&&(r=p.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Rk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nt(this.app))return Promise.reject(gn(this));const t=e?ke(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nt(this.app)?Promise.reject(gn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nt(this.app)?Promise.reject(gn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Yk(this),t=new Xk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Hk(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_r(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=await Kl.create(this,[_r(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(p,this,"internal-error"),p.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,a);return()=>{u=!0,h()}}else{const h=e.addObserver(t);return()=>{u=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Nt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ak(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Pt(s){return ke(s)}class cT{constructor(e){this.auth=e,this.observer=null,this.addObserver=hI(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zk(s){qd=s}function F0(s){return qd.loadJS(s)}function eD(){return qd.recaptchaV2Script}function tD(){return qd.recaptchaEnterpriseScript}function nD(){return qd.gapiScript}function FI(s){return`__${s}${Math.floor(Math.random()*1e6)}`}const rD=500,sD=6e4,Df=1e12;class iD{constructor(e){this.auth=e,this.counter=Df,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new lD(e,this.auth.name,t||{})),this.counter++,r}reset(e){const t=e||Df;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||Df;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||Df;return this._widgets.get(t)?.execute(),""}}class aD{constructor(){this.enterprise=new oD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class oD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lD{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;fe(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=cD(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},sD)},rD))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function cD(s){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<s;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const uD="recaptcha-enterprise",rd="NO_RECAPTCHA";class HI{constructor(e){this.type=uD,this.auth=Pt(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,p)=>{DI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new kI(h);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(h=>{p(h)})})}function a(l,u,p){const h=window.grecaptcha;iT(h)?h.enterprise.ready(()=>{h.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(rd)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aD().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(p=>{if(!t&&iT(window.grecaptcha))a(p,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let h=tD();h.length!==0&&(h+=p),F0(h).then(()=>{a(p,l,u)}).catch(y=>{u(y)})}}).catch(p=>{u(p)})})}}async function Lu(s,e,t,r=!1,a=!1){const l=new HI(s);let u;if(a)u=rd;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const h=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const h=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function ca(s,e,t,r,a){if(a==="EMAIL_PASSWORD_PROVIDER")if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Lu(s,e,t,t==="getOobCode");return r(s,l)}else return r(s,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Lu(s,e,t,t==="getOobCode");return r(s,u)}else return Promise.reject(l)});else if(a==="PHONE_PROVIDER")if(s._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const l=await Lu(s,e,t);return r(s,l).catch(async u=>{if(s._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const p=await Lu(s,e,t,!1,!0);return r(s,p)}return Promise.reject(u)})}else{const l=await Lu(s,e,t,!1,!0);return r(s,l)}else return Promise.reject(a+" provider is not supported.")}async function dD(s){const e=Pt(s),t=await DI(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new kI(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new HI(e).verify()}function hD(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(_r);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function fD(s,e,t){const r=Pt(s);fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!!t?.disableWarnings,l=GI(e),{host:u,port:p}=mD(e),h=p===null?"":`:${p}`,y={url:`${l}//${u}${h}/`},b=Object.freeze({host:u,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe(fa(y,r.config.emulator)&&fa(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,Ec(u)?(iI(`${l}//${u}${h}`),aI("Auth",!0)):a||pD()}function GI(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function mD(s){const e=GI(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:uT(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:uT(u)}}}function uT(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function pD(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Ic{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ks("not implemented")}_getIdTokenResponse(e){return ks("not implemented")}_linkToIdToken(e,t){return ks("not implemented")}_getReauthenticationResolver(e){return ks("not implemented")}}async function QI(s,e){return Lt(s,"POST","/v1/accounts:resetPassword",Mt(s,e))}async function gD(s,e){return Lt(s,"POST","/v1/accounts:update",e)}async function yD(s,e){return Lt(s,"POST","/v1/accounts:signUp",e)}async function _D(s,e){return Lt(s,"POST","/v1/accounts:update",Mt(s,e))}async function vD(s,e){return gi(s,"POST","/v1/accounts:signInWithPassword",Mt(s,e))}async function Dm(s,e){return Lt(s,"POST","/v1/accounts:sendOobCode",Mt(s,e))}async function bD(s,e){return Dm(s,e)}async function xD(s,e){return Dm(s,e)}async function ED(s,e){return Dm(s,e)}async function TD(s,e){return Dm(s,e)}async function wD(s,e){return gi(s,"POST","/v1/accounts:signInWithEmailLink",Mt(s,e))}async function ID(s,e){return gi(s,"POST","/v1/accounts:signInWithEmailLink",Mt(s,e))}class xd extends Ic{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new xd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new xd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ca(e,t,"signInWithPassword",vD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return wD(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ca(e,r,"signUpPassword",yD,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ID(e,{idToken:t,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function di(s,e){return gi(s,"POST","/v1/accounts:signInWithIdp",Mt(s,e))}const SD="http://localhost";class Us extends Ic{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Us(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const u=new Us(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return di(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,di(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,di(e,t)}buildRequest(){const e={requestUri:SD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Tc(t)}return e}}async function dT(s,e){return Lt(s,"POST","/v1/accounts:sendVerificationCode",Mt(s,e))}async function AD(s,e){return gi(s,"POST","/v1/accounts:signInWithPhoneNumber",Mt(s,e))}async function ND(s,e){const t=await gi(s,"POST","/v1/accounts:signInWithPhoneNumber",Mt(s,e));if(t.temporaryProof)throw $u(s,"account-exists-with-different-credential",t);return t}const RD={USER_NOT_FOUND:"user-not-found"};async function CD(s,e){const t={...e,operation:"REAUTH"};return gi(s,"POST","/v1/accounts:signInWithPhoneNumber",Mt(s,t),RD)}class To extends Ic{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new To({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new To({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return AD(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return ND(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return CD(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l}=e;return!r&&!t&&!a&&!l?null:new To({verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l})}}function kD(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DD(s){const e=Hl(Ku(s)).link,t=e?Hl(Ku(e)).deep_link_id:null,r=Hl(Ku(s)).deep_link_id;return(r?Hl(Ku(r)).link:null)||r||t||e||s}class Pm{constructor(e){const t=Hl(Ku(e)),r=t.apiKey??null,a=t.oobCode??null,l=kD(t.mode??null);fe(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=DD(e);try{return new Pm(t)}catch{return null}}}class Ia{constructor(){this.providerId=Ia.PROVIDER_ID}static credential(e,t){return xd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Pm.parseLink(t);return fe(r,"argument-error"),xd._fromEmailAndCode(e,r.code,r.tenantId)}}Ia.PROVIDER_ID="password";Ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class yi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Sc extends yi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $l extends Sc{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return fe("providerId"in t&&"signInMethod"in t,"argument-error"),Us._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return fe(e.idToken||e.accessToken,"argument-error"),Us._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return $l.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return $l.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:a,pendingToken:l,nonce:u,providerId:p}=e;if(!r&&!a&&!t&&!l||!p)return null;try{return new $l(p)._credential({idToken:t,accessToken:r,nonce:u,pendingToken:l})}catch{return null}}}class As extends Sc{constructor(){super("facebook.com")}static credential(e){return Us._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com";As.PROVIDER_ID="facebook.com";class Ns extends Sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Us._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ns.credential(t,r)}catch{return null}}}Ns.GOOGLE_SIGN_IN_METHOD="google.com";Ns.PROVIDER_ID="google.com";class Rs extends Sc{constructor(){super("github.com")}static credential(e){return Us._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";const PD="http://localhost";class nc extends Ic{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return di(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,di(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,di(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,pendingToken:l}=t;return!r||!a||!l||r!==a?null:new nc(r,l)}static _create(e,t){return new nc(e,t)}buildRequest(){return{requestUri:PD,returnSecureToken:!0,pendingToken:this.pendingToken}}}const VD="saml.";class lm extends yi{constructor(e){fe(e.startsWith(VD),"argument-error"),super(e)}static credentialFromResult(e){return lm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return lm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=nc.fromJSON(e);return fe(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return nc._create(r,t)}catch{return null}}}class Cs extends Sc{constructor(){super("twitter.com")}static credential(e,t){return Us._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Cs.credential(t,r)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";async function KI(s,e){return gi(s,"POST","/v1/accounts:signUp",Mt(s,e))}class Mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Xr._fromIdTokenResponse(e,r,a),u=hT(r);return new Mr({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=hT(r);return new Mr({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function hT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function jD(s){if(Nt(s.app))return Promise.reject(gn(s));const e=Pt(s);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Mr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await KI(e,{returnSecureToken:!0}),r=await Mr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class cm extends Fn{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,cm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new cm(e,t,r,a)}}function $I(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?cm._fromErrorAndOperation(s,l,e,r):l})}function YI(s){return new Set(s.map(({providerId:e})=>e).filter(e=>!!e))}async function OD(s,e){const t=ke(s);await Vm(!0,t,e);const{providerUserInfo:r}=await Mk(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=YI(r||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function H0(s,e,t=!1){const r=await fi(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Mr._forOperation(s,"link",r)}async function Vm(s,e,t){await bd(e);const r=YI(e.providerData),a=s===!1?"provider-already-linked":"no-such-provider";fe(r.has(t)===s,e.auth,a)}async function WI(s,e,t=!1){const{auth:r}=s;if(Nt(r.app))return Promise.reject(gn(r));const a="reauthenticate";try{const l=await fi(s,$I(r,a,e,s),t);fe(l.idToken,r,"internal-error");const u=km(l.idToken);fe(u,r,"internal-error");const{sub:p}=u;return fe(s.uid===p,r,"user-mismatch"),Mr._forOperation(s,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Nn(r,"user-mismatch"),l}}async function XI(s,e,t=!1){if(Nt(s.app))return Promise.reject(gn(s));const r="signIn",a=await $I(s,r,e),l=await Mr._fromIdTokenResponse(s,r,a);return t||await s._updateCurrentUser(l.user),l}async function jm(s,e){return XI(Pt(s),e)}async function JI(s,e){const t=ke(s);return await Vm(!1,t,e.providerId),H0(t,e)}async function ZI(s,e){return WI(ke(s),e)}async function MD(s,e){return gi(s,"POST","/v1/accounts:signInWithCustomToken",Mt(s,e))}async function LD(s,e){if(Nt(s.app))return Promise.reject(gn(s));const t=Pt(s),r=await MD(t,{token:e,returnSecureToken:!0}),a=await Mr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(a.user),a}class Fd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?G0._fromServerResponse(e,t):"totpInfo"in t?Q0._fromServerResponse(e,t):Nn(e,"internal-error")}}class G0 extends Fd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new G0(t)}}class Q0 extends Fd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Q0(t)}}function Om(s,e,t){fe(t.url?.length>0,s,"invalid-continue-uri"),fe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,s,"invalid-dynamic-link-domain"),fe(typeof t.linkDomain>"u"||t.linkDomain.length>0,s,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(fe(t.iOS.bundleId.length>0,s,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(fe(t.android.packageName.length>0,s,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function K0(s){const e=Pt(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UD(s,e,t){const r=Pt(s),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Om(r,a,t),await ca(r,a,"getOobCode",xD,"EMAIL_PASSWORD_PROVIDER")}async function zD(s,e,t){await QI(ke(s),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&K0(s),r})}async function BD(s,e){await _D(ke(s),{oobCode:e})}async function eS(s,e){const t=ke(s),r=await QI(t,{oobCode:e}),a=r.requestType;switch(fe(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(r.mfaInfo,t,"internal-error");default:fe(r.email,t,"internal-error")}let l=null;return r.mfaInfo&&(l=Fd._fromServerResponse(Pt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:l},operation:a}}async function qD(s,e){const{data:t}=await eS(ke(s),e);return t.email}async function FD(s,e,t){if(Nt(s.app))return Promise.reject(gn(s));const r=Pt(s),u=await ca(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KI,"EMAIL_PASSWORD_PROVIDER").catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&K0(s),h}),p=await Mr._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(p.user),p}function HD(s,e,t){return Nt(s.app)?Promise.reject(gn(s)):jm(ke(s),Ia.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&K0(s),r})}async function GD(s,e,t){const r=Pt(s),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(u,p){fe(p.handleCodeInApp,r,"argument-error"),p&&Om(r,u,p)}l(a,t),await ca(r,a,"getOobCode",ED,"EMAIL_PASSWORD_PROVIDER")}function QD(s,e){return Pm.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function KD(s,e,t){if(Nt(s.app))return Promise.reject(gn(s));const r=ke(s),a=Ia.credentialWithLink(e,t||vd());return fe(a._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),jm(r,a)}async function $D(s,e){return Lt(s,"POST","/v1/accounts:createAuthUri",Mt(s,e))}async function YD(s,e){const t=B0()?vd():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:a}=await $D(ke(s),r);return a||[]}async function WD(s,e){const t=ke(s),a={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()};e&&Om(t.auth,a,e);const{email:l}=await bD(t.auth,a);l!==s.email&&await s.reload()}async function XD(s,e,t){const r=ke(s),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await s.getIdToken(),newEmail:e};t&&Om(r.auth,l,t);const{email:u}=await TD(r.auth,l);u!==s.email&&await s.reload()}async function JD(s,e){return Lt(s,"POST","/v1/accounts:update",e)}async function ZD(s,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=ke(s),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await fi(r,JD(r.auth,l));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const p=r.providerData.find(({providerId:h})=>h==="password");p&&(p.displayName=r.displayName,p.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function eP(s,e){const t=ke(s);return Nt(t.auth.app)?Promise.reject(gn(t.auth)):tS(t,e,null)}function tP(s,e){return tS(ke(s),null,e)}async function tS(s,e,t){const{auth:r}=s,l={idToken:await s.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const u=await fi(s,gD(r,l));await s._updateTokensIfNecessary(u,!0)}function nP(s){if(!s)return null;const{providerId:e}=s,t=s.rawUserInfo?JSON.parse(s.rawUserInfo):{},r=s.isNewUser||s.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&s?.idToken){const a=km(s.idToken)?.firebase?.sign_in_provider;if(a){const l=a!=="anonymous"&&a!=="custom"?a:null;return new Yl(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new rP(r,t);case"github.com":return new sP(r,t);case"google.com":return new iP(r,t);case"twitter.com":return new aP(r,t,s.screenName||null);case"custom":case"anonymous":return new Yl(r,null);default:return new Yl(r,e,t)}}class Yl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class nS extends Yl{constructor(e,t,r,a){super(e,t,r),this.username=a}}class rP extends Yl{constructor(e,t){super(e,"facebook.com",t)}}class sP extends nS{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}}class iP extends Yl{constructor(e,t){super(e,"google.com",t)}}class aP extends nS{constructor(e,t,r){super(e,"twitter.com",t,r)}}function oP(s){const{user:e,_tokenResponse:t}=s;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:nP(t)}class yo{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new yo("enroll",e,t)}static _fromMfaPendingCredential(e){return new yo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return yo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return yo._fromIdtoken(e.multiFactorSession.idToken)}return null}}class $0{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Pt(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(p=>Fd._fromServerResponse(r,p));fe(a.mfaPendingCredential,r,"internal-error");const u=yo._fromMfaPendingCredential(a.mfaPendingCredential);return new $0(u,l,async p=>{const h=await p._process(r,u);delete a.mfaInfo,delete a.mfaPendingCredential;const y={...a,idToken:h.idToken,refreshToken:h.refreshToken};switch(t.operationType){case"signIn":const b=await Mr._fromIdTokenResponse(r,t.operationType,y);return await r._updateCurrentUser(b.user),b;case"reauthenticate":return fe(t.user,r,"internal-error"),Mr._forOperation(t.user,t.operationType,y);default:Nn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function lP(s,e){const t=ke(s),r=e;return fe(e.customData.operationType,t,"argument-error"),fe(r.customData._serverResponse?.mfaPendingCredential,t,"argument-error"),$0._fromError(t,r)}function fT(s,e){return Lt(s,"POST","/v2/accounts/mfaEnrollment:start",Mt(s,e))}function cP(s,e){return Lt(s,"POST","/v2/accounts/mfaEnrollment:finalize",Mt(s,e))}function uP(s,e){return Lt(s,"POST","/v2/accounts/mfaEnrollment:withdraw",Mt(s,e))}class Y0{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Fd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Y0(e)}async getSession(){return yo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,a=await this.getSession(),l=await fi(this.user,r._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const a=await fi(this.user,uP(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const xy=new WeakMap;function dP(s){const e=ke(s);return xy.has(e)||xy.set(e,Y0._fromUser(e)),xy.get(e)}const um="__sak";class rS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(um,"1"),this.storage.removeItem(um),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hP=1e3,fP=10;class sS extends rS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,p,h)=>{this.notifyListeners(u,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);Kk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,fP):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},hP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sS.type="LOCAL";const W0=sS;class iS extends rS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iS.type="SESSION";const Io=iS;function mP(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Mm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Mm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const p=Array.from(u).map(async y=>y(t.origin,l)),h=await mP(p);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mm.receivers=[];function Hd(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class pP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((p,h)=>{const y=Hd("",20);a.port1.start();const b=setTimeout(()=>{h(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(T.data.response);break;default:clearTimeout(b),clearTimeout(l),h(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function sn(){return window}function gP(s){sn().location.href=s}function X0(){return typeof sn().WorkerGlobalScope<"u"&&typeof sn().importScripts=="function"}async function yP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _P(){return navigator?.serviceWorker?.controller||null}function vP(){return X0()?self:null}const aS="firebaseLocalStorageDb",bP=1,dm="firebaseLocalStorage",oS="fbase_key";class Gd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lm(s,e){return s.transaction([dm],e?"readwrite":"readonly").objectStore(dm)}function xP(){const s=indexedDB.deleteDatabase(aS);return new Gd(s).toPromise()}function Fy(){const s=indexedDB.open(aS,bP);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(dm,{keyPath:oS})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(dm)?e(r):(r.close(),await xP(),e(await Fy()))})})}async function mT(s,e,t){const r=Lm(s,!0).put({[oS]:e,value:t});return new Gd(r).toPromise()}async function EP(s,e){const t=Lm(s,!1).get(e),r=await new Gd(t).toPromise();return r===void 0?null:r.value}function pT(s,e){const t=Lm(s,!0).delete(e);return new Gd(t).toPromise()}const TP=800,wP=3;class lS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>wP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mm._getInstance(vP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yP(),!this.activeServiceWorker)return;this.sender=new pP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_P()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fy();return await mT(e,um,"1"),await pT(e,um),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>mT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>EP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Lm(a,!1).getAll();return new Gd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lS.type="LOCAL";const Ed=lS;function gT(s,e){return Lt(s,"POST","/v2/accounts/mfaSignIn:start",Mt(s,e))}function IP(s,e){return Lt(s,"POST","/v2/accounts/mfaSignIn:finalize",Mt(s,e))}const Ey=FI("rcb"),SP=new Ud(3e4,6e4);class AP{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!sn().grecaptcha?.render}load(e,t=""){return fe(NP(t),e,"argument-error"),this.shouldResolveImmediately(t)&&sT(sn().grecaptcha)?Promise.resolve(sn().grecaptcha):new Promise((r,a)=>{const l=sn().setTimeout(()=>{a(cn(e,"network-request-failed"))},SP.get());sn()[Ey]=()=>{sn().clearTimeout(l),delete sn()[Ey];const p=sn().grecaptcha;if(!p||!sT(p)){a(cn(e,"internal-error"));return}const h=p.render;p.render=(y,b)=>{const E=h(y,b);return this.counter++,E},this.hostLanguage=t,r(p)};const u=`${eD()}?${Tc({onload:Ey,render:"explicit",hl:t})}`;F0(u).catch(()=>{clearTimeout(l),a(cn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!sn().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function NP(s){return s.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(s)}class RP{async load(e){return new iD(e)}clearedOneInstance(){}}const sd="recaptcha",CP={theme:"light",type:"image"};let kP=class{constructor(e,t,r={...CP}){this.parameters=r,this.type=sd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pt(e),this.isInvisible=this.parameters.size==="invisible",fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;fe(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new RP:new AP,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(a=>{const l=u=>{u&&(this.tokenChangeListeners.delete(l),a(u))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=sn()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){fe(B0()&&!X0(),this.auth,"internal-error"),await DP(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await jk(this.auth);fe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function DP(){let s=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}s=()=>e(),window.addEventListener("load",s)}).catch(e=>{throw s&&window.removeEventListener("load",s),e})}class J0{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=To._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function PP(s,e,t){if(Nt(s.app))return Promise.reject(gn(s));const r=Pt(s),a=await Um(r,e,ke(t));return new J0(a,l=>jm(r,l))}async function VP(s,e,t){const r=ke(s);await Vm(!1,r,"phone");const a=await Um(r.auth,e,ke(t));return new J0(a,l=>JI(r,l))}async function jP(s,e,t){const r=ke(s);if(Nt(r.auth.app))return Promise.reject(gn(r.auth));const a=await Um(r.auth,e,ke(t));return new J0(a,l=>ZI(r,l))}async function Um(s,e,t){if(!s._getRecaptchaConfig())try{await dD(s)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const a=r.session;if("phoneNumber"in r){fe(a.type==="enroll",s,"internal-error");const l={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ca(s,l,"mfaSmsEnrollment",async(y,b)=>{if(b.phoneEnrollmentInfo.captchaResponse===rd){fe(t?.type===sd,y,"argument-error");const E=await Ty(y,b,t);return fT(y,E)}return fT(y,b)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneSessionInfo.sessionInfo}else{fe(a.type==="signin",s,"internal-error");const l=r.multiFactorHint?.uid||r.multiFactorUid;fe(l,s,"missing-multi-factor-info");const u={mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ca(s,u,"mfaSmsSignIn",async(b,E)=>{if(E.phoneSignInInfo.captchaResponse===rd){fe(t?.type===sd,b,"argument-error");const T=await Ty(b,E,t);return gT(b,T)}return gT(b,E)},"PHONE_PROVIDER").catch(b=>Promise.reject(b))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ca(s,a,"sendVerificationCode",async(h,y)=>{if(y.captchaResponse===rd){fe(t?.type===sd,h,"argument-error");const b=await Ty(h,y,t);return dT(h,b)}return dT(h,y)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{t?._reset()}}async function OP(s,e){const t=ke(s);if(Nt(t.auth.app))return Promise.reject(gn(t.auth));await H0(t,e)}async function Ty(s,e,t){fe(t.type===sd,s,"argument-error");const r=await t.verify();fe(typeof r=="string",s,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.captchaResponse,p=a.phoneEnrollmentInfo.clientType,h=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:r,captchaResponse:u,clientType:p,recaptchaVersion:h}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,u=a.phoneSignInInfo.clientType,p=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:l,clientType:u,recaptchaVersion:p}}),a}else return Object.assign(a,{recaptchaToken:r}),a}let So=class Ff{constructor(e){this.providerId=Ff.PROVIDER_ID,this.auth=Pt(e)}verifyPhoneNumber(e,t){return Um(this.auth,e,ke(t))}static credential(e,t){return To._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ff.credentialFromTaggedObject(t)}static credentialFromError(e){return Ff.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?To._fromTokenResponse(t,r):null}};So.PROVIDER_ID="phone";So.PHONE_SIGN_IN_METHOD="phone";function zo(s,e){return e?_r(e):(fe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Z0 extends Ic{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return di(e,this._buildIdpRequest())}_linkToIdToken(e,t){return di(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return di(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function MP(s){return XI(s.auth,new Z0(s),s.bypassAuthState)}function LP(s){const{auth:e,user:t}=s;return fe(t,e,"internal-error"),WI(t,new Z0(s),s.bypassAuthState)}async function UP(s){const{auth:e,user:t}=s;return fe(t,e,"internal-error"),H0(t,new Z0(s),s.bypassAuthState)}class cS{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:p}=e;if(u){this.reject(u);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(h))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MP;case"linkViaPopup":case"linkViaRedirect":return UP;case"reauthViaPopup":case"reauthViaRedirect":return LP;default:Nn(this.auth,"internal-error")}}resolve(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zP=new Ud(2e3,1e4);async function BP(s,e,t){if(Nt(s.app))return Promise.reject(cn(s,"operation-not-supported-in-this-environment"));const r=Pt(s);wc(s,e,yi);const a=zo(r,t);return new li(r,"signInViaPopup",e,a).executeNotNull()}async function qP(s,e,t){const r=ke(s);if(Nt(r.auth.app))return Promise.reject(cn(r.auth,"operation-not-supported-in-this-environment"));wc(r.auth,e,yi);const a=zo(r.auth,t);return new li(r.auth,"reauthViaPopup",e,a,r).executeNotNull()}async function FP(s,e,t){const r=ke(s);wc(r.auth,e,yi);const a=zo(r.auth,t);return new li(r.auth,"linkViaPopup",e,a,r).executeNotNull()}class li extends cS{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,li.currentPopupAction&&li.currentPopupAction.cancel(),li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){ns(this.filter.length===1,"Popup operations only handle one event");const e=Hd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,li.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zP.get())};e()}}li.currentPopupAction=null;const HP="pendingRedirect",id=new Map;class GP extends cS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=id.get(this.auth._key());if(!e){try{const r=await QP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}id.set(this.auth._key(),e)}return this.bypassAuthState||id.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QP(s,e){const t=dS(e),r=uS(s);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}async function e_(s,e){return uS(s)._set(dS(e),"true")}function KP(){id.clear()}function t_(s,e){id.set(s._key(),e)}function uS(s){return _r(s._redirectPersistence)}function dS(s){return Eo(HP,s.config.apiKey,s.name)}function $P(s,e,t){return YP(s,e,t)}async function YP(s,e,t){if(Nt(s.app))return Promise.reject(gn(s));const r=Pt(s);wc(s,e,yi),await r._initializationPromise;const a=zo(r,t);return await e_(a,r),a._openRedirect(r,e,"signInViaRedirect")}function WP(s,e,t){return XP(s,e,t)}async function XP(s,e,t){const r=ke(s);if(wc(r.auth,e,yi),Nt(r.auth.app))return Promise.reject(gn(r.auth));await r.auth._initializationPromise;const a=zo(r.auth,t);await e_(a,r.auth);const l=await hS(r);return a._openRedirect(r.auth,e,"reauthViaRedirect",l)}function JP(s,e,t){return ZP(s,e,t)}async function ZP(s,e,t){const r=ke(s);wc(r.auth,e,yi),await r.auth._initializationPromise;const a=zo(r.auth,t);await Vm(!1,r,e.providerId),await e_(a,r.auth);const l=await hS(r);return a._openRedirect(r.auth,e,"linkViaRedirect",l)}async function eV(s,e){return await Pt(s)._initializationPromise,zm(s,e,!1)}async function zm(s,e,t=!1){if(Nt(s.app))return Promise.reject(gn(s));const r=Pt(s),a=zo(r,e),u=await new GP(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}async function hS(s){const e=Hd(`${s.uid}:::`);return s._redirectEventId=e,await s.auth._setRedirectUser(s),await s.auth._persistUserIfCurrent(s),e}const tV=600*1e3;class fS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!mS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(cn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tV&&this.cachedEventUids.clear(),this.cachedEventUids.has(yT(e))}saveEventToCache(e){this.cachedEventUids.add(yT(e)),this.lastProcessedEventTime=Date.now()}}function yT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function mS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function nV(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mS(s);default:return!1}}async function pS(s,e={}){return Lt(s,"GET","/v1/projects",e)}const rV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sV=/^https?/;async function iV(s){if(s.config.emulator)return;const{authorizedDomains:e}=await pS(s);for(const t of e)try{if(aV(t))return}catch{}Nn(s,"unauthorized-domain")}function aV(s){const e=vd(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!sV.test(t))return!1;if(rV.test(s))return r===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const oV=new Ud(3e4,6e4);function _T(){const s=sn().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function lV(s){return new Promise((e,t)=>{function r(){_T(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_T(),t(cn(s,"network-request-failed"))},timeout:oV.get()})}if(sn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(sn().gapi?.load)r();else{const a=FI("iframefcb");return sn()[a]=()=>{gapi.load?r():t(cn(s,"network-request-failed"))},F0(`${nD()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Hf=null,e})}let Hf=null;function cV(s){return Hf=Hf||lV(s),Hf}const uV=new Ud(5e3,15e3),dV="__/auth/iframe",hV="emulator/auth/iframe",fV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pV(s){const e=s.config;fe(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?q0(e,hV):`https://${s.config.authDomain}/${dV}`,r={apiKey:e.apiKey,appName:s.name,v:wa},a=mV.get(s.config.apiHost);a&&(r.eid=a);const l=s._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Tc(r).slice(1)}`}async function gV(s){const e=await cV(s),t=sn().gapi;return fe(t,s,"internal-error"),e.open({where:document.body,url:pV(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fV,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=cn(s,"network-request-failed"),p=sn().setTimeout(()=>{l(u)},uV.get());function h(){sn().clearTimeout(p),a(r)}r.ping(h).then(h,()=>{l(u)})}))}const yV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_V=500,vV=600,bV="_blank",xV="http://localhost";class vT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EV(s,e,t,r=_V,a=vV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const h={...yV,width:r.toString(),height:a.toString(),top:l,left:u},y=Dt().toLowerCase();t&&(p=MI(y)?bV:t),jI(y)&&(e=e||xV,h.scrollbars="yes");const b=Object.entries(h).reduce((T,[R,q])=>`${T}${R}=${q},`,"");if(Qk(y)&&p!=="_self")return TV(e||"",p),new vT(null);const E=window.open(e||"",p,b);fe(E,s,"popup-blocked");try{E.focus()}catch{}return new vT(E)}function TV(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const wV="__/auth/handler",IV="emulator/auth/handler",SV=encodeURIComponent("fac");async function Hy(s,e,t,r,a,l){fe(s.config.authDomain,s,"auth-domain-config-required"),fe(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:wa,eventId:a};if(e instanceof yi){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",ZC(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries(l||{}))u[b]=E}if(e instanceof Sc){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(u.scopes=b.join(","))}s.tenantId&&(u.tid=s.tenantId);const p=u;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const h=await s._getAppCheckToken(),y=h?`#${SV}=${encodeURIComponent(h)}`:"";return`${AV(s)}?${Tc(p).slice(1)}${y}`}function AV({config:s}){return s.emulator?q0(s,IV):`https://${s.authDomain}/${wV}`}const wy="webStorageSupport";class NV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Io,this._completeRedirectFn=zm,this._overrideRedirectResult=t_}async _openPopup(e,t,r,a){ns(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Hy(e,t,r,vd(),a);return EV(e,l,Hd())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Hy(e,t,r,vd(),a);return gP(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ns(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await gV(e),r=new fS(e);return t.register("authEvent",a=>(fe(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wy,{type:wy},a=>{const l=a?.[0]?.[wy];l!==void 0&&t(!!l),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return BI()||OI()||Bd()}}const RV=NV;class CV{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return ks("unexpected MultiFactorSessionType")}}}class n_ extends CV{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new n_(e)}_finalizeEnroll(e,t,r){return cP(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return IP(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class gS{constructor(){}static assertion(e){return n_._fromCredential(e)}}gS.FACTOR_ID="phone";var bT="@firebase/auth",xT="1.12.0";class kV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function DV(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PV(s){ga(new Ls("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=r.options;fe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:u,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qI(s)},y=new Jk(r,a,l,h);return hD(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ga(new Ls("auth-internal",e=>{const t=Pt(e.getProvider("auth").getImmediate());return(r=>new kV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(bT,xT,DV(s)),Jr(bT,xT,"esm2020")}const VV=300;BC("authIdTokenMaxAge");function jV(){return document.getElementsByTagName("head")?.[0]??document}Zk({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=a=>{const l=cn("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",jV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PV("Browser");function Ao(){return window}const OV=2e3;async function MV(s,e,t){const{BuildInfo:r}=Ao();ns(e.sessionId,"AuthEvent did not contain a session ID");const a=await qV(e.sessionId),l={};return Bd()?l.ibi=r.packageName:zd()?l.apn=r.packageName:Nn(s,"operation-not-supported-in-this-environment"),r.displayName&&(l.appDisplayName=r.displayName),l.sessionId=a,Hy(s,t,e.type,void 0,e.eventId??void 0,l)}async function LV(s){const{BuildInfo:e}=Ao(),t={};Bd()?t.iosBundleId=e.packageName:zd()?t.androidPackageName=e.packageName:Nn(s,"operation-not-supported-in-this-environment"),await pS(s,t)}function UV(s){const{cordova:e}=Ao();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let a=null;r?e.plugins.browsertab.openUrl(s):a=e.InAppBrowser.open(s,Gk()?"_blank":"_system","location=yes"),t(a)})})}async function zV(s,e,t){const{cordova:r}=Ao();let a=()=>{};try{await new Promise((l,u)=>{let p=null;function h(){l();const E=r.plugins.browsertab?.close;typeof E=="function"&&E(),typeof t?.close=="function"&&t.close()}function y(){p||(p=window.setTimeout(()=>{u(cn(s,"redirect-cancelled-by-user"))},OV))}function b(){document?.visibilityState==="visible"&&y()}e.addPassiveListener(h),document.addEventListener("resume",y,!1),zd()&&document.addEventListener("visibilitychange",b,!1),a=()=>{e.removePassiveListener(h),document.removeEventListener("resume",y,!1),document.removeEventListener("visibilitychange",b,!1),p&&window.clearTimeout(p)}})}finally{a()}}function BV(s){const e=Ao();fe(typeof e?.universalLinks?.subscribe=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),fe(typeof e?.BuildInfo?.packageName<"u",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),fe(typeof e?.cordova?.plugins?.browsertab?.openUrl=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe(typeof e?.cordova?.plugins?.browsertab?.isAvailable=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe(typeof e?.cordova?.InAppBrowser?.open=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function qV(s){const e=FV(s),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function FV(s){if(ns(/[0-9a-zA-Z]+/.test(s),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(s);const e=new ArrayBuffer(s.length),t=new Uint8Array(e);for(let r=0;r<s.length;r++)t[r]=s.charCodeAt(r);return t}const HV=20;class GV extends fS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function QV(s,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:YV(),postBody:null,tenantId:s.tenantId,error:cn(s,"no-auth-event")}}function KV(s,e){return Gy()._set(Qy(s),e)}async function ET(s){const e=await Gy()._get(Qy(s));return e&&await Gy()._remove(Qy(s)),e}function $V(s,e){const t=XV(e);if(t.includes("/__/auth/callback")){const r=Gf(t),l=(r.firebaseError?WV(decodeURIComponent(r.firebaseError)):null)?.code?.split("auth/")?.[1],u=l?cn(l):null;return u?{type:s.type,eventId:s.eventId,tenantId:s.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:s.type,eventId:s.eventId,tenantId:s.tenantId,sessionId:s.sessionId,urlResponse:t,postBody:null}}return null}function YV(){const s=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<HV;t++){const r=Math.floor(Math.random()*e.length);s.push(e.charAt(r))}return s.join("")}function Gy(){return _r(W0)}function Qy(s){return Eo("authEvent",s.config.apiKey,s.name)}function WV(s){try{return JSON.parse(s)}catch{return null}}function XV(s){const e=Gf(s),t=e.link?decodeURIComponent(e.link):void 0,r=Gf(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Gf(a).link||a||r||t||s}function Gf(s){if(!s?.includes("?"))return{};const[e,...t]=s.split("?");return Hl(t.join("?"))}const JV=500;class ZV{constructor(){this._redirectPersistence=Io,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zm,this._overrideRedirectResult=t_}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new GV(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Nn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,a){BV(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),KP(),await this._originValidation(e);const u=QV(e,r,a);await KV(e,u);const p=await MV(e,u,t),h=await UV(p);return zV(e,l,h)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LV(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:a,BuildInfo:l}=Ao(),u=setTimeout(async()=>{await ET(e),t.onEvent(TT())},JV),p=async b=>{clearTimeout(u);const E=await ET(e);let T=null;E&&b?.url&&(T=$V(E,b.url)),t.onEvent(T||TT())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,p);const h=a,y=`${l.packageName.toLowerCase()}://`;Ao().handleOpenURL=async b=>{if(b.toLowerCase().startsWith(y)&&p({url:b}),typeof h=="function")try{h(b)}catch(E){console.error(E)}}}}const ej=ZV;function TT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:cn("no-auth-event")}}function tj(s,e){Pt(s)._logFramework(e)}var nj="@firebase/auth-compat",rj="0.6.2";const sj=1e3;function ad(){return self?.location?.protocol||null}function ij(){return ad()==="http:"||ad()==="https:"}function yS(s=Dt()){return!!((ad()==="file:"||ad()==="ionic:"||ad()==="capacitor:")&&s.toLowerCase().match(/iphone|ipad|ipod|android/))}function aj(){return P0()||Rm()}function oj(){return cI()&&document?.documentMode===11}function lj(s=Dt()){return/Edge\/\d+/.test(s)}function cj(s=Dt()){return oj()||lj(s)}function _S(){try{const s=self.localStorage,e=Hd();if(s)return s.setItem(e,"1"),s.removeItem(e),cj()?gd():!0}catch{return r_()&&gd()}return!1}function r_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Iy(){return(ij()||lI()||yS())&&!aj()&&_S()&&!r_()}function vS(){return yS()&&typeof document<"u"}async function uj(){return vS()?new Promise(s=>{const e=setTimeout(()=>{s(!1)},sj);document.addEventListener("deviceready",()=>{clearTimeout(e),s(!0)})}):!1}function dj(){return typeof window<"u"?window:null}const yr={LOCAL:"local",NONE:"none",SESSION:"session"},Uu=fe,bS="persistence";function hj(s,e){if(Uu(Object.values(yr).includes(e),s,"invalid-persistence-type"),P0()){Uu(e!==yr.SESSION,s,"unsupported-persistence-type");return}if(Rm()){Uu(e===yr.NONE,s,"unsupported-persistence-type");return}if(r_()){Uu(e===yr.NONE||e===yr.LOCAL&&gd(),s,"unsupported-persistence-type");return}Uu(e===yr.NONE||_S(),s,"unsupported-persistence-type")}async function Ky(s){await s._initializationPromise;const e=xS(),t=Eo(bS,s.config.apiKey,s.name);e&&e.setItem(t,s._getPersistenceType())}function fj(s,e){const t=xS();if(!t)return[];const r=Eo(bS,s,e);switch(t.getItem(r)){case yr.NONE:return[tc];case yr.LOCAL:return[Ed,Io];case yr.SESSION:return[Io];default:return[]}}function xS(){try{return dj()?.sessionStorage||null}catch{return null}}const mj=fe;class ia{constructor(){this.browserResolver=_r(RV),this.cordovaResolver=_r(ej),this.underlyingResolver=null,this._redirectPersistence=Io,this._completeRedirectFn=zm,this._overrideRedirectResult=t_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,a)}async _openRedirect(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return vS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mj(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await uj();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function ES(s){return s.unwrap()}function pj(s){return s.wrapped()}function gj(s){return TS(s)}function yj(s,e){const t=e.customData?._tokenResponse;if(e?.code==="auth/multi-factor-auth-required"){const r=e;r.resolver=new _j(s,lP(s,e))}else if(t){const r=TS(e),a=e;r&&(a.credential=r,a.tenantId=t.tenantId||void 0,a.email=t.email||void 0,a.phoneNumber=t.phoneNumber||void 0)}}function TS(s){const{_tokenResponse:e}=s instanceof Fn?s.customData:s;if(!e)return null;if(!(s instanceof Fn)&&"temporaryProof"in e&&"phoneNumber"in e)return So.credentialFromResult(s);const t=e.providerId;if(!t||t===Mu.PASSWORD)return null;let r;switch(t){case Mu.GOOGLE:r=Ns;break;case Mu.FACEBOOK:r=As;break;case Mu.GITHUB:r=Rs;break;case Mu.TWITTER:r=Cs;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:u,pendingToken:p,nonce:h}=e;return!l&&!u&&!a&&!p?null:p?t.startsWith("saml.")?nc._create(t,p):Us._fromParams({providerId:t,signInMethod:t,pendingToken:p,idToken:a,accessToken:l}):new $l(t).credential({idToken:a,accessToken:l,rawNonce:h})}return s instanceof Fn?r.credentialFromError(s):r.credentialFromResult(s)}function nr(s,e){return e.catch(t=>{throw t instanceof Fn&&yj(s,t),t}).then(t=>{const r=t.operationType,a=t.user;return{operationType:r,credential:gj(t),additionalUserInfo:oP(t),user:Bm.getOrCreate(a)}})}async function $y(s,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>nr(s,t.confirm(r))}}class _j{constructor(e,t){this.resolver=t,this.auth=pj(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return nr(ES(this.auth),this.resolver.resolveSignIn(e))}}let Bm=class Yu{constructor(e){this._delegate=e,this.multiFactor=dP(e)}static getOrCreate(e){return Yu.USER_MAP.has(e)||Yu.USER_MAP.set(e,new Yu(e)),Yu.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return nr(this.auth,JI(this._delegate,e))}async linkWithPhoneNumber(e,t){return $y(this.auth,VP(this._delegate,e,t))}async linkWithPopup(e){return nr(this.auth,FP(this._delegate,e,ia))}async linkWithRedirect(e){return await Ky(Pt(this.auth)),JP(this._delegate,e,ia)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return nr(this.auth,ZI(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return $y(this.auth,jP(this._delegate,e,t))}reauthenticateWithPopup(e){return nr(this.auth,qP(this._delegate,e,ia))}async reauthenticateWithRedirect(e){return await Ky(Pt(this.auth)),WP(this._delegate,e,ia)}sendEmailVerification(e){return WD(this._delegate,e)}async unlink(e){return await OD(this._delegate,e),this}updateEmail(e){return eP(this._delegate,e)}updatePassword(e){return tP(this._delegate,e)}updatePhoneNumber(e){return OP(this._delegate,e)}updateProfile(e){return ZD(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return XD(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Bm.USER_MAP=new WeakMap;const zu=fe;class Yy{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;zu(r,"invalid-api-key",{appName:e.name}),zu(r,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?ia:void 0;this._delegate=t.initialize({options:{persistence:vj(r,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(Ik),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bm.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){fD(this._delegate,e,t)}applyActionCode(e){return BD(this._delegate,e)}checkActionCode(e){return eS(this._delegate,e)}confirmPasswordReset(e,t){return zD(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return nr(this._delegate,FD(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return YD(this._delegate,e)}isSignInWithEmailLink(e){return QD(this._delegate,e)}async getRedirectResult(){zu(Iy(),this._delegate,"operation-not-supported-in-this-environment");const e=await eV(this._delegate,ia);return e?nr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){tj(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:a,error:l,complete:u}=wT(e,t,r);return this._delegate.onAuthStateChanged(a,l,u)}onIdTokenChanged(e,t,r){const{next:a,error:l,complete:u}=wT(e,t,r);return this._delegate.onIdTokenChanged(a,l,u)}sendSignInLinkToEmail(e,t){return GD(this._delegate,e,t)}sendPasswordResetEmail(e,t){return UD(this._delegate,e,t||void 0)}async setPersistence(e){hj(this._delegate,e);let t;switch(e){case yr.SESSION:t=Io;break;case yr.LOCAL:t=await _r(Ed)._isAvailable()?Ed:W0;break;case yr.NONE:t=tc;break;default:return Nn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return nr(this._delegate,jD(this._delegate))}signInWithCredential(e){return nr(this._delegate,jm(this._delegate,e))}signInWithCustomToken(e){return nr(this._delegate,LD(this._delegate,e))}signInWithEmailAndPassword(e,t){return nr(this._delegate,HD(this._delegate,e,t))}signInWithEmailLink(e,t){return nr(this._delegate,KD(this._delegate,e,t))}signInWithPhoneNumber(e,t){return $y(this._delegate,PP(this._delegate,e,t))}async signInWithPopup(e){return zu(Iy(),this._delegate,"operation-not-supported-in-this-environment"),nr(this._delegate,BP(this._delegate,e,ia))}async signInWithRedirect(e){return zu(Iy(),this._delegate,"operation-not-supported-in-this-environment"),await Ky(this._delegate),$P(this._delegate,e,ia)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return qD(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Yy.Persistence=yr;function wT(s,e,t){let r=s;typeof s!="function"&&({next:r,error:e,complete:t}=s);const a=r;return{next:u=>a(u&&Bm.getOrCreate(u)),error:e,complete:t}}function vj(s,e){const t=fj(s,e);if(typeof self<"u"&&!t.includes(Ed)&&t.push(Ed),typeof window<"u")for(const r of[W0,Io])t.includes(r)||t.push(r);return t.includes(tc)||t.push(tc),t}class s_{static credential(e,t){return So.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new So(ES(Vs.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}s_.PHONE_SIGN_IN_METHOD=So.PHONE_SIGN_IN_METHOD;s_.PROVIDER_ID=So.PROVIDER_ID;const bj=fe;class xj{constructor(e,t,r=Vs.app()){bj(r.options?.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new kP(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const Ej="auth-compat";function Tj(s){s.INTERNAL.registerComponent(new Ls(Ej,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Yy(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Dl.EMAIL_SIGNIN,PASSWORD_RESET:Dl.PASSWORD_RESET,RECOVER_EMAIL:Dl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Dl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Dl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Dl.VERIFY_EMAIL}},EmailAuthProvider:Ia,FacebookAuthProvider:As,GithubAuthProvider:Rs,GoogleAuthProvider:Ns,OAuthProvider:$l,SAMLAuthProvider:lm,PhoneAuthProvider:s_,PhoneMultiFactorGenerator:gS,RecaptchaVerifier:xj,TwitterAuthProvider:Cs,Auth:Yy,AuthCredential:Ic,Error:Fn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),s.registerVersion(nj,rj)}Tj(Vs);var IT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ua,wS;(function(){var s;function e(A,N){function k(){}k.prototype=N.prototype,A.F=N.prototype,A.prototype=new k,A.prototype.constructor=A,A.D=function(j,P,M){for(var C=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)C[Oe-2]=arguments[Oe];return N.prototype[P].apply(j,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,N,k){k||(k=0);const j=Array(16);if(typeof N=="string")for(var P=0;P<16;++P)j[P]=N.charCodeAt(k++)|N.charCodeAt(k++)<<8|N.charCodeAt(k++)<<16|N.charCodeAt(k++)<<24;else for(P=0;P<16;++P)j[P]=N[k++]|N[k++]<<8|N[k++]<<16|N[k++]<<24;N=A.g[0],k=A.g[1],P=A.g[2];let M=A.g[3],C;C=N+(M^k&(P^M))+j[0]+3614090360&4294967295,N=k+(C<<7&4294967295|C>>>25),C=M+(P^N&(k^P))+j[1]+3905402710&4294967295,M=N+(C<<12&4294967295|C>>>20),C=P+(k^M&(N^k))+j[2]+606105819&4294967295,P=M+(C<<17&4294967295|C>>>15),C=k+(N^P&(M^N))+j[3]+3250441966&4294967295,k=P+(C<<22&4294967295|C>>>10),C=N+(M^k&(P^M))+j[4]+4118548399&4294967295,N=k+(C<<7&4294967295|C>>>25),C=M+(P^N&(k^P))+j[5]+1200080426&4294967295,M=N+(C<<12&4294967295|C>>>20),C=P+(k^M&(N^k))+j[6]+2821735955&4294967295,P=M+(C<<17&4294967295|C>>>15),C=k+(N^P&(M^N))+j[7]+4249261313&4294967295,k=P+(C<<22&4294967295|C>>>10),C=N+(M^k&(P^M))+j[8]+1770035416&4294967295,N=k+(C<<7&4294967295|C>>>25),C=M+(P^N&(k^P))+j[9]+2336552879&4294967295,M=N+(C<<12&4294967295|C>>>20),C=P+(k^M&(N^k))+j[10]+4294925233&4294967295,P=M+(C<<17&4294967295|C>>>15),C=k+(N^P&(M^N))+j[11]+2304563134&4294967295,k=P+(C<<22&4294967295|C>>>10),C=N+(M^k&(P^M))+j[12]+1804603682&4294967295,N=k+(C<<7&4294967295|C>>>25),C=M+(P^N&(k^P))+j[13]+4254626195&4294967295,M=N+(C<<12&4294967295|C>>>20),C=P+(k^M&(N^k))+j[14]+2792965006&4294967295,P=M+(C<<17&4294967295|C>>>15),C=k+(N^P&(M^N))+j[15]+1236535329&4294967295,k=P+(C<<22&4294967295|C>>>10),C=N+(P^M&(k^P))+j[1]+4129170786&4294967295,N=k+(C<<5&4294967295|C>>>27),C=M+(k^P&(N^k))+j[6]+3225465664&4294967295,M=N+(C<<9&4294967295|C>>>23),C=P+(N^k&(M^N))+j[11]+643717713&4294967295,P=M+(C<<14&4294967295|C>>>18),C=k+(M^N&(P^M))+j[0]+3921069994&4294967295,k=P+(C<<20&4294967295|C>>>12),C=N+(P^M&(k^P))+j[5]+3593408605&4294967295,N=k+(C<<5&4294967295|C>>>27),C=M+(k^P&(N^k))+j[10]+38016083&4294967295,M=N+(C<<9&4294967295|C>>>23),C=P+(N^k&(M^N))+j[15]+3634488961&4294967295,P=M+(C<<14&4294967295|C>>>18),C=k+(M^N&(P^M))+j[4]+3889429448&4294967295,k=P+(C<<20&4294967295|C>>>12),C=N+(P^M&(k^P))+j[9]+568446438&4294967295,N=k+(C<<5&4294967295|C>>>27),C=M+(k^P&(N^k))+j[14]+3275163606&4294967295,M=N+(C<<9&4294967295|C>>>23),C=P+(N^k&(M^N))+j[3]+4107603335&4294967295,P=M+(C<<14&4294967295|C>>>18),C=k+(M^N&(P^M))+j[8]+1163531501&4294967295,k=P+(C<<20&4294967295|C>>>12),C=N+(P^M&(k^P))+j[13]+2850285829&4294967295,N=k+(C<<5&4294967295|C>>>27),C=M+(k^P&(N^k))+j[2]+4243563512&4294967295,M=N+(C<<9&4294967295|C>>>23),C=P+(N^k&(M^N))+j[7]+1735328473&4294967295,P=M+(C<<14&4294967295|C>>>18),C=k+(M^N&(P^M))+j[12]+2368359562&4294967295,k=P+(C<<20&4294967295|C>>>12),C=N+(k^P^M)+j[5]+4294588738&4294967295,N=k+(C<<4&4294967295|C>>>28),C=M+(N^k^P)+j[8]+2272392833&4294967295,M=N+(C<<11&4294967295|C>>>21),C=P+(M^N^k)+j[11]+1839030562&4294967295,P=M+(C<<16&4294967295|C>>>16),C=k+(P^M^N)+j[14]+4259657740&4294967295,k=P+(C<<23&4294967295|C>>>9),C=N+(k^P^M)+j[1]+2763975236&4294967295,N=k+(C<<4&4294967295|C>>>28),C=M+(N^k^P)+j[4]+1272893353&4294967295,M=N+(C<<11&4294967295|C>>>21),C=P+(M^N^k)+j[7]+4139469664&4294967295,P=M+(C<<16&4294967295|C>>>16),C=k+(P^M^N)+j[10]+3200236656&4294967295,k=P+(C<<23&4294967295|C>>>9),C=N+(k^P^M)+j[13]+681279174&4294967295,N=k+(C<<4&4294967295|C>>>28),C=M+(N^k^P)+j[0]+3936430074&4294967295,M=N+(C<<11&4294967295|C>>>21),C=P+(M^N^k)+j[3]+3572445317&4294967295,P=M+(C<<16&4294967295|C>>>16),C=k+(P^M^N)+j[6]+76029189&4294967295,k=P+(C<<23&4294967295|C>>>9),C=N+(k^P^M)+j[9]+3654602809&4294967295,N=k+(C<<4&4294967295|C>>>28),C=M+(N^k^P)+j[12]+3873151461&4294967295,M=N+(C<<11&4294967295|C>>>21),C=P+(M^N^k)+j[15]+530742520&4294967295,P=M+(C<<16&4294967295|C>>>16),C=k+(P^M^N)+j[2]+3299628645&4294967295,k=P+(C<<23&4294967295|C>>>9),C=N+(P^(k|~M))+j[0]+4096336452&4294967295,N=k+(C<<6&4294967295|C>>>26),C=M+(k^(N|~P))+j[7]+1126891415&4294967295,M=N+(C<<10&4294967295|C>>>22),C=P+(N^(M|~k))+j[14]+2878612391&4294967295,P=M+(C<<15&4294967295|C>>>17),C=k+(M^(P|~N))+j[5]+4237533241&4294967295,k=P+(C<<21&4294967295|C>>>11),C=N+(P^(k|~M))+j[12]+1700485571&4294967295,N=k+(C<<6&4294967295|C>>>26),C=M+(k^(N|~P))+j[3]+2399980690&4294967295,M=N+(C<<10&4294967295|C>>>22),C=P+(N^(M|~k))+j[10]+4293915773&4294967295,P=M+(C<<15&4294967295|C>>>17),C=k+(M^(P|~N))+j[1]+2240044497&4294967295,k=P+(C<<21&4294967295|C>>>11),C=N+(P^(k|~M))+j[8]+1873313359&4294967295,N=k+(C<<6&4294967295|C>>>26),C=M+(k^(N|~P))+j[15]+4264355552&4294967295,M=N+(C<<10&4294967295|C>>>22),C=P+(N^(M|~k))+j[6]+2734768916&4294967295,P=M+(C<<15&4294967295|C>>>17),C=k+(M^(P|~N))+j[13]+1309151649&4294967295,k=P+(C<<21&4294967295|C>>>11),C=N+(P^(k|~M))+j[4]+4149444226&4294967295,N=k+(C<<6&4294967295|C>>>26),C=M+(k^(N|~P))+j[11]+3174756917&4294967295,M=N+(C<<10&4294967295|C>>>22),C=P+(N^(M|~k))+j[2]+718787259&4294967295,P=M+(C<<15&4294967295|C>>>17),C=k+(M^(P|~N))+j[9]+3951481745&4294967295,A.g[0]=A.g[0]+N&4294967295,A.g[1]=A.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+M&4294967295}r.prototype.v=function(A,N){N===void 0&&(N=A.length);const k=N-this.blockSize,j=this.C;let P=this.h,M=0;for(;M<N;){if(P==0)for(;M<=k;)a(this,A,M),M+=this.blockSize;if(typeof A=="string"){for(;M<N;)if(j[P++]=A.charCodeAt(M++),P==this.blockSize){a(this,j),P=0;break}}else for(;M<N;)if(j[P++]=A[M++],P==this.blockSize){a(this,j),P=0;break}}this.h=P,this.o+=N},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var N=1;N<A.length-8;++N)A[N]=0;N=this.o*8;for(var k=A.length-8;k<A.length;++k)A[k]=N&255,N/=256;for(this.v(A),A=Array(16),N=0,k=0;k<4;++k)for(let j=0;j<32;j+=8)A[N++]=this.g[k]>>>j&255;return A};function l(A,N){var k=p;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=N(A)}function u(A,N){this.h=N;const k=[];let j=!0;for(let P=A.length-1;P>=0;P--){const M=A[P]|0;j&&M==N||(k[P]=M,j=!1)}this.g=k}var p={};function h(A){return-128<=A&&A<128?l(A,function(N){return new u([N|0],N<0?-1:0)}):new u([A|0],A<0?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return E;if(A<0)return W(y(-A));const N=[];let k=1;for(let j=0;A>=k;j++)N[j]=A/k|0,k*=4294967296;return new u(N,0)}function b(A,N){if(A.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(A.charAt(0)=="-")return W(b(A.substring(1),N));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=y(Math.pow(N,8));let j=E;for(let M=0;M<A.length;M+=8){var P=Math.min(8,A.length-M);const C=parseInt(A.substring(M,M+P),N);P<8?(P=y(Math.pow(N,P)),j=j.j(P).add(y(C))):(j=j.j(k),j=j.add(y(C)))}return j}var E=h(0),T=h(1),R=h(16777216);s=u.prototype,s.m=function(){if(U(this))return-W(this).m();let A=0,N=1;for(let k=0;k<this.g.length;k++){const j=this.i(k);A+=(j>=0?j:4294967296+j)*N,N*=4294967296}return A},s.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(q(this))return"0";if(U(this))return"-"+W(this).toString(A);const N=y(Math.pow(A,6));var k=this;let j="";for(;;){const P=me(k,N).g;k=S(k,P.j(N));let M=((k.g.length>0?k.g[0]:k.h)>>>0).toString(A);if(k=P,q(k))return M+j;for(;M.length<6;)M="0"+M;j=M+j}},s.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function q(A){if(A.h!=0)return!1;for(let N=0;N<A.g.length;N++)if(A.g[N]!=0)return!1;return!0}function U(A){return A.h==-1}s.l=function(A){return A=S(this,A),U(A)?-1:q(A)?0:1};function W(A){const N=A.g.length,k=[];for(let j=0;j<N;j++)k[j]=~A.g[j];return new u(k,~A.h).add(T)}s.abs=function(){return U(this)?W(this):this},s.add=function(A){const N=Math.max(this.g.length,A.g.length),k=[];let j=0;for(let P=0;P<=N;P++){let M=j+(this.i(P)&65535)+(A.i(P)&65535),C=(M>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);j=C>>>16,M&=65535,C&=65535,k[P]=C<<16|M}return new u(k,k[k.length-1]&-2147483648?-1:0)};function S(A,N){return A.add(W(N))}s.j=function(A){if(q(this)||q(A))return E;if(U(this))return U(A)?W(this).j(W(A)):W(W(this).j(A));if(U(A))return W(this.j(W(A)));if(this.l(R)<0&&A.l(R)<0)return y(this.m()*A.m());const N=this.g.length+A.g.length,k=[];for(var j=0;j<2*N;j++)k[j]=0;for(j=0;j<this.g.length;j++)for(let P=0;P<A.g.length;P++){const M=this.i(j)>>>16,C=this.i(j)&65535,Oe=A.i(P)>>>16,Ue=A.i(P)&65535;k[2*j+2*P]+=C*Ue,J(k,2*j+2*P),k[2*j+2*P+1]+=M*Ue,J(k,2*j+2*P+1),k[2*j+2*P+1]+=C*Oe,J(k,2*j+2*P+1),k[2*j+2*P+2]+=M*Oe,J(k,2*j+2*P+2)}for(A=0;A<N;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=N;A<2*N;A++)k[A]=0;return new u(k,0)};function J(A,N){for(;(A[N]&65535)!=A[N];)A[N+1]+=A[N]>>>16,A[N]&=65535,N++}function se(A,N){this.g=A,this.h=N}function me(A,N){if(q(N))throw Error("division by zero");if(q(A))return new se(E,E);if(U(A))return N=me(W(A),N),new se(W(N.g),W(N.h));if(U(N))return N=me(A,W(N)),new se(W(N.g),N.h);if(A.g.length>30){if(U(A)||U(N))throw Error("slowDivide_ only works with positive integers.");for(var k=T,j=N;j.l(A)<=0;)k=re(k),j=re(j);var P=ce(k,1),M=ce(j,1);for(j=ce(j,2),k=ce(k,2);!q(j);){var C=M.add(j);C.l(A)<=0&&(P=P.add(k),M=C),j=ce(j,1),k=ce(k,1)}return N=S(A,P.j(N)),new se(P,N)}for(P=E;A.l(N)>=0;){for(k=Math.max(1,Math.floor(A.m()/N.m())),j=Math.ceil(Math.log(k)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),M=y(k),C=M.j(N);U(C)||C.l(A)>0;)k-=j,M=y(k),C=M.j(N);q(M)&&(M=T),P=P.add(M),A=S(A,C)}return new se(P,A)}s.B=function(A){return me(this,A).h},s.and=function(A){const N=Math.max(this.g.length,A.g.length),k=[];for(let j=0;j<N;j++)k[j]=this.i(j)&A.i(j);return new u(k,this.h&A.h)},s.or=function(A){const N=Math.max(this.g.length,A.g.length),k=[];for(let j=0;j<N;j++)k[j]=this.i(j)|A.i(j);return new u(k,this.h|A.h)},s.xor=function(A){const N=Math.max(this.g.length,A.g.length),k=[];for(let j=0;j<N;j++)k[j]=this.i(j)^A.i(j);return new u(k,this.h^A.h)};function re(A){const N=A.g.length+1,k=[];for(let j=0;j<N;j++)k[j]=A.i(j)<<1|A.i(j-1)>>>31;return new u(k,A.h)}function ce(A,N){const k=N>>5;N%=32;const j=A.g.length-k,P=[];for(let M=0;M<j;M++)P[M]=N>0?A.i(M+k)>>>N|A.i(M+k+1)<<32-N:A.i(M+k);return new u(P,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,wS=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=b,ua=u}).apply(typeof IT<"u"?IT:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var IS,Wu,SS,Qf,Wy,AS,NS,RS;(function(){var s,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var _=0;_<d.length;++_){var x=d[_];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function a(d,_){if(_)e:{var x=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var B=d[I];if(!(B in x))break e;x=x[B]}d=d[d.length-1],I=x[d],_=_(I),_!=I&&_!=null&&e(x,d,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(_){var x=[],I;for(I in _)Object.prototype.hasOwnProperty.call(_,I)&&x.push([I,_[I]]);return x}});var l=l||{},u=this||self;function p(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function h(d,_,x){return d.call.apply(d.bind,arguments)}function y(d,_,x){return y=h,y.apply(null,arguments)}function b(d,_){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function E(d,_){function x(){}x.prototype=_.prototype,d.Z=_.prototype,d.prototype=new x,d.prototype.constructor=d,d.Ob=function(I,B,Y){for(var ye=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ye[Be-2]=arguments[Be];return _.prototype[B].apply(I,ye)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function R(d){const _=d.length;if(_>0){const x=Array(_);for(let I=0;I<_;I++)x[I]=d[I];return x}return[]}function q(d,_){for(let I=1;I<arguments.length;I++){const B=arguments[I];var x=typeof B;if(x=x!="object"?x:B?Array.isArray(B)?"array":x:"null",x=="array"||x=="object"&&typeof B.length=="number"){x=d.length||0;const Y=B.length||0;d.length=x+Y;for(let ye=0;ye<Y;ye++)d[x+ye]=B[ye]}else d.push(B)}}class U{constructor(_,x){this.i=_,this.j=x,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function W(d){u.setTimeout(()=>{throw d},0)}function S(){var d=A;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class J{constructor(){this.h=this.g=null}add(_,x){const I=se.get();I.set(_,x),this.h?this.h.next=I:this.g=I,this.h=I}}var se=new U(()=>new me,d=>d.reset());class me{constructor(){this.next=this.g=this.h=null}set(_,x){this.h=_,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ce=!1,A=new J,N=()=>{const d=Promise.resolve(void 0);re=()=>{d.then(k)}};function k(){for(var d;d=S();){try{d.h.call(d.g)}catch(x){W(x)}var _=se;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}ce=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};u.addEventListener("test",x,_),u.removeEventListener("test",x,_)}catch{}return d})();function C(d){return/^[\s\xa0]*$/.test(d)}function Oe(d,_){P.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}E(Oe,P),Oe.prototype.init=function(d,_){const x=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(x=="mouseover"?_=d.fromElement:x=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ue="closure_listenable_"+(Math.random()*1e6|0),X=0;function he(d,_,x,I,B){this.listener=d,this.proxy=null,this.src=_,this.type=x,this.capture=!!I,this.ha=B,this.key=++X,this.da=this.fa=!1}function Te(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Me(d,_,x){for(const I in d)_.call(x,d[I],I,d)}function ze(d,_){for(const x in d)_.call(void 0,d[x],x,d)}function V(d){const _={};for(const x in d)_[x]=d[x];return _}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(d,_){let x,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(x in I)d[x]=I[x];for(let Y=0;Y<ee.length;Y++)x=ee[Y],Object.prototype.hasOwnProperty.call(I,x)&&(d[x]=I[x])}}function K(d){this.src=d,this.g={},this.h=0}K.prototype.add=function(d,_,x,I,B){const Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);const ye=ae(d,_,I,B);return ye>-1?(_=d[ye],x||(_.fa=!1)):(_=new he(_,this.src,Y,!!I,B),_.fa=x,d.push(_)),_};function te(d,_){const x=_.type;if(x in d.g){var I=d.g[x],B=Array.prototype.indexOf.call(I,_,void 0),Y;(Y=B>=0)&&Array.prototype.splice.call(I,B,1),Y&&(Te(_),d.g[x].length==0&&(delete d.g[x],d.h--))}}function ae(d,_,x,I){for(let B=0;B<d.length;++B){const Y=d[B];if(!Y.da&&Y.listener==_&&Y.capture==!!x&&Y.ha==I)return B}return-1}var pe="closure_lm_"+(Math.random()*1e6|0),Ee={};function Re(d,_,x,I,B){if(Array.isArray(_)){for(let Y=0;Y<_.length;Y++)Re(d,_[Y],x,I,B);return null}return x=$n(x),d&&d[Ue]?d.J(_,x,p(I)?!!I.capture:!1,B):ar(d,_,x,!1,I,B)}function ar(d,_,x,I,B,Y){if(!_)throw Error("Invalid event type");const ye=p(B)?!!B.capture:!!B;let Be=Cn(d);if(Be||(d[pe]=Be=new K(d)),x=Be.add(_,x,I,ye,Y),x.proxy)return x;if(I=Ut(),x.proxy=I,I.src=d,I.listener=x,d.addEventListener)M||(B=ye),B===void 0&&(B=!1),d.addEventListener(_.toString(),I,B);else if(d.attachEvent)d.attachEvent(on(_.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ut(){function d(x){return _.call(d.src,d.listener,x)}const _=Qn;return d}function yn(d,_,x,I,B){if(Array.isArray(_))for(var Y=0;Y<_.length;Y++)yn(d,_[Y],x,I,B);else I=p(I)?!!I.capture:!!I,x=$n(x),d&&d[Ue]?(d=d.i,Y=String(_).toString(),Y in d.g&&(_=d.g[Y],x=ae(_,x,I,B),x>-1&&(Te(_[x]),Array.prototype.splice.call(_,x,1),_.length==0&&(delete d.g[Y],d.h--)))):d&&(d=Cn(d))&&(_=d.g[_.toString()],d=-1,_&&(d=ae(_,x,I,B)),(x=d>-1?_[d]:null)&&xr(x))}function xr(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[Ue])te(_.i,d);else{var x=d.type,I=d.proxy;_.removeEventListener?_.removeEventListener(x,I,d.capture):_.detachEvent?_.detachEvent(on(x),I):_.addListener&&_.removeListener&&_.removeListener(I),(x=Cn(_))?(te(x,d),x.h==0&&(x.src=null,_[pe]=null)):Te(d)}}}function on(d){return d in Ee?Ee[d]:Ee[d]="on"+d}function Qn(d,_){if(d.da)d=!0;else{_=new Oe(_,this);const x=d.listener,I=d.ha||d.src;d.fa&&xr(d),d=x.call(I,_)}return d}function Cn(d){return d=d[pe],d instanceof K?d:null}var Kn="__closure_events_fn_"+(Math.random()*1e9>>>0);function $n(d){return typeof d=="function"?d:(d[Kn]||(d[Kn]=function(_){return d.handleEvent(_)}),d[Kn])}function We(){j.call(this),this.i=new K(this),this.M=this,this.G=null}E(We,j),We.prototype[Ue]=!0,We.prototype.removeEventListener=function(d,_,x,I){yn(this,d,_,x,I)};function xt(d,_){var x,I=d.G;if(I)for(x=[];I;I=I.G)x.push(I);if(d=d.M,I=_.type||_,typeof _=="string")_=new P(_,d);else if(_ instanceof P)_.target=_.target||d;else{var B=_;_=new P(I,d),ge(_,B)}B=!0;let Y,ye;if(x)for(ye=x.length-1;ye>=0;ye--)Y=_.g=x[ye],B=kn(Y,I,!0,_)&&B;if(Y=_.g=d,B=kn(Y,I,!0,_)&&B,B=kn(Y,I,!1,_)&&B,x)for(ye=0;ye<x.length;ye++)Y=_.g=x[ye],B=kn(Y,I,!1,_)&&B}We.prototype.N=function(){if(We.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const x=d.g[_];for(let I=0;I<x.length;I++)Te(x[I]);delete d.g[_],d.h--}}this.G=null},We.prototype.J=function(d,_,x,I){return this.i.add(String(d),_,!1,x,I)},We.prototype.K=function(d,_,x,I){return this.i.add(String(d),_,!0,x,I)};function kn(d,_,x,I){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let B=!0;for(let Y=0;Y<_.length;++Y){const ye=_[Y];if(ye&&!ye.da&&ye.capture==x){const Be=ye.listener,zt=ye.ha||ye.src;ye.fa&&te(d.i,ye),B=Be.call(zt,I)!==!1&&B}}return B&&!I.defaultPrevented}function Q(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(d,_||0)}function Se(d){d.g=Q(()=>{d.g=null,d.i&&(d.i=!1,Se(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class He extends j{constructor(_,x){super(),this.m=_,this.l=x,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Se(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ue(d){j.call(this),this.h=d,this.g={}}E(ue,j);var kt=[];function _n(d){Me(d.g,function(_,x){this.g.hasOwnProperty(x)&&xr(_)},d),d.g={}}ue.prototype.N=function(){ue.Z.N.call(this),_n(this)},ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=u.JSON.stringify,ka=u.JSON.parse,qs=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function jc(){}function Lr(){}var Ln={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function be(){P.call(this,"d")}E(be,P);function Ve(){P.call(this,"c")}E(Ve,P);var et={},rs=null;function Go(){return rs=rs||new We}et.Ia="serverreachability";function oh(d){P.call(this,et.Ia,d)}E(oh,P);function ss(d){const _=Go();xt(_,new oh(_))}et.STAT_EVENT="statevent";function Da(d,_){P.call(this,et.STAT_EVENT,d),this.stat=_}E(Da,P);function Yt(d){const _=Go();xt(_,new Da(_,d))}et.Ja="timingevent";function is(d,_){P.call(this,et.Ja,d),this.size=_}E(is,P);function as(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},_)}function Ur(){this.g=!0}Ur.prototype.ua=function(){this.g=!1};function fp(d,_,x,I,B,Y){d.info(function(){if(d.g)if(Y){var ye="",Be=Y.split("&");for(let at=0;at<Be.length;at++){var zt=Be[at].split("=");if(zt.length>1){const It=zt[0];zt=zt[1];const Ir=It.split("_");ye=Ir.length>=2&&Ir[1]=="type"?ye+(It+"="+zt+"&"):ye+(It+"=redacted&")}}}else ye=null;else ye=Y;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+_+`
`+x+`
`+ye})}function lh(d,_,x,I,B,Y,ye){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+_+`
`+x+`
`+Y+" "+ye})}function os(d,_,x,I){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+mp(d,x)+(I?" "+I:"")})}function Pa(d,_){d.info(function(){return"TIMEOUT: "+_})}Ur.prototype.info=function(){};function mp(d,_){if(!d.g)return _;if(!_)return null;try{const Y=JSON.parse(_);if(Y){for(d=0;d<Y.length;d++)if(Array.isArray(Y[d])){var x=Y[d];if(!(x.length<2)){var I=x[1];if(Array.isArray(I)&&!(I.length<1)){var B=I[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ye=1;ye<I.length;ye++)I[ye]=""}}}}return $t(Y)}catch{return _}}var Va={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mc;function ja(){}E(ja,jc),ja.prototype.g=function(){return new XMLHttpRequest},Mc=new ja;function Fs(d){return encodeURIComponent(String(d))}function ch(d){var _=1;d=d.split(":");const x=[];for(;_>0&&d.length;)x.push(d.shift()),_--;return d.length&&x.push(d.join(":")),x}function zr(d,_,x,I){this.j=d,this.i=_,this.l=x,this.S=I||1,this.V=new ue(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Br}function Br(){this.i=null,this.g="",this.h=!1}var Wt={},dn={};function ls(d,_,x){d.M=1,d.A=Oa(Jt(_)),d.u=x,d.R=!0,Qo(d,null)}function Qo(d,_){d.F=Date.now(),cs(d),d.B=Jt(d.A);var x=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),Wo(x.i,"t",I),d.C=0,x=d.j.L,d.h=new Br,d.g=wh(d.j,x?_:null,!d.u),d.P>0&&(d.O=new He(y(d.Y,d,d.g),d.P)),_=d.V,x=d.g,I=d.ba;var B="readystatechange";Array.isArray(B)||(B&&(kt[0]=B.toString()),B=kt);for(let Y=0;Y<B.length;Y++){const ye=Re(x,B[Y],I||_.handleEvent,!1,_.h||_);if(!ye)break;_.g[ye.key]=ye}_=d.J?V(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),ss(),fp(d.i,d.v,d.B,d.l,d.S,d.u)}zr.prototype.ba=function(d){d=d.target;const _=this.O;_&&Hr(d)==3?_.j():this.Y(d)},zr.prototype.Y=function(d){try{if(d==this.g)e:{const Be=Hr(this.g),zt=this.g.ya(),at=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||vn(this.g)))){this.K||Be!=4||zt==7||(zt==8||at<=0?ss(3):ss(2)),us(this);var _=this.g.ca();this.X=_;var x=pp(this);if(this.o=_==200,lh(this.i,this.v,this.B,this.l,this.S,Be,_),this.o){if(this.U&&!this.L){t:{if(this.g){var I,B=this.g;if((I=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(I)){var Y=I;break t}}Y=null}if(d=Y)os(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ds(this,d);else{this.o=!1,this.m=3,Yt(12),or(this),Er(this);break e}}if(this.R){d=!0;let It;for(;!this.K&&this.C<x.length;)if(It=dh(this,x),It==dn){Be==4&&(this.m=4,Yt(14),d=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(It==Wt){this.m=4,Yt(15),os(this.i,this.l,x,"[Invalid Chunk]"),d=!1;break}else os(this.i,this.l,It,null),ds(this,It);if(uh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||x.length!=0||this.h.h||(this.m=1,Yt(16),d=!1),this.o=this.o&&d,!d)os(this.i,this.l,x,"[Invalid Chunked Response]"),or(this),Er(this);else if(x.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Jc(ye),ye.P=!0,Yt(11))}}else os(this.i,this.l,x,null),ds(this,x);Be==4&&or(this),this.o&&!this.K&&(Be==4?bh(this.j,this):(this.o=!1,cs(this)))}else Gs(this.g),_==400&&x.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),or(this),Er(this)}}}catch{}};function pp(d){if(!uh(d))return d.g.la();const _=vn(d.g);if(_==="")return"";let x="";const I=_.length,B=Hr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return or(d),Er(d),"";d.h.i=new u.TextDecoder}for(let Y=0;Y<I;Y++)d.h.h=!0,x+=d.h.i.decode(_[Y],{stream:!(B&&Y==I-1)});return _.length=0,d.h.g+=x,d.C=0,d.h.g}function uh(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function dh(d,_){var x=d.C,I=_.indexOf(`
`,x);return I==-1?dn:(x=Number(_.substring(x,I)),isNaN(x)?Wt:(I+=1,I+x>_.length?dn:(_=_.slice(I,I+x),d.C=I+x,_)))}zr.prototype.cancel=function(){this.K=!0,or(this)};function cs(d){d.T=Date.now()+d.H,Ko(d,d.H)}function Ko(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=as(y(d.aa,d),_)}function us(d){d.D&&(u.clearTimeout(d.D),d.D=null)}zr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Pa(this.i,this.B),this.M!=2&&(ss(),Yt(17)),or(this),this.m=2,Er(this)):Ko(this,this.T-d)};function Er(d){d.j.I==0||d.K||bh(d.j,d)}function or(d){us(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,_n(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function ds(d,_){try{var x=d.j;if(x.I!=0&&(x.g==d||fs(x.h,d))){if(!d.L&&fs(x.h,d)&&x.I==3){try{var I=x.Ba.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<d.F)tl(x),Ri(x);else break e;Fa(x),Yt(18)}}else x.xa=B[1],0<x.xa-x.K&&B[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=as(y(x.Va,x),6e3));hs(x.h)<=1&&x.ta&&(x.ta=void 0)}else vs(x,11)}else if((d.L||x.g==d)&&tl(x),!C(_))for(B=x.Ba.g.parse(_),_=0;_<B.length;_++){let at=B[_];const It=at[0];if(!(It<=x.K))if(x.K=It,at=at[1],x.I==2)if(at[0]=="c"){x.M=at[1],x.ba=at[2];const Ir=at[3];Ir!=null&&(x.ka=Ir,x.j.info("VER="+x.ka));const bs=at[4];bs!=null&&(x.za=bs,x.j.info("SVER="+x.za));const Gr=at[5];Gr!=null&&typeof Gr=="number"&&Gr>0&&(I=1.5*Gr,x.O=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const Qr=d.g;if(Qr){const Ha=Qr.g?Qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ha){var Y=I.h;Y.g||Ha.indexOf("spdy")==-1&&Ha.indexOf("quic")==-1&&Ha.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(zc(Y,Y.h),Y.h=null))}if(I.G){const nl=Qr.g?Qr.g.getResponseHeader("X-HTTP-Session-Id"):null;nl&&(I.wa=nl,ct(I.J,I.G,nl))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-d.F,x.j.info("Handshake RTT: "+x.T+"ms")),I=x;var ye=d;if(I.na=Th(I,I.L?I.ba:null,I.W),ye.L){Bc(I.h,ye);var Be=ye,zt=I.O;zt&&(Be.H=zt),Be.D&&(us(Be),cs(Be)),I.g=ye}else _h(I);x.i.length>0&&_s(x)}else at[0]!="stop"&&at[0]!="close"||vs(x,7);else x.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?vs(x,7):Wc(x):at[0]!="noop"&&x.l&&x.l.qa(at),x.A=0)}}ss(4)}catch{}}var Xt=class{constructor(d,_){this.g=d,this.map=_}};function Lc(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Uc(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function hs(d){return d.h?1:d.g?d.g.size:0}function fs(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function zc(d,_){d.g?d.g.add(_):d.h=_}function Bc(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Lc.prototype.cancel=function(){if(this.i=qc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function qc(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const x of d.g.values())_=_.concat(x.G);return _}return R(d.i)}var hh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $o(d,_){if(d){d=d.split("&");for(let x=0;x<d.length;x++){const I=d[x].indexOf("=");let B,Y=null;I>=0?(B=d[x].substring(0,I),Y=d[x].substring(I+1)):B=d[x],_(B,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function lr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof lr?(this.l=d.l,hn(this,d.j),this.o=d.o,this.g=d.g,Ei(this,d.u),this.h=d.h,Fc(this,gh(d.i)),this.m=d.m):d&&(_=String(d).match(hh))?(this.l=!1,hn(this,_[1]||"",!0),this.o=ms(_[2]||""),this.g=ms(_[3]||"",!0),Ei(this,_[4]),this.h=ms(_[5]||"",!0),Fc(this,_[6]||"",!0),this.m=ms(_[7]||"")):(this.l=!1,this.i=new wi(null,this.l))}lr.prototype.toString=function(){const d=[];var _=this.j;_&&d.push(Ma(_,Yo,!0),":");var x=this.g;return(x||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Ma(_,Yo,!0),"@"),d.push(Fs(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&d.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(Ma(x,x.charAt(0)=="/"?Hc:fh,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",Ma(x,mh)),d.join("")},lr.prototype.resolve=function(d){const _=Jt(this);let x=!!d.j;x?hn(_,d.j):x=!!d.o,x?_.o=d.o:x=!!d.g,x?_.g=d.g:x=d.u!=null;var I=d.h;if(x)Ei(_,d.u);else if(x=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var B=_.h.lastIndexOf("/");B!=-1&&(I=_.h.slice(0,B+1)+I)}if(B=I,B==".."||B==".")I="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){I=B.lastIndexOf("/",0)==0,B=B.split("/");const Y=[];for(let ye=0;ye<B.length;){const Be=B[ye++];Be=="."?I&&ye==B.length&&Y.push(""):Be==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),I&&ye==B.length&&Y.push("")):(Y.push(Be),I=!0)}I=Y.join("/")}else I=B}return x?_.h=I:x=d.i.toString()!=="",x?Fc(_,gh(d.i)):x=!!d.m,x&&(_.m=d.m),_};function Jt(d){return new lr(d)}function hn(d,_,x){d.j=x?ms(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Ei(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function Fc(d,_,x){_ instanceof wi?(d.i=_,Xo(d.i,d.l)):(x||(_=Ma(_,Ti)),d.i=new wi(_,d.l))}function ct(d,_,x){d.i.set(_,x)}function Oa(d){return ct(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function ms(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ma(d,_,x){return typeof d=="string"?(d=encodeURI(d).replace(_,Yn),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Yn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Yo=/[#\/\?@]/g,fh=/[#\?:]/g,Hc=/[#\?]/g,Ti=/[#\?@]/g,mh=/#/g;function wi(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Wn(d){d.g||(d.g=new Map,d.h=0,d.i&&$o(d.i,function(_,x){d.add(decodeURIComponent(_.replace(/\+/g," ")),x)}))}s=wi.prototype,s.add=function(d,_){Wn(this),this.i=null,d=Ii(this,d);let x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(_),this.h+=1,this};function ph(d,_){Wn(d),_=Ii(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Gc(d,_){return Wn(d),_=Ii(d,_),d.g.has(_)}s.forEach=function(d,_){Wn(this),this.g.forEach(function(x,I){x.forEach(function(B){d.call(_,B,I,this)},this)},this)};function Qc(d,_){Wn(d);let x=[];if(typeof _=="string")Gc(d,_)&&(x=x.concat(d.g.get(Ii(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)x=x.concat(d[_]);return x}s.set=function(d,_){return Wn(this),this.i=null,d=Ii(this,d),Gc(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},s.get=function(d,_){return d?(d=Qc(this,d),d.length>0?String(d[0]):_):_};function Wo(d,_,x){ph(d,_),x.length>0&&(d.i=null,d.g.set(Ii(d,_),R(x)),d.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let I=0;I<_.length;I++){var x=_[I];const B=Fs(x);x=Qc(this,x);for(let Y=0;Y<x.length;Y++){let ye=B;x[Y]!==""&&(ye+="="+Fs(x[Y])),d.push(ye)}}return this.i=d.join("&")};function gh(d){const _=new wi;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function Ii(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Xo(d,_){_&&!d.j&&(Wn(d),d.i=null,d.g.forEach(function(x,I){const B=I.toLowerCase();I!=B&&(ph(this,I),Wo(this,B,x))},d)),d.j=_}function qr(d,_){const x=new Ur;if(u.Image){const I=new Image;I.onload=b(Tr,x,"TestLoadImage: loaded",!0,_,I),I.onerror=b(Tr,x,"TestLoadImage: error",!1,_,I),I.onabort=b(Tr,x,"TestLoadImage: abort",!1,_,I),I.ontimeout=b(Tr,x,"TestLoadImage: timeout",!1,_,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else _(!1)}function Kc(d,_){const x=new Ur,I=new AbortController,B=setTimeout(()=>{I.abort(),Tr(x,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:I.signal}).then(Y=>{clearTimeout(B),Y.ok?Tr(x,"TestPingServer: ok",!0,_):Tr(x,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(B),Tr(x,"TestPingServer: error",!1,_)})}function Tr(d,_,x,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(x)}catch{}}function Si(){this.g=new qs}function ps(d){this.i=d.Sb||null,this.h=d.ab||!1}E(ps,jc),ps.prototype.g=function(){return new La(this.i,this.h)};function La(d,_){We.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(La,We),s=La.prototype,s.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,Fr(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Jo(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Jo(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Ai(this):Fr(this),this.readyState==3&&Jo(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Ai(this))},s.Na=function(d){this.g&&(this.response=d,Ai(this))},s.ga=function(){this.g&&Ai(this)};function Ai(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Fr(d)}s.setRequestHeader=function(d,_){this.A.append(d,_)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var x=_.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=_.next();return d.join(`\r
`)};function Fr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(La.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function wr(d){let _="";return Me(d,function(x,I){_+=I,_+=":",_+=x,_+=`\r
`}),_}function Ua(d,_,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=wr(x),typeof d=="string"?x!=null&&Fs(x):ct(d,_,x))}function mt(d){We.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(mt,We);var gs=/^https?$/i,$c=["POST","PUT"];s=mt.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,_,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mc.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(Y){za(this,Y);return}if(d=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)x.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Y of I.keys())x.set(Y,I.get(Y));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call($c,_,void 0)>=0)||I||B||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ye]of x)this.g.setRequestHeader(Y,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Y){za(this,Y)}};function za(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,Yc(d),Hs(d)}function Yc(d){d.A||(d.A=!0,xt(d,"complete"),xt(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,xt(this,"complete"),xt(this,"abort"),Hs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hs(this,!0)),mt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ba(this):this.Xa())},s.Xa=function(){Ba(this)};function Ba(d){if(d.h&&typeof l<"u"){if(d.v&&Hr(d)==4)setTimeout(d.Ca.bind(d),0);else if(xt(d,"readystatechange"),Hr(d)==4){d.h=!1;try{const Y=d.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var x;if(!(x=_)){var I;if(I=Y===0){let ye=String(d.D).match(hh)[1]||null;!ye&&u.self&&u.self.location&&(ye=u.self.location.protocol.slice(0,-1)),I=!gs.test(ye?ye.toLowerCase():"")}x=I}if(x)xt(d,"complete"),xt(d,"success");else{d.o=6;try{var B=Hr(d)>2?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.ca()+"]",Yc(d)}}finally{Hs(d)}}}}function Hs(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const x=d.g;d.g=null,_||xt(d,"ready");try{x.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Hr(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Hr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),ka(_)}};function vn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Gs(d){const _={};d=(d.g&&Hr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(C(d[I]))continue;var x=ch(d[I]);const B=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Y=_[B]||[];_[B]=Y,Y.push(x)}ze(_,function(I){return I.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ys(d,_,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||_}function Ni(d){this.za=0,this.i=[],this.j=new Ur,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ys("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ys("baseRetryDelayMs",5e3,d),this.Za=ys("retryDelaySeedMs",1e4,d),this.Ta=ys("forwardChannelMaxRetries",2,d),this.va=ys("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Lc(d&&d.concurrentRequestLimit),this.Ba=new Si,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ni.prototype,s.ka=8,s.I=1,s.connect=function(d,_,x,I){Yt(0),this.W=d,this.H=_||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.J=Th(this,null,this.W),_s(this)};function Wc(d){if(Zo(d),d.I==3){var _=d.V++,x=Jt(d.J);if(ct(x,"SID",d.M),ct(x,"RID",_),ct(x,"TYPE","terminate"),qa(d,x),_=new zr(d,d.j,_),_.M=2,_.A=Oa(Jt(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!x&&u.Image&&(new Image().src=_.A,x=!0),x||(_.g=wh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),cs(_)}Eh(d)}function Ri(d){d.g&&(Jc(d),d.g.cancel(),d.g=null)}function Zo(d){Ri(d),d.v&&(u.clearTimeout(d.v),d.v=null),tl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function _s(d){if(!Uc(d.h)&&!d.m){d.m=!0;var _=d.Ea;re||N(),ce||(re(),ce=!0),A.add(_,d),d.D=0}}function el(d,_){return hs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=as(y(d.Ea,d,_),xh(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const B=new zr(this,this.j,d);let Y=this.o;if(this.U&&(Y?(Y=V(Y),ge(Y,this.U)):Y=this.U),this.u!==null||this.R||(B.J=Y,Y=null),this.S)e:{for(var _=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(_+=I,_>4096){_=x;break e}if(_===4096||x===this.i.length-1){_=x+1;break e}}_=1e3}else _=1e3;_=yh(this,B,_),x=Jt(this.J),ct(x,"RID",d),ct(x,"CVER",22),this.G&&ct(x,"X-HTTP-Session-Id",this.G),qa(this,x),Y&&(this.R?_="headers="+Fs(wr(Y))+"&"+_:this.u&&Ua(x,this.u,Y)),zc(this.h,B),this.Ra&&ct(x,"TYPE","init"),this.S?(ct(x,"$req",_),ct(x,"SID","null"),B.U=!0,ls(B,x,null)):ls(B,x,_),this.I=2}}else this.I==3&&(d?Xc(this,d):this.i.length==0||Uc(this.h)||Xc(this))};function Xc(d,_){var x;_?x=_.l:x=d.V++;const I=Jt(d.J);ct(I,"SID",d.M),ct(I,"RID",x),ct(I,"AID",d.K),qa(d,I),d.u&&d.o&&Ua(I,d.u,d.o),x=new zr(d,d.j,x,d.D+1),d.u===null&&(x.J=d.o),_&&(d.i=_.G.concat(d.i)),_=yh(d,x,1e3),x.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),zc(d.h,x),ls(x,I,_)}function qa(d,_){d.H&&Me(d.H,function(x,I){ct(_,I,x)}),d.l&&Me({},function(x,I){ct(_,I,x)})}function yh(d,_,x){x=Math.min(d.i.length,x);const I=d.l?y(d.l.Ka,d.l,d):null;e:{var B=d.i;let Be=-1;for(;;){const zt=["count="+x];Be==-1?x>0?(Be=B[0].g,zt.push("ofs="+Be)):Be=0:zt.push("ofs="+Be);let at=!0;for(let It=0;It<x;It++){var Y=B[It].g;const Ir=B[It].map;if(Y-=Be,Y<0)Be=Math.max(0,B[It].g-100),at=!1;else try{Y="req"+Y+"_"||"";try{var ye=Ir instanceof Map?Ir:Object.entries(Ir);for(const[bs,Gr]of ye){let Qr=Gr;p(Gr)&&(Qr=$t(Gr)),zt.push(Y+bs+"="+encodeURIComponent(Qr))}}catch(bs){throw zt.push(Y+"type="+encodeURIComponent("_badmap")),bs}}catch{I&&I(Ir)}}if(at){ye=zt.join("&");break e}}ye=void 0}return d=d.i.splice(0,x),_.G=d,ye}function _h(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;re||N(),ce||(re(),ce=!0),A.add(_,d),d.A=0}}function Fa(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=as(y(d.Da,d),xh(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,vh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=as(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),Ri(this),vh(this))};function Jc(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function vh(d){d.g=new zr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=Jt(d.na);ct(_,"RID","rpc"),ct(_,"SID",d.M),ct(_,"AID",d.K),ct(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&ct(_,"TO",d.ia),ct(_,"TYPE","xmlhttp"),qa(d,_),d.u&&d.o&&Ua(_,d.u,d.o),d.O&&(d.g.H=d.O);var x=d.g;d=d.ba,x.M=1,x.A=Oa(Jt(_)),x.u=null,x.R=!0,Qo(x,d)}s.Va=function(){this.C!=null&&(this.C=null,Ri(this),Fa(this),Yt(19))};function tl(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function bh(d,_){var x=null;if(d.g==_){tl(d),Jc(d),d.g=null;var I=2}else if(fs(d.h,_))x=_.G,Bc(d.h,_),I=1;else return;if(d.I!=0){if(_.o)if(I==1){x=_.u?_.u.length:0,_=Date.now()-_.F;var B=d.D;I=Go(),xt(I,new is(I,x)),_s(d)}else _h(d);else if(B=_.m,B==3||B==0&&_.X>0||!(I==1&&el(d,_)||I==2&&Fa(d)))switch(x&&x.length>0&&(_=d.h,_.i=_.i.concat(x)),B){case 1:vs(d,5);break;case 4:vs(d,10);break;case 3:vs(d,6);break;default:vs(d,2)}}}function xh(d,_){let x=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(x*=2),x*_}function vs(d,_){if(d.j.info("Error code "+_),_==2){var x=y(d.bb,d),I=d.Ua;const B=!I;I=new lr(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||hn(I,"https"),Oa(I),B?qr(I.toString(),x):Kc(I.toString(),x)}else Yt(2);d.I=0,d.l&&d.l.pa(_),Eh(d),Zo(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Eh(d){if(d.I=0,d.ja=[],d.l){const _=qc(d.h);(_.length!=0||d.i.length!=0)&&(q(d.ja,_),q(d.ja,d.i),d.h.i.length=0,R(d.i),d.i.length=0),d.l.oa()}}function Th(d,_,x){var I=x instanceof lr?Jt(x):new lr(x);if(I.g!="")_&&(I.g=_+"."+I.g),Ei(I,I.u);else{var B=u.location;I=B.protocol,_=_?_+"."+B.hostname:B.hostname,B=+B.port;const Y=new lr(null);I&&hn(Y,I),_&&(Y.g=_),B&&Ei(Y,B),x&&(Y.h=x),I=Y}return x=d.G,_=d.wa,x&&_&&ct(I,x,_),ct(I,"VER",d.ka),qa(d,I),I}function wh(d,_,x){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new mt(new ps({ab:x})):new mt(d.ma),_.Fa(d.L),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ih(){}s=Ih.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ci(){}Ci.prototype.g=function(d,_){return new Un(d,_)};function Un(d,_){We.call(this),this.g=new Ni(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!C(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!C(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Qs(this)}E(Un,We),Un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){Wc(this.g)},Un.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.v&&(x={},x.__data__=$t(d),d=x);_.i.push(new Xt(_.Ya++,d)),_.I==3&&_s(_)},Un.prototype.N=function(){this.g.l=null,delete this.j,Wc(this.g),delete this.g,Un.Z.N.call(this)};function Sh(d){be.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const x in _){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}E(Sh,be);function Ah(){Ve.call(this),this.status=1}E(Ah,Ve);function Qs(d){this.g=d}E(Qs,Ih),Qs.prototype.ra=function(){xt(this.g,"a")},Qs.prototype.qa=function(d){xt(this.g,new Sh(d))},Qs.prototype.pa=function(d){xt(this.g,new Ah)},Qs.prototype.oa=function(){xt(this.g,"b")},Ci.prototype.createWebChannel=Ci.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,RS=function(){return new Ci},NS=function(){return Go()},AS=et,Wy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,Qf=Va,Oc.COMPLETE="complete",SS=Oc,Lr.EventType=Ln,Ln.OPEN="a",Ln.CLOSE="b",Ln.ERROR="c",Ln.MESSAGE="d",We.prototype.listen=We.prototype.J,Wu=Lr,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,IS=mt}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");let Ac="12.8.0";function wj(s){Ac=s}const ya=new Cm("@firebase/firestore");function Ul(){return ya.logLevel}function Ij(s){ya.setLogLevel(s)}function de(s,...e){if(ya.logLevel<=$e.DEBUG){const t=e.map(i_);ya.debug(`Firestore (${Ac}): ${s}`,...t)}}function Gt(s,...e){if(ya.logLevel<=$e.ERROR){const t=e.map(i_);ya.error(`Firestore (${Ac}): ${s}`,...t)}}function zs(s,...e){if(ya.logLevel<=$e.WARN){const t=e.map(i_);ya.warn(`Firestore (${Ac}): ${s}`,...t)}}function i_(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function xe(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,CS(s,r,t)}function CS(s,e,t){let r=`FIRESTORE (${Ac}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Gt(r),new Error(r)}function Ie(s,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,s||CS(e,a,r)}function Sj(s,e){s||xe(57014,e)}function ve(s,e){return s}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Fn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class An{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class kS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Aj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(pn.UNAUTHENTICATED)))}shutdown(){}}class Nj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Rj{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ie(this.o===void 0,42304);let r=this.i;const a=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let l=new An;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new An,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const h=l;e.enqueueRetryable((async()=>{await h.promise,await a(this.currentUser)}))},p=h=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((h=>p(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?p(h):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new An)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new kS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class Cj{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class kj{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Cj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ST{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ie(this.o===void 0,3512);const r=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ST(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ie(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ST(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Pj(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class a_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=Pj(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Pe(s,e){return s<e?-1:s>e?1:0}function Xy(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const a=s.charAt(r),l=e.charAt(r);if(a!==l)return Sy(a)===Sy(l)?Pe(a,l):Sy(a)?1:-1}return Pe(s.length,e.length)}const Vj=55296,jj=57343;function Sy(s){const e=s.charCodeAt(0);return e>=Vj&&e<=jj}function rc(s,e,t){return s.length===e.length&&s.every(((r,a)=>t(r,e[a])))}function DS(s){return s+"\0"}const AT="__name__";class Is{constructor(e,t,r){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&xe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Is.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Is?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Is.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Pe(e.length,t.length)}static compareSegments(e,t){const r=Is.isNumericId(e),a=Is.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Is.extractNumericId(e).compare(Is.extractNumericId(t)):Xy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ua.fromString(e.substring(4,e.length-2))}}class Ye extends Is{construct(e,t,r){return new Ye(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const Oj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Is{construct(e,t,r){return new Rt(e,t,r)}static isValidIdentifier(e){return Oj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AT}static keyField(){return new Rt([AT])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new le($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const p=e[a];if(p==="\\"){if(a+1===e.length)throw new le($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[a+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new le($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,a+=2}else p==="`"?(u=!u,a++):p!=="."||u?(r+=p,a++):(l(),a++)}if(l(),u)throw new le($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(t)}static emptyPath(){return new Rt([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Ye.fromString(e))}static fromName(e){return new _e(Ye.fromString(e).popFirst(5))}static empty(){return new _e(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Ye(e.slice()))}}function o_(s,e,t){if(!t)throw new le($.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function PS(s,e,t,r){if(e===!0&&r===!0)throw new le($.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function NT(s){if(!_e.isDocumentKey(s))throw new le($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function RT(s){if(_e.isDocumentKey(s))throw new le($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function VS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function qm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":xe(12329,{type:typeof s})}function it(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new le($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qm(s);throw new le($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function jS(s,e){if(e<=0)throw new le($.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function an(s,e){const t={typeString:s};return e&&(t.value=e),t}function Qd(s,e){if(!VS(s))throw new le($.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const u=s[r];if(a&&typeof u!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new le($.INVALID_ARGUMENT,t);return!0}const CT=-62135596800,kT=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*kT);return new lt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<CT)throw new le($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kT}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qd(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-CT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:an("string",lt._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new lt(0,0))}static max(){return new Ne(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const sc=-1;class hm{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Jy(s){return s.fields.find((e=>e.kind===2))}function lo(s){return s.fields.filter((e=>e.kind!==2))}hm.UNKNOWN_ID=-1;class Kf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Td{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Td(0,br.min())}}function OS(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Ne.fromTimestamp(r===1e9?new lt(t+1,0):new lt(t,r));return new br(a,_e.empty(),e)}function MS(s){return new br(s.readTime,s.key,sc)}class br{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new br(Ne.min(),_e.empty(),sc)}static max(){return new br(Ne.max(),_e.empty(),sc)}}function l_(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(s.documentKey,e.documentKey),t!==0?t:Pe(s.largestBatchId,e.largestBatchId))}const LS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class US{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Sa(s){if(s.code!==$.FAILED_PRECONDITION||s.message!==LS)throw s;de("LocalStore","Unexpectedly lost primary lease")}class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):z.reject(t)}static resolve(e){return new z(((t,r)=>{t(e)}))}static reject(e){return new z(((t,r)=>{r(e)}))}static waitFor(e){return new z(((t,r)=>{let a=0,l=0,u=!1;e.forEach((p=>{++a,p.next((()=>{++l,u&&l===a&&t()}),(h=>r(h)))})),u=!0,l===a&&t()}))}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next((a=>a?z.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new z(((r,a)=>{const l=e.length,u=new Array(l);let p=0;for(let h=0;h<l;h++){const y=h;t(e[y]).next((b=>{u[y]=b,++p,p===l&&r(u)}),(b=>a(b)))}}))}static doWhile(e,t){return new z(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}const gr="SimpleDb";class Fm{static open(e,t,r,a){try{return new Fm(t,e.transaction(a,r))}catch(l){throw new od(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new An,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new od(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=c_(r.target.error);this.S.reject(new od(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(de(gr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lj(t)}}class js{static delete(e){return de(gr,"Removing database:",e),uo(C0().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!gd())return!1;if(js.F())return!0;const e=Dt(),t=js.M(e),r=0<t&&t<10,a=zS(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,js.M(Dt())===12.2&&Gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(de(gr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new od(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new le($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new le($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new od(e,u))},a.onupgradeneeded=l=>{de(gr,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.N.k(u,a.transaction,l.oldVersion,this.version).next((()=>{de(gr,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const p=Fm.open(this.db,e,l?"readonly":"readwrite",r),h=a(p).next((y=>(p.C(),y))).catch((y=>(p.abort(y),z.reject(y)))).toPromise();return h.catch((()=>{})),await p.D,h}catch(p){const h=p,y=h.name!=="FirebaseError"&&u<3;if(de(gr,"Transaction failed with error:",h.message,"Retrying:",y),this.close(),!y)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function zS(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Mj{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return uo(this.U.delete())}}class od extends le{constructor(e,t){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Aa(s){return s.name==="IndexedDbTransactionError"}class Lj{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(de(gr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(de(gr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uo(r)}add(e){return de(gr,"ADD",this.store.name,e,e),uo(this.store.add(e))}get(e){return uo(this.store.get(e)).next((t=>(t===void 0&&(t=null),de(gr,"GET",this.store.name,e,t),t)))}delete(e){return de(gr,"DELETE",this.store.name,e),uo(this.store.delete(e))}count(){return de(gr,"COUNT",this.store.name),uo(this.store.count())}H(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new z(((u,p)=>{l.onerror=h=>{p(h.target.error)},l.onsuccess=h=>{u(h.target.result)}}))}{const l=this.cursor(r),u=[];return this.J(l,((p,h)=>{u.push(h)})).next((()=>u))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new z(((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}X(e,t){de(gr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const a=this.cursor(r);return this.J(a,((l,u,p)=>p.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}te(e){const t=this.cursor({});return new z(((r,a)=>{t.onerror=l=>{const u=c_(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((p=>{p?u.continue():r()})):r()}}))}J(e,t){const r=[];return new z(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const p=u.target.result;if(!p)return void a();const h=new Mj(p),y=t(p.primaryKey,p.value,h);if(y instanceof z){const b=y.catch((E=>(h.done(),z.reject(E))));r.push(b)}h.isDone?a():h.G===null?p.continue():p.continue(h.G)}})).next((()=>z.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uo(s){return new z(((e,t)=>{s.onsuccess=r=>{const a=r.target.result;e(a)},s.onerror=r=>{const a=c_(r.target.error);t(a)}}))}let DT=!1;function c_(s){const e=js.M(Dt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(t)>=0){const r=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DT||(DT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const ld="IndexBackfiller";class Uj{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){de(ld,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();de(ld,`Documents written: ${t}`)}catch(t){Aa(t)?de(ld,"Ignoring IndexedDB error during index backfill: ",t):await Sa(t)}await this.re(6e4)}))}}class zj{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return z.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return de(ld,`Processing collection: ${u}`),this.oe(e,u,a).next((p=>{a-=p,r.add(u)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(a,l))).next((p=>(de(ld,`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p)))).next((()=>u.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const u=MS(l);l_(u,r)>0&&(r=u)})),new br(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class rr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}rr.ce=-1;const da=-1;function Kd(s){return s==null}function wd(s){return s===0&&1/s==-1/0}function BS(s){return typeof s=="number"&&Number.isInteger(s)&&!wd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const fm="";function On(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=PT(e)),e=Bj(s.get(t),e);return PT(e)}function Bj(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case fm:t+="";break;default:t+=l}}return t}function PT(s){return s+fm+""}function Ds(s){const e=s.length;if(Ie(e>=2,64408,{path:s}),e===2)return Ie(s.charAt(0)===fm&&s.charAt(1)==="",56145,{path:s}),Ye.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=s.indexOf(fm,l);switch((u<0||u>t)&&xe(50515,{path:s}),s.charAt(u+1)){case"":const p=s.substring(l,u);let h;a.length===0?h=p:(a+=p,h=a,a=""),r.push(h);break;case"":a+=s.substring(l,u),a+="\0";break;case"":a+=s.substring(l,u+1);break;default:xe(61167,{path:s})}l=u+2}return new Ye(r)}const co="remoteDocuments",$d="owner",Pl="owner",Id="mutationQueues",qj="userId",Wr="mutations",VT="batchId",_o="userMutationsIndex",jT=["userId","batchId"];function $f(s,e){return[s,On(e)]}function qS(s,e,t){return[s,On(e),t]}const Fj={},ic="documentMutations",mm="remoteDocumentsV14",Hj=["prefixPath","collectionGroup","readTime","documentId"],Yf="documentKeyIndex",Gj=["prefixPath","collectionGroup","documentId"],FS="collectionGroupIndex",Qj=["collectionGroup","readTime","prefixPath","documentId"],Sd="remoteDocumentGlobal",Zy="remoteDocumentGlobalKey",ac="targets",HS="queryTargetsIndex",Kj=["canonicalId","targetId"],oc="targetDocuments",$j=["targetId","path"],u_="documentTargetsIndex",Yj=["path","targetId"],pm="targetGlobalKey",wo="targetGlobal",Ad="collectionParents",Wj=["collectionId","parent"],lc="clientMetadata",Xj="clientId",Hm="bundles",Jj="bundleId",Gm="namedQueries",Zj="name",d_="indexConfiguration",eO="indexId",e0="collectionGroupIndex",tO="collectionGroup",cd="indexState",nO=["indexId","uid"],GS="sequenceNumberIndex",rO=["uid","sequenceNumber"],ud="indexEntries",sO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QS="documentKeyIndex",iO=["indexId","uid","orderedDocumentKey"],Qm="documentOverlays",aO=["userId","collectionPath","documentId"],t0="collectionPathOverlayIndex",oO=["userId","collectionPath","largestBatchId"],KS="collectionGroupOverlayIndex",lO=["userId","collectionGroup","largestBatchId"],h_="globals",cO="name",$S=[Id,Wr,ic,co,ac,$d,wo,oc,lc,Sd,Ad,Hm,Gm],uO=[...$S,Qm],YS=[Id,Wr,ic,mm,ac,$d,wo,oc,lc,Sd,Ad,Hm,Gm,Qm],WS=YS,f_=[...WS,d_,cd,ud],dO=f_,XS=[...f_,h_],hO=XS;class n0 extends US{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function un(s,e){const t=ve(s);return js.O(t.le,e)}function OT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Na(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function JS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class bt{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vf(this.root,e,this.comparator,!0)}}class Vf{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??In.RED,this.left=a??In.EMPTY,this.right=l??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new In(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return In.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ft{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new MT(this.data.getIterator())}getIteratorFrom(e){return new MT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ft(this.comparator);return t.data=e,t}}class MT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vl(s){return s.hasNext()?s.getNext():void 0}class sr{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new sr([])}unionWith(e){let t=new ft(Rt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class ZS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function fO(){return typeof atob<"u"}class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new ZS("Invalid base64 string: "+l):l}})(e);return new Ot(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const mO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(s){if(Ie(!!s,39018),typeof s=="string"){let e=0;const t=mO.exec(s);if(Ie(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(s.seconds),nanos:At(s.nanos)}}function At(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function pi(s){return typeof s=="string"?Ot.fromBase64String(s):Ot.fromUint8Array(s)}const eA="server_timestamp",tA="__type__",nA="__previous_value__",rA="__local_write_time__";function Km(s){return(s?.mapValue?.fields||{})[tA]?.stringValue===eA}function $m(s){const e=s.mapValue.fields[nA];return Km(e)?$m(e):e}function Nd(s){const e=mi(s.mapValue.fields[rA].timestampValue);return new lt(e.seconds,e.nanos)}class pO{constructor(e,t,r,a,l,u,p,h,y,b,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=h,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=E}}const r0="(default)";class _a{constructor(e,t){this.projectId=e,this.database=t||r0}static empty(){return new _a("","")}get isDefaultDatabase(){return this.database===r0}isEqual(e){return e instanceof _a&&e.projectId===this.projectId&&e.database===this.database}}function gO(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new le($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(s.options.projectId,e)}const m_="__type__",sA="__max__",aa={mapValue:{fields:{__type__:{stringValue:sA}}}},p_="__vector__",cc="value",Wf={nullValue:"NULL_VALUE"};function va(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Km(s)?4:iA(s)?9007199254740991:Ym(s)?10:11:xe(28295,{value:s})}function Bs(s,e){if(s===e)return!0;const t=va(s);if(t!==va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Nd(s).isEqual(Nd(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=mi(a.timestampValue),p=mi(l.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return pi(a.bytesValue).isEqual(pi(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return At(a.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(a.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return At(a.integerValue)===At(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=At(a.doubleValue),p=At(l.doubleValue);return u===p?wd(u)===wd(p):isNaN(u)&&isNaN(p)}return!1})(s,e);case 9:return rc(s.arrayValue.values||[],e.arrayValue.values||[],Bs);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},p=l.mapValue.fields||{};if(OT(u)!==OT(p))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(p[h]===void 0||!Bs(u[h],p[h])))return!1;return!0})(s,e);default:return xe(52216,{left:s})}}function Rd(s,e){return(s.values||[]).find((t=>Bs(t,e)))!==void 0}function ba(s,e){if(s===e)return 0;const t=va(s),r=va(e);if(t!==r)return Pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(s.booleanValue,e.booleanValue);case 2:return(function(l,u){const p=At(l.integerValue||l.doubleValue),h=At(u.integerValue||u.doubleValue);return p<h?-1:p>h?1:p===h?0:isNaN(p)?isNaN(h)?0:-1:1})(s,e);case 3:return LT(s.timestampValue,e.timestampValue);case 4:return LT(Nd(s),Nd(e));case 5:return Xy(s.stringValue,e.stringValue);case 6:return(function(l,u){const p=pi(l),h=pi(u);return p.compareTo(h)})(s.bytesValue,e.bytesValue);case 7:return(function(l,u){const p=l.split("/"),h=u.split("/");for(let y=0;y<p.length&&y<h.length;y++){const b=Pe(p[y],h[y]);if(b!==0)return b}return Pe(p.length,h.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,u){const p=Pe(At(l.latitude),At(u.latitude));return p!==0?p:Pe(At(l.longitude),At(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return UT(s.arrayValue,e.arrayValue);case 10:return(function(l,u){const p=l.fields||{},h=u.fields||{},y=p[cc]?.arrayValue,b=h[cc]?.arrayValue,E=Pe(y?.values?.length||0,b?.values?.length||0);return E!==0?E:UT(y,b)})(s.mapValue,e.mapValue);case 11:return(function(l,u){if(l===aa.mapValue&&u===aa.mapValue)return 0;if(l===aa.mapValue)return 1;if(u===aa.mapValue)return-1;const p=l.fields||{},h=Object.keys(p),y=u.fields||{},b=Object.keys(y);h.sort(),b.sort();for(let E=0;E<h.length&&E<b.length;++E){const T=Xy(h[E],b[E]);if(T!==0)return T;const R=ba(p[h[E]],y[b[E]]);if(R!==0)return R}return Pe(h.length,b.length)})(s.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function LT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Pe(s,e);const t=mi(s),r=mi(e),a=Pe(t.seconds,r.seconds);return a!==0?a:Pe(t.nanos,r.nanos)}function UT(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=ba(t[a],r[a]);if(l)return l}return Pe(t.length,r.length)}function uc(s){return s0(s)}function s0(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=mi(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return pi(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return _e.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=s0(l);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${s0(t.fields[u])}`;return a+"}"})(s.mapValue):xe(61005,{value:s})}function Xf(s){switch(va(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$m(s);return e?16+Xf(e):16;case 5:return 2*s.stringValue.length;case 6:return pi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Xf(l)),0)})(s.arrayValue);case 10:case 11:return(function(r){let a=0;return Na(r.fields,((l,u)=>{a+=l.length+Xf(u)})),a})(s.mapValue);default:throw xe(13486,{value:s})}}function No(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function i0(s){return!!s&&"integerValue"in s}function Cd(s){return!!s&&"arrayValue"in s}function zT(s){return!!s&&"nullValue"in s}function BT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Jf(s){return!!s&&"mapValue"in s}function Ym(s){return(s?.mapValue?.fields||{})[m_]?.stringValue===p_}function dd(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Na(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=dd(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dd(s.arrayValue.values[t]);return e}return{...s}}function iA(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===sA}const aA={mapValue:{fields:{[m_]:{stringValue:p_},[cc]:{arrayValue:{}}}}};function yO(s){return"nullValue"in s?Wf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?No(_a.empty(),_e.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Ym(s)?aA:{mapValue:{}}:xe(35942,{value:s})}function _O(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?No(_a.empty(),_e.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?aA:"mapValue"in s?Ym(s)?{mapValue:{}}:aa:xe(61959,{value:s})}function qT(s,e){const t=ba(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?-1:!s.inclusive&&e.inclusive?1:0}function FT(s,e){const t=ba(s.value,e.value);return t!==0?t:s.inclusive&&!e.inclusive?1:!s.inclusive&&e.inclusive?-1:0}class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dd(t)}setAll(e){let t=Rt.emptyPath(),r={},a=[];e.forEach(((u,p)=>{if(!t.isImmediateParentOf(p)){const h=this.getFieldsMap(t);this.applyChanges(h,r,a),r={},a=[],t=p.popLast()}u?r[p.lastSegment()]=dd(u):a.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Jf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Na(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Sn(dd(this.value))}}function oA(s){const e=[];return Na(s.fields,((t,r)=>{const a=new Rt([t]);if(Jf(r)){const l=oA(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new sr(e)}class wt{constructor(e,t,r,a,l,u,p){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=p}static newInvalidDocument(e){return new wt(e,0,Ne.min(),Ne.min(),Ne.min(),Sn.empty(),0)}static newFoundDocument(e,t,r,a){return new wt(e,1,t,Ne.min(),r,a,0)}static newNoDocument(e,t){return new wt(e,2,t,Ne.min(),Ne.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new wt(e,3,t,Ne.min(),Ne.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xa{constructor(e,t){this.position=e,this.inclusive=t}}function HT(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],u=s.position[a];if(l.field.isKeyField()?r=_e.comparator(_e.fromName(u.referenceValue),t.key):r=ba(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function GT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Bs(s.position[t],e.position[t]))return!1;return!0}class kd{constructor(e,t="asc"){this.field=e,this.dir=t}}function vO(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class lA{}class Ze extends lA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new bO(e,t,r):t==="array-contains"?new TO(e,r):t==="in"?new mA(e,r):t==="not-in"?new wO(e,r):t==="array-contains-any"?new IO(e,r):new Ze(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xO(e,r):new EO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ba(t,this.value)):t!==null&&va(this.value)===va(t)&&this.matchesComparison(ba(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ht extends lA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ht(e,t)}matches(e){return dc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dc(s){return s.op==="and"}function a0(s){return s.op==="or"}function g_(s){return cA(s)&&dc(s)}function cA(s){for(const e of s.filters)if(e instanceof ht)return!1;return!0}function o0(s){if(s instanceof Ze)return s.field.canonicalString()+s.op.toString()+uc(s.value);if(g_(s))return s.filters.map((e=>o0(e))).join(",");{const e=s.filters.map((t=>o0(t))).join(",");return`${s.op}(${e})`}}function uA(s,e){return s instanceof Ze?(function(r,a){return a instanceof Ze&&r.op===a.op&&r.field.isEqual(a.field)&&Bs(r.value,a.value)})(s,e):s instanceof ht?(function(r,a){return a instanceof ht&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,p)=>l&&uA(u,a.filters[p])),!0):!1})(s,e):void xe(19439)}function dA(s,e){const t=s.filters.concat(e);return ht.create(t,s.op)}function hA(s){return s instanceof Ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${uc(t.value)}`})(s):s instanceof ht?(function(t){return t.op.toString()+" {"+t.getFilters().map(hA).join(" ,")+"}"})(s):"Filter"}class bO extends Ze{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class xO extends Ze{constructor(e,t){super(e,"in",t),this.keys=fA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class EO extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=fA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function fA(s,e){return(e.arrayValue?.values||[]).map((t=>_e.fromName(t.referenceValue)))}class TO extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cd(t)&&Rd(t.arrayValue,this.value)}}class mA extends Ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rd(this.value.arrayValue,t)}}class wO extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Rd(this.value.arrayValue,t)}}class IO extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Rd(this.value.arrayValue,r)))}}class SO{constructor(e,t=null,r=[],a=[],l=null,u=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=p,this.Te=null}}function l0(s,e=null,t=[],r=[],a=null,l=null,u=null){return new SO(s,e,t,r,a,l,u)}function Ro(s){const e=ve(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>o0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Kd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>uc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>uc(r))).join(",")),e.Te=t}return e.Te}function Yd(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!vO(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!uA(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!GT(s.startAt,e.startAt)&&GT(s.endAt,e.endAt)}function gm(s){return _e.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function ym(s,e){return s.filters.filter((t=>t instanceof Ze&&t.field.isEqual(e)))}function QT(s,e,t){let r=Wf,a=!0;for(const l of ym(s,e)){let u=Wf,p=!0;switch(l.op){case"<":case"<=":u=yO(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,p=!1;break;case"!=":case"not-in":u=Wf}qT({value:r,inclusive:a},{value:u,inclusive:p})<0&&(r=u,a=p)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const u=t.position[l];qT({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function KT(s,e,t){let r=aa,a=!0;for(const l of ym(s,e)){let u=aa,p=!0;switch(l.op){case">=":case">":u=_O(l.value),p=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,p=!1;break;case"!=":case"not-in":u=aa}FT({value:r,inclusive:a},{value:u,inclusive:p})>0&&(r=u,a=p)}if(t!==null){for(let l=0;l<s.orderBy.length;++l)if(s.orderBy[l].field.isEqual(e)){const u=t.position[l];FT({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}class _i{constructor(e,t=null,r=[],a=[],l=null,u="F",p=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=p,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function pA(s,e,t,r,a,l,u,p){return new _i(s,e,t,r,a,l,u,p)}function Nc(s){return new _i(s)}function $T(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function AO(s){return _e.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function y_(s){return s.collectionGroup!==null}function Wl(s){const e=ve(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new ft(Rt.comparator);return u.filters.forEach((h=>{h.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new kd(l,r))})),t.has(Rt.keyField().canonicalString())||e.Ie.push(new kd(Rt.keyField(),r))}return e.Ie}function Hn(s){const e=ve(s);return e.Ee||(e.Ee=NO(e,Wl(s))),e.Ee}function NO(s,e){if(s.limitType==="F")return l0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new kd(a.field,l)}));const t=s.endAt?new xa(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new xa(s.startAt.position,s.startAt.inclusive):null;return l0(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function c0(s,e){const t=s.filters.concat([e]);return new _i(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function RO(s,e){const t=s.explicitOrderBy.concat([e]);return new _i(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function _m(s,e,t){return new _i(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function CO(s,e){return new _i(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,e,s.endAt)}function kO(s,e){return new _i(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,e)}function Wd(s,e){return Yd(Hn(s),Hn(e))&&s.limitType===e.limitType}function gA(s){return`${Ro(Hn(s))}|lt:${s.limitType}`}function zl(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>hA(a))).join(", ")}]`),Kd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>uc(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>uc(a))).join(",")),`Target(${r})`})(Hn(s))}; limitType=${s.limitType})`}function Xd(s,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):_e.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(s,e)&&(function(r,a){for(const l of Wl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(r,a){return!(r.startAt&&!(function(u,p,h){const y=HT(u,p,h);return u.inclusive?y<=0:y<0})(r.startAt,Wl(r),a)||r.endAt&&!(function(u,p,h){const y=HT(u,p,h);return u.inclusive?y>=0:y>0})(r.endAt,Wl(r),a))})(s,e)}function yA(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function _A(s){return(e,t)=>{let r=!1;for(const a of Wl(s)){const l=DO(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function DO(s,e,t){const r=s.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,u,p){const h=u.data.field(l),y=p.data.field(l);return h!==null&&y!==null?ba(h,y):xe(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:s.dir})}}class vi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Na(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return JS(this.inner)}size(){return this.innerSize}}const PO=new bt(_e.comparator);function ir(){return PO}const vA=new bt(_e.comparator);function Xu(...s){let e=vA;for(const t of s)e=e.insert(t.key,t);return e}function bA(s){let e=vA;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ps(){return hd()}function xA(){return hd()}function hd(){return new vi((s=>s.toString()),((s,e)=>s.isEqual(e)))}const VO=new bt(_e.comparator),jO=new ft(_e.comparator);function Fe(...s){let e=jO;for(const t of s)e=e.add(t);return e}const OO=new ft(Pe);function __(){return OO}function v_(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wd(e)?"-0":e}}function EA(s){return{integerValue:""+s}}function TA(s,e){return BS(e)?EA(e):v_(s,e)}class Wm{constructor(){this._=void 0}}function MO(s,e,t){return s instanceof hc?(function(a,l){const u={fields:{[tA]:{stringValue:eA},[rA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Km(l)&&(l=$m(l)),l&&(u.fields[nA]=l),{mapValue:u}})(t,e):s instanceof Co?IA(s,e):s instanceof ko?SA(s,e):(function(a,l){const u=wA(a,l),p=YT(u)+YT(a.Ae);return i0(u)&&i0(a.Ae)?EA(p):v_(a.serializer,p)})(s,e)}function LO(s,e,t){return s instanceof Co?IA(s,e):s instanceof ko?SA(s,e):t}function wA(s,e){return s instanceof fc?(function(r){return i0(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class hc extends Wm{}class Co extends Wm{constructor(e){super(),this.elements=e}}function IA(s,e){const t=AA(e);for(const r of s.elements)t.some((a=>Bs(a,r)))||t.push(r);return{arrayValue:{values:t}}}class ko extends Wm{constructor(e){super(),this.elements=e}}function SA(s,e){let t=AA(e);for(const r of s.elements)t=t.filter((a=>!Bs(a,r)));return{arrayValue:{values:t}}}class fc extends Wm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function YT(s){return At(s.integerValue||s.doubleValue)}function AA(s){return Cd(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Jd{constructor(e,t){this.field=e,this.transform=t}}function UO(s,e){return s.field.isEqual(e.field)&&(function(r,a){return r instanceof Co&&a instanceof Co||r instanceof ko&&a instanceof ko?rc(r.elements,a.elements,Bs):r instanceof fc&&a instanceof fc?Bs(r.Ae,a.Ae):r instanceof hc&&a instanceof hc})(s.transform,e.transform)}class zO{constructor(e,t){this.version=e,this.transformResults=t}}class Ct{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ct}static exists(e){return new Ct(void 0,e)}static updateTime(e){return new Ct(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Xm{}function NA(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Cc(s.key,Ct.none()):new Rc(s.key,s.data,Ct.none());{const t=s.data,r=Sn.empty();let a=new ft(Rt.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new bi(s.key,r,new sr(a.toArray()),Ct.none())}}function BO(s,e,t){s instanceof Rc?(function(a,l,u){const p=a.value.clone(),h=XT(a.fieldTransforms,l,u.transformResults);p.setAll(h),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(s,e,t):s instanceof bi?(function(a,l,u){if(!Zf(a.precondition,l))return void l.convertToUnknownDocument(u.version);const p=XT(a.fieldTransforms,l,u.transformResults),h=l.data;h.setAll(RA(a)),h.setAll(p),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(s,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function fd(s,e,t,r){return s instanceof Rc?(function(l,u,p,h){if(!Zf(l.precondition,u))return p;const y=l.value.clone(),b=JT(l.fieldTransforms,h,u);return y.setAll(b),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(s,e,t,r):s instanceof bi?(function(l,u,p,h){if(!Zf(l.precondition,u))return p;const y=JT(l.fieldTransforms,h,u),b=u.data;return b.setAll(RA(l)),b.setAll(y),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(s,e,t,r):(function(l,u,p){return Zf(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(s,e,t)}function qO(s,e){let t=null;for(const r of s.fieldTransforms){const a=e.data.field(r.field),l=wA(r.transform,a||null);l!=null&&(t===null&&(t=Sn.empty()),t.set(r.field,l))}return t||null}function WT(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&rc(r,a,((l,u)=>UO(l,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Rc extends Xm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class bi extends Xm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function RA(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function XT(s,e,t){const r=new Map;Ie(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let a=0;a<t.length;a++){const l=s[a],u=l.transform,p=e.data.field(l.field);r.set(l.field,LO(u,p,t[a]))}return r}function JT(s,e,t){const r=new Map;for(const a of s){const l=a.transform,u=t.data.field(a.field);r.set(a.field,MO(l,u,e))}return r}class Cc extends Xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b_ extends Xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class x_{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&BO(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=xA();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let p=this.applyToLocalView(u,l.mutatedFields);p=t.has(a.key)?null:p;const h=NA(u,p);h!==null&&r.set(a.key,h),u.isValidDocument()||u.convertToNoDocument(Ne.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&rc(this.mutations,e.mutations,((t,r)=>WT(t,r)))&&rc(this.baseMutations,e.baseMutations,((t,r)=>WT(t,r)))}}class E_{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ie(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return VO})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new E_(e,t,r,a)}}class T_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class FO{constructor(e,t){this.count=e,this.unchangedNames=t}}var rn,nt;function CA(s){switch(s){case $.OK:return xe(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return xe(15467,{code:s})}}function kA(s){if(s===void 0)return Gt("GRPC error has no .code"),$.UNKNOWN;switch(s){case rn.OK:return $.OK;case rn.CANCELLED:return $.CANCELLED;case rn.UNKNOWN:return $.UNKNOWN;case rn.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case rn.INTERNAL:return $.INTERNAL;case rn.UNAVAILABLE:return $.UNAVAILABLE;case rn.UNAUTHENTICATED:return $.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case rn.NOT_FOUND:return $.NOT_FOUND;case rn.ALREADY_EXISTS:return $.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return $.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case rn.ABORTED:return $.ABORTED;case rn.OUT_OF_RANGE:return $.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return $.UNIMPLEMENTED;case rn.DATA_LOSS:return $.DATA_LOSS;default:return xe(39323,{code:s})}}(nt=rn||(rn={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function DA(){return new TextEncoder}const HO=new ua([4294967295,4294967295],0);function ZT(s){const e=DA().encode(s),t=new wS;return t.update(e),new Uint8Array(t.digest())}function ew(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ua([t,r],0),new ua([a,l],0)]}class w_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ju(`Invalid padding: ${t}`);if(r<0)throw new Ju(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ju(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ju(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ua.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(ua.fromNumber(r)));return a.compare(HO)===1&&(a=new ua([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ZT(e),[r,a]=ew(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);if(!this.we(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new w_(l,a,t);return r.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const t=ZT(e),[r,a]=ew(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(r,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zd{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,eh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Zd(Ne.min(),a,new bt(Pe),ir(),Fe())}}class eh{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new eh(r,t,Fe(),Fe(),Fe())}}class em{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=a}}class PA{constructor(e,t){this.targetId=e,this.Ce=t}}class VA{constructor(e,t,r=Ot.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class tw{constructor(){this.ve=0,this.Fe=nw(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),r=Fe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:xe(38017,{changeType:l})}})),new eh(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=nw()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class GO{constructor(e){this.Ge=e,this.ze=new Map,this.je=ir(),this.He=jf(),this.Je=jf(),this.Ze=new bt(Pe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(gm(l))if(r===0){const u=new _e(l.path);this.et(t,u,wt.newNoDocument(u,Ne.min()))}else Ie(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const p=this.ut(e),h=p?this.ct(p,e,u):1;if(h!==0){this.it(t);const y=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,p;try{u=pi(r).toUint8Array()}catch(h){if(h instanceof ZS)return zs("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{p=new w_(u,a,l)}catch(h){return zs(h instanceof Ju?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return p.ge===0?null:p}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const p=this.ot(u);if(p){if(l.current&&gm(p.target)){const h=new _e(p.target.path);this.It(h).has(u)||this.Et(u,h)||this.et(u,h,wt.newNoDocument(h,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let r=Fe();this.Je.forEach(((l,u)=>{let p=!0;u.forEachWhile((h=>{const y=this.ot(h);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Zd(e,t,this.Ze,this.je,r);return this.je=ir(),this.He=jf(),this.Je=jf(),this.Ze=new bt(Pe),a}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new tw,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ft(Pe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ft(Pe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function jf(){return new bt(_e.comparator)}function nw(){return new bt(_e.comparator)}const QO={asc:"ASCENDING",desc:"DESCENDING"},KO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$O={and:"AND",or:"OR"};class YO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function u0(s,e){return s.useProto3Json||Kd(e)?e:{value:e}}function mc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jA(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function WO(s,e){return mc(s,e.toTimestamp())}function Qt(s){return Ie(!!s,49232),Ne.fromTimestamp((function(t){const r=mi(t);return new lt(r.seconds,r.nanos)})(s))}function I_(s,e){return d0(s,e).canonicalString()}function d0(s,e){const t=(function(a){return new Ye(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function OA(s){const e=Ye.fromString(s);return Ie(QA(e),10190,{key:e.toString()}),e}function Dd(s,e){return I_(s.databaseId,e.path)}function Os(s,e){const t=OA(e);if(t.get(1)!==s.databaseId.projectId)throw new le($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new le($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new _e(UA(t))}function MA(s,e){return I_(s.databaseId,e)}function LA(s){const e=OA(s);return e.length===4?Ye.emptyPath():UA(e)}function h0(s){return new Ye(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function UA(s){return Ie(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function rw(s,e,t){return{name:Dd(s,e),fields:t.value.mapValue.fields}}function zA(s,e,t){const r=Os(s,e.name),a=Qt(e.updateTime),l=e.createTime?Qt(e.createTime):Ne.min(),u=new Sn({mapValue:{fields:e.fields}}),p=wt.newFoundDocument(r,a,l,u);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function XO(s,e){return"found"in e?(function(r,a){Ie(!!a.found,43571),a.found.name,a.found.updateTime;const l=Os(r,a.found.name),u=Qt(a.found.updateTime),p=a.found.createTime?Qt(a.found.createTime):Ne.min(),h=new Sn({mapValue:{fields:a.found.fields}});return wt.newFoundDocument(l,u,p,h)})(s,e):"missing"in e?(function(r,a){Ie(!!a.missing,3894),Ie(!!a.readTime,22933);const l=Os(r,a.missing),u=Qt(a.readTime);return wt.newNoDocument(l,u)})(s,e):xe(7234,{result:e})}function JO(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:xe(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,b){return y.useProto3Json?(Ie(b===void 0||typeof b=="string",58123),Ot.fromBase64String(b||"")):(Ie(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Ot.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(y){const b=y.code===void 0?$.UNKNOWN:kA(y.code);return new le(b,y.message||"")})(u);t=new VA(r,a,l,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Os(s,r.document.name),l=Qt(r.document.updateTime),u=r.document.createTime?Qt(r.document.createTime):Ne.min(),p=new Sn({mapValue:{fields:r.document.fields}}),h=wt.newFoundDocument(a,l,u,p),y=r.targetIds||[],b=r.removedTargetIds||[];t=new em(y,b,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Os(s,r.document),l=r.readTime?Qt(r.readTime):Ne.min(),u=wt.newNoDocument(a,l),p=r.removedTargetIds||[];t=new em([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Os(s,r.document),l=r.removedTargetIds||[];t=new em([],l,a,null)}else{if(!("filter"in e))return xe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new FO(a,l),p=r.targetId;t=new PA(p,u)}}return t}function Pd(s,e){let t;if(e instanceof Rc)t={update:rw(s,e.key,e.value)};else if(e instanceof Cc)t={delete:Dd(s,e.key)};else if(e instanceof bi)t={update:rw(s,e.key,e.data),updateMask:sM(e.fieldMask)};else{if(!(e instanceof b_))return xe(16599,{dt:e.type});t={verify:Dd(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const p=u.transform;if(p instanceof hc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Co)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ko)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof fc)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw xe(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:WO(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:xe(27497)})(s,e.precondition)),t}function f0(s,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Ct.updateTime(Qt(l.updateTime)):l.exists!==void 0?Ct.exists(l.exists):Ct.none()})(e.currentDocument):Ct.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(u,p){let h=null;if("setToServerValue"in p)Ie(p.setToServerValue==="REQUEST_TIME",16630,{proto:p}),h=new hc;else if("appendMissingElements"in p){const b=p.appendMissingElements.values||[];h=new Co(b)}else if("removeAllFromArray"in p){const b=p.removeAllFromArray.values||[];h=new ko(b)}else"increment"in p?h=new fc(u,p.increment):xe(16584,{proto:p});const y=Rt.fromServerFormat(p.fieldPath);return new Jd(y,h)})(s,a))):[];if(e.update){e.update.name;const a=Os(s,e.update.name),l=new Sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(h){const y=h.fieldPaths||[];return new sr(y.map((b=>Rt.fromServerFormat(b))))})(e.updateMask);return new bi(a,l,u,t,r)}return new Rc(a,l,t,r)}if(e.delete){const a=Os(s,e.delete);return new Cc(a,t)}if(e.verify){const a=Os(s,e.verify);return new b_(a,t)}return xe(1463,{proto:e})}function ZO(s,e){return s&&s.length>0?(Ie(e!==void 0,14353),s.map((t=>(function(a,l){let u=a.updateTime?Qt(a.updateTime):Qt(l);return u.isEqual(Ne.min())&&(u=Qt(l)),new zO(u,a.transformResults||[])})(t,e)))):[]}function BA(s,e){return{documents:[MA(s,e.path)]}}function qA(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=MA(s,a);const l=(function(y){if(y.length!==0)return GA(ht.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((b=>(function(T){return{field:Bl(T.field),direction:tM(T.dir)}})(b)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const p=u0(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function FA(s){let e=LA(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ie(r===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(E){const T=HA(E);return T instanceof ht&&g_(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((T=>(function(q){return new kd(ql(q.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(T)))})(t.orderBy));let p=null;t.limit&&(p=(function(E){let T;return T=typeof E=="object"?E.value:E,Kd(T)?null:T})(t.limit));let h=null;t.startAt&&(h=(function(E){const T=!!E.before,R=E.values||[];return new xa(R,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const T=!E.before,R=E.values||[];return new xa(R,T)})(t.endAt)),pA(e,a,u,l,p,"F",h,y)}function eM(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HA(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ql(t.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=ql(t.unaryFilter.field);return Ze.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ql(t.unaryFilter.field);return Ze.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ql(t.unaryFilter.field);return Ze.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Ze.create(ql(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ht.create(t.compositeFilter.filters.map((r=>HA(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(s):xe(30097,{filter:s})}function tM(s){return QO[s]}function nM(s){return KO[s]}function rM(s){return $O[s]}function Bl(s){return{fieldPath:s.canonicalString()}}function ql(s){return Rt.fromServerFormat(s.fieldPath)}function GA(s){return s instanceof Ze?(function(t){if(t.op==="=="){if(BT(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NAN"}};if(zT(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BT(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NOT_NAN"}};if(zT(t.value))return{unaryFilter:{field:Bl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(t.field),op:nM(t.op),value:t.value}}})(s):s instanceof ht?(function(t){const r=t.getFilters().map((a=>GA(a)));return r.length===1?r[0]:{compositeFilter:{op:rM(t.op),filters:r}}})(s):xe(54877,{filter:s})}function sM(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function QA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function KA(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class ci{constructor(e,t,r,a,l=Ne.min(),u=Ne.min(),p=Ot.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=h}withSequenceNumber(e){return new ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $A{constructor(e){this.yt=e}}function iM(s,e){let t;if(e.document)t=zA(s.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=_e.fromSegments(e.noDocument.path),a=Po(e.noDocument.readTime);t=wt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xe(56709);{const r=_e.fromSegments(e.unknownDocument.path),a=Po(e.unknownDocument.version);t=wt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new lt(a[0],a[1]);return Ne.fromTimestamp(l)})(e.readTime)),t}function sw(s,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,u){return{name:Dd(l,u.key),fields:u.data.value.mapValue.fields,updateTime:mc(l,u.version.toTimestamp()),createTime:mc(l,u.createTime.toTimestamp())}})(s.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Do(e.version)};else{if(!e.isUnknownDocument())return xe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Do(e.version)}}return r}function vm(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Do(s){const e=s.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Po(s){const e=new lt(s.seconds,s.nanoseconds);return Ne.fromTimestamp(e)}function ho(s,e){const t=(e.baseMutations||[]).map((l=>f0(s.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const p=e.mutations[l+1];u.updateTransforms=p.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>f0(s.yt,l))),a=lt.fromMillis(e.localWriteTimeMs);return new x_(e.batchId,a,t,r)}function Zu(s){const e=Po(s.readTime),t=s.lastLimboFreeSnapshotVersion!==void 0?Po(s.lastLimboFreeSnapshotVersion):Ne.min();let r;return r=(function(l){return l.documents!==void 0})(s.query)?(function(l){const u=l.documents.length;return Ie(u===1,1966,{count:u}),Hn(Nc(LA(l.documents[0])))})(s.query):(function(l){return Hn(FA(l))})(s.query),new ci(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,e,t,Ot.fromBase64String(s.resumeToken))}function YA(s,e){const t=Do(e.snapshotVersion),r=Do(e.lastLimboFreeSnapshotVersion);let a;a=gm(e.target)?BA(s.yt,e.target):qA(s.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ro(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function S_(s){const e=FA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?_m(e,e.limit,"L"):e}function Ay(s,e){return new T_(e.largestBatchId,f0(s.yt,e.overlayMutation))}function iw(s,e){const t=e.path.lastSegment();return[s,On(e.path.popLast()),t]}function aw(s,e,t,r){return{indexId:s,uid:e,sequenceNumber:t,readTime:Do(r.readTime),documentKey:On(r.documentKey.path),largestBatchId:r.largestBatchId}}class aM{getBundleMetadata(e,t){return ow(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:Po(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return ow(e).put((function(a){return{bundleId:a.id,createTime:Do(Qt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return lw(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:S_(l.bundledQuery),readTime:Po(l.readTime)}})(r)}))}saveNamedQuery(e,t){return lw(e).put((function(a){return{name:a.name,readTime:Do(Qt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function ow(s){return un(s,Hm)}function lw(s){return un(s,Gm)}class Jm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Jm(e,r)}getOverlay(e,t){return Bu(e).get(iw(this.userId,t)).next((r=>r?Ay(this.serializer,r):null))}getOverlays(e,t){const r=Ps();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,u)=>{const p=new T_(t,u);a.push(this.bt(e,p))})),z.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((u=>a.add(On(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const p=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(Bu(e).X(t0,p))})),z.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Ps(),l=On(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Bu(e).H(t0,u).next((p=>{for(const h of p){const y=Ay(this.serializer,h);a.set(y.getKey(),y)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Ps();let u;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Bu(e).ee({index:KS,range:p},((h,y,b)=>{const E=Ay(this.serializer,y);l.size()<a||E.largestBatchId===u?(l.set(E.getKey(),E),u=E.largestBatchId):b.done()})).next((()=>l))}bt(e,t){return Bu(e).put((function(a,l,u){const[p,h,y]=iw(l,u.mutation.key);return{userId:l,collectionPath:h,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Pd(a.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Bu(s){return un(s,Qm)}class oM{St(e){return un(e,h_)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t?.value;return r?Ot.fromUint8Array(r):Ot.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class fo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(At(e.integerValue));else if("doubleValue"in e){const r=At(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),wd(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=mi(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(pi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?iA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ym(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):xe(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=cc,l=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(At(l)),this.Ot(a,t),this.Ct(r[a],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),_e.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}fo.Wt=new fo;const jl=255;function lM(s){if(s===0)return 8;let e=0;return s>>4||(e+=4,s<<=4),s>>6||(e+=2,s<<=2),s>>7||(e+=1),e}function cw(s){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const u=lM(255&r[l]);if(a+=u,u!==8)break}return a})(s);return Math.ceil(e/8)}class cM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const a=t.codePointAt(0);this.Ht(240|a>>>18),this.Ht(128|63&a>>>12),this.Ht(128|63&a>>>6),this.Ht(128|63&a)}}this.Jt()}Yt(e){const t=this.en(e),r=cw(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=cw(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(jl),this.sn(255)}_n(){this.an(jl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===jl?(this.sn(jl),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===jl?(this.an(jl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class uM{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class dM{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class qu{constructor(){this.cn=new cM,this.ascending=new uM(this.cn),this.descending=new dM(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class mo{constructor(e,t,r,a){this.hn=e,this.Pn=t,this.Tn=r,this.In=a}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new mo(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:tm(this.Tn),directionalValue:tm(this.In),orderedDocumentKey:tm(t),documentKey:r.path.toArray()}}An(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function ea(s,e){let t=s.hn-e.hn;return t!==0?t:(t=uw(s.Tn,e.Tn),t!==0?t:(t=uw(s.In,e.In),t!==0?t:_e.comparator(s.Pn,e.Pn)))}function uw(s,e){for(let t=0;t<s.length&&t<e.length;++t){const r=s[t]-e[t];if(r!==0)return r}return s.length-e.length}function tm(s){return dI()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(s):s}function dw(s){return typeof s!="string"?s:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(s)}class hw{constructor(e){this.Vn=new ft(((t,r)=>Rt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Ie(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=Jy(e);if(t!==void 0&&!this.pn(t))return!1;const r=lo(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.pn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const p=this.Vn.getIterator().getNext();if(!a.has(p.field.canonicalString())){const h=r[l];if(!this.yn(p,h)||!this.wn(this.dn[u++],h))return!1}++l}for(;l<r.length;++l){const p=r[l];if(u>=this.dn.length||!this.wn(this.dn[u++],p))return!1}return!0}bn(){if(this.fn)return null;let e=new ft(Rt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Kf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Kf(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Kf(r.field,r.dir==="asc"?0:1)));return new hm(hm.UNKNOWN_ID,this.collectionId,t,Td.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function WA(s){if(Ie(s instanceof Ze||s instanceof ht,20012),s instanceof Ze){if(s instanceof mA){const t=s.value.arrayValue?.values?.map((r=>Ze.create(s.field,"==",r)))||[];return ht.create(t,"or")}return s}const e=s.filters.map((t=>WA(t)));return ht.create(e,s.op)}function hM(s){if(s.getFilters().length===0)return[];const e=g0(WA(s));return Ie(XA(e),7391),m0(e)||p0(e)?[e]:e.getFilters()}function m0(s){return s instanceof Ze}function p0(s){return s instanceof ht&&g_(s)}function XA(s){return m0(s)||p0(s)||(function(t){if(t instanceof ht&&a0(t)){for(const r of t.getFilters())if(!m0(r)&&!p0(r))return!1;return!0}return!1})(s)}function g0(s){if(Ie(s instanceof Ze||s instanceof ht,34018),s instanceof Ze)return s;if(s.filters.length===1)return g0(s.filters[0]);const e=s.filters.map((r=>g0(r)));let t=ht.create(e,s.op);return t=bm(t),XA(t)?t:(Ie(t instanceof ht,64498),Ie(dc(t),40251),Ie(t.filters.length>1,57927),t.filters.reduce(((r,a)=>A_(r,a))))}function A_(s,e){let t;return Ie(s instanceof Ze||s instanceof ht,38388),Ie(e instanceof Ze||e instanceof ht,25473),t=s instanceof Ze?e instanceof Ze?(function(a,l){return ht.create([a,l],"and")})(s,e):fw(s,e):e instanceof Ze?fw(e,s):(function(a,l){if(Ie(a.filters.length>0&&l.filters.length>0,48005),dc(a)&&dc(l))return dA(a,l.getFilters());const u=a0(a)?a:l,p=a0(a)?l:a,h=u.filters.map((y=>A_(y,p)));return ht.create(h,"or")})(s,e),bm(t)}function fw(s,e){if(dc(e))return dA(e,s.getFilters());{const t=e.filters.map((r=>A_(s,r)));return ht.create(t,"or")}}function bm(s){if(Ie(s instanceof Ze||s instanceof ht,11850),s instanceof Ze)return s;const e=s.getFilters();if(e.length===1)return bm(e[0]);if(cA(s))return s;const t=e.map((a=>bm(a))),r=[];return t.forEach((a=>{a instanceof Ze?r.push(a):a instanceof ht&&(a.op===s.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:ht.create(r,s.op)}class fM{constructor(){this.Sn=new N_}addToCollectionParentIndex(e,t){return this.Sn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(br.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(br.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class N_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new ft(Ye.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new ft(Ye.comparator)).toArray()}}const mw="IndexedDbIndexManager",Of=new Uint8Array(0);class mM{constructor(e,t){this.databaseId=t,this.Dn=new N_,this.Cn=new vi((r=>Ro(r)),((r,a)=>Yd(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const l={collectionId:r,parent:On(a)};return pw(e).put(l)}return z.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[DS(t),""],!1,!0);return pw(e).H(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;r.push(Ds(u.parent))}return r}))}addFieldIndex(e,t){const r=Fu(e),a=(function(p){return{indexId:p.indexId,collectionGroup:p.collectionGroup,fields:p.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=Ml(e);return l.next((p=>{u.put(aw(p,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Fu(e),a=Ml(e),l=Ol(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Fu(e),r=Ol(e),a=Ml(e);return t.X().next((()=>r.X())).next((()=>a.X()))}createTargetIndexes(e,t){return z.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new hw(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=Ol(e);let a=!0;const l=new Map;return z.forEach(this.vn(t),(u=>this.Fn(e,u).next((p=>{a&&(a=!!p),l.set(u,p)})))).next((()=>{if(a){let u=Fe();const p=[];return z.forEach(l,((h,y)=>{de(mw,`Using index ${(function(se){return`id=${se.indexId}|cg=${se.collectionGroup}|f=${se.fields.map((me=>`${me.fieldPath}:${me.kind}`)).join(",")}`})(h)} to execute ${Ro(t)}`);const b=(function(se,me){const re=Jy(me);if(re===void 0)return null;for(const ce of ym(se,re.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null})(y,h),E=(function(se,me){const re=new Map;for(const ce of lo(me))for(const A of ym(se,ce.fieldPath))switch(A.op){case"==":case"in":re.set(ce.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return re.set(ce.fieldPath.canonicalString(),A.value),Array.from(re.values())}return null})(y,h),T=(function(se,me){const re=[];let ce=!0;for(const A of lo(me)){const N=A.kind===0?QT(se,A.fieldPath,se.startAt):KT(se,A.fieldPath,se.startAt);re.push(N.value),ce&&(ce=N.inclusive)}return new xa(re,ce)})(y,h),R=(function(se,me){const re=[];let ce=!0;for(const A of lo(me)){const N=A.kind===0?KT(se,A.fieldPath,se.endAt):QT(se,A.fieldPath,se.endAt);re.push(N.value),ce&&(ce=N.inclusive)}return new xa(re,ce)})(y,h),q=this.Mn(h,y,T),U=this.Mn(h,y,R),W=this.xn(h,y,E),S=this.On(h.indexId,b,q,T.inclusive,U,R.inclusive,W);return z.forEach(S,(J=>r.Z(J,t.limit).next((se=>{se.forEach((me=>{const re=_e.fromSegments(me.documentKey);u.has(re)||(u=u.add(re),p.push(re))}))}))))})).next((()=>p))}return z.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=hM(ht.create(e.filters,"and")).map((r=>l0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,a,l,u,p){const h=(t!=null?t.length:1)*Math.max(r.length,l.length),y=h/(t!=null?t.length:1),b=[];for(let E=0;E<h;++E){const T=t?this.Nn(t[E/y]):Of,R=this.Bn(e,T,r[E%y],a),q=this.Ln(e,T,l[E%y],u),U=p.map((W=>this.Bn(e,T,W,!0)));b.push(...this.createRange(R,q,U))}return b}Bn(e,t,r,a){const l=new mo(e,_e.empty(),t,r);return a?l:l.En()}Ln(e,t,r,a){const l=new mo(e,_e.empty(),t,r);return a?l.En():l}Fn(e,t){const r=new hw(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const p of l)r.gn(p)&&(!u||p.fields.length>u.fields.length)&&(u=p);return u}))}getIndexType(e,t){let r=2;const a=this.vn(t);return z.forEach(a,(l=>this.Fn(e,l).next((u=>{u?r!==0&&u.fields.length<(function(h){let y=new ft(Rt.comparator),b=!1;for(const E of h.filters)for(const T of E.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?b=!0:y=y.add(T.field));for(const E of h.orderBy)E.field.isKeyField()||(y=y.add(E.field));return y.size+(b?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&r===2?1:r))}kn(e,t){const r=new qu;for(const a of lo(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.ln(a.kind);fo.Wt.Dt(l,u)}return r.un()}Nn(e){const t=new qu;return fo.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new qu;return fo.Wt.Dt(No(this.databaseId,t),r.ln((function(l){const u=lo(l);return u.length===0?0:u[u.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let a=[];a.push(new qu);let l=0;for(const u of lo(e)){const p=r[l++];for(const h of a)if(this.qn(t,u.fieldPath)&&Cd(p))a=this.Un(a,u,p);else{const y=h.ln(u.kind);fo.Wt.Dt(p,y)}}return this.$n(a)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const p of a){const h=new qu;h.seed(p.un()),fo.Wt.Dt(u,h.ln(t.kind)),l.push(h)}return l}qn(e,t){return!!e.filters.find((r=>r instanceof Ze&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Fu(e),a=Ml(e);return(t?r.H(e0,IDBKeyRange.bound(t,t)):r.H()).next((l=>{const u=[];return z.forEach(l,(p=>a.get([p.indexId,this.uid]).next((h=>{u.push((function(b,E){const T=E?new Td(E.sequenceNumber,new br(Po(E.readTime),new _e(Ds(E.documentKey)),E.largestBatchId)):Td.empty(),R=b.fields.map((([q,U])=>new Kf(Rt.fromServerFormat(q),U)));return new hm(b.indexId,b.collectionGroup,R,T)})(p,h))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Pe(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Fu(e),l=Ml(e);return this.Wn(e).next((u=>a.H(e0,IDBKeyRange.bound(t,t)).next((p=>z.forEach(p,(h=>l.put(aw(h.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return z.forEach(t,((a,l)=>{const u=r.get(a.collectionGroup);return(u?z.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((p=>(r.set(a.collectionGroup,p),z.forEach(p,(h=>this.Qn(e,a,h).next((y=>{const b=this.Gn(l,h);return y.isEqual(b)?z.resolve():this.zn(e,l,h,y,b)})))))))}))}jn(e,t,r,a){return Ol(e).put(a.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,a){return Ol(e).delete(a.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const a=Ol(e);let l=new ft(ea);return a.ee({index:QS,range:IDBKeyRange.only([r.indexId,this.uid,tm(this.Kn(r,t))])},((u,p)=>{l=l.add(new mo(r.indexId,t,dw(p.arrayValue),dw(p.directionalValue)))})).next((()=>l))}Gn(e,t){let r=new ft(ea);const a=this.kn(t,e);if(a==null)return r;const l=Jy(t);if(l!=null){const u=e.data.field(l.fieldPath);if(Cd(u))for(const p of u.arrayValue.values||[])r=r.add(new mo(t.indexId,e.key,this.Nn(p),a))}else r=r.add(new mo(t.indexId,e.key,Of,a));return r}zn(e,t,r,a,l){de(mw,"Updating index entries for document '%s'",t.key);const u=[];return(function(h,y,b,E,T){const R=h.getIterator(),q=y.getIterator();let U=Vl(R),W=Vl(q);for(;U||W;){let S=!1,J=!1;if(U&&W){const se=b(U,W);se<0?J=!0:se>0&&(S=!0)}else U!=null?J=!0:S=!0;S?(E(W),W=Vl(q)):J?(T(U),U=Vl(R)):(U=Vl(R),W=Vl(q))}})(a,l,ea,(p=>{u.push(this.jn(e,t,r,p))}),(p=>{u.push(this.Hn(e,t,r,p))})),z.waitFor(u)}Wn(e){let t=1;return Ml(e).ee({index:GS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,p)=>ea(u,p))).filter(((u,p,h)=>!p||ea(u,h[p-1])!==0));const a=[];a.push(e);for(const u of r){const p=ea(u,e),h=ea(u,t);if(p===0)a[0]=e.En();else if(p>0&&h<0)a.push(u),a.push(u.En());else if(h>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Jn(a[u],a[u+1]))return[];const p=a[u].An(this.uid,Of,_e.empty()),h=a[u+1].An(this.uid,Of,_e.empty());l.push(IDBKeyRange.bound(p,h))}return l}Jn(e,t){return ea(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gw)}getMinOffset(e,t){return z.mapArray(this.vn(t),(r=>this.Fn(e,r).next((a=>a||xe(44426))))).next(gw)}}function pw(s){return un(s,Ad)}function Ol(s){return un(s,ud)}function Fu(s){return un(s,d_)}function Ml(s){return un(s,cd)}function gw(s){Ie(s.length!==0,28825);let e=s[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<s.length;r++){const a=s[r].indexState.offset;l_(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new br(e.readTime,e.documentKey,t)}const yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JA=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function ZA(s,e,t){const r=s.store(Wr),a=s.store(ic),l=[],u=IDBKeyRange.only(t.batchId);let p=0;const h=r.ee({range:u},((b,E,T)=>(p++,T.delete())));l.push(h.next((()=>{Ie(p===1,47070,{batchId:t.batchId})})));const y=[];for(const b of t.mutations){const E=qS(e,b.key.path,t.batchId);l.push(a.delete(E)),y.push(b.key)}return z.waitFor(l).next((()=>y))}function xm(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw xe(14731);e=s.noDocument}return JSON.stringify(e).length}Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(JA,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);class Zm{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static wt(e,t,r,a){Ie(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Zm(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).ee({index:_o,range:r},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=Fl(e),u=ta(e);return u.add({}).next((p=>{Ie(typeof p=="number",49019);const h=new x_(p,t,r,a),y=(function(R,q,U){const W=U.baseMutations.map((J=>Pd(R.yt,J))),S=U.mutations.map((J=>Pd(R.yt,J)));return{userId:q,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:W,mutations:S}})(this.serializer,this.userId,h),b=[];let E=new ft(((T,R)=>Pe(T.canonicalString(),R.canonicalString())));for(const T of a){const R=qS(this.userId,T.key.path,p);E=E.add(T.key.path.popLast()),b.push(u.put(y)),b.push(l.put(R,Fj))}return E.forEach((T=>{b.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Zn[p]=h.keys()})),z.waitFor(b).next((()=>h))}))}lookupMutationBatch(e,t){return ta(e).get(t).next((r=>r?(Ie(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ho(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?z.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return ta(e).ee({index:_o,range:a},((u,p,h)=>{p.userId===this.userId&&(Ie(p.batchId>=r,47524,{Yn:r}),l=ho(this.serializer,p)),h.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=da;return ta(e).ee({index:_o,range:t,reverse:!0},((a,l,u)=>{r=l.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,da],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).H(_o,t).next((r=>r.map((a=>ho(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=$f(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Fl(e).ee({range:a},((u,p,h)=>{const[y,b,E]=u,T=Ds(b);if(y===this.userId&&t.path.isEqual(T))return ta(e).get(E).next((R=>{if(!R)throw xe(61480,{er:u,batchId:E});Ie(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:E}),l.push(ho(this.serializer,R))}));h.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ft(Pe);const a=[];return t.forEach((l=>{const u=$f(this.userId,l.path),p=IDBKeyRange.lowerBound(u),h=Fl(e).ee({range:p},((y,b,E)=>{const[T,R,q]=y,U=Ds(R);T===this.userId&&l.path.isEqual(U)?r=r.add(q):E.done()}));a.push(h)})),z.waitFor(a).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=$f(this.userId,r),u=IDBKeyRange.lowerBound(l);let p=new ft(Pe);return Fl(e).ee({range:u},((h,y,b)=>{const[E,T,R]=h,q=Ds(T);E===this.userId&&r.isPrefixOf(q)?q.length===a&&(p=p.add(R)):b.done()})).next((()=>this.tr(e,p)))}tr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(ta(e).get(l).next((u=>{if(u===null)throw xe(35274,{batchId:l});Ie(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),r.push(ho(this.serializer,u))})))})),z.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return ZA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),z.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return z.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return Fl(e).ee({range:r},((l,u,p)=>{if(l[0]===this.userId){const h=Ds(l[1]);a.push(h)}else p.done()})).next((()=>{Ie(a.length===0,56720,{rr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return e1(e,this.userId,t)}ir(e){return t1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:da,lastStreamToken:""}))}}function e1(s,e,t){const r=$f(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return Fl(s).ee({range:l,Y:!0},((p,h,y)=>{const[b,E,T]=p;b===e&&E===a&&(u=!0),y.done()})).next((()=>u))}function ta(s){return un(s,Wr)}function Fl(s){return un(s,ic)}function t1(s){return un(s,Id)}class Vo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Vo(0)}static ar(){return new Vo(-1)}}class pM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new Vo(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ne.fromTimestamp(new lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.cr(e,a))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ll(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(Ie(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return Ll(e).ee(((u,p)=>{const h=Zu(p);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(a++,l.push(this.removeTargetData(e,h)))})).next((()=>z.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Ll(e).ee(((r,a)=>{const l=Zu(a);t(l)}))}ur(e){return _w(e).get(pm).next((t=>(Ie(t!==null,2888),t)))}cr(e,t){return _w(e).put(pm,t)}lr(e,t){return Ll(e).put(YA(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ro(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Ll(e).ee({range:a,index:HS},((u,p,h)=>{const y=Zu(p);Yd(t,y.target)&&(l=y,h.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=sa(e);return t.forEach((u=>{const p=On(u.path);a.push(l.put({targetId:r,path:p})),a.push(this.referenceDelegate.addReference(e,r,u))})),z.waitFor(a)}removeMatchingKeys(e,t,r){const a=sa(e);return z.forEach(t,(l=>{const u=On(l.path);return z.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=sa(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=sa(e);let l=Fe();return a.ee({range:r,Y:!0},((u,p,h)=>{const y=Ds(u[1]),b=new _e(y);l=l.add(b)})).next((()=>l))}containsKey(e,t){const r=On(t.path),a=IDBKeyRange.bound([r],[DS(r)],!1,!0);let l=0;return sa(e).ee({index:u_,Y:!0,range:a},(([u,p],h,y)=>{u!==0&&(l++,y.done())})).next((()=>l>0))}At(e,t){return Ll(e).get(t).next((r=>r?Zu(r):null))}}function Ll(s){return un(s,ac)}function _w(s){return un(s,wo)}function sa(s){return un(s,oc)}const vw="LruGarbageCollector",gM=1048576;function bw([s,e],[t,r]){const a=Pe(s,t);return a===0?Pe(e,r):a}class yM{constructor(e){this.Pr=e,this.buffer=new ft(bw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class n1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){de(vw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Aa(t)?de(vw,"Ignoring IndexedDB error during garbage collection: ",t):await Sa(t)}await this.Ar(3e5)}))}}class _M{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return z.resolve(rr.ce);const r=new yM(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(yw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yw):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,a,l,u,p,h,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,u=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,p=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(y=Date.now(),Ul()<=$e.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-b}ms
	Determined least recently used ${a} in `+(p-u)+`ms
	Removed ${l} targets in `+(h-p)+`ms
	Removed ${E} documents in `+(y-h)+`ms
Total Duration: ${y-b}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function r1(s,e){return new _M(s,e)}class vM{constructor(e,t){this.db=e,this.garbageCollector=r1(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,a)=>t(a)))}addReference(e,t,r){return Mf(e,r)}removeReference(e,t,r){return Mf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Mf(e,t)}wr(e,t){return(function(a,l){let u=!1;return t1(a).te((p=>e1(a,p,l).next((h=>(h&&(u=!0),z.resolve(!h)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.yr(e,((u,p)=>{if(p<=t){const h=this.wr(e,u).next((y=>{if(!y)return l++,r.getEntry(e,u).next((()=>(r.removeEntry(u,Ne.min()),sa(e).delete((function(E){return[0,On(E.path)]})(u)))))}));a.push(h)}})).next((()=>z.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Mf(e,t)}yr(e,t){const r=sa(e);let a,l=rr.ce;return r.ee({index:u_},(([u,p],{path:h,sequenceNumber:y})=>{u===0?(l!==rr.ce&&t(new _e(Ds(a)),l),l=y,a=h):l=rr.ce})).next((()=>{l!==rr.ce&&t(new _e(Ds(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mf(s,e){return sa(s).put((function(r,a){return{targetId:0,path:On(r.path),sequenceNumber:a}})(e,s.currentSequenceNumber))}class s1{constructor(){this.changes=new vi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ao(e).put(r)}removeEntry(e,t,r){return ao(e).delete((function(l,u){const p=l.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],vm(u),p[p.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=wt.newInvalidDocument(t);return ao(e).ee({index:Yf,range:IDBKeyRange.only(Hu(t))},((a,l)=>{r=this.Sr(t,l)})).next((()=>r))}Dr(e,t){let r={size:0,document:wt.newInvalidDocument(t)};return ao(e).ee({index:Yf,range:IDBKeyRange.only(Hu(t))},((a,l)=>{r={document:this.Sr(t,l),size:xm(l)}})).next((()=>r))}getEntries(e,t){let r=ir();return this.Cr(e,t,((a,l)=>{const u=this.Sr(a,l);r=r.insert(a,u)})).next((()=>r))}vr(e,t){let r=ir(),a=new bt(_e.comparator);return this.Cr(e,t,((l,u)=>{const p=this.Sr(l,u);r=r.insert(l,p),a=a.insert(l,xm(u))})).next((()=>({documents:r,Fr:a})))}Cr(e,t,r){if(t.isEmpty())return z.resolve();let a=new ft(Tw);t.forEach((h=>a=a.add(h)));const l=IDBKeyRange.bound(Hu(a.first()),Hu(a.last())),u=a.getIterator();let p=u.getNext();return ao(e).ee({index:Yf,range:l},((h,y,b)=>{const E=_e.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;p&&Tw(p,E)<0;)r(p,null),p=u.getNext();p&&p.isEqual(E)&&(r(p,y),p=u.hasNext()?u.getNext():null),p?b.j(Hu(p)):b.done()})).next((()=>{for(;p;)r(p,null),p=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,p=[u.popLast().toArray(),u.lastSegment(),vm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ao(e).H(IDBKeyRange.bound(p,h,!0)).next((y=>{l?.incrementDocumentReadCount(y.length);let b=ir();for(const E of y){const T=this.Sr(_e.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);T.isFoundDocument()&&(Xd(t,T)||a.has(T.key))&&(b=b.insert(T.key,T))}return b}))}getAllFromCollectionGroup(e,t,r,a){let l=ir();const u=Ew(t,r),p=Ew(t,br.max());return ao(e).ee({index:FS,range:IDBKeyRange.bound(u,p,!0)},((h,y,b)=>{const E=this.Sr(_e.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);l=l.insert(E.key,E),l.size===a&&b.done()})).next((()=>l))}newChangeBuffer(e){return new xM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return xw(e).get(Zy).next((t=>(Ie(!!t,20021),t)))}br(e,t){return xw(e).put(Zy,t)}Sr(e,t){if(t){const r=iM(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ne.min())))return r}return wt.newInvalidDocument(e)}}function i1(s){return new bM(s)}class xM extends s1{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new vi((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new ft(((l,u)=>Pe(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const p=this.Or.get(l);if(t.push(this.Mr.removeEntry(e,l,p.readTime)),u.isValidDocument()){const h=sw(this.Mr.serializer,u);a=a.add(l.path.popLast());const y=xm(h);r+=y-p.size,t.push(this.Mr.addEntry(e,l,h))}else if(r-=p.size,this.trackRemovals){const h=sw(this.Mr.serializer,u.convertToNoDocument(Ne.min()));t.push(this.Mr.addEntry(e,l,h))}})),a.forEach((l=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Mr.updateMetadata(e,r)),z.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:a})=>(a.forEach(((l,u)=>{this.Or.set(l,{size:u,readTime:r.get(l).readTime})})),r)))}}function xw(s){return un(s,Sd)}function ao(s){return un(s,mm)}function Hu(s){const e=s.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ew(s,e){const t=e.documentKey.path.toArray();return[s,vm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Tw(s,e){const t=s.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Pe(t[l],r[l]),a)return a;return a=Pe(t.length,r.length),a||(a=Pe(t[t.length-2],r[r.length-2]),a||Pe(t[t.length-1],r[r.length-1]))}class EM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class a1{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&fd(r.mutation,a,sr.empty(),lt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Fe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Fe()){const a=Ps();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let u=Xu();return l.forEach(((p,h)=>{u=u.insert(p,h.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Ps();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Fe())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,p)=>{t.set(u,p)}))}))}computeViews(e,t,r,a){let l=ir();const u=hd(),p=(function(){return hd()})();return t.forEach(((h,y)=>{const b=r.get(y.key);a.has(y.key)&&(b===void 0||b.mutation instanceof bi)?l=l.insert(y.key,y):b!==void 0?(u.set(y.key,b.mutation.getFieldMask()),fd(b.mutation,y,b.mutation.getFieldMask(),lt.now())):u.set(y.key,sr.empty())})),this.recalculateAndSaveOverlays(e,l).next((h=>(h.forEach(((y,b)=>u.set(y,b))),t.forEach(((y,b)=>p.set(y,new EM(b,u.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const r=hd();let a=new bt(((u,p)=>u-p)),l=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const p of u)p.keys().forEach((h=>{const y=t.get(h);if(y===null)return;let b=r.get(h)||sr.empty();b=p.applyToLocalView(y,b),r.set(h,b);const E=(a.get(p.batchId)||Fe()).add(h);a=a.insert(p.batchId,E)}))})).next((()=>{const u=[],p=a.getReverseIterator();for(;p.hasNext();){const h=p.getNext(),y=h.key,b=h.value,E=xA();b.forEach((T=>{if(!l.has(T)){const R=NA(t.get(T),r.get(T));R!==null&&E.set(T,R),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,E))}return z.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return AO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):y_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):z.resolve(Ps());let p=sc,h=l;return u.next((y=>z.forEach(y,((b,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),l.get(b)?z.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{h=h.insert(b,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,h,y,Fe()))).next((b=>({batchId:p,changes:bA(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((r=>{let a=Xu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=Xu();return this.indexManager.getCollectionParents(e,l).next((p=>z.forEach(p,(h=>{const y=(function(E,T){return new _i(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,h.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,r,a).next((b=>{b.forEach(((E,T)=>{u=u.insert(E,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((u=>{l.forEach(((h,y)=>{const b=y.getKey();u.get(b)===null&&(u=u.insert(b,wt.newInvalidDocument(b)))}));let p=Xu();return u.forEach(((h,y)=>{const b=l.get(h);b!==void 0&&fd(b.mutation,y,sr.empty(),lt.now()),Xd(t,y)&&(p=p.insert(h,y))})),p}))}}class TM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Qt(a.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:S_(a.bundledQuery),readTime:Qt(a.readTime)}})(t)),z.resolve()}}class wM{constructor(){this.overlays=new bt(_e.comparator),this.Lr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ps();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.bt(e,t,l)})),z.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.Lr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const a=Ps(),l=t.length+1,u=new _e(t.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const h=p.getNext().value,y=h.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&h.largestBatchId>r&&a.set(h.getKey(),h)}return z.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new bt(((y,b)=>y-b));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let b=l.get(y.largestBatchId);b===null&&(b=Ps(),l=l.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=Ps(),h=l.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=a)););return z.resolve(p)}bt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(r.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new T_(t,r));let l=this.Lr.get(t);l===void 0&&(l=Fe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(r.key))}}class IM{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}class R_{constructor(){this.kr=new ft(mn.Kr),this.qr=new ft(mn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new mn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new mn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new _e(new Ye([])),r=new mn(t,e),a=new mn(t,e+1),l=[];return this.qr.forEachInRange([r,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new _e(new Ye([])),r=new mn(t,e),a=new mn(t,e+1);let l=Fe();return this.qr.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new mn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class mn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return _e.comparator(e.key,t.key)||Pe(e.Hr,t.Hr)}static Ur(e,t){return Pe(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}class SM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ft(mn.Kr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new x_(l,t,r,a);this.mutationQueue.push(u);for(const p of a)this.Jr=this.Jr.add(new mn(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return z.resolve(u)}lookupMutationBatch(e,t){return z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?da:this.Yn-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mn(t,0),a=new mn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([r,a],(u=>{const p=this.Zr(u.Hr);l.push(p)})),z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ft(Pe);return t.forEach((a=>{const l=new mn(a,0),u=new mn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(p=>{r=r.add(p.Hr)}))})),z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;_e.isDocumentKey(l)||(l=l.child(""));const u=new mn(new _e(l),0);let p=new ft(Pe);return this.Jr.forEachWhile((h=>{const y=h.key.path;return!!r.isPrefixOf(y)&&(y.length===a&&(p=p.add(h.Hr)),!0)}),u),z.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ie(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return z.forEach(t.mutations,(a=>{const l=new mn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new mn(t,0),a=this.Jr.firstAfterOrEqual(r);return z.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class AM{constructor(e){this.ti=e,this.docs=(function(){return new bt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(t))}getEntries(e,t){let r=ir();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():wt.newInvalidDocument(a))})),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=ir();const u=t.path,p=new _e(u.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(p);for(;h.hasNext();){const{key:y,value:{document:b}}=h.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||l_(MS(b),r)<=0||(a.has(b.key)||Xd(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return z.resolve(l)}getAllFromCollectionGroup(e,t,r,a){xe(9500)}ni(e,t){return z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new NM(this)}getSize(e){return z.resolve(this.size)}}class NM extends s1{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(r)})),z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class RM{constructor(e){this.persistence=e,this.ri=new vi((t=>Ro(t)),Yd),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.ii=0,this.si=new R_,this.targetCount=0,this.oi=Vo._r()}forEachTarget(e,t){return this.ri.forEach(((r,a)=>t(a))),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),z.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Vo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.lr(t),z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ri.forEach(((u,p)=>{p.sequenceNumber<=t&&r.get(p.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),a++)})),z.waitFor(l).next((()=>a))}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.si.containsKey(t))}}class C_{constructor(e,t){this._i={},this.overlays={},this.ai=new rr(0),this.ui=!1,this.ui=!0,this.ci=new IM,this.referenceDelegate=e(this),this.li=new RM(this),this.indexManager=new fM,this.remoteDocumentCache=(function(a){return new AM(a)})((r=>this.referenceDelegate.hi(r))),this.serializer=new $A(t),this.Pi=new TM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new SM(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){de("MemoryPersistence","Starting transaction:",e);const a=new CM(this.ai.next());return this.referenceDelegate.Ti(),r(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return z.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class CM extends US{constructor(e){super(),this.currentSequenceNumber=e}}class ep{constructor(e){this.persistence=e,this.Ri=new R_,this.Ai=null}static Vi(e){return new ep(e)}get di(){if(this.Ai)return this.Ai;throw xe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.di,(r=>{const a=_e.fromPath(r);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Ne.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Em{constructor(e,t){this.persistence=e,this.fi=new vi((r=>On(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=r1(this,t)}static Vi(e,t){return new Em(e,t)}Ti(){}Ii(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return z.forEach(this.fi,((r,a)=>this.wr(e,r,a).next((l=>l?z.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((p=>{p||(r++,l.removeEntry(u,Ne.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xf(e.data.value)),t}wr(e,t,r){return z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return z.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class kM{constructor(e){this.serializer=e}k(e,t,r,a){const l=new Fm("createOrUpgrade",t);r<1&&a>=1&&((function(h){h.createObjectStore($d)})(e),(function(h){h.createObjectStore(Id,{keyPath:qj}),h.createObjectStore(Wr,{keyPath:VT,autoIncrement:!0}).createIndex(_o,jT,{unique:!0}),h.createObjectStore(ic)})(e),ww(e),(function(h){h.createObjectStore(co)})(e));let u=z.resolve();return r<3&&a>=3&&(r!==0&&((function(h){h.deleteObjectStore(oc),h.deleteObjectStore(ac),h.deleteObjectStore(wo)})(e),ww(e)),u=u.next((()=>(function(h){const y=h.store(wo),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return y.put(pm,b)})(l)))),r<4&&a>=4&&(r!==0&&(u=u.next((()=>(function(h,y){return y.store(Wr).H().next((E=>{h.deleteObjectStore(Wr),h.createObjectStore(Wr,{keyPath:VT,autoIncrement:!0}).createIndex(_o,jT,{unique:!0});const T=y.store(Wr),R=E.map((q=>T.put(q)));return z.waitFor(R)}))})(e,l)))),u=u.next((()=>{(function(h){h.createObjectStore(lc,{keyPath:Xj})})(e)}))),r<5&&a>=5&&(u=u.next((()=>this.gi(l)))),r<6&&a>=6&&(u=u.next((()=>((function(h){h.createObjectStore(Sd)})(e),this.pi(l))))),r<7&&a>=7&&(u=u.next((()=>this.yi(l)))),r<8&&a>=8&&(u=u.next((()=>this.wi(e,l)))),r<9&&a>=9&&(u=u.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(u=u.next((()=>this.bi(l)))),r<11&&a>=11&&(u=u.next((()=>{(function(h){h.createObjectStore(Hm,{keyPath:Jj})})(e),(function(h){h.createObjectStore(Gm,{keyPath:Zj})})(e)}))),r<12&&a>=12&&(u=u.next((()=>{(function(h){const y=h.createObjectStore(Qm,{keyPath:aO});y.createIndex(t0,oO,{unique:!1}),y.createIndex(KS,lO,{unique:!1})})(e)}))),r<13&&a>=13&&(u=u.next((()=>(function(h){const y=h.createObjectStore(mm,{keyPath:Hj});y.createIndex(Yf,Gj),y.createIndex(FS,Qj)})(e))).next((()=>this.Si(e,l))).next((()=>e.deleteObjectStore(co)))),r<14&&a>=14&&(u=u.next((()=>this.Di(e,l)))),r<15&&a>=15&&(u=u.next((()=>(function(h){h.createObjectStore(d_,{keyPath:eO,autoIncrement:!0}).createIndex(e0,tO,{unique:!1}),h.createObjectStore(cd,{keyPath:nO}).createIndex(GS,rO,{unique:!1}),h.createObjectStore(ud,{keyPath:sO}).createIndex(QS,iO,{unique:!1})})(e)))),r<16&&a>=16&&(u=u.next((()=>{t.objectStore(cd).clear()})).next((()=>{t.objectStore(ud).clear()}))),r<17&&a>=17&&(u=u.next((()=>{(function(h){h.createObjectStore(h_,{keyPath:cO})})(e)}))),r<18&&a>=18&&dI()&&(u=u.next((()=>{t.objectStore(cd).clear()})).next((()=>{t.objectStore(ud).clear()}))),u}pi(e){let t=0;return e.store(co).ee(((r,a)=>{t+=xm(a)})).next((()=>{const r={byteSize:t};return e.store(Sd).put(Zy,r)}))}gi(e){const t=e.store(Id),r=e.store(Wr);return t.H().next((a=>z.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,da],[l.userId,l.lastAcknowledgedBatchId]);return r.H(_o,u).next((p=>z.forEach(p,(h=>{Ie(h.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const y=ho(this.serializer,h);return ZA(e,l.userId,y).next((()=>{}))}))))}))))}yi(e){const t=e.store(oc),r=e.store(co);return e.store(wo).get(pm).next((a=>{const l=[];return r.ee(((u,p)=>{const h=new Ye(u),y=(function(E){return[0,On(E)]})(h);l.push(t.get(y).next((b=>b?z.resolve():(E=>t.put({targetId:0,path:On(E),sequenceNumber:a.highestListenSequenceNumber}))(h))))})).next((()=>z.waitFor(l)))}))}wi(e,t){e.createObjectStore(Ad,{keyPath:Wj});const r=t.store(Ad),a=new N_,l=u=>{if(a.add(u)){const p=u.lastSegment(),h=u.popLast();return r.put({collectionId:p,parent:On(h)})}};return t.store(co).ee({Y:!0},((u,p)=>{const h=new Ye(u);return l(h.popLast())})).next((()=>t.store(ic).ee({Y:!0},(([u,p,h],y)=>{const b=Ds(p);return l(b.popLast())}))))}bi(e){const t=e.store(ac);return t.ee(((r,a)=>{const l=Zu(a),u=YA(this.serializer,l);return t.put(u)}))}Si(e,t){const r=t.store(co),a=[];return r.ee(((l,u)=>{const p=t.store(mm),h=(function(E){return E.document?new _e(Ye.fromString(E.document.name).popFirst(5)):E.noDocument?_e.fromSegments(E.noDocument.path):E.unknownDocument?_e.fromSegments(E.unknownDocument.path):xe(36783)})(u).path.toArray(),y={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(p.put(y))})).next((()=>z.waitFor(a)))}Di(e,t){const r=t.store(Wr),a=i1(this.serializer),l=new C_(ep.Vi,this.serializer.yt);return r.H().next((u=>{const p=new Map;return u.forEach((h=>{let y=p.get(h.userId)??Fe();ho(this.serializer,h).keys().forEach((b=>y=y.add(b))),p.set(h.userId,y)})),z.forEach(p,((h,y)=>{const b=new pn(y),E=Jm.wt(this.serializer,b),T=l.getIndexManager(b),R=Zm.wt(b,this.serializer,T,l.referenceDelegate);return new a1(a,R,E,T).recalculateAndSaveOverlaysForDocumentKeys(new n0(t,rr.ce),h).next()}))}))}}function ww(s){s.createObjectStore(oc,{keyPath:$j}).createIndex(u_,Yj,{unique:!0}),s.createObjectStore(ac,{keyPath:"targetId"}).createIndex(HS,Kj,{unique:!0}),s.createObjectStore(wo)}const na="IndexedDbPersistence",Ny=18e5,Ry=5e3,Cy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",o1="main";class k_{constructor(e,t,r,a,l,u,p,h,y,b,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=l,this.window=u,this.document=p,this.Fi=y,this.Mi=b,this.xi=E,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=T=>Promise.resolve(),!k_.v())throw new le($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vM(this,a),this.Ki=t+o1,this.serializer=new $A(h),this.qi=new js(this.Ki,this.xi,new kM(this.serializer)),this.ci=new oM,this.li=new pM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=i1(this.serializer),this.Pi=new aM,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,b===!1&&Gt(na,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le($.FAILED_PRECONDITION,Cy);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new rr(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Lf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Aa(e))return de(na,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return de(na,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Gu(e).get(Pl).next((t=>z.resolve(this.Xi(t))))}Yi(e){return Lf(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Ny)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=un(t,lc);return r.H().next((a=>{const l=this.ns(a,Ny),u=a.filter((p=>l.indexOf(p)===-1));return z.forEach(u,(p=>r.delete(p.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?z.resolve(!0):Gu(e).get(Pl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Ry)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new le($.FAILED_PRECONDITION,Cy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lf(e).H().next((r=>this.ns(r,Ry).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,p=this.networkEnabled===a.networkEnabled;if(l||u&&p)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&de(na,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[$d,lc],(e=>{const t=new n0(e,rr.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Lf(e).H().next((t=>this.ns(t,Ny).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Zm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mM(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Jm.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){de(na,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(h){return h===18?hO:h===17?XS:h===16?dO:h===15?f_:h===14?WS:h===13?YS:h===12?uO:h===11?$S:void xe(60245)})(this.xi);let u;return this.qi.runTransaction(e,a,l,(p=>(u=new n0(p,this.ai?this.ai.next():rr.ce),t==="readwrite-primary"?this.ji(u).next((h=>!!h||this.Hi(u))).next((h=>{if(!h)throw Gt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new le($.FAILED_PRECONDITION,LS);return r(u)})).next((h=>this.Zi(u).next((()=>h)))):this.Ps(u).next((()=>r(u)))))).then((p=>(u.raiseOnCommittedEvent(),p)))}Ps(e){return Gu(e).get(Pl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Ry)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le($.FAILED_PRECONDITION,Cy)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gu(e).put(Pl,t)}static v(){return js.v()}Ji(e){const t=Gu(e);return t.get(Pl).next((r=>this.Xi(r)?(de(na,"Releasing primary lease."),t.delete(Pl)):z.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Gt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;uI()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return de(na,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Gt(na,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Gt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gu(s){return un(s,$d)}function Lf(s){return un(s,lc)}function D_(s,e){let t=s.projectId;return s.isDefaultDatabase||(t+="."+s.database),"firestore/"+e+"/"+t+"/"}class P_{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=a}static Es(e,t){let r=Fe(),a=Fe();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new P_(e,t.fromCache,r,a)}}class DM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class l1{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return uI()?8:zS(Dt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new DM;return this.ys(e,t,u).next((p=>{if(l.result=p,this.As)return this.ws(e,t,u,p.size)}))})).next((()=>l.result))}ws(e,t,r,a){return r.documentReadCount<this.Vs?(Ul()<=$e.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",zl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(Ul()<=$e.DEBUG&&de("QueryEngine","Query:",zl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ds*a?(Ul()<=$e.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",zl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hn(t))):z.resolve())}gs(e,t){if($T(t))return z.resolve(null);let r=Hn(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=_m(t,null,"F"),r=Hn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=Fe(...l);return this.fs.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,r).next((h=>{const y=this.bs(t,p);return this.Ss(t,y,u,h.readTime)?this.gs(e,_m(t,null,"F")):this.Ds(e,y,t,h)}))))})))))}ps(e,t,r,a){return $T(t)||a.isEqual(Ne.min())?z.resolve(null):this.fs.getDocuments(e,r).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,r,a)?z.resolve(null):(Ul()<=$e.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),zl(t)),this.Ds(e,u,t,OS(a,sc)).next((p=>p)))}))}bs(e,t){let r=new ft(_A(e));return t.forEach(((a,l)=>{Xd(e,l)&&(r=r.add(l))})),r}Ss(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,r){return Ul()<=$e.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",zl(t)),this.fs.getDocumentsMatchingQuery(e,t,br.min(),r)}Ds(e,t,r,a){return this.fs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const V_="LocalStore",PM=3e8;class VM{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new bt(Pe),this.Fs=new vi((l=>Ro(l)),Yd),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a1(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function c1(s,e,t,r){return new VM(s,e,t,r)}async function u1(s,e){const t=ve(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],p=[];let h=Fe();for(const y of a){u.push(y.batchId);for(const b of y.mutations)h=h.add(b.key)}for(const y of l){p.push(y.batchId);for(const b of y.mutations)h=h.add(b.key)}return t.localDocuments.getDocuments(r,h).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:p})))}))}))}function jM(s,e){const t=ve(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,h,y,b){const E=y.batch,T=E.keys();let R=z.resolve();return T.forEach((q=>{R=R.next((()=>b.getEntry(h,q))).next((U=>{const W=y.docVersions.get(q);Ie(W!==null,48541),U.version.compareTo(W)<0&&(E.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),b.addEntry(U)))}))})),R.next((()=>p.mutationQueue.removeMutationBatch(h,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let h=Fe();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(h=h.add(p.batch.mutations[y].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function d1(s){const e=ve(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function OM(s,e){const t=ve(s),r=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const p=[];e.targetChanges.forEach(((b,E)=>{const T=a.get(E);if(!T)return;p.push(t.li.removeMatchingKeys(l,b.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,b.addedDocuments,E))));let R=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(Ot.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):b.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(b.resumeToken,r)),a=a.insert(E,R),(function(U,W,S){return U.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=PM?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(T,R,b)&&p.push(t.li.updateTargetData(l,R))}));let h=ir(),y=Fe();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),p.push(h1(l,u,e.documentUpdates).next((b=>{h=b.Bs,y=b.Ls}))),!r.isEqual(Ne.min())){const b=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,r)));p.push(b)}return z.waitFor(p).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,h,y))).next((()=>h))})).then((l=>(t.vs=a,l)))}function h1(s,e,t){let r=Fe(),a=Fe();return t.forEach((l=>r=r.add(l))),e.getEntries(s,r).next((l=>{let u=ir();return t.forEach(((p,h)=>{const y=l.get(p);h.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(p)),h.isNoDocument()&&h.version.isEqual(Ne.min())?(e.removeEntry(p,h.readTime),u=u.insert(p,h)):!y.isValidDocument()||h.version.compareTo(y.version)>0||h.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(h),u=u.insert(p,h)):de(V_,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",h.version)})),{Bs:u,Ls:a}}))}function MM(s,e){const t=ve(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=da),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function pc(s,e){const t=ve(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.li.getTargetData(r,e).next((l=>l?(a=l,z.resolve(a)):t.li.allocateTargetId(r).next((u=>(a=new ci(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.vs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function gc(s,e,t){const r=ve(s),a=r.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Aa(u))throw u;de(V_,`Failed to update sequence numbers for target ${e}: ${u}`)}r.vs=r.vs.remove(e),r.Fs.delete(a.target)}function Tm(s,e,t){const r=ve(s);let a=Ne.min(),l=Fe();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(h,y,b){const E=ve(h),T=E.Fs.get(b);return T!==void 0?z.resolve(E.vs.get(T)):E.li.getTargetData(y,b)})(r,u,Hn(e)).next((p=>{if(p)return a=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(u,p.targetId).next((h=>{l=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?a:Ne.min(),t?l:Fe()))).next((p=>(p1(r,yA(e),p),{documents:p,ks:l})))))}function f1(s,e){const t=ve(s),r=ve(t.li),a=t.vs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((u=>u?u.target:null))))}function m1(s,e){const t=ve(s),r=t.Ms.get(e)||Ne.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.xs.getAllFromCollectionGroup(a,e,OS(r,sc),Number.MAX_SAFE_INTEGER))).then((a=>(p1(t,e,a),a)))}function p1(s,e,t){let r=s.Ms.get(e)||Ne.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),s.Ms.set(e,r)}async function LM(s,e,t,r){const a=ve(s);let l=Fe(),u=ir();for(const y of t){const b=e.Ks(y.metadata.name);y.document&&(l=l.add(b));const E=e.qs(y);E.setReadTime(e.Us(y.metadata.readTime)),u=u.insert(b,E)}const p=a.xs.newChangeBuffer({trackRemovals:!0}),h=await pc(a,(function(b){return Hn(Nc(Ye.fromString(`__bundle__/docs/${b}`)))})(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",(y=>h1(y,p,u).next((b=>(p.apply(y),b))).next((b=>a.li.removeMatchingKeysForTargetId(y,h.targetId).next((()=>a.li.addMatchingKeys(y,l,h.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(y,b.Bs,b.Ls))).next((()=>b.Bs))))))}async function UM(s,e,t=Fe()){const r=await pc(s,Hn(S_(e.bundledQuery))),a=ve(s);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const u=Qt(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return a.Pi.saveNamedQuery(l,e);const p=r.withResumeToken(Ot.EMPTY_BYTE_STRING,u);return a.vs=a.vs.insert(p.targetId,p),a.li.updateTargetData(l,p).next((()=>a.li.removeMatchingKeysForTargetId(l,r.targetId))).next((()=>a.li.addMatchingKeys(l,t,r.targetId))).next((()=>a.Pi.saveNamedQuery(l,e)))}))}const g1="firestore_clients";function Iw(s,e){return`${g1}_${s}_${e}`}const y1="firestore_mutations";function Sw(s,e,t){let r=`${y1}_${s}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const _1="firestore_targets";function ky(s,e){return`${_1}_${s}_${e}`}const Ss="SharedClientState";class wm{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static $s(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new le(a.error.code,a.error.message))),u?new wm(e,t,a.state,l):(Gt(Ss,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class md{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new le(r.error.code,r.error.message))),l?new md(e,r.state,a):(Gt(Ss,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Im{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=__();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=BS(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new Im(e,l):(Gt(Ss,`Failed to parse client data for instance '${e}': ${t}`),null)}}class j_{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new j_(t.clientId,t.onlineState):(Gt(Ss,`Failed to parse online state: ${e}`),null)}}class y0{constructor(){this.activeTargetIds=__()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dy{constructor(e,t,r,a,l){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new bt(Pe),this.started=!1,this.Zs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=Iw(this.persistenceKey,this.zs),this.Ys=(function(h){return`firestore_sequence_number_${h}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new y0),this.eo=new RegExp(`^${g1}_${u}_([^_]*)$`),this.no=new RegExp(`^${y1}_${u}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${_1}_${u}_(\\d+)$`),this.io=(function(h){return`firestore_online_state_${h}`})(this.persistenceKey),this.so=(function(h){return`firestore_bundle_loaded_v2_${h}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const a=this.getItem(Iw(this.persistenceKey,r));if(a){const l=Im.$s(r,a);l&&(this.Js=this.Js.insert(l.clientId,l))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(ky(this.persistenceKey,e));if(a){const l=md.$s(e,a);l&&(r=l.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ky(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.lo(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return de(Ss,"READ",e,t),t}setItem(e,t){de(Ss,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){de(Ss,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(de(Ss,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Gt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(l){let u=rr.ce;if(l!=null)try{const p=JSON.parse(l);Ie(typeof p=="number",30636,{yo:l}),u=p}catch(p){Gt(Ss,"Failed to read sequence number from WebStorage",p)}return u})(t.newValue);r!==rr.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const a=new wm(this.currentUser,e,t,r),l=Sw(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}lo(e){const t=Sw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const a=ky(this.persistenceKey,e),l=new md(e,t,r);this.setItem(a,l.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return Im.$s(r,t)}Vo(e,t){const r=this.no.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return wm.$s(new pn(l),a,t)}fo(e,t){const r=this.ro.exec(e),a=Number(r[1]);return md.$s(a,t)}_o(e){return j_.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);de(Ss,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),a=this.uo(this.Js),l=this.uo(r),u=[],p=[];return l.forEach((h=>{a.has(h)||u.push(h)})),a.forEach((h=>{l.has(h)||p.push(h)})),this.syncEngine.Co(u,p).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=__();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class v1{constructor(){this.vo=new y0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new y0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zM{Mo(e){}shutdown(){}}const Aw="ConnectivityMonitor";class Nw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){de(Aw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){de(Aw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Uf=null;function _0(){return Uf===null?Uf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uf++,"0x"+Uf.toString(16)}const Py="RestConnection",BM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class qM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.$o=this.databaseId.database===r0?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const u=_0(),p=this.Qo(e,t.toUriEncodedString());de(Py,`Sending RPC '${e}' ${u}:`,p,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,a,l);const{host:y}=new URL(p),b=Ec(y);return this.zo(e,p,h,r,b).then((E=>(de(Py,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw zs(Py,`RPC '${e}' ${u} failed with error: `,E,"url: ",p,"request:",r),E}))}jo(e,t,r,a,l,u){return this.Wo(e,t,r,a,l)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ac})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const r=BM[e];let a=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class FM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Pn="WebChannelConnection",Qu=(s,e,t)=>{s.listen(e,(r=>{try{t(r)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Xl extends qM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Xl.c_){const e=NS();Qu(e,AS.STAT_EVENT,(t=>{t.stat===Wy.PROXY?de(Pn,"STAT_EVENT: detected buffering proxy"):t.stat===Wy.NOPROXY&&de(Pn,"STAT_EVENT: detected no buffering proxy")})),Xl.c_=!0}}zo(e,t,r,a,l){const u=_0();return new Promise(((p,h)=>{const y=new IS;y.setWithCredentials(!0),y.listenOnce(SS.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Qf.NO_ERROR:const E=y.getResponseJson();de(Pn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),p(E);break;case Qf.TIMEOUT:de(Pn,`RPC '${e}' ${u} timed out`),h(new le($.DEADLINE_EXCEEDED,"Request time out"));break;case Qf.HTTP_ERROR:const T=y.getStatus();if(de(Pn,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const q=R?.error;if(q&&q.status&&q.message){const U=(function(S){const J=S.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(J)>=0?J:$.UNKNOWN})(q.status);h(new le(U,q.message))}else h(new le($.UNKNOWN,"Server responded with status "+y.getStatus()))}else h(new le($.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{de(Pn,`RPC '${e}' ${u} completed.`)}}));const b=JSON.stringify(a);de(Pn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",b,r,15)}))}T_(e,t,r){const a=_0(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(p.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const y=l.join("");de(Pn,`Creating RPC '${e}' stream ${a}: ${y}`,p);const b=u.createWebChannel(y,p);this.I_(b);let E=!1,T=!1;const R=new FM({Ho:q=>{T?de(Pn,`Not sending because RPC '${e}' stream ${a} is closed:`,q):(E||(de(Pn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),E=!0),de(Pn,`RPC '${e}' stream ${a} sending:`,q),b.send(q))},Jo:()=>b.close()});return Qu(b,Wu.EventType.OPEN,(()=>{T||(de(Pn,`RPC '${e}' stream ${a} transport opened.`),R.i_())})),Qu(b,Wu.EventType.CLOSE,(()=>{T||(T=!0,de(Pn,`RPC '${e}' stream ${a} transport closed`),R.o_(),this.E_(b))})),Qu(b,Wu.EventType.ERROR,(q=>{T||(T=!0,zs(Pn,`RPC '${e}' stream ${a} transport errored. Name:`,q.name,"Message:",q.message),R.o_(new le($.UNAVAILABLE,"The operation could not be completed")))})),Qu(b,Wu.EventType.MESSAGE,(q=>{if(!T){const U=q.data[0];Ie(!!U,16349);const W=U,S=W?.error||W[0]?.error;if(S){de(Pn,`RPC '${e}' stream ${a} received error:`,S);const J=S.status;let se=(function(ce){const A=rn[ce];if(A!==void 0)return kA(A)})(J),me=S.message;se===void 0&&(se=$.INTERNAL,me="Unknown error status: "+J+" with message "+S.message),T=!0,R.o_(new le(se,me)),b.close()}else de(Pn,`RPC '${e}' stream ${a} received:`,U),R.__(U)}})),Xl.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return RS()}}function HM(s){return new Xl(s)}function b1(){return typeof window<"u"?window:null}function nm(){return typeof document<"u"?document:null}function th(s){return new YO(s,!0)}Xl.c_=!1;class O_{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&de("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Rw="PersistentStream";class x1{constructor(e,t,r,a,l,u,p,h){this.Ci=e,this.b_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new O_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Gt(t.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new le($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Rw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(de(Rw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GM extends x1{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=JO(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ne.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ne.min():u.readTime?Qt(u.readTime):Ne.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=h0(this.serializer),t.addTarget=(function(l,u){let p;const h=u.target;if(p=gm(h)?{documents:BA(l,h)}:{query:qA(l,h).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=jA(l,u.resumeToken);const y=u0(l,u.expectedCount);y!==null&&(p.expectedCount=y)}else if(u.snapshotVersion.compareTo(Ne.min())>0){p.readTime=mc(l,u.snapshotVersion.toTimestamp());const y=u0(l,u.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const r=eM(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=h0(this.serializer),t.removeTarget=e,this.K_(t)}}class QM extends x1{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ZO(e.writeResults,e.commitTime),r=Qt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=h0(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Pd(this.serializer,r)))};this.K_(t)}}class KM{}class $M extends KM{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new le($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,d0(t,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le($.UNKNOWN,l.toString())}))}jo(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.jo(e,d0(t,r),a,u,p,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le($.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function YM(s,e,t,r){return new $M(s,e,t,r)}class WM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gt(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const jo="RemoteStore";class XM{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{r.enqueueAndForget((async()=>{Ra(this)&&(de(jo,"Restarting streams for network reachability change."),await(async function(h){const y=ve(h);y.Ea.add(4),await kc(y),y.Va.set("Unknown"),y.Ea.delete(4),await nh(y)})(this))}))})),this.Va=new WM(r,a)}}async function nh(s){if(Ra(s))for(const e of s.Ra)await e(!0)}async function kc(s){for(const e of s.Ra)await e(!1)}function tp(s,e){const t=ve(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),U_(t)?L_(t):Pc(t).O_()&&M_(t,e))}function yc(s,e){const t=ve(s),r=Pc(t);t.Ia.delete(e),r.O_()&&E1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ra(t)&&t.Va.set("Unknown"))}function M_(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pc(s).Z_(e)}function E1(s,e){s.da.$e(e),Pc(s).X_(e)}function L_(s){s.da=new GO({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Pc(s).start(),s.Va.ua()}function U_(s){return Ra(s)&&!Pc(s).x_()&&s.Ia.size>0}function Ra(s){return ve(s).Ea.size===0}function T1(s){s.da=void 0}async function JM(s){s.Va.set("Online")}async function ZM(s){s.Ia.forEach(((e,t)=>{M_(s,e)}))}async function e4(s,e){T1(s),U_(s)?(s.Va.ha(e),L_(s)):s.Va.set("Unknown")}async function t4(s,e,t){if(s.Va.set("Online"),e instanceof VA&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const p of l.targetIds)a.Ia.has(p)&&(await a.remoteSyncer.rejectListen(p,u),a.Ia.delete(p),a.da.removeTarget(p))})(s,e)}catch(r){de(jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sm(s,r)}else if(e instanceof em?s.da.Xe(e):e instanceof PA?s.da.st(e):s.da.tt(e),!t.isEqual(Ne.min()))try{const r=await d1(s.localStore);t.compareTo(r)>=0&&await(function(l,u){const p=l.da.Tt(u);return p.targetChanges.forEach(((h,y)=>{if(h.resumeToken.approximateByteSize()>0){const b=l.Ia.get(y);b&&l.Ia.set(y,b.withResumeToken(h.resumeToken,u))}})),p.targetMismatches.forEach(((h,y)=>{const b=l.Ia.get(h);if(!b)return;l.Ia.set(h,b.withResumeToken(Ot.EMPTY_BYTE_STRING,b.snapshotVersion)),E1(l,h);const E=new ci(b.target,h,y,b.sequenceNumber);M_(l,E)})),l.remoteSyncer.applyRemoteEvent(p)})(s,t)}catch(r){de(jo,"Failed to raise snapshot:",r),await Sm(s,r)}}async function Sm(s,e,t){if(!Aa(e))throw e;s.Ea.add(1),await kc(s),s.Va.set("Offline"),t||(t=()=>d1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{de(jo,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await nh(s)}))}function w1(s,e){return e().catch((t=>Sm(s,t,e)))}async function Dc(s){const e=ve(s),t=Ea(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:da;for(;n4(e);)try{const a=await MM(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,r4(e,a)}catch(a){await Sm(e,a)}I1(e)&&S1(e)}function n4(s){return Ra(s)&&s.Ta.length<10}function r4(s,e){s.Ta.push(e);const t=Ea(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function I1(s){return Ra(s)&&!Ea(s).x_()&&s.Ta.length>0}function S1(s){Ea(s).start()}async function s4(s){Ea(s).ra()}async function i4(s){const e=Ea(s);for(const t of s.Ta)e.ea(t.mutations)}async function a4(s,e,t){const r=s.Ta.shift(),a=E_.from(r,e,t);await w1(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await Dc(s)}async function o4(s,e){e&&Ea(s).Y_&&await(async function(r,a){if((function(u){return CA(u)&&u!==$.ABORTED})(a.code)){const l=r.Ta.shift();Ea(r).B_(),await w1(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Dc(r)}})(s,e),I1(s)&&S1(s)}async function Cw(s,e){const t=ve(s);t.asyncQueue.verifyOperationInProgress(),de(jo,"RemoteStore received new credentials");const r=Ra(t);t.Ea.add(3),await kc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await nh(t)}async function v0(s,e){const t=ve(s);e?(t.Ea.delete(2),await nh(t)):e||(t.Ea.add(2),await kc(t),t.Va.set("Unknown"))}function Pc(s){return s.ma||(s.ma=(function(t,r,a){const l=ve(t);return l.sa(),new GM(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:JM.bind(null,s),Yo:ZM.bind(null,s),t_:e4.bind(null,s),J_:t4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),U_(s)?L_(s):s.Va.set("Unknown")):(await s.ma.stop(),T1(s))}))),s.ma}function Ea(s){return s.fa||(s.fa=(function(t,r,a){const l=ve(t);return l.sa(),new QM(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:s4.bind(null,s),t_:o4.bind(null,s),ta:i4.bind(null,s),na:a4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Dc(s)):(await s.fa.stop(),s.Ta.length>0&&(de(jo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class z_{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,p=new z_(e,t,u,a,l);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vc(s,e){if(Gt("AsyncQueue",`${e}: ${s}`),Aa(s))return new le($.UNAVAILABLE,`${e}: ${s}`);throw s}class Jl{static emptySet(e){return new Jl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Xu(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Jl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class kw{constructor(){this.ga=new bt(_e.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class _c{constructor(e,t,r,a,l,u,p,h,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=h,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach((p=>{u.push({type:0,doc:p})})),new _c(e,t,Jl.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class l4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class c4{constructor(){this.queries=Dw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=ve(t),l=a.queries;a.queries=Dw(),l.forEach(((u,p)=>{for(const h of p.ba)h.onError(r)}))})(this,new le($.ABORTED,"Firestore shutting down"))}}function Dw(){return new vi((s=>gA(s)),Wd)}async function B_(s,e){const t=ve(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(r=2):(l=new l4,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const p=Vc(u,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(p)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&F_(t)}async function q_(s,e){const t=ve(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function u4(s,e){const t=ve(s);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const p of u.ba)p.Fa(a)&&(r=!0);u.wa=a}}r&&F_(t)}function d4(s,e,t){const r=ve(s),a=r.queries.get(e);if(a)for(const l of a.ba)l.onError(t);r.queries.delete(e)}function F_(s){s.Ca.forEach((e=>{e.next()}))}var b0,Pw;(Pw=b0||(b0={})).Ma="default",Pw.Cache="cache";class H_{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new _c(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=_c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==b0.Cache}}class h4{constructor(e,t){this.qa=e,this.byteLength=t}Ua(){return"metadata"in this.qa}}class Vw{constructor(e){this.serializer=e}Ks(e){return Os(this.serializer,e)}qs(e){return e.metadata.exists?zA(this.serializer,e.document,!1):wt.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Qt(e)}}class f4{constructor(e,t){this.$a=e,this.serializer=t,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=A1(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const r=Ye.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new Vw(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.Ks(a.metadata.name);for(const u of a.metadata.queries){const p=(t.get(u)||Fe()).add(l);t.set(u,p)}}return t}async ja(e){const t=await LM(e,new Vw(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const a of this.Wa)await UM(e,a,r.get(a.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:t}}}function A1(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class N1{constructor(e){this.key=e}}class R1{constructor(e){this.key=e}}class C1{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Fe(),this.mutatedKeys=Fe(),this.eu=_A(e),this.tu=new Jl(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new kw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,p=!1;const h=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,E)=>{const T=a.get(b),R=Xd(this.query,E)?E:null,q=!!T&&this.mutatedKeys.has(T.key),U=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let W=!1;T&&R?T.data.isEqual(R.data)?q!==U&&(r.track({type:3,doc:R}),W=!0):this.su(T,R)||(r.track({type:2,doc:R}),W=!0,(h&&this.eu(R,h)>0||y&&this.eu(R,y)<0)&&(p=!0)):!T&&R?(r.track({type:0,doc:R}),W=!0):T&&!R&&(r.track({type:1,doc:T}),W=!0,(h||y)&&(p=!0)),W&&(R?(u=u.add(R),l=U?l.add(b):l.delete(b)):(u=u.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const b=this.query.limitType==="F"?u.last():u.first();u=u.delete(b.key),l=l.delete(b.key),r.track({type:1,doc:b})}return{tu:u,iu:r,Ss:p,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((b,E)=>(function(R,q){const U=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Vt:W})}};return U(R)-U(q)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(r),a=a??!1;const p=t&&!a?this._u():[],h=this.Ya.size===0&&this.current&&!a?1:0,y=h!==this.Xa;return this.Xa=h,u.length!==0||y?{snapshot:new _c(this.query,e.tu,l,u,e.mutatedKeys,h===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Fe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new R1(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new N1(r))})),t}cu(e){this.Za=e.ks,this.Ya=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return _c.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ca="SyncEngine";class m4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class p4{constructor(e){this.key=e,this.hu=!1}}class g4{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new vi((p=>gA(p)),Wd),this.Iu=new Map,this.Eu=new Set,this.Ru=new bt(_e.comparator),this.Au=new Map,this.Vu=new R_,this.du={},this.mu=new Map,this.fu=Vo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function y4(s,e,t=!0){const r=np(s);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await k1(r,e,t,!0),a}async function _4(s,e){const t=np(s);await k1(t,e,!0,!1)}async function k1(s,e,t,r){const a=await pc(s.localStore,Hn(e)),l=a.targetId,u=s.sharedClientState.addLocalQueryTarget(l,t);let p;return r&&(p=await G_(s,e,l,u==="current",a.resumeToken)),s.isPrimaryClient&&t&&tp(s.remoteStore,a),p}async function G_(s,e,t,r,a){s.pu=(E,T,R)=>(async function(U,W,S,J){let se=W.view.ru(S);se.Ss&&(se=await Tm(U.localStore,W.query,!1).then((({documents:A})=>W.view.ru(A,se))));const me=J&&J.targetChanges.get(W.targetId),re=J&&J.targetMismatches.get(W.targetId)!=null,ce=W.view.applyChanges(se,U.isPrimaryClient,me,re);return x0(U,W.targetId,ce.au),ce.snapshot})(s,E,T,R);const l=await Tm(s.localStore,e,!0),u=new C1(e,l.ks),p=u.ru(l.documents),h=eh.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),y=u.applyChanges(p,s.isPrimaryClient,h);x0(s,t,y.au);const b=new m4(e,t,u);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function v4(s,e,t){const r=ve(s),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((u=>!Wd(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await gc(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&yc(r.remoteStore,a.targetId),vc(r,a.targetId)})).catch(Sa)):(vc(r,a.targetId),await gc(r.localStore,a.targetId,!0))}async function b4(s,e){const t=ve(s),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),yc(t.remoteStore,r.targetId))}async function x4(s,e,t){const r=Y_(s);try{const a=await(function(u,p){const h=ve(u),y=lt.now(),b=p.reduce(((R,q)=>R.add(q.key)),Fe());let E,T;return h.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let q=ir(),U=Fe();return h.xs.getEntries(R,b).next((W=>{q=W,q.forEach(((S,J)=>{J.isValidDocument()||(U=U.add(S))}))})).next((()=>h.localDocuments.getOverlayedDocuments(R,q))).next((W=>{E=W;const S=[];for(const J of p){const se=qO(J,E.get(J.key).overlayedDocument);se!=null&&S.push(new bi(J.key,se,oA(se.value.mapValue),Ct.exists(!0)))}return h.mutationQueue.addMutationBatch(R,y,S,p)})).next((W=>{T=W;const S=W.applyToLocalDocumentSet(E,U);return h.documentOverlayCache.saveOverlays(R,W.batchId,S)}))})).then((()=>({batchId:T.batchId,changes:bA(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,p,h){let y=u.du[u.currentUser.toKey()];y||(y=new bt(Pe)),y=y.insert(p,h),u.du[u.currentUser.toKey()]=y})(r,a.batchId,t),await xi(r,a.changes),await Dc(r.remoteStore)}catch(a){const l=Vc(a,"Failed to persist write");t.reject(l)}}async function D1(s,e){const t=ve(s);try{const r=await OM(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(Ie(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Ie(u.hu,14607):a.removedDocuments.size>0&&(Ie(u.hu,42227),u.hu=!1))})),await xi(t,r,e)}catch(r){await Sa(r)}}function jw(s,e,t){const r=ve(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,u)=>{const p=u.view.va(e);p.snapshot&&a.push(p.snapshot)})),(function(u,p){const h=ve(u);h.onlineState=p;let y=!1;h.queries.forEach(((b,E)=>{for(const T of E.ba)T.va(p)&&(y=!0)})),y&&F_(h)})(r.eventManager,e),a.length&&r.Pu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E4(s,e,t){const r=ve(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let u=new bt(_e.comparator);u=u.insert(l,wt.newNoDocument(l,Ne.min()));const p=Fe().add(l),h=new Zd(Ne.min(),new Map,new bt(Pe),u,p);await D1(r,h),r.Ru=r.Ru.remove(l),r.Au.delete(e),$_(r)}else await gc(r.localStore,e,!1).then((()=>vc(r,e,t))).catch(Sa)}async function T4(s,e){const t=ve(s),r=e.batch.batchId;try{const a=await jM(t.localStore,e);K_(t,r,null),Q_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await xi(t,a)}catch(a){await Sa(a)}}async function w4(s,e,t){const r=ve(s);try{const a=await(function(u,p){const h=ve(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return h.mutationQueue.lookupMutationBatch(y,p).next((E=>(Ie(E!==null,37113),b=E.keys(),h.mutationQueue.removeMutationBatch(y,E)))).next((()=>h.mutationQueue.performConsistencyCheck(y))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>h.localDocuments.getDocuments(y,b)))}))})(r.localStore,e);K_(r,e,t),Q_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await xi(r,a)}catch(a){await Sa(a)}}async function I4(s,e){const t=ve(s);Ra(t.remoteStore)||de(Ca,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(u){const p=ve(u);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(h=>p.mutationQueue.getHighestUnacknowledgedBatchId(h)))})(t.localStore);if(r===da)return void e.resolve();const a=t.mu.get(r)||[];a.push(e),t.mu.set(r,a)}catch(r){const a=Vc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function Q_(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function K_(s,e,t){const r=ve(s);let a=r.du[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.du[r.currentUser.toKey()]=a}}function vc(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||P1(s,r)}))}function P1(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(yc(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),$_(s))}function x0(s,e,t){for(const r of t)r instanceof N1?(s.Vu.addReference(r.key,e),S4(s,r)):r instanceof R1?(de(Ca,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||P1(s,r.key)):xe(19791,{wu:r})}function S4(s,e){const t=e.key,r=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(r)||(de(Ca,"New document in limbo: "+t),s.Eu.add(r),$_(s))}function $_(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new _e(Ye.fromString(e)),r=s.fu.next();s.Au.set(r,new p4(t)),s.Ru=s.Ru.insert(t,r),tp(s.remoteStore,new ci(Hn(Nc(t.path)),r,"TargetPurposeLimboResolution",rr.ce))}}async function xi(s,e,t){const r=ve(s),a=[],l=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,h)=>{u.push(r.pu(h,e,t).then((y=>{if((y||t)&&r.isPrimaryClient){const b=y?!y.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,b?"current":"not-current")}if(y){a.push(y);const b=P_.Es(h.targetId,y);l.push(b)}})))})),await Promise.all(u),r.Pu.J_(a),await(async function(h,y){const b=ve(h);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>z.forEach(y,(T=>z.forEach(T.Ts,(R=>b.persistence.referenceDelegate.addReference(E,T.targetId,R))).next((()=>z.forEach(T.Is,(R=>b.persistence.referenceDelegate.removeReference(E,T.targetId,R)))))))))}catch(E){if(!Aa(E))throw E;de(V_,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const R=b.vs.get(T),q=R.snapshotVersion,U=R.withLastLimboFreeSnapshotVersion(q);b.vs=b.vs.insert(T,U)}}})(r.localStore,l))}async function A4(s,e){const t=ve(s);if(!t.currentUser.isEqual(e)){de(Ca,"User change. New user:",e.toKey());const r=await u1(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((p=>{p.forEach((h=>{h.reject(new le($.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xi(t,r.Ns)}}function N4(s,e){const t=ve(s),r=t.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let a=Fe();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const p=t.Tu.get(u);a=a.unionWith(p.view.nu)}return a}}async function R4(s,e){const t=ve(s),r=await Tm(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&x0(t,e.targetId,a.au),a}async function C4(s,e){const t=ve(s);return m1(t.localStore,e).then((r=>xi(t,r)))}async function k4(s,e,t,r){const a=ve(s),l=await(function(p,h){const y=ve(p),b=ve(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",(E=>b.Xn(E,h).next((T=>T?y.localDocuments.getDocuments(E,T):z.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Dc(a.remoteStore):t==="acknowledged"||t==="rejected"?(K_(a,e,r||null),Q_(a,e),(function(p,h){ve(ve(p).mutationQueue).nr(h)})(a.localStore,e)):xe(6720,"Unknown batchState",{bu:t}),await xi(a,l)):de(Ca,"Cannot apply mutation batch with id: "+e)}async function D4(s,e){const t=ve(s);if(np(t),Y_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await Ow(t,r.toArray());t.gu=!0,await v0(t.remoteStore,!0);for(const l of a)tp(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then((()=>(vc(t,u),gc(t.localStore,u,!0)))),yc(t.remoteStore,u)})),await a,await Ow(t,r),(function(u){const p=ve(u);p.Au.forEach(((h,y)=>{yc(p.remoteStore,y)})),p.Vu.zr(),p.Au=new Map,p.Ru=new bt(_e.comparator)})(t),t.gu=!1,await v0(t.remoteStore,!1)}}async function Ow(s,e,t){const r=ve(s),a=[],l=[];for(const u of e){let p;const h=r.Iu.get(u);if(h&&h.length!==0){p=await pc(r.localStore,Hn(h[0]));for(const y of h){const b=r.Tu.get(y),E=await R4(r,b);E.snapshot&&l.push(E.snapshot)}}else{const y=await f1(r.localStore,u);p=await pc(r.localStore,y),await G_(r,V1(y),u,!1,p.resumeToken)}a.push(p)}return r.Pu.J_(l),a}function V1(s){return pA(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function P4(s){return(function(t){return ve(ve(t).persistence).hs()})(ve(s).localStore)}async function V4(s,e,t,r){const a=ve(s);if(a.gu)return void de(Ca,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await m1(a.localStore,yA(l[0])),p=Zd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ot.EMPTY_BYTE_STRING);await xi(a,u,p);break}case"rejected":await gc(a.localStore,e,!0),vc(a,e,r);break;default:xe(64155,t)}}async function j4(s,e,t){const r=np(s);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){de(Ca,"Adding an already active target "+a);continue}const l=await f1(r.localStore,a),u=await pc(r.localStore,l);await G_(r,V1(l),u.targetId,!1,u.resumeToken),tp(r.remoteStore,u)}for(const a of t)r.Iu.has(a)&&await gc(r.localStore,a,!1).then((()=>{yc(r.remoteStore,a),vc(r,a)})).catch(Sa)}}function np(s){const e=ve(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=D1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E4.bind(null,e),e.Pu.J_=u4.bind(null,e.eventManager),e.Pu.yu=d4.bind(null,e.eventManager),e}function Y_(s){const e=ve(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w4.bind(null,e),e}function O4(s,e,t){const r=ve(s);(async function(l,u,p){try{const h=await u.getMetadata();if(await(function(R,q){const U=ve(R),W=Qt(q.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",(S=>U.Pi.getBundleMetadata(S,q.id))).then((S=>!!S&&S.createTime.compareTo(W)>=0))})(l.localStore,h))return await u.close(),p._completeWith((function(R){return{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}})(h)),Promise.resolve(new Set);p._updateProgress(A1(h));const y=new f4(h,u.serializer);let b=await u.Su();for(;b;){const T=await y.Ga(b);T&&p._updateProgress(T),b=await u.Su()}const E=await y.ja(l.localStore);return await xi(l,E.Ja,void 0),await(function(R,q){const U=ve(R);return U.persistence.runTransaction("Save bundle","readwrite",(W=>U.Pi.saveBundleMetadata(W,q)))})(l.localStore,h),p._completeWith(E.progress),Promise.resolve(E.Ha)}catch(h){return zs(Ca,`Loading bundle failed with ${h}`),p._failWith(h),Promise.resolve(new Set)}})(r,e,t).then((a=>{r.sharedClientState.notifyBundleLoaded(a)}))}class Vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=th(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return c1(this.persistence,new l1,e.initialUser,this.serializer)}Cu(e){return new C_(ep.Vi,this.serializer)}Du(e){return new v1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vd.provider={build:()=>new Vd};class M4 extends Vd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ie(this.persistence.referenceDelegate instanceof Em,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new n1(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new C_((r=>Em.Vi(r,t)),this.serializer)}}class j1 extends Vd{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Y_(this.xu.syncEngine),await Dc(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return c1(this.persistence,new l1,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new n1(r,e.asyncQueue,t)}Mu(e,t){const r=new zj(t,this.persistence);return new Uj(e.asyncQueue,r)}Cu(e){const t=D_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new k_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,b1(),nm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new v1}}class L4 extends j1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Dy&&(this.sharedClientState.syncEngine={So:k4.bind(null,t),Do:V4.bind(null,t),Co:j4.bind(null,t),hs:P4.bind(null,t),bo:C4.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await D4(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=b1();if(!Dy.v(t))throw new le($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=D_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dy(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class jd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=A4.bind(null,this.syncEngine),await v0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new c4})()}createDatastore(e){const t=th(e.databaseInfo.databaseId),r=HM(e.databaseInfo);return YM(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,u,p){return new XM(r,a,l,u,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>jw(this.syncEngine,t,0)),(function(){return Nw.v()?new Nw:new zM})())}createSyncEngine(e,t){return(function(a,l,u,p,h,y,b){const E=new g4(a,l,u,p,h,y);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ve(t);de(jo,"RemoteStore shutting down."),r.Ea.add(5),await kc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jd.provider={build:()=>new jd};function Mw(s,e=10240){let t=0;return{async read(){if(t<s.byteLength){const r={value:s.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class rp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class U4{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new An,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);const a=await this.Uu(r);return new h4(JSON.parse(a),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}let z4=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new le($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const u=ve(a),p={documents:l.map((E=>Dd(u.serializer,E)))},h=await u.jo("BatchGetDocuments",u.serializer.databaseId,Ye.emptyPath(),p,l.length),y=new Map;h.forEach((E=>{const T=XO(u.serializer,E);y.set(T.key.toString(),T)}));const b=[];return l.forEach((E=>{const T=y.get(E.toString());Ie(!!T,55234,{key:E}),b.push(T)})),b})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const a=_e.fromPath(r);this.mutations.push(new b_(a,this.precondition(a)))})),await(async function(r,a){const l=ve(r),u={writes:a.map((p=>Pd(l.serializer,p)))};await l.Wo("Commit",l.serializer.databaseId,Ye.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xe(50498,{Gu:e.constructor.name});t=Ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new le($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ne.min())?Ct.exists(!1):Ct.updateTime(t):Ct.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ne.min()))throw new le($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ct.updateTime(t)}return Ct.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class B4{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.zu=r.maxAttempts,this.M_=new O_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new z4(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((a=>{this.Zu(a)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!Kd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!CA(t)}return!1}}const Ta="FirestoreClient";class q4{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=a,this.user=pn.UNAUTHENTICATED,this.clientId=a_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{de(Ta,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(de(Ta,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Vc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Vy(s,e){s.asyncQueue.verifyOperationInProgress(),de(Ta,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async a=>{r.isEqual(a)||(await u1(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Lw(s,e){s.asyncQueue.verifyOperationInProgress();const t=await W_(s);de(Ta,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>Cw(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,a)=>Cw(e.remoteStore,a))),s._onlineComponents=e}async function W_(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){de(Ta,"Using user provided OfflineComponentProvider");try{await Vy(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===$.FAILED_PRECONDITION||a.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;zs("Error using user provided cache. Falling back to memory cache: "+t),await Vy(s,new Vd)}}else de(Ta,"Using default OfflineComponentProvider"),await Vy(s,new M4(void 0));return s._offlineComponents}async function sp(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(de(Ta,"Using user provided OnlineComponentProvider"),await Lw(s,s._uninitializedComponentsProvider._online)):(de(Ta,"Using default OnlineComponentProvider"),await Lw(s,new jd))),s._onlineComponents}function O1(s){return W_(s).then((e=>e.persistence))}function X_(s){return W_(s).then((e=>e.localStore))}function M1(s){return sp(s).then((e=>e.remoteStore))}function J_(s){return sp(s).then((e=>e.syncEngine))}function F4(s){return sp(s).then((e=>e.datastore))}async function bc(s){const e=await sp(s),t=e.eventManager;return t.onListen=y4.bind(null,e.syncEngine),t.onUnlisten=v4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=b4.bind(null,e.syncEngine),t}function H4(s){return s.asyncQueue.enqueue((async()=>{const e=await O1(s),t=await M1(s);return e.setNetworkEnabled(!0),(function(a){const l=ve(a);return l.Ea.delete(0),nh(l)})(t)}))}function G4(s){return s.asyncQueue.enqueue((async()=>{const e=await O1(s),t=await M1(s);return e.setNetworkEnabled(!1),(async function(a){const l=ve(a);l.Ea.add(0),await kc(l),l.Va.set("Offline")})(t)}))}function Q4(s,e,t,r){const a=new rp(r),l=new H_(e,a,t);return s.asyncQueue.enqueueAndForget((async()=>B_(await bc(s),l))),()=>{a.Nu(),s.asyncQueue.enqueueAndForget((async()=>q_(await bc(s),l)))}}function K4(s,e){const t=new An;return s.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const p=await(function(y,b){const E=ve(y);return E.persistence.runTransaction("read document","readonly",(T=>E.localDocuments.getDocument(T,b)))})(a,l);p.isFoundDocument()?u.resolve(p):p.isNoDocument()?u.resolve(null):u.reject(new le($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const h=Vc(p,`Failed to get document '${l} from cache`);u.reject(h)}})(await X_(s),e,t))),t.promise}function L1(s,e,t={}){const r=new An;return s.asyncQueue.enqueueAndForget((async()=>(function(l,u,p,h,y){const b=new rp({next:T=>{b.Nu(),u.enqueueAndForget((()=>q_(l,E)));const R=T.docs.has(p);!R&&T.fromCache?y.reject(new le($.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&h&&h.source==="server"?y.reject(new le($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new H_(Nc(p.path),b,{includeMetadataChanges:!0,Ka:!0});return B_(l,E)})(await bc(s),s.asyncQueue,e,t,r))),r.promise}function $4(s,e){const t=new An;return s.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const p=await Tm(a,l,!0),h=new C1(l,p.ks),y=h.ru(p.documents),b=h.applyChanges(y,!1);u.resolve(b.snapshot)}catch(p){const h=Vc(p,`Failed to execute query '${l} against cache`);u.reject(h)}})(await X_(s),e,t))),t.promise}function U1(s,e,t={}){const r=new An;return s.asyncQueue.enqueueAndForget((async()=>(function(l,u,p,h,y){const b=new rp({next:T=>{b.Nu(),u.enqueueAndForget((()=>q_(l,E))),T.fromCache&&h.source==="server"?y.reject(new le($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new H_(p,b,{includeMetadataChanges:!0,Ka:!0});return B_(l,E)})(await bc(s),s.asyncQueue,e,t,r))),r.promise}function Y4(s,e){const t=new An;return s.asyncQueue.enqueueAndForget((async()=>x4(await J_(s),e,t))),t.promise}function W4(s,e){const t=new rp(e);return s.asyncQueue.enqueueAndForget((async()=>(function(a,l){ve(a).Ca.add(l),l.next()})(await bc(s),t))),()=>{t.Nu(),s.asyncQueue.enqueueAndForget((async()=>(function(a,l){ve(a).Ca.delete(l)})(await bc(s),t)))}}function X4(s,e,t){const r=new An;return s.asyncQueue.enqueueAndForget((async()=>{const a=await F4(s);new B4(s.asyncQueue,a,t,e,r).ju()})),r.promise}function J4(s,e,t,r){const a=(function(u,p){let h;return h=typeof u=="string"?DA().encode(u):u,(function(b,E){return new U4(b,E)})((function(b,E){if(b instanceof Uint8Array)return Mw(b,E);if(b instanceof ArrayBuffer)return Mw(new Uint8Array(b),E);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(h),p)})(t,th(e));s.asyncQueue.enqueueAndForget((async()=>{O4(await J_(s),a,r)}))}function Z4(s,e){return s.asyncQueue.enqueue((async()=>(function(r,a){const l=ve(r);return l.persistence.runTransaction("Get named query","readonly",(u=>l.Pi.getNamedQuery(u,a)))})(await X_(s),e)))}function z1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const e6="ComponentProvider",Uw=new Map;function t6(s,e,t,r,a){return new pO(s,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,z1(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,r)}const B1="firestore.googleapis.com",zw=!0;class Bw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=B1,this.ssl=zw}else this.host=e.host,this.ssl=e.ssl??zw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gM)throw new le($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=z1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Aj;switch(r.type){case"firstParty":return new kj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Uw.get(t);r&&(de(e6,"Removing Datastore"),Uw.delete(t),r.terminate())})(this),Promise.resolve()}}function n6(s,e,t,r={}){s=it(s,rh);const a=Ec(e),l=s._getSettings(),u={...l,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${t}`;a&&(iI(`https://${p}`),aI("Firestore",!0)),l.host!==B1&&l.host!==p&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...l,host:p,ssl:a,emulatorOptions:r};if(!fa(h,u)&&(s._setSettings(h),r.mockUserToken)){let y,b;if(typeof r.mockUserToken=="string")y=r.mockUserToken,b=pn.MOCK_USER;else{y=FC(r.mockUserToken,s._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new le($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new pn(E)}s._authCredentials=new Nj(new kS(y,b))}}let Gn=class q1{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new q1(this.firestore,e,this._query)}},vt=class ed{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ed(this.firestore,e,this._key)}toJSON(){return{type:ed._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Qd(t,ed._jsonSchema))return new ed(e,r||null,new _e(Ye.fromString(t.referencePath)))}};vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:an("string",vt._jsonSchemaVersion),referencePath:an("string")};let ha=class F1 extends Gn{constructor(e,t,r){super(e,t,Nc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new _e(e))}withConverter(e){return new F1(this.firestore,e,this._path)}};function H1(s,e,...t){if(s=ke(s),o_("collection","path",e),s instanceof rh){const r=Ye.fromString(e,...t);return RT(r),new ha(s,null,r)}{if(!(s instanceof vt||s instanceof ha))throw new le($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ye.fromString(e,...t));return RT(r),new ha(s.firestore,null,r)}}function r6(s,e){if(s=it(s,rh),o_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new le($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gn(s,null,(function(r){return new _i(Ye.emptyPath(),r)})(e))}function Am(s,e,...t){if(s=ke(s),arguments.length===1&&(e=a_.newId()),o_("doc","path",e),s instanceof rh){const r=Ye.fromString(e,...t);return NT(r),new vt(s,null,new _e(r))}{if(!(s instanceof vt||s instanceof ha))throw new le($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Ye.fromString(e,...t));return NT(r),new vt(s.firestore,s instanceof ha?s.converter:null,new _e(r))}}function G1(s,e){return s=ke(s),e=ke(e),(s instanceof vt||s instanceof ha)&&(e instanceof vt||e instanceof ha)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function Q1(s,e){return s=ke(s),e=ke(e),s instanceof Gn&&e instanceof Gn&&s.firestore===e.firestore&&Wd(s._query,e._query)&&s.converter===e.converter}const qw="AsyncQueue";class Fw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new O_(this,"async_queue_retry"),this._c=()=>{const r=nm();r&&de(qw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=nm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=nm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new An;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Aa(e))throw e;de(qw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Gt("INTERNAL UNHANDLED ERROR: ",Hw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=z_.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&xe(47125,{Pc:Hw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Hw(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class s6{constructor(){this._progressObserver={},this._taskCompletionResolver=new An,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const i6=-1;let Kt=class extends rh{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new Fw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fw(e),this._firestoreClient=void 0,await e}}};function Mn(s){if(s._terminated)throw new le($.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||K1(s),s._firestoreClient}function K1(s){const e=s._freezeSettings(),t=t6(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new q4(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}function a6(s,e){zs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();return $1(s,jd.provider,{build:r=>new j1(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function o6(s){zs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();$1(s,jd.provider,{build:t=>new L4(t,e.cacheSizeBytes)})}function $1(s,e,t){if((s=it(s,Kt))._firestoreClient||s._terminated)throw new le($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new le($.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:e,_offline:t},K1(s)}function l6(s){if(s._initialized&&!s._terminated)throw new le($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new An;return s._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!js.v())return Promise.resolve();const a=r+o1;await js.delete(a)})(D_(s._databaseId,s._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function c6(s){return(function(t){const r=new An;return t.asyncQueue.enqueueAndForget((async()=>I4(await J_(t),r))),r.promise})(Mn(s=it(s,Kt)))}function u6(s){return H4(Mn(s=it(s,Kt)))}function d6(s){return G4(Mn(s=it(s,Kt)))}function h6(s,e){const t=Mn(s=it(s,Kt)),r=new s6;return J4(t,s._databaseId,e,r),r}function f6(s,e){return Z4(Mn(s=it(s,Kt)),e).then((t=>t?new Gn(s,null,t.query):null))}class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(Ot.fromBase64String(e))}catch(t){throw new le($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jn(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qd(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:an("string",jn._jsonSchemaVersion),bytes:an("string")};let Oo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};let Bo=class{constructor(e){this._methodName=e}};class Zr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zr._jsonSchemaVersion}}static fromJSON(e){if(Qd(e,Zr._jsonSchema))return new Zr(e.latitude,e.longitude)}}Zr._jsonSchemaVersion="firestore/geoPoint/1.0",Zr._jsonSchema={type:an("string",Zr._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};class es{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qd(e,es._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new es(e.vectorValues);throw new le($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}es._jsonSchemaVersion="firestore/vectorValue/1.0",es._jsonSchema={type:an("string",es._jsonSchemaVersion),vectorValues:an("object")};const m6=/^__.*__$/;class p6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rc(e,this.data,t,this.fieldTransforms)}}class Y1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new bi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function W1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{dataSource:s})}}class ip{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ip({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Nm(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(W1(this.dataSource)&&m6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class g6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||th(e)}createContext(e,t,r,a=!1){return new ip({dataSource:e,methodName:t,targetDoc:r,path:Rt.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qo(s){const e=s._freezeSettings(),t=th(s._databaseId);return new g6(s._databaseId,!!e.ignoreUndefinedProperties,t)}function ap(s,e,t,r,a,l={}){const u=s.createContext(l.merge||l.mergeFields?2:0,e,t,a);iv("Data must be an object, but it was:",u,r);const p=Z1(r,u);let h,y;if(l.merge)h=new sr(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const b=[];for(const E of l.mergeFields){const T=Mo(e,E,t);if(!u.contains(T))throw new le($.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);nN(b,T)||b.push(T)}h=new sr(b),y=u.fieldTransforms.filter((E=>h.covers(E.field)))}else h=null,y=u.fieldTransforms;return new p6(new Sn(p),h,y)}class sh extends Bo{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sh}}function X1(s,e,t){return new ip({dataSource:3,targetDoc:e.settings.targetDoc,methodName:s._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Z_ extends Bo{_toFieldTransform(e){return new Jd(e.path,new hc)}isEqual(e){return e instanceof Z_}}class ev extends Bo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=X1(this,e,!0),r=this.Ac.map((l=>Fo(l,t))),a=new Co(r);return new Jd(e.path,a)}isEqual(e){return e instanceof ev&&fa(this.Ac,e.Ac)}}class tv extends Bo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=X1(this,e,!0),r=this.Ac.map((l=>Fo(l,t))),a=new ko(r);return new Jd(e.path,a)}isEqual(e){return e instanceof tv&&fa(this.Ac,e.Ac)}}class nv extends Bo{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new fc(e.serializer,TA(e.serializer,this.Vc));return new Jd(e.path,t)}isEqual(e){return e instanceof nv&&this.Vc===e.Vc}}function rv(s,e,t,r){const a=s.createContext(1,e,t);iv("Data must be an object, but it was:",a,r);const l=[],u=Sn.empty();Na(r,((h,y)=>{const b=tN(e,h,t);y=ke(y);const E=a.childContextForFieldPath(b);if(y instanceof sh)l.push(b);else{const T=Fo(y,E);T!=null&&(l.push(b),u.set(b,T))}}));const p=new sr(l);return new Y1(u,p,a.fieldTransforms)}function sv(s,e,t,r,a,l){const u=s.createContext(1,e,t),p=[Mo(e,r,t)],h=[a];if(l.length%2!=0)throw new le($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)p.push(Mo(e,l[T])),h.push(l[T+1]);const y=[],b=Sn.empty();for(let T=p.length-1;T>=0;--T)if(!nN(y,p[T])){const R=p[T];let q=h[T];q=ke(q);const U=u.childContextForFieldPath(R);if(q instanceof sh)y.push(R);else{const W=Fo(q,U);W!=null&&(y.push(R),b.set(R,W))}}const E=new sr(y);return new Y1(b,E,u.fieldTransforms)}function J1(s,e,t,r=!1){return Fo(t,s.createContext(r?4:3,e))}function Fo(s,e){if(eN(s=ke(s)))return iv("Unsupported field value:",e,s),Z1(s,e);if(s instanceof Bo)return(function(r,a){if(!W1(a.dataSource))throw a.createError(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const p of r){let h=Fo(p,a.childContextForArray(u));h==null&&(h={nullValue:"NULL_VALUE"}),l.push(h),u++}return{arrayValue:{values:l}}})(s,e)}return(function(r,a){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TA(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=lt.fromDate(r);return{timestampValue:mc(a.serializer,l)}}if(r instanceof lt){const l=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mc(a.serializer,l)}}if(r instanceof Zr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:jA(a.serializer,r._byteString)};if(r instanceof vt){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:I_(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof es)return(function(u,p){const h=u instanceof es?u.toArray():u;return{mapValue:{fields:{[m_]:{stringValue:p_},[cc]:{arrayValue:{values:h.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return v_(p.serializer,b)}))}}}}}})(r,a);if(KA(r))return r._toProto(a.serializer);throw a.createError(`Unsupported field value: ${qm(r)}`)})(s,e)}function Z1(s,e){const t={};return JS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Na(s,((r,a)=>{const l=Fo(a,e.childContextForField(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function eN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof lt||s instanceof Zr||s instanceof jn||s instanceof vt||s instanceof Bo||s instanceof es||KA(s))}function iv(s,e,t){if(!eN(t)||!VS(t)){const r=qm(t);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function Mo(s,e,t){if((e=ke(e))instanceof Oo)return e._internalPath;if(typeof e=="string")return tN(s,e);throw Nm("Field path arguments must be of type string or ",s,!1,void 0,t)}const y6=new RegExp("[~\\*/\\[\\]]");function tN(s,e,t){if(e.search(y6)>=0)throw Nm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Oo(...e.split("."))._internalPath}catch{throw Nm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Nm(s,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let h="";return(l||u)&&(h+=" (found",l&&(h+=` in field ${r}`),u&&(h+=` in document ${a}`),h+=")"),new le($.INVALID_ARGUMENT,p+s+h)}function nN(s,e){return s.some((t=>t.isEqual(e)))}class av{convertValue(e,t="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Na(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[cc].arrayValue?.values?.map((r=>At(r.doubleValue)));return new es(t)}convertGeoPoint(e){return new Zr(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$m(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nd(e));default:return null}}convertTimestamp(e){const t=mi(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ye.fromString(e);Ie(QA(r),9688,{name:e});const a=new _a(r.get(1),r.get(3)),l=new _e(r.popFirst(5));return a.isEqual(t)||Gt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class Ho extends av{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}}function _6(){return new sh("deleteField")}function v6(){return new Z_("serverTimestamp")}function b6(...s){return new ev("arrayUnion",s)}function x6(...s){return new tv("arrayRemove",s)}function E6(s){return new nv("increment",s)}const Gw="@firebase/firestore",Qw="4.10.0";function E0(s){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(s,["next","error","complete"])}class Od{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Mo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class T6 extends Od{data(){return super.data()}}function rN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new le($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ov{}class ih extends ov{}function ra(s,e,...t){let r=[];e instanceof ov&&r.push(e),r=r.concat(t),(function(l){const u=l.filter((h=>h instanceof lv)).length,p=l.filter((h=>h instanceof op)).length;if(u>1||u>0&&p>0)throw new le($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)s=a._apply(s);return s}class op extends ih{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new op(e,t,r)}_apply(e){const t=this._parse(e);return iN(e._query,t),new Gn(e.firestore,e.converter,c0(e._query,t))}_parse(e){const t=qo(e.firestore);return(function(l,u,p,h,y,b,E){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new le($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){$w(E,b);const q=[];for(const U of E)q.push(Kw(h,l,U));T={arrayValue:{values:q}}}else T=Kw(h,l,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||$w(E,b),T=J1(p,u,E,b==="in"||b==="not-in");return Ze.create(y,b,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function w6(s,e,t){const r=e,a=Mo("where",s);return op._create(a,r,t)}class lv extends ov{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ht.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const p=l.getFlattenedFilters();for(const h of p)iN(u,h),u=c0(u,h)})(e._query,t),new Gn(e.firestore,e.converter,c0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cv extends ih{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cv(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new le($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new le($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kd(l,u)})(e._query,this._field,this._direction);return new Gn(e.firestore,e.converter,RO(e._query,t))}}function I6(s,e="asc"){const t=e,r=Mo("orderBy",s);return cv._create(r,t)}class lp extends ih{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new lp(e,t,r)}_apply(e){return new Gn(e.firestore,e.converter,_m(e._query,this._limit,this._limitType))}}function S6(s){return jS("limit",s),lp._create("limit",s,"F")}function A6(s){return jS("limitToLast",s),lp._create("limitToLast",s,"L")}class cp extends ih{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new cp(e,t,r)}_apply(e){const t=sN(e,this.type,this._docOrFields,this._inclusive);return new Gn(e.firestore,e.converter,CO(e._query,t))}}function N6(...s){return cp._create("startAt",s,!0)}function R6(...s){return cp._create("startAfter",s,!1)}class up extends ih{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new up(e,t,r)}_apply(e){const t=sN(e,this.type,this._docOrFields,this._inclusive);return new Gn(e.firestore,e.converter,kO(e._query,t))}}function C6(...s){return up._create("endBefore",s,!1)}function k6(...s){return up._create("endAt",s,!0)}function sN(s,e,t,r){if(t[0]=ke(t[0]),t[0]instanceof Od)return(function(l,u,p,h,y){if(!h)throw new le($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const b=[];for(const E of Wl(l))if(E.field.isKeyField())b.push(No(u,h.key));else{const T=h.data.field(E.field);if(Km(T))throw new le($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const R=E.field.canonicalString();throw new le($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}b.push(T)}return new xa(b,y)})(s._query,s.firestore._databaseId,e,t[0]._document,r);{const a=qo(s.firestore);return(function(u,p,h,y,b,E){const T=u.explicitOrderBy;if(b.length>T.length)throw new le($.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let q=0;q<b.length;q++){const U=b[q];if(T[q].field.isKeyField()){if(typeof U!="string")throw new le($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof U}`);if(!y_(u)&&U.indexOf("/")!==-1)throw new le($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${U}' contains a slash.`);const W=u.path.child(Ye.fromString(U));if(!_e.isDocumentKey(W))throw new le($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${W}' is not because it contains an odd number of segments.`);const S=new _e(W);R.push(No(p,S))}else{const W=J1(h,y,U);R.push(W)}}return new xa(R,E)})(s._query,s.firestore._databaseId,a,e,t,r)}}function Kw(s,e,t){if(typeof(t=ke(t))=="string"){if(t==="")throw new le($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y_(e)&&t.indexOf("/")!==-1)throw new le($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ye.fromString(t));if(!_e.isDocumentKey(r))throw new le($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return No(s,new _e(r))}if(t instanceof vt)return No(s,t._key);throw new le($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qm(t)}.`)}function $w(s,e){if(!Array.isArray(s)||s.length===0)throw new le($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iN(s,e){const t=(function(a,l){for(const u of a)for(const p of u.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function dp(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class D6 extends av{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}}class vo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Or=class aN extends Od{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Mo("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=aN._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Or._jsonSchemaVersion="firestore/documentSnapshot/1.0",Or._jsonSchema={type:an("string",Or._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};let pd=class extends Or{data(e={}){return super.data(e)}},ts=class oN{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new vo(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new pd(this._firestore,this._userDataWriter,r.key,r,new vo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((p=>{const h=new pd(a._firestore,a._userDataWriter,p.doc.key,p.doc,new vo(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);return p.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const h=new pd(a._firestore,a._userDataWriter,p.doc.key,p.doc,new vo(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,b=-1;return p.type!==0&&(y=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),b=u.indexOf(p.doc.key)),{type:P6(p.type),doc:h,oldIndex:y,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=oN._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=a_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function P6(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:s})}}function lN(s,e){return s instanceof Or&&e instanceof Or?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(s._document===null?e._document===null:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof ts&&e instanceof ts&&s._firestore===e._firestore&&Q1(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}ts._jsonSchemaVersion="firestore/querySnapshot/1.0",ts._jsonSchema={type:an("string",ts._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};const V6={maxAttempts:5};let j6=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qo(e)}set(e,t,r){this._verifyNotCommitted();const a=oa(e,this._firestore),l=dp(a.converter,t,r),u=ap(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(u.toMutation(a._key,Ct.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=oa(e,this._firestore);let u;return u=typeof(t=ke(t))=="string"||t instanceof Oo?sv(this._dataReader,"WriteBatch.update",l._key,t,r,a):rv(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Ct.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=oa(e,this._firestore);return this._mutations=this._mutations.concat(new Cc(t._key,Ct.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function oa(s,e){if((s=ke(s)).firestore!==e)throw new le($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class O6{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qo(e)}get(e){const t=oa(e,this._firestore),r=new D6(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return xe(24041);const l=a[0];if(l.isFoundDocument())return new Od(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Od(this._firestore,r,t._key,null,t.converter);throw xe(18433,{doc:l})}))}set(e,t,r){const a=oa(e,this._firestore),l=dp(a.converter,t,r),u=ap(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,u),this}update(e,t,r,...a){const l=oa(e,this._firestore);let u;return u=typeof(t=ke(t))=="string"||t instanceof Oo?sv(this._dataReader,"Transaction.update",l._key,t,r,a):rv(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=oa(e,this._firestore);return this._transaction.delete(t._key),this}}let M6=class extends O6{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=oa(e,this._firestore),r=new Ho(this._firestore);return super.get(e).then((a=>new Or(this._firestore,r,t._key,a._document,new vo(!1,!1),t.converter)))}};function L6(s,e,t){s=it(s,Kt);const r={...V6,...t};(function(u){if(u.maxAttempts<1)throw new le($.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const a=Mn(s);return X4(a,(l=>e(new M6(s,l))),r)}function U6(s){s=it(s,vt);const e=it(s.firestore,Kt),t=Mn(e);return L1(t,s._key).then((r=>uv(e,s,r)))}function z6(s){s=it(s,vt);const e=it(s.firestore,Kt),t=Mn(e),r=new Ho(e);return K4(t,s._key).then((a=>new Or(e,r,s._key,a,new vo(a!==null&&a.hasLocalMutations,!0),s.converter)))}function B6(s){s=it(s,vt);const e=it(s.firestore,Kt),t=Mn(e);return L1(t,s._key,{source:"server"}).then((r=>uv(e,s,r)))}function q6(s){s=it(s,Gn);const e=it(s.firestore,Kt),t=Mn(e),r=new Ho(e);return rN(s._query),U1(t,s._query).then((a=>new ts(e,r,s,a)))}function F6(s){s=it(s,Gn);const e=it(s.firestore,Kt),t=Mn(e),r=new Ho(e);return $4(t,s._query).then((a=>new ts(e,r,s,a)))}function H6(s){s=it(s,Gn);const e=it(s.firestore,Kt),t=Mn(e),r=new Ho(e);return U1(t,s._query,{source:"server"}).then((a=>new ts(e,r,s,a)))}function Yw(s,e,t){s=it(s,vt);const r=it(s.firestore,Kt),a=dp(s.converter,e,t),l=qo(r);return ah(r,[ap(l,"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,Ct.none())])}function Ww(s,e,t,...r){s=it(s,vt);const a=it(s.firestore,Kt),l=qo(a);let u;return u=typeof(e=ke(e))=="string"||e instanceof Oo?sv(l,"updateDoc",s._key,e,t,r):rv(l,"updateDoc",s._key,e),ah(a,[u.toMutation(s._key,Ct.exists(!0))])}function G6(s){return ah(it(s.firestore,Kt),[new Cc(s._key,Ct.none())])}function Q6(s,e){const t=it(s.firestore,Kt),r=Am(s),a=dp(s.converter,e),l=qo(s.firestore);return ah(t,[ap(l,"addDoc",r._key,a,s.converter!==null,{}).toMutation(r._key,Ct.exists(!1))]).then((()=>r))}function cN(s,...e){s=ke(s);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||E0(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(E0(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let l,u,p;if(s instanceof vt)u=it(s.firestore,Kt),p=Nc(s._key.path),l={next:y=>{e[r]&&e[r](uv(u,s,y))},error:e[r+1],complete:e[r+2]};else{const y=it(s,Gn);u=it(y.firestore,Kt),p=y._query;const b=new Ho(u);l={next:E=>{e[r]&&e[r](new ts(u,b,y,E))},error:e[r+1],complete:e[r+2]},rN(s._query)}const h=Mn(u);return Q4(h,p,a,l)}function K6(s,e){s=it(s,Kt);const t=Mn(s),r=E0(e)?e:{next:e};return W4(t,r)}function ah(s,e){const t=Mn(s);return Y4(t,e)}function uv(s,e,t){const r=t.docs.get(e._key),a=new Ho(s);return new Or(s,a,e._key,r,new vo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){wj(wa),ga(new Ls("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),p=new Kt(new Rj(r.getProvider("auth-internal")),new Dj(u,r.getProvider("app-check-internal")),gO(u,a),u);return l={useFetchStreams:t,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),Jr(Gw,Qw,e),Jr(Gw,Qw,"esm2020")})();const $6="@firebase/firestore-compat",Y6="0.4.4";function dv(s,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new le("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function Xw(){if(typeof Uint8Array>"u")throw new le("unimplemented","Uint8Arrays are not available in this environment.")}function Jw(){if(!fO())throw new le("unimplemented","Blobs are unavailable in Firestore in this environment.")}let uN=class T0{constructor(e){this._delegate=e}static fromBase64String(e){return Jw(),new T0(jn.fromBase64String(e))}static fromUint8Array(e){return Xw(),new T0(jn.fromUint8Array(e))}toBase64(){return Jw(),this._delegate.toBase64()}toUint8Array(){return Xw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function w0(s){return W6(s,["next","error","complete"])}function W6(s,e){if(typeof s!="object"||s===null)return!1;const t=s;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}class X6{enableIndexedDbPersistence(e,t){return a6(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return o6(e._delegate)}clearIndexedDbPersistence(e){return l6(e._delegate)}}class dN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _a||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&zs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){n6(this._delegate,e,t,r)}enableNetwork(){return u6(this._delegate)}disableNetwork(){return d6(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,PS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return c6(this._delegate)}onSnapshotsInSync(e){return K6(this._delegate,e)}get app(){if(!this._appCompat)throw new le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xc(this,H1(this._delegate,e))}catch(t){throw qn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vr(this,Am(this._delegate,e))}catch(t){throw qn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Bn(this,r6(this._delegate,e))}catch(t){throw qn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return L6(this._delegate,t=>e(new hN(this,t)))}batch(){return Mn(this._delegate),new fN(new j6(this._delegate,e=>ah(this._delegate,e)))}loadBundle(e){return h6(this._delegate,e)}namedQuery(e){return f6(this._delegate,e).then(t=>t?new Bn(this,t):null)}}class hp extends av{constructor(e){super(),this.firestore=e}convertBytes(e){return new uN(new jn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Vr.forKey(t,this.firestore,null)}}function J6(s){Ij(s)}class hN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hp(e)}get(e){const t=bo(e);return this._delegate.get(t).then(r=>new Md(this._firestore,new Or(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=bo(e);return r?(dv("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=bo(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=bo(e);return this._delegate.delete(t),this}}class fN{constructor(e){this._delegate=e}set(e,t,r){const a=bo(e);return r?(dv("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=bo(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=bo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Lo{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ld(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Lo.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new Lo(e,new hp(e),t),a.set(t,l)),l}}Lo.INSTANCES=new WeakMap;class Vr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vr(t,new vt(t._delegate,r,new _e(e)))}static forKey(e,t,r){return new Vr(t,new vt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new xc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xc(this.firestore,H1(this._delegate,e))}catch(t){throw qn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ke(e),e instanceof vt?G1(this._delegate,e):!1}set(e,t){t=dv("DocumentReference.set",t);try{return t?Yw(this._delegate,e,t):Yw(this._delegate,e)}catch(r){throw qn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Ww(this._delegate,e):Ww(this._delegate,e,t,...r)}catch(a){throw qn(a,"updateDoc()","DocumentReference.update()")}}delete(){return G6(this._delegate)}onSnapshot(...e){const t=mN(e),r=pN(e,a=>new Md(this.firestore,new Or(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return cN(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=z6(this._delegate):e?.source==="server"?t=B6(this._delegate):t=U6(this._delegate),t.then(r=>new Md(this.firestore,new Or(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Vr(this.firestore,e?this._delegate.withConverter(Lo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function qn(s,e,t){return s.message=s.message.replace(e,t),s}function mN(s){for(const e of s)if(typeof e=="object"&&!w0(e))return e;return{}}function pN(s,e){let t;return w0(s[0])?t=s[0]:w0(s[1])?t=s[1]:typeof s[0]=="function"?t={next:s[0],error:s[1],complete:s[2]}:t={next:s[1],error:s[2],complete:s[3]},{next:r=>{t.next&&t.next(e(r))},error:t.error?.bind(t),complete:t.complete?.bind(t)}}class Md{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lN(this._delegate,e._delegate)}}class Ld extends Md{data(e){const t=this._delegate.data(e);return this._delegate._converter||Sj(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class Bn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hp(e)}where(e,t,r){try{return new Bn(this.firestore,ra(this._delegate,w6(e,t,r)))}catch(a){throw qn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Bn(this.firestore,ra(this._delegate,I6(e,t)))}catch(r){throw qn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Bn(this.firestore,ra(this._delegate,S6(e)))}catch(t){throw qn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Bn(this.firestore,ra(this._delegate,A6(e)))}catch(t){throw qn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Bn(this.firestore,ra(this._delegate,N6(...e)))}catch(t){throw qn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Bn(this.firestore,ra(this._delegate,R6(...e)))}catch(t){throw qn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Bn(this.firestore,ra(this._delegate,C6(...e)))}catch(t){throw qn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Bn(this.firestore,ra(this._delegate,k6(...e)))}catch(t){throw qn(t,"endAt()","Query.endAt()")}}isEqual(e){return Q1(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=F6(this._delegate):e?.source==="server"?t=H6(this._delegate):t=q6(this._delegate),t.then(r=>new I0(this.firestore,new ts(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=mN(e),r=pN(e,a=>new I0(this.firestore,new ts(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return cN(this._delegate,t,r)}withConverter(e){return new Bn(this.firestore,e?this._delegate.withConverter(Lo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Z6{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ld(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class I0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Bn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ld(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Z6(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ld(this._firestore,r))})}isEqual(e){return lN(this._delegate,e._delegate)}}class xc extends Bn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vr(this.firestore,e):null}doc(e){try{return e===void 0?new Vr(this.firestore,Am(this._delegate)):new Vr(this.firestore,Am(this._delegate,e))}catch(t){throw qn(t,"doc()","CollectionReference.doc()")}}add(e){return Q6(this._delegate,e).then(t=>new Vr(this.firestore,t))}isEqual(e){return G1(this._delegate,e._delegate)}withConverter(e){return new xc(this.firestore,e?this._delegate.withConverter(Lo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function bo(s){return it(s,vt)}class hv{constructor(...e){this._delegate=new Oo(...e)}static documentId(){return new hv(Rt.keyField().canonicalString())}isEqual(e){return e=ke(e),e instanceof Oo?this._delegate._internalPath.isEqual(e._internalPath):!1}}class po{static serverTimestamp(){const e=v6();return e._methodName="FieldValue.serverTimestamp",new po(e)}static delete(){const e=_6();return e._methodName="FieldValue.delete",new po(e)}static arrayUnion(...e){const t=b6(...e);return t._methodName="FieldValue.arrayUnion",new po(t)}static arrayRemove(...e){const t=x6(...e);return t._methodName="FieldValue.arrayRemove",new po(t)}static increment(e){const t=E6(e);return t._methodName="FieldValue.increment",new po(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const e3={Firestore:dN,GeoPoint:Zr,Timestamp:lt,Blob:uN,Transaction:hN,WriteBatch:fN,DocumentReference:Vr,DocumentSnapshot:Md,Query:Bn,QueryDocumentSnapshot:Ld,QuerySnapshot:I0,CollectionReference:xc,FieldPath:hv,FieldValue:po,setLogLevel:J6,CACHE_SIZE_UNLIMITED:i6};function t3(s,e){s.INTERNAL.registerComponent(new Ls("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps({...e3}))}function n3(s){t3(s,(e,t)=>new dN(e,t,new X6)),s.registerVersion($6,Y6)}n3(Vs);const r3={apiKey:"AIzaSyDS5RsnYL49tertpcIUXPa3dppw_soU1FQ",authDomain:"led-react-6204e.firebaseapp.com",projectId:"led-react-6204e",storageBucket:"led-react-6204e.firebasestorage.app",messagingSenderId:"500086523818",appId:"1:500086523818:web:74b4a57f9c55730eee4dd3",measurementId:"G-B0D52YG6QQ"};Vs.apps.length?Vs.app():Vs.initializeApp(r3);const Zw=Vs.auth(),jr=Vs.firestore(),Ms="admire-signage-external",Le=(s,e="INR",t=!1)=>new Intl.NumberFormat(e==="INR"?"en-IN":"en-US",{style:"currency",currency:e,maximumFractionDigits:t?1:0,notation:t?"compact":"standard"}).format(s),S0=()=>Math.random().toString(36).substr(2,9).toUpperCase(),xo=(s,e,t,r)=>{if(!s||!e)return null;const{screenQty:a,targetWidth:l,targetHeight:u,unit:p,selectedIndoor:h,assemblyMode:y,selectedPitch:b,selectedModuleId:E,selectedCabinetId:T,selectedCardId:R,selectedSMPSId:q,selectedProcId:U,sizingMode:W,readyId:S,margin:J,extras:se,overrides:me,extraComponents:re,pricingMode:ce,targetSellPrice:A,commercials:N,terms:k}=s,j=Number(a||1),P=be=>{if(!be)return 0;const Ve=Number(be.price||0),et=Number(be.carriage||0),rs=Ve+et;return be.currency==="USD"?rs*r:rs};let M,C,Oe,Ue,X,he=0;if(y==="assembled"){if(M=e.find(be=>be.id===E),C=e.find(be=>be.id===T),Oe=e.find(be=>be.id===R),Ue=e.find(be=>be.id===q),X=e.find(be=>be.id===U),!M||!C)return null}else{const be=e.find(Ve=>Ve.id===S);if(X=e.find(Ve=>Ve.id===U),!be)return null;M=be,C=be}const Te=p==="m"?l*1e3:l*304.8,Me=p==="m"?u*1e3:u*304.8,ze=Te/C.width,V=Me/C.height;let ee,ge;W==="up"?(ee=Math.ceil(ze),ge=Math.ceil(V)):W==="down"?(ee=Math.max(1,Math.floor(ze)),ge=Math.max(1,Math.floor(V))):(ee=Math.max(1,Math.round(ze)),ge=Math.max(1,Math.round(V)));const K=ee*C.width,te=ge*C.height,ae=ee*ge,pe=K*te/92903;let Ee=[];if(y==="assembled"){const be=Math.floor(C.width/M.width)*Math.floor(C.height/M.height);he=ae*be,Ee=[{id:"modules",inventoryId:E,name:"Modules",spec:`${M.brand} ${M.model}`,qty:he,unit:P(M),total:he*P(M),type:"led"},{id:"cabinets",inventoryId:T,name:"Cabinets",spec:`${C.brand} ${C.model}`,qty:ae,unit:P(C),total:ae*P(C),type:"led"},{id:"cards",inventoryId:R,name:"Cards",spec:Oe?Oe.brand:"-",qty:ae,unit:P(Oe),total:ae*P(Oe),type:"led"},{id:"smps",inventoryId:q,name:"SMPS",spec:Ue?Ue.brand:"-",qty:ae,unit:P(Ue),total:ae*P(Ue),type:"led"}]}else Ee=[{id:"ready",inventoryId:S,name:"LED Panels (Ready)",spec:`${C.brand} ${C.model}`,qty:ae,unit:P(C),total:ae*P(C),type:"led"}],he=ae;Ee.push({id:"processor",inventoryId:U,name:"Processor",spec:X?X.brand:"Select Processor",qty:1,unit:X?P(X):0,total:X?P(X):0,type:"service"}),re&&re.length>0&&re.forEach(be=>{const Ve=e.find(et=>et.id===be.componentId);if(Ve){const et=be.type==="cabinet"?be.qty*ae:be.qty;Ee.push({id:be.id,inventoryId:be.componentId,name:`Extra: ${Ve.type}`,spec:`${Ve.brand} ${Ve.model}`,qty:et,unit:P(Ve),total:et*P(Ve),type:Ve.type==="processor"?"service":"led"})}else Ee.push({id:be.id,inventoryId:"",name:"Extra Component",spec:"Select Item...",qty:be.qty||1,unit:0,total:0,type:"led"})});const Re=Ee.map(be=>{if(me&&me[be.id]){const Ve=me[be.id],et=Ve.qty!==void 0&&Ve.qty!==""?Number(Ve.qty):be.qty,rs=Ve.rate!==void 0&&Ve.rate!==""?Number(Ve.rate):be.unit;return{...be,qty:et,unit:rs,total:et*rs,isOverridden:!0}}return be}),ar=Re.filter(be=>be.type==="led").reduce((be,Ve)=>be+Ve.total,0),Ut=Re.filter(be=>be.type!=="led").reduce((be,Ve)=>be+Ve.total,0),yn={};let xr=0,on=0;Array.isArray(se)&&se.forEach(be=>{let Ve=0;const et=ar;be.type==="pct"?Ve=et*(Number(be.val)/100):Ve=Number(be.val),yn[be.id]=Ve,xr+=Ve});const Qn=N?.installation||{cost:0,costType:"abs"};let Cn=0;Qn.costType==="pct"?Cn=Ut*(Number(Qn.cost)/100):(Qn.unit||"sqft")==="sqft"?Cn=Number(Qn.cost)*pe:Cn=Number(Qn.cost),yn.install=Cn,on+=Cn;const Kn=N?.structure||{cost:0,costType:"abs"};let $n=0;Kn.costType==="pct"?$n=Ut*(Number(Kn.cost)/100):(Kn.unit||"sqft")==="sqft"?$n=Number(Kn.cost)*pe:$n=Number(Kn.cost),yn.structure=$n,on+=$n;const We=ar+xr,xt=Ut+on,kn=We+xt,Q=kn*j,Se=N||{processor:{val:0},installation:{val:0},structure:{val:0}};let He=0;if(Se.processor.unit==="unit"){const be=Re.find(et=>et.id==="processor"),Ve=be?be.qty:1;He=Number(Se.processor.val)*Ve*j}else He=Number(Se.processor.val)*j;let ue=0;Se.installation.unit==="sqft"?ue=Number(Se.installation.val)*pe*j:ue=Number(Se.installation.val)*j;let kt=0;Se.structure.unit==="sqft"?kt=Number(Se.structure.val)*pe*j:kt=Number(Se.structure.val)*j;const _n=He+ue+kt;let $t=0,ka=J;const qs=ce||"margin";if(qs==="margin")$t=We*(1+J/100);else{const be=Number(A||0);qs==="screen"?$t=be:qs==="sqft"?$t=be*pe:qs==="sqm"&&($t=be*(pe/10.7639)),We>0?ka=($t-We)/We*100:ka=0}const Lr=$t*j+_n,Ln=Lr-Q;return{gridCols:ee,gridRows:ge,finalWidth:(K/1e3).toFixed(2),finalHeight:(te/1e3).toFixed(2),totalCabinets:ae,moduleType:M,cabinetType:C,processor:X,breakdown:{qtyModules:he,ledOps:xr,serviceOps:on},detailedItems:Re,calculatedExtras:yn,costLEDPerScreen:We,costServicesPerScreen:xt,costPerScreen:kn,totalProjectCost:Q,finalPrice:Lr,totalProjectSell:Lr,assemblyMode:y,screenQty:j,commercials:{sellProcTotal:He,sellInstallTotal:ue,sellStructureTotal:kt},terms:k||{price:"Ex-works Mumbai",deliveryWeeks:10,payment:[]},matrix:{cost:{sqft:kn/pe,unit:kn,total:Q},margin:{sqft:Ln/j/pe,unit:Ln/j,total:Ln},sell:{sqft:Lr/j/pe,unit:Lr/j,total:Lr},led:{cost:We,sell:$t,margin:$t-We,marginPct:ka},sqft:{perScreen:pe,total:pe*j}}}},Ft={COMPANY:{NAME:"ADMIRE SIGN & DISPLAY PVT. LTD.",ADDRESS_1:"102, Priya Industrial Estate 4, K.T. Industrial Estate",ADDRESS_2:"Kherpada, Waliv, Vasai East, Mumbai - 401208",EMAIL:"info@admiresign.com",WEB:"www.admiresign.com"},DEFAULTS:{EXCHANGE_RATE:90,GST_RATE:18,DELIVERY_WEEKS:10,PRICE_BASIS:"Ex-works Mumbai",PAYMENT_TERMS:[{name:"Advance with PO",percent:60},{name:"Before dispatch",percent:30},{name:"After installation",percent:10}]},TEXT:{WARRANTY:"Against any manufacturing defect. Offsite support for troubleshooting. Client can sign up for Admires excellent AMC services for on-site support. Serious fault will be attended to by our technical team within 48-72 hours upon receipt of written complaints with pictures/videos of the fault. 2% Extra spares includes Modules, Power Supply, Receiver Card (if there are over 100 cabinets), Flat cables, 5V connectors, Power and Data Cable. Any damage to the screen due to force majure, natural disasters, electricity surge, earthing, accident, etc is not covered under the warranty. Power supplies damage due to power fluctuation will not be covered under warranty. Power supply will be under the direct warranty of the OEM supplier. If the repair requires additional components then these will be charged extra. Brightness control meter, Video Processor & Timer can be supplied at extra cost. Maintenance team visit in six months during warranty period.",SCOPE_STRUCTURE:"Foundation & Structure. Structural stability certificate from a consultant. For wall mounted outdoor screen, Client to ensure strong and solid brick wall, RCC beams and column base. For front access indoor screen, Client to ensure a strong base. Indoor Structures cannot be mounted on ACP Sheets, Gypsum boards etc. Scaffolding, Aluminium composite panelling if required. Personnel for troubleshooting training during the screen installation. Helpers for loading, unloading and installing the display at site.",SCOPE_ELEC:"Electricity 3 phase electric power near the site, not more than 5m from the site, before the commencement of work. Electrical distribution board within 5m from the screen. Conduited electrical cable. 4mm 2 core armored cable or 4mm 3 core cables, 32 ampere MCB, 1 switch board with 2 sockets. Good quality Stabiliser and timers. 1 Certified electrical engineer for all connections from power Main to the unit. Ventilation machineries such as Air Conditioners or Fans.",SCOPE_NET:"CAT 6 or Optic Fiber Data cable and its terminations. Data points near the screen. Space with power sockets for Video wall Controllers. Data source/AV room within 80 meters of the screen. Connections to be availed through CAT 6 cables duly terminated with RJ45. If the length is farther then Fiber optic converter will be required. Fiber optic converters, if required, will be charged extra. In case the fiber optic converter is required, single mode Fiber optic cable is to be provided by client from source point to the display, terminated as per specs with Patch Chords from the splicing unit to connect to screen.",SCOPE_SOFT:"3rd party Software for Content upload on screen will be provided by the controller card supplier. Admire cannot provide regular updates and application stability.",SCOPE_PERM:"All permissions such as PTW, work permits & gate passes for workers, engineers and executives.",SCOPE_PC:"As per specification, to be arranged by client.",VALIDITY:"30 days."}},s3=({user:s,transactions:e=[]})=>{const[t,r]=Ht.useState([]),[a,l]=Ht.useState(null),[u,p]=Ht.useState(!1),[h,y]=Ht.useState({type:"module",brand:"",model:"",vendor:"",pitch:"",width:"",height:"",price:"",carriage:"",currency:"INR",indoor:!0,brightness:"",refreshRate:"",ledType:"",lampMake:"",material:"",weight:"",avgPower:"",maxPower:"",contrast:"",viewAngleH:"",viewAngleV:"",ipFront:"",ipBack:"",ports:"",amps:""}),[b,E]=Ht.useState(!0);Ht.useEffect(()=>{if(!s||!jr)return;const S=jr.collection("artifacts").doc(Ms).collection("public").doc("data").collection("inventory").onSnapshot(J=>{const se=J.docs.map(me=>({id:me.id,...me.data()}));r(se),E(!1)},J=>console.error(J));return()=>S()},[s]);const T=async()=>{if(h.type==="module"){if(!h.pitch||!h.brand||!h.model||!h.price||!h.width||!h.height||!h.weight||!h.avgPower||!h.maxPower||!h.brightness||!h.refreshRate||!h.contrast||!h.viewAngleH||!h.viewAngleV||!h.ipFront||!h.ipBack)return alert("Please fill all compulsory (*) fields.")}else if(h.type==="cabinet"){if(!h.material||!h.model||!h.price||!h.vendor||!h.width||!h.height)return alert("Please fill all compulsory (*) fields.")}else if(h.type==="card"||h.type==="processor"){if(!h.brand||!h.model||!h.price||!h.vendor)return alert("Please fill all compulsory (*) fields.")}else if(h.type==="smps"){if(!h.brand||!h.model||!h.price||!h.vendor||!h.amps)return alert("Please fill all compulsory (*) fields.")}else if(h.type==="ready"){if(!h.pitch||!h.brand||!h.model||!h.price||!h.material||!h.width||!h.height||!h.weight||!h.avgPower||!h.maxPower||!h.brightness||!h.refreshRate||!h.contrast||!h.viewAngleH||!h.viewAngleV||!h.ipFront||!h.ipBack)return alert("Please fill all compulsory (*) fields.")}else if(!h.brand||!h.model)return alert("Brand and Model are required");try{const S=jr.collection("artifacts").doc(Ms).collection("public").doc("data").collection("inventory"),J={...h,width:Number(h.width),height:Number(h.height),price:Number(h.price),carriage:Number(h.carriage||0),pitch:Number(h.pitch),currency:h.currency||"INR",indoor:h.indoor==="true"||h.indoor===!0,material:h.material||"",weight:h.weight?Number(h.weight):0,avgPower:h.avgPower?Number(h.avgPower):0,maxPower:h.maxPower?Number(h.maxPower):0,brightness:h.brightness?parseInt(h.brightness):0,refreshRate:h.refreshRate?parseInt(h.refreshRate):0,viewAngleH:h.viewAngleH?parseInt(h.viewAngleH):0,viewAngleV:h.viewAngleV?parseInt(h.viewAngleV):0,ipFront:h.ipFront?parseInt(h.ipFront):0,ipBack:h.ipBack?parseInt(h.ipBack):0,ports:h.ports?parseInt(h.ports):0,amps:h.amps?Number(h.amps):0,updatedAt:new Date};a?(await S.doc(a).update(J),l(null),p(!1)):(await S.add({...J,createdAt:new Date}),y({type:h.type,brand:"",model:"",vendor:"",pitch:"",width:"",height:"",price:"",carriage:"",currency:"INR",indoor:!0,brightness:"",refreshRate:"",ledType:"",lampMake:"",material:"",weight:"",avgPower:"",maxPower:"",contrast:"",viewAngleH:"",viewAngleV:"",ipFront:"",ipBack:"",ports:"",amps:""}),alert("Item Added!"))}catch(S){console.error(S)}},R=S=>{y({...S,vendor:S.vendor||"",currency:S.currency||"INR",carriage:S.carriage||0}),l(S.id),p(!0),window.scrollTo({top:0,behavior:"smooth"})},q=()=>{l(null),p(!1),y({type:"module",brand:"",model:"",vendor:"",pitch:"",width:"",height:"",price:"",carriage:"",currency:"INR",indoor:!0,brightness:"",refreshRate:"",ledType:"",lampMake:"",material:"",weight:"",avgPower:"",maxPower:"",contrast:"",viewAngleH:"",viewAngleV:"",ipFront:"",ipBack:"",ports:"",amps:""})},U=async S=>{confirm("Delete this item?")&&await jr.collection("artifacts").doc(Ms).collection("public").doc("data").collection("inventory").doc(S).delete()},W=[...t].sort((S,J)=>{const se=(S.type||"").toLowerCase(),me=(J.type||"").toLowerCase();if(se<me)return-1;if(se>me)return 1;const re=(S.brand+" "+S.model).toLowerCase(),ce=(J.brand+" "+J.model).toLowerCase();return re<ce?-1:re>ce?1:0});return m.jsxs("div",{className:"p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-slate-800 dark:text-white",children:[m.jsx(zf,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})," Components Management"]}),!u&&m.jsxs("button",{onClick:()=>p(!0),className:"bg-teal-600 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-teal-700 transition-colors",children:[m.jsx(go,{size:16})," Add New Component"]})]}),u&&m.jsxs("div",{className:`grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 p-6 rounded-lg transition-colors border shadow-sm ${a?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-700":"bg-slate-50 dark:bg-slate-700/50 border-slate-200 dark:border-slate-600"}`,children:[m.jsxs("div",{className:"col-span-2 md:col-span-4 flex justify-between items-center mb-2 pb-2 border-b border-slate-200 dark:border-slate-600",children:[m.jsx("h3",{className:"text-sm font-bold uppercase text-slate-500 dark:text-slate-400",children:a?"Editing Item":"Add New Item"}),m.jsxs("button",{onClick:q,className:"text-xs text-slate-500 hover:text-red-500 flex items-center gap-1",children:[m.jsx(nI,{size:14})," Close"]})]}),m.jsxs("select",{className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.type,onChange:S=>y({...h,type:S.target.value}),children:[m.jsx("option",{value:"module",children:"Module"}),m.jsx("option",{value:"cabinet",children:"Cabinet"}),m.jsx("option",{value:"ready",children:"Ready Unit"}),m.jsx("option",{value:"card",children:"Receiving Card"}),m.jsx("option",{value:"smps",children:"SMPS"}),m.jsx("option",{value:"processor",children:"Processor"})]}),(h.type==="module"||h.type==="ready")&&m.jsxs(m.Fragment,{children:[m.jsx("input",{placeholder:"Pitch*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white border-teal-500 ring-1 ring-teal-500",value:h.pitch,onChange:S=>y({...h,pitch:S.target.value})}),m.jsxs("select",{className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white border-teal-500 ring-1 ring-teal-500",value:h.indoor,onChange:S=>y({...h,indoor:S.target.value}),children:[m.jsx("option",{value:"true",children:"Indoor"}),m.jsx("option",{value:"false",children:"Outdoor"})]})]}),m.jsx("input",{placeholder:h.type==="module"||h.type==="ready"||h.type==="card"||h.type==="processor"||h.type==="psu"?"Brand*":"Brand",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.brand,onChange:S=>y({...h,brand:S.target.value})}),m.jsx("input",{placeholder:h.type==="module"||h.type==="ready"||h.type==="cabinet"||h.type==="card"||h.type==="processor"||h.type==="psu"?"Model/SKU*":"Model",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.model,onChange:S=>y({...h,model:S.target.value})}),m.jsxs("div",{className:"flex gap-2 items-center col-span-2 md:col-span-1",children:[m.jsxs("div",{className:"flex-1 min-w-[100px]",title:"Base Price",children:[m.jsx("input",{placeholder:"Base Rate*",type:"number",className:"p-2 w-full border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.price,onChange:S=>y({...h,price:S.target.value})}),m.jsx("div",{className:"text-[9px] text-slate-400 mt-0.5 ml-1",children:"BASE RATE*"})]}),m.jsx("span",{className:"text-slate-400 font-bold mb-3",children:"+"}),m.jsxs("div",{className:"flex-1 min-w-[80px]",title:"Carriage Inwards",children:[m.jsx("input",{placeholder:"Carriage",type:"number",className:"p-2 w-full border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.carriage,onChange:S=>y({...h,carriage:S.target.value})}),m.jsx("div",{className:"text-[9px] text-slate-400 mt-0.5 ml-1",children:"CARRIAGE"})]}),m.jsx("div",{className:"flex-none mb-3",children:m.jsxs("select",{className:"p-2 border rounded bg-slate-100 dark:bg-slate-600 dark:border-slate-600 dark:text-white",value:h.currency,onChange:S=>y({...h,currency:S.target.value}),children:[m.jsx("option",{value:"INR",children:"INR"}),m.jsx("option",{value:"USD",children:"USD"})]})})]}),m.jsx("input",{placeholder:h.type==="cabinet"||h.type==="card"||h.type==="processor"||h.type==="psu"?"Vendor*":"Vendor",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.vendor,onChange:S=>y({...h,vendor:S.target.value})}),(h.type==="card"||h.type==="processor")&&m.jsx("input",{placeholder:"Ports (Optional)",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.ports,onChange:S=>y({...h,ports:S.target.value})}),h.type==="smps"&&m.jsx("input",{placeholder:"Capacity (Amps)*",type:"number",step:"0.1",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.amps,onChange:S=>y({...h,amps:S.target.value})}),h.type==="module"&&m.jsxs(m.Fragment,{children:[m.jsx("input",{placeholder:"LED Type",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.ledType,onChange:S=>y({...h,ledType:S.target.value})}),m.jsx("input",{placeholder:"Lamp Make",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.lampMake,onChange:S=>y({...h,lampMake:S.target.value})}),m.jsx("input",{placeholder:"Width (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.width,onChange:S=>y({...h,width:S.target.value})}),m.jsx("input",{placeholder:"Height (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.height,onChange:S=>y({...h,height:S.target.value})}),m.jsx("input",{placeholder:"Weight/sqm (kg)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.weight,onChange:S=>y({...h,weight:S.target.value})}),m.jsx("input",{placeholder:"Avg Power/sqm (W)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.avgPower,onChange:S=>y({...h,avgPower:S.target.value})}),m.jsx("input",{placeholder:"Max Power/sqm (W)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.maxPower,onChange:S=>y({...h,maxPower:S.target.value})}),m.jsx("input",{placeholder:"Brightness (nits)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.brightness,onChange:S=>y({...h,brightness:S.target.value})}),m.jsx("input",{placeholder:"Refresh Rate*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.refreshRate,onChange:S=>y({...h,refreshRate:S.target.value})}),m.jsx("input",{placeholder:"Contrast* (e.g. 5000:1)",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.contrast,onChange:S=>y({...h,contrast:S.target.value})}),m.jsx("input",{placeholder:"Viewing Angle (H)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.viewAngleH,onChange:S=>y({...h,viewAngleH:S.target.value})}),m.jsx("input",{placeholder:"Viewing Angle (V)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.viewAngleV,onChange:S=>y({...h,viewAngleV:S.target.value})}),m.jsx("input",{placeholder:"IP Protection (Front)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.ipFront,onChange:S=>y({...h,ipFront:S.target.value})}),m.jsx("input",{placeholder:"IP Protection (Back)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.ipBack,onChange:S=>y({...h,ipBack:S.target.value})})]}),h.type==="cabinet"&&m.jsxs(m.Fragment,{children:[m.jsx("input",{placeholder:"Material*",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.material,onChange:S=>y({...h,material:S.target.value})}),m.jsxs("select",{className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.indoor,onChange:S=>y({...h,indoor:S.target.value}),children:[m.jsx("option",{value:"true",children:"Indoor"}),m.jsx("option",{value:"false",children:"Outdoor"})]}),m.jsx("input",{placeholder:"Width (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.width,onChange:S=>y({...h,width:S.target.value})}),m.jsx("input",{placeholder:"Height (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.height,onChange:S=>y({...h,height:S.target.value})}),m.jsx("input",{placeholder:"Weight (kg)",type:"number",step:"1",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.weight,onChange:S=>y({...h,weight:S.target.value})})]}),h.type==="ready"&&m.jsxs(m.Fragment,{children:[m.jsx("input",{placeholder:"Cabinet Material*",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.material,onChange:S=>y({...h,material:S.target.value})}),m.jsx("input",{placeholder:"LED Type",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.ledType,onChange:S=>y({...h,ledType:S.target.value})}),m.jsx("input",{placeholder:"Lamp Make",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.lampMake,onChange:S=>y({...h,lampMake:S.target.value})}),m.jsx("input",{placeholder:"Width (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.width,onChange:S=>y({...h,width:S.target.value})}),m.jsx("input",{placeholder:"Height (mm)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.height,onChange:S=>y({...h,height:S.target.value})}),m.jsx("input",{placeholder:"Weight/sqm (kg)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.weight,onChange:S=>y({...h,weight:S.target.value})}),m.jsx("input",{placeholder:"Avg Power/sqm (W)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.avgPower,onChange:S=>y({...h,avgPower:S.target.value})}),m.jsx("input",{placeholder:"Max Power/sqm (W)*",type:"number",step:"0.01",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.maxPower,onChange:S=>y({...h,maxPower:S.target.value})}),m.jsx("input",{placeholder:"Brightness (nits)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.brightness,onChange:S=>y({...h,brightness:S.target.value})}),m.jsx("input",{placeholder:"Refresh Rate*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.refreshRate,onChange:S=>y({...h,refreshRate:S.target.value})}),m.jsx("input",{placeholder:"Contrast* (e.g. 5000:1)",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.contrast,onChange:S=>y({...h,contrast:S.target.value})}),m.jsx("input",{placeholder:"Viewing Angle (H)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.viewAngleH,onChange:S=>y({...h,viewAngleH:S.target.value})}),m.jsx("input",{placeholder:"Viewing Angle (V)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.viewAngleV,onChange:S=>y({...h,viewAngleV:S.target.value})}),m.jsx("input",{placeholder:"IP Protection (Front)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.ipFront,onChange:S=>y({...h,ipFront:S.target.value})}),m.jsx("input",{placeholder:"IP Protection (Back)*",type:"number",className:"p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:h.ipBack,onChange:S=>y({...h,ipBack:S.target.value})})]}),m.jsxs("button",{onClick:T,className:`px-4 py-2 rounded text-white flex items-center justify-center gap-2 hover:opacity-90 transition ${a?"bg-amber-600":"bg-teal-600"} col-span-2 md:col-span-1`,children:[a?m.jsx(Gl,{size:16}):m.jsx(go,{size:16}),a?"Update Item":"Add Item"]})]}),m.jsxs("div",{className:"mt-6",children:[m.jsx("div",{className:"md:hidden space-y-4",children:W.map(S=>{const J=e.filter(se=>se.itemId===S.id).reduce((se,me)=>se+(me.type==="in"?Number(me.qty):-Number(me.qty)),0);return m.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm relative overflow-hidden",children:[m.jsx("div",{className:`absolute top-0 right-0 px-3 py-1 rounded-bl-lg text-[10px] font-bold uppercase tracking-wider ${S.type==="module"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300"}`,children:S.type}),m.jsxs("div",{className:"pr-16 mb-3",children:[m.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:[S.brand," ",S.model]}),S.vendor&&m.jsx("div",{className:"text-xs text-teal-600 font-medium",children:S.vendor})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-xs text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Specs"}),S.type==="module"?m.jsxs("span",{children:["P",S.pitch," ",S.indoor?"In":"Out","  ",S.width,"x",S.height]}):m.jsx("span",{children:S.width?`${S.width}x${S.height}`:"Standard"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Stock"}),m.jsx("span",{className:`font-bold text-sm ${J<0?"text-red-500":"text-slate-700 dark:text-slate-200"}`,children:J})]}),m.jsxs("div",{className:"col-span-2 border-t border-slate-200 dark:border-slate-600 pt-2 mt-1",children:[m.jsx("span",{className:"block text-[10px] uppercase font-bold text-slate-400",children:"Landed Cost"}),m.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:Le((S.price||0)+(S.carriage||0),S.currency||"INR")})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:()=>R(S),className:"flex-1 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg text-xs font-bold flex justify-center items-center gap-2 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[m.jsx(Gl,{size:14})," Edit"]}),m.jsxs("button",{onClick:()=>U(S.id),className:"flex-1 py-2 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-xs font-bold flex justify-center items-center gap-2 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:[m.jsx(ui,{size:14})," Delete"]})]})]},S.id)})}),m.jsx("div",{className:"hidden md:block overflow-x-auto rounded border border-slate-200 dark:border-slate-700",children:m.jsxs("table",{className:"w-full text-sm text-left",children:[m.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 uppercase",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-3",children:"Type"}),m.jsx("th",{className:"px-4 py-3",children:"Component"}),m.jsx("th",{className:"px-4 py-3",children:"Specs"}),m.jsx("th",{className:"px-4 py-3 text-center",children:"Stock"}),m.jsx("th",{className:"px-4 py-3",children:"Landed Cost"}),m.jsx("th",{className:"px-4 py-3 text-right",children:"Action"})]})}),m.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:W.map(S=>m.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-700/50 ${a===S.id?"bg-amber-50 dark:bg-amber-900/20":""}`,children:[m.jsx("td",{className:"px-4 py-3 capitalize",children:m.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${S.type==="module"?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":S.type==="ready"?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:S.type==="smps"?"SMPS":S.type})}),m.jsxs("td",{className:"px-4 py-3 dark:text-slate-200",children:[m.jsxs("div",{className:"font-medium",children:[S.brand," ",S.model]}),S.vendor&&m.jsx("div",{className:"text-[10px] text-teal-600 dark:text-teal-400 mt-0.5",children:S.vendor})]}),m.jsxs("td",{className:"px-4 py-3 text-slate-500 dark:text-slate-400 text-xs",children:[S.type==="module"&&m.jsxs("div",{className:"flex flex-col",children:[m.jsxs("span",{children:["P",S.pitch," ",S.indoor?"Indoor":"Outdoor"]}),m.jsxs("span",{children:[S.width,"x",S.height,"mm"]})]}),S.type==="cabinet"&&m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{children:S.material}),m.jsxs("span",{children:[S.width,"x",S.height,"mm"]}),m.jsx("span",{children:S.indoor?"Indoor":"Outdoor"})]}),(S.type==="card"||S.type==="processor")&&m.jsx("span",{children:S.ports?`${S.ports} Ports`:""}),S.type==="smps"&&m.jsx("span",{children:S.amps?`${S.amps} Amps`:""}),S.type==="ready"&&m.jsxs("span",{children:[S.width,"x",S.height,"mm P",S.pitch]})]}),m.jsx("td",{className:"px-4 py-3 font-bold dark:text-slate-200 text-teal-600 text-center",children:e.filter(J=>J.itemId===S.id).reduce((J,se)=>J+(se.type==="in"?Number(se.qty):-Number(se.qty)),0)}),m.jsx("td",{className:"px-4 py-3 dark:text-slate-200",children:m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"font-semibold",children:Le((S.price||0)+(S.carriage||0),S.currency||"INR")}),S.carriage>0&&m.jsxs("span",{className:"text-[10px] text-slate-400",children:["Base: ",S.price," + Carr: ",S.carriage]})]})}),m.jsxs("td",{className:"px-4 py-3 flex gap-2 justify-end",children:[m.jsx("button",{onClick:()=>R(S),className:"text-blue-500 hover:text-blue-700 p-1 bg-blue-50 dark:bg-blue-900/30 rounded",children:m.jsx(Gl,{size:14})}),m.jsx("button",{onClick:()=>U(S.id),className:"text-red-400 hover:text-red-600 p-1 bg-red-50 dark:bg-red-900/30 rounded",children:m.jsx(ui,{size:14})})]})]},S.id))})]})}),t.length===0&&!b&&m.jsx("div",{className:"text-center py-12 text-slate-400 bg-white dark:bg-slate-800",children:"No items found."})]})]})},i3=({user:s,inventory:e=[],transactions:t=[]})=>{const[r,a]=wn.useState({date:new Date().toISOString().split("T")[0],type:"in",itemId:"",qty:"",remarks:""}),l=async()=>{if(!r.itemId||!r.qty)return alert("Select Item and Qty");try{await jr.collection("artifacts").doc(Ms).collection("public").doc("data").collection("transactions").add({...r,createdAt:new Date}),a({...r,qty:"",remarks:""})}catch(h){console.error(h)}},u=async h=>{confirm("Delete record?")&&await jr.collection("artifacts").doc(Ms).collection("public").doc("data").collection("transactions").doc(h).delete()},p=[...t].sort((h,y)=>new Date(y.date)-new Date(h.date));return m.jsxs("div",{className:"p-4 md:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[m.jsx(uC,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"}),m.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Stock Ledger"})]}),m.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg border border-slate-200 dark:border-slate-700 mb-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Date & Action"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"date",value:r.date,onChange:h=>a({...r,date:h.target.value}),className:"flex-1 p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white"}),m.jsxs("select",{value:r.type,onChange:h=>a({...r,type:h.target.value}),className:"w-28 p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white font-bold",children:[m.jsx("option",{value:"in",children:"Stock IN"}),m.jsx("option",{value:"out",children:"Stock OUT"})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Component"}),m.jsxs("select",{value:r.itemId,onChange:h=>a({...r,itemId:h.target.value}),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white",children:[m.jsx("option",{value:"",children:"Select Item..."}),e.sort((h,y)=>(h.brand+" "+h.model).localeCompare(y.brand+" "+y.model)).map(h=>m.jsxs("option",{value:h.id,children:[h.brand," ",h.model," (",h.type,")"]},h.id))]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Quantity"}),m.jsx("input",{type:"number",placeholder:"Qty",value:r.qty,onChange:h=>a({...r,qty:h.target.value}),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Location / Source"}),m.jsx("input",{type:"text",placeholder:"Source/Loc",value:r.remarks,onChange:h=>a({...r,remarks:h.target.value}),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-600 dark:text-white"})]})]}),m.jsx("button",{onClick:l,className:"w-full md:w-auto bg-teal-600 text-white px-6 py-2 rounded-lg font-bold text-sm hover:bg-teal-700 transition-colors shadow-sm",children:"Add Transaction"})]}),m.jsxs("div",{className:"mt-8",children:[m.jsx("h3",{className:"text-sm font-bold uppercase text-slate-500 dark:text-slate-400 mb-4",children:"Transaction History"}),m.jsxs("div",{className:"md:hidden space-y-3",children:[p.map(h=>{const y=e.find(b=>b.id===h.itemId)||{};return m.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold uppercase ${h.type==="in"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:h.type==="in"?"IN":"OUT"}),m.jsx("span",{className:"text-xs text-slate-400",children:new Date(h.date).toLocaleDateString()})]}),m.jsxs("div",{className:"font-bold text-slate-800 dark:text-white text-sm mb-0.5",children:[y.brand," ",y.model]}),m.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:h.remarks||"-"})]}),m.jsxs("div",{className:"text-right pl-4 border-l border-slate-100 dark:border-slate-700 ml-2",children:[m.jsxs("span",{className:`block text-lg font-bold ${h.type==="in"?"text-green-600":"text-red-500"}`,children:[h.type==="in"?"+":"-",h.qty]}),m.jsx("button",{onClick:()=>u(h.id),className:"text-[10px] text-red-400 hover:text-red-600 underline mt-1",children:"Delete"})]})]},h.id)}),p.length===0&&m.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No transactions yet."})]}),m.jsxs("div",{className:"hidden md:block overflow-x-auto rounded-lg border border-slate-200 dark:border-slate-700",children:[m.jsxs("table",{className:"w-full text-sm text-left",children:[m.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-500 dark:text-slate-400 uppercase text-xs",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-3",children:"Date"}),m.jsx("th",{className:"px-4 py-3 text-center",children:"Type"}),m.jsx("th",{className:"px-4 py-3",children:"Component"}),m.jsx("th",{className:"px-4 py-3",children:"Specs"}),m.jsx("th",{className:"px-4 py-3 text-center",children:"Qty"}),m.jsx("th",{className:"px-4 py-3",children:"Loc/Source"}),m.jsx("th",{className:"px-4 py-3 text-right",children:"Action"})]})}),m.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:p.map(h=>{const y=e.find(b=>b.id===h.itemId)||{};return m.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[m.jsx("td",{className:"px-4 py-3 whitespace-nowrap dark:text-slate-300",children:new Date(h.date).toLocaleDateString()}),m.jsx("td",{className:"px-4 py-3 text-center",children:m.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${h.type==="in"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:h.type.toUpperCase()})}),m.jsxs("td",{className:"px-4 py-3 font-medium dark:text-white",children:[y.brand," ",y.model]}),m.jsx("td",{className:"px-4 py-3 text-xs text-slate-500 dark:text-slate-400",children:y.type}),m.jsxs("td",{className:`px-4 py-3 text-center font-bold ${h.type==="in"?"text-green-600":"text-red-500"}`,children:[h.type==="in"?"+":"-",h.qty]}),m.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-slate-400 text-xs",children:h.remarks}),m.jsx("td",{className:"px-4 py-3 text-right",children:m.jsx("button",{onClick:()=>u(h.id),className:"text-red-400 hover:text-red-600 p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:m.jsx(ui,{size:14})})})]},h.id)})})]}),p.length===0&&m.jsx("div",{className:"text-center py-8 text-slate-400",children:"No transactions recorded."})]})]})]})};var a3=eI();const gN=A0(a3),o3=({cols:s,rows:e,module:t,cabinet:r,unit:a})=>{if(!t||!r)return null;const l=r.width,u=r.height,p=l*s,h=u*e,y=b=>{const E=(b/1e3).toFixed(2)+"m",T=(b/304.8).toFixed(2)+"ft";return`${E} / ${T}`};return m.jsx("div",{className:"w-full flex flex-col bg-white rounded-lg border border-slate-200 overflow-hidden",children:m.jsx("div",{className:"w-full h-full min-h-[300px] p-10 flex items-center justify-center",children:m.jsxs("div",{className:"relative",style:{aspectRatio:`${p}/${h}`,width:"100%",maxHeight:"400px"},children:[m.jsxs("div",{className:"absolute -top-8 left-0 right-0 text-center text-xs font-bold text-slate-600 flex items-center justify-center gap-2",children:[m.jsx("div",{className:"h-[1px] flex-1 bg-slate-300"}),m.jsxs("span",{className:"bg-white px-1 whitespace-nowrap",children:[y(p)," (",s," Cabinets)"]}),m.jsx("div",{className:"h-[1px] flex-1 bg-slate-300"})]}),m.jsxs("div",{className:"absolute -left-8 top-0 bottom-0 text-center text-xs font-bold text-slate-600 flex flex-col items-center justify-center gap-2",style:{writingMode:"vertical-rl",transform:"rotate(180deg)"},children:[m.jsx("div",{className:"w-[1px] flex-1 bg-slate-300"}),m.jsxs("span",{className:"bg-white px-1 whitespace-nowrap",children:[y(h)," (",e," Cabinets)"]}),m.jsx("div",{className:"w-[1px] flex-1 bg-slate-300"})]}),m.jsx("div",{className:"w-full h-full grid bg-white border-2 border-slate-900 shadow-sm",style:{gridTemplateColumns:`repeat(${s}, 1fr)`,gridTemplateRows:`repeat(${e}, 1fr)`},children:Array.from({length:s*e}).map((b,E)=>m.jsx("div",{className:"border border-slate-300 relative"},E))})]})})})},yN=({data:s,allScreensData:e,currency:t="INR",exchangeRate:r,date:a})=>{const l=e&&e.calculations&&e.calculations.length>1,u=l?e.calculations:s?[s]:[];if(u.length===0)return null;const p=(l?e.clientName:s?.clientName)||"",h=(l?e.projectName:s?.projectName)||"",y=u[0].terms||{},b=l?e.totalProjectSell:s?.totalProjectSell,E=T=>m.jsxs("div",{className:`bg-white text-slate-800 font-sans text-xs ${T?"print-version-container p-0":"preview-version-container w-full h-full p-8"}`,children:[m.jsx("div",{className:"flex justify-between items-start mb-6 border-b-2 border-slate-800 pb-4",children:m.jsxs("div",{className:"flex gap-4 items-center",children:[m.jsx("img",{src:"/AdmireLED/logo.png",alt:"Company Logo",className:"h-16 w-auto object-contain"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-slate-900 uppercase tracking-wide",children:Ft.COMPANY.NAME}),m.jsxs("div",{className:"text-[10px] text-slate-600 mt-1 space-y-0.5",children:[m.jsx("p",{children:Ft.COMPANY.ADDRESS_1}),m.jsx("p",{children:Ft.COMPANY.ADDRESS_2}),m.jsxs("p",{children:["Email: ",Ft.COMPANY.EMAIL," | Web: ",Ft.COMPANY.WEB]})]})]})]})}),u.map((R,q)=>{const{finalWidth:U,finalHeight:W,totalCabinets:S,moduleType:J={},cabinetType:se={},processor:me,screenQty:re,totalProjectSell:ce,gridCols:A,gridRows:N,commercials:k}=R,j=Number(U),P=Number(W),M=j*P,C=M*10.7639,Oe=Number(J.pitch||0),Ue=Oe>0?Math.round(j*1e3/Oe):0,X=Oe>0?Math.round(P*1e3/Oe):0,he=(J.weight||0)*M,Te=(se.weight||0)*S,Me=he+Te,ze=(J.avgPower||0)*M,V=(J.maxPower||0)*M,ee=k||{sellProcTotal:0,sellInstallTotal:0,sellStructureTotal:0},ge=ce/(re||1),K=(ee.sellProcTotal||0)/(re||1),te=(ee.sellInstallTotal||0)/(re||1),ae=(ee.sellStructureTotal||0)/(re||1),pe=ge-K-te-ae,Ee=pe*.02,ar=[{name:"LED Panel",rate:pe-Ee},{name:"Processor",rate:K},{name:"Installation",rate:te},{name:"Spares (2%)",rate:Ee},{name:"Structure",rate:ae}].filter(Ut=>Ut.rate>0);return m.jsxs("div",{className:"mb-10 pb-6 border-b-2 border-slate-100 break-inside-avoid print-break-avoid",children:[l&&m.jsx("div",{className:"mb-4 pb-2 border-b border-teal-500",children:m.jsxs("h2",{className:"text-lg font-bold text-teal-800 uppercase",children:["Configuration #",q+1]})}),m.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2",children:"Project Details"}),m.jsxs("div",{className:"grid grid-cols-3 gap-y-1 text-[11px]",children:[m.jsx("span",{className:"font-semibold text-slate-500",children:"Client:"})," ",m.jsx("span",{className:"col-span-2 font-bold",children:p}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Project:"})," ",m.jsx("span",{className:"col-span-2 font-bold",children:h}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Screen Size:"}),m.jsxs("span",{className:"col-span-2",children:[j,"m x ",P,"m ",m.jsxs("span",{className:"text-slate-400",children:["/ ",(j*3.28084).toFixed(2),"ft x ",(P*3.28084).toFixed(2),"ft"]})]}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Quantity:"})," ",m.jsxs("span",{className:"col-span-2",children:[re," Nos"]})]}),m.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mt-4 mb-2",children:"Module & Cabinet"}),m.jsxs("div",{className:"grid grid-cols-3 gap-y-1 text-[11px]",children:[m.jsx("span",{className:"font-semibold text-slate-500",children:"Module:"})," ",m.jsxs("span",{className:"col-span-2",children:[J.brand," P",J.pitch]}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Mod Size:"})," ",m.jsxs("span",{className:"col-span-2",children:[J.width," x ",J.height," mm"]}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Lamp:"})," ",m.jsx("span",{className:"col-span-2",children:J.lampMake||"-"}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Cabinet:"})," ",m.jsx("span",{className:"col-span-2",children:se.material||"Standard"}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Cab Size:"})," ",m.jsxs("span",{className:"col-span-2",children:[se.width," x ",se.height," mm"]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2",children:"Screen Specifications"}),m.jsxs("div",{className:"grid grid-cols-3 gap-y-1 text-[11px]",children:[m.jsx("span",{className:"font-semibold text-slate-500",children:"Resolution:"})," ",m.jsxs("span",{className:"col-span-2",children:[Ue," x ",X," pixels"]}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Total Area:"})," ",m.jsxs("span",{className:"col-span-2",children:[C.toFixed(2)," Sq.ft / ",M.toFixed(2)," Sq.m"]}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Total Weight:"})," ",m.jsxs("span",{className:"col-span-2",children:[Me.toFixed(1)," kg"]}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Avg Power:"})," ",m.jsxs("span",{className:"col-span-2",children:[ze.toFixed(0)," Watts"]}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Max Power:"})," ",m.jsxs("span",{className:"col-span-2",children:[V.toFixed(0)," Watts"]}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Brightness:"})," ",m.jsxs("span",{className:"col-span-2",children:[J.brightness," nits"]}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Refresh Rate:"})," ",m.jsxs("span",{className:"col-span-2",children:[J.refreshRate," Hz"]}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Controller:"})," ",m.jsx("span",{className:"col-span-2",children:me?`${me.brand} ${me.model}`:"Standard"}),m.jsx("span",{className:"font-semibold text-slate-500",children:"Viewing:"})," ",m.jsxs("span",{className:"col-span-2",children:["H: ",J.viewAngleH," / V: ",J.viewAngleV,""]}),m.jsx("span",{className:"font-semibold text-slate-500",children:"IP Rating:"})," ",m.jsxs("span",{className:"col-span-2",children:["Front: IP",J.ipFront," / Back: IP",J.ipBack]})]})]})]}),m.jsxs("div",{className:"mb-2 break-inside-avoid print-break-avoid",children:[m.jsxs("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2 pb-1",children:["Commercial Proposal ",l?`(Config #${q+1})`:""]}),m.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-[11px]",children:[m.jsx("thead",{className:"bg-slate-800 text-white",children:m.jsxs("tr",{children:[m.jsx("th",{className:"p-2 border border-slate-600 text-left w-12",children:"#"}),m.jsx("th",{className:"p-2 border border-slate-600 text-left",children:"Item Description"}),m.jsx("th",{className:"p-2 border border-slate-600 text-right w-32",children:"Amount (1 Screen)"}),m.jsxs("th",{className:"p-2 border border-slate-600 text-right w-32",children:["Amount (",re," Screens)"]})]})}),m.jsxs("tbody",{children:[ar.map((Ut,yn)=>m.jsxs("tr",{children:[m.jsx("td",{className:"p-2 border border-slate-300 text-center",children:yn+1}),m.jsx("td",{className:"p-2 border border-slate-300 font-bold",children:Ut.name}),m.jsx("td",{className:"p-2 border border-slate-300 text-right",children:Le(Ut.rate,t)}),m.jsx("td",{className:"p-2 border border-slate-300 text-right font-bold",children:Le(Ut.rate*re,t)})]},yn)),m.jsxs("tr",{className:"bg-slate-100",children:[m.jsx("td",{colSpan:"3",className:"p-2 border border-slate-300 text-right font-bold uppercase",children:"Subtotal (Excl. GST)"}),m.jsx("td",{className:"p-2 border border-slate-300 text-right font-bold text-sm",children:Le(ce,t)})]})]})]})]})]},q)}),l&&m.jsx("div",{className:"mb-8 break-inside-avoid print-break-avoid",children:m.jsxs("div",{className:"bg-slate-800 text-white p-4 rounded-lg flex justify-between items-center shadow-lg",children:[m.jsx("div",{className:"text-lg font-bold uppercase tracking-wide",children:"Grand Total"}),m.jsxs("div",{className:"text-2xl font-bold",children:[Le(b,t)," ",m.jsx("span",{className:"text-xs font-normal opacity-70",children:"(Excl. GST)"})]})]})}),m.jsxs("div",{className:"mt-8 break-inside-avoid print-break-avoid",children:[m.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mb-2 pb-1",children:"Terms & Conditions"}),m.jsx("div",{className:"text-[10px] text-slate-600 space-y-3",children:m.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-y-2 gap-x-4",children:[m.jsx("div",{className:"font-bold text-slate-800",children:"PRICE"}),m.jsx("div",{children:y.price}),m.jsx("div",{className:"font-bold text-slate-800",children:"PAYMENT"}),m.jsx("div",{children:(y.payment||[]).map((R,q)=>m.jsxs("span",{children:[R.percent,"% ",R.name,q<(y.payment||[]).length-1?", ":""]},q))}),m.jsx("div",{className:"font-bold text-slate-800",children:"DELIVERY"}),m.jsxs("div",{children:[y.deliveryWeeks," weeks"]}),m.jsx("div",{className:"font-bold text-slate-800",children:"GST"}),m.jsxs("div",{children:["Extra as applicable (currently ",Ft.DEFAULTS.GST_RATE,"%)"]}),m.jsx("div",{className:"font-bold text-slate-800",children:"WARRANTY"}),m.jsx("div",{className:"text-justify leading-snug",children:Ft.TEXT.WARRANTY})]})}),m.jsx("h3",{className:"font-bold text-slate-700 uppercase border-b border-slate-300 mt-4 mb-2 pb-1",children:"Client's Scope"}),m.jsxs("div",{className:"text-[10px] text-slate-600 grid gap-y-2",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-bold text-slate-800 block",children:"Structure:"}),Ft.TEXT.SCOPE_STRUCTURE]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-bold text-slate-800 block",children:"Electricity:"}),Ft.TEXT.SCOPE_ELEC]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-bold text-slate-800 block",children:"Internet:"}),Ft.TEXT.SCOPE_NET]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-bold text-slate-800 block",children:"Software:"}),Ft.TEXT.SCOPE_SOFT]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-bold text-slate-800 block",children:"Permissions:"}),Ft.TEXT.SCOPE_PERM]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-bold text-slate-800 block",children:"Computer:"}),Ft.TEXT.SCOPE_PC]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-bold text-slate-800 block",children:"Validity:"}),Ft.TEXT.VALIDITY]})]}),m.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-200 flex justify-between items-end",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"h-12 mb-2"}),m.jsx("p",{className:"text-[10px] font-bold border-t border-slate-400 px-4 pt-1",children:"Client Acceptance"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"h-12 mb-2"}),m.jsx("p",{className:"text-[10px] font-bold border-t border-slate-400 px-4 pt-1",children:"For Admire Sign & Display Pvt. Ltd."})]})]})]})]});return m.jsxs(Ht.Fragment,{children:[m.jsx("div",{className:"screen-preview-wrapper",children:E(!1)}),gN.createPortal(m.jsx("div",{className:"print-only-portal",children:E(!0)}),document.body)]})},l3=({user:s,inventory:e,transactions:t,exchangeRate:r,onLoadQuote:a})=>{const[l,u]=Ht.useState([]),[p,h]=Ht.useState(null);Ht.useEffect(()=>{if(!s)return;const T=jr.collection("artifacts").doc(Ms).collection("public").doc("data").collection("quotes").orderBy("updatedAt","desc").onSnapshot(R=>{u(R.docs.map(q=>({id:q.id,...q.data()})))});return()=>T()},[s]);const y=async T=>{confirm("Are you sure you want to delete this quote?")&&await jr.collection("artifacts").doc(Ms).collection("public").doc("data").collection("quotes").doc(T).delete()},b=T=>{if(T.allScreensData){h({allScreensData:T.allScreensData,client:T.client,project:T.project});return}const R=T.calculatorState;if(R.screens&&R.screens.length>0){const U=R.screens.map(W=>{const S={...R,...W};return xo(S,e,t,r)}).filter(W=>W!==null);if(U.length>0){const W={totalProjectCost:U.reduce((S,J)=>S+J.totalProjectCost,0),totalProjectSell:U.reduce((S,J)=>S+J.totalProjectSell,0),totalLEDSell:U.reduce((S,J)=>S+J.matrix.led.sell*J.screenQty,0),totalServicesSell:U.reduce((S,J)=>S+(J.matrix.sell.total-J.matrix.led.sell*J.screenQty),0),totalMargin:0,totalScreenQty:U.reduce((S,J)=>S+Number(J.screenQty),0),calculations:U,screenConfigs:R.screens};W.totalMargin=W.totalProjectSell-W.totalProjectCost,h({allScreensData:W,client:T.client,project:T.project});return}}const q=xo(R,e,t,r);q?h({data:q,client:T.client,project:T.project}):alert("Could not calculate quote. Inventory items might be missing.")},E=T=>{let R=[],q=0,U=0;if(T.allScreensData&&T.allScreensData.calculations)R=T.allScreensData.calculations,q=T.allScreensData.totalProjectSell,U=T.allScreensData.totalProjectCost;else{const ce=T.calculatorState;if(ce&&ce.screens&&ce.screens.length>0)R=ce.screens.map(A=>{const N={...ce,...A};return xo(N,e,t,r)}).filter(A=>A!==null);else{const A=xo(ce,e,t,r);A&&(R=[A])}R.length>0&&(U=R.reduce((A,N)=>A+N.totalProjectCost,0),q=R.reduce((A,N)=>A+N.totalProjectSell,0))}if(R.length===0)return alert("Calculation failed. Inventory items might be missing.");const W=(T.project||"").replace(/,/g," "),S=(T.client||"").replace(/,/g," ");let J=`Project,${W}
Client,${S}
Date,${new Date().toLocaleDateString()}

`;R.forEach((ce,A)=>{J+=`SCREEN CONFIGURATION #${A+1}
`,J+=`Dimensions,${ce.finalWidth}m x ${ce.finalHeight}m
`,J+=`Quantity,${ce.screenQty}
`,J+=`
Bill of Materials (Config #${A+1})
Component,Specification,Qty/Scrn,Total Qty,Rate,Total Amount
`,ce.detailedItems.forEach(N=>{const k=(N.name||"").replace(/"/g,'""'),j=(N.spec||"").replace(/"/g,'""'),P=N.qty*ce.screenQty,M=N.total*ce.screenQty;J+=`"${k}","${j}",${N.qty},${P},${N.unit.toFixed(2)},${M.toFixed(2)}
`}),J+=`
Subtotal (Cost),${ce.totalProjectCost.toFixed(2)}
`,J+=`Subtotal (Sell),${ce.totalProjectSell.toFixed(2)}
`,J+=`
--------------------------------

`}),J+=`PROJECT SUMMARY
`,J+=`Grand Total Cost,${U.toFixed(2)}
`,J+=`Grand Total Sell,${q.toFixed(2)}
`,J+=`Net Margin,${(q-U).toFixed(2)}
`;const se=new Blob([J],{type:"text/csv;charset=utf-8;"}),me=window.URL.createObjectURL(se),re=document.createElement("a");re.href=me,re.download=`${S.replace(/[^a-z0-9]/gi,"_")}_${W.replace(/[^a-z0-9]/gi,"_")}_BOM.csv`,re.click(),window.URL.revokeObjectURL(me)};return m.jsxs("div",{className:"p-4 md:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:[p&&m.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:m.jsxs("div",{className:"bg-white max-w-4xl w-full h-[90vh] rounded-lg shadow-2xl flex flex-col",children:[m.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-100 rounded-t-lg",children:[m.jsxs("h2",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[m.jsx(Oy,{size:20})," View Saved Quote"]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>h(null),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded",children:"Close"}),m.jsxs("button",{onClick:()=>{const T=document.title;document.title=`${p.client}_${p.project}_Quote`.replace(/[^a-zA-Z0-9_]/g,"_"),window.print(),document.title=T},className:"px-4 py-2 bg-teal-600 text-white hover:bg-teal-700 rounded flex items-center gap-2",children:[m.jsx(Bf,{size:16})," Print / PDF"]})]})]}),m.jsx("div",{className:"flex-1 overflow-auto p-8 bg-slate-200",children:m.jsx(yN,{data:p.data?{...p.data,clientName:p.client,projectName:p.project}:null,allScreensData:p.allScreensData?{...p.allScreensData,clientName:p.client,projectName:p.project}:null,currency:"INR",exchangeRate:r})})]})}),m.jsx("div",{className:"flex justify-between items-center mb-6",children:m.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-slate-800 dark:text-white",children:[m.jsx(My,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})," Saved Quotes"]})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.map(T=>{const R=T.calculatorState||{};R.unit;const q=R.selectedPitch||"N/A",U=R.selectedIndoor==="true";return m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden flex flex-col",children:[m.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white line-clamp-1",title:T.project,children:T.project||"Untitled"}),m.jsx("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:T.client||"No Client"})]}),m.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${U?"bg-blue-100 text-blue-700":"bg-amber-100 text-amber-700"}`,children:U?"Indoor":"Outdoor"})]}),m.jsx("div",{className:"text-xs text-slate-400 mb-4",children:new Date(T.updatedAt?.seconds*1e3).toLocaleString()}),m.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-2 rounded-lg mb-4 space-y-1.5 flex-1",children:T.allScreensData?.calculations?T.allScreensData.calculations.map((W,S)=>m.jsxs("div",{className:"flex justify-between items-center text-xs border-b border-slate-100 dark:border-slate-600 last:border-0 pb-1 last:pb-0",children:[m.jsxs("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:["Screen #",S+1," ",m.jsxs("span",{className:"text-slate-400 font-normal",children:["(",W.finalWidth,"x",W.finalHeight,"m / ",(Number(W.finalWidth)*3.28084).toFixed(2),"x",(Number(W.finalHeight)*3.28084).toFixed(2),"ft ",W.screenQty,")"]})]}),m.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:Le(W.totalProjectSell,"INR",!0)})]},S)):m.jsxs("div",{className:"flex justify-between items-center text-xs",children:[m.jsxs("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:["Screen #1 ",m.jsxs("span",{className:"text-slate-400 font-normal",children:["(P",q," ",R.screenQty||1,")"]})]}),m.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:Le(T.finalAmount,"INR",!0)})]})}),m.jsxs("div",{className:"flex justify-between items-end pt-2 border-t border-slate-100 dark:border-slate-700 mt-auto",children:[m.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Total Estimate"}),m.jsx("span",{className:"text-xl font-bold text-teal-600 dark:text-teal-400",children:Le(T.finalAmount,"INR")})]})]}),m.jsxs("div",{className:"grid grid-cols-5 border-t border-slate-100 dark:border-slate-700 divide-x divide-slate-100 dark:divide-slate-700 bg-slate-50 dark:bg-slate-800",children:[m.jsxs("button",{onClick:()=>b(T),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700 transition-colors",title:"View",children:[m.jsx(Oy,{size:16})," ",m.jsx("span",{className:"hidden sm:inline",children:"View"})]}),m.jsxs("button",{onClick:()=>a(T,!1),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-blue-600 dark:text-blue-400 hover:bg-white dark:hover:bg-slate-700 transition-colors",title:"Edit",children:[m.jsx(Gl,{size:16})," ",m.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),m.jsxs("button",{onClick:()=>E(T),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-green-600 dark:text-green-400 hover:bg-white dark:hover:bg-slate-700 transition-colors",title:"Excel",children:[m.jsx(mC,{size:16})," ",m.jsx("span",{className:"hidden sm:inline",children:"Excel"})]}),m.jsxs("button",{onClick:()=>a(T,!0),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-slate-500 hover:bg-white dark:hover:bg-slate-700 transition-colors",title:"Clone",children:[m.jsx(jy,{size:16})," ",m.jsx("span",{className:"hidden sm:inline",children:"Clone"})]}),m.jsxs("button",{onClick:()=>y(T.id),className:"py-3 flex flex-col items-center justify-center gap-1 text-[10px] font-bold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Delete",children:[m.jsx(ui,{size:16})," ",m.jsx("span",{className:"hidden sm:inline",children:"Del"})]})]})]},T.id)}),l.length===0&&m.jsx("p",{className:"text-center text-slate-400 py-10 col-span-full",children:"No saved quotes found."})]})]})},c3=({data:s,allScreensData:e,inventory:t=[],transactions:r=[]})=>{if(!s&&!e)return null;const a=e&&e.calculations&&e.calculations.length>1;if(!a&&!s)return null;const l=(a?e.clientName:s?.clientName)||"",u=(a?e.projectName:s?.projectName)||"",p=(b,E,T)=>{const{detailedItems:R,screenQty:q,moduleType:U,cabinetType:W,finalWidth:S,finalHeight:J}=b;return m.jsxs("div",{className:"mb-8 break-inside-avoid print-break-avoid",children:[a&&m.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg mb-3 border border-teal-200 dark:border-teal-800",children:[m.jsxs("h3",{className:"font-bold text-teal-800 dark:text-teal-300 text-sm",children:["Screen Configuration #",E+1]}),m.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2 text-xs text-teal-700 dark:text-teal-400",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-semibold",children:"Target:"})," ",T.targetWidth,"",T.targetHeight,T.unit||"m"]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-semibold",children:"Final:"})," ",S,"m  ",J,"m"]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-semibold",children:"Quantity:"})," ",q," screens"]}),U&&m.jsxs("div",{children:[m.jsx("span",{className:"font-semibold",children:"Pitch:"})," P",U.pitch]})]})]}),m.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-[10px]",children:[m.jsx("thead",{className:"bg-slate-100 text-slate-700",children:m.jsxs("tr",{children:[m.jsx("th",{className:"p-2 border border-slate-300 text-left w-10",children:"#"}),m.jsx("th",{className:"p-2 border border-slate-300 text-left w-32",children:"Component"}),m.jsx("th",{className:"p-2 border border-slate-300 text-left",children:"Specification / Details"}),m.jsx("th",{className:"p-2 border border-slate-300 text-center w-16",children:"Qty/Scrn"}),m.jsx("th",{className:"p-2 border border-slate-300 text-center w-16",children:"Total Qty"})]})}),m.jsx("tbody",{children:R.map((se,me)=>{let re=null;return se.id==="modules"&&U&&(re=m.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[m.jsxs("span",{children:["Size: ",U.width,"x",U.height,"mm"]}),m.jsxs("span",{children:["LED: ",U.ledType||"-"]}),m.jsxs("span",{children:["Bright: ",U.brightness," nits"]}),m.jsxs("span",{children:["Ref: ",U.refreshRate," Hz"]}),m.jsxs("span",{children:["Ang: ",U.viewAngleH,"/",U.viewAngleV]}),m.jsxs("span",{children:["IP: ",U.ipFront,"/",U.ipBack]}),m.jsxs("span",{children:["Pwr: ",U.avgPower,"/",U.maxPower," W"]}),m.jsxs("span",{children:["Wt: ",U.weight," kg"]})]})),se.id==="cabinets"&&W&&(re=m.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[m.jsxs("span",{children:["Size: ",W.width,"x",W.height,"mm"]}),m.jsxs("span",{children:["Mat: ",W.material]}),m.jsxs("span",{children:["Weight: ",W.weight," kg"]})]})),m.jsxs("tr",{children:[m.jsx("td",{className:"p-2 border border-slate-300 text-center",children:me+1}),m.jsx("td",{className:"p-2 border border-slate-300 font-bold align-top",children:se.name}),m.jsxs("td",{className:"p-2 border border-slate-300 align-top",children:[m.jsx("div",{className:"font-semibold",children:se.spec}),re]}),m.jsx("td",{className:"p-2 border border-slate-300 text-center align-top",children:se.qty}),m.jsx("td",{className:"p-2 border border-slate-300 text-center font-bold align-top",children:se.qty*q})]},me)})})]})]},E)},h=()=>{if(!a)return null;const b={},E=R=>r?r.filter(q=>q.itemId===R).reduce((q,U)=>q+(U.type==="in"?Number(U.qty):-Number(U.qty)),0):0;e.calculations.forEach((R,q)=>{R.detailedItems.forEach(U=>{const W=U.inventoryId?U.inventoryId:`${U.name}_${U.spec}`;b[W]||(b[W]={name:U.name,spec:U.spec,inventoryId:U.inventoryId,id:U.id,totalQty:0});const S=U.qty*R.screenQty;b[W].totalQty+=S})});const T=Object.values(b);return m.jsxs("div",{className:"mt-8 break-inside-avoid print-break-avoid border-t-4 border-slate-800 pt-6",children:[m.jsx("div",{className:"bg-slate-800 text-white p-3 rounded-t-lg mb-0 flex justify-between items-center",children:m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-lg uppercase tracking-wide",children:"Consolidated Bill of Materials"}),m.jsx("p",{className:"text-xs text-slate-300 mt-1",children:"Combined quantities across all screen configurations"})]})}),m.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-[10px]",children:[m.jsx("thead",{className:"bg-slate-700 text-white",children:m.jsxs("tr",{children:[m.jsx("th",{className:"p-2 border border-slate-600 text-left w-10",children:"#"}),m.jsx("th",{className:"p-2 border border-slate-600 text-left w-32",children:"Component"}),m.jsx("th",{className:"p-2 border border-slate-600 text-left",children:"Specification"}),m.jsx("th",{className:"p-2 border border-slate-600 text-center w-16",children:"Stock"}),m.jsx("th",{className:"p-2 border border-slate-600 text-center w-16",children:"Required"}),m.jsx("th",{className:"p-2 border border-slate-600 text-center w-16",children:"Balance"})]})}),m.jsx("tbody",{children:T.map((R,q)=>{const U=R.inventoryId?E(R.inventoryId):0,W=U-R.totalQty,S=R.inventoryId?t.find(se=>se.id===R.inventoryId):null;let J=null;return S&&(S.type==="module"?J=m.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[m.jsxs("span",{children:["Size: ",S.width,"x",S.height,"mm"]}),m.jsxs("span",{children:["LED: ",S.ledType||"-"]}),m.jsxs("span",{children:["Bright: ",S.brightness," nits"]}),m.jsxs("span",{children:["Ref: ",S.refreshRate," Hz"]}),m.jsxs("span",{children:["Ang: ",S.viewAngleH,"/",S.viewAngleV]}),m.jsxs("span",{children:["IP: ",S.ipFront,"/",S.ipBack]}),m.jsxs("span",{children:["Pwr: ",S.avgPower,"/",S.maxPower," W"]}),m.jsxs("span",{children:["Wt: ",S.weight," kg"]})]}):S.type==="cabinet"?J=m.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[m.jsxs("span",{children:["Size: ",S.width,"x",S.height,"mm"]}),m.jsxs("span",{children:["Mat: ",S.material]}),m.jsxs("span",{children:["Weight: ",S.weight," kg"]})]}):S.type==="ready"&&(J=m.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-1 text-[9px] text-slate-500",children:[m.jsxs("span",{children:["Size: ",S.width,"x",S.height,"mm"]}),m.jsxs("span",{children:["Mat: ",S.material||"-"]}),m.jsxs("span",{children:["Bright: ",S.brightness," nits"]}),m.jsxs("span",{children:["Ref: ",S.refreshRate," Hz"]}),m.jsxs("span",{children:["IP: ",S.ipFront,"/",S.ipBack]})]}))),m.jsxs("tr",{className:q%2===0?"bg-slate-50":"bg-white",children:[m.jsx("td",{className:"p-2 border border-slate-300 text-center",children:q+1}),m.jsx("td",{className:"p-2 border border-slate-300 font-bold align-top",children:R.name}),m.jsxs("td",{className:"p-2 border border-slate-300 align-top",children:[m.jsx("div",{className:"font-semibold",children:R.spec}),J]}),m.jsx("td",{className:"p-2 border border-slate-300 text-center font-medium text-slate-600 align-top",children:R.inventoryId?U:"-"}),m.jsx("td",{className:"p-2 border border-slate-300 text-center font-bold align-top text-slate-800",children:R.totalQty}),m.jsx("td",{className:`p-2 border border-slate-300 text-center font-bold align-top ${W>=0?"text-green-600":"text-red-600"}`,children:R.inventoryId?W:"-"})]},q)})})]}),m.jsx("div",{className:"mt-4 p-3 bg-teal-50 dark:bg-teal-900/20 rounded-lg border border-teal-200 dark:border-teal-800",children:m.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-bold text-teal-800 dark:text-teal-300",children:"Total Configurations:"}),m.jsx("span",{className:"ml-2 font-bold text-lg text-teal-600 dark:text-teal-400",children:e.calculations.length})]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-bold text-teal-800 dark:text-teal-300",children:"Total Screens:"}),m.jsx("span",{className:"ml-2 font-bold text-lg text-teal-600 dark:text-teal-400",children:e.totalScreenQty})]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-bold text-teal-800 dark:text-teal-300",children:"Unique Components:"}),m.jsx("span",{className:"ml-2 font-bold text-lg text-teal-600 dark:text-teal-400",children:T.length})]})]})})]})},y=b=>m.jsxs("div",{className:`p-8 max-w-[210mm] mx-auto bg-white min-h-screen text-slate-800 font-sans text-xs ${b?"print-version-container p-0 w-full":""}`,children:[m.jsxs("div",{className:"flex justify-between items-start mb-6 border-b-2 border-slate-800 pb-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("img",{src:"/AdmireLED/logo.png",alt:"Logo",className:"h-12 w-auto"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-slate-900 uppercase tracking-wide",children:"Bill of Materials"}),m.jsxs("div",{className:"mt-1 space-y-0.5",children:[m.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Project: ",m.jsx("span",{className:"font-normal",children:u})]}),m.jsxs("p",{className:"text-sm font-bold text-slate-700",children:["Client: ",m.jsx("span",{className:"font-normal",children:l})]}),a&&m.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[e.calculations.length," Configs  ",e.totalScreenQty," Screens"]}),!a&&s.moduleType&&m.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["P",s.moduleType.pitch," ",s.moduleType.indoor?"Indoor":"Outdoor","  ",s.finalWidth,"m x ",s.finalHeight,"m  Qty: ",s.screenQty]})]})]})]}),m.jsx("div",{className:"text-right",children:m.jsx("p",{className:"text-xs text-slate-500",children:new Date().toLocaleDateString()})})]}),a?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mb-6",children:m.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase mb-3 pb-2 border-b border-slate-300",children:"Individual Screen Configurations"})}),e.calculations.map((E,T)=>p(E,T,e.screenConfigs?e.screenConfigs[T]:{})),h()]}):p(s,0,{}),m.jsx("div",{className:"mt-8 text-[10px] text-slate-400 border-t border-slate-200 pt-2 text-center",children:"Internal Document  Generated by Admire Sign LED Calculator"})]});return m.jsxs(Ht.Fragment,{children:[m.jsx("div",{className:"screen-preview-wrapper",children:y(!1)}),gN.createPortal(m.jsx("div",{className:"print-only-portal",children:y(!0)}),document.body)]})},u3=(s,e)=>{const[t,r]=Ht.useState(s);return Ht.useEffect(()=>{const a=setTimeout(()=>{r(s)},e);return()=>{clearTimeout(a)}},[s,e]),t},d3=({calculation:s,state:e,updateState:t,updateExtra:r,updateScreenProp:a,inventory:l,getStock:u,overrides:p,onOverride:h,editingRow:y,setEditingRow:b,onClearOverride:E})=>{const T=e.screens[e.activeScreenIndex],{screenQty:R,selectedPitch:q,selectedModuleId:U,selectedCabinetId:W,selectedCardId:S,selectedSMPSId:J,selectedProcId:se,extraComponents:me,extras:re,commercials:ce}=T,{assemblyMode:A,selectedIndoor:N}=e,k=()=>Math.random().toString(36).substr(2,9).toUpperCase(),j=N==="true",P=l.filter(Q=>Q.type==="module"&&Q.indoor===j),M=[...new Set(P.map(Q=>Q.pitch))].sort((Q,Se)=>Q-Se),C=q?P.filter(Q=>Q.pitch==q):[],Oe=l.find(Q=>Q.id===U),Ue=l.filter(Q=>Q.type!=="cabinet"?!1:Oe?Q.width%Oe.width===0&&Q.height%Oe.height===0:!0),X=l.filter(Q=>Q.type==="ready"&&Q.indoor===j),he=Q=>{const Se=(ue,kt)=>a(e.activeScreenIndex,ue,kt);if(Q.id==="modules")return m.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[m.jsxs("select",{value:q,onChange:ue=>{Se("selectedPitch",ue.target.value),Se("selectedModuleId","")},className:"w-full md:w-20 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[m.jsx("option",{value:"",children:"Pitch"}),M.map(ue=>m.jsxs("option",{value:ue,children:["P",ue]},ue))]}),m.jsxs("select",{value:U,onChange:ue=>Se("selectedModuleId",ue.target.value),disabled:!q,className:"w-full md:flex-1 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white disabled:opacity-50",children:[m.jsx("option",{value:"",children:"Select Module..."}),C.map(ue=>m.jsxs("option",{value:ue.id,children:[ue.brand," ",ue.model," (",u(ue.id),")"]},ue.id))]})]});if(Q.id==="cabinets")return m.jsxs("select",{value:W,onChange:ue=>Se("selectedCabinetId",ue.target.value),disabled:!Oe,className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white disabled:opacity-50",children:[m.jsx("option",{value:"",children:"Select Cabinet..."}),Ue.map(ue=>m.jsxs("option",{value:ue.id,children:[ue.brand," ",ue.model," (",ue.width,"x",ue.height,") - Stock: ",u(ue.id)]},ue.id))]});if(Q.id==="cards")return m.jsxs("select",{value:S,onChange:ue=>Se("selectedCardId",ue.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[m.jsx("option",{value:"",children:"Select Card..."}),l.filter(ue=>ue.type==="card").map(ue=>m.jsxs("option",{value:ue.id,children:[ue.brand," ",ue.model," (",u(ue.id),")"]},ue.id))]});if(Q.id==="smps")return m.jsxs("select",{value:J,onChange:ue=>Se("selectedSMPSId",ue.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[m.jsx("option",{value:"",children:"Select SMPS..."}),l.filter(ue=>ue.type==="smps").map(ue=>m.jsxs("option",{value:ue.id,children:[ue.brand," ",ue.model," (",u(ue.id),")"]},ue.id))]});if(Q.id==="processor")return m.jsxs("div",{className:"flex flex-col gap-2 md:gap-1",children:[m.jsxs("select",{value:se,onChange:ue=>Se("selectedProcId",ue.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[m.jsx("option",{value:"",children:"Select Processor..."}),l.filter(ue=>ue.type==="processor").map(ue=>m.jsxs("option",{value:ue.id,children:[ue.brand," ",ue.model," (",u(ue.id),")"]},ue.id))]}),m.jsxs("div",{className:"flex items-center gap-2 md:gap-1",children:[m.jsx("span",{className:"text-xs md:text-[10px] text-green-600 font-bold",children:"Sell:"}),m.jsx("input",{type:"number",className:"flex-1 md:w-20 p-2 md:p-0.5 text-xs border border-green-200 rounded bg-green-50 text-green-800",value:ce.processor?.val||0,onChange:ue=>a(e.activeScreenIndex,"commercials",{...ce,processor:{...ce.processor,val:ue.target.value}})})]})]});if(Q.id==="ready")return m.jsxs("select",{value:T.readyId,onChange:ue=>Se("readyId",ue.target.value),className:"w-full p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[m.jsx("option",{value:"",children:"Select Screen Model..."}),X.map(ue=>m.jsxs("option",{value:ue.id,children:[ue.brand," ",ue.model," (P",ue.pitch,")"]},ue.id))]});const He=me?me.findIndex(ue=>ue.id===Q.id):-1;return He!==-1?m.jsxs("div",{className:"flex gap-1 items-center",children:[m.jsxs("select",{value:me[He].componentId,onChange:ue=>{const kt=[...me];kt[He].componentId=ue.target.value,Se("extraComponents",kt)},className:"flex-1 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[m.jsx("option",{value:"",children:"Select..."}),["module","cabinet","card","smps"].map(ue=>{const kt=l.filter(_n=>_n.type===ue).sort((_n,$t)=>(_n.brand+" "+_n.model).localeCompare($t.brand+" "+$t.model));return kt.length===0?null:m.jsx("optgroup",{label:ue==="smps"?"SMPS":ue.toUpperCase(),children:kt.map(_n=>m.jsxs("option",{value:_n.id,children:[_n.brand," ",_n.model]},_n.id))},ue)})]}),m.jsxs("select",{value:me[He].type,onChange:ue=>{const kt=[...me];kt[He].type=ue.target.value,Se("extraComponents",kt)},className:"w-16 p-2 md:p-1 text-xs border rounded bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[m.jsx("option",{value:"screen",children:"/Scrn"}),m.jsx("option",{value:"cabinet",children:"/Cab"})]}),m.jsx("button",{type:"button",onClick:()=>Se("extraComponents",me.filter((ue,kt)=>kt!==He)),className:"text-red-400 hover:text-red-600",children:m.jsx(ui,{size:16})})]}):m.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:[Q.name," ",m.jsxs("span",{className:"text-[10px] text-slate-400 font-normal",children:["(",Q.spec,")"]})]})},Te=Q=>s?.calculatedExtras?.[Q]||0,Me=s?.matrix?.sqft?.perScreen||1;let ze=s?s.detailedItems:A==="assembled"?[{id:"modules",type:"led",name:"Modules",qty:0,unit:0,total:0},{id:"cabinets",type:"led",name:"Cabinets",qty:0,unit:0,total:0},{id:"cards",type:"led",name:"Receiving Cards",qty:0,unit:0,total:0},{id:"smps",type:"led",name:"SMPS",qty:0,unit:0,total:0},{id:"processor",type:"service",name:"Processor",qty:1,unit:0,total:0}]:[{id:"ready",type:"led",name:"Ready Unit",qty:0,unit:0,total:0},{id:"processor",type:"service",name:"Processor",qty:1,unit:0,total:0}];!s&&me?.length>0&&(ze=[...ze,...me.map(Q=>({id:Q.id,type:"led",name:"Extra",spec:"Select...",qty:Q.qty,unit:0,total:0}))]);const V=ze.filter(Q=>Q.type==="led"),ee=(Array.isArray(re)?re:[]).reduce((Q,Se)=>Q+Te(Se.id),0),K=V.reduce((Q,Se)=>Q+Se.total*R,0)+ee*R,te=K/(R||1),ae=te/Me,pe=ze.filter(Q=>Q.type!=="led"),Ee=Te("install"),Re=Te("structure"),Ut=pe.reduce((Q,Se)=>Q+Se.total*R,0)+(Ee+Re)*R,yn=Ut/(R||1),xr=yn/Me,on=K+Ut,Qn=on/(R||1),Cn=Qn/Me,Kn=()=>{const Q={id:k(),name:"New Cost",val:0,type:"abs"};a(e.activeScreenIndex,"extras",[...re||[],Q])},$n=Q=>{const Se=[...re];Se.splice(Q,1),a(e.activeScreenIndex,"extras",Se)},We=(Q,Se,He)=>{const ue=[...re];ue[Q]={...ue[Q],[Se]:He},a(e.activeScreenIndex,"extras",ue)},xt=Q=>m.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors ${Q.isOverridden?"bg-amber-50 dark:bg-amber-900/20":""}`,children:[m.jsx("td",{className:"p-2 pl-4",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"flex-1",children:he(Q)}),s&&m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"button",onClick:()=>b(y===Q.id?null:Q.id),className:`p-1 rounded ${y===Q.id?"bg-teal-100 text-teal-700":"text-slate-300 hover:text-teal-600"}`,children:m.jsx(Gl,{size:12})}),Q.isOverridden&&m.jsx("button",{type:"button",onClick:()=>E(Q.id),className:"text-amber-500 hover:text-red-500",children:m.jsx(Ly,{size:12})})]})]})}),m.jsx("td",{className:"p-2 text-right w-24",children:y===Q.id?m.jsx("input",{type:"number",className:"w-full p-1 text-right text-xs border rounded",value:p[Q.id]?.rate??Q.unit,onChange:Se=>h(Q.id,"rate",Se.target.value)}):Le(Q.unit,"INR",!1)}),m.jsx("td",{className:"p-2 text-center border-l border-slate-100 dark:border-slate-700 w-16",children:y===Q.id?m.jsx("input",{type:"number",className:"w-full p-1 text-center text-xs border rounded",value:p[Q.id]?.qty??Q.qty,onChange:Se=>h(Q.id,"qty",Se.target.value)}):Q.qty}),m.jsx("td",{className:"p-2 text-right text-slate-500 w-24",children:Le(Q.total,"INR",!1)}),m.jsx("td",{className:"p-2 text-right font-medium border-l border-slate-100 dark:border-slate-700 w-28",children:Le(Q.total*R,"INR",!1)})]},Q.id),kn=Q=>m.jsxs("div",{className:`bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 mb-3 shadow-sm ${Q.isOverridden?"ring-1 ring-amber-400 bg-amber-50 dark:bg-amber-900/10":""}`,children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:Q.name}),s&&m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"button",onClick:()=>b(y===Q.id?null:Q.id),className:`p-1 rounded ${y===Q.id?"bg-teal-100 text-teal-700":"text-slate-300 hover:text-teal-600"}`,children:m.jsx(Gl,{size:14})}),Q.isOverridden&&m.jsx("button",{type:"button",onClick:()=>E(Q.id),className:"text-amber-500 hover:text-red-500",children:m.jsx(Ly,{size:14})})]})]}),m.jsx("div",{className:"mb-3",children:he(Q)}),m.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs bg-slate-50 dark:bg-slate-700/50 p-2 rounded",children:[m.jsxs("div",{children:[m.jsx("span",{className:"block text-[9px] uppercase text-slate-400 font-bold mb-1",children:"Rate"}),y===Q.id?m.jsx("input",{type:"number",className:"w-full p-1 text-right text-xs border rounded",value:p[Q.id]?.rate??Q.unit,onChange:Se=>h(Q.id,"rate",Se.target.value)}):m.jsx("span",{className:"block font-medium dark:text-slate-200",children:Le(Q.unit,"INR",!1)})]}),m.jsxs("div",{className:"text-center border-l border-slate-200 dark:border-slate-600",children:[m.jsx("span",{className:"block text-[9px] uppercase text-slate-400 font-bold mb-1",children:"Qty"}),y===Q.id?m.jsx("input",{type:"number",className:"w-full p-1 text-center text-xs border rounded",value:p[Q.id]?.qty??Q.qty,onChange:Se=>h(Q.id,"qty",Se.target.value)}):m.jsx("span",{className:"block font-medium dark:text-slate-200",children:Q.qty})]}),m.jsxs("div",{className:"text-right border-l border-slate-200 dark:border-slate-600",children:[m.jsx("span",{className:"block text-[9px] uppercase text-slate-400 font-bold mb-1",children:"Total"}),m.jsx("span",{className:"block font-bold text-teal-600 dark:text-teal-400",children:Le(Q.total*R,"INR",!1)})]})]})]},Q.id);return m.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[m.jsx("div",{className:"hidden md:block overflow-x-auto",children:m.jsxs("table",{className:"w-full text-xs text-left border-collapse",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 font-bold",children:[m.jsx("th",{className:"p-2",children:"Component Selection"}),m.jsx("th",{className:"p-2 text-right",children:"Rate (Cost)"}),m.jsx("th",{className:"p-2 text-center border-l border-slate-200 dark:border-slate-700",children:"Qty/Scrn"}),m.jsx("th",{className:"p-2 text-right",children:"Cost/Scrn"}),m.jsx("th",{className:"p-2 text-right border-l border-slate-200 dark:border-slate-700",children:"Total Cost"})]})}),m.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[m.jsx("tr",{className:"bg-slate-50 dark:bg-slate-800/50",children:m.jsx("td",{colSpan:"5",className:"p-2 font-bold text-teal-700 dark:text-teal-400 uppercase tracking-wider text-[10px]",children:"A. LED Panel & Logistics"})}),V.map(xt),m.jsx("tr",{className:"bg-white dark:bg-slate-900",children:m.jsx("td",{colSpan:"5",className:"p-2 text-center",children:m.jsxs("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"extraComponents",[...me||[],{id:k(),componentId:"",qty:1,type:"screen"}]),className:"text-[10px] text-teal-600 hover:underline flex items-center justify-center gap-1 w-full",children:[m.jsx(go,{size:10})," Add Component to Panel"]})})}),(Array.isArray(re)?re:[]).map((Q,Se)=>m.jsxs("tr",{className:"text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700/50 group",children:[m.jsx("td",{className:"p-2 pl-4",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>$n(Se),className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsx(ui,{size:12})}),m.jsx("input",{type:"text",value:Q.name,onChange:He=>We(Se,"name",He.target.value),className:"text-xs border-b border-transparent hover:border-slate-300 focus:border-teal-500 bg-transparent outline-none w-full text-slate-600 dark:text-slate-300 font-medium"})]})}),m.jsx("td",{className:"p-2 text-right",children:m.jsxs("div",{className:"flex items-center justify-end gap-1",children:[m.jsx("input",{type:"number",value:Q.val,onChange:He=>We(Se,"val",He.target.value),className:"w-16 p-1 text-right text-xs border rounded bg-white dark:bg-slate-800 dark:border-slate-600"}),m.jsx("button",{type:"button",onClick:()=>We(Se,"type",Q.type==="abs"?"pct":"abs"),className:"px-1 text-[10px] font-bold border rounded bg-slate-100 dark:bg-slate-700",children:Q.type==="abs"?"":"%"})]})}),m.jsx("td",{className:"p-2 text-center border-l border-slate-100 dark:border-slate-700 text-[10px] text-slate-400",children:Q.type==="pct"?`${Q.val}%`:"-"}),m.jsx("td",{className:"p-2 text-right",children:Le(Te(Q.id),"INR",!1)}),m.jsx("td",{className:"p-2 text-right border-l border-slate-100 dark:border-slate-700",children:Le(Te(Q.id)*R,"INR",!1)})]},Q.id)),m.jsx("tr",{className:"bg-slate-50 dark:bg-slate-800/20",children:m.jsx("td",{colSpan:"5",className:"p-1 text-center",children:m.jsxs("button",{onClick:Kn,className:"text-[10px] text-blue-600 hover:text-blue-700 font-bold uppercase tracking-wider flex items-center justify-center gap-1 py-1 w-full hover:bg-slate-100 dark:hover:bg-slate-700 rounded transition-colors",children:[m.jsx(go,{size:10})," Add Extra Cost"]})})}),m.jsxs("tr",{className:"bg-teal-50 dark:bg-teal-900/20 font-bold border-t border-teal-100 dark:border-teal-800",children:[m.jsx("td",{className:"p-2 text-right text-teal-800 dark:text-teal-300",children:"Sub-total (LED Panel)"}),m.jsxs("td",{className:"p-2 text-right text-teal-700 dark:text-teal-400 text-[10px] font-normal",children:[Le(ae,"INR"),"/sqft"]}),m.jsx("td",{className:"p-2 text-center border-l border-teal-100 dark:border-teal-800",children:"-"}),m.jsx("td",{className:"p-2 text-right text-teal-800 dark:text-teal-300",children:Le(te,"INR",!1)}),m.jsx("td",{className:"p-2 text-right text-teal-800 dark:text-teal-300 border-l border-teal-100 dark:border-teal-800",children:Le(K,"INR",!1)})]}),m.jsx("tr",{className:"bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700",children:m.jsx("td",{colSpan:"5",className:"p-2 font-bold text-blue-700 dark:text-blue-400 uppercase tracking-wider text-[10px]",children:"B. Additional Costs"})}),pe.map(xt),["installation","structure"].map(Q=>{const Se=Q==="installation"?"install":"structure",He=Q==="installation"?"Installation":"Structure";return m.jsxs("tr",{className:"text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[m.jsx("td",{className:"p-2 pl-4",children:m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-xs font-medium",children:He}),m.jsxs("select",{value:ce[Q]?.unit||"sqft",onChange:ue=>a(e.activeScreenIndex,"commercials",{...ce,[Q]:{...ce[Q],unit:ue.target.value}}),className:"text-[10px] p-0.5 border rounded bg-slate-50 dark:bg-slate-700",children:[m.jsx("option",{value:"sqft",children:"/Sq.Ft"}),m.jsx("option",{value:"screen",children:"/Screen"})]})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Sell:"}),m.jsx("input",{type:"number",className:"w-20 p-0.5 text-xs border border-green-200 rounded bg-green-50 text-green-800",value:ce[Q]?.val||0,onChange:ue=>a(e.activeScreenIndex,"commercials",{...ce,[Q]:{...ce[Q],val:ue.target.value}})})]})]})}),m.jsx("td",{className:"p-2 text-right",children:m.jsxs("div",{className:"flex items-center justify-end gap-1",children:[m.jsx("span",{className:"text-[10px] text-slate-400 mr-1",children:"Cost:"}),m.jsx("input",{type:"number",value:ce[Q]?.cost||0,onChange:ue=>a(e.activeScreenIndex,"commercials",{...ce,[Q]:{...ce[Q],cost:ue.target.value}}),className:"w-16 p-1 text-right text-xs border rounded bg-white dark:bg-slate-800 dark:border-slate-600"}),m.jsx("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"commercials",{...ce,[Q]:{...ce[Q],costType:ce[Q]?.costType==="abs"?"pct":"abs"}}),className:"px-1 text-[10px] font-bold border rounded bg-slate-100 dark:bg-slate-700",children:ce[Q]?.costType==="abs"?"":"%"})]})}),m.jsx("td",{className:"p-2 text-center border-l border-slate-100 dark:border-slate-700 text-xs",children:ce[Q]?.unit==="sqft"?s?.matrix.sqft.perScreen.toFixed(1)||"-":"1"}),m.jsx("td",{className:"p-2 text-right",children:Le(Te(Se),"INR",!1)}),m.jsx("td",{className:"p-2 text-right border-l border-slate-100 dark:border-slate-700",children:Le(Te(Se)*R,"INR",!1)})]},Q)}),m.jsxs("tr",{className:"bg-blue-50 dark:bg-blue-900/20 font-bold border-t border-blue-100 dark:border-blue-800",children:[m.jsx("td",{className:"p-2 text-right text-blue-800 dark:text-blue-300",children:"Sub-total (Additional)"}),m.jsxs("td",{className:"p-2 text-right text-blue-700 dark:text-blue-400 text-[10px] font-normal",children:[Le(xr,"INR"),"/sqft"]}),m.jsx("td",{className:"p-2 text-center border-l border-blue-100 dark:border-blue-800",children:"-"}),m.jsx("td",{className:"p-2 text-right text-blue-800 dark:text-blue-300",children:Le(yn,"INR",!1)}),m.jsx("td",{className:"p-2 text-right text-blue-800 dark:text-blue-300 border-l border-blue-100 dark:border-blue-800",children:Le(Ut,"INR",!1)})]}),m.jsxs("tr",{className:"bg-slate-800 text-white font-bold border-t-2 border-slate-900 text-sm",children:[m.jsx("td",{className:"p-3 text-right uppercase",children:"Grand Total (Cost)"}),m.jsxs("td",{className:"p-3 text-right text-slate-300 text-xs font-normal",children:[Le(Cn,"INR"),"/sqft"]}),m.jsx("td",{className:"p-3 text-center border-l border-slate-600",children:"-"}),m.jsx("td",{className:"p-3 text-right border-l border-slate-600",children:Le(Qn,"INR",!1)}),m.jsx("td",{className:"p-3 text-right border-l border-slate-600",children:Le(on,"INR",!1)})]})]})]})}),m.jsxs("div",{className:"md:hidden bg-slate-50 dark:bg-slate-800/20 p-3",children:[m.jsx("div",{className:"mb-2 font-bold text-teal-700 text-xs uppercase tracking-wider",children:"A. LED Panel & Logistics"}),V.map(kn),m.jsxs("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"extraComponents",[...me||[],{id:k(),componentId:"",qty:1,type:"screen"}]),className:"w-full py-2 mb-4 bg-white dark:bg-slate-800 border border-teal-200 dark:border-teal-700 text-teal-600 dark:text-teal-400 rounded-lg text-xs font-bold flex items-center justify-center gap-2",children:[m.jsx(go,{size:14})," Add Component"]}),(Array.isArray(re)?re:[]).map((Q,Se)=>m.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 mb-3 shadow-sm flex items-center justify-between",children:[m.jsx("div",{className:"flex-1",children:m.jsx("input",{type:"text",value:Q.name,onChange:He=>We(Se,"name",He.target.value),className:"text-xs font-bold border-b border-transparent focus:border-teal-500 bg-transparent outline-none w-full text-slate-600 dark:text-slate-300"})}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"number",value:Q.val,onChange:He=>We(Se,"val",He.target.value),className:"w-12 p-1 text-right text-xs border rounded bg-slate-50 dark:bg-slate-700"}),m.jsx("button",{type:"button",onClick:()=>We(Se,"type",Q.type==="abs"?"pct":"abs"),className:"px-1 text-[10px] font-bold border rounded bg-slate-100 dark:bg-slate-600",children:Q.type==="abs"?"":"%"}),m.jsx("button",{onClick:()=>$n(Se),className:"text-red-400 p-1",children:m.jsx(ui,{size:14})})]})]},Q.id)),m.jsxs("button",{onClick:Kn,className:"w-full py-2 mb-4 bg-white dark:bg-slate-800 border border-blue-200 dark:border-blue-700 text-blue-600 dark:text-blue-400 rounded-lg text-xs font-bold flex items-center justify-center gap-2",children:[m.jsx(go,{size:14})," Add Overhead Cost"]}),m.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg border border-teal-100 dark:border-teal-800 mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-teal-800 dark:text-teal-300",children:[m.jsx("span",{children:"Sub-total (LED Panel)"}),m.jsx("span",{children:Le(K,"INR",!1)})]}),m.jsxs("div",{className:"text-[10px] text-right text-teal-600 dark:text-teal-400 mt-1",children:[Le(ae,"INR"),"/sqft"]})]}),m.jsx("div",{className:"mb-2 font-bold text-blue-700 text-xs uppercase tracking-wider",children:"B. Additional Costs"}),pe.map(kn),["installation","structure"].map(Q=>{const Se=Q==="installation"?"install":"structure",He=Q==="installation"?"Installation":"Structure";return m.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 mb-3 shadow-sm",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:He}),m.jsxs("select",{value:ce[Q]?.unit||"sqft",onChange:ue=>a(e.activeScreenIndex,"commercials",{...ce,[Q]:{...ce[Q],unit:ue.target.value}}),className:"text-[10px] p-0.5 border rounded bg-slate-50 dark:bg-slate-700",children:[m.jsx("option",{value:"sqft",children:"/Sq.Ft"}),m.jsx("option",{value:"screen",children:"/Screen"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-1 bg-green-50 p-1 rounded border border-green-100",children:[m.jsx("span",{className:"text-[10px] text-green-600 font-bold",children:"Sell:"}),m.jsx("input",{type:"number",className:"w-full p-0.5 text-xs bg-transparent outline-none text-green-800 font-bold",value:ce[Q]?.val||0,onChange:ue=>a(e.activeScreenIndex,"commercials",{...ce,[Q]:{...ce[Q],val:ue.target.value}})})]}),m.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 p-1 rounded border border-slate-100",children:[m.jsx("span",{className:"text-[10px] text-slate-400",children:"Cost:"}),m.jsx("input",{type:"number",className:"w-full p-0.5 text-xs bg-transparent outline-none",value:ce[Q]?.cost||0,onChange:ue=>a(e.activeScreenIndex,"commercials",{...ce,[Q]:{...ce[Q],cost:ue.target.value}})}),m.jsx("button",{type:"button",onClick:()=>a(e.activeScreenIndex,"commercials",{...ce,[Q]:{...ce[Q],costType:ce[Q]?.costType==="abs"?"pct":"abs"}}),className:"px-1 text-[10px] font-bold",children:ce[Q]?.costType==="abs"?"":"%"})]})]}),m.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-100 dark:border-slate-700",children:[m.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"Total Cost"}),m.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:Le(Te(Se)*R,"INR",!1)})]})]},Q)}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-100 dark:border-blue-800 mb-6",children:m.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-blue-800 dark:text-blue-300",children:[m.jsx("span",{children:"Sub-total (Additional)"}),m.jsx("span",{children:Le(Ut,"INR",!1)})]})}),m.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg text-white shadow-lg",children:[m.jsxs("div",{className:"flex justify-between items-end mb-1",children:[m.jsx("span",{className:"text-xs uppercase text-slate-400 font-bold",children:"Grand Total (Cost)"}),m.jsx("span",{className:"text-lg font-bold",children:Le(on,"INR",!1)})]}),m.jsxs("div",{className:"text-[10px] text-right text-slate-500",children:[Le(Cn,"INR"),"/sqft"]})]})]})]})},h3=({user:s,inventory:e,transactions:t,state:r,setState:a,exchangeRate:l,setExchangeRate:u,onSaveQuote:p})=>{const{client:h,project:y,screenQty:b,targetWidth:E,targetHeight:T,unit:R,selectedIndoor:q,assemblyMode:U,sizingMode:W,margin:S,extras:J,overrides:se,editingRow:me}=r,[re,ce]=Ht.useState(null),[A,N]=Ht.useState(null),[k,j]=Ht.useState(!1),[P,M]=Ht.useState(!1),[C,Oe]=Ht.useState(!1),Ue=u3(r,300),X=K=>t?t.filter(te=>te.itemId===K).reduce((te,ae)=>te+(ae.type==="in"?Number(ae.qty):-Number(ae.qty)),0):0,he=(K,te)=>a(ae=>({...ae,[K]:te})),Te=(K,te,ae)=>{const pe=r.activeScreenIndex;a(Ee=>{const Re=[...Ee.screens];return Re[pe]={...Re[pe],extras:{...Re[pe].extras,[K]:{...Re[pe].extras[K],[te]:ae}}},{...Ee,screens:Re}})},Me=()=>{confirm("Reset calculator to defaults?")&&a({client:"",project:"",unit:"ft",screens:[{id:S0(),screenQty:0,targetWidth:0,targetHeight:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedSMPSId:"",selectedProcId:"",sizingMode:"closest",readyId:"",extraComponents:[],overrides:{},editingRow:null,extras:[],commercials:{processor:{val:0,unit:"screen",cost:0,costType:"abs"},installation:{val:0,unit:"sqft",cost:0,costType:"abs"},structure:{val:0,unit:"sqft",cost:0,costType:"abs"}}}],activeScreenIndex:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedSMPSId:"",selectedProcId:"",sizingMode:"closest",readyId:"",margin:0,pricingMode:"margin",targetSellPrice:0,extraComponents:[],commercials:{processor:{val:0,unit:"screen"},installation:{val:0,unit:"sqft"},structure:{val:0,unit:"sqft"}},terms:{price:Ft.DEFAULTS.PRICE_BASIS,deliveryWeeks:Ft.DEFAULTS.DELIVERY_WEEKS,payment:Ft.DEFAULTS.PAYMENT_TERMS},extras:[],overrides:{},editingRow:null})},ze=()=>{const K={id:S0(),screenQty:1,targetWidth:0,targetHeight:0,selectedIndoor:r.selectedIndoor,assemblyMode:r.assemblyMode,selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedPSUId:"",selectedProcId:"",sizingMode:"closest",readyId:"",extraComponents:[],overrides:{},editingRow:null,extras:[],commercials:{processor:{val:0,unit:"screen",cost:0,costType:"abs"},installation:{val:0,unit:"sqft",cost:0,costType:"abs"},structure:{val:0,unit:"sqft",cost:0,costType:"abs"}}};a(te=>({...te,screens:[...te.screens,K],activeScreenIndex:te.screens.length}))},V=(K,te,ae)=>{a(pe=>{const Ee=[...pe.screens];return Ee[K]={...Ee[K],[te]:ae},{...pe,screens:Ee}})},ee=(K,te,ae)=>{const pe=r.screens[r.activeScreenIndex];V(r.activeScreenIndex,"overrides",{...pe.overrides,[K]:{...pe.overrides[K],[te]:ae}})},ge=K=>{const ae={...r.screens[r.activeScreenIndex].overrides};delete ae[K],V(r.activeScreenIndex,"overrides",ae),V(r.activeScreenIndex,"editingRow",null)};return Ht.useEffect(()=>{if(!Ue.screens||Ue.screens.length===0){ce(null);return}const K=Ue.screens[Ue.activeScreenIndex];if(!K){ce(null);return}const te={...Ue,...K},ae=xo(te,e,t,l);ce(ae)},[Ue,e,l]),Ht.useEffect(()=>{const te=(()=>{if(!Ue.screens||Ue.screens.length===0)return null;const ae=Ue.screens.map(Ee=>{const Re={...Ue,...Ee};return xo(Re,e,t,l)}).filter(Ee=>Ee!==null);if(ae.length===0)return null;const pe={totalProjectCost:ae.reduce((Ee,Re)=>Ee+Re.totalProjectCost,0),totalProjectSell:ae.reduce((Ee,Re)=>Ee+Re.totalProjectSell,0),totalLEDSell:ae.reduce((Ee,Re)=>Ee+Re.matrix.led.sell*Re.screenQty,0),totalServicesSell:ae.reduce((Ee,Re)=>Ee+(Re.matrix.sell.total-Re.matrix.led.sell*Re.screenQty),0),totalMargin:0,totalScreenQty:ae.reduce((Ee,Re)=>Ee+Number(Re.screenQty),0),calculations:ae,screenConfigs:Ue.screens};return pe.totalMargin=pe.totalProjectSell-pe.totalProjectCost,pe})();N(te)},[Ue,e,l]),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 relative items-start",children:[C&&(re||A)&&m.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:m.jsxs("div",{className:"bg-white dark:bg-slate-900 max-w-5xl w-full h-[90vh] rounded-lg shadow-2xl flex flex-col overflow-hidden",children:[m.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800",children:[m.jsx("div",{className:"flex items-center gap-4",children:m.jsxs("h2",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[m.jsx(My,{size:20,className:"text-teal-600"})," Cost Sheet (BOM)"]})}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>Oe(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded text-sm font-bold",children:"Close"}),m.jsxs("button",{onClick:()=>{const K=document.title;document.title=`${h}_${y}_BOM`.replace(/[^a-zA-Z0-9_]/g,"_"),window.print(),document.title=K},className:"px-4 py-2 bg-slate-800 text-white hover:bg-slate-700 rounded flex items-center gap-2 text-sm font-bold",children:[m.jsx(Bf,{size:16})," Print"]})]})]}),m.jsx("div",{className:"flex-1 overflow-auto bg-slate-100 dark:bg-slate-800 p-8 flex justify-center",children:m.jsx(c3,{data:re?{...re,clientName:h,projectName:y}:null,allScreensData:A?{...A,clientName:h,projectName:y,screenConfigs:r.screens.map(K=>({targetWidth:K.targetWidth,targetHeight:K.targetHeight,unit:R}))}:null,inventory:e,transactions:t})})]})}),k&&(re||A)&&m.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:m.jsxs("div",{className:"bg-white max-w-4xl w-full h-[90vh] rounded-lg shadow-2xl flex flex-col",children:[m.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-100 rounded-t-lg",children:[m.jsxs("h2",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[m.jsx(Oy,{size:20})," Print Preview"]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded",children:"Close"}),m.jsxs("button",{onClick:()=>{const K=document.title;document.title=`${h}_${y}_Quote`.replace(/[^a-zA-Z0-9_]/g,"_"),window.print(),document.title=K},className:"px-4 py-2 bg-teal-600 text-white hover:bg-teal-700 rounded flex items-center gap-2",children:[m.jsx(Bf,{size:16})," Print / Save PDF"]})]})]}),m.jsx("div",{className:"flex-1 overflow-auto p-8 bg-slate-200",children:m.jsx(yN,{data:re?{...re,clientName:h,projectName:y,margin:S}:null,allScreensData:A?{...A,clientName:h,projectName:y}:null,currency:"INR",exchangeRate:l})})]})}),P&&re&&m.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex justify-center items-center p-4",children:m.jsxs("div",{className:"bg-white dark:bg-slate-900 max-w-2xl w-full rounded-lg shadow-2xl flex flex-col",children:[m.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-100 dark:bg-slate-800 rounded-t-lg",children:[m.jsxs("h2",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[m.jsx(zf,{size:20,className:"text-teal-600"})," Stock Availability"]}),m.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded",children:"Close"})]}),m.jsx("div",{className:"p-6 overflow-auto",children:m.jsxs("table",{className:"w-full text-sm text-left border border-slate-200 dark:border-slate-700 rounded",children:[m.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-300 uppercase font-bold text-xs",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-2",children:"Component"}),m.jsx("th",{className:"px-4 py-2 text-center",children:"Required"}),m.jsx("th",{className:"px-4 py-2 text-center",children:"Stock"}),m.jsx("th",{className:"px-4 py-2 text-center",children:"Balance"})]})}),m.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-slate-800",children:re.detailedItems.map((K,te)=>{const ae=K.qty*re.screenQty,pe=K.inventoryId?X(K.inventoryId):0,Ee=pe-ae;return m.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[m.jsxs("td",{className:"px-4 py-2",children:[m.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:K.name}),m.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:K.spec})]}),m.jsx("td",{className:"px-4 py-2 text-center font-bold dark:text-slate-200",children:ae}),m.jsx("td",{className:"px-4 py-2 text-center text-slate-600 dark:text-slate-400",children:pe}),m.jsx("td",{className:`px-4 py-2 text-center font-bold ${Ee>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:Ee})]},te)})})]})})]})}),m.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[m.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-800/50 px-4 py-3 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[m.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2 text-sm",children:[m.jsx(AC,{className:"w-4 h-4 text-teal-600"})," Project Specs"]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("button",{onClick:Me,className:"text-[10px] font-bold text-red-500 hover:text-red-700 uppercase hover:bg-red-50 dark:hover:bg-red-900/20 px-2 py-1 rounded transition-colors mr-2 flex items-center gap-1",children:[m.jsx(Ly,{size:10})," Reset"]}),m.jsxs("div",{className:"flex bg-slate-200 dark:bg-slate-700 rounded-md p-0.5",children:[m.jsx("button",{onClick:()=>he("unit","m"),className:`px-2 py-0.5 text-[10px] font-bold rounded transition-all ${R==="m"?"bg-white dark:bg-slate-600 shadow text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400"}`,children:"M"}),m.jsx("button",{onClick:()=>he("unit","ft"),className:`px-2 py-0.5 text-[10px] font-bold rounded transition-all ${R==="ft"?"bg-white dark:bg-slate-600 shadow text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400"}`,children:"FT"})]})]})]}),m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[m.jsxs("div",{className:"relative group",children:[m.jsx("label",{className:"absolute -top-1.5 left-2 bg-white dark:bg-slate-800 px-1 text-[10px] font-bold text-teal-600 dark:text-teal-400",children:"CLIENT"}),m.jsx("input",{value:h,onChange:K=>he("client",K.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-sm outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 dark:text-white transition-all",placeholder:"Client Name"})]}),m.jsxs("div",{className:"relative group",children:[m.jsx("label",{className:"absolute -top-1.5 left-2 bg-white dark:bg-slate-800 px-1 text-[10px] font-bold text-teal-600 dark:text-teal-400",children:"PROJECT"}),m.jsx("input",{value:y,onChange:K=>he("project",K.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-sm outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 dark:text-white transition-all",placeholder:"Project Ref"})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[m.jsxs("div",{className:"flex items-center border border-slate-200 dark:border-slate-600 rounded-md overflow-hidden h-8",children:[m.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-3 h-full flex items-center border-r border-slate-200 dark:border-slate-600 text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase w-20 justify-center",children:"Type"}),m.jsxs("div",{className:"flex-1 flex p-0.5 bg-slate-50 dark:bg-slate-800 h-full",children:[m.jsx("button",{onClick:()=>{he("selectedIndoor","true"),V(r.activeScreenIndex,"selectedIndoor","true")},className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${q==="true"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Indoor"}),m.jsx("button",{onClick:()=>{he("selectedIndoor","false"),V(r.activeScreenIndex,"selectedIndoor","false")},className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${q==="false"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Outdoor"})]})]}),m.jsxs("div",{className:"flex items-center border border-slate-200 dark:border-slate-600 rounded-md overflow-hidden h-8",children:[m.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 px-3 h-full flex items-center border-r border-slate-200 dark:border-slate-600 text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase w-20 justify-center",children:"Supply"}),m.jsxs("div",{className:"flex-1 flex p-0.5 bg-slate-50 dark:bg-slate-800 h-full",children:[m.jsx("button",{onClick:()=>{he("assemblyMode","assembled"),V(r.activeScreenIndex,"assemblyMode","assembled")},className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${U==="assembled"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Assm"}),m.jsx("button",{onClick:()=>{he("assemblyMode","ready"),V(r.activeScreenIndex,"assemblyMode","ready")},className:`flex-1 text-[10px] font-bold rounded-sm transition-all ${U==="ready"?"bg-white dark:bg-slate-600 shadow text-teal-700 dark:text-teal-300":"text-slate-400 hover:text-slate-600"}`,children:"Ready"})]})]})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Screen Configurations"}),m.jsxs("button",{onClick:ze,className:"text-[10px] font-bold text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 flex items-center gap-1 bg-teal-50 dark:bg-teal-900/30 px-2 py-1 rounded transition-colors border border-teal-100 dark:border-teal-800",children:[m.jsx(go,{size:12})," Add Size"]})]}),m.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-12 gap-2 mb-1 px-2 text-[9px] font-bold text-slate-400 uppercase tracking-wider hidden md:grid",children:[m.jsx("div",{className:"col-span-1 text-center",children:"#"}),m.jsxs("div",{className:"col-span-3",children:["Width (",R,")"]}),m.jsxs("div",{className:"col-span-3",children:["Height (",R,")"]}),m.jsx("div",{className:"col-span-2 text-center",children:"Qty"}),m.jsx("div",{className:"col-span-2",children:"Sizing"}),m.jsx("div",{className:"col-span-1 text-right",children:"Actions"})]}),m.jsx("div",{className:"space-y-1 max-h-[300px] overflow-y-auto pr-1 custom-scrollbar",children:r.screens.map((K,te)=>m.jsxs("div",{onClick:()=>a({...r,activeScreenIndex:te}),className:`grid grid-cols-4 md:grid-cols-12 gap-3 items-start p-3 rounded-lg border transition-all cursor-pointer ${r.activeScreenIndex===te?"border-teal-500 ring-1 ring-teal-500 bg-teal-50/50 dark:bg-teal-900/10":"border-slate-200 dark:border-slate-700 hover:border-teal-300"}`,children:[m.jsxs("div",{className:"col-span-4 md:col-span-1 flex justify-between md:justify-center items-center border-b md:border-b-0 pb-2 md:pb-0 mb-1 md:mb-0",children:[m.jsxs("span",{className:"text-xs font-bold text-slate-500 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:["#",te+1]}),m.jsxs("div",{className:"md:hidden flex gap-3",children:[m.jsx("button",{onClick:ae=>{ae.stopPropagation();const pe=[...r.screens],Ee=Math.random().toString(36).substr(2,9);pe.splice(te+1,0,{...pe[te],id:Ee}),a({...r,screens:pe,activeScreenIndex:te+1})},className:"text-blue-500 hover:text-blue-700 bg-blue-50 p-1.5 rounded",children:m.jsx(jy,{size:16})}),r.screens.length>1&&m.jsx("button",{onClick:ae=>{ae.stopPropagation();const pe=r.screens.filter((Ee,Re)=>Re!==te);a({...r,screens:pe,activeScreenIndex:Math.max(0,te-1)})},className:"text-red-400 hover:text-red-600 bg-red-50 p-1.5 rounded",children:m.jsx(ui,{size:16})})]})]}),m.jsxs("div",{className:"col-span-2 md:col-span-3",children:[m.jsxs("label",{className:"md:hidden text-[10px] font-bold text-slate-400 mb-1 block uppercase",children:["Width (",r.unit,")"]}),m.jsx("input",{type:"number",value:K.targetWidth,onChange:ae=>V(te,"targetWidth",ae.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:border-teal-500 outline-none",placeholder:"W"})]}),m.jsxs("div",{className:"col-span-2 md:col-span-3",children:[m.jsxs("label",{className:"md:hidden text-[10px] font-bold text-slate-400 mb-1 block uppercase",children:["Height (",r.unit,")"]}),m.jsx("input",{type:"number",value:K.targetHeight,onChange:ae=>V(te,"targetHeight",ae.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:border-teal-500 outline-none",placeholder:"H"})]}),m.jsxs("div",{className:"col-span-2 md:col-span-2",children:[m.jsx("label",{className:"md:hidden text-[10px] font-bold text-slate-400 mb-1 block uppercase",children:"Qty"}),m.jsx("input",{type:"number",value:K.screenQty,onChange:ae=>V(te,"screenQty",ae.target.value),className:"w-full p-2 text-center text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:border-teal-500 outline-none",placeholder:"Qty"})]}),m.jsxs("div",{className:"col-span-2 md:col-span-2",children:[m.jsx("label",{className:"md:hidden text-[10px] font-bold text-slate-400 mb-1 block uppercase",children:"Sizing"}),m.jsxs("select",{value:K.sizingMode,onChange:ae=>V(te,"sizingMode",ae.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white bg-white outline-none",children:[m.jsx("option",{value:"closest",children:"Auto"}),m.jsx("option",{value:"exact",children:"Exact"})]})]}),m.jsxs("div",{className:"hidden md:flex col-span-1 justify-end gap-1",children:[m.jsx("button",{onClick:ae=>{ae.stopPropagation();const pe=[...r.screens],Ee=Math.random().toString(36).substr(2,9);pe.splice(te+1,0,{...pe[te],id:Ee}),a({...r,screens:pe,activeScreenIndex:te+1})},className:"p-1.5 text-slate-400 hover:text-blue-500 hover:bg-blue-50 rounded transition-colors",title:"Duplicate",children:m.jsx(jy,{size:14})}),r.screens.length>1&&m.jsx("button",{onClick:ae=>{ae.stopPropagation();const pe=r.screens.filter((Ee,Re)=>Re!==te);a({...r,screens:pe,activeScreenIndex:Math.max(0,te-1)})},className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"Remove",children:m.jsx(ui,{size:14})})]})]},K.id))})]})]})]}),m.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:m.jsxs("details",{className:"group p-4",open:!0,children:[m.jsxs("summary",{className:"flex justify-between items-center cursor-pointer list-none",children:[m.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[m.jsx(zf,{className:"w-4 h-4 text-teal-600"})," Hardware & Cost Breakdown",r.screens.length>1&&m.jsxs("span",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:["(Screen #",r.activeScreenIndex+1," of ",r.screens.length,")"]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-teal-600 text-xs font-bold group-open:hidden",children:"Show Table"}),m.jsx("span",{className:"text-slate-400 text-xs hidden group-open:block",children:"Hide Table"})]})]}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 dark:border-slate-700",children:[r.screens.length>1&&m.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:r.screens.map((K,te)=>{const ae=r.activeScreenIndex===te,pe=K.targetWidth&&K.targetHeight?`${K.targetWidth}${K.targetHeight}${R} (${K.screenQty})`:`Screen #${te+1}`;return m.jsx("button",{onClick:()=>he("activeScreenIndex",te),className:`flex-shrink-0 px-4 py-2 rounded-lg text-xs font-bold transition-all ${ae?"bg-teal-600 text-white shadow-lg":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("span",{children:["#",te+1]}),m.jsx("span",{className:"text-[10px] opacity-75",children:pe})]})},K.id)})}),r.screens[r.activeScreenIndex]&&m.jsx("div",{className:"mb-4 p-3 bg-slate-50 dark:bg-slate-700/30 rounded-lg border border-slate-200 dark:border-slate-600",children:m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Dimensions:"}),m.jsxs("span",{className:"ml-2 font-bold text-slate-800 dark:text-white",children:[r.screens[r.activeScreenIndex].targetWidth||0,"  ",r.screens[r.activeScreenIndex].targetHeight||0," ",R]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Quantity:"}),m.jsxs("span",{className:"ml-2 font-bold text-teal-600 dark:text-teal-400",children:[r.screens[r.activeScreenIndex].screenQty||0," screens"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Sizing:"}),m.jsx("span",{className:"ml-2 font-bold text-slate-800 dark:text-white capitalize",children:r.screens[r.activeScreenIndex].sizingMode})]}),re&&m.jsxs("div",{children:[m.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-semibold",children:"Final Size:"}),m.jsxs("span",{className:"ml-2 font-bold text-slate-800 dark:text-white",children:[re.finalWidth,"  ",re.finalHeight," m"]})]})]})}),m.jsx(d3,{calculation:re,state:r,updateState:he,updateExtra:Te,updateScreenProp:V,inventory:e,getStock:X,overrides:r.screens[r.activeScreenIndex]?.overrides||{},onOverride:ee,editingRow:r.screens[r.activeScreenIndex]?.editingRow,setEditingRow:K=>V(r.activeScreenIndex,"editingRow",K),onClearOverride:ge})]})]})}),m.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700",children:m.jsxs("details",{className:"group p-4",children:[m.jsxs("summary",{className:"flex justify-between items-center cursor-pointer list-none",children:[m.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"Terms & Conditions"}),m.jsx("span",{className:"text-teal-600 text-xs group-open:hidden",children:"Show Details"})]}),m.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-slate-100 dark:border-slate-700",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Price Basis"}),m.jsx("input",{value:r.terms?.price,onChange:K=>a(te=>({...te,terms:{...te.terms,price:K.target.value}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Delivery Weeks"}),m.jsx("input",{type:"number",value:r.terms?.deliveryWeeks,onChange:K=>a(te=>({...te,terms:{...te.terms,deliveryWeeks:K.target.value}})),className:"w-full p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),m.jsxs("div",{className:"col-span-1 md:col-span-2",children:[m.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 block mb-2",children:"Payment Milestones"}),(r.terms?.payment||[]).map((K,te)=>m.jsxs("div",{className:"flex gap-2 mb-2",children:[m.jsx("input",{value:K.name,onChange:ae=>{const pe=[...r.terms.payment];pe[te].name=ae.target.value,a(Ee=>({...Ee,terms:{...Ee.terms,payment:pe}}))},className:"flex-1 p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"Milestone Name"}),m.jsx("input",{type:"number",value:K.percent,onChange:ae=>{const pe=[...r.terms.payment];pe[te].percent=Number(ae.target.value),a(Ee=>({...Ee,terms:{...Ee.terms,payment:pe}}))},className:"w-16 p-2 border rounded text-xs dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"%"}),m.jsx("button",{onClick:()=>{const ae=r.terms.payment.filter((pe,Ee)=>Ee!==te);a(pe=>({...pe,terms:{...pe.terms,payment:ae}}))},className:"text-red-400",children:m.jsx(nI,{size:14})})]},te)),m.jsx("button",{onClick:()=>a(K=>({...K,terms:{...K.terms,payment:[...K.terms.payment||[],{name:"",percent:0}]}})),className:"text-xs text-teal-600 font-bold",children:"+ Add Milestone"})]})]})]})}),m.jsx("div",{className:"h-10"})]}),m.jsxs("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-24",children:[m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[m.jsxs("div",{className:"p-5 bg-gradient-to-br from-slate-50 to-white dark:from-slate-700 dark:to-slate-800",children:[r.screens.length>1&&A&&m.jsxs("div",{className:"mb-4 pb-4 border-b border-slate-200 dark:border-slate-600",children:[m.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 mb-2",children:"Project Summary"}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[m.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded",children:[m.jsx("div",{className:"text-[10px] text-blue-600 dark:text-blue-400 font-semibold",children:"Screen Types"}),m.jsx("div",{className:"font-bold text-blue-800 dark:text-blue-300",children:r.screens.length})]}),m.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-2 rounded",children:[m.jsx("div",{className:"text-[10px] text-teal-600 dark:text-teal-400 font-semibold",children:"Total Qty"}),m.jsx("div",{className:"font-bold text-teal-800 dark:text-teal-300",children:A.totalScreenQty})]})]})]}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Margin Strategy"}),m.jsxs("select",{value:r.pricingMode||"margin",onChange:K=>{const te=K.target.value;if(he("pricingMode",te),te!=="margin"&&re){let ae=0;te==="screen"?ae=re.matrix.sell.unit:te==="sqft"?ae=re.matrix.sell.sqft:te==="sqm"&&(ae=re.matrix.sell.sqft*10.7639),he("targetSellPrice",Math.round(ae))}},className:"text-xs border-none bg-transparent font-bold text-teal-600 dark:text-teal-400 focus:ring-0 cursor-pointer outline-none",children:[m.jsx("option",{value:"margin",children:"Margin %"}),m.jsx("option",{value:"sqft",children:"Price / Sq.Ft"}),m.jsx("option",{value:"sqm",children:"Price / Sq.Mtr"}),m.jsx("option",{value:"screen",children:"Price / Screen"})]})]}),m.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[m.jsx("input",{type:"number",value:r.pricingMode==="margin"?S:r.targetSellPrice,onChange:K=>{const te=parseFloat(K.target.value)||0;r.pricingMode==="margin"?he("margin",te):he("targetSellPrice",te)},className:"w-24 text-center text-xl font-bold p-2 border rounded-lg bg-white dark:bg-slate-600 dark:border-slate-500 shadow-sm focus:ring-2 focus:ring-teal-500/50 outline-none dark:text-white"}),m.jsx("span",{className:"text-lg font-bold text-slate-400",children:r.pricingMode==="margin"?"%":""}),m.jsxs("div",{className:"flex-1 text-right",children:[m.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold",children:r.screens.length>1?"Total Profit":"Est. Profit"}),m.jsx("div",{className:`text-sm font-bold ${(A?A.totalMargin:re?.matrix.margin.total||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:A?Le(A.totalMargin,"INR"):re?Le(re.matrix.margin.total,"INR"):"-"})]})]}),m.jsx("div",{className:"space-y-3 pt-4 border-t border-slate-100 dark:border-slate-600",children:r.screens.length>1?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex justify-between items-end",children:[m.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"LED Panels (All)"}),m.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:A?Le(A.totalLEDSell,"INR"):"-"})]}),m.jsxs("div",{className:"flex justify-between items-end",children:[m.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Services & Extras"}),m.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:A?Le(A.totalServicesSell,"INR"):"-"})]}),m.jsxs("details",{className:"group",children:[m.jsx("summary",{className:"text-[10px] text-teal-600 dark:text-teal-400 font-bold uppercase cursor-pointer hover:underline",children:"View Screen Breakdown"}),m.jsx("div",{className:"mt-2 space-y-2 pl-2 border-l-2 border-slate-200 dark:border-slate-600",children:A?.calculations.map((K,te)=>m.jsx("div",{className:"text-xs",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Screen #",te+1,m.jsxs("span",{className:"text-[10px] ml-1",children:["(",r.screens[te].targetWidth,"",r.screens[te].targetHeight,R," ",K.screenQty,")"]})]}),m.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:Le(K.totalProjectSell,"INR")})]})},te))})]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex justify-between items-end",children:[m.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"LED Panel Price"}),m.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:re?Le(re.matrix.led.sell*re.screenQty,"INR"):"-"})]}),m.jsxs("div",{className:"flex justify-between items-end",children:[m.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Services & Extras"}),m.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:re?Le(re.matrix.sell.total-re.matrix.led.sell*re.screenQty,"INR"):"-"})]}),m.jsxs("div",{className:"flex justify-between items-end pt-2 mt-2 border-t border-dashed border-slate-200 dark:border-slate-600",children:[m.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"Rate / Sq.Ft"}),m.jsx("span",{className:"font-bold text-slate-500 dark:text-slate-400",children:re?Le(re.matrix.sell.sqft,"INR"):"-"})]})]})})]}),m.jsxs("div",{className:"bg-slate-900 p-5 text-white",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("span",{className:"text-sm text-slate-400",children:"Grand Total (Ex. GST)"}),r.screens.length>1&&m.jsxs("span",{className:"text-xs text-teal-400 font-bold",children:[A?.totalScreenQty||0," screens"]})]}),m.jsx("div",{className:"flex justify-between items-baseline",children:m.jsx("span",{className:"text-3xl font-bold tracking-tight",children:A?Le(A.totalProjectSell,"INR"):re?Le(re.totalProjectSell,"INR"):"-"})}),m.jsxs("button",{onClick:()=>p(A?A.totalProjectSell:re?.totalProjectSell),className:"w-full mt-4 py-3 bg-teal-600 hover:bg-teal-500 text-white font-bold rounded-lg shadow-lg shadow-teal-900/20 transition-all flex justify-center items-center gap-2",children:[m.jsx(IC,{size:18})," Save Quote"]})]})]}),m.jsx("div",{className:"bg-slate-900 rounded-xl shadow-lg p-6 text-white overflow-hidden relative min-h-[250px] flex items-center justify-center",children:re?m.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:m.jsx(o3,{cols:re.gridCols,rows:re.gridRows,module:re.moduleType,cabinet:re.cabinetType,unit:R})}):m.jsxs("div",{className:"text-slate-500 flex flex-col items-center",children:[m.jsx(_C,{size:32,className:"mb-2 opacity-50"}),m.jsx("span",{children:"Enter dimensions"})]})}),m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsxs("button",{onClick:()=>Oe(!0),className:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 flex flex-col items-center justify-center gap-1 transition-colors",children:[m.jsx(My,{size:16,className:"text-blue-500"})," ",m.jsx("span",{className:"text-[10px]",children:"BOM"})]}),m.jsxs("button",{onClick:()=>j(!0),className:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 flex flex-col items-center justify-center gap-1 transition-colors",children:[m.jsx(Bf,{size:16})," ",m.jsx("span",{className:"text-[10px]",children:"Print"})]}),m.jsxs("button",{onClick:()=>M(!0),className:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 flex flex-col items-center justify-center gap-1 transition-colors",children:[m.jsx(zf,{size:16,className:"text-teal-500"})," ",m.jsx("span",{className:"text-[10px]",children:"Stock"})]})]})]})]})},f3=()=>{const[s,e]=wn.useState(null),[t,r]=wn.useState("quote"),[a,l]=wn.useState([]),[u,p]=wn.useState([]),[h,y]=wn.useState(!1),[b,E]=wn.useState(Ft.DEFAULTS.EXCHANGE_RATE),T={client:"",project:"",unit:"m",screens:[{id:S0(),screenQty:0,targetWidth:0,targetHeight:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedSMPSId:"",selectedProcId:"",sizingMode:"closest",readyId:"",extraComponents:[],overrides:{},editingRow:null,extras:[],commercials:{processor:{val:0,unit:"screen",cost:0,costType:"abs"},installation:{val:0,unit:"sqft",cost:0,costType:"abs"},structure:{val:0,unit:"sqft",cost:0,costType:"abs"}}}],activeScreenIndex:0,selectedIndoor:"true",assemblyMode:"assembled",selectedPitch:"",selectedModuleId:"",selectedCabinetId:"",selectedCardId:"",selectedSMPSId:"",selectedProcId:"",sizingMode:"closest",readyId:"",margin:0,targetSellPrice:0,pricingMode:"margin",commercials:{processor:{val:0,unit:"screen"},installation:{val:0,unit:"sqft"},structure:{val:0,unit:"sqft"}},terms:{price:Ft.DEFAULTS.PRICE_BASIS,deliveryWeeks:Ft.DEFAULTS.DELIVERY_WEEKS,payment:Ft.DEFAULTS.PAYMENT_TERMS},extraComponents:[],extras:[],overrides:{},editingRow:null},[R,q]=wn.useState(T);wn.useEffect(()=>{Zw.onAuthStateChanged(e),Zw.signInAnonymously().catch(console.error)},[]),wn.useEffect(()=>{document.documentElement.classList.toggle("dark",h)},[h]),wn.useEffect(()=>{if(!s||!jr)return;const S=jr.collection("artifacts").doc(Ms).collection("public").doc("data").collection("inventory").onSnapshot(se=>l(se.docs.map(me=>({id:me.id,...me.data()})))),J=jr.collection("artifacts").doc(Ms).collection("public").doc("data").collection("transactions").onSnapshot(se=>p(se.docs.map(me=>({id:me.id,...me.data()}))));return()=>{S(),J()}},[s]);const U=async S=>{if(!R.client||!R.project)return alert("Please enter Client and Project names.");let J=null;if(R.screens&&R.screens.length>0){const se=R.screens.map(me=>{const re={...R,...me};return xo(re,a,u,b)}).filter(me=>me!==null);se.length>0&&(J={totalProjectCost:se.reduce((me,re)=>me+re.totalProjectCost,0),totalProjectSell:se.reduce((me,re)=>me+re.totalProjectSell,0),totalLEDSell:se.reduce((me,re)=>me+re.matrix.led.sell*re.screenQty,0),totalServicesSell:se.reduce((me,re)=>me+(re.matrix.sell.total-re.matrix.led.sell*re.screenQty),0),totalMargin:0,totalScreenQty:se.reduce((me,re)=>me+re.screenQty,0),calculations:se,screenConfigs:R.screens},J.totalMargin=J.totalProjectSell-J.totalProjectCost)}try{await jr.collection("artifacts").doc(Ms).collection("public").doc("data").collection("quotes").add({client:R.client,project:R.project,calculatorState:R,finalAmount:S||0,screenCount:R.screens.length,totalScreenQty:J?.totalScreenQty||0,allScreensData:J,updatedAt:new Date}),alert("Quote Saved Successfully!")}catch(se){console.error(se),alert("Error saving quote.")}},W=(S,J)=>{const se={...S.calculatorState};J&&(se.client=se.client+" (Copy)",se.project=se.project+" (Copy)"),q(se),r("quote")};return s?m.jsxs("div",{className:"min-h-screen no-print pb-20 bg-slate-50 dark:bg-slate-900 transition-colors font-sans",children:[m.jsxs("nav",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50 px-4 md:px-6 h-16 flex items-center justify-between shadow-sm",children:[m.jsx("div",{className:"flex items-center gap-3",children:m.jsx("img",{src:"/AdmireLED/logo.png",alt:"Logo",className:"h-10 w-auto"})}),m.jsxs("div",{className:"flex gap-4 items-center",children:[m.jsxs("div",{className:"hidden md:flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[m.jsx("button",{onClick:()=>r("quote"),className:`px-4 py-1.5 rounded-md text-sm font-semibold transition-all ${t==="quote"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Calculator"}),m.jsx("button",{onClick:()=>r("inventory"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${t==="inventory"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Components"}),m.jsx("button",{onClick:()=>r("ledger"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${t==="ledger"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Stock"}),m.jsx("button",{onClick:()=>r("saved"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${t==="saved"?"bg-white dark:bg-slate-600 shadow-sm text-teal-600 dark:text-teal-400":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:"Quotes"})]}),m.jsxs("div",{className:"flex items-center gap-2 pl-4 border-l border-slate-200 dark:border-slate-700",children:[m.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-700 rounded px-2 py-1",title:"Exchange rate for USD items",children:[m.jsx("span",{className:"text-[10px] text-slate-500 font-bold mr-1",children:"$1="}),m.jsx("input",{type:"number",value:b,onChange:S=>E(Number(S.target.value)),className:"w-8 bg-transparent text-xs outline-none font-bold dark:text-white"})]}),m.jsx("button",{onClick:()=>y(!h),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-500 dark:text-slate-400 transition-colors",children:h?m.jsx(CC,{size:18}):m.jsx(bC,{size:18})})]})]})]}),m.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-16 z-40 flex shadow-sm",children:[m.jsx("button",{onClick:()=>r("quote"),className:`flex-1 py-3 text-xs font-bold text-center border-b-2 transition-colors ${t==="quote"?"border-teal-600 text-teal-600 dark:text-teal-400":"border-transparent text-slate-500 dark:text-slate-400"}`,children:"Calculator"}),m.jsx("button",{onClick:()=>r("inventory"),className:`flex-1 py-3 text-xs font-bold text-center border-b-2 transition-colors ${t==="inventory"?"border-teal-600 text-teal-600 dark:text-teal-400":"border-transparent text-slate-500 dark:text-slate-400"}`,children:"Components"}),m.jsx("button",{onClick:()=>r("ledger"),className:`flex-1 py-3 text-xs font-bold text-center border-b-2 transition-colors ${t==="ledger"?"border-teal-600 text-teal-600 dark:text-teal-400":"border-transparent text-slate-500 dark:text-slate-400"}`,children:"Stock"}),m.jsx("button",{onClick:()=>r("saved"),className:`flex-1 py-3 text-xs font-bold text-center border-b-2 transition-colors ${t==="saved"?"border-teal-600 text-teal-600 dark:text-teal-400":"border-transparent text-slate-500 dark:text-slate-400"}`,children:"Quotes"})]}),m.jsxs("main",{className:"max-w-[1600px] mx-auto p-4 md:p-6",children:[t==="inventory"&&m.jsx(s3,{user:s,transactions:u}),t==="ledger"&&m.jsx(i3,{user:s,inventory:a,transactions:u}),t==="saved"&&m.jsx(l3,{user:s,inventory:a,transactions:u,exchangeRate:b,onLoadQuote:W}),t==="quote"&&m.jsx(h3,{user:s,inventory:a,transactions:u,state:R,setState:q,exchangeRate:b,setExchangeRate:E,onSaveQuote:U})]})]}):m.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600"})})};rC.createRoot(document.getElementById("root")).render(m.jsx(Ht.StrictMode,{children:m.jsx(f3,{})}));
